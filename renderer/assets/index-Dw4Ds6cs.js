(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();function Lb(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var gg={exports:{}},Wd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0;function Hw(){if(E0)return Wd;E0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:s,type:n,key:d,ref:o!==void 0?o:null,props:c}}return Wd.Fragment=t,Wd.jsx=r,Wd.jsxs=r,Wd}var T0;function Vw(){return T0||(T0=1,gg.exports=Hw()),gg.exports}var e=Vw(),xg={exports:{}},as={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function qw(){if(M0)return as;M0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function S(Q){return Q===null||typeof Q!="object"?null:(Q=w&&Q[w]||Q["@@iterator"],typeof Q=="function"?Q:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,z={};function I(Q,xe,ve){this.props=Q,this.context=xe,this.refs=z,this.updater=ve||_}I.prototype.isReactComponent={},I.prototype.setState=function(Q,xe){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,xe,"setState")},I.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function U(){}U.prototype=I.prototype;function q(Q,xe,ve){this.props=Q,this.context=xe,this.refs=z,this.updater=ve||_}var O=q.prototype=new U;O.constructor=q,E(O,I.prototype),O.isPureReactComponent=!0;var R=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function ee(Q,xe,ve,ae,Ce,pe){return ve=pe.ref,{$$typeof:s,type:Q,key:xe,ref:ve!==void 0?ve:null,props:pe}}function oe(Q,xe){return ee(Q.type,xe,void 0,void 0,void 0,Q.props)}function je(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===s}function de(Q){var xe={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(ve){return xe[ve]})}var re=/\/+/g;function Te(Q,xe){return typeof Q=="object"&&Q!==null&&Q.key!=null?de(""+Q.key):xe.toString(36)}function De(){}function ne(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(De,De):(Q.status="pending",Q.then(function(xe){Q.status==="pending"&&(Q.status="fulfilled",Q.value=xe)},function(xe){Q.status==="pending"&&(Q.status="rejected",Q.reason=xe)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function ue(Q,xe,ve,ae,Ce){var pe=typeof Q;(pe==="undefined"||pe==="boolean")&&(Q=null);var k=!1;if(Q===null)k=!0;else switch(pe){case"bigint":case"string":case"number":k=!0;break;case"object":switch(Q.$$typeof){case s:case t:k=!0;break;case y:return k=Q._init,ue(k(Q._payload),xe,ve,ae,Ce)}}if(k)return Ce=Ce(Q),k=ae===""?"."+Te(Q,0):ae,R(Ce)?(ve="",k!=null&&(ve=k.replace(re,"$&/")+"/"),ue(Ce,xe,ve,"",function(x){return x})):Ce!=null&&(je(Ce)&&(Ce=oe(Ce,ve+(Ce.key==null||Q&&Q.key===Ce.key?"":(""+Ce.key).replace(re,"$&/")+"/")+k)),xe.push(Ce)),1;k=0;var L=ae===""?".":ae+":";if(R(Q))for(var f=0;f<Q.length;f++)ae=Q[f],pe=L+Te(ae,f),k+=ue(ae,xe,ve,pe,Ce);else if(f=S(Q),typeof f=="function")for(Q=f.call(Q),f=0;!(ae=Q.next()).done;)ae=ae.value,pe=L+Te(ae,f++),k+=ue(ae,xe,ve,pe,Ce);else if(pe==="object"){if(typeof Q.then=="function")return ue(ne(Q),xe,ve,ae,Ce);throw xe=String(Q),Error("Objects are not valid as a React child (found: "+(xe==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":xe)+"). If you meant to render a collection of children, use an array instead.")}return k}function se(Q,xe,ve){if(Q==null)return Q;var ae=[],Ce=0;return ue(Q,ae,"","",function(pe){return xe.call(ve,pe,Ce++)}),ae}function Ae(Q){if(Q._status===-1){var xe=Q._result;xe=xe(),xe.then(function(ve){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=ve)},function(ve){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=ve)}),Q._status===-1&&(Q._status=0,Q._result=xe)}if(Q._status===1)return Q._result.default;throw Q._result}var Se=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var xe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(xe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function $e(){}return as.Children={map:se,forEach:function(Q,xe,ve){se(Q,function(){xe.apply(this,arguments)},ve)},count:function(Q){var xe=0;return se(Q,function(){xe++}),xe},toArray:function(Q){return se(Q,function(xe){return xe})||[]},only:function(Q){if(!je(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},as.Component=I,as.Fragment=r,as.Profiler=o,as.PureComponent=q,as.StrictMode=n,as.Suspense=h,as.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,as.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return M.H.useMemoCache(Q)}},as.cache=function(Q){return function(){return Q.apply(null,arguments)}},as.cloneElement=function(Q,xe,ve){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var ae=E({},Q.props),Ce=Q.key,pe=void 0;if(xe!=null)for(k in xe.ref!==void 0&&(pe=void 0),xe.key!==void 0&&(Ce=""+xe.key),xe)!P.call(xe,k)||k==="key"||k==="__self"||k==="__source"||k==="ref"&&xe.ref===void 0||(ae[k]=xe[k]);var k=arguments.length-2;if(k===1)ae.children=ve;else if(1<k){for(var L=Array(k),f=0;f<k;f++)L[f]=arguments[f+2];ae.children=L}return ee(Q.type,Ce,void 0,void 0,pe,ae)},as.createContext=function(Q){return Q={$$typeof:d,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:c,_context:Q},Q},as.createElement=function(Q,xe,ve){var ae,Ce={},pe=null;if(xe!=null)for(ae in xe.key!==void 0&&(pe=""+xe.key),xe)P.call(xe,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(Ce[ae]=xe[ae]);var k=arguments.length-2;if(k===1)Ce.children=ve;else if(1<k){for(var L=Array(k),f=0;f<k;f++)L[f]=arguments[f+2];Ce.children=L}if(Q&&Q.defaultProps)for(ae in k=Q.defaultProps,k)Ce[ae]===void 0&&(Ce[ae]=k[ae]);return ee(Q,pe,void 0,void 0,null,Ce)},as.createRef=function(){return{current:null}},as.forwardRef=function(Q){return{$$typeof:m,render:Q}},as.isValidElement=je,as.lazy=function(Q){return{$$typeof:y,_payload:{_status:-1,_result:Q},_init:Ae}},as.memo=function(Q,xe){return{$$typeof:g,type:Q,compare:xe===void 0?null:xe}},as.startTransition=function(Q){var xe=M.T,ve={};M.T=ve;try{var ae=Q(),Ce=M.S;Ce!==null&&Ce(ve,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then($e,Se)}catch(pe){Se(pe)}finally{M.T=xe}},as.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},as.use=function(Q){return M.H.use(Q)},as.useActionState=function(Q,xe,ve){return M.H.useActionState(Q,xe,ve)},as.useCallback=function(Q,xe){return M.H.useCallback(Q,xe)},as.useContext=function(Q){return M.H.useContext(Q)},as.useDebugValue=function(){},as.useDeferredValue=function(Q,xe){return M.H.useDeferredValue(Q,xe)},as.useEffect=function(Q,xe,ve){var ae=M.H;if(typeof ve=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(Q,xe)},as.useId=function(){return M.H.useId()},as.useImperativeHandle=function(Q,xe,ve){return M.H.useImperativeHandle(Q,xe,ve)},as.useInsertionEffect=function(Q,xe){return M.H.useInsertionEffect(Q,xe)},as.useLayoutEffect=function(Q,xe){return M.H.useLayoutEffect(Q,xe)},as.useMemo=function(Q,xe){return M.H.useMemo(Q,xe)},as.useOptimistic=function(Q,xe){return M.H.useOptimistic(Q,xe)},as.useReducer=function(Q,xe,ve){return M.H.useReducer(Q,xe,ve)},as.useRef=function(Q){return M.H.useRef(Q)},as.useState=function(Q){return M.H.useState(Q)},as.useSyncExternalStore=function(Q,xe,ve){return M.H.useSyncExternalStore(Q,xe,ve)},as.useTransition=function(){return M.H.useTransition()},as.version="19.1.1",as}var O0;function Lh(){return O0||(O0=1,xg.exports=qw()),xg.exports}var v=Lh();const Sr=Lb(v);var pg={exports:{}},Xd={},yg={exports:{}},bg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function Kw(){return R0||(R0=1,(function(s){function t(se,Ae){var Se=se.length;se.push(Ae);e:for(;0<Se;){var $e=Se-1>>>1,Q=se[$e];if(0<o(Q,Ae))se[$e]=Ae,se[Se]=Q,Se=$e;else break e}}function r(se){return se.length===0?null:se[0]}function n(se){if(se.length===0)return null;var Ae=se[0],Se=se.pop();if(Se!==Ae){se[0]=Se;e:for(var $e=0,Q=se.length,xe=Q>>>1;$e<xe;){var ve=2*($e+1)-1,ae=se[ve],Ce=ve+1,pe=se[Ce];if(0>o(ae,Se))Ce<Q&&0>o(pe,ae)?(se[$e]=pe,se[Ce]=Se,$e=Ce):(se[$e]=ae,se[ve]=Se,$e=ve);else if(Ce<Q&&0>o(pe,Se))se[$e]=pe,se[Ce]=Se,$e=Ce;else break e}}return Ae}function o(se,Ae){var Se=se.sortIndex-Ae.sortIndex;return Se!==0?Se:se.id-Ae.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var h=[],g=[],y=1,w=null,S=3,_=!1,E=!1,z=!1,I=!1,U=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function R(se){for(var Ae=r(g);Ae!==null;){if(Ae.callback===null)n(g);else if(Ae.startTime<=se)n(g),Ae.sortIndex=Ae.expirationTime,t(h,Ae);else break;Ae=r(g)}}function M(se){if(z=!1,R(se),!E)if(r(h)!==null)E=!0,P||(P=!0,Te());else{var Ae=r(g);Ae!==null&&ue(M,Ae.startTime-se)}}var P=!1,ee=-1,oe=5,je=-1;function de(){return I?!0:!(s.unstable_now()-je<oe)}function re(){if(I=!1,P){var se=s.unstable_now();je=se;var Ae=!0;try{e:{E=!1,z&&(z=!1,q(ee),ee=-1),_=!0;var Se=S;try{t:{for(R(se),w=r(h);w!==null&&!(w.expirationTime>se&&de());){var $e=w.callback;if(typeof $e=="function"){w.callback=null,S=w.priorityLevel;var Q=$e(w.expirationTime<=se);if(se=s.unstable_now(),typeof Q=="function"){w.callback=Q,R(se),Ae=!0;break t}w===r(h)&&n(h),R(se)}else n(h);w=r(h)}if(w!==null)Ae=!0;else{var xe=r(g);xe!==null&&ue(M,xe.startTime-se),Ae=!1}}break e}finally{w=null,S=Se,_=!1}Ae=void 0}}finally{Ae?Te():P=!1}}}var Te;if(typeof O=="function")Te=function(){O(re)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,ne=De.port2;De.port1.onmessage=re,Te=function(){ne.postMessage(null)}}else Te=function(){U(re,0)};function ue(se,Ae){ee=U(function(){se(s.unstable_now())},Ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(se){se.callback=null},s.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<se?Math.floor(1e3/se):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(se){switch(S){case 1:case 2:case 3:var Ae=3;break;default:Ae=S}var Se=S;S=Ae;try{return se()}finally{S=Se}},s.unstable_requestPaint=function(){I=!0},s.unstable_runWithPriority=function(se,Ae){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Se=S;S=se;try{return Ae()}finally{S=Se}},s.unstable_scheduleCallback=function(se,Ae,Se){var $e=s.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?$e+Se:$e):Se=$e,se){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=Se+Q,se={id:y++,callback:Ae,priorityLevel:se,startTime:Se,expirationTime:Q,sortIndex:-1},Se>$e?(se.sortIndex=Se,t(g,se),r(h)===null&&se===r(g)&&(z?(q(ee),ee=-1):z=!0,ue(M,Se-$e))):(se.sortIndex=Q,t(h,se),E||_||(E=!0,P||(P=!0,Te()))),se},s.unstable_shouldYield=de,s.unstable_wrapCallback=function(se){var Ae=S;return function(){var Se=S;S=Ae;try{return se.apply(this,arguments)}finally{S=Se}}}})(bg)),bg}var I0;function Yw(){return I0||(I0=1,yg.exports=Kw()),yg.exports}var vg={exports:{}},qa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function Gw(){if(z0)return qa;z0=1;var s=Lh();function t(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(h,g,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:h,containerInfo:g,implementation:y}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return qa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,qa.createPortal=function(h,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return c(h,g,null,y)},qa.flushSync=function(h){var g=d.T,y=n.p;try{if(d.T=null,n.p=2,h)return h()}finally{d.T=g,n.p=y,n.d.f()}},qa.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(h,g))},qa.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},qa.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var y=g.as,w=m(y,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,_=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?n.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:_}):y==="script"&&n.d.X(h,{crossOrigin:w,integrity:S,fetchPriority:_,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},qa.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=m(g.as,g.crossOrigin);n.d.M(h,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(h)},qa.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,w=m(y,g.crossOrigin);n.d.L(h,y,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},qa.preloadModule=function(h,g){if(typeof h=="string")if(g){var y=m(g.as,g.crossOrigin);n.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(h)},qa.requestFormReset=function(h){n.d.r(h)},qa.unstable_batchedUpdates=function(h,g){return h(g)},qa.useFormState=function(h,g,y){return d.H.useFormState(h,g,y)},qa.useFormStatus=function(){return d.H.useHostTransitionStatus()},qa.version="19.1.1",qa}var P0;function Bb(){if(P0)return vg.exports;P0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),vg.exports=Gw(),vg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function Ww(){if(F0)return Xd;F0=1;var s=Yw(),t=Lh(),r=Bb();function n(a){var i="https://react.dev/errors/"+a;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function c(a){var i=a,l=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(l=i.return),a=i.return;while(a)}return i.tag===3?l:null}function d(a){if(a.tag===13){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function m(a){if(c(a)!==a)throw Error(n(188))}function h(a){var i=a.alternate;if(!i){if(i=c(a),i===null)throw Error(n(188));return i!==a?null:a}for(var l=a,u=i;;){var p=l.return;if(p===null)break;var j=p.alternate;if(j===null){if(u=p.return,u!==null){l=u;continue}break}if(p.child===j.child){for(j=p.child;j;){if(j===l)return m(p),a;if(j===u)return m(p),i;j=j.sibling}throw Error(n(188))}if(l.return!==u.return)l=p,u=j;else{for(var $=!1,X=p.child;X;){if(X===l){$=!0,l=p,u=j;break}if(X===u){$=!0,u=p,l=j;break}X=X.sibling}if(!$){for(X=j.child;X;){if(X===l){$=!0,l=j,u=p;break}if(X===u){$=!0,u=j,l=p;break}X=X.sibling}if(!$)throw Error(n(189))}}if(l.alternate!==u)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?a:i}function g(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(i=g(a),i!==null)return i;a=a.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),O=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),je=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function Te(a){return a===null||typeof a!="object"?null:(a=re&&a[re]||a["@@iterator"],typeof a=="function"?a:null)}var De=Symbol.for("react.client.reference");function ne(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===De?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case E:return"Fragment";case I:return"Profiler";case z:return"StrictMode";case M:return"Suspense";case P:return"SuspenseList";case je:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case _:return"Portal";case O:return(a.displayName||"Context")+".Provider";case q:return(a._context.displayName||"Context")+".Consumer";case R:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ee:return i=a.displayName||null,i!==null?i:ne(a.type)||"Memo";case oe:i=a._payload,a=a._init;try{return ne(a(i))}catch{}}return null}var ue=Array.isArray,se=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},$e=[],Q=-1;function xe(a){return{current:a}}function ve(a){0>Q||(a.current=$e[Q],$e[Q]=null,Q--)}function ae(a,i){Q++,$e[Q]=a.current,a.current=i}var Ce=xe(null),pe=xe(null),k=xe(null),L=xe(null);function f(a,i){switch(ae(k,i),ae(pe,a),ae(Ce,null),i.nodeType){case 9:case 11:a=(a=i.documentElement)&&(a=a.namespaceURI)?r0(a):0;break;default:if(a=i.tagName,i=i.namespaceURI)i=r0(i),a=n0(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ve(Ce),ae(Ce,a)}function x(){ve(Ce),ve(pe),ve(k)}function N(a){a.memoizedState!==null&&ae(L,a);var i=Ce.current,l=n0(i,a.type);i!==l&&(ae(pe,a),ae(Ce,l))}function C(a){pe.current===a&&(ve(Ce),ve(pe)),L.current===a&&(ve(L),Vd._currentValue=Se)}var A=Object.prototype.hasOwnProperty,H=s.unstable_scheduleCallback,V=s.unstable_cancelCallback,F=s.unstable_shouldYield,B=s.unstable_requestPaint,J=s.unstable_now,Y=s.unstable_getCurrentPriorityLevel,T=s.unstable_ImmediatePriority,G=s.unstable_UserBlockingPriority,ce=s.unstable_NormalPriority,ie=s.unstable_LowPriority,fe=s.unstable_IdlePriority,me=s.log,Me=s.unstable_setDisableYieldValue,Re=null,Ie=null;function st(a){if(typeof me=="function"&&Me(a),Ie&&typeof Ie.setStrictMode=="function")try{Ie.setStrictMode(Re,a)}catch{}}var He=Math.clz32?Math.clz32:rt,Xe=Math.log,et=Math.LN2;function rt(a){return a>>>=0,a===0?32:31-(Xe(a)/et|0)|0}var Qe=256,At=4194304;function xt(a){var i=a&42;if(i!==0)return i;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function St(a,i,l){var u=a.pendingLanes;if(u===0)return 0;var p=0,j=a.suspendedLanes,$=a.pingedLanes;a=a.warmLanes;var X=u&134217727;return X!==0?(u=X&~j,u!==0?p=xt(u):($&=X,$!==0?p=xt($):l||(l=X&~a,l!==0&&(p=xt(l))))):(X=u&~j,X!==0?p=xt(X):$!==0?p=xt($):l||(l=u&~a,l!==0&&(p=xt(l)))),p===0?0:i!==0&&i!==p&&(i&j)===0&&(j=p&-p,l=i&-i,j>=l||j===32&&(l&4194048)!==0)?i:p}function Le(a,i){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&i)===0}function Ye(a,i){switch(a){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _e(){var a=Qe;return Qe<<=1,(Qe&4194048)===0&&(Qe=256),a}function tt(){var a=At;return At<<=1,(At&62914560)===0&&(At=4194304),a}function ct(a){for(var i=[],l=0;31>l;l++)i.push(a);return i}function it(a,i){a.pendingLanes|=i,i!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ke(a,i,l,u,p,j){var $=a.pendingLanes;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=l,a.entangledLanes&=l,a.errorRecoveryDisabledLanes&=l,a.shellSuspendCounter=0;var X=a.entanglements,Ne=a.expirationTimes,We=a.hiddenUpdates;for(l=$&~l;0<l;){var lt=31-He(l),ft=1<<lt;X[lt]=0,Ne[lt]=-1;var Ze=We[lt];if(Ze!==null)for(We[lt]=null,lt=0;lt<Ze.length;lt++){var at=Ze[lt];at!==null&&(at.lane&=-536870913)}l&=~ft}u!==0&&Ke(a,u,0),j!==0&&p===0&&a.tag!==0&&(a.suspendedLanes|=j&~($&~i))}function Ke(a,i,l){a.pendingLanes|=i,a.suspendedLanes&=~i;var u=31-He(i);a.entangledLanes|=i,a.entanglements[u]=a.entanglements[u]|1073741824|l&4194090}function ut(a,i){var l=a.entangledLanes|=i;for(a=a.entanglements;l;){var u=31-He(l),p=1<<u;p&i|a[u]&i&&(a[u]|=i),l&=~p}}function Ct(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Et(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Bt(){var a=Ae.p;return a!==0?a:(a=window.event,a===void 0?32:S0(a.type))}function ge(a,i){var l=Ae.p;try{return Ae.p=a,i()}finally{Ae.p=l}}var Ee=Math.random().toString(36).slice(2),le="__reactFiber$"+Ee,Ve="__reactProps$"+Ee,nt="__reactContainer$"+Ee,mt="__reactEvents$"+Ee,wt="__reactListeners$"+Ee,vt="__reactHandles$"+Ee,_t="__reactResources$"+Ee,ye="__reactMarker$"+Ee;function ze(a){delete a[le],delete a[Ve],delete a[mt],delete a[wt],delete a[vt]}function Z(a){var i=a[le];if(i)return i;for(var l=a.parentNode;l;){if(i=l[nt]||l[le]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(a=c0(a);a!==null;){if(l=a[le])return l;a=c0(a)}return i}a=l,l=a.parentNode}return null}function te(a){if(a=a[le]||a[nt]){var i=a.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return a}return null}function Fe(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a.stateNode;throw Error(n(33))}function Ge(a){var i=a[_t];return i||(i=a[_t]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ot(a){a[ye]=!0}var ht=new Set,jt={};function It(a,i){Vt(a,i),Vt(a+"Capture",i)}function Vt(a,i){for(jt[a]=i,a=0;a<i.length;a++)ht.add(i[a])}var rs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zt={},gs={};function ns(a){return A.call(gs,a)?!0:A.call(zt,a)?!1:rs.test(a)?gs[a]=!0:(zt[a]=!0,!1)}function xs(a,i,l){if(ns(i))if(l===null)a.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":a.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){a.removeAttribute(i);return}}a.setAttribute(i,""+l)}}function js(a,i,l){if(l===null)a.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(i);return}a.setAttribute(i,""+l)}}function Ot(a,i,l,u){if(u===null)a.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttributeNS(i,l,""+u)}}var gt,Tt;function qt(a){if(gt===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);gt=i&&i[1]||"",Tt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gt+a+Tt}var is=!1;function Zt(a,i){if(!a||is)return"";is=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(at){var Ze=at}Reflect.construct(a,[],ft)}else{try{ft.call()}catch(at){Ze=at}a.call(ft.prototype)}}else{try{throw Error()}catch(at){Ze=at}(ft=a())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(at){if(at&&Ze&&typeof at.stack=="string")return[at.stack,Ze.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=u.DetermineComponentFrameRoot(),$=j[0],X=j[1];if($&&X){var Ne=$.split(`
`),We=X.split(`
`);for(p=u=0;u<Ne.length&&!Ne[u].includes("DetermineComponentFrameRoot");)u++;for(;p<We.length&&!We[p].includes("DetermineComponentFrameRoot");)p++;if(u===Ne.length||p===We.length)for(u=Ne.length-1,p=We.length-1;1<=u&&0<=p&&Ne[u]!==We[p];)p--;for(;1<=u&&0<=p;u--,p--)if(Ne[u]!==We[p]){if(u!==1||p!==1)do if(u--,p--,0>p||Ne[u]!==We[p]){var lt=`
`+Ne[u].replace(" at new "," at ");return a.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",a.displayName)),lt}while(1<=u&&0<=p);break}}}finally{is=!1,Error.prepareStackTrace=l}return(l=a?a.displayName||a.name:"")?qt(l):""}function Vs(a){switch(a.tag){case 26:case 27:case 5:return qt(a.type);case 16:return qt("Lazy");case 13:return qt("Suspense");case 19:return qt("SuspenseList");case 0:case 15:return Zt(a.type,!1);case 11:return Zt(a.type.render,!1);case 1:return Zt(a.type,!0);case 31:return qt("Activity");default:return""}}function Xn(a){try{var i="";do i+=Vs(a),a=a.return;while(a);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Aa(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Do(a){var i=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Uc(a){var i=Do(a)?"checked":"value",l=Object.getOwnPropertyDescriptor(a.constructor.prototype,i),u=""+a[i];if(!a.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,j=l.set;return Object.defineProperty(a,i,{configurable:!0,get:function(){return p.call(this)},set:function($){u=""+$,j.call(this,$)}}),Object.defineProperty(a,i,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function($){u=""+$},stopTracking:function(){a._valueTracker=null,delete a[i]}}}}function Os(a){a._valueTracker||(a._valueTracker=Uc(a))}function Cl(a){if(!a)return!1;var i=a._valueTracker;if(!i)return!0;var l=i.getValue(),u="";return a&&(u=Do(a)?a.checked?"true":"false":a.value),a=u,a!==l?(i.setValue(a),!0):!1}function _i(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Eo=/[\n"\\]/g;function zs(a){return a.replace(Eo,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Nn(a,i,l,u,p,j,$,X){a.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?a.type=$:a.removeAttribute("type"),i!=null?$==="number"?(i===0&&a.value===""||a.value!=i)&&(a.value=""+Aa(i)):a.value!==""+Aa(i)&&(a.value=""+Aa(i)):$!=="submit"&&$!=="reset"||a.removeAttribute("value"),i!=null?Qn(a,$,Aa(i)):l!=null?Qn(a,$,Aa(l)):u!=null&&a.removeAttribute("value"),p==null&&j!=null&&(a.defaultChecked=!!j),p!=null&&(a.checked=p&&typeof p!="function"&&typeof p!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?a.name=""+Aa(X):a.removeAttribute("name")}function kl(a,i,l,u,p,j,$,X){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(a.type=j),i!=null||l!=null){if(!(j!=="submit"&&j!=="reset"||i!=null))return;l=l!=null?""+Aa(l):"",i=i!=null?""+Aa(i):l,X||i===a.value||(a.value=i),a.defaultValue=i}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,a.checked=X?a.checked:!!u,a.defaultChecked=!!u,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(a.name=$)}function Qn(a,i,l){i==="number"&&_i(a.ownerDocument)===a||a.defaultValue===""+l||(a.defaultValue=""+l)}function ba(a,i,l,u){if(a=a.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<a.length;l++)p=i.hasOwnProperty("$"+a[l].value),a[l].selected!==p&&(a[l].selected=p),p&&u&&(a[l].defaultSelected=!0)}else{for(l=""+Aa(l),i=null,p=0;p<a.length;p++){if(a[p].value===l){a[p].selected=!0,u&&(a[p].defaultSelected=!0);return}i!==null||a[p].disabled||(i=a[p])}i!==null&&(i.selected=!0)}}function Sn(a,i,l){if(i!=null&&(i=""+Aa(i),i!==a.value&&(a.value=i),l==null)){a.defaultValue!==i&&(a.defaultValue=i);return}a.defaultValue=l!=null?""+Aa(l):""}function Zn(a,i,l,u){if(i==null){if(u!=null){if(l!=null)throw Error(n(92));if(ue(u)){if(1<u.length)throw Error(n(93));u=u[0]}l=u}l==null&&(l=""),i=l}l=Aa(i),a.defaultValue=l,u=a.textContent,u===l&&u!==""&&u!==null&&(a.value=u)}function Cr(a,i){if(i){var l=a.firstChild;if(l&&l===a.lastChild&&l.nodeType===3){l.nodeValue=i;return}}a.textContent=i}var $r=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hr(a,i,l){var u=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?a.setProperty(i,""):i==="float"?a.cssFloat="":a[i]="":u?a.setProperty(i,l):typeof l!="number"||l===0||$r.has(i)?i==="float"?a.cssFloat=l:a[i]=(""+l).trim():a[i]=l+"px"}function on(a,i,l){if(i!=null&&typeof i!="object")throw Error(n(62));if(a=a.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="");for(var p in i)u=i[p],i.hasOwnProperty(p)&&l[p]!==u&&Hr(a,p,u)}else for(var j in i)i.hasOwnProperty(j)&&Hr(a,j,i[j])}function kr(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ir=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),or=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cn(a){return or.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var da=null;function kn(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var qs=null,ua=null;function Jn(a){var i=te(a);if(i&&(a=i.stateNode)){var l=a[Ve]||null;e:switch(a=i.stateNode,i.type){case"input":if(Nn(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=a;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+zs(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var u=l[i];if(u!==a&&u.form===a.form){var p=u[Ve]||null;if(!p)throw Error(n(90));Nn(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<l.length;i++)u=l[i],u.form===a.form&&Cl(u)}break e;case"textarea":Sn(a,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&ba(a,!!l.multiple,i,!1)}}}var ei=!1;function Rs(a,i,l){if(ei)return a(i,l);ei=!0;try{var u=a(i);return u}finally{if(ei=!1,(qs!==null||ua!==null)&&(Mm(),qs&&(i=qs,a=ua,ua=qs=null,Jn(i),a)))for(i=0;i<a.length;i++)Jn(a[i])}}function va(a,i){var l=a.stateNode;if(l===null)return null;var u=l[Ve]||null;if(u===null)return null;l=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(a=a.type,u=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!u;break e;default:a=!1}if(a)return null;if(l&&typeof l!="function")throw Error(n(231,i,typeof l));return l}var ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ln=!1;if(ma)try{var Da={};Object.defineProperty(Da,"passive",{get:function(){ln=!0}}),window.addEventListener("test",Da,Da),window.removeEventListener("test",Da,Da)}catch{ln=!1}var W=null,Pe=null,Lt=null;function Jt(){if(Lt)return Lt;var a,i=Pe,l=i.length,u,p="value"in W?W.value:W.textContent,j=p.length;for(a=0;a<l&&i[a]===p[a];a++);var $=l-a;for(u=1;u<=$&&i[l-u]===p[j-u];u++);return Lt=p.slice(a,1<u?1-u:void 0)}function ss(a){var i=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&i===13&&(a=13)):a=i,a===10&&(a=13),32<=a||a===13?a:0}function lr(){return!0}function Vr(){return!1}function ls(a){function i(l,u,p,j,$){this._reactName=l,this._targetInst=p,this.type=u,this.nativeEvent=j,this.target=$,this.currentTarget=null;for(var X in a)a.hasOwnProperty(X)&&(l=a[X],this[X]=l?l(j):j[X]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?lr:Vr,this.isPropagationStopped=Vr,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),i}var Fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_n=ls(Fa),Qa=y({},Fa,{view:0,detail:0}),Fu=ls(Qa),Lu,Bu,_l,$c=y({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mo,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==_l&&(_l&&a.type==="mousemove"?(Lu=a.screenX-_l.screenX,Bu=a.screenY-_l.screenY):Bu=Lu=0,_l=a),Lu)},movementY:function(a){return"movementY"in a?a.movementY:Bu}}),tf=ls($c),Uu=y({},$c,{dataTransfer:0}),Hc=ls(Uu),cn=y({},Qa,{relatedTarget:0}),cr=ls(cn),Al=y({},Fa,{animationName:0,elapsedTime:0,pseudoElement:0}),sf=ls(Al),Dl=y({},Fa,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ws=ls(Dl),El=y({},Fa,{data:0}),$u=ls(El),Tl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},To={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ml(a){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(a):(a=To[a])?!!i[a]:!1}function Mo(){return Ml}var Ol=y({},Qa,{key:function(a){if(a.key){var i=Tl[a.key]||a.key;if(i!=="Unidentified")return i}return a.type==="keypress"?(a=ss(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Hu[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mo,charCode:function(a){return a.type==="keypress"?ss(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ss(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Ai=ls(Ol),af=y({},$c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vu=ls(af),Di=y({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mo}),rf=ls(Di),Ei=y({},Fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rl=ls(Ei),Vc=y({},$c,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Il=ls(Vc),nf=y({},Fa,{newState:0,oldState:0}),qc=ls(nf),Za=[9,13,27,32],Oo=ma&&"CompositionEvent"in window,ti=null;ma&&"documentMode"in document&&(ti=document.documentMode);var Kc=ma&&"TextEvent"in window&&!ti,zl=ma&&(!Oo||ti&&8<ti&&11>=ti),Ti=" ",qu=!1;function Ku(a,i){switch(a){case"keyup":return Za.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function La(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var An=!1;function Gx(a,i){switch(a){case"compositionend":return La(i);case"keypress":return i.which!==32?null:(qu=!0,Ti);case"textInput":return a=i.data,a===Ti&&qu?null:a;default:return null}}function Yu(a,i){if(An)return a==="compositionend"||!Oo&&Ku(a,i)?(a=Jt(),Lt=Pe=W=null,An=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return zl&&i.locale!=="ko"?null:i.data;default:return null}}var Wx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yc(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i==="input"?!!Wx[a.type]:i==="textarea"}function of(a,i,l,u){qs?ua?ua.push(u):ua=[u]:qs=u,i=Fm(i,"onChange"),0<i.length&&(l=new _n("onChange","change",null,l,u),a.push({event:l,listeners:i}))}var Mi=null,dr=null;function Ja(a){Jp(a,0)}function Gt(a){var i=Fe(a);if(Cl(i))return a}function _r(a,i){if(a==="change")return i}var si=!1;if(ma){var Oi;if(ma){var dn="oninput"in document;if(!dn){var Ri=document.createElement("div");Ri.setAttribute("oninput","return;"),dn=typeof Ri.oninput=="function"}Oi=dn}else Oi=!1;si=Oi&&(!document.documentMode||9<document.documentMode)}function Dn(){Mi&&(Mi.detachEvent("onpropertychange",kt),dr=Mi=null)}function kt(a){if(a.propertyName==="value"&&Gt(dr)){var i=[];of(i,dr,a,kn(a)),Rs(Ja,i)}}function En(a,i,l){a==="focusin"?(Dn(),Mi=i,dr=l,Mi.attachEvent("onpropertychange",kt)):a==="focusout"&&Dn()}function Pl(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Gt(dr)}function Fl(a,i){if(a==="click")return Gt(i)}function Gc(a,i){if(a==="input"||a==="change")return Gt(i)}function lf(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}var er=typeof Object.is=="function"?Object.is:lf;function ur(a,i){if(er(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var l=Object.keys(a),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var p=l[u];if(!A.call(i,p)||!er(a[p],i[p]))return!1}return!0}function ha(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ro(a,i){var l=ha(a);a=0;for(var u;l;){if(l.nodeType===3){if(u=a+l.textContent.length,a<=i&&u>=i)return{node:l,offset:i-a};a=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ha(l)}}function Bs(a,i){return a&&i?a===i?!0:a&&a.nodeType===3?!1:i&&i.nodeType===3?Bs(a,i.parentNode):"contains"in a?a.contains(i):a.compareDocumentPosition?!!(a.compareDocumentPosition(i)&16):!1:!1}function ai(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var i=_i(a.document);i instanceof a.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)a=i.contentWindow;else break;i=_i(a.document)}return i}function Wc(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i&&(i==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||i==="textarea"||a.contentEditable==="true")}var Ii=ma&&"documentMode"in document&&11>=document.documentMode,zi=null,Io=null,zo=null,Po=!1;function Xc(a,i,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Po||zi==null||zi!==_i(u)||(u=zi,"selectionStart"in u&&Wc(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),zo&&ur(zo,u)||(zo=u,u=Fm(Io,"onSelect"),0<u.length&&(i=new _n("onSelect","select",null,i,l),a.push({event:i,listeners:u}),i.target=zi)))}function un(a,i){var l={};return l[a.toLowerCase()]=i.toLowerCase(),l["Webkit"+a]="webkit"+i,l["Moz"+a]="moz"+i,l}var Pi={animationend:un("Animation","AnimationEnd"),animationiteration:un("Animation","AnimationIteration"),animationstart:un("Animation","AnimationStart"),transitionrun:un("Transition","TransitionRun"),transitionstart:un("Transition","TransitionStart"),transitioncancel:un("Transition","TransitionCancel"),transitionend:un("Transition","TransitionEnd")},Fi={},Fo={};ma&&(Fo=document.createElement("div").style,"AnimationEvent"in window||(delete Pi.animationend.animation,delete Pi.animationiteration.animation,delete Pi.animationstart.animation),"TransitionEvent"in window||delete Pi.transitionend.transition);function Ar(a){if(Fi[a])return Fi[a];if(!Pi[a])return a;var i=Pi[a],l;for(l in i)if(i.hasOwnProperty(l)&&l in Fo)return Fi[a]=i[l];return a}var Li=Ar("animationend"),Bi=Ar("animationiteration"),Ui=Ar("animationstart"),mr=Ar("transitionrun"),Gu=Ar("transitionstart"),hr=Ar("transitioncancel"),Qc=Ar("transitionend"),ea=new Map,Lo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lo.push("scrollEnd");function ja(a,i){ea.set(a,i),It(i,[a])}var Zc=new WeakMap;function Ba(a,i){if(typeof a=="object"&&a!==null){var l=Zc.get(a);return l!==void 0?l:(i={value:a,source:i,stack:Xn(i)},Zc.set(a,i),i)}return{value:a,source:i,stack:Xn(i)}}var tr=[],qr=0,Bo=0;function Tn(){for(var a=qr,i=Bo=qr=0;i<a;){var l=tr[i];tr[i++]=null;var u=tr[i];tr[i++]=null;var p=tr[i];tr[i++]=null;var j=tr[i];if(tr[i++]=null,u!==null&&p!==null){var $=u.pending;$===null?p.next=p:(p.next=$.next,$.next=p),u.pending=p}j!==0&&$o(l,p,j)}}function Uo(a,i,l,u){tr[qr++]=a,tr[qr++]=i,tr[qr++]=l,tr[qr++]=u,Bo|=u,a.lanes|=u,a=a.alternate,a!==null&&(a.lanes|=u)}function ri(a,i,l,u){return Uo(a,i,l,u),Ll(a)}function $i(a,i){return Uo(a,null,null,i),Ll(a)}function $o(a,i,l){a.lanes|=l;var u=a.alternate;u!==null&&(u.lanes|=l);for(var p=!1,j=a.return;j!==null;)j.childLanes|=l,u=j.alternate,u!==null&&(u.childLanes|=l),j.tag===22&&(a=j.stateNode,a===null||a._visibility&1||(p=!0)),a=j,j=j.return;return a.tag===3?(j=a.stateNode,p&&i!==null&&(p=31-He(l),a=j.hiddenUpdates,u=a[p],u===null?a[p]=[i]:u.push(i),i.lane=l|536870912),j):null}function Ll(a){if(50<zd)throw zd=0,Lf=null,Error(n(185));for(var i=a.return;i!==null;)a=i,i=a.return;return a.tag===3?a.stateNode:null}var Mn={};function cf(a,i,l,u){this.tag=a,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ua(a,i,l,u){return new cf(a,i,l,u)}function Jc(a){return a=a.prototype,!(!a||!a.isReactComponent)}function fr(a,i){var l=a.alternate;return l===null?(l=Ua(a.tag,i,a.key,a.mode),l.elementType=a.elementType,l.type=a.type,l.stateNode=a.stateNode,l.alternate=a,a.alternate=l):(l.pendingProps=i,l.type=a.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=a.flags&65011712,l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,i=a.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=a.sibling,l.index=a.index,l.ref=a.ref,l.refCleanup=a.refCleanup,l}function Hi(a,i){a.flags&=65011714;var l=a.alternate;return l===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,i=l.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a}function On(a,i,l,u,p,j){var $=0;if(u=a,typeof a=="function")Jc(a)&&($=1);else if(typeof a=="string")$=Ew(a,l,Ce.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case je:return a=Ua(31,l,i,p),a.elementType=je,a.lanes=j,a;case E:return ni(l.children,p,j,i);case z:$=8,p|=24;break;case I:return a=Ua(12,l,i,p|2),a.elementType=I,a.lanes=j,a;case M:return a=Ua(13,l,i,p),a.elementType=M,a.lanes=j,a;case P:return a=Ua(19,l,i,p),a.elementType=P,a.lanes=j,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case U:case O:$=10;break e;case q:$=9;break e;case R:$=11;break e;case ee:$=14;break e;case oe:$=16,u=null;break e}$=29,l=Error(n(130,a===null?"null":typeof a,"")),u=null}return i=Ua($,l,i,p),i.elementType=a,i.type=u,i.lanes=j,i}function ni(a,i,l,u){return a=Ua(7,a,u,i),a.lanes=l,a}function Vi(a,i,l){return a=Ua(6,a,null,i),a.lanes=l,a}function mn(a,i,l){return i=Ua(4,a.children!==null?a.children:[],a.key,i),i.lanes=l,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}var hn=[],fa=0,ii=null,Ea=0,wa=[],na=0,Kr=null,ga=1,gr="";function Rt(a,i){hn[fa++]=Ea,hn[fa++]=ii,ii=a,Ea=i}function Ks(a,i,l){wa[na++]=ga,wa[na++]=gr,wa[na++]=Kr,Kr=a;var u=ga;a=gr;var p=32-He(u)-1;u&=~(1<<p),l+=1;var j=32-He(i)+p;if(30<j){var $=p-p%5;j=(u&(1<<$)-1).toString(32),u>>=$,p-=$,ga=1<<32-He(i)+p|l<<p|u,gr=j+a}else ga=1<<j|l<<p|u,gr=a}function Ys(a){a.return!==null&&(Rt(a,1),Ks(a,1,0))}function Rn(a){for(;a===ii;)ii=hn[--fa],hn[fa]=null,Ea=hn[--fa],hn[fa]=null;for(;a===Kr;)Kr=wa[--na],wa[na]=null,gr=wa[--na],wa[na]=null,ga=wa[--na],wa[na]=null}var $t=null,Es=null,Wt=!1,Yr=null,$a=!1,Bl=Error(n(519));function In(a){var i=Error(n(418,""));throw Ho(Ba(i,a)),Bl}function qi(a){var i=a.stateNode,l=a.type,u=a.memoizedProps;switch(i[le]=a,i[Ve]=u,l){case"dialog":us("cancel",i),us("close",i);break;case"iframe":case"object":case"embed":us("load",i);break;case"video":case"audio":for(l=0;l<Fd.length;l++)us(Fd[l],i);break;case"source":us("error",i);break;case"img":case"image":case"link":us("error",i),us("load",i);break;case"details":us("toggle",i);break;case"input":us("invalid",i),kl(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Os(i);break;case"select":us("invalid",i);break;case"textarea":us("invalid",i),Zn(i,u.value,u.defaultValue,u.children),Os(i)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||u.suppressHydrationWarning===!0||a0(i.textContent,l)?(u.popover!=null&&(us("beforetoggle",i),us("toggle",i)),u.onScroll!=null&&us("scroll",i),u.onScrollEnd!=null&&us("scrollend",i),u.onClick!=null&&(i.onclick=Lm),i=!0):i=!1,i||In(a)}function Ul(a){for($t=a.return;$t;)switch($t.tag){case 5:case 13:$a=!1;return;case 27:case 3:$a=!0;return;default:$t=$t.return}}function fn(a){if(a!==$t)return!1;if(!Wt)return Ul(a),Wt=!0,!1;var i=a.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=a.type,l=!(l!=="form"&&l!=="button")||tg(a.type,a.memoizedProps)),l=!l),l&&Es&&In(a),Ul(a),i===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,i=0;a;){if(a.nodeType===8)if(l=a.data,l==="/$"){if(i===0){Es=bn(a.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++;a=a.nextSibling}Es=null}}else i===27?(i=Es,mo(a.type)?(a=ng,ng=null,Es=a):Es=i):Es=$t?bn(a.stateNode.nextSibling):null;return!0}function gn(){Es=$t=null,Wt=!1}function Wu(){var a=Yr;return a!==null&&(vr===null?vr=a:vr.push.apply(vr,a),Yr=null),a}function Ho(a){Yr===null?Yr=[a]:Yr.push(a)}var Gr=xe(null),sr=null,ar=null;function xa(a,i,l){ae(Gr,i._currentValue),i._currentValue=l}function ia(a){a._currentValue=Gr.current,ve(Gr)}function ed(a,i,l){for(;a!==null;){var u=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),a===l)break;a=a.return}}function Na(a,i,l,u){var p=a.child;for(p!==null&&(p.return=a);p!==null;){var j=p.dependencies;if(j!==null){var $=p.child;j=j.firstContext;e:for(;j!==null;){var X=j;j=p;for(var Ne=0;Ne<i.length;Ne++)if(X.context===i[Ne]){j.lanes|=l,X=j.alternate,X!==null&&(X.lanes|=l),ed(j.return,l,a),u||($=null);break e}j=X.next}}else if(p.tag===18){if($=p.return,$===null)throw Error(n(341));$.lanes|=l,j=$.alternate,j!==null&&(j.lanes|=l),ed($,l,a),$=null}else $=p.child;if($!==null)$.return=p;else for($=p;$!==null;){if($===a){$=null;break}if(p=$.sibling,p!==null){p.return=$.return,$=p;break}$=$.return}p=$}}function Wr(a,i,l,u){a=null;for(var p=i,j=!1;p!==null;){if(!j){if((p.flags&524288)!==0)j=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var $=p.alternate;if($===null)throw Error(n(387));if($=$.memoizedProps,$!==null){var X=p.type;er(p.pendingProps.value,$.value)||(a!==null?a.push(X):a=[X])}}else if(p===L.current){if($=p.alternate,$===null)throw Error(n(387));$.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(a!==null?a.push(Vd):a=[Vd])}p=p.return}a!==null&&Na(i,a,l,u),i.flags|=262144}function Dr(a){for(a=a.firstContext;a!==null;){if(!er(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ta(a){sr=a,ar=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Sa(a){return td(sr,a)}function Vo(a,i){return sr===null&&Ta(a),td(a,i)}function td(a,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},ar===null){if(a===null)throw Error(n(308));ar=i,a.dependencies={lanes:0,firstContext:i},a.flags|=524288}else ar=ar.next=i;return l}var df=typeof AbortController<"u"?AbortController:function(){var a=[],i=this.signal={aborted:!1,addEventListener:function(l,u){a.push(u)}};this.abort=function(){i.aborted=!0,a.forEach(function(l){return l()})}},uf=s.unstable_scheduleCallback,Xu=s.unstable_NormalPriority,Gs={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $l(){return{controller:new df,data:new Map,refCount:0}}function Ki(a){a.refCount--,a.refCount===0&&uf(Xu,function(){a.controller.abort()})}var qo=null,sd=0,xn=0,Yi=null;function mf(a,i){if(qo===null){var l=qo=[];sd=0,xn=Kf(),Yi={status:"pending",value:void 0,then:function(u){l.push(u)}}}return sd++,i.then(Qu,Qu),i}function Qu(){if(--sd===0&&qo!==null){Yi!==null&&(Yi.status="fulfilled");var a=qo;qo=null,xn=0,Yi=null;for(var i=0;i<a.length;i++)(0,a[i])()}}function hf(a,i){var l=[],u={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return a.then(function(){u.status="fulfilled",u.value=i;for(var p=0;p<l.length;p++)(0,l[p])(i)},function(p){for(u.status="rejected",u.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),u}var Zu=se.S;se.S=function(a,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&mf(a,i),Zu!==null&&Zu(a,i)};var oi=xe(null);function ad(){var a=oi.current;return a!==null?a:Is.pooledCache}function zn(a,i){i===null?ae(oi,oi.current):ae(oi,i.pool)}function rd(){var a=ad();return a===null?null:{parent:Gs._currentValue,pool:a}}var Ko=Error(n(460)),Ju=Error(n(474)),Hl=Error(n(542)),nd={then:function(){}};function em(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Vl(){}function tm(a,i,l){switch(l=a[l],l===void 0?a.push(i):l!==i&&(i.then(Vl,Vl),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,am(a),a;default:if(typeof i.status=="string")i.then(Vl,Vl);else{if(a=Is,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=i,a.status="pending",a.then(function(u){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=u}},function(u){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,am(a),a}throw Yo=i,Ko}}var Yo=null;function sm(){if(Yo===null)throw Error(n(459));var a=Yo;return Yo=null,a}function am(a){if(a===Ko||a===Hl)throw Error(n(483))}var Pn=!1;function ql(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function id(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Fn(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function pn(a,i,l){var u=a.updateQueue;if(u===null)return null;if(u=u.shared,(Ss&2)!==0){var p=u.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),u.pending=i,i=Ll(a),$o(a,null,l),i}return Uo(a,u,i,l),Ll(a)}function Go(a,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var u=i.lanes;u&=a.pendingLanes,l|=u,i.lanes=l,ut(a,l)}}function Gi(a,i){var l=a.updateQueue,u=a.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var p=null,j=null;if(l=l.firstBaseUpdate,l!==null){do{var $={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};j===null?p=j=$:j=j.next=$,l=l.next}while(l!==null);j===null?p=j=i:j=j.next=i}else p=j=i;l={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:j,shared:u.shared,callbacks:u.callbacks},a.updateQueue=l;return}a=l.lastBaseUpdate,a===null?l.firstBaseUpdate=i:a.next=i,l.lastBaseUpdate=i}var Wi=!1;function Wo(){if(Wi){var a=Yi;if(a!==null)throw a}}function Xo(a,i,l,u){Wi=!1;var p=a.updateQueue;Pn=!1;var j=p.firstBaseUpdate,$=p.lastBaseUpdate,X=p.shared.pending;if(X!==null){p.shared.pending=null;var Ne=X,We=Ne.next;Ne.next=null,$===null?j=We:$.next=We,$=Ne;var lt=a.alternate;lt!==null&&(lt=lt.updateQueue,X=lt.lastBaseUpdate,X!==$&&(X===null?lt.firstBaseUpdate=We:X.next=We,lt.lastBaseUpdate=Ne))}if(j!==null){var ft=p.baseState;$=0,lt=We=Ne=null,X=j;do{var Ze=X.lane&-536870913,at=Ze!==X.lane;if(at?(ps&Ze)===Ze:(u&Ze)===Ze){Ze!==0&&Ze===xn&&(Wi=!0),lt!==null&&(lt=lt.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var Qt=a,Kt=X;Ze=i;var Ds=l;switch(Kt.tag){case 1:if(Qt=Kt.payload,typeof Qt=="function"){ft=Qt.call(Ds,ft,Ze);break e}ft=Qt;break e;case 3:Qt.flags=Qt.flags&-65537|128;case 0:if(Qt=Kt.payload,Ze=typeof Qt=="function"?Qt.call(Ds,ft,Ze):Qt,Ze==null)break e;ft=y({},ft,Ze);break e;case 2:Pn=!0}}Ze=X.callback,Ze!==null&&(a.flags|=64,at&&(a.flags|=8192),at=p.callbacks,at===null?p.callbacks=[Ze]:at.push(Ze))}else at={lane:Ze,tag:X.tag,payload:X.payload,callback:X.callback,next:null},lt===null?(We=lt=at,Ne=ft):lt=lt.next=at,$|=Ze;if(X=X.next,X===null){if(X=p.shared.pending,X===null)break;at=X,X=at.next,at.next=null,p.lastBaseUpdate=at,p.shared.pending=null}}while(!0);lt===null&&(Ne=ft),p.baseState=Ne,p.firstBaseUpdate=We,p.lastBaseUpdate=lt,j===null&&(p.shared.lanes=0),oo|=$,a.lanes=$,a.memoizedState=ft}}function Kl(a,i){if(typeof a!="function")throw Error(n(191,a));a.call(i)}function Yl(a,i){var l=a.callbacks;if(l!==null)for(a.callbacks=null,a=0;a<l.length;a++)Kl(l[a],i)}var Xi=xe(null),Gl=xe(0);function Ln(a,i){a=fi,ae(Gl,a),ae(Xi,i),fi=a|i.baseLanes}function Qi(){ae(Gl,fi),ae(Xi,Xi.current)}function Qo(){fi=Gl.current,ve(Xi),ve(Gl)}var Xr=0,es=null,vs=null,Ws=null,Wl=!1,xr=!1,Ma=!1,pr=0,Er=0,rr=null,Tr=0;function Ts(){throw Error(n(321))}function od(a,i){if(i===null)return!1;for(var l=0;l<i.length&&l<a.length;l++)if(!er(a[l],i[l]))return!1;return!0}function ld(a,i,l,u,p,j){return Xr=j,es=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,se.H=a===null||a.memoizedState===null?vm:jm,Ma=!1,j=l(u,p),Ma=!1,xr&&(j=rm(i,l,u,p)),Xl(a),j}function Xl(a){se.H=uc;var i=vs!==null&&vs.next!==null;if(Xr=0,Ws=vs=es=null,Wl=!1,Er=0,rr=null,i)throw Error(n(300));a===null||Ca||(a=a.dependencies,a!==null&&Dr(a)&&(Ca=!0))}function rm(a,i,l,u){es=a;var p=0;do{if(xr&&(rr=null),Er=0,xr=!1,25<=p)throw Error(n(301));if(p+=1,Ws=vs=null,a.updateQueue!=null){var j=a.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}se.H=pf,j=i(l,u)}while(xr);return j}function ff(){var a=se.H,i=a.useState()[0];return i=typeof i.then=="function"?Zo(i):i,a=a.useState()[0],(vs!==null?vs.memoizedState:null)!==a&&(es.flags|=1024),i}function Ql(){var a=pr!==0;return pr=0,a}function cd(a,i,l){i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~l}function dd(a){if(Wl){for(a=a.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Wl=!1}Xr=0,Ws=vs=es=null,xr=!1,Er=pr=0,rr=null}function Ha(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ws===null?es.memoizedState=Ws=a:Ws=Ws.next=a,Ws}function Xs(){if(vs===null){var a=es.alternate;a=a!==null?a.memoizedState:null}else a=vs.next;var i=Ws===null?es.memoizedState:Ws.next;if(i!==null)Ws=i,vs=a;else{if(a===null)throw es.alternate===null?Error(n(467)):Error(n(310));vs=a,a={memoizedState:vs.memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},Ws===null?es.memoizedState=Ws=a:Ws=Ws.next=a}return Ws}function ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zo(a){var i=Er;return Er+=1,rr===null&&(rr=[]),a=tm(rr,a,i),i=es,(Ws===null?i.memoizedState:Ws.next)===null&&(i=i.alternate,se.H=i===null||i.memoizedState===null?vm:jm),a}function Zl(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Zo(a);if(a.$$typeof===O)return Sa(a)}throw Error(n(438,String(a)))}function md(a){var i=null,l=es.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var u=es.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=ud(),es.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(a),u=0;u<a;u++)l[u]=de;return i.index++,l}function Mr(a,i){return typeof i=="function"?i(a):i}function Jl(a){var i=Xs();return Jo(i,vs,a)}function Jo(a,i,l){var u=a.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=l;var p=a.baseQueue,j=u.pending;if(j!==null){if(p!==null){var $=p.next;p.next=j.next,j.next=$}i.baseQueue=p=j,u.pending=null}if(j=a.baseState,p===null)a.memoizedState=j;else{i=p.next;var X=$=null,Ne=null,We=i,lt=!1;do{var ft=We.lane&-536870913;if(ft!==We.lane?(ps&ft)===ft:(Xr&ft)===ft){var Ze=We.revertLane;if(Ze===0)Ne!==null&&(Ne=Ne.next={lane:0,revertLane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),ft===xn&&(lt=!0);else if((Xr&Ze)===Ze){We=We.next,Ze===xn&&(lt=!0);continue}else ft={lane:0,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Ne===null?(X=Ne=ft,$=j):Ne=Ne.next=ft,es.lanes|=Ze,oo|=Ze;ft=We.action,Ma&&l(j,ft),j=We.hasEagerState?We.eagerState:l(j,ft)}else Ze={lane:ft,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Ne===null?(X=Ne=Ze,$=j):Ne=Ne.next=Ze,es.lanes|=ft,oo|=ft;We=We.next}while(We!==null&&We!==i);if(Ne===null?$=j:Ne.next=X,!er(j,a.memoizedState)&&(Ca=!0,lt&&(l=Yi,l!==null)))throw l;a.memoizedState=j,a.baseState=$,a.baseQueue=Ne,u.lastRenderedState=j}return p===null&&(u.lanes=0),[a.memoizedState,u.dispatch]}function nm(a){var i=Xs(),l=i.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=a;var u=l.dispatch,p=l.pending,j=i.memoizedState;if(p!==null){l.pending=null;var $=p=p.next;do j=a(j,$.action),$=$.next;while($!==p);er(j,i.memoizedState)||(Ca=!0),i.memoizedState=j,i.baseQueue===null&&(i.baseState=j),l.lastRenderedState=j}return[j,u]}function hd(a,i,l){var u=es,p=Xs(),j=Wt;if(j){if(l===void 0)throw Error(n(407));l=l()}else l=i();var $=!er((vs||p).memoizedState,l);$&&(p.memoizedState=l,Ca=!0),p=p.queue;var X=fd.bind(null,u,p,a);if(tl(2048,8,X,[a]),p.getSnapshot!==i||$||Ws!==null&&Ws.memoizedState.tag&1){if(u.flags|=2048,li(9,sc(),ec.bind(null,u,p,l,i),null),Is===null)throw Error(n(349));j||(Xr&124)!==0||im(u,i,l)}return l}function im(a,i,l){a.flags|=16384,a={getSnapshot:i,value:l},i=es.updateQueue,i===null?(i=ud(),es.updateQueue=i,i.stores=[a]):(l=i.stores,l===null?i.stores=[a]:l.push(a))}function ec(a,i,l,u){i.value=l,i.getSnapshot=u,om(i)&&gd(a)}function fd(a,i,l){return l(function(){om(i)&&gd(a)})}function om(a){var i=a.getSnapshot;a=a.value;try{var l=i();return!er(a,l)}catch{return!0}}function gd(a){var i=$i(a,2);i!==null&&Fr(i,a,2)}function el(a){var i=Ha();if(typeof a=="function"){var l=a;if(a=l(),Ma){st(!0);try{l()}finally{st(!1)}}}return i.memoizedState=i.baseState=a,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:a},i}function lm(a,i,l,u){return a.baseState=l,Jo(a,vs,typeof u=="function"?u:Mr)}function cm(a,i,l,u,p){if(dc(a))throw Error(n(485));if(a=i.action,a!==null){var j={payload:p,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){j.listeners.push($)}};se.T!==null?l(!0):j.isTransition=!1,u(j),l=i.pending,l===null?(j.next=i.pending=j,dm(i,j)):(j.next=l.next,i.pending=l.next=j)}}function dm(a,i){var l=i.action,u=i.payload,p=a.state;if(i.isTransition){var j=se.T,$={};se.T=$;try{var X=l(p,u),Ne=se.S;Ne!==null&&Ne($,X),um(a,i,X)}catch(We){xd(a,i,We)}finally{se.T=j}}else try{j=l(p,u),um(a,i,j)}catch(We){xd(a,i,We)}}function um(a,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){mm(a,i,u)},function(u){return xd(a,i,u)}):mm(a,i,l)}function mm(a,i,l){i.status="fulfilled",i.value=l,hm(i),a.state=l,i=a.pending,i!==null&&(l=i.next,l===i?a.pending=null:(l=l.next,i.next=l,dm(a,l)))}function xd(a,i,l){var u=a.pending;if(a.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=l,hm(i),i=i.next;while(i!==u)}a.action=null}function hm(a){a=a.listeners;for(var i=0;i<a.length;i++)(0,a[i])()}function fm(a,i){return i}function pd(a,i){if(Wt){var l=Is.formState;if(l!==null){e:{var u=es;if(Wt){if(Es){t:{for(var p=Es,j=$a;p.nodeType!==8;){if(!j){p=null;break t}if(p=bn(p.nextSibling),p===null){p=null;break t}}j=p.data,p=j==="F!"||j==="F"?p:null}if(p){Es=bn(p.nextSibling),u=p.data==="F!";break e}}In(u)}u=!1}u&&(i=l[0])}}return l=Ha(),l.memoizedState=l.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fm,lastRenderedState:i},l.queue=u,l=cc.bind(null,es,u),u.dispatch=l,u=el(!1),j=_d.bind(null,es,!1,u.queue),u=Ha(),p={state:i,dispatch:null,action:a,pending:null},u.queue=p,l=cm.bind(null,es,p,j,l),p.dispatch=l,u.memoizedState=a,[i,l,!1]}function gm(a){var i=Xs();return xm(i,vs,a)}function xm(a,i,l){if(i=Jo(a,i,fm)[0],a=Jl(Mr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Zo(i)}catch($){throw $===Ko?Hl:$}else u=i;i=Xs();var p=i.queue,j=p.dispatch;return l!==i.memoizedState&&(es.flags|=2048,li(9,sc(),gf.bind(null,p,l),null)),[u,j,a]}function gf(a,i){a.action=i}function tc(a){var i=Xs(),l=vs;if(l!==null)return xm(i,l,a);Xs(),i=i.memoizedState,l=Xs();var u=l.queue.dispatch;return l.memoizedState=a,[i,u,!1]}function li(a,i,l,u){return a={tag:a,create:l,deps:u,inst:i,next:null},i=es.updateQueue,i===null&&(i=ud(),es.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=a.next=a:(u=l.next,l.next=a,a.next=u,i.lastEffect=a),a}function sc(){return{destroy:void 0,resource:void 0}}function yd(){return Xs().memoizedState}function ac(a,i,l,u){var p=Ha();u=u===void 0?null:u,es.flags|=a,p.memoizedState=li(1|i,sc(),l,u)}function tl(a,i,l,u){var p=Xs();u=u===void 0?null:u;var j=p.memoizedState.inst;vs!==null&&u!==null&&od(u,vs.memoizedState.deps)?p.memoizedState=li(i,j,l,u):(es.flags|=a,p.memoizedState=li(1|i,j,l,u))}function bd(a,i){ac(8390656,8,a,i)}function Zi(a,i){tl(2048,8,a,i)}function ci(a,i){return tl(4,2,a,i)}function vd(a,i){return tl(4,4,a,i)}function pm(a,i){if(typeof i=="function"){a=a();var l=i(a);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function ym(a,i,l){l=l!=null?l.concat([a]):null,tl(4,4,pm.bind(null,i,a),l)}function jd(){}function wd(a,i){var l=Xs();i=i===void 0?null:i;var u=l.memoizedState;return i!==null&&od(i,u[1])?u[0]:(l.memoizedState=[a,i],a)}function Nd(a,i){var l=Xs();i=i===void 0?null:i;var u=l.memoizedState;if(i!==null&&od(i,u[1]))return u[0];if(u=a(),Ma){st(!0);try{a()}finally{st(!1)}}return l.memoizedState=[u,i],u}function rc(a,i,l){return l===void 0||(Xr&1073741824)!==0?a.memoizedState=i:(a.memoizedState=l,a=Ep(),es.lanes|=a,oo|=a,l)}function Sd(a,i,l,u){return er(l,i)?l:Xi.current!==null?(a=rc(a,l,u),er(a,i)||(Ca=!0),a):(Xr&42)===0?(Ca=!0,a.memoizedState=l):(a=Ep(),es.lanes|=a,oo|=a,i)}function Cd(a,i,l,u,p){var j=Ae.p;Ae.p=j!==0&&8>j?j:8;var $=se.T,X={};se.T=X,_d(a,!1,i,l);try{var Ne=p(),We=se.S;if(We!==null&&We(X,Ne),Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"){var lt=hf(Ne,u);Va(a,i,lt,Pr(a))}else Va(a,i,u,Pr(a))}catch(ft){Va(a,i,{then:function(){},status:"rejected",reason:ft},Pr())}finally{Ae.p=j,se.T=$}}function xf(){}function nc(a,i,l,u){if(a.tag!==5)throw Error(n(476));var p=yr(a).queue;Cd(a,p,i,Se,l===null?xf:function(){return ic(a),l(u)})}function yr(a){var i=a.memoizedState;if(i!==null)return i;i={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:Se},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:l},next:null},a.memoizedState=i,a=a.alternate,a!==null&&(a.memoizedState=i),i}function ic(a){var i=yr(a).next.queue;Va(a,i,{},Pr())}function Or(){return Sa(Vd)}function oc(){return Xs().memoizedState}function lc(){return Xs().memoizedState}function sl(a){for(var i=a.return;i!==null;){switch(i.tag){case 24:case 3:var l=Pr();a=Fn(l);var u=pn(i,a,l);u!==null&&(Fr(u,i,l),Go(u,i,l)),i={cache:$l()},a.payload=i;return}i=i.return}}function kd(a,i,l){var u=Pr();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},dc(a)?bm(i,l):(l=ri(a,i,l,u),l!==null&&(Fr(l,a,u),Ad(l,i,u)))}function cc(a,i,l){var u=Pr();Va(a,i,l,u)}function Va(a,i,l,u){var p={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(dc(a))bm(i,p);else{var j=a.alternate;if(a.lanes===0&&(j===null||j.lanes===0)&&(j=i.lastRenderedReducer,j!==null))try{var $=i.lastRenderedState,X=j($,l);if(p.hasEagerState=!0,p.eagerState=X,er(X,$))return Uo(a,i,p,0),Is===null&&Tn(),!1}catch{}finally{}if(l=ri(a,i,p,u),l!==null)return Fr(l,a,u),Ad(l,i,u),!0}return!1}function _d(a,i,l,u){if(u={lane:2,revertLane:Kf(),action:u,hasEagerState:!1,eagerState:null,next:null},dc(a)){if(i)throw Error(n(479))}else i=ri(a,l,u,2),i!==null&&Fr(i,a,2)}function dc(a){var i=a.alternate;return a===es||i!==null&&i===es}function bm(a,i){xr=Wl=!0;var l=a.pending;l===null?i.next=i:(i.next=l.next,l.next=i),a.pending=i}function Ad(a,i,l){if((l&4194048)!==0){var u=i.lanes;u&=a.pendingLanes,l|=u,i.lanes=l,ut(a,l)}}var uc={readContext:Sa,use:Zl,useCallback:Ts,useContext:Ts,useEffect:Ts,useImperativeHandle:Ts,useLayoutEffect:Ts,useInsertionEffect:Ts,useMemo:Ts,useReducer:Ts,useRef:Ts,useState:Ts,useDebugValue:Ts,useDeferredValue:Ts,useTransition:Ts,useSyncExternalStore:Ts,useId:Ts,useHostTransitionStatus:Ts,useFormState:Ts,useActionState:Ts,useOptimistic:Ts,useMemoCache:Ts,useCacheRefresh:Ts},vm={readContext:Sa,use:Zl,useCallback:function(a,i){return Ha().memoizedState=[a,i===void 0?null:i],a},useContext:Sa,useEffect:bd,useImperativeHandle:function(a,i,l){l=l!=null?l.concat([a]):null,ac(4194308,4,pm.bind(null,i,a),l)},useLayoutEffect:function(a,i){return ac(4194308,4,a,i)},useInsertionEffect:function(a,i){ac(4,2,a,i)},useMemo:function(a,i){var l=Ha();i=i===void 0?null:i;var u=a();if(Ma){st(!0);try{a()}finally{st(!1)}}return l.memoizedState=[u,i],u},useReducer:function(a,i,l){var u=Ha();if(l!==void 0){var p=l(i);if(Ma){st(!0);try{l(i)}finally{st(!1)}}}else p=i;return u.memoizedState=u.baseState=p,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:p},u.queue=a,a=a.dispatch=kd.bind(null,es,a),[u.memoizedState,a]},useRef:function(a){var i=Ha();return a={current:a},i.memoizedState=a},useState:function(a){a=el(a);var i=a.queue,l=cc.bind(null,es,i);return i.dispatch=l,[a.memoizedState,l]},useDebugValue:jd,useDeferredValue:function(a,i){var l=Ha();return rc(l,a,i)},useTransition:function(){var a=el(!1);return a=Cd.bind(null,es,a.queue,!0,!1),Ha().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,i,l){var u=es,p=Ha();if(Wt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=i(),Is===null)throw Error(n(349));(ps&124)!==0||im(u,i,l)}p.memoizedState=l;var j={value:l,getSnapshot:i};return p.queue=j,bd(fd.bind(null,u,j,a),[a]),u.flags|=2048,li(9,sc(),ec.bind(null,u,j,l,i),null),l},useId:function(){var a=Ha(),i=Is.identifierPrefix;if(Wt){var l=gr,u=ga;l=(u&~(1<<32-He(u)-1)).toString(32)+l,i="«"+i+"R"+l,l=pr++,0<l&&(i+="H"+l.toString(32)),i+="»"}else l=Tr++,i="«"+i+"r"+l.toString(32)+"»";return a.memoizedState=i},useHostTransitionStatus:Or,useFormState:pd,useActionState:pd,useOptimistic:function(a){var i=Ha();i.memoizedState=i.baseState=a;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=_d.bind(null,es,!0,l),l.dispatch=i,[a,i]},useMemoCache:md,useCacheRefresh:function(){return Ha().memoizedState=sl.bind(null,es)}},jm={readContext:Sa,use:Zl,useCallback:wd,useContext:Sa,useEffect:Zi,useImperativeHandle:ym,useInsertionEffect:ci,useLayoutEffect:vd,useMemo:Nd,useReducer:Jl,useRef:yd,useState:function(){return Jl(Mr)},useDebugValue:jd,useDeferredValue:function(a,i){var l=Xs();return Sd(l,vs.memoizedState,a,i)},useTransition:function(){var a=Jl(Mr)[0],i=Xs().memoizedState;return[typeof a=="boolean"?a:Zo(a),i]},useSyncExternalStore:hd,useId:oc,useHostTransitionStatus:Or,useFormState:gm,useActionState:gm,useOptimistic:function(a,i){var l=Xs();return lm(l,vs,a,i)},useMemoCache:md,useCacheRefresh:lc},pf={readContext:Sa,use:Zl,useCallback:wd,useContext:Sa,useEffect:Zi,useImperativeHandle:ym,useInsertionEffect:ci,useLayoutEffect:vd,useMemo:Nd,useReducer:nm,useRef:yd,useState:function(){return nm(Mr)},useDebugValue:jd,useDeferredValue:function(a,i){var l=Xs();return vs===null?rc(l,a,i):Sd(l,vs.memoizedState,a,i)},useTransition:function(){var a=nm(Mr)[0],i=Xs().memoizedState;return[typeof a=="boolean"?a:Zo(a),i]},useSyncExternalStore:hd,useId:oc,useHostTransitionStatus:Or,useFormState:tc,useActionState:tc,useOptimistic:function(a,i){var l=Xs();return vs!==null?lm(l,vs,a,i):(l.baseState=a,[a,l.queue.dispatch])},useMemoCache:md,useCacheRefresh:lc},Ji=null,al=0;function eo(a){var i=al;return al+=1,Ji===null&&(Ji=[]),tm(Ji,a,i)}function to(a,i){i=i.props.ref,a.ref=i!==void 0?i:null}function mc(a,i){throw i.$$typeof===w?Error(n(525)):(a=Object.prototype.toString.call(i),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)))}function wm(a){var i=a._init;return i(a._payload)}function Nm(a){function i(Ue,Oe){if(a){var qe=Ue.deletions;qe===null?(Ue.deletions=[Oe],Ue.flags|=16):qe.push(Oe)}}function l(Ue,Oe){if(!a)return null;for(;Oe!==null;)i(Ue,Oe),Oe=Oe.sibling;return null}function u(Ue){for(var Oe=new Map;Ue!==null;)Ue.key!==null?Oe.set(Ue.key,Ue):Oe.set(Ue.index,Ue),Ue=Ue.sibling;return Oe}function p(Ue,Oe){return Ue=fr(Ue,Oe),Ue.index=0,Ue.sibling=null,Ue}function j(Ue,Oe,qe){return Ue.index=qe,a?(qe=Ue.alternate,qe!==null?(qe=qe.index,qe<Oe?(Ue.flags|=67108866,Oe):qe):(Ue.flags|=67108866,Oe)):(Ue.flags|=1048576,Oe)}function $(Ue){return a&&Ue.alternate===null&&(Ue.flags|=67108866),Ue}function X(Ue,Oe,qe,dt){return Oe===null||Oe.tag!==6?(Oe=Vi(qe,Ue.mode,dt),Oe.return=Ue,Oe):(Oe=p(Oe,qe),Oe.return=Ue,Oe)}function Ne(Ue,Oe,qe,dt){var Ft=qe.type;return Ft===E?lt(Ue,Oe,qe.props.children,dt,qe.key):Oe!==null&&(Oe.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===oe&&wm(Ft)===Oe.type)?(Oe=p(Oe,qe.props),to(Oe,qe),Oe.return=Ue,Oe):(Oe=On(qe.type,qe.key,qe.props,null,Ue.mode,dt),to(Oe,qe),Oe.return=Ue,Oe)}function We(Ue,Oe,qe,dt){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==qe.containerInfo||Oe.stateNode.implementation!==qe.implementation?(Oe=mn(qe,Ue.mode,dt),Oe.return=Ue,Oe):(Oe=p(Oe,qe.children||[]),Oe.return=Ue,Oe)}function lt(Ue,Oe,qe,dt,Ft){return Oe===null||Oe.tag!==7?(Oe=ni(qe,Ue.mode,dt,Ft),Oe.return=Ue,Oe):(Oe=p(Oe,qe),Oe.return=Ue,Oe)}function ft(Ue,Oe,qe){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=Vi(""+Oe,Ue.mode,qe),Oe.return=Ue,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case S:return qe=On(Oe.type,Oe.key,Oe.props,null,Ue.mode,qe),to(qe,Oe),qe.return=Ue,qe;case _:return Oe=mn(Oe,Ue.mode,qe),Oe.return=Ue,Oe;case oe:var dt=Oe._init;return Oe=dt(Oe._payload),ft(Ue,Oe,qe)}if(ue(Oe)||Te(Oe))return Oe=ni(Oe,Ue.mode,qe,null),Oe.return=Ue,Oe;if(typeof Oe.then=="function")return ft(Ue,eo(Oe),qe);if(Oe.$$typeof===O)return ft(Ue,Vo(Ue,Oe),qe);mc(Ue,Oe)}return null}function Ze(Ue,Oe,qe,dt){var Ft=Oe!==null?Oe.key:null;if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return Ft!==null?null:X(Ue,Oe,""+qe,dt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case S:return qe.key===Ft?Ne(Ue,Oe,qe,dt):null;case _:return qe.key===Ft?We(Ue,Oe,qe,dt):null;case oe:return Ft=qe._init,qe=Ft(qe._payload),Ze(Ue,Oe,qe,dt)}if(ue(qe)||Te(qe))return Ft!==null?null:lt(Ue,Oe,qe,dt,null);if(typeof qe.then=="function")return Ze(Ue,Oe,eo(qe),dt);if(qe.$$typeof===O)return Ze(Ue,Oe,Vo(Ue,qe),dt);mc(Ue,qe)}return null}function at(Ue,Oe,qe,dt,Ft){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return Ue=Ue.get(qe)||null,X(Oe,Ue,""+dt,Ft);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case S:return Ue=Ue.get(dt.key===null?qe:dt.key)||null,Ne(Oe,Ue,dt,Ft);case _:return Ue=Ue.get(dt.key===null?qe:dt.key)||null,We(Oe,Ue,dt,Ft);case oe:var cs=dt._init;return dt=cs(dt._payload),at(Ue,Oe,qe,dt,Ft)}if(ue(dt)||Te(dt))return Ue=Ue.get(qe)||null,lt(Oe,Ue,dt,Ft,null);if(typeof dt.then=="function")return at(Ue,Oe,qe,eo(dt),Ft);if(dt.$$typeof===O)return at(Ue,Oe,qe,Vo(Oe,dt),Ft);mc(Oe,dt)}return null}function Qt(Ue,Oe,qe,dt){for(var Ft=null,cs=null,Ht=Oe,Yt=Oe=0,_a=null;Ht!==null&&Yt<qe.length;Yt++){Ht.index>Yt?(_a=Ht,Ht=null):_a=Ht.sibling;var bs=Ze(Ue,Ht,qe[Yt],dt);if(bs===null){Ht===null&&(Ht=_a);break}a&&Ht&&bs.alternate===null&&i(Ue,Ht),Oe=j(bs,Oe,Yt),cs===null?Ft=bs:cs.sibling=bs,cs=bs,Ht=_a}if(Yt===qe.length)return l(Ue,Ht),Wt&&Rt(Ue,Yt),Ft;if(Ht===null){for(;Yt<qe.length;Yt++)Ht=ft(Ue,qe[Yt],dt),Ht!==null&&(Oe=j(Ht,Oe,Yt),cs===null?Ft=Ht:cs.sibling=Ht,cs=Ht);return Wt&&Rt(Ue,Yt),Ft}for(Ht=u(Ht);Yt<qe.length;Yt++)_a=at(Ht,Ue,Yt,qe[Yt],dt),_a!==null&&(a&&_a.alternate!==null&&Ht.delete(_a.key===null?Yt:_a.key),Oe=j(_a,Oe,Yt),cs===null?Ft=_a:cs.sibling=_a,cs=_a);return a&&Ht.forEach(function(po){return i(Ue,po)}),Wt&&Rt(Ue,Yt),Ft}function Kt(Ue,Oe,qe,dt){if(qe==null)throw Error(n(151));for(var Ft=null,cs=null,Ht=Oe,Yt=Oe=0,_a=null,bs=qe.next();Ht!==null&&!bs.done;Yt++,bs=qe.next()){Ht.index>Yt?(_a=Ht,Ht=null):_a=Ht.sibling;var po=Ze(Ue,Ht,bs.value,dt);if(po===null){Ht===null&&(Ht=_a);break}a&&Ht&&po.alternate===null&&i(Ue,Ht),Oe=j(po,Oe,Yt),cs===null?Ft=po:cs.sibling=po,cs=po,Ht=_a}if(bs.done)return l(Ue,Ht),Wt&&Rt(Ue,Yt),Ft;if(Ht===null){for(;!bs.done;Yt++,bs=qe.next())bs=ft(Ue,bs.value,dt),bs!==null&&(Oe=j(bs,Oe,Yt),cs===null?Ft=bs:cs.sibling=bs,cs=bs);return Wt&&Rt(Ue,Yt),Ft}for(Ht=u(Ht);!bs.done;Yt++,bs=qe.next())bs=at(Ht,Ue,Yt,bs.value,dt),bs!==null&&(a&&bs.alternate!==null&&Ht.delete(bs.key===null?Yt:bs.key),Oe=j(bs,Oe,Yt),cs===null?Ft=bs:cs.sibling=bs,cs=bs);return a&&Ht.forEach(function($w){return i(Ue,$w)}),Wt&&Rt(Ue,Yt),Ft}function Ds(Ue,Oe,qe,dt){if(typeof qe=="object"&&qe!==null&&qe.type===E&&qe.key===null&&(qe=qe.props.children),typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case S:e:{for(var Ft=qe.key;Oe!==null;){if(Oe.key===Ft){if(Ft=qe.type,Ft===E){if(Oe.tag===7){l(Ue,Oe.sibling),dt=p(Oe,qe.props.children),dt.return=Ue,Ue=dt;break e}}else if(Oe.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===oe&&wm(Ft)===Oe.type){l(Ue,Oe.sibling),dt=p(Oe,qe.props),to(dt,qe),dt.return=Ue,Ue=dt;break e}l(Ue,Oe);break}else i(Ue,Oe);Oe=Oe.sibling}qe.type===E?(dt=ni(qe.props.children,Ue.mode,dt,qe.key),dt.return=Ue,Ue=dt):(dt=On(qe.type,qe.key,qe.props,null,Ue.mode,dt),to(dt,qe),dt.return=Ue,Ue=dt)}return $(Ue);case _:e:{for(Ft=qe.key;Oe!==null;){if(Oe.key===Ft)if(Oe.tag===4&&Oe.stateNode.containerInfo===qe.containerInfo&&Oe.stateNode.implementation===qe.implementation){l(Ue,Oe.sibling),dt=p(Oe,qe.children||[]),dt.return=Ue,Ue=dt;break e}else{l(Ue,Oe);break}else i(Ue,Oe);Oe=Oe.sibling}dt=mn(qe,Ue.mode,dt),dt.return=Ue,Ue=dt}return $(Ue);case oe:return Ft=qe._init,qe=Ft(qe._payload),Ds(Ue,Oe,qe,dt)}if(ue(qe))return Qt(Ue,Oe,qe,dt);if(Te(qe)){if(Ft=Te(qe),typeof Ft!="function")throw Error(n(150));return qe=Ft.call(qe),Kt(Ue,Oe,qe,dt)}if(typeof qe.then=="function")return Ds(Ue,Oe,eo(qe),dt);if(qe.$$typeof===O)return Ds(Ue,Oe,Vo(Ue,qe),dt);mc(Ue,qe)}return typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint"?(qe=""+qe,Oe!==null&&Oe.tag===6?(l(Ue,Oe.sibling),dt=p(Oe,qe),dt.return=Ue,Ue=dt):(l(Ue,Oe),dt=Vi(qe,Ue.mode,dt),dt.return=Ue,Ue=dt),$(Ue)):l(Ue,Oe)}return function(Ue,Oe,qe,dt){try{al=0;var Ft=Ds(Ue,Oe,qe,dt);return Ji=null,Ft}catch(Ht){if(Ht===Ko||Ht===Hl)throw Ht;var cs=Ua(29,Ht,null,Ue.mode);return cs.lanes=dt,cs.return=Ue,cs}finally{}}}var so=Nm(!0),Sm=Nm(!1),b=xe(null),D=null;function K(a){var i=a.alternate;ae(Be,Be.current&1),ae(b,a),D===null&&(i===null||Xi.current!==null||i.memoizedState!==null)&&(D=a)}function he(a){if(a.tag===22){if(ae(Be,Be.current),ae(b,a),D===null){var i=a.alternate;i!==null&&i.memoizedState!==null&&(D=a)}}else we()}function we(){ae(Be,Be.current),ae(b,b.current)}function be(a){ve(b),D===a&&(D=null),ve(Be)}var Be=xe(0);function Je(a){for(var i=a;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||rg(l)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function pt(a,i,l,u){i=a.memoizedState,l=l(u,i),l=l==null?i:y({},i,l),a.memoizedState=l,a.lanes===0&&(a.updateQueue.baseState=l)}var Mt={enqueueSetState:function(a,i,l){a=a._reactInternals;var u=Pr(),p=Fn(u);p.payload=i,l!=null&&(p.callback=l),i=pn(a,p,u),i!==null&&(Fr(i,a,u),Go(i,a,u))},enqueueReplaceState:function(a,i,l){a=a._reactInternals;var u=Pr(),p=Fn(u);p.tag=1,p.payload=i,l!=null&&(p.callback=l),i=pn(a,p,u),i!==null&&(Fr(i,a,u),Go(i,a,u))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var l=Pr(),u=Fn(l);u.tag=2,i!=null&&(u.callback=i),i=pn(a,u,l),i!==null&&(Fr(i,a,l),Go(i,a,l))}};function Pt(a,i,l,u,p,j,$){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(u,j,$):i.prototype&&i.prototype.isPureReactComponent?!ur(l,u)||!ur(p,j):!0}function ts(a,i,l,u){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==a&&Mt.enqueueReplaceState(i,i.state,null)}function bt(a,i){var l=i;if("ref"in i){l={};for(var u in i)u!=="ref"&&(l[u]=i[u])}if(a=a.defaultProps){l===i&&(l=y({},l));for(var p in a)l[p]===void 0&&(l[p]=a[p])}return l}var yt=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function Ut(a){yt(a)}function Xt(a){console.error(a)}function Oa(a){yt(a)}function ys(a,i){try{var l=a.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Qs(a,i,l){try{var u=a.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function nr(a,i,l){return l=Fn(l),l.tag=3,l.payload={element:null},l.callback=function(){ys(a,i)},l}function hc(a){return a=Fn(a),a.tag=3,a}function Xx(a,i,l,u){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var j=u.value;a.payload=function(){return p(j)},a.callback=function(){Qs(i,l,u)}}var $=l.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(a.callback=function(){Qs(i,l,u),typeof p!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var X=u.stack;this.componentDidCatch(u.value,{componentStack:X!==null?X:""})})}function $j(a,i,l,u,p){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=l.alternate,i!==null&&Wr(i,l,p,!0),l=b.current,l!==null){switch(l.tag){case 13:return D===null?Uf():l.alternate===null&&Zs===0&&(Zs=3),l.flags&=-257,l.flags|=65536,l.lanes=p,u===nd?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([u]):i.add(u),Hf(a,u,p)),!1;case 22:return l.flags|=65536,u===nd?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([u]):l.add(u)),Hf(a,u,p)),!1}throw Error(n(435,l.tag))}return Hf(a,u,p),Uf(),!1}if(Wt)return i=b.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,u!==Bl&&(a=Error(n(422),{cause:u}),Ho(Ba(a,l)))):(u!==Bl&&(i=Error(n(423),{cause:u}),Ho(Ba(i,l))),a=a.current.alternate,a.flags|=65536,p&=-p,a.lanes|=p,u=Ba(u,l),p=nr(a.stateNode,u,p),Gi(a,p),Zs!==4&&(Zs=2)),!1;var j=Error(n(520),{cause:u});if(j=Ba(j,l),Id===null?Id=[j]:Id.push(j),Zs!==4&&(Zs=2),i===null)return!0;u=Ba(u,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,a=p&-p,l.lanes|=a,a=nr(l.stateNode,u,a),Gi(l,a),!1;case 1:if(i=l.type,j=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(lo===null||!lo.has(j))))return l.flags|=65536,p&=-p,l.lanes|=p,p=hc(p),Xx(p,a,l,u),Gi(l,p),!1}l=l.return}while(l!==null);return!1}var Qx=Error(n(461)),Ca=!1;function Ra(a,i,l,u){i.child=a===null?Sm(i,null,l,u):so(i,a.child,l,u)}function Zx(a,i,l,u,p){l=l.render;var j=i.ref;if("ref"in u){var $={};for(var X in u)X!=="ref"&&($[X]=u[X])}else $=u;return Ta(i),u=ld(a,i,l,$,j,p),X=Ql(),a!==null&&!Ca?(cd(a,i,p),di(a,i,p)):(Wt&&X&&Ys(i),i.flags|=1,Ra(a,i,u,p),i.child)}function Jx(a,i,l,u,p){if(a===null){var j=l.type;return typeof j=="function"&&!Jc(j)&&j.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=j,ep(a,i,j,u,p)):(a=On(l.type,null,u,i,i.mode,p),a.ref=i.ref,a.return=i,i.child=a)}if(j=a.child,!Cf(a,p)){var $=j.memoizedProps;if(l=l.compare,l=l!==null?l:ur,l($,u)&&a.ref===i.ref)return di(a,i,p)}return i.flags|=1,a=fr(j,u),a.ref=i.ref,a.return=i,i.child=a}function ep(a,i,l,u,p){if(a!==null){var j=a.memoizedProps;if(ur(j,u)&&a.ref===i.ref)if(Ca=!1,i.pendingProps=u=j,Cf(a,p))(a.flags&131072)!==0&&(Ca=!0);else return i.lanes=a.lanes,di(a,i,p)}return yf(a,i,l,u,p)}function tp(a,i,l){var u=i.pendingProps,p=u.children,j=a!==null?a.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=j!==null?j.baseLanes|l:l,a!==null){for(p=i.child=a.child,j=0;p!==null;)j=j|p.lanes|p.childLanes,p=p.sibling;i.childLanes=j&~u}else i.childLanes=0,i.child=null;return sp(a,i,u,l)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},a!==null&&zn(i,j!==null?j.cachePool:null),j!==null?Ln(i,j):Qi(),he(i);else return i.lanes=i.childLanes=536870912,sp(a,i,j!==null?j.baseLanes|l:l,l)}else j!==null?(zn(i,j.cachePool),Ln(i,j),we(),i.memoizedState=null):(a!==null&&zn(i,null),Qi(),we());return Ra(a,i,p,l),i.child}function sp(a,i,l,u){var p=ad();return p=p===null?null:{parent:Gs._currentValue,pool:p},i.memoizedState={baseLanes:l,cachePool:p},a!==null&&zn(i,null),Qi(),he(i),a!==null&&Wr(a,i,u,!0),null}function Cm(a,i){var l=i.ref;if(l===null)a!==null&&a.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(a===null||a.ref!==l)&&(i.flags|=4194816)}}function yf(a,i,l,u,p){return Ta(i),l=ld(a,i,l,u,void 0,p),u=Ql(),a!==null&&!Ca?(cd(a,i,p),di(a,i,p)):(Wt&&u&&Ys(i),i.flags|=1,Ra(a,i,l,p),i.child)}function ap(a,i,l,u,p,j){return Ta(i),i.updateQueue=null,l=rm(i,u,l,p),Xl(a),u=Ql(),a!==null&&!Ca?(cd(a,i,j),di(a,i,j)):(Wt&&u&&Ys(i),i.flags|=1,Ra(a,i,l,j),i.child)}function rp(a,i,l,u,p){if(Ta(i),i.stateNode===null){var j=Mn,$=l.contextType;typeof $=="object"&&$!==null&&(j=Sa($)),j=new l(u,j),i.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=Mt,i.stateNode=j,j._reactInternals=i,j=i.stateNode,j.props=u,j.state=i.memoizedState,j.refs={},ql(i),$=l.contextType,j.context=typeof $=="object"&&$!==null?Sa($):Mn,j.state=i.memoizedState,$=l.getDerivedStateFromProps,typeof $=="function"&&(pt(i,l,$,u),j.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||($=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),$!==j.state&&Mt.enqueueReplaceState(j,j.state,null),Xo(i,u,j,p),Wo(),j.state=i.memoizedState),typeof j.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(a===null){j=i.stateNode;var X=i.memoizedProps,Ne=bt(l,X);j.props=Ne;var We=j.context,lt=l.contextType;$=Mn,typeof lt=="object"&&lt!==null&&($=Sa(lt));var ft=l.getDerivedStateFromProps;lt=typeof ft=="function"||typeof j.getSnapshotBeforeUpdate=="function",X=i.pendingProps!==X,lt||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(X||We!==$)&&ts(i,j,u,$),Pn=!1;var Ze=i.memoizedState;j.state=Ze,Xo(i,u,j,p),Wo(),We=i.memoizedState,X||Ze!==We||Pn?(typeof ft=="function"&&(pt(i,l,ft,u),We=i.memoizedState),(Ne=Pn||Pt(i,l,Ne,u,Ze,We,$))?(lt||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(i.flags|=4194308)):(typeof j.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=We),j.props=u,j.state=We,j.context=$,u=Ne):(typeof j.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{j=i.stateNode,id(a,i),$=i.memoizedProps,lt=bt(l,$),j.props=lt,ft=i.pendingProps,Ze=j.context,We=l.contextType,Ne=Mn,typeof We=="object"&&We!==null&&(Ne=Sa(We)),X=l.getDerivedStateFromProps,(We=typeof X=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||($!==ft||Ze!==Ne)&&ts(i,j,u,Ne),Pn=!1,Ze=i.memoizedState,j.state=Ze,Xo(i,u,j,p),Wo();var at=i.memoizedState;$!==ft||Ze!==at||Pn||a!==null&&a.dependencies!==null&&Dr(a.dependencies)?(typeof X=="function"&&(pt(i,l,X,u),at=i.memoizedState),(lt=Pn||Pt(i,l,lt,u,Ze,at,Ne)||a!==null&&a.dependencies!==null&&Dr(a.dependencies))?(We||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(u,at,Ne),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(u,at,Ne)),typeof j.componentDidUpdate=="function"&&(i.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof j.componentDidUpdate!="function"||$===a.memoizedProps&&Ze===a.memoizedState||(i.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&Ze===a.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=at),j.props=u,j.state=at,j.context=Ne,u=lt):(typeof j.componentDidUpdate!="function"||$===a.memoizedProps&&Ze===a.memoizedState||(i.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&Ze===a.memoizedState||(i.flags|=1024),u=!1)}return j=u,Cm(a,i),u=(i.flags&128)!==0,j||u?(j=i.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:j.render(),i.flags|=1,a!==null&&u?(i.child=so(i,a.child,null,p),i.child=so(i,null,l,p)):Ra(a,i,l,p),i.memoizedState=j.state,a=i.child):a=di(a,i,p),a}function np(a,i,l,u){return gn(),i.flags|=256,Ra(a,i,l,u),i.child}var bf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vf(a){return{baseLanes:a,cachePool:rd()}}function jf(a,i,l){return a=a!==null?a.childLanes&~l:0,i&&(a|=Qr),a}function ip(a,i,l){var u=i.pendingProps,p=!1,j=(i.flags&128)!==0,$;if(($=j)||($=a!==null&&a.memoizedState===null?!1:(Be.current&2)!==0),$&&(p=!0,i.flags&=-129),$=(i.flags&32)!==0,i.flags&=-33,a===null){if(Wt){if(p?K(i):we(),Wt){var X=Es,Ne;if(Ne=X){e:{for(Ne=X,X=$a;Ne.nodeType!==8;){if(!X){X=null;break e}if(Ne=bn(Ne.nextSibling),Ne===null){X=null;break e}}X=Ne}X!==null?(i.memoizedState={dehydrated:X,treeContext:Kr!==null?{id:ga,overflow:gr}:null,retryLane:536870912,hydrationErrors:null},Ne=Ua(18,null,null,0),Ne.stateNode=X,Ne.return=i,i.child=Ne,$t=i,Es=null,Ne=!0):Ne=!1}Ne||In(i)}if(X=i.memoizedState,X!==null&&(X=X.dehydrated,X!==null))return rg(X)?i.lanes=32:i.lanes=536870912,null;be(i)}return X=u.children,u=u.fallback,p?(we(),p=i.mode,X=km({mode:"hidden",children:X},p),u=ni(u,p,l,null),X.return=i,u.return=i,X.sibling=u,i.child=X,p=i.child,p.memoizedState=vf(l),p.childLanes=jf(a,$,l),i.memoizedState=bf,u):(K(i),wf(i,X))}if(Ne=a.memoizedState,Ne!==null&&(X=Ne.dehydrated,X!==null)){if(j)i.flags&256?(K(i),i.flags&=-257,i=Nf(a,i,l)):i.memoizedState!==null?(we(),i.child=a.child,i.flags|=128,i=null):(we(),p=u.fallback,X=i.mode,u=km({mode:"visible",children:u.children},X),p=ni(p,X,l,null),p.flags|=2,u.return=i,p.return=i,u.sibling=p,i.child=u,so(i,a.child,null,l),u=i.child,u.memoizedState=vf(l),u.childLanes=jf(a,$,l),i.memoizedState=bf,i=p);else if(K(i),rg(X)){if($=X.nextSibling&&X.nextSibling.dataset,$)var We=$.dgst;$=We,u=Error(n(419)),u.stack="",u.digest=$,Ho({value:u,source:null,stack:null}),i=Nf(a,i,l)}else if(Ca||Wr(a,i,l,!1),$=(l&a.childLanes)!==0,Ca||$){if($=Is,$!==null&&(u=l&-l,u=(u&42)!==0?1:Ct(u),u=(u&($.suspendedLanes|l))!==0?0:u,u!==0&&u!==Ne.retryLane))throw Ne.retryLane=u,$i(a,u),Fr($,a,u),Qx;X.data==="$?"||Uf(),i=Nf(a,i,l)}else X.data==="$?"?(i.flags|=192,i.child=a.child,i=null):(a=Ne.treeContext,Es=bn(X.nextSibling),$t=i,Wt=!0,Yr=null,$a=!1,a!==null&&(wa[na++]=ga,wa[na++]=gr,wa[na++]=Kr,ga=a.id,gr=a.overflow,Kr=i),i=wf(i,u.children),i.flags|=4096);return i}return p?(we(),p=u.fallback,X=i.mode,Ne=a.child,We=Ne.sibling,u=fr(Ne,{mode:"hidden",children:u.children}),u.subtreeFlags=Ne.subtreeFlags&65011712,We!==null?p=fr(We,p):(p=ni(p,X,l,null),p.flags|=2),p.return=i,u.return=i,u.sibling=p,i.child=u,u=p,p=i.child,X=a.child.memoizedState,X===null?X=vf(l):(Ne=X.cachePool,Ne!==null?(We=Gs._currentValue,Ne=Ne.parent!==We?{parent:We,pool:We}:Ne):Ne=rd(),X={baseLanes:X.baseLanes|l,cachePool:Ne}),p.memoizedState=X,p.childLanes=jf(a,$,l),i.memoizedState=bf,u):(K(i),l=a.child,a=l.sibling,l=fr(l,{mode:"visible",children:u.children}),l.return=i,l.sibling=null,a!==null&&($=i.deletions,$===null?(i.deletions=[a],i.flags|=16):$.push(a)),i.child=l,i.memoizedState=null,l)}function wf(a,i){return i=km({mode:"visible",children:i},a.mode),i.return=a,a.child=i}function km(a,i){return a=Ua(22,a,null,i),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Nf(a,i,l){return so(i,a.child,null,l),a=wf(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function op(a,i,l){a.lanes|=i;var u=a.alternate;u!==null&&(u.lanes|=i),ed(a.return,i,l)}function Sf(a,i,l,u,p){var j=a.memoizedState;j===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:p}:(j.isBackwards=i,j.rendering=null,j.renderingStartTime=0,j.last=u,j.tail=l,j.tailMode=p)}function lp(a,i,l){var u=i.pendingProps,p=u.revealOrder,j=u.tail;if(Ra(a,i,u.children,l),u=Be.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&op(a,l,i);else if(a.tag===19)op(a,l,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}u&=1}switch(ae(Be,u),p){case"forwards":for(l=i.child,p=null;l!==null;)a=l.alternate,a!==null&&Je(a)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),Sf(i,!1,p,l,j);break;case"backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(a=p.alternate,a!==null&&Je(a)===null){i.child=p;break}a=p.sibling,p.sibling=l,l=p,p=a}Sf(i,!0,l,null,j);break;case"together":Sf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function di(a,i,l){if(a!==null&&(i.dependencies=a.dependencies),oo|=i.lanes,(l&i.childLanes)===0)if(a!==null){if(Wr(a,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(a!==null&&i.child!==a.child)throw Error(n(153));if(i.child!==null){for(a=i.child,l=fr(a,a.pendingProps),i.child=l,l.return=i;a.sibling!==null;)a=a.sibling,l=l.sibling=fr(a,a.pendingProps),l.return=i;l.sibling=null}return i.child}function Cf(a,i){return(a.lanes&i)!==0?!0:(a=a.dependencies,!!(a!==null&&Dr(a)))}function Hj(a,i,l){switch(i.tag){case 3:f(i,i.stateNode.containerInfo),xa(i,Gs,a.memoizedState.cache),gn();break;case 27:case 5:N(i);break;case 4:f(i,i.stateNode.containerInfo);break;case 10:xa(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(K(i),i.flags|=128,null):(l&i.child.childLanes)!==0?ip(a,i,l):(K(i),a=di(a,i,l),a!==null?a.sibling:null);K(i);break;case 19:var p=(a.flags&128)!==0;if(u=(l&i.childLanes)!==0,u||(Wr(a,i,l,!1),u=(l&i.childLanes)!==0),p){if(u)return lp(a,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ae(Be,Be.current),u)break;return null;case 22:case 23:return i.lanes=0,tp(a,i,l);case 24:xa(i,Gs,a.memoizedState.cache)}return di(a,i,l)}function cp(a,i,l){if(a!==null)if(a.memoizedProps!==i.pendingProps)Ca=!0;else{if(!Cf(a,l)&&(i.flags&128)===0)return Ca=!1,Hj(a,i,l);Ca=(a.flags&131072)!==0}else Ca=!1,Wt&&(i.flags&1048576)!==0&&Ks(i,Ea,i.index);switch(i.lanes=0,i.tag){case 16:e:{a=i.pendingProps;var u=i.elementType,p=u._init;if(u=p(u._payload),i.type=u,typeof u=="function")Jc(u)?(a=bt(u,a),i.tag=1,i=rp(null,i,u,a,l)):(i.tag=0,i=yf(null,i,u,a,l));else{if(u!=null){if(p=u.$$typeof,p===R){i.tag=11,i=Zx(null,i,u,a,l);break e}else if(p===ee){i.tag=14,i=Jx(null,i,u,a,l);break e}}throw i=ne(u)||u,Error(n(306,i,""))}}return i;case 0:return yf(a,i,i.type,i.pendingProps,l);case 1:return u=i.type,p=bt(u,i.pendingProps),rp(a,i,u,p,l);case 3:e:{if(f(i,i.stateNode.containerInfo),a===null)throw Error(n(387));u=i.pendingProps;var j=i.memoizedState;p=j.element,id(a,i),Xo(i,u,null,l);var $=i.memoizedState;if(u=$.cache,xa(i,Gs,u),u!==j.cache&&Na(i,[Gs],l,!0),Wo(),u=$.element,j.isDehydrated)if(j={element:u,isDehydrated:!1,cache:$.cache},i.updateQueue.baseState=j,i.memoizedState=j,i.flags&256){i=np(a,i,u,l);break e}else if(u!==p){p=Ba(Error(n(424)),i),Ho(p),i=np(a,i,u,l);break e}else{switch(a=i.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Es=bn(a.firstChild),$t=i,Wt=!0,Yr=null,$a=!0,l=Sm(i,null,u,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(gn(),u===p){i=di(a,i,l);break e}Ra(a,i,u,l)}i=i.child}return i;case 26:return Cm(a,i),a===null?(l=h0(i.type,null,i.pendingProps,null))?i.memoizedState=l:Wt||(l=i.type,a=i.pendingProps,u=Bm(k.current).createElement(l),u[le]=i,u[Ve]=a,za(u,l,a),ot(u),i.stateNode=u):i.memoizedState=h0(i.type,a.memoizedProps,i.pendingProps,a.memoizedState),null;case 27:return N(i),a===null&&Wt&&(u=i.stateNode=d0(i.type,i.pendingProps,k.current),$t=i,$a=!0,p=Es,mo(i.type)?(ng=p,Es=bn(u.firstChild)):Es=p),Ra(a,i,i.pendingProps.children,l),Cm(a,i),a===null&&(i.flags|=4194304),i.child;case 5:return a===null&&Wt&&((p=u=Es)&&(u=pw(u,i.type,i.pendingProps,$a),u!==null?(i.stateNode=u,$t=i,Es=bn(u.firstChild),$a=!1,p=!0):p=!1),p||In(i)),N(i),p=i.type,j=i.pendingProps,$=a!==null?a.memoizedProps:null,u=j.children,tg(p,j)?u=null:$!==null&&tg(p,$)&&(i.flags|=32),i.memoizedState!==null&&(p=ld(a,i,ff,null,null,l),Vd._currentValue=p),Cm(a,i),Ra(a,i,u,l),i.child;case 6:return a===null&&Wt&&((a=l=Es)&&(l=yw(l,i.pendingProps,$a),l!==null?(i.stateNode=l,$t=i,Es=null,a=!0):a=!1),a||In(i)),null;case 13:return ip(a,i,l);case 4:return f(i,i.stateNode.containerInfo),u=i.pendingProps,a===null?i.child=so(i,null,u,l):Ra(a,i,u,l),i.child;case 11:return Zx(a,i,i.type,i.pendingProps,l);case 7:return Ra(a,i,i.pendingProps,l),i.child;case 8:return Ra(a,i,i.pendingProps.children,l),i.child;case 12:return Ra(a,i,i.pendingProps.children,l),i.child;case 10:return u=i.pendingProps,xa(i,i.type,u.value),Ra(a,i,u.children,l),i.child;case 9:return p=i.type._context,u=i.pendingProps.children,Ta(i),p=Sa(p),u=u(p),i.flags|=1,Ra(a,i,u,l),i.child;case 14:return Jx(a,i,i.type,i.pendingProps,l);case 15:return ep(a,i,i.type,i.pendingProps,l);case 19:return lp(a,i,l);case 31:return u=i.pendingProps,l=i.mode,u={mode:u.mode,children:u.children},a===null?(l=km(u,l),l.ref=i.ref,i.child=l,l.return=i,i=l):(l=fr(a.child,u),l.ref=i.ref,i.child=l,l.return=i,i=l),i;case 22:return tp(a,i,l);case 24:return Ta(i),u=Sa(Gs),a===null?(p=ad(),p===null&&(p=Is,j=$l(),p.pooledCache=j,j.refCount++,j!==null&&(p.pooledCacheLanes|=l),p=j),i.memoizedState={parent:u,cache:p},ql(i),xa(i,Gs,p)):((a.lanes&l)!==0&&(id(a,i),Xo(i,null,null,l),Wo()),p=a.memoizedState,j=i.memoizedState,p.parent!==u?(p={parent:u,cache:u},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),xa(i,Gs,u)):(u=j.cache,xa(i,Gs,u),u!==p.cache&&Na(i,[Gs],l,!0))),Ra(a,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(n(156,i.tag))}function ui(a){a.flags|=4}function dp(a,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!y0(i)){if(i=b.current,i!==null&&((ps&4194048)===ps?D!==null:(ps&62914560)!==ps&&(ps&536870912)===0||i!==D))throw Yo=nd,Ju;a.flags|=8192}}function _m(a,i){i!==null&&(a.flags|=4),a.flags&16384&&(i=a.tag!==22?tt():536870912,a.lanes|=i,pc|=i)}function Dd(a,i){if(!Wt)switch(a.tailMode){case"hidden":i=a.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?a.tail=null:l.sibling=null;break;case"collapsed":l=a.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:u.sibling=null}}function Us(a){var i=a.alternate!==null&&a.alternate.child===a.child,l=0,u=0;if(i)for(var p=a.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=a,p=p.sibling;else for(p=a.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=a,p=p.sibling;return a.subtreeFlags|=u,a.childLanes=l,i}function Vj(a,i,l){var u=i.pendingProps;switch(Rn(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Us(i),null;case 1:return Us(i),null;case 3:return l=i.stateNode,u=null,a!==null&&(u=a.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ia(Gs),x(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(a===null||a.child===null)&&(fn(i)?ui(i):a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Wu())),Us(i),null;case 26:return l=i.memoizedState,a===null?(ui(i),l!==null?(Us(i),dp(i,l)):(Us(i),i.flags&=-16777217)):l?l!==a.memoizedState?(ui(i),Us(i),dp(i,l)):(Us(i),i.flags&=-16777217):(a.memoizedProps!==u&&ui(i),Us(i),i.flags&=-16777217),null;case 27:C(i),l=k.current;var p=i.type;if(a!==null&&i.stateNode!=null)a.memoizedProps!==u&&ui(i);else{if(!u){if(i.stateNode===null)throw Error(n(166));return Us(i),null}a=Ce.current,fn(i)?qi(i):(a=d0(p,u,l),i.stateNode=a,ui(i))}return Us(i),null;case 5:if(C(i),l=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==u&&ui(i);else{if(!u){if(i.stateNode===null)throw Error(n(166));return Us(i),null}if(a=Ce.current,fn(i))qi(i);else{switch(p=Bm(k.current),a){case 1:a=p.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:a=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":a=p.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":a=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":a=p.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof u.is=="string"?p.createElement("select",{is:u.is}):p.createElement("select"),u.multiple?a.multiple=!0:u.size&&(a.size=u.size);break;default:a=typeof u.is=="string"?p.createElement(l,{is:u.is}):p.createElement(l)}}a[le]=i,a[Ve]=u;e:for(p=i.child;p!==null;){if(p.tag===5||p.tag===6)a.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)break e;for(;p.sibling===null;){if(p.return===null||p.return===i)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}i.stateNode=a;e:switch(za(a,l,u),l){case"button":case"input":case"select":case"textarea":a=!!u.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ui(i)}}return Us(i),i.flags&=-16777217,null;case 6:if(a&&i.stateNode!=null)a.memoizedProps!==u&&ui(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(n(166));if(a=k.current,fn(i)){if(a=i.stateNode,l=i.memoizedProps,u=null,p=$t,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}a[le]=i,a=!!(a.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||a0(a.nodeValue,l)),a||In(i)}else a=Bm(a).createTextNode(u),a[le]=i,i.stateNode=a}return Us(i),null;case 13:if(u=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(p=fn(i),u!==null&&u.dehydrated!==null){if(a===null){if(!p)throw Error(n(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[le]=i}else gn(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Us(i),p=!1}else p=Wu(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(be(i),i):(be(i),null)}if(be(i),(i.flags&128)!==0)return i.lanes=l,i;if(l=u!==null,a=a!==null&&a.memoizedState!==null,l){u=i.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool);var j=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(j=u.memoizedState.cachePool.pool),j!==p&&(u.flags|=2048)}return l!==a&&l&&(i.child.flags|=8192),_m(i,i.updateQueue),Us(i),null;case 4:return x(),a===null&&Xf(i.stateNode.containerInfo),Us(i),null;case 10:return ia(i.type),Us(i),null;case 19:if(ve(Be),p=i.memoizedState,p===null)return Us(i),null;if(u=(i.flags&128)!==0,j=p.rendering,j===null)if(u)Dd(p,!1);else{if(Zs!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(j=Je(a),j!==null){for(i.flags|=128,Dd(p,!1),a=j.updateQueue,i.updateQueue=a,_m(i,a),i.subtreeFlags=0,a=l,l=i.child;l!==null;)Hi(l,a),l=l.sibling;return ae(Be,Be.current&1|2),i.child}a=a.sibling}p.tail!==null&&J()>Em&&(i.flags|=128,u=!0,Dd(p,!1),i.lanes=4194304)}else{if(!u)if(a=Je(j),a!==null){if(i.flags|=128,u=!0,a=a.updateQueue,i.updateQueue=a,_m(i,a),Dd(p,!0),p.tail===null&&p.tailMode==="hidden"&&!j.alternate&&!Wt)return Us(i),null}else 2*J()-p.renderingStartTime>Em&&l!==536870912&&(i.flags|=128,u=!0,Dd(p,!1),i.lanes=4194304);p.isBackwards?(j.sibling=i.child,i.child=j):(a=p.last,a!==null?a.sibling=j:i.child=j,p.last=j)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=J(),i.sibling=null,a=Be.current,ae(Be,u?a&1|2:a&1),i):(Us(i),null);case 22:case 23:return be(i),Qo(),u=i.memoizedState!==null,a!==null?a.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(l&536870912)!==0&&(i.flags&128)===0&&(Us(i),i.subtreeFlags&6&&(i.flags|=8192)):Us(i),l=i.updateQueue,l!==null&&_m(i,l.retryQueue),l=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==l&&(i.flags|=2048),a!==null&&ve(oi),null;case 24:return l=null,a!==null&&(l=a.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ia(Gs),Us(i),null;case 25:return null;case 30:return null}throw Error(n(156,i.tag))}function qj(a,i){switch(Rn(i),i.tag){case 1:return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return ia(Gs),x(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 26:case 27:case 5:return C(i),null;case 13:if(be(i),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(n(340));gn()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return ve(Be),null;case 4:return x(),null;case 10:return ia(i.type),null;case 22:case 23:return be(i),Qo(),a!==null&&ve(oi),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 24:return ia(Gs),null;case 25:return null;default:return null}}function up(a,i){switch(Rn(i),i.tag){case 3:ia(Gs),x();break;case 26:case 27:case 5:C(i);break;case 4:x();break;case 13:be(i);break;case 19:ve(Be);break;case 10:ia(i.type);break;case 22:case 23:be(i),Qo(),a!==null&&ve(oi);break;case 24:ia(Gs)}}function Ed(a,i){try{var l=i.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var p=u.next;l=p;do{if((l.tag&a)===a){u=void 0;var j=l.create,$=l.inst;u=j(),$.destroy=u}l=l.next}while(l!==p)}}catch(X){Ms(i,i.return,X)}}function ao(a,i,l){try{var u=i.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var j=p.next;u=j;do{if((u.tag&a)===a){var $=u.inst,X=$.destroy;if(X!==void 0){$.destroy=void 0,p=i;var Ne=l,We=X;try{We()}catch(lt){Ms(p,Ne,lt)}}}u=u.next}while(u!==j)}}catch(lt){Ms(i,i.return,lt)}}function mp(a){var i=a.updateQueue;if(i!==null){var l=a.stateNode;try{Yl(i,l)}catch(u){Ms(a,a.return,u)}}}function hp(a,i,l){l.props=bt(a.type,a.memoizedProps),l.state=a.memoizedState;try{l.componentWillUnmount()}catch(u){Ms(a,i,u)}}function Td(a,i){try{var l=a.ref;if(l!==null){switch(a.tag){case 26:case 27:case 5:var u=a.stateNode;break;case 30:u=a.stateNode;break;default:u=a.stateNode}typeof l=="function"?a.refCleanup=l(u):l.current=u}}catch(p){Ms(a,i,p)}}function Bn(a,i){var l=a.ref,u=a.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(p){Ms(a,i,p)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){Ms(a,i,p)}else l.current=null}function fp(a){var i=a.type,l=a.memoizedProps,u=a.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(p){Ms(a,a.return,p)}}function kf(a,i,l){try{var u=a.stateNode;mw(u,a.type,l,i),u[Ve]=i}catch(p){Ms(a,a.return,p)}}function gp(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&mo(a.type)||a.tag===4}function _f(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||gp(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&mo(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Af(a,i,l){var u=a.tag;if(u===5||u===6)a=a.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(a,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(a),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Lm));else if(u!==4&&(u===27&&mo(a.type)&&(l=a.stateNode,i=null),a=a.child,a!==null))for(Af(a,i,l),a=a.sibling;a!==null;)Af(a,i,l),a=a.sibling}function Am(a,i,l){var u=a.tag;if(u===5||u===6)a=a.stateNode,i?l.insertBefore(a,i):l.appendChild(a);else if(u!==4&&(u===27&&mo(a.type)&&(l=a.stateNode),a=a.child,a!==null))for(Am(a,i,l),a=a.sibling;a!==null;)Am(a,i,l),a=a.sibling}function xp(a){var i=a.stateNode,l=a.memoizedProps;try{for(var u=a.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);za(i,u,l),i[le]=a,i[Ve]=l}catch(j){Ms(a,a.return,j)}}var mi=!1,ta=!1,Df=!1,pp=typeof WeakSet=="function"?WeakSet:Set,ka=null;function Kj(a,i){if(a=a.containerInfo,Jf=Km,a=ai(a),Wc(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{l=(l=a.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var p=u.anchorOffset,j=u.focusNode;u=u.focusOffset;try{l.nodeType,j.nodeType}catch{l=null;break e}var $=0,X=-1,Ne=-1,We=0,lt=0,ft=a,Ze=null;t:for(;;){for(var at;ft!==l||p!==0&&ft.nodeType!==3||(X=$+p),ft!==j||u!==0&&ft.nodeType!==3||(Ne=$+u),ft.nodeType===3&&($+=ft.nodeValue.length),(at=ft.firstChild)!==null;)Ze=ft,ft=at;for(;;){if(ft===a)break t;if(Ze===l&&++We===p&&(X=$),Ze===j&&++lt===u&&(Ne=$),(at=ft.nextSibling)!==null)break;ft=Ze,Ze=ft.parentNode}ft=at}l=X===-1||Ne===-1?null:{start:X,end:Ne}}else l=null}l=l||{start:0,end:0}}else l=null;for(eg={focusedElem:a,selectionRange:l},Km=!1,ka=i;ka!==null;)if(i=ka,a=i.child,(i.subtreeFlags&1024)!==0&&a!==null)a.return=i,ka=a;else for(;ka!==null;){switch(i=ka,j=i.alternate,a=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&j!==null){a=void 0,l=i,p=j.memoizedProps,j=j.memoizedState,u=l.stateNode;try{var Qt=bt(l.type,p,l.elementType===l.type);a=u.getSnapshotBeforeUpdate(Qt,j),u.__reactInternalSnapshotBeforeUpdate=a}catch(Kt){Ms(l,l.return,Kt)}}break;case 3:if((a&1024)!==0){if(a=i.stateNode.containerInfo,l=a.nodeType,l===9)ag(a);else if(l===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":ag(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=i.sibling,a!==null){a.return=i.return,ka=a;break}ka=i.return}}function yp(a,i,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:ro(a,l),u&4&&Ed(5,l);break;case 1:if(ro(a,l),u&4)if(a=l.stateNode,i===null)try{a.componentDidMount()}catch($){Ms(l,l.return,$)}else{var p=bt(l.type,i.memoizedProps);i=i.memoizedState;try{a.componentDidUpdate(p,i,a.__reactInternalSnapshotBeforeUpdate)}catch($){Ms(l,l.return,$)}}u&64&&mp(l),u&512&&Td(l,l.return);break;case 3:if(ro(a,l),u&64&&(a=l.updateQueue,a!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Yl(a,i)}catch($){Ms(l,l.return,$)}}break;case 27:i===null&&u&4&&xp(l);case 26:case 5:ro(a,l),i===null&&u&4&&fp(l),u&512&&Td(l,l.return);break;case 12:ro(a,l);break;case 13:ro(a,l),u&4&&jp(a,l),u&64&&(a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(l=tw.bind(null,l),bw(a,l))));break;case 22:if(u=l.memoizedState!==null||mi,!u){i=i!==null&&i.memoizedState!==null||ta,p=mi;var j=ta;mi=u,(ta=i)&&!j?no(a,l,(l.subtreeFlags&8772)!==0):ro(a,l),mi=p,ta=j}break;case 30:break;default:ro(a,l)}}function bp(a){var i=a.alternate;i!==null&&(a.alternate=null,bp(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&ze(i)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Fs=null,br=!1;function hi(a,i,l){for(l=l.child;l!==null;)vp(a,i,l),l=l.sibling}function vp(a,i,l){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(Re,l)}catch{}switch(l.tag){case 26:ta||Bn(l,i),hi(a,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ta||Bn(l,i);var u=Fs,p=br;mo(l.type)&&(Fs=l.stateNode,br=!1),hi(a,i,l),Bd(l.stateNode),Fs=u,br=p;break;case 5:ta||Bn(l,i);case 6:if(u=Fs,p=br,Fs=null,hi(a,i,l),Fs=u,br=p,Fs!==null)if(br)try{(Fs.nodeType===9?Fs.body:Fs.nodeName==="HTML"?Fs.ownerDocument.body:Fs).removeChild(l.stateNode)}catch(j){Ms(l,i,j)}else try{Fs.removeChild(l.stateNode)}catch(j){Ms(l,i,j)}break;case 18:Fs!==null&&(br?(a=Fs,l0(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,l.stateNode),Gd(a)):l0(Fs,l.stateNode));break;case 4:u=Fs,p=br,Fs=l.stateNode.containerInfo,br=!0,hi(a,i,l),Fs=u,br=p;break;case 0:case 11:case 14:case 15:ta||ao(2,l,i),ta||ao(4,l,i),hi(a,i,l);break;case 1:ta||(Bn(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"&&hp(l,i,u)),hi(a,i,l);break;case 21:hi(a,i,l);break;case 22:ta=(u=ta)||l.memoizedState!==null,hi(a,i,l),ta=u;break;default:hi(a,i,l)}}function jp(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Gd(a)}catch(l){Ms(i,i.return,l)}}function Yj(a){switch(a.tag){case 13:case 19:var i=a.stateNode;return i===null&&(i=a.stateNode=new pp),i;case 22:return a=a.stateNode,i=a._retryCache,i===null&&(i=a._retryCache=new pp),i;default:throw Error(n(435,a.tag))}}function Ef(a,i){var l=Yj(a);i.forEach(function(u){var p=sw.bind(null,a,u);l.has(u)||(l.add(u),u.then(p,p))})}function Rr(a,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var p=l[u],j=a,$=i,X=$;e:for(;X!==null;){switch(X.tag){case 27:if(mo(X.type)){Fs=X.stateNode,br=!1;break e}break;case 5:Fs=X.stateNode,br=!1;break e;case 3:case 4:Fs=X.stateNode.containerInfo,br=!0;break e}X=X.return}if(Fs===null)throw Error(n(160));vp(j,$,p),Fs=null,br=!1,j=p.alternate,j!==null&&(j.return=null),p.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)wp(i,a),i=i.sibling}var yn=null;function wp(a,i){var l=a.alternate,u=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Rr(i,a),Ir(a),u&4&&(ao(3,a,a.return),Ed(3,a),ao(5,a,a.return));break;case 1:Rr(i,a),Ir(a),u&512&&(ta||l===null||Bn(l,l.return)),u&64&&mi&&(a=a.updateQueue,a!==null&&(u=a.callbacks,u!==null&&(l=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var p=yn;if(Rr(i,a),Ir(a),u&512&&(ta||l===null||Bn(l,l.return)),u&4){var j=l!==null?l.memoizedState:null;if(u=a.memoizedState,l===null)if(u===null)if(a.stateNode===null){e:{u=a.type,l=a.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":j=p.getElementsByTagName("title")[0],(!j||j[ye]||j[le]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=p.createElement(u),p.head.insertBefore(j,p.querySelector("head > title"))),za(j,u,l),j[le]=a,ot(j),u=j;break e;case"link":var $=x0("link","href",p).get(u+(l.href||""));if($){for(var X=0;X<$.length;X++)if(j=$[X],j.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&j.getAttribute("rel")===(l.rel==null?null:l.rel)&&j.getAttribute("title")===(l.title==null?null:l.title)&&j.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){$.splice(X,1);break t}}j=p.createElement(u),za(j,u,l),p.head.appendChild(j);break;case"meta":if($=x0("meta","content",p).get(u+(l.content||""))){for(X=0;X<$.length;X++)if(j=$[X],j.getAttribute("content")===(l.content==null?null:""+l.content)&&j.getAttribute("name")===(l.name==null?null:l.name)&&j.getAttribute("property")===(l.property==null?null:l.property)&&j.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&j.getAttribute("charset")===(l.charSet==null?null:l.charSet)){$.splice(X,1);break t}}j=p.createElement(u),za(j,u,l),p.head.appendChild(j);break;default:throw Error(n(468,u))}j[le]=a,ot(j),u=j}a.stateNode=u}else p0(p,a.type,a.stateNode);else a.stateNode=g0(p,u,a.memoizedProps);else j!==u?(j===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):j.count--,u===null?p0(p,a.type,a.stateNode):g0(p,u,a.memoizedProps)):u===null&&a.stateNode!==null&&kf(a,a.memoizedProps,l.memoizedProps)}break;case 27:Rr(i,a),Ir(a),u&512&&(ta||l===null||Bn(l,l.return)),l!==null&&u&4&&kf(a,a.memoizedProps,l.memoizedProps);break;case 5:if(Rr(i,a),Ir(a),u&512&&(ta||l===null||Bn(l,l.return)),a.flags&32){p=a.stateNode;try{Cr(p,"")}catch(at){Ms(a,a.return,at)}}u&4&&a.stateNode!=null&&(p=a.memoizedProps,kf(a,p,l!==null?l.memoizedProps:p)),u&1024&&(Df=!0);break;case 6:if(Rr(i,a),Ir(a),u&4){if(a.stateNode===null)throw Error(n(162));u=a.memoizedProps,l=a.stateNode;try{l.nodeValue=u}catch(at){Ms(a,a.return,at)}}break;case 3:if(Hm=null,p=yn,yn=Um(i.containerInfo),Rr(i,a),yn=p,Ir(a),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Gd(i.containerInfo)}catch(at){Ms(a,a.return,at)}Df&&(Df=!1,Np(a));break;case 4:u=yn,yn=Um(a.stateNode.containerInfo),Rr(i,a),Ir(a),yn=u;break;case 12:Rr(i,a),Ir(a);break;case 13:Rr(i,a),Ir(a),a.child.flags&8192&&a.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(zf=J()),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,Ef(a,u)));break;case 22:p=a.memoizedState!==null;var Ne=l!==null&&l.memoizedState!==null,We=mi,lt=ta;if(mi=We||p,ta=lt||Ne,Rr(i,a),ta=lt,mi=We,Ir(a),u&8192)e:for(i=a.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(l===null||Ne||mi||ta||rl(a)),l=null,i=a;;){if(i.tag===5||i.tag===26){if(l===null){Ne=l=i;try{if(j=Ne.stateNode,p)$=j.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{X=Ne.stateNode;var ft=Ne.memoizedProps.style,Ze=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;X.style.display=Ze==null||typeof Ze=="boolean"?"":(""+Ze).trim()}}catch(at){Ms(Ne,Ne.return,at)}}}else if(i.tag===6){if(l===null){Ne=i;try{Ne.stateNode.nodeValue=p?"":Ne.memoizedProps}catch(at){Ms(Ne,Ne.return,at)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===a)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=a.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Ef(a,l))));break;case 19:Rr(i,a),Ir(a),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,Ef(a,u)));break;case 30:break;case 21:break;default:Rr(i,a),Ir(a)}}function Ir(a){var i=a.flags;if(i&2){try{for(var l,u=a.return;u!==null;){if(gp(u)){l=u;break}u=u.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var p=l.stateNode,j=_f(a);Am(a,j,p);break;case 5:var $=l.stateNode;l.flags&32&&(Cr($,""),l.flags&=-33);var X=_f(a);Am(a,X,$);break;case 3:case 4:var Ne=l.stateNode.containerInfo,We=_f(a);Af(a,We,Ne);break;default:throw Error(n(161))}}catch(lt){Ms(a,a.return,lt)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function Np(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var i=a;Np(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),a=a.sibling}}function ro(a,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)yp(a,i.alternate,i),i=i.sibling}function rl(a){for(a=a.child;a!==null;){var i=a;switch(i.tag){case 0:case 11:case 14:case 15:ao(4,i,i.return),rl(i);break;case 1:Bn(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&hp(i,i.return,l),rl(i);break;case 27:Bd(i.stateNode);case 26:case 5:Bn(i,i.return),rl(i);break;case 22:i.memoizedState===null&&rl(i);break;case 30:rl(i);break;default:rl(i)}a=a.sibling}}function no(a,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,p=a,j=i,$=j.flags;switch(j.tag){case 0:case 11:case 15:no(p,j,l),Ed(4,j);break;case 1:if(no(p,j,l),u=j,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(We){Ms(u,u.return,We)}if(u=j,p=u.updateQueue,p!==null){var X=u.stateNode;try{var Ne=p.shared.hiddenCallbacks;if(Ne!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Ne.length;p++)Kl(Ne[p],X)}catch(We){Ms(u,u.return,We)}}l&&$&64&&mp(j),Td(j,j.return);break;case 27:xp(j);case 26:case 5:no(p,j,l),l&&u===null&&$&4&&fp(j),Td(j,j.return);break;case 12:no(p,j,l);break;case 13:no(p,j,l),l&&$&4&&jp(p,j);break;case 22:j.memoizedState===null&&no(p,j,l),Td(j,j.return);break;case 30:break;default:no(p,j,l)}i=i.sibling}}function Tf(a,i){var l=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==l&&(a!=null&&a.refCount++,l!=null&&Ki(l))}function Mf(a,i){a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&Ki(a))}function Un(a,i,l,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Sp(a,i,l,u),i=i.sibling}function Sp(a,i,l,u){var p=i.flags;switch(i.tag){case 0:case 11:case 15:Un(a,i,l,u),p&2048&&Ed(9,i);break;case 1:Un(a,i,l,u);break;case 3:Un(a,i,l,u),p&2048&&(a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&Ki(a)));break;case 12:if(p&2048){Un(a,i,l,u),a=i.stateNode;try{var j=i.memoizedProps,$=j.id,X=j.onPostCommit;typeof X=="function"&&X($,i.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(Ne){Ms(i,i.return,Ne)}}else Un(a,i,l,u);break;case 13:Un(a,i,l,u);break;case 23:break;case 22:j=i.stateNode,$=i.alternate,i.memoizedState!==null?j._visibility&2?Un(a,i,l,u):Md(a,i):j._visibility&2?Un(a,i,l,u):(j._visibility|=2,fc(a,i,l,u,(i.subtreeFlags&10256)!==0)),p&2048&&Tf($,i);break;case 24:Un(a,i,l,u),p&2048&&Mf(i.alternate,i);break;default:Un(a,i,l,u)}}function fc(a,i,l,u,p){for(p=p&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var j=a,$=i,X=l,Ne=u,We=$.flags;switch($.tag){case 0:case 11:case 15:fc(j,$,X,Ne,p),Ed(8,$);break;case 23:break;case 22:var lt=$.stateNode;$.memoizedState!==null?lt._visibility&2?fc(j,$,X,Ne,p):Md(j,$):(lt._visibility|=2,fc(j,$,X,Ne,p)),p&&We&2048&&Tf($.alternate,$);break;case 24:fc(j,$,X,Ne,p),p&&We&2048&&Mf($.alternate,$);break;default:fc(j,$,X,Ne,p)}i=i.sibling}}function Md(a,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=a,u=i,p=u.flags;switch(u.tag){case 22:Md(l,u),p&2048&&Tf(u.alternate,u);break;case 24:Md(l,u),p&2048&&Mf(u.alternate,u);break;default:Md(l,u)}i=i.sibling}}var Od=8192;function gc(a){if(a.subtreeFlags&Od)for(a=a.child;a!==null;)Cp(a),a=a.sibling}function Cp(a){switch(a.tag){case 26:gc(a),a.flags&Od&&a.memoizedState!==null&&Mw(yn,a.memoizedState,a.memoizedProps);break;case 5:gc(a);break;case 3:case 4:var i=yn;yn=Um(a.stateNode.containerInfo),gc(a),yn=i;break;case 22:a.memoizedState===null&&(i=a.alternate,i!==null&&i.memoizedState!==null?(i=Od,Od=16777216,gc(a),Od=i):gc(a));break;default:gc(a)}}function kp(a){var i=a.alternate;if(i!==null&&(a=i.child,a!==null)){i.child=null;do i=a.sibling,a.sibling=null,a=i;while(a!==null)}}function Rd(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];ka=u,Ap(u,a)}kp(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)_p(a),a=a.sibling}function _p(a){switch(a.tag){case 0:case 11:case 15:Rd(a),a.flags&2048&&ao(9,a,a.return);break;case 3:Rd(a);break;case 12:Rd(a);break;case 22:var i=a.stateNode;a.memoizedState!==null&&i._visibility&2&&(a.return===null||a.return.tag!==13)?(i._visibility&=-3,Dm(a)):Rd(a);break;default:Rd(a)}}function Dm(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];ka=u,Ap(u,a)}kp(a)}for(a=a.child;a!==null;){switch(i=a,i.tag){case 0:case 11:case 15:ao(8,i,i.return),Dm(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Dm(i));break;default:Dm(i)}a=a.sibling}}function Ap(a,i){for(;ka!==null;){var l=ka;switch(l.tag){case 0:case 11:case 15:ao(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ki(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,ka=u;else e:for(l=a;ka!==null;){u=ka;var p=u.sibling,j=u.return;if(bp(u),u===l){ka=null;break e}if(p!==null){p.return=j,ka=p;break e}ka=j}}}var Gj={getCacheForType:function(a){var i=Sa(Gs),l=i.data.get(a);return l===void 0&&(l=a(),i.data.set(a,l)),l}},Wj=typeof WeakMap=="function"?WeakMap:Map,Ss=0,Is=null,ds=null,ps=0,Cs=0,zr=null,io=!1,xc=!1,Of=!1,fi=0,Zs=0,oo=0,nl=0,Rf=0,Qr=0,pc=0,Id=null,vr=null,If=!1,zf=0,Em=1/0,Tm=null,lo=null,Ia=0,co=null,yc=null,bc=0,Pf=0,Ff=null,Dp=null,zd=0,Lf=null;function Pr(){if((Ss&2)!==0&&ps!==0)return ps&-ps;if(se.T!==null){var a=xn;return a!==0?a:Kf()}return Bt()}function Ep(){Qr===0&&(Qr=(ps&536870912)===0||Wt?_e():536870912);var a=b.current;return a!==null&&(a.flags|=32),Qr}function Fr(a,i,l){(a===Is&&(Cs===2||Cs===9)||a.cancelPendingCommit!==null)&&(vc(a,0),uo(a,ps,Qr,!1)),it(a,l),((Ss&2)===0||a!==Is)&&(a===Is&&((Ss&2)===0&&(nl|=l),Zs===4&&uo(a,ps,Qr,!1)),$n(a))}function Tp(a,i,l){if((Ss&6)!==0)throw Error(n(327));var u=!l&&(i&124)===0&&(i&a.expiredLanes)===0||Le(a,i),p=u?Zj(a,i):$f(a,i,!0),j=u;do{if(p===0){xc&&!u&&uo(a,i,0,!1);break}else{if(l=a.current.alternate,j&&!Xj(l)){p=$f(a,i,!1),j=!1;continue}if(p===2){if(j=i,a.errorRecoveryDisabledLanes&j)var $=0;else $=a.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){i=$;e:{var X=a;p=Id;var Ne=X.current.memoizedState.isDehydrated;if(Ne&&(vc(X,$).flags|=256),$=$f(X,$,!1),$!==2){if(Of&&!Ne){X.errorRecoveryDisabledLanes|=j,nl|=j,p=4;break e}j=vr,vr=p,j!==null&&(vr===null?vr=j:vr.push.apply(vr,j))}p=$}if(j=!1,p!==2)continue}}if(p===1){vc(a,0),uo(a,i,0,!0);break}e:{switch(u=a,j=p,j){case 0:case 1:throw Error(n(345));case 4:if((i&4194048)!==i)break;case 6:uo(u,i,Qr,!io);break e;case 2:vr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((i&62914560)===i&&(p=zf+300-J(),10<p)){if(uo(u,i,Qr,!io),St(u,0,!0)!==0)break e;u.timeoutHandle=i0(Mp.bind(null,u,l,vr,Tm,If,i,Qr,nl,pc,io,j,2,-0,0),p);break e}Mp(u,l,vr,Tm,If,i,Qr,nl,pc,io,j,0,-0,0)}}break}while(!0);$n(a)}function Mp(a,i,l,u,p,j,$,X,Ne,We,lt,ft,Ze,at){if(a.timeoutHandle=-1,ft=i.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(Hd={stylesheets:null,count:0,unsuspend:Tw},Cp(i),ft=Ow(),ft!==null)){a.cancelPendingCommit=ft(Lp.bind(null,a,i,j,l,u,p,$,X,Ne,lt,1,Ze,at)),uo(a,j,$,!We);return}Lp(a,i,j,l,u,p,$,X,Ne)}function Xj(a){for(var i=a;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var p=l[u],j=p.getSnapshot;p=p.value;try{if(!er(j(),p))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function uo(a,i,l,u){i&=~Rf,i&=~nl,a.suspendedLanes|=i,a.pingedLanes&=~i,u&&(a.warmLanes|=i),u=a.expirationTimes;for(var p=i;0<p;){var j=31-He(p),$=1<<j;u[j]=-1,p&=~$}l!==0&&Ke(a,l,i)}function Mm(){return(Ss&6)===0?(Pd(0),!1):!0}function Bf(){if(ds!==null){if(Cs===0)var a=ds.return;else a=ds,ar=sr=null,dd(a),Ji=null,al=0,a=ds;for(;a!==null;)up(a.alternate,a),a=a.return;ds=null}}function vc(a,i){var l=a.timeoutHandle;l!==-1&&(a.timeoutHandle=-1,fw(l)),l=a.cancelPendingCommit,l!==null&&(a.cancelPendingCommit=null,l()),Bf(),Is=a,ds=l=fr(a.current,null),ps=i,Cs=0,zr=null,io=!1,xc=Le(a,i),Of=!1,pc=Qr=Rf=nl=oo=Zs=0,vr=Id=null,If=!1,(i&8)!==0&&(i|=i&32);var u=a.entangledLanes;if(u!==0)for(a=a.entanglements,u&=i;0<u;){var p=31-He(u),j=1<<p;i|=a[p],u&=~j}return fi=i,Tn(),l}function Op(a,i){es=null,se.H=uc,i===Ko||i===Hl?(i=sm(),Cs=3):i===Ju?(i=sm(),Cs=4):Cs=i===Qx?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,zr=i,ds===null&&(Zs=1,ys(a,Ba(i,a.current)))}function Rp(){var a=se.H;return se.H=uc,a===null?uc:a}function Ip(){var a=se.A;return se.A=Gj,a}function Uf(){Zs=4,io||(ps&4194048)!==ps&&b.current!==null||(xc=!0),(oo&134217727)===0&&(nl&134217727)===0||Is===null||uo(Is,ps,Qr,!1)}function $f(a,i,l){var u=Ss;Ss|=2;var p=Rp(),j=Ip();(Is!==a||ps!==i)&&(Tm=null,vc(a,i)),i=!1;var $=Zs;e:do try{if(Cs!==0&&ds!==null){var X=ds,Ne=zr;switch(Cs){case 8:Bf(),$=6;break e;case 3:case 2:case 9:case 6:b.current===null&&(i=!0);var We=Cs;if(Cs=0,zr=null,jc(a,X,Ne,We),l&&xc){$=0;break e}break;default:We=Cs,Cs=0,zr=null,jc(a,X,Ne,We)}}Qj(),$=Zs;break}catch(lt){Op(a,lt)}while(!0);return i&&a.shellSuspendCounter++,ar=sr=null,Ss=u,se.H=p,se.A=j,ds===null&&(Is=null,ps=0,Tn()),$}function Qj(){for(;ds!==null;)zp(ds)}function Zj(a,i){var l=Ss;Ss|=2;var u=Rp(),p=Ip();Is!==a||ps!==i?(Tm=null,Em=J()+500,vc(a,i)):xc=Le(a,i);e:do try{if(Cs!==0&&ds!==null){i=ds;var j=zr;t:switch(Cs){case 1:Cs=0,zr=null,jc(a,i,j,1);break;case 2:case 9:if(em(j)){Cs=0,zr=null,Pp(i);break}i=function(){Cs!==2&&Cs!==9||Is!==a||(Cs=7),$n(a)},j.then(i,i);break e;case 3:Cs=7;break e;case 4:Cs=5;break e;case 7:em(j)?(Cs=0,zr=null,Pp(i)):(Cs=0,zr=null,jc(a,i,j,7));break;case 5:var $=null;switch(ds.tag){case 26:$=ds.memoizedState;case 5:case 27:var X=ds;if(!$||y0($)){Cs=0,zr=null;var Ne=X.sibling;if(Ne!==null)ds=Ne;else{var We=X.return;We!==null?(ds=We,Om(We)):ds=null}break t}}Cs=0,zr=null,jc(a,i,j,5);break;case 6:Cs=0,zr=null,jc(a,i,j,6);break;case 8:Bf(),Zs=6;break e;default:throw Error(n(462))}}Jj();break}catch(lt){Op(a,lt)}while(!0);return ar=sr=null,se.H=u,se.A=p,Ss=l,ds!==null?0:(Is=null,ps=0,Tn(),Zs)}function Jj(){for(;ds!==null&&!F();)zp(ds)}function zp(a){var i=cp(a.alternate,a,fi);a.memoizedProps=a.pendingProps,i===null?Om(a):ds=i}function Pp(a){var i=a,l=i.alternate;switch(i.tag){case 15:case 0:i=ap(l,i,i.pendingProps,i.type,void 0,ps);break;case 11:i=ap(l,i,i.pendingProps,i.type.render,i.ref,ps);break;case 5:dd(i);default:up(l,i),i=ds=Hi(i,fi),i=cp(l,i,fi)}a.memoizedProps=a.pendingProps,i===null?Om(a):ds=i}function jc(a,i,l,u){ar=sr=null,dd(i),Ji=null,al=0;var p=i.return;try{if($j(a,p,i,l,ps)){Zs=1,ys(a,Ba(l,a.current)),ds=null;return}}catch(j){if(p!==null)throw ds=p,j;Zs=1,ys(a,Ba(l,a.current)),ds=null;return}i.flags&32768?(Wt||u===1?a=!0:xc||(ps&536870912)!==0?a=!1:(io=a=!0,(u===2||u===9||u===3||u===6)&&(u=b.current,u!==null&&u.tag===13&&(u.flags|=16384))),Fp(i,a)):Om(i)}function Om(a){var i=a;do{if((i.flags&32768)!==0){Fp(i,io);return}a=i.return;var l=Vj(i.alternate,i,fi);if(l!==null){ds=l;return}if(i=i.sibling,i!==null){ds=i;return}ds=i=a}while(i!==null);Zs===0&&(Zs=5)}function Fp(a,i){do{var l=qj(a.alternate,a);if(l!==null){l.flags&=32767,ds=l;return}if(l=a.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(a=a.sibling,a!==null)){ds=a;return}ds=a=l}while(a!==null);Zs=6,ds=null}function Lp(a,i,l,u,p,j,$,X,Ne){a.cancelPendingCommit=null;do Rm();while(Ia!==0);if((Ss&6)!==0)throw Error(n(327));if(i!==null){if(i===a.current)throw Error(n(177));if(j=i.lanes|i.childLanes,j|=Bo,ke(a,l,j,$,X,Ne),a===Is&&(ds=Is=null,ps=0),yc=i,co=a,bc=l,Pf=j,Ff=p,Dp=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,aw(ce,function(){return Vp(),null})):(a.callbackNode=null,a.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=se.T,se.T=null,p=Ae.p,Ae.p=2,$=Ss,Ss|=4;try{Kj(a,i,l)}finally{Ss=$,Ae.p=p,se.T=u}}Ia=1,Bp(),Up(),$p()}}function Bp(){if(Ia===1){Ia=0;var a=co,i=yc,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=se.T,se.T=null;var u=Ae.p;Ae.p=2;var p=Ss;Ss|=4;try{wp(i,a);var j=eg,$=ai(a.containerInfo),X=j.focusedElem,Ne=j.selectionRange;if($!==X&&X&&X.ownerDocument&&Bs(X.ownerDocument.documentElement,X)){if(Ne!==null&&Wc(X)){var We=Ne.start,lt=Ne.end;if(lt===void 0&&(lt=We),"selectionStart"in X)X.selectionStart=We,X.selectionEnd=Math.min(lt,X.value.length);else{var ft=X.ownerDocument||document,Ze=ft&&ft.defaultView||window;if(Ze.getSelection){var at=Ze.getSelection(),Qt=X.textContent.length,Kt=Math.min(Ne.start,Qt),Ds=Ne.end===void 0?Kt:Math.min(Ne.end,Qt);!at.extend&&Kt>Ds&&($=Ds,Ds=Kt,Kt=$);var Ue=Ro(X,Kt),Oe=Ro(X,Ds);if(Ue&&Oe&&(at.rangeCount!==1||at.anchorNode!==Ue.node||at.anchorOffset!==Ue.offset||at.focusNode!==Oe.node||at.focusOffset!==Oe.offset)){var qe=ft.createRange();qe.setStart(Ue.node,Ue.offset),at.removeAllRanges(),Kt>Ds?(at.addRange(qe),at.extend(Oe.node,Oe.offset)):(qe.setEnd(Oe.node,Oe.offset),at.addRange(qe))}}}}for(ft=[],at=X;at=at.parentNode;)at.nodeType===1&&ft.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<ft.length;X++){var dt=ft[X];dt.element.scrollLeft=dt.left,dt.element.scrollTop=dt.top}}Km=!!Jf,eg=Jf=null}finally{Ss=p,Ae.p=u,se.T=l}}a.current=i,Ia=2}}function Up(){if(Ia===2){Ia=0;var a=co,i=yc,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=se.T,se.T=null;var u=Ae.p;Ae.p=2;var p=Ss;Ss|=4;try{yp(a,i.alternate,i)}finally{Ss=p,Ae.p=u,se.T=l}}Ia=3}}function $p(){if(Ia===4||Ia===3){Ia=0,B();var a=co,i=yc,l=bc,u=Dp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ia=5:(Ia=0,yc=co=null,Hp(a,a.pendingLanes));var p=a.pendingLanes;if(p===0&&(lo=null),Et(l),i=i.stateNode,Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(Re,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=se.T,p=Ae.p,Ae.p=2,se.T=null;try{for(var j=a.onRecoverableError,$=0;$<u.length;$++){var X=u[$];j(X.value,{componentStack:X.stack})}}finally{se.T=i,Ae.p=p}}(bc&3)!==0&&Rm(),$n(a),p=a.pendingLanes,(l&4194090)!==0&&(p&42)!==0?a===Lf?zd++:(zd=0,Lf=a):zd=0,Pd(0)}}function Hp(a,i){(a.pooledCacheLanes&=i)===0&&(i=a.pooledCache,i!=null&&(a.pooledCache=null,Ki(i)))}function Rm(a){return Bp(),Up(),$p(),Vp()}function Vp(){if(Ia!==5)return!1;var a=co,i=Pf;Pf=0;var l=Et(bc),u=se.T,p=Ae.p;try{Ae.p=32>l?32:l,se.T=null,l=Ff,Ff=null;var j=co,$=bc;if(Ia=0,yc=co=null,bc=0,(Ss&6)!==0)throw Error(n(331));var X=Ss;if(Ss|=4,_p(j.current),Sp(j,j.current,$,l),Ss=X,Pd(0,!1),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(Re,j)}catch{}return!0}finally{Ae.p=p,se.T=u,Hp(a,i)}}function qp(a,i,l){i=Ba(l,i),i=nr(a.stateNode,i,2),a=pn(a,i,2),a!==null&&(it(a,2),$n(a))}function Ms(a,i,l){if(a.tag===3)qp(a,a,l);else for(;i!==null;){if(i.tag===3){qp(i,a,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(lo===null||!lo.has(u))){a=Ba(l,a),l=hc(2),u=pn(i,l,2),u!==null&&(Xx(l,u,i,a),it(u,2),$n(u));break}}i=i.return}}function Hf(a,i,l){var u=a.pingCache;if(u===null){u=a.pingCache=new Wj;var p=new Set;u.set(i,p)}else p=u.get(i),p===void 0&&(p=new Set,u.set(i,p));p.has(l)||(Of=!0,p.add(l),a=ew.bind(null,a,i,l),i.then(a,a))}function ew(a,i,l){var u=a.pingCache;u!==null&&u.delete(i),a.pingedLanes|=a.suspendedLanes&l,a.warmLanes&=~l,Is===a&&(ps&l)===l&&(Zs===4||Zs===3&&(ps&62914560)===ps&&300>J()-zf?(Ss&2)===0&&vc(a,0):Rf|=l,pc===ps&&(pc=0)),$n(a)}function Kp(a,i){i===0&&(i=tt()),a=$i(a,i),a!==null&&(it(a,i),$n(a))}function tw(a){var i=a.memoizedState,l=0;i!==null&&(l=i.retryLane),Kp(a,l)}function sw(a,i){var l=0;switch(a.tag){case 13:var u=a.stateNode,p=a.memoizedState;p!==null&&(l=p.retryLane);break;case 19:u=a.stateNode;break;case 22:u=a.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(i),Kp(a,l)}function aw(a,i){return H(a,i)}var Im=null,wc=null,Vf=!1,zm=!1,qf=!1,il=0;function $n(a){a!==wc&&a.next===null&&(wc===null?Im=wc=a:wc=wc.next=a),zm=!0,Vf||(Vf=!0,nw())}function Pd(a,i){if(!qf&&zm){qf=!0;do for(var l=!1,u=Im;u!==null;){if(a!==0){var p=u.pendingLanes;if(p===0)var j=0;else{var $=u.suspendedLanes,X=u.pingedLanes;j=(1<<31-He(42|a)+1)-1,j&=p&~($&~X),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(l=!0,Xp(u,j))}else j=ps,j=St(u,u===Is?j:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(j&3)===0||Le(u,j)||(l=!0,Xp(u,j));u=u.next}while(l);qf=!1}}function rw(){Yp()}function Yp(){zm=Vf=!1;var a=0;il!==0&&(hw()&&(a=il),il=0);for(var i=J(),l=null,u=Im;u!==null;){var p=u.next,j=Gp(u,i);j===0?(u.next=null,l===null?Im=p:l.next=p,p===null&&(wc=l)):(l=u,(a!==0||(j&3)!==0)&&(zm=!0)),u=p}Pd(a)}function Gp(a,i){for(var l=a.suspendedLanes,u=a.pingedLanes,p=a.expirationTimes,j=a.pendingLanes&-62914561;0<j;){var $=31-He(j),X=1<<$,Ne=p[$];Ne===-1?((X&l)===0||(X&u)!==0)&&(p[$]=Ye(X,i)):Ne<=i&&(a.expiredLanes|=X),j&=~X}if(i=Is,l=ps,l=St(a,a===i?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),u=a.callbackNode,l===0||a===i&&(Cs===2||Cs===9)||a.cancelPendingCommit!==null)return u!==null&&u!==null&&V(u),a.callbackNode=null,a.callbackPriority=0;if((l&3)===0||Le(a,l)){if(i=l&-l,i===a.callbackPriority)return i;switch(u!==null&&V(u),Et(l)){case 2:case 8:l=G;break;case 32:l=ce;break;case 268435456:l=fe;break;default:l=ce}return u=Wp.bind(null,a),l=H(l,u),a.callbackPriority=i,a.callbackNode=l,i}return u!==null&&u!==null&&V(u),a.callbackPriority=2,a.callbackNode=null,2}function Wp(a,i){if(Ia!==0&&Ia!==5)return a.callbackNode=null,a.callbackPriority=0,null;var l=a.callbackNode;if(Rm()&&a.callbackNode!==l)return null;var u=ps;return u=St(a,a===Is?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),u===0?null:(Tp(a,u,i),Gp(a,J()),a.callbackNode!=null&&a.callbackNode===l?Wp.bind(null,a):null)}function Xp(a,i){if(Rm())return null;Tp(a,i,!0)}function nw(){gw(function(){(Ss&6)!==0?H(T,rw):Yp()})}function Kf(){return il===0&&(il=_e()),il}function Qp(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Cn(""+a)}function Zp(a,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,a.id&&l.setAttribute("form",a.id),i.parentNode.insertBefore(l,i),a=new FormData(a),l.parentNode.removeChild(l),a}function iw(a,i,l,u,p){if(i==="submit"&&l&&l.stateNode===p){var j=Qp((p[Ve]||null).action),$=u.submitter;$&&(i=(i=$[Ve]||null)?Qp(i.formAction):$.getAttribute("formAction"),i!==null&&(j=i,$=null));var X=new _n("action","action",null,u,p);a.push({event:X,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(il!==0){var Ne=$?Zp(p,$):new FormData(p);nc(l,{pending:!0,data:Ne,method:p.method,action:j},null,Ne)}}else typeof j=="function"&&(X.preventDefault(),Ne=$?Zp(p,$):new FormData(p),nc(l,{pending:!0,data:Ne,method:p.method,action:j},j,Ne))},currentTarget:p}]})}}for(var Yf=0;Yf<Lo.length;Yf++){var Gf=Lo[Yf],ow=Gf.toLowerCase(),lw=Gf[0].toUpperCase()+Gf.slice(1);ja(ow,"on"+lw)}ja(Li,"onAnimationEnd"),ja(Bi,"onAnimationIteration"),ja(Ui,"onAnimationStart"),ja("dblclick","onDoubleClick"),ja("focusin","onFocus"),ja("focusout","onBlur"),ja(mr,"onTransitionRun"),ja(Gu,"onTransitionStart"),ja(hr,"onTransitionCancel"),ja(Qc,"onTransitionEnd"),Vt("onMouseEnter",["mouseout","mouseover"]),Vt("onMouseLeave",["mouseout","mouseover"]),Vt("onPointerEnter",["pointerout","pointerover"]),Vt("onPointerLeave",["pointerout","pointerover"]),It("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),It("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),It("onBeforeInput",["compositionend","keypress","textInput","paste"]),It("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),It("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),It("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fd));function Jp(a,i){i=(i&4)!==0;for(var l=0;l<a.length;l++){var u=a[l],p=u.event;u=u.listeners;e:{var j=void 0;if(i)for(var $=u.length-1;0<=$;$--){var X=u[$],Ne=X.instance,We=X.currentTarget;if(X=X.listener,Ne!==j&&p.isPropagationStopped())break e;j=X,p.currentTarget=We;try{j(p)}catch(lt){yt(lt)}p.currentTarget=null,j=Ne}else for($=0;$<u.length;$++){if(X=u[$],Ne=X.instance,We=X.currentTarget,X=X.listener,Ne!==j&&p.isPropagationStopped())break e;j=X,p.currentTarget=We;try{j(p)}catch(lt){yt(lt)}p.currentTarget=null,j=Ne}}}}function us(a,i){var l=i[mt];l===void 0&&(l=i[mt]=new Set);var u=a+"__bubble";l.has(u)||(e0(i,a,2,!1),l.add(u))}function Wf(a,i,l){var u=0;i&&(u|=4),e0(l,a,u,i)}var Pm="_reactListening"+Math.random().toString(36).slice(2);function Xf(a){if(!a[Pm]){a[Pm]=!0,ht.forEach(function(l){l!=="selectionchange"&&(cw.has(l)||Wf(l,!1,a),Wf(l,!0,a))});var i=a.nodeType===9?a:a.ownerDocument;i===null||i[Pm]||(i[Pm]=!0,Wf("selectionchange",!1,i))}}function e0(a,i,l,u){switch(S0(i)){case 2:var p=zw;break;case 8:p=Pw;break;default:p=dg}l=p.bind(null,i,l,a),p=void 0,!ln||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),u?p!==void 0?a.addEventListener(i,l,{capture:!0,passive:p}):a.addEventListener(i,l,!0):p!==void 0?a.addEventListener(i,l,{passive:p}):a.addEventListener(i,l,!1)}function Qf(a,i,l,u,p){var j=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var $=u.tag;if($===3||$===4){var X=u.stateNode.containerInfo;if(X===p)break;if($===4)for($=u.return;$!==null;){var Ne=$.tag;if((Ne===3||Ne===4)&&$.stateNode.containerInfo===p)return;$=$.return}for(;X!==null;){if($=Z(X),$===null)return;if(Ne=$.tag,Ne===5||Ne===6||Ne===26||Ne===27){u=j=$;continue e}X=X.parentNode}}u=u.return}Rs(function(){var We=j,lt=kn(l),ft=[];e:{var Ze=ea.get(a);if(Ze!==void 0){var at=_n,Qt=a;switch(a){case"keypress":if(ss(l)===0)break e;case"keydown":case"keyup":at=Ai;break;case"focusin":Qt="focus",at=cr;break;case"focusout":Qt="blur",at=cr;break;case"beforeblur":case"afterblur":at=cr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=tf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=Hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=rf;break;case Li:case Bi:case Ui:at=sf;break;case Qc:at=Rl;break;case"scroll":case"scrollend":at=Fu;break;case"wheel":at=Il;break;case"copy":case"cut":case"paste":at=ws;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Vu;break;case"toggle":case"beforetoggle":at=qc}var Kt=(i&4)!==0,Ds=!Kt&&(a==="scroll"||a==="scrollend"),Ue=Kt?Ze!==null?Ze+"Capture":null:Ze;Kt=[];for(var Oe=We,qe;Oe!==null;){var dt=Oe;if(qe=dt.stateNode,dt=dt.tag,dt!==5&&dt!==26&&dt!==27||qe===null||Ue===null||(dt=va(Oe,Ue),dt!=null&&Kt.push(Ld(Oe,dt,qe))),Ds)break;Oe=Oe.return}0<Kt.length&&(Ze=new at(Ze,Qt,null,l,lt),ft.push({event:Ze,listeners:Kt}))}}if((i&7)===0){e:{if(Ze=a==="mouseover"||a==="pointerover",at=a==="mouseout"||a==="pointerout",Ze&&l!==da&&(Qt=l.relatedTarget||l.fromElement)&&(Z(Qt)||Qt[nt]))break e;if((at||Ze)&&(Ze=lt.window===lt?lt:(Ze=lt.ownerDocument)?Ze.defaultView||Ze.parentWindow:window,at?(Qt=l.relatedTarget||l.toElement,at=We,Qt=Qt?Z(Qt):null,Qt!==null&&(Ds=c(Qt),Kt=Qt.tag,Qt!==Ds||Kt!==5&&Kt!==27&&Kt!==6)&&(Qt=null)):(at=null,Qt=We),at!==Qt)){if(Kt=tf,dt="onMouseLeave",Ue="onMouseEnter",Oe="mouse",(a==="pointerout"||a==="pointerover")&&(Kt=Vu,dt="onPointerLeave",Ue="onPointerEnter",Oe="pointer"),Ds=at==null?Ze:Fe(at),qe=Qt==null?Ze:Fe(Qt),Ze=new Kt(dt,Oe+"leave",at,l,lt),Ze.target=Ds,Ze.relatedTarget=qe,dt=null,Z(lt)===We&&(Kt=new Kt(Ue,Oe+"enter",Qt,l,lt),Kt.target=qe,Kt.relatedTarget=Ds,dt=Kt),Ds=dt,at&&Qt)t:{for(Kt=at,Ue=Qt,Oe=0,qe=Kt;qe;qe=Nc(qe))Oe++;for(qe=0,dt=Ue;dt;dt=Nc(dt))qe++;for(;0<Oe-qe;)Kt=Nc(Kt),Oe--;for(;0<qe-Oe;)Ue=Nc(Ue),qe--;for(;Oe--;){if(Kt===Ue||Ue!==null&&Kt===Ue.alternate)break t;Kt=Nc(Kt),Ue=Nc(Ue)}Kt=null}else Kt=null;at!==null&&t0(ft,Ze,at,Kt,!1),Qt!==null&&Ds!==null&&t0(ft,Ds,Qt,Kt,!0)}}e:{if(Ze=We?Fe(We):window,at=Ze.nodeName&&Ze.nodeName.toLowerCase(),at==="select"||at==="input"&&Ze.type==="file")var Ft=_r;else if(Yc(Ze))if(si)Ft=Gc;else{Ft=Pl;var cs=En}else at=Ze.nodeName,!at||at.toLowerCase()!=="input"||Ze.type!=="checkbox"&&Ze.type!=="radio"?We&&kr(We.elementType)&&(Ft=_r):Ft=Fl;if(Ft&&(Ft=Ft(a,We))){of(ft,Ft,l,lt);break e}cs&&cs(a,Ze,We),a==="focusout"&&We&&Ze.type==="number"&&We.memoizedProps.value!=null&&Qn(Ze,"number",Ze.value)}switch(cs=We?Fe(We):window,a){case"focusin":(Yc(cs)||cs.contentEditable==="true")&&(zi=cs,Io=We,zo=null);break;case"focusout":zo=Io=zi=null;break;case"mousedown":Po=!0;break;case"contextmenu":case"mouseup":case"dragend":Po=!1,Xc(ft,l,lt);break;case"selectionchange":if(Ii)break;case"keydown":case"keyup":Xc(ft,l,lt)}var Ht;if(Oo)e:{switch(a){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else An?Ku(a,l)&&(Yt="onCompositionEnd"):a==="keydown"&&l.keyCode===229&&(Yt="onCompositionStart");Yt&&(zl&&l.locale!=="ko"&&(An||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&An&&(Ht=Jt()):(W=lt,Pe="value"in W?W.value:W.textContent,An=!0)),cs=Fm(We,Yt),0<cs.length&&(Yt=new $u(Yt,a,null,l,lt),ft.push({event:Yt,listeners:cs}),Ht?Yt.data=Ht:(Ht=La(l),Ht!==null&&(Yt.data=Ht)))),(Ht=Kc?Gx(a,l):Yu(a,l))&&(Yt=Fm(We,"onBeforeInput"),0<Yt.length&&(cs=new $u("onBeforeInput","beforeinput",null,l,lt),ft.push({event:cs,listeners:Yt}),cs.data=Ht)),iw(ft,a,We,l,lt)}Jp(ft,i)})}function Ld(a,i,l){return{instance:a,listener:i,currentTarget:l}}function Fm(a,i){for(var l=i+"Capture",u=[];a!==null;){var p=a,j=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||j===null||(p=va(a,l),p!=null&&u.unshift(Ld(a,p,j)),p=va(a,i),p!=null&&u.push(Ld(a,p,j))),a.tag===3)return u;a=a.return}return[]}function Nc(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function t0(a,i,l,u,p){for(var j=i._reactName,$=[];l!==null&&l!==u;){var X=l,Ne=X.alternate,We=X.stateNode;if(X=X.tag,Ne!==null&&Ne===u)break;X!==5&&X!==26&&X!==27||We===null||(Ne=We,p?(We=va(l,j),We!=null&&$.unshift(Ld(l,We,Ne))):p||(We=va(l,j),We!=null&&$.push(Ld(l,We,Ne)))),l=l.return}$.length!==0&&a.push({event:i,listeners:$})}var dw=/\r\n?/g,uw=/\u0000|\uFFFD/g;function s0(a){return(typeof a=="string"?a:""+a).replace(dw,`
`).replace(uw,"")}function a0(a,i){return i=s0(i),s0(a)===i}function Lm(){}function As(a,i,l,u,p,j){switch(l){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Cr(a,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Cr(a,""+u);break;case"className":js(a,"class",u);break;case"tabIndex":js(a,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":js(a,l,u);break;case"style":on(a,u,j);break;case"data":if(i!=="object"){js(a,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||l!=="href")){a.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){a.removeAttribute(l);break}u=Cn(""+u),a.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){a.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(l==="formAction"?(i!=="input"&&As(a,i,"name",p.name,p,null),As(a,i,"formEncType",p.formEncType,p,null),As(a,i,"formMethod",p.formMethod,p,null),As(a,i,"formTarget",p.formTarget,p,null)):(As(a,i,"encType",p.encType,p,null),As(a,i,"method",p.method,p,null),As(a,i,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){a.removeAttribute(l);break}u=Cn(""+u),a.setAttribute(l,u);break;case"onClick":u!=null&&(a.onclick=Lm);break;case"onScroll":u!=null&&us("scroll",a);break;case"onScrollEnd":u!=null&&us("scrollend",a);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"multiple":a.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":a.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){a.removeAttribute("xlink:href");break}l=Cn(""+u),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(l,""+u):a.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(l,""):a.removeAttribute(l);break;case"capture":case"download":u===!0?a.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(l,u):a.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?a.setAttribute(l,u):a.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?a.removeAttribute(l):a.setAttribute(l,u);break;case"popover":us("beforetoggle",a),us("toggle",a),xs(a,"popover",u);break;case"xlinkActuate":Ot(a,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ot(a,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ot(a,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ot(a,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ot(a,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ot(a,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ot(a,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ot(a,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ot(a,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":xs(a,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ir.get(l)||l,xs(a,l,u))}}function Zf(a,i,l,u,p,j){switch(l){case"style":on(a,u,j);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"children":typeof u=="string"?Cr(a,u):(typeof u=="number"||typeof u=="bigint")&&Cr(a,""+u);break;case"onScroll":u!=null&&us("scroll",a);break;case"onScrollEnd":u!=null&&us("scrollend",a);break;case"onClick":u!=null&&(a.onclick=Lm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jt.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),i=l.slice(2,p?l.length-7:void 0),j=a[Ve]||null,j=j!=null?j[l]:null,typeof j=="function"&&a.removeEventListener(i,j,p),typeof u=="function")){typeof j!="function"&&j!==null&&(l in a?a[l]=null:a.hasAttribute(l)&&a.removeAttribute(l)),a.addEventListener(i,u,p);break e}l in a?a[l]=u:u===!0?a.setAttribute(l,""):xs(a,l,u)}}}function za(a,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":us("error",a),us("load",a);var u=!1,p=!1,j;for(j in l)if(l.hasOwnProperty(j)){var $=l[j];if($!=null)switch(j){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:As(a,i,j,$,l,null)}}p&&As(a,i,"srcSet",l.srcSet,l,null),u&&As(a,i,"src",l.src,l,null);return;case"input":us("invalid",a);var X=j=$=p=null,Ne=null,We=null;for(u in l)if(l.hasOwnProperty(u)){var lt=l[u];if(lt!=null)switch(u){case"name":p=lt;break;case"type":$=lt;break;case"checked":Ne=lt;break;case"defaultChecked":We=lt;break;case"value":j=lt;break;case"defaultValue":X=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(n(137,i));break;default:As(a,i,u,lt,l,null)}}kl(a,j,X,Ne,We,$,p,!1),Os(a);return;case"select":us("invalid",a),u=$=j=null;for(p in l)if(l.hasOwnProperty(p)&&(X=l[p],X!=null))switch(p){case"value":j=X;break;case"defaultValue":$=X;break;case"multiple":u=X;default:As(a,i,p,X,l,null)}i=j,l=$,a.multiple=!!u,i!=null?ba(a,!!u,i,!1):l!=null&&ba(a,!!u,l,!0);return;case"textarea":us("invalid",a),j=p=u=null;for($ in l)if(l.hasOwnProperty($)&&(X=l[$],X!=null))switch($){case"value":u=X;break;case"defaultValue":p=X;break;case"children":j=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(91));break;default:As(a,i,$,X,l,null)}Zn(a,u,p,j),Os(a);return;case"option":for(Ne in l)if(l.hasOwnProperty(Ne)&&(u=l[Ne],u!=null))switch(Ne){case"selected":a.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:As(a,i,Ne,u,l,null)}return;case"dialog":us("beforetoggle",a),us("toggle",a),us("cancel",a),us("close",a);break;case"iframe":case"object":us("load",a);break;case"video":case"audio":for(u=0;u<Fd.length;u++)us(Fd[u],a);break;case"image":us("error",a),us("load",a);break;case"details":us("toggle",a);break;case"embed":case"source":case"link":us("error",a),us("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(We in l)if(l.hasOwnProperty(We)&&(u=l[We],u!=null))switch(We){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:As(a,i,We,u,l,null)}return;default:if(kr(i)){for(lt in l)l.hasOwnProperty(lt)&&(u=l[lt],u!==void 0&&Zf(a,i,lt,u,l,void 0));return}}for(X in l)l.hasOwnProperty(X)&&(u=l[X],u!=null&&As(a,i,X,u,l,null))}function mw(a,i,l,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,j=null,$=null,X=null,Ne=null,We=null,lt=null;for(at in l){var ft=l[at];if(l.hasOwnProperty(at)&&ft!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":Ne=ft;default:u.hasOwnProperty(at)||As(a,i,at,null,u,ft)}}for(var Ze in u){var at=u[Ze];if(ft=l[Ze],u.hasOwnProperty(Ze)&&(at!=null||ft!=null))switch(Ze){case"type":j=at;break;case"name":p=at;break;case"checked":We=at;break;case"defaultChecked":lt=at;break;case"value":$=at;break;case"defaultValue":X=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,i));break;default:at!==ft&&As(a,i,Ze,at,u,ft)}}Nn(a,$,X,Ne,We,lt,j,p);return;case"select":at=$=X=Ze=null;for(j in l)if(Ne=l[j],l.hasOwnProperty(j)&&Ne!=null)switch(j){case"value":break;case"multiple":at=Ne;default:u.hasOwnProperty(j)||As(a,i,j,null,u,Ne)}for(p in u)if(j=u[p],Ne=l[p],u.hasOwnProperty(p)&&(j!=null||Ne!=null))switch(p){case"value":Ze=j;break;case"defaultValue":X=j;break;case"multiple":$=j;default:j!==Ne&&As(a,i,p,j,u,Ne)}i=X,l=$,u=at,Ze!=null?ba(a,!!l,Ze,!1):!!u!=!!l&&(i!=null?ba(a,!!l,i,!0):ba(a,!!l,l?[]:"",!1));return;case"textarea":at=Ze=null;for(X in l)if(p=l[X],l.hasOwnProperty(X)&&p!=null&&!u.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:As(a,i,X,null,u,p)}for($ in u)if(p=u[$],j=l[$],u.hasOwnProperty($)&&(p!=null||j!=null))switch($){case"value":Ze=p;break;case"defaultValue":at=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==j&&As(a,i,$,p,u,j)}Sn(a,Ze,at);return;case"option":for(var Qt in l)if(Ze=l[Qt],l.hasOwnProperty(Qt)&&Ze!=null&&!u.hasOwnProperty(Qt))switch(Qt){case"selected":a.selected=!1;break;default:As(a,i,Qt,null,u,Ze)}for(Ne in u)if(Ze=u[Ne],at=l[Ne],u.hasOwnProperty(Ne)&&Ze!==at&&(Ze!=null||at!=null))switch(Ne){case"selected":a.selected=Ze&&typeof Ze!="function"&&typeof Ze!="symbol";break;default:As(a,i,Ne,Ze,u,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kt in l)Ze=l[Kt],l.hasOwnProperty(Kt)&&Ze!=null&&!u.hasOwnProperty(Kt)&&As(a,i,Kt,null,u,Ze);for(We in u)if(Ze=u[We],at=l[We],u.hasOwnProperty(We)&&Ze!==at&&(Ze!=null||at!=null))switch(We){case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(n(137,i));break;default:As(a,i,We,Ze,u,at)}return;default:if(kr(i)){for(var Ds in l)Ze=l[Ds],l.hasOwnProperty(Ds)&&Ze!==void 0&&!u.hasOwnProperty(Ds)&&Zf(a,i,Ds,void 0,u,Ze);for(lt in u)Ze=u[lt],at=l[lt],!u.hasOwnProperty(lt)||Ze===at||Ze===void 0&&at===void 0||Zf(a,i,lt,Ze,u,at);return}}for(var Ue in l)Ze=l[Ue],l.hasOwnProperty(Ue)&&Ze!=null&&!u.hasOwnProperty(Ue)&&As(a,i,Ue,null,u,Ze);for(ft in u)Ze=u[ft],at=l[ft],!u.hasOwnProperty(ft)||Ze===at||Ze==null&&at==null||As(a,i,ft,Ze,u,at)}var Jf=null,eg=null;function Bm(a){return a.nodeType===9?a:a.ownerDocument}function r0(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function n0(a,i){if(a===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&i==="foreignObject"?0:a}function tg(a,i){return a==="textarea"||a==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var sg=null;function hw(){var a=window.event;return a&&a.type==="popstate"?a===sg?!1:(sg=a,!0):(sg=null,!1)}var i0=typeof setTimeout=="function"?setTimeout:void 0,fw=typeof clearTimeout=="function"?clearTimeout:void 0,o0=typeof Promise=="function"?Promise:void 0,gw=typeof queueMicrotask=="function"?queueMicrotask:typeof o0<"u"?function(a){return o0.resolve(null).then(a).catch(xw)}:i0;function xw(a){setTimeout(function(){throw a})}function mo(a){return a==="head"}function l0(a,i){var l=i,u=0,p=0;do{var j=l.nextSibling;if(a.removeChild(l),j&&j.nodeType===8)if(l=j.data,l==="/$"){if(0<u&&8>u){l=u;var $=a.ownerDocument;if(l&1&&Bd($.documentElement),l&2&&Bd($.body),l&4)for(l=$.head,Bd(l),$=l.firstChild;$;){var X=$.nextSibling,Ne=$.nodeName;$[ye]||Ne==="SCRIPT"||Ne==="STYLE"||Ne==="LINK"&&$.rel.toLowerCase()==="stylesheet"||l.removeChild($),$=X}}if(p===0){a.removeChild(j),Gd(i);return}p--}else l==="$"||l==="$?"||l==="$!"?p++:u=l.charCodeAt(0)-48;else u=0;l=j}while(l);Gd(i)}function ag(a){var i=a.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ag(l),ze(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}a.removeChild(l)}}function pw(a,i,l,u){for(;a.nodeType===1;){var p=l;if(a.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(u){if(!a[ye])switch(i){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(j=a.getAttribute("rel"),j==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(j!==p.rel||a.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||a.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||a.getAttribute("title")!==(p.title==null?null:p.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(j=a.getAttribute("src"),(j!==(p.src==null?null:p.src)||a.getAttribute("type")!==(p.type==null?null:p.type)||a.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&j&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(i==="input"&&a.type==="hidden"){var j=p.name==null?null:""+p.name;if(p.type==="hidden"&&a.getAttribute("name")===j)return a}else return a;if(a=bn(a.nextSibling),a===null)break}return null}function yw(a,i,l){if(i==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=bn(a.nextSibling),a===null))return null;return a}function rg(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function bw(a,i){var l=a.ownerDocument;if(a.data!=="$?"||l.readyState==="complete")i();else{var u=function(){i(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),a._reactRetry=u}}function bn(a){for(;a!=null;a=a.nextSibling){var i=a.nodeType;if(i===1||i===3)break;if(i===8){if(i=a.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return a}var ng=null;function c0(a){a=a.previousSibling;for(var i=0;a;){if(a.nodeType===8){var l=a.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return a;i--}else l==="/$"&&i++}a=a.previousSibling}return null}function d0(a,i,l){switch(i=Bm(l),a){case"html":if(a=i.documentElement,!a)throw Error(n(452));return a;case"head":if(a=i.head,!a)throw Error(n(453));return a;case"body":if(a=i.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Bd(a){for(var i=a.attributes;i.length;)a.removeAttributeNode(i[0]);ze(a)}var Zr=new Map,u0=new Set;function Um(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var gi=Ae.d;Ae.d={f:vw,r:jw,D:ww,C:Nw,L:Sw,m:Cw,X:_w,S:kw,M:Aw};function vw(){var a=gi.f(),i=Mm();return a||i}function jw(a){var i=te(a);i!==null&&i.tag===5&&i.type==="form"?ic(i):gi.r(a)}var Sc=typeof document>"u"?null:document;function m0(a,i,l){var u=Sc;if(u&&typeof i=="string"&&i){var p=zs(i);p='link[rel="'+a+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),u0.has(p)||(u0.add(p),a={rel:a,crossOrigin:l,href:i},u.querySelector(p)===null&&(i=u.createElement("link"),za(i,"link",a),ot(i),u.head.appendChild(i)))}}function ww(a){gi.D(a),m0("dns-prefetch",a,null)}function Nw(a,i){gi.C(a,i),m0("preconnect",a,i)}function Sw(a,i,l){gi.L(a,i,l);var u=Sc;if(u&&a&&i){var p='link[rel="preload"][as="'+zs(i)+'"]';i==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+zs(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+zs(l.imageSizes)+'"]')):p+='[href="'+zs(a)+'"]';var j=p;switch(i){case"style":j=Cc(a);break;case"script":j=kc(a)}Zr.has(j)||(a=y({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:a,as:i},l),Zr.set(j,a),u.querySelector(p)!==null||i==="style"&&u.querySelector(Ud(j))||i==="script"&&u.querySelector($d(j))||(i=u.createElement("link"),za(i,"link",a),ot(i),u.head.appendChild(i)))}}function Cw(a,i){gi.m(a,i);var l=Sc;if(l&&a){var u=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+zs(u)+'"][href="'+zs(a)+'"]',j=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=kc(a)}if(!Zr.has(j)&&(a=y({rel:"modulepreload",href:a},i),Zr.set(j,a),l.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector($d(j)))return}u=l.createElement("link"),za(u,"link",a),ot(u),l.head.appendChild(u)}}}function kw(a,i,l){gi.S(a,i,l);var u=Sc;if(u&&a){var p=Ge(u).hoistableStyles,j=Cc(a);i=i||"default";var $=p.get(j);if(!$){var X={loading:0,preload:null};if($=u.querySelector(Ud(j)))X.loading=5;else{a=y({rel:"stylesheet",href:a,"data-precedence":i},l),(l=Zr.get(j))&&ig(a,l);var Ne=$=u.createElement("link");ot(Ne),za(Ne,"link",a),Ne._p=new Promise(function(We,lt){Ne.onload=We,Ne.onerror=lt}),Ne.addEventListener("load",function(){X.loading|=1}),Ne.addEventListener("error",function(){X.loading|=2}),X.loading|=4,$m($,i,u)}$={type:"stylesheet",instance:$,count:1,state:X},p.set(j,$)}}}function _w(a,i){gi.X(a,i);var l=Sc;if(l&&a){var u=Ge(l).hoistableScripts,p=kc(a),j=u.get(p);j||(j=l.querySelector($d(p)),j||(a=y({src:a,async:!0},i),(i=Zr.get(p))&&og(a,i),j=l.createElement("script"),ot(j),za(j,"link",a),l.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},u.set(p,j))}}function Aw(a,i){gi.M(a,i);var l=Sc;if(l&&a){var u=Ge(l).hoistableScripts,p=kc(a),j=u.get(p);j||(j=l.querySelector($d(p)),j||(a=y({src:a,async:!0,type:"module"},i),(i=Zr.get(p))&&og(a,i),j=l.createElement("script"),ot(j),za(j,"link",a),l.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},u.set(p,j))}}function h0(a,i,l,u){var p=(p=k.current)?Um(p):null;if(!p)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Cc(l.href),l=Ge(p).hoistableStyles,u=l.get(i),u||(u={type:"style",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){a=Cc(l.href);var j=Ge(p).hoistableStyles,$=j.get(a);if($||(p=p.ownerDocument||p,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(a,$),(j=p.querySelector(Ud(a)))&&!j._p&&($.instance=j,$.state.loading=5),Zr.has(a)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Zr.set(a,l),j||Dw(p,a,l,$.state))),i&&u===null)throw Error(n(528,""));return $}if(i&&u!==null)throw Error(n(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=kc(l),l=Ge(p).hoistableScripts,u=l.get(i),u||(u={type:"script",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Cc(a){return'href="'+zs(a)+'"'}function Ud(a){return'link[rel="stylesheet"]['+a+"]"}function f0(a){return y({},a,{"data-precedence":a.precedence,precedence:null})}function Dw(a,i,l,u){a.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=a.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),za(i,"link",l),ot(i),a.head.appendChild(i))}function kc(a){return'[src="'+zs(a)+'"]'}function $d(a){return"script[async]"+a}function g0(a,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var u=a.querySelector('style[data-href~="'+zs(l.href)+'"]');if(u)return i.instance=u,ot(u),u;var p=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(a.ownerDocument||a).createElement("style"),ot(u),za(u,"style",p),$m(u,l.precedence,a),i.instance=u;case"stylesheet":p=Cc(l.href);var j=a.querySelector(Ud(p));if(j)return i.state.loading|=4,i.instance=j,ot(j),j;u=f0(l),(p=Zr.get(p))&&ig(u,p),j=(a.ownerDocument||a).createElement("link"),ot(j);var $=j;return $._p=new Promise(function(X,Ne){$.onload=X,$.onerror=Ne}),za(j,"link",u),i.state.loading|=4,$m(j,l.precedence,a),i.instance=j;case"script":return j=kc(l.src),(p=a.querySelector($d(j)))?(i.instance=p,ot(p),p):(u=l,(p=Zr.get(j))&&(u=y({},l),og(u,p)),a=a.ownerDocument||a,p=a.createElement("script"),ot(p),za(p,"link",u),a.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(n(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,$m(u,l.precedence,a));return i.instance}function $m(a,i,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,j=p,$=0;$<u.length;$++){var X=u[$];if(X.dataset.precedence===i)j=X;else if(j!==p)break}j?j.parentNode.insertBefore(a,j.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(a,i.firstChild))}function ig(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.title==null&&(a.title=i.title)}function og(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.integrity==null&&(a.integrity=i.integrity)}var Hm=null;function x0(a,i,l){if(Hm===null){var u=new Map,p=Hm=new Map;p.set(l,u)}else p=Hm,u=p.get(l),u||(u=new Map,p.set(l,u));if(u.has(a))return u;for(u.set(a,null),l=l.getElementsByTagName(a),p=0;p<l.length;p++){var j=l[p];if(!(j[ye]||j[le]||a==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var $=j.getAttribute(i)||"";$=a+$;var X=u.get($);X?X.push(j):u.set($,[j])}}return u}function p0(a,i,l){a=a.ownerDocument||a,a.head.insertBefore(l,i==="title"?a.querySelector("head > title"):null)}function Ew(a,i,l){if(l===1||i.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return a=i.disabled,typeof i.precedence=="string"&&a==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function y0(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Hd=null;function Tw(){}function Mw(a,i,l){if(Hd===null)throw Error(n(475));var u=Hd;if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var p=Cc(l.href),j=a.querySelector(Ud(p));if(j){a=j._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(u.count++,u=Vm.bind(u),a.then(u,u)),i.state.loading|=4,i.instance=j,ot(j);return}j=a.ownerDocument||a,l=f0(l),(p=Zr.get(p))&&ig(l,p),j=j.createElement("link"),ot(j);var $=j;$._p=new Promise(function(X,Ne){$.onload=X,$.onerror=Ne}),za(j,"link",l),i.instance=j}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Vm.bind(u),a.addEventListener("load",i),a.addEventListener("error",i))}}function Ow(){if(Hd===null)throw Error(n(475));var a=Hd;return a.stylesheets&&a.count===0&&lg(a,a.stylesheets),0<a.count?function(i){var l=setTimeout(function(){if(a.stylesheets&&lg(a,a.stylesheets),a.unsuspend){var u=a.unsuspend;a.unsuspend=null,u()}},6e4);return a.unsuspend=i,function(){a.unsuspend=null,clearTimeout(l)}}:null}function Vm(){if(this.count--,this.count===0){if(this.stylesheets)lg(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var qm=null;function lg(a,i){a.stylesheets=null,a.unsuspend!==null&&(a.count++,qm=new Map,i.forEach(Rw,a),qm=null,Vm.call(a))}function Rw(a,i){if(!(i.state.loading&4)){var l=qm.get(a);if(l)var u=l.get(null);else{l=new Map,qm.set(a,l);for(var p=a.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<p.length;j++){var $=p[j];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(l.set($.dataset.precedence,$),u=$)}u&&l.set(null,u)}p=i.instance,$=p.getAttribute("data-precedence"),j=l.get($)||u,j===u&&l.set(null,p),l.set($,p),this.count++,u=Vm.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),j?j.parentNode.insertBefore(p,j.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(p,a.firstChild)),i.state.loading|=4}}var Vd={$$typeof:O,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function Iw(a,i,l,u,p,j,$,X){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ct(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ct(0),this.hiddenUpdates=ct(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=j,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function b0(a,i,l,u,p,j,$,X,Ne,We,lt,ft){return a=new Iw(a,i,l,$,X,Ne,We,ft),i=1,j===!0&&(i|=24),j=Ua(3,null,null,i),a.current=j,j.stateNode=a,i=$l(),i.refCount++,a.pooledCache=i,i.refCount++,j.memoizedState={element:u,isDehydrated:l,cache:i},ql(j),a}function v0(a){return a?(a=Mn,a):Mn}function j0(a,i,l,u,p,j){p=v0(p),u.context===null?u.context=p:u.pendingContext=p,u=Fn(i),u.payload={element:l},j=j===void 0?null:j,j!==null&&(u.callback=j),l=pn(a,u,i),l!==null&&(Fr(l,a,i),Go(l,a,i))}function w0(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var l=a.retryLane;a.retryLane=l!==0&&l<i?l:i}}function cg(a,i){w0(a,i),(a=a.alternate)&&w0(a,i)}function N0(a){if(a.tag===13){var i=$i(a,67108864);i!==null&&Fr(i,a,67108864),cg(a,67108864)}}var Km=!0;function zw(a,i,l,u){var p=se.T;se.T=null;var j=Ae.p;try{Ae.p=2,dg(a,i,l,u)}finally{Ae.p=j,se.T=p}}function Pw(a,i,l,u){var p=se.T;se.T=null;var j=Ae.p;try{Ae.p=8,dg(a,i,l,u)}finally{Ae.p=j,se.T=p}}function dg(a,i,l,u){if(Km){var p=ug(u);if(p===null)Qf(a,i,u,Ym,l),C0(a,u);else if(Lw(p,a,i,l,u))u.stopPropagation();else if(C0(a,u),i&4&&-1<Fw.indexOf(a)){for(;p!==null;){var j=te(p);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var $=xt(j.pendingLanes);if($!==0){var X=j;for(X.pendingLanes|=2,X.entangledLanes|=2;$;){var Ne=1<<31-He($);X.entanglements[1]|=Ne,$&=~Ne}$n(j),(Ss&6)===0&&(Em=J()+500,Pd(0))}}break;case 13:X=$i(j,2),X!==null&&Fr(X,j,2),Mm(),cg(j,2)}if(j=ug(u),j===null&&Qf(a,i,u,Ym,l),j===p)break;p=j}p!==null&&u.stopPropagation()}else Qf(a,i,u,null,l)}}function ug(a){return a=kn(a),mg(a)}var Ym=null;function mg(a){if(Ym=null,a=Z(a),a!==null){var i=c(a);if(i===null)a=null;else{var l=i.tag;if(l===13){if(a=d(i),a!==null)return a;a=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Ym=a,null}function S0(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Y()){case T:return 2;case G:return 8;case ce:case ie:return 32;case fe:return 268435456;default:return 32}default:return 32}}var hg=!1,ho=null,fo=null,go=null,qd=new Map,Kd=new Map,xo=[],Fw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function C0(a,i){switch(a){case"focusin":case"focusout":ho=null;break;case"dragenter":case"dragleave":fo=null;break;case"mouseover":case"mouseout":go=null;break;case"pointerover":case"pointerout":qd.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kd.delete(i.pointerId)}}function Yd(a,i,l,u,p,j){return a===null||a.nativeEvent!==j?(a={blockedOn:i,domEventName:l,eventSystemFlags:u,nativeEvent:j,targetContainers:[p]},i!==null&&(i=te(i),i!==null&&N0(i)),a):(a.eventSystemFlags|=u,i=a.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),a)}function Lw(a,i,l,u,p){switch(i){case"focusin":return ho=Yd(ho,a,i,l,u,p),!0;case"dragenter":return fo=Yd(fo,a,i,l,u,p),!0;case"mouseover":return go=Yd(go,a,i,l,u,p),!0;case"pointerover":var j=p.pointerId;return qd.set(j,Yd(qd.get(j)||null,a,i,l,u,p)),!0;case"gotpointercapture":return j=p.pointerId,Kd.set(j,Yd(Kd.get(j)||null,a,i,l,u,p)),!0}return!1}function k0(a){var i=Z(a.target);if(i!==null){var l=c(i);if(l!==null){if(i=l.tag,i===13){if(i=d(l),i!==null){a.blockedOn=i,ge(a.priority,function(){if(l.tag===13){var u=Pr();u=Ct(u);var p=$i(l,u);p!==null&&Fr(p,l,u),cg(l,u)}});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){a.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Gm(a){if(a.blockedOn!==null)return!1;for(var i=a.targetContainers;0<i.length;){var l=ug(a.nativeEvent);if(l===null){l=a.nativeEvent;var u=new l.constructor(l.type,l);da=u,l.target.dispatchEvent(u),da=null}else return i=te(l),i!==null&&N0(i),a.blockedOn=l,!1;i.shift()}return!0}function _0(a,i,l){Gm(a)&&l.delete(i)}function Bw(){hg=!1,ho!==null&&Gm(ho)&&(ho=null),fo!==null&&Gm(fo)&&(fo=null),go!==null&&Gm(go)&&(go=null),qd.forEach(_0),Kd.forEach(_0)}function Wm(a,i){a.blockedOn===i&&(a.blockedOn=null,hg||(hg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Bw)))}var Xm=null;function A0(a){Xm!==a&&(Xm=a,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Xm===a&&(Xm=null);for(var i=0;i<a.length;i+=3){var l=a[i],u=a[i+1],p=a[i+2];if(typeof u!="function"){if(mg(u||l)===null)continue;break}var j=te(l);j!==null&&(a.splice(i,3),i-=3,nc(j,{pending:!0,data:p,method:l.method,action:u},u,p))}}))}function Gd(a){function i(Ne){return Wm(Ne,a)}ho!==null&&Wm(ho,a),fo!==null&&Wm(fo,a),go!==null&&Wm(go,a),qd.forEach(i),Kd.forEach(i);for(var l=0;l<xo.length;l++){var u=xo[l];u.blockedOn===a&&(u.blockedOn=null)}for(;0<xo.length&&(l=xo[0],l.blockedOn===null);)k0(l),l.blockedOn===null&&xo.shift();if(l=(a.ownerDocument||a).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var p=l[u],j=l[u+1],$=p[Ve]||null;if(typeof j=="function")$||A0(l);else if($){var X=null;if(j&&j.hasAttribute("formAction")){if(p=j,$=j[Ve]||null)X=$.formAction;else if(mg(p)!==null)continue}else X=$.action;typeof X=="function"?l[u+1]=X:(l.splice(u,3),u-=3),A0(l)}}}function fg(a){this._internalRoot=a}Qm.prototype.render=fg.prototype.render=function(a){var i=this._internalRoot;if(i===null)throw Error(n(409));var l=i.current,u=Pr();j0(l,u,a,i,null,null)},Qm.prototype.unmount=fg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var i=a.containerInfo;j0(a.current,2,null,a,null,null),Mm(),i[nt]=null}};function Qm(a){this._internalRoot=a}Qm.prototype.unstable_scheduleHydration=function(a){if(a){var i=Bt();a={blockedOn:null,target:a,priority:i};for(var l=0;l<xo.length&&i!==0&&i<xo[l].priority;l++);xo.splice(l,0,a),l===0&&k0(a)}};var D0=t.version;if(D0!=="19.1.1")throw Error(n(527,D0,"19.1.1"));Ae.findDOMNode=function(a){var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=h(i),a=a!==null?g(a):null,a=a===null?null:a.stateNode,a};var Uw={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zm.isDisabled&&Zm.supportsFiber)try{Re=Zm.inject(Uw),Ie=Zm}catch{}}return Xd.createRoot=function(a,i){if(!o(a))throw Error(n(299));var l=!1,u="",p=Ut,j=Xt,$=Oa,X=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(j=i.onCaughtError),i.onRecoverableError!==void 0&&($=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(X=i.unstable_transitionCallbacks)),i=b0(a,1,!1,null,null,l,u,p,j,$,X,null),a[nt]=i.current,Xf(a),new fg(i)},Xd.hydrateRoot=function(a,i,l){if(!o(a))throw Error(n(299));var u=!1,p="",j=Ut,$=Xt,X=Oa,Ne=null,We=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(j=l.onUncaughtError),l.onCaughtError!==void 0&&($=l.onCaughtError),l.onRecoverableError!==void 0&&(X=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Ne=l.unstable_transitionCallbacks),l.formState!==void 0&&(We=l.formState)),i=b0(a,1,!0,i,l??null,u,p,j,$,X,Ne,We),i.context=v0(null),l=i.current,u=Pr(),u=Ct(u),p=Fn(u),p.callback=null,pn(l,p,u),l=u,i.current.lanes=l,it(i,l),$n(i),a[nt]=i.current,Xf(a),new Qm(i)},Xd.version="19.1.1",Xd}var L0;function Xw(){if(L0)return pg.exports;L0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),pg.exports=Ww(),pg.exports}var Qw=Xw();/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Jw=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),B0=s=>{const t=Jw(s);return t.charAt(0).toUpperCase()+t.slice(1)},Ub=(...s)=>s.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),eN=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=v.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:c,iconNode:d,...m},h)=>v.createElement("svg",{ref:h,...tN,width:t,height:t,stroke:s,strokeWidth:n?Number(r)*24/Number(t):r,className:Ub("lucide",o),...!c&&!eN(m)&&{"aria-hidden":"true"},...m},[...d.map(([g,y])=>v.createElement(g,y)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=(s,t)=>{const r=v.forwardRef(({className:n,...o},c)=>v.createElement(sN,{ref:c,iconNode:t,className:Ub(`lucide-${Zw(B0(s))}`,`lucide-${s}`,n),...o}));return r.displayName=B0(s),r};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],rN=Dt("archive",aN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],zc=Dt("arrow-left",nN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],oN=Dt("arrow-right",iN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],cN=Dt("banknote",lN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],uu=Dt("bell",dN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],mN=Dt("box",uN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],U0=Dt("building",hN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],gN=Dt("calendar-days",fN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Pc=Dt("calendar",xN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ox=Dt("chart-column",pN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],bN=Dt("check-check",yN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],kh=Dt("check",vN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],Bh=Dt("chef-hat",jN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],hs=Dt("chevron-down",wN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Tu=Dt("chevron-left",NN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$b=Dt("chevron-right",SN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],$g=Dt("chevron-up",CN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],lx=Dt("circle-alert",kN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],la=Dt("circle-check-big",_N);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Hb=Dt("clipboard-list",AN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$s=Dt("clock",DN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],TN=Dt("coffee",EN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],$0=Dt("credit-card",MN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Vb=Dt("crown",ON);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Fc=Dt("dollar-sign",RN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],qb=Dt("download",IN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]],H0=Dt("euro",zN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_h=Dt("eye-off",PN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vn=Dt("eye",FN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Oc=Dt("file-text",LN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],V0=Dt("folder",BN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],$N=Dt("funnel",UN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Ah=Dt("gift",HN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],qN=Dt("globe",VN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Kb=Dt("grid-3x3",KN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],GN=Dt("heart",YN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Hg=Dt("house",WN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Yb=Dt("info",XN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],ZN=Dt("key-round",QN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Gb=Dt("key",JN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],jg=Dt("layers",e1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],s1=Dt("layout-dashboard",t1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],cx=Dt("list",a1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Uh=Dt("log-out",r1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Wb=Dt("mail",n1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ph=Dt("map-pin",i1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Xb=Dt("menu",o1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"M5 12h14",key:"1ays0h"}]],Vg=Dt("minus",l1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],yl=Dt("package",c1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],fl=Dt("pen",d1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],dx=Dt("phone",u1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ls=Dt("plus",m1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],pu=Dt("printer",h1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],q0=Dt("receipt",f1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Qb=Dt("refresh-cw",g1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],$h=Dt("rotate-ccw",x1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ux=Dt("save",p1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],b1=Dt("scissors",y1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],jn=Dt("search",v1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],w1=Dt("send",j1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bl=Dt("settings",N1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],vl=Dt("shield",S1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],yu=Dt("shopping-bag",C1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],ko=Dt("shopping-cart",k1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],A1=Dt("smartphone",_1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],jo=Dt("sparkles",D1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],oa=Dt("square-pen",E1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],iu=Dt("star",T1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],mu=Dt("store",M1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],mx=Dt("table",O1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Hh=Dt("tag",R1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],z1=Dt("timer",I1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Pa=Dt("trash-2",P1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],ol=Dt("trash",F1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Zb=Dt("trending-up",L1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bu=Dt("triangle-alert",B1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],So=Dt("truck",U1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],hx=Dt("upload",$1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],V1=Dt("user-check",H1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],K1=Dt("user-cog",q1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Lc=Dt("user",Y1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],W1=Dt("users-round",G1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],sn=Dt("users",X1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],Ni=Dt("utensils",Q1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],qg=Dt("wallet",Z1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],e2=Dt("wifi-off",J1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],s2=Dt("wifi",t2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Nt=Dt("x",a2),Vh=`
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    background: #032D3A;
    border-radius: 10px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #4a7ca3;
    border-radius: 10px;
    border: 1px solid #2d5a87;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #2d5a87;
  }
  
  .custom-scrollbar::-webkit-scrollbar-corner {
    background: #032D3A;
  }
`,r2=({isOpen:s,onClose:t,onNext:r,resetFields:n})=>{const[o,c]=v.useState(""),d=[{id:"admin",name:"Admin",icon:Vb},{id:"manager",name:"Manager",icon:bl},{id:"cashier",name:"Cashier",icon:Fc,subtitle:"Multiple Users"},{id:"waiter",name:"Waiter",icon:b1,subtitle:"Multiple Users"},{id:"chef",name:"Chef",icon:Bh}];Sr.useEffect(()=>{n&&c("")},[n]);const m=h=>{c(h),setTimeout(()=>{r({role:h})},300)};return s?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:Vh}),e.jsx("div",{className:"fixed inset-0 bg-[#00000094] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-[#032D3A] rounded-xl w-full max-w-md mx-auto relative border border-[#4a7ca3]",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-300 hover:text-white transition-colors z-10 border border-[#4a7ca3] rounded-lg w-7 h-7 flex items-center justify-center hover:bg-[#2d5a87]",children:e.jsx(Nt,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#2d5a87] rounded-lg flex items-center justify-center mx-auto mb-3 border border-[#4a7ca3]",children:e.jsx(vl,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"Reset PIN"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Step 1 of 4"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-md font-semibold text-white mb-3 text-center",children:"Select Your Role"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:d.map(h=>{const g=h.icon,y=o===h.id;return e.jsxs("button",{onClick:()=>m(h.id),className:`
                        ${y?"border-2 border-[#4a7ca3] bg-[#2d5a87] text-white":"border-[#1e3a5f] text-white"}
                        p-3 rounded-lg transition-all duration-200
                        flex flex-col items-center justify-center h-20 hover:cursor-pointer 
                        bg-[#032D3A] hover:bg-[#2d5a87] border
                      `,children:[e.jsx(g,{className:"w-5 h-5 mb-1"}),e.jsx("span",{className:"text-sm font-bold",children:h.name}),h.subtitle&&e.jsx("span",{className:"text-xs opacity-70",children:h.subtitle})]},h.id)})})]})]})})})]}):null},n2=({isOpen:s,onClose:t,onNext:r,userInfo:n,resetFields:o})=>{const[c,d]=v.useState("");Sr.useEffect(()=>{o&&d("")},[o]);const m=_=>{c.length<11&&d(E=>E+_)},h=()=>{d("")},g=()=>{d(_=>_.slice(0,-1))},y=()=>{c.length>=10&&r({...n,phoneNumber:c})},w=({number:_,onClick:E,className:z=""})=>e.jsx("button",{onClick:()=>E(_),className:`h-9 bg-[#032D3A] border-[#2d5a87] rounded-lg text-sm font-bold transition-all duration-200 border cursor-pointer text-white hover:bg-[#2d5a87] hover:border-[#4a7ca3] ${z}`,children:_}),S=({onClick:_,className:E="",children:z,variant:I="default"})=>{const U="h-9 rounded-lg text-xs font-semibold transition-all duration-200 border flex items-center justify-center",q={clear:"bg-red-900/40 hover:bg-red-800/50 border-[#4a7ca3] cursor-pointer text-red-300 hover:border-red-500",backspace:"bg-[#032D3A] hover:bg-[#2d5a87] border-[#4a7ca3] cursor-pointer text-white hover:border-[#4a7ca3]",default:U};return e.jsx("button",{onClick:_,className:`${U} ${q[I]} ${E}`,children:z})};return s?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:Vh}),e.jsx("div",{className:"fixed inset-0 bg-[#00000094] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-[#032D3A] rounded-xl w-full max-w-md mx-auto relative border border-[#4a7ca3]",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-300 hover:text-white transition-colors z-10 border border-[#4a7ca3] rounded-lg w-7 h-7 flex items-center justify-center hover:bg-[#2d5a87]",children:e.jsx(Nt,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#2d5a87] rounded-lg flex items-center justify-center mx-auto mb-3 border border-[#4a7ca3]",children:e.jsx(vl,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"Reset PIN"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Step 2 of 4"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-md font-semibold text-white mb-3 text-center",children:"Enter Phone Number"}),e.jsxs("p",{className:"text-xs text-gray-300 mb-3 text-center",children:["Role: ",e.jsx("span",{className:"text-white font-semibold",children:n?.role})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex justify-center items-center gap-2 mb-1",children:e.jsxs("div",{className:"flex items-center bg-[#1e3a5f] border border-[#2d5a87] rounded-lg px-3 py-2 min-w-[180px]",children:[e.jsx(dx,{className:"w-4 h-4 text-gray-300 mr-2"}),e.jsx("span",{className:"text-white font-mono text-sm",children:c||"Enter phone number"})]})}),e.jsxs("p",{className:"text-center text-xs text-gray-400",children:[c.length,"/11 digits"]})]}),e.jsxs("div",{className:"max-w-xs mx-auto mb-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[1,2,3,4,5,6,7,8,9].map(_=>e.jsx(w,{number:_,onClick:m},_))}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(S,{onClick:h,variant:"clear",children:"Clear"}),e.jsx(w,{number:0,onClick:m}),e.jsx(S,{onClick:g,variant:"backspace",children:e.jsx(Nt,{className:"w-3 h-3"})})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:y,disabled:c.length<10,className:`px-6 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 border ${c.length>=10?"bg-[#2d5a87] border-[#4a7ca3] text-white hover:bg-[#4a7ca3] cursor-pointer":"bg-[#1e3a5f] border-[#4a7ca3] text-gray-400 cursor-not-allowed"}`,children:"Send OTP"})})]})]})})})]}):null},i2=({isOpen:s,onClose:t,onNext:r,userInfo:n,resetFields:o})=>{const[c,d]=v.useState("");Sr.useEffect(()=>{o&&d("")},[o]);const m=E=>{c.length<6&&d(z=>z+E)},h=()=>{d("")},g=()=>{d(E=>E.slice(0,-1))},y=()=>{c.length===6&&r()},w=({number:E,onClick:z,className:I=""})=>e.jsx("button",{onClick:()=>z(E),className:`h-9 bg-[#032D3A] border-[#2d5a87] rounded-lg text-sm font-bold transition-all duration-200 border cursor-pointer text-white hover:bg-[#2d5a87] hover:border-[#4a7ca3] ${I}`,children:E}),S=({onClick:E,className:z="",children:I,variant:U="default"})=>{const q="h-9 rounded-lg text-xs font-semibold transition-all duration-200 border flex items-center justify-center",O={clear:"bg-red-900/40 hover:bg-red-800/50 border-[#4a7ca3] cursor-pointer text-red-300 hover:border-red-500",backspace:"bg-[#032D3A] hover:bg-[#2d5a87] border-[#4a7ca3] cursor-pointer text-white hover:border-[#4a7ca3]",default:q};return e.jsx("button",{onClick:E,className:`${q} ${O[U]} ${z}`,children:I})},_=()=>{const E=Array.from({length:6},(z,I)=>{const U=I<c.length,q=c[I]||"",O=!U;return e.jsx("div",{className:`w-8 h-8 border rounded-lg flex items-center justify-center text-sm font-semibold transition-all duration-200 ${O?"border-[#1e3a5f] bg-[#0f2a44]":"border-[#2d5a87] bg-[#032D3A] text-white"}`,children:U?q:""},I)});return e.jsx("div",{className:"flex justify-center items-center gap-2",children:E})};return s?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:Vh}),e.jsx("div",{className:"fixed inset-0 bg-[#00000094] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-[#032D3A] rounded-xl w-full max-w-md mx-auto relative border border-[#4a7ca3]",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-300 hover:text-white transition-colors z-10 border border-[#4a7ca3] rounded-lg w-7 h-7 flex items-center justify-center hover:bg-[#2d5a87]",children:e.jsx(Nt,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#2d5a87] rounded-lg flex items-center justify-center mx-auto mb-3 border border-[#4a7ca3]",children:e.jsx(vl,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"Reset PIN"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Step 3 of 4"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-md font-semibold text-white mb-3 text-center",children:"Enter OTP"}),e.jsxs("p",{className:"text-xs text-gray-300 mb-3 text-center",children:["OTP sent to: ",e.jsx("span",{className:"text-white font-semibold",children:n?.phoneNumber})]}),e.jsxs("div",{className:"mb-3",children:[_(),e.jsxs("p",{className:"text-center text-xs text-gray-400 mt-1",children:[c.length,"/6 digits"]})]}),e.jsxs("div",{className:"max-w-xs mx-auto mb-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[1,2,3,4,5,6,7,8,9].map(E=>e.jsx(w,{number:E,onClick:m},E))}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(S,{onClick:h,variant:"clear",children:"Clear"}),e.jsx(w,{number:0,onClick:m}),e.jsx(S,{onClick:g,variant:"backspace",children:e.jsx(Nt,{className:"w-3 h-3"})})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:y,disabled:c.length!==6,className:`px-6 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 border ${c.length===6?"bg-[#2d5a87] border-[#4a7ca3] text-white hover:bg-[#4a7ca3] cursor-pointer":"bg-[#1e3a5f] border-[#4a7ca3] text-gray-400 cursor-not-allowed"}`,children:"Verify OTP"})})]})]})})})]}):null},o2=({isOpen:s,onClose:t,onComplete:r,resetFields:n})=>{const[o,c]=v.useState(""),[d,m]=v.useState(""),[h,g]=v.useState(!1),[y,w]=v.useState("");Sr.useEffect(()=>{n&&(c(""),m(""),g(!1),w(""))},[n]);const S=O=>{h?d.length<6&&(m(R=>R+O),w("")):o.length<6&&c(R=>R+O)},_=()=>{h?(m(""),w("")):c("")},E=()=>{h?(m(O=>O.slice(0,-1)),w("")):c(O=>O.slice(0,-1))},z=()=>{if(h){if(d.length<4){w("PIN must be at least 4 digits");return}if(o!==d){w("PINs do not match");return}r()}else{if(o.length<4){w("PIN must be at least 4 digits");return}g(!0),w("")}},I=({number:O,onClick:R,className:M=""})=>e.jsx("button",{onClick:()=>R(O),className:`h-9 bg-[#032D3A] border-[#2d5a87] rounded-lg text-sm font-bold transition-all duration-200 border cursor-pointer text-white hover:bg-[#2d5a87] hover:border-[#4a7ca3] ${M}`,children:O}),U=({onClick:O,className:R="",children:M,variant:P="default"})=>{const ee="h-9 rounded-lg text-xs font-semibold transition-all duration-200 border flex items-center justify-center",oe={clear:"bg-red-900/40 hover:bg-red-800/50 border-[#4a7ca3] cursor-pointer text-red-300 hover:border-red-500",backspace:"bg-[#032D3A] hover:bg-[#2d5a87] border-[#4a7ca3] cursor-pointer text-white hover:border-[#4a7ca3]",default:ee};return e.jsx("button",{onClick:O,className:`${ee} ${oe[P]} ${R}`,children:M})},q=(O,R)=>{const M=Array.from({length:6},(P,ee)=>{const oe=ee<O.length,je=!oe;return e.jsx("div",{className:`w-8 h-8 border rounded-lg flex items-center justify-center text-sm font-semibold transition-all duration-200 ${je?"border-[#1e3a5f] bg-[#0f2a44]":"border-[#2d5a87] bg-[#032D3A] text-white"}`,children:oe?"●":""},ee)});return e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-center text-xs text-gray-300 mb-1",children:R}),e.jsx("div",{className:"flex justify-center items-center gap-2",children:M}),e.jsxs("p",{className:"text-center text-xs text-gray-400 mt-1",children:[O.length,"/6 digits"]})]})};return s?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:Vh}),e.jsx("div",{className:"fixed inset-0 bg-[#00000094] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-[#032D3A] rounded-xl w-full max-w-md mx-auto relative border border-[#4a7ca3]",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-300 hover:text-white transition-colors z-10 border border-[#4a7ca3] rounded-lg w-7 h-7 flex items-center justify-center hover:bg-[#2d5a87]",children:e.jsx(Nt,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#2d5a87] rounded-lg flex items-center justify-center mx-auto mb-3 border border-[#4a7ca3]",children:e.jsx(vl,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"Reset PIN"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Step 4 of 4"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-md font-semibold text-white mb-3 text-center",children:h?"Confirm New PIN":"Set New PIN"}),h?q(d,"Confirm New PIN"):q(o,"Enter New PIN (4-6 digits)"),y&&e.jsxs("div",{className:"mb-3 flex items-center justify-center gap-1 bg-red-900/40 text-red-300 p-1 rounded border border-red-600/30",children:[e.jsx(lx,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-medium",children:y})]}),e.jsxs("div",{className:"max-w-xs mx-auto mb-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[1,2,3,4,5,6,7,8,9].map(O=>e.jsx(I,{number:O,onClick:S},O))}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(U,{onClick:_,variant:"clear",children:"Clear"}),e.jsx(I,{number:0,onClick:S}),e.jsx(U,{onClick:E,variant:"backspace",children:e.jsx(Nt,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"flex justify-center gap-3",children:[h&&e.jsx("button",{onClick:()=>{g(!1),m(""),w("")},className:"px-4 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 text-gray-300 hover:text-white bg-transparent border border-[#4a7ca3] hover:bg-[#1e3a5f]",children:"Back to New PIN"}),e.jsx("button",{onClick:z,disabled:!h&&o.length<4||h&&d.length<4,className:`px-4 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 border ${!h&&o.length>=4||h&&d.length>=4?"bg-[#2d5a87] border-[#4a7ca3] text-white hover:bg-[#4a7ca3] cursor-pointer":"bg-[#1e3a5f] border-[#4a7ca3] text-gray-400 cursor-not-allowed"}`,children:h?"Reset PIN":"Continue"})]})]})]})})})]}):null},l2=({isOpen:s,onClose:t})=>{const[r,n]=v.useState(1),[o,c]=v.useState(null),[d,m]=v.useState(!1);Sr.useEffect(()=>{s||(n(1),c(null),m(_=>!_))},[s]);const h=_=>{c(_),n(2)},g=_=>{c(_),n(3)},y=()=>{n(4)},w=()=>{n(1),c(null),m(_=>!_),alert("PIN reset successfully! You can now login with your new PIN."),t()},S=()=>{n(1),c(null),m(_=>!_),t()};return e.jsxs(e.Fragment,{children:[e.jsx(r2,{isOpen:s&&r===1,onClose:S,onNext:h,resetFields:d}),e.jsx(n2,{isOpen:s&&r===2,onClose:S,onNext:g,userInfo:o,resetFields:d}),e.jsx(i2,{isOpen:s&&r===3,onClose:S,onNext:y,userInfo:o,resetFields:d}),e.jsx(o2,{isOpen:s&&r===4,onClose:S,onComplete:w,resetFields:d})]})};/**
 * react-router v7.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Jb=s=>{throw TypeError(s)},c2=(s,t,r)=>t.has(s)||Jb("Cannot "+r),wg=(s,t,r)=>(c2(s,t,"read from private field"),r?r.call(s):t.get(s)),d2=(s,t,r)=>t.has(s)?Jb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,r),K0="popstate";function u2(s={}){function t(o,c){let{pathname:d="/",search:m="",hash:h=""}=Si(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),vu("",{pathname:d,search:m,hash:h},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function r(o,c){let d=o.document.querySelector("base"),m="";if(d&&d.getAttribute("href")){let h=o.location.href,g=h.indexOf("#");m=g===-1?h:h.slice(0,g)}return m+"#"+(typeof c=="string"?c:_o(c))}function n(o,c){ra(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return h2(t,r,n,s)}function ms(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function ra(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function m2(){return Math.random().toString(36).substring(2,10)}function Y0(s,t){return{usr:s.state,key:s.key,idx:t}}function vu(s,t,r=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?Si(t):t,state:r,key:t&&t.key||n||m2()}}function _o({pathname:s="/",search:t="",hash:r=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function Si(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substring(r),s=s.substring(0,r));let n=s.indexOf("?");n>=0&&(t.search=s.substring(n),s=s.substring(0,n)),s&&(t.pathname=s)}return t}function h2(s,t,r,n={}){let{window:o=document.defaultView,v5Compat:c=!1}=n,d=o.history,m="POP",h=null,g=y();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function y(){return(d.state||{idx:null}).idx}function w(){m="POP";let I=y(),U=I==null?null:I-g;g=I,h&&h({action:m,location:z.location,delta:U})}function S(I,U){m="PUSH";let q=vu(z.location,I,U);r&&r(q,I),g=y()+1;let O=Y0(q,g),R=z.createHref(q);try{d.pushState(O,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;o.location.assign(R)}c&&h&&h({action:m,location:z.location,delta:1})}function _(I,U){m="REPLACE";let q=vu(z.location,I,U);r&&r(q,I),g=y();let O=Y0(q,g),R=z.createHref(q);d.replaceState(O,"",R),c&&h&&h({action:m,location:z.location,delta:0})}function E(I){return ev(I)}let z={get action(){return m},get location(){return s(o,d)},listen(I){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(K0,w),h=I,()=>{o.removeEventListener(K0,w),h=null}},createHref(I){return t(o,I)},createURL:E,encodeLocation(I){let U=E(I);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:S,replace:_,go(I){return d.go(I)}};return z}function ev(s,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ms(r,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:_o(s);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}var ou,G0=class{constructor(s){if(d2(this,ou,new Map),s)for(let[t,r]of s)this.set(t,r)}get(s){if(wg(this,ou).has(s))return wg(this,ou).get(s);if(s.defaultValue!==void 0)return s.defaultValue;throw new Error("No value found for context")}set(s,t){wg(this,ou).set(s,t)}};ou=new WeakMap;var f2=new Set(["lazy","caseSensitive","path","id","index","children"]);function g2(s){return f2.has(s)}var x2=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function p2(s){return x2.has(s)}function y2(s){return s.index===!0}function ju(s,t,r=[],n={},o=!1){return s.map((c,d)=>{let m=[...r,String(d)],h=typeof c.id=="string"?c.id:m.join("-");if(ms(c.index!==!0||!c.children,"Cannot specify children on an index route"),ms(o||!n[h],`Found a route id collision on id "${h}".  Route id's must be globally unique within Data Router usages`),y2(c)){let g={...c,...t(c),id:h};return n[h]=g,g}else{let g={...c,...t(c),id:h,children:void 0};return n[h]=g,c.children&&(g.children=ju(c.children,t,m,n,o)),g}})}function bo(s,t,r="/"){return yh(s,t,r,!1)}function yh(s,t,r,n){let o=typeof t=="string"?Si(t):t,c=an(o.pathname||"/",r);if(c==null)return null;let d=tv(s);v2(d);let m=null;for(let h=0;m==null&&h<d.length;++h){let g=T2(c);m=D2(d[h],g,n)}return m}function b2(s,t){let{route:r,pathname:n,params:o}=s;return{id:r.id,pathname:n,params:o,data:t[r.id],loaderData:t[r.id],handle:r.handle}}function tv(s,t=[],r=[],n="",o=!1){let c=(d,m,h=o,g)=>{let y={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(n)&&h)return;ms(y.relativePath.startsWith(n),`Absolute route path "${y.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(n.length)}let w=Kn([n,y.relativePath]),S=r.concat(y);d.children&&d.children.length>0&&(ms(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),tv(d.children,t,S,w,h)),!(d.path==null&&!d.index)&&t.push({path:w,score:_2(w,d.index),routesMeta:S})};return s.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))c(d,m);else for(let h of sv(d.path))c(d,m,!0,h)}),t}function sv(s){let t=s.split("/");if(t.length===0)return[];let[r,...n]=t,o=r.endsWith("?"),c=r.replace(/\?$/,"");if(n.length===0)return o?[c,""]:[c];let d=sv(n.join("/")),m=[];return m.push(...d.map(h=>h===""?c:[c,h].join("/"))),o&&m.push(...d),m.map(h=>s.startsWith("/")&&h===""?"/":h)}function v2(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:A2(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var j2=/^:[\w-]+$/,w2=3,N2=2,S2=1,C2=10,k2=-2,W0=s=>s==="*";function _2(s,t){let r=s.split("/"),n=r.length;return r.some(W0)&&(n+=k2),t&&(n+=N2),r.filter(o=>!W0(o)).reduce((o,c)=>o+(j2.test(c)?w2:c===""?S2:C2),n)}function A2(s,t){return s.length===t.length&&s.slice(0,-1).every((n,o)=>n===t[o])?s[s.length-1]-t[t.length-1]:0}function D2(s,t,r=!1){let{routesMeta:n}=s,o={},c="/",d=[];for(let m=0;m<n.length;++m){let h=n[m],g=m===n.length-1,y=c==="/"?t:t.slice(c.length)||"/",w=Dh({path:h.relativePath,caseSensitive:h.caseSensitive,end:g},y),S=h.route;if(!w&&g&&r&&!n[n.length-1].route.index&&(w=Dh({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},y)),!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:Kn([c,w.pathname]),pathnameBase:I2(Kn([c,w.pathnameBase])),route:S}),w.pathnameBase!=="/"&&(c=Kn([c,w.pathnameBase]))}return d}function Dh(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,n]=E2(s.path,s.caseSensitive,s.end),o=t.match(r);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:n.reduce((g,{paramName:y,isOptional:w},S)=>{if(y==="*"){let E=m[S]||"";d=c.slice(0,c.length-E.length).replace(/(.)\/+$/,"$1")}const _=m[S];return w&&!_?g[y]=void 0:g[y]=(_||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:d,pattern:s}}function E2(s,t=!1,r=!0){ra(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,h)=>(n.push({paramName:m,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),n]}function T2(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ra(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function an(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=s.charAt(r);return n&&n!=="/"?null:s.slice(r)||"/"}function M2({basename:s,pathname:t}){return t==="/"?s:Kn([s,t])}function O2(s,t="/"){let{pathname:r,search:n="",hash:o=""}=typeof s=="string"?Si(s):s;return{pathname:r?r.startsWith("/")?r:R2(r,t):t,search:z2(n),hash:P2(o)}}function R2(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function Ng(s,t,r,n){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function av(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function fx(s){let t=av(s);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function gx(s,t,r,n=!1){let o;typeof s=="string"?o=Si(s):(o={...s},ms(!o.pathname||!o.pathname.includes("?"),Ng("?","pathname","search",o)),ms(!o.pathname||!o.pathname.includes("#"),Ng("#","pathname","hash",o)),ms(!o.search||!o.search.includes("#"),Ng("#","search","hash",o)));let c=s===""||o.pathname==="",d=c?"/":o.pathname,m;if(d==null)m=r;else{let w=t.length-1;if(!n&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),w-=1;o.pathname=S.join("/")}m=w>=0?t[w]:"/"}let h=O2(o,m),g=d&&d!=="/"&&d.endsWith("/"),y=(c||d===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(g||y)&&(h.pathname+="/"),h}var Kn=s=>s.join("/").replace(/\/\/+/g,"/"),I2=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),z2=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,P2=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,Eh=class{constructor(s,t,r,n=!1){this.status=s,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function wu(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var rv=["POST","PUT","PATCH","DELETE"],F2=new Set(rv),L2=["GET",...rv],B2=new Set(L2),U2=new Set([301,302,303,307,308]),$2=new Set([307,308]),Sg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},H2={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Qd={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},V2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xx=s=>V2.test(s),q2=s=>({hasErrorBoundary:!!s.hasErrorBoundary}),nv="remix-router-transitions",iv=Symbol("ResetLoaderData");function K2(s){const t=s.window?s.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";ms(s.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=s.hydrationRouteProperties||[],o=s.mapRouteProperties||q2,c={},d=ju(s.routes,o,void 0,c),m,h=s.basename||"/";h.startsWith("/")||(h=`/${h}`);let g=s.dataStrategy||Q2,y={...s.future},w=null,S=new Set,_=null,E=null,z=null,I=s.hydrationData!=null,U=bo(d,s.history.location,h),q=!1,O=null,R;if(U==null&&!s.patchRoutesOnNavigation){let ge=en(404,{pathname:s.history.location.pathname}),{matches:Ee,route:le}=Jm(d);R=!0,U=Ee,O={[le.id]:ge}}else if(U&&!s.hydrationData&&ut(U,d,s.history.location.pathname).active&&(U=null),U)if(U.some(ge=>ge.route.lazy))R=!1;else if(!U.some(ge=>px(ge.route)))R=!0;else{let ge=s.hydrationData?s.hydrationData.loaderData:null,Ee=s.hydrationData?s.hydrationData.errors:null;if(Ee){let le=U.findIndex(Ve=>Ee[Ve.route.id]!==void 0);R=U.slice(0,le+1).every(Ve=>!Yg(Ve.route,ge,Ee))}else R=U.every(le=>!Yg(le.route,ge,Ee))}else{R=!1,U=[];let ge=ut(null,d,s.history.location.pathname);ge.active&&ge.matches&&(q=!0,U=ge.matches)}let M,P={historyAction:s.history.action,location:s.history.location,matches:U,initialized:R,navigation:Sg,restoreScrollPosition:s.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:s.hydrationData&&s.hydrationData.loaderData||{},actionData:s.hydrationData&&s.hydrationData.actionData||null,errors:s.hydrationData&&s.hydrationData.errors||O,fetchers:new Map,blockers:new Map},ee="POP",oe=!1,je,de=!1,re=new Map,Te=null,De=!1,ne=!1,ue=new Set,se=new Map,Ae=0,Se=-1,$e=new Map,Q=new Set,xe=new Map,ve=new Map,ae=new Set,Ce=new Map,pe,k=null;function L(){if(w=s.history.listen(({action:ge,location:Ee,delta:le})=>{if(pe){pe(),pe=void 0;return}ra(Ce.size===0||le!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ve=_e({currentLocation:P.location,nextLocation:Ee,historyAction:ge});if(Ve&&le!=null){let nt=new Promise(mt=>{pe=mt});s.history.go(le*-1),Ye(Ve,{state:"blocked",location:Ee,proceed(){Ye(Ve,{state:"proceeding",proceed:void 0,reset:void 0,location:Ee}),nt.then(()=>s.history.go(le))},reset(){let mt=new Map(P.blockers);mt.set(Ve,Qd),N({blockers:mt})}});return}return V(ge,Ee)}),r){mS(t,re);let ge=()=>hS(t,re);t.addEventListener("pagehide",ge),Te=()=>t.removeEventListener("pagehide",ge)}return P.initialized||V("POP",P.location,{initialHydration:!0}),M}function f(){w&&w(),Te&&Te(),S.clear(),je&&je.abort(),P.fetchers.forEach((ge,Ee)=>Xe(Ee)),P.blockers.forEach((ge,Ee)=>Le(Ee))}function x(ge){return S.add(ge),()=>S.delete(ge)}function N(ge,Ee={}){ge.matches&&(ge.matches=ge.matches.map(nt=>{let mt=c[nt.route.id],wt=nt.route;return wt.element!==mt.element||wt.errorElement!==mt.errorElement||wt.hydrateFallbackElement!==mt.hydrateFallbackElement?{...nt,route:mt}:nt})),P={...P,...ge};let le=[],Ve=[];P.fetchers.forEach((nt,mt)=>{nt.state==="idle"&&(ae.has(mt)?le.push(mt):Ve.push(mt))}),ae.forEach(nt=>{!P.fetchers.has(nt)&&!se.has(nt)&&le.push(nt)}),[...S].forEach(nt=>nt(P,{deletedFetchers:le,viewTransitionOpts:Ee.viewTransitionOpts,flushSync:Ee.flushSync===!0})),le.forEach(nt=>Xe(nt)),Ve.forEach(nt=>P.fetchers.delete(nt))}function C(ge,Ee,{flushSync:le}={}){let Ve=P.actionData!=null&&P.navigation.formMethod!=null&&wr(P.navigation.formMethod)&&P.navigation.state==="loading"&&ge.state?._isRedirect!==!0,nt;Ee.actionData?Object.keys(Ee.actionData).length>0?nt=Ee.actionData:nt=null:Ve?nt=P.actionData:nt=null;let mt=Ee.loaderData?ny(P.loaderData,Ee.loaderData,Ee.matches||[],Ee.errors):P.loaderData,wt=P.blockers;wt.size>0&&(wt=new Map(wt),wt.forEach((ze,Z)=>wt.set(Z,Qd)));let vt=De?!1:Ke(ge,Ee.matches||P.matches),_t=oe===!0||P.navigation.formMethod!=null&&wr(P.navigation.formMethod)&&ge.state?._isRedirect!==!0;m&&(d=m,m=void 0),De||ee==="POP"||(ee==="PUSH"?s.history.push(ge,ge.state):ee==="REPLACE"&&s.history.replace(ge,ge.state));let ye;if(ee==="POP"){let ze=re.get(P.location.pathname);ze&&ze.has(ge.pathname)?ye={currentLocation:P.location,nextLocation:ge}:re.has(ge.pathname)&&(ye={currentLocation:ge,nextLocation:P.location})}else if(de){let ze=re.get(P.location.pathname);ze?ze.add(ge.pathname):(ze=new Set([ge.pathname]),re.set(P.location.pathname,ze)),ye={currentLocation:P.location,nextLocation:ge}}N({...Ee,actionData:nt,loaderData:mt,historyAction:ee,location:ge,initialized:!0,navigation:Sg,revalidation:"idle",restoreScrollPosition:vt,preventScrollReset:_t,blockers:wt},{viewTransitionOpts:ye,flushSync:le===!0}),ee="POP",oe=!1,de=!1,De=!1,ne=!1,k?.resolve(),k=null}async function A(ge,Ee){if(typeof ge=="number"){s.history.go(ge);return}let le=Kg(P.location,P.matches,h,ge,Ee?.fromRouteId,Ee?.relative),{path:Ve,submission:nt,error:mt}=X0(!1,le,Ee),wt=P.location,vt=vu(P.location,Ve,Ee&&Ee.state);vt={...vt,...s.history.encodeLocation(vt)};let _t=Ee&&Ee.replace!=null?Ee.replace:void 0,ye="PUSH";_t===!0?ye="REPLACE":_t===!1||nt!=null&&wr(nt.formMethod)&&nt.formAction===P.location.pathname+P.location.search&&(ye="REPLACE");let ze=Ee&&"preventScrollReset"in Ee?Ee.preventScrollReset===!0:void 0,Z=(Ee&&Ee.flushSync)===!0,te=_e({currentLocation:wt,nextLocation:vt,historyAction:ye});if(te){Ye(te,{state:"blocked",location:vt,proceed(){Ye(te,{state:"proceeding",proceed:void 0,reset:void 0,location:vt}),A(ge,Ee)},reset(){let Fe=new Map(P.blockers);Fe.set(te,Qd),N({blockers:Fe})}});return}await V(ye,vt,{submission:nt,pendingError:mt,preventScrollReset:ze,replace:Ee&&Ee.replace,enableViewTransition:Ee&&Ee.viewTransition,flushSync:Z})}function H(){k||(k=fS()),Me(),N({revalidation:"loading"});let ge=k.promise;return P.navigation.state==="submitting"?ge:P.navigation.state==="idle"?(V(P.historyAction,P.location,{startUninterruptedRevalidation:!0}),ge):(V(ee||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation,enableViewTransition:de===!0}),ge)}async function V(ge,Ee,le){je&&je.abort(),je=null,ee=ge,De=(le&&le.startUninterruptedRevalidation)===!0,ke(P.location,P.matches),oe=(le&&le.preventScrollReset)===!0,de=(le&&le.enableViewTransition)===!0;let Ve=m||d,nt=le&&le.overrideNavigation,mt=le?.initialHydration&&P.matches&&P.matches.length>0&&!q?P.matches:bo(Ve,Ee,h),wt=(le&&le.flushSync)===!0;if(mt&&P.initialized&&!ne&&nS(P.location,Ee)&&!(le&&le.submission&&wr(le.submission.formMethod))){C(Ee,{matches:mt},{flushSync:wt});return}let vt=ut(mt,Ve,Ee.pathname);if(vt.active&&vt.matches&&(mt=vt.matches),!mt){let{error:ot,notFoundMatches:ht,route:jt}=tt(Ee.pathname);C(Ee,{matches:ht,loaderData:{},errors:{[jt.id]:ot}},{flushSync:wt});return}je=new AbortController;let _t=Dc(s.history,Ee,je.signal,le&&le.submission),ye=s.getContext?await s.getContext():new G0,ze;if(le&&le.pendingError)ze=[vo(mt).route.id,{type:"error",error:le.pendingError}];else if(le&&le.submission&&wr(le.submission.formMethod)){let ot=await F(_t,Ee,le.submission,mt,ye,vt.active,le&&le.initialHydration===!0,{replace:le.replace,flushSync:wt});if(ot.shortCircuited)return;if(ot.pendingActionResult){let[ht,jt]=ot.pendingActionResult;if(Lr(jt)&&wu(jt.error)&&jt.error.status===404){je=null,C(Ee,{matches:ot.matches,loaderData:{},errors:{[ht]:jt.error}});return}}mt=ot.matches||mt,ze=ot.pendingActionResult,nt=Cg(Ee,le.submission),wt=!1,vt.active=!1,_t=Dc(s.history,_t.url,_t.signal)}let{shortCircuited:Z,matches:te,loaderData:Fe,errors:Ge}=await B(_t,Ee,mt,ye,vt.active,nt,le&&le.submission,le&&le.fetcherSubmission,le&&le.replace,le&&le.initialHydration===!0,wt,ze);Z||(je=null,C(Ee,{matches:te||mt,...iy(ze),loaderData:Fe,errors:Ge}))}async function F(ge,Ee,le,Ve,nt,mt,wt,vt={}){Me();let _t=dS(Ee,le);if(N({navigation:_t},{flushSync:vt.flushSync===!0}),mt){let Z=await Ct(Ve,Ee.pathname,ge.signal);if(Z.type==="aborted")return{shortCircuited:!0};if(Z.type==="error"){if(Z.partialMatches.length===0){let{matches:Fe,route:Ge}=Jm(d);return{matches:Fe,pendingActionResult:[Ge.id,{type:"error",error:Z.error}]}}let te=vo(Z.partialMatches).route.id;return{matches:Z.partialMatches,pendingActionResult:[te,{type:"error",error:Z.error}]}}else if(Z.matches)Ve=Z.matches;else{let{notFoundMatches:te,error:Fe,route:Ge}=tt(Ee.pathname);return{matches:te,pendingActionResult:[Ge.id,{type:"error",error:Fe}]}}}let ye,ze=bh(Ve,Ee);if(!ze.route.action&&!ze.route.lazy)ye={type:"error",error:en(405,{method:ge.method,pathname:Ee.pathname,routeId:ze.route.id})};else{let Z=Ec(o,c,ge,Ve,ze,wt?[]:n,nt),te=await fe(ge,Z,nt,null);if(ye=te[ze.route.id],!ye){for(let Fe of Ve)if(te[Fe.route.id]){ye=te[Fe.route.id];break}}if(ge.signal.aborted)return{shortCircuited:!0}}if(gl(ye)){let Z;return vt&&vt.replace!=null?Z=vt.replace:Z=sy(ye.response.headers.get("Location"),new URL(ge.url),h)===P.location.pathname+P.location.search,await ie(ge,ye,!0,{submission:le,replace:Z}),{shortCircuited:!0}}if(Lr(ye)){let Z=vo(Ve,ze.route.id);return(vt&&vt.replace)!==!0&&(ee="PUSH"),{matches:Ve,pendingActionResult:[Z.route.id,ye,ze.route.id]}}return{matches:Ve,pendingActionResult:[ze.route.id,ye]}}async function B(ge,Ee,le,Ve,nt,mt,wt,vt,_t,ye,ze,Z){let te=mt||Cg(Ee,wt),Fe=wt||vt||ly(te),Ge=!De&&!ye;if(nt){if(Ge){let Tt=J(Z);N({navigation:te,...Tt!==void 0?{actionData:Tt}:{}},{flushSync:ze})}let gt=await Ct(le,Ee.pathname,ge.signal);if(gt.type==="aborted")return{shortCircuited:!0};if(gt.type==="error"){if(gt.partialMatches.length===0){let{matches:qt,route:is}=Jm(d);return{matches:qt,loaderData:{},errors:{[is.id]:gt.error}}}let Tt=vo(gt.partialMatches).route.id;return{matches:gt.partialMatches,loaderData:{},errors:{[Tt]:gt.error}}}else if(gt.matches)le=gt.matches;else{let{error:Tt,notFoundMatches:qt,route:is}=tt(Ee.pathname);return{matches:qt,loaderData:{},errors:{[is.id]:Tt}}}}let ot=m||d,{dsMatches:ht,revalidatingFetchers:jt}=Q0(ge,Ve,o,c,s.history,P,le,Fe,Ee,ye?[]:n,ye===!0,ne,ue,ae,xe,Q,ot,h,s.patchRoutesOnNavigation!=null,Z);if(Se=++Ae,!s.dataStrategy&&!ht.some(gt=>gt.shouldLoad)&&!ht.some(gt=>gt.route.middleware&&gt.route.middleware.length>0)&&jt.length===0){let gt=At();return C(Ee,{matches:le,loaderData:{},errors:Z&&Lr(Z[1])?{[Z[0]]:Z[1].error}:null,...iy(Z),...gt?{fetchers:new Map(P.fetchers)}:{}},{flushSync:ze}),{shortCircuited:!0}}if(Ge){let gt={};if(!nt){gt.navigation=te;let Tt=J(Z);Tt!==void 0&&(gt.actionData=Tt)}jt.length>0&&(gt.fetchers=Y(jt)),N(gt,{flushSync:ze})}jt.forEach(gt=>{rt(gt.key),gt.controller&&se.set(gt.key,gt.controller)});let It=()=>jt.forEach(gt=>rt(gt.key));je&&je.signal.addEventListener("abort",It);let{loaderResults:Vt,fetcherResults:rs}=await me(ht,jt,ge,Ve);if(ge.signal.aborted)return{shortCircuited:!0};je&&je.signal.removeEventListener("abort",It),jt.forEach(gt=>se.delete(gt.key));let zt=eh(Vt);if(zt)return await ie(ge,zt.result,!0,{replace:_t}),{shortCircuited:!0};if(zt=eh(rs),zt)return Q.add(zt.key),await ie(ge,zt.result,!0,{replace:_t}),{shortCircuited:!0};let{loaderData:gs,errors:ns}=ry(P,le,Vt,Z,jt,rs);ye&&P.errors&&(ns={...P.errors,...ns});let xs=At(),js=xt(Se),Ot=xs||js||jt.length>0;return{matches:le,loaderData:gs,errors:ns,...Ot?{fetchers:new Map(P.fetchers)}:{}}}function J(ge){if(ge&&!Lr(ge[1]))return{[ge[0]]:ge[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function Y(ge){return ge.forEach(Ee=>{let le=P.fetchers.get(Ee.key),Ve=Zd(void 0,le?le.data:void 0);P.fetchers.set(Ee.key,Ve)}),new Map(P.fetchers)}async function T(ge,Ee,le,Ve){rt(ge);let nt=(Ve&&Ve.flushSync)===!0,mt=m||d,wt=Kg(P.location,P.matches,h,le,Ee,Ve?.relative),vt=bo(mt,wt,h),_t=ut(vt,mt,wt);if(_t.active&&_t.matches&&(vt=_t.matches),!vt){Ie(ge,Ee,en(404,{pathname:wt}),{flushSync:nt});return}let{path:ye,submission:ze,error:Z}=X0(!0,wt,Ve);if(Z){Ie(ge,Ee,Z,{flushSync:nt});return}let te=s.getContext?await s.getContext():new G0,Fe=(Ve&&Ve.preventScrollReset)===!0;if(ze&&wr(ze.formMethod)){await G(ge,Ee,ye,vt,te,_t.active,nt,Fe,ze);return}xe.set(ge,{routeId:Ee,path:ye}),await ce(ge,Ee,ye,vt,te,_t.active,nt,Fe,ze)}async function G(ge,Ee,le,Ve,nt,mt,wt,vt,_t){Me(),xe.delete(ge);let ye=P.fetchers.get(ge);Re(ge,uS(_t,ye),{flushSync:wt});let ze=new AbortController,Z=Dc(s.history,le,ze.signal,_t);if(mt){let Zt=await Ct(Ve,new URL(Z.url).pathname,Z.signal,ge);if(Zt.type==="aborted")return;if(Zt.type==="error"){Ie(ge,Ee,Zt.error,{flushSync:wt});return}else if(Zt.matches)Ve=Zt.matches;else{Ie(ge,Ee,en(404,{pathname:le}),{flushSync:wt});return}}let te=bh(Ve,le);if(!te.route.action&&!te.route.lazy){let Zt=en(405,{method:_t.formMethod,pathname:le,routeId:Ee});Ie(ge,Ee,Zt,{flushSync:wt});return}se.set(ge,ze);let Fe=Ae,Ge=Ec(o,c,Z,Ve,te,n,nt),ht=(await fe(Z,Ge,nt,ge))[te.route.id];if(Z.signal.aborted){se.get(ge)===ze&&se.delete(ge);return}if(ae.has(ge)){if(gl(ht)||Lr(ht)){Re(ge,pi(void 0));return}}else{if(gl(ht))if(se.delete(ge),Se>Fe){Re(ge,pi(void 0));return}else return Q.add(ge),Re(ge,Zd(_t)),ie(Z,ht,!1,{fetcherSubmission:_t,preventScrollReset:vt});if(Lr(ht)){Ie(ge,Ee,ht.error);return}}let jt=P.navigation.location||P.location,It=Dc(s.history,jt,ze.signal),Vt=m||d,rs=P.navigation.state!=="idle"?bo(Vt,P.navigation.location,h):P.matches;ms(rs,"Didn't find any matches after fetcher action");let zt=++Ae;$e.set(ge,zt);let gs=Zd(_t,ht.data);P.fetchers.set(ge,gs);let{dsMatches:ns,revalidatingFetchers:xs}=Q0(It,nt,o,c,s.history,P,rs,_t,jt,n,!1,ne,ue,ae,xe,Q,Vt,h,s.patchRoutesOnNavigation!=null,[te.route.id,ht]);xs.filter(Zt=>Zt.key!==ge).forEach(Zt=>{let Vs=Zt.key,Xn=P.fetchers.get(Vs),Aa=Zd(void 0,Xn?Xn.data:void 0);P.fetchers.set(Vs,Aa),rt(Vs),Zt.controller&&se.set(Vs,Zt.controller)}),N({fetchers:new Map(P.fetchers)});let js=()=>xs.forEach(Zt=>rt(Zt.key));ze.signal.addEventListener("abort",js);let{loaderResults:Ot,fetcherResults:gt}=await me(ns,xs,It,nt);if(ze.signal.aborted)return;if(ze.signal.removeEventListener("abort",js),$e.delete(ge),se.delete(ge),xs.forEach(Zt=>se.delete(Zt.key)),P.fetchers.has(ge)){let Zt=pi(ht.data);P.fetchers.set(ge,Zt)}let Tt=eh(Ot);if(Tt)return ie(It,Tt.result,!1,{preventScrollReset:vt});if(Tt=eh(gt),Tt)return Q.add(Tt.key),ie(It,Tt.result,!1,{preventScrollReset:vt});let{loaderData:qt,errors:is}=ry(P,rs,Ot,void 0,xs,gt);xt(zt),P.navigation.state==="loading"&&zt>Se?(ms(ee,"Expected pending action"),je&&je.abort(),C(P.navigation.location,{matches:rs,loaderData:qt,errors:is,fetchers:new Map(P.fetchers)})):(N({errors:is,loaderData:ny(P.loaderData,qt,rs,is),fetchers:new Map(P.fetchers)}),ne=!1)}async function ce(ge,Ee,le,Ve,nt,mt,wt,vt,_t){let ye=P.fetchers.get(ge);Re(ge,Zd(_t,ye?ye.data:void 0),{flushSync:wt});let ze=new AbortController,Z=Dc(s.history,le,ze.signal);if(mt){let jt=await Ct(Ve,new URL(Z.url).pathname,Z.signal,ge);if(jt.type==="aborted")return;if(jt.type==="error"){Ie(ge,Ee,jt.error,{flushSync:wt});return}else if(jt.matches)Ve=jt.matches;else{Ie(ge,Ee,en(404,{pathname:le}),{flushSync:wt});return}}let te=bh(Ve,le);se.set(ge,ze);let Fe=Ae,Ge=Ec(o,c,Z,Ve,te,n,nt),ht=(await fe(Z,Ge,nt,ge))[te.route.id];if(se.get(ge)===ze&&se.delete(ge),!Z.signal.aborted){if(ae.has(ge)){Re(ge,pi(void 0));return}if(gl(ht))if(Se>Fe){Re(ge,pi(void 0));return}else{Q.add(ge),await ie(Z,ht,!1,{preventScrollReset:vt});return}if(Lr(ht)){Ie(ge,Ee,ht.error);return}Re(ge,pi(ht.data))}}async function ie(ge,Ee,le,{submission:Ve,fetcherSubmission:nt,preventScrollReset:mt,replace:wt}={}){Ee.response.headers.has("X-Remix-Revalidate")&&(ne=!0);let vt=Ee.response.headers.get("Location");ms(vt,"Expected a Location header on the redirect Response"),vt=sy(vt,new URL(ge.url),h);let _t=vu(P.location,vt,{_isRedirect:!0});if(r){let Ge=!1;if(Ee.response.headers.has("X-Remix-Reload-Document"))Ge=!0;else if(xx(vt)){const ot=ev(vt,!0);Ge=ot.origin!==t.location.origin||an(ot.pathname,h)==null}if(Ge){wt?t.location.replace(vt):t.location.assign(vt);return}}je=null;let ye=wt===!0||Ee.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ze,formAction:Z,formEncType:te}=P.navigation;!Ve&&!nt&&ze&&Z&&te&&(Ve=ly(P.navigation));let Fe=Ve||nt;if($2.has(Ee.response.status)&&Fe&&wr(Fe.formMethod))await V(ye,_t,{submission:{...Fe,formAction:vt},preventScrollReset:mt||oe,enableViewTransition:le?de:void 0});else{let Ge=Cg(_t,Ve);await V(ye,_t,{overrideNavigation:Ge,fetcherSubmission:nt,preventScrollReset:mt||oe,enableViewTransition:le?de:void 0})}}async function fe(ge,Ee,le,Ve){let nt,mt={};try{nt=await J2(g,ge,Ee,Ve,le,!1)}catch(wt){return Ee.filter(vt=>vt.shouldLoad).forEach(vt=>{mt[vt.route.id]={type:"error",error:wt}}),mt}if(ge.signal.aborted)return mt;for(let[wt,vt]of Object.entries(nt))if(lS(vt)){let _t=vt.result;mt[wt]={type:"redirect",response:aS(_t,ge,wt,Ee,h)}}else mt[wt]=await sS(vt);return mt}async function me(ge,Ee,le,Ve){let nt=fe(le,ge,Ve,null),mt=Promise.all(Ee.map(async _t=>{if(_t.matches&&_t.match&&_t.request&&_t.controller){let ze=(await fe(_t.request,_t.matches,Ve,_t.key))[_t.match.route.id];return{[_t.key]:ze}}else return Promise.resolve({[_t.key]:{type:"error",error:en(404,{pathname:_t.path})}})})),wt=await nt,vt=(await mt).reduce((_t,ye)=>Object.assign(_t,ye),{});return{loaderResults:wt,fetcherResults:vt}}function Me(){ne=!0,xe.forEach((ge,Ee)=>{se.has(Ee)&&ue.add(Ee),rt(Ee)})}function Re(ge,Ee,le={}){P.fetchers.set(ge,Ee),N({fetchers:new Map(P.fetchers)},{flushSync:(le&&le.flushSync)===!0})}function Ie(ge,Ee,le,Ve={}){let nt=vo(P.matches,Ee);Xe(ge),N({errors:{[nt.route.id]:le},fetchers:new Map(P.fetchers)},{flushSync:(Ve&&Ve.flushSync)===!0})}function st(ge){return ve.set(ge,(ve.get(ge)||0)+1),ae.has(ge)&&ae.delete(ge),P.fetchers.get(ge)||H2}function He(ge,Ee){rt(ge,Ee?.reason),Re(ge,pi(null))}function Xe(ge){let Ee=P.fetchers.get(ge);se.has(ge)&&!(Ee&&Ee.state==="loading"&&$e.has(ge))&&rt(ge),xe.delete(ge),$e.delete(ge),Q.delete(ge),ae.delete(ge),ue.delete(ge),P.fetchers.delete(ge)}function et(ge){let Ee=(ve.get(ge)||0)-1;Ee<=0?(ve.delete(ge),ae.add(ge)):ve.set(ge,Ee),N({fetchers:new Map(P.fetchers)})}function rt(ge,Ee){let le=se.get(ge);le&&(le.abort(Ee),se.delete(ge))}function Qe(ge){for(let Ee of ge){let le=st(Ee),Ve=pi(le.data);P.fetchers.set(Ee,Ve)}}function At(){let ge=[],Ee=!1;for(let le of Q){let Ve=P.fetchers.get(le);ms(Ve,`Expected fetcher: ${le}`),Ve.state==="loading"&&(Q.delete(le),ge.push(le),Ee=!0)}return Qe(ge),Ee}function xt(ge){let Ee=[];for(let[le,Ve]of $e)if(Ve<ge){let nt=P.fetchers.get(le);ms(nt,`Expected fetcher: ${le}`),nt.state==="loading"&&(rt(le),$e.delete(le),Ee.push(le))}return Qe(Ee),Ee.length>0}function St(ge,Ee){let le=P.blockers.get(ge)||Qd;return Ce.get(ge)!==Ee&&Ce.set(ge,Ee),le}function Le(ge){P.blockers.delete(ge),Ce.delete(ge)}function Ye(ge,Ee){let le=P.blockers.get(ge)||Qd;ms(le.state==="unblocked"&&Ee.state==="blocked"||le.state==="blocked"&&Ee.state==="blocked"||le.state==="blocked"&&Ee.state==="proceeding"||le.state==="blocked"&&Ee.state==="unblocked"||le.state==="proceeding"&&Ee.state==="unblocked",`Invalid blocker state transition: ${le.state} -> ${Ee.state}`);let Ve=new Map(P.blockers);Ve.set(ge,Ee),N({blockers:Ve})}function _e({currentLocation:ge,nextLocation:Ee,historyAction:le}){if(Ce.size===0)return;Ce.size>1&&ra(!1,"A router only supports one blocker at a time");let Ve=Array.from(Ce.entries()),[nt,mt]=Ve[Ve.length-1],wt=P.blockers.get(nt);if(!(wt&&wt.state==="proceeding")&&mt({currentLocation:ge,nextLocation:Ee,historyAction:le}))return nt}function tt(ge){let Ee=en(404,{pathname:ge}),le=m||d,{matches:Ve,route:nt}=Jm(le);return{notFoundMatches:Ve,route:nt,error:Ee}}function ct(ge,Ee,le){if(_=ge,z=Ee,E=le||null,!I&&P.navigation===Sg){I=!0;let Ve=Ke(P.location,P.matches);Ve!=null&&N({restoreScrollPosition:Ve})}return()=>{_=null,z=null,E=null}}function it(ge,Ee){return E&&E(ge,Ee.map(Ve=>b2(Ve,P.loaderData)))||ge.key}function ke(ge,Ee){if(_&&z){let le=it(ge,Ee);_[le]=z()}}function Ke(ge,Ee){if(_){let le=it(ge,Ee),Ve=_[le];if(typeof Ve=="number")return Ve}return null}function ut(ge,Ee,le){if(s.patchRoutesOnNavigation)if(ge){if(Object.keys(ge[0].params).length>0)return{active:!0,matches:yh(Ee,le,h,!0)}}else return{active:!0,matches:yh(Ee,le,h,!0)||[]};return{active:!1,matches:null}}async function Ct(ge,Ee,le,Ve){if(!s.patchRoutesOnNavigation)return{type:"success",matches:ge};let nt=ge;for(;;){let mt=m==null,wt=m||d,vt=c;try{await s.patchRoutesOnNavigation({signal:le,path:Ee,matches:nt,fetcherKey:Ve,patch:(ze,Z)=>{le.aborted||Z0(ze,Z,wt,vt,o,!1)}})}catch(ze){return{type:"error",error:ze,partialMatches:nt}}finally{mt&&!le.aborted&&(d=[...d])}if(le.aborted)return{type:"aborted"};let _t=bo(wt,Ee,h);if(_t)return{type:"success",matches:_t};let ye=yh(wt,Ee,h,!0);if(!ye||nt.length===ye.length&&nt.every((ze,Z)=>ze.route.id===ye[Z].route.id))return{type:"success",matches:null};nt=ye}}function Et(ge){c={},m=ju(ge,o,void 0,c)}function Bt(ge,Ee,le=!1){let Ve=m==null;Z0(ge,Ee,m||d,c,o,le),Ve&&(d=[...d],N({}))}return M={get basename(){return h},get future(){return y},get state(){return P},get routes(){return d},get window(){return t},initialize:L,subscribe:x,enableScrollRestoration:ct,navigate:A,fetch:T,revalidate:H,createHref:ge=>s.history.createHref(ge),encodeLocation:ge=>s.history.encodeLocation(ge),getFetcher:st,resetFetcher:He,deleteFetcher:et,dispose:f,getBlocker:St,deleteBlocker:Le,patchRoutes:Bt,_internalFetchControllers:se,_internalSetRoutes:Et,_internalSetStateDoNotUseOrYouWillBreakYourApp(ge){N(ge)}},M}function Y2(s){return s!=null&&("formData"in s&&s.formData!=null||"body"in s&&s.body!==void 0)}function Kg(s,t,r,n,o,c){let d,m;if(o){d=[];for(let g of t)if(d.push(g),g.route.id===o){m=g;break}}else d=t,m=t[t.length-1];let h=gx(n||".",fx(d),an(s.pathname,r)||s.pathname,c==="path");if(n==null&&(h.search=s.search,h.hash=s.hash),(n==null||n===""||n===".")&&m){let g=yx(h.search);if(m.route.index&&!g)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!m.route.index&&g){let y=new URLSearchParams(h.search),w=y.getAll("index");y.delete("index"),w.filter(_=>_).forEach(_=>y.append("index",_));let S=y.toString();h.search=S?`?${S}`:""}}return r!=="/"&&(h.pathname=M2({basename:r,pathname:h.pathname})),_o(h)}function X0(s,t,r){if(!r||!Y2(r))return{path:t};if(r.formMethod&&!cS(r.formMethod))return{path:t,error:en(405,{method:r.formMethod})};let n=()=>({path:t,error:en(400,{type:"invalid-body"})}),c=(r.formMethod||"get").toUpperCase(),d=mv(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!wr(c))return n();let w=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((S,[_,E])=>`${S}${_}=${E}
`,""):String(r.body);return{path:t,submission:{formMethod:c,formAction:d,formEncType:r.formEncType,formData:void 0,json:void 0,text:w}}}else if(r.formEncType==="application/json"){if(!wr(c))return n();try{let w=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:c,formAction:d,formEncType:r.formEncType,formData:void 0,json:w,text:void 0}}}catch{return n()}}}ms(typeof FormData=="function","FormData is not available in this environment");let m,h;if(r.formData)m=Wg(r.formData),h=r.formData;else if(r.body instanceof FormData)m=Wg(r.body),h=r.body;else if(r.body instanceof URLSearchParams)m=r.body,h=ay(m);else if(r.body==null)m=new URLSearchParams,h=new FormData;else try{m=new URLSearchParams(r.body),h=ay(m)}catch{return n()}let g={formMethod:c,formAction:d,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(wr(g.formMethod))return{path:t,submission:g};let y=Si(t);return s&&y.search&&yx(y.search)&&m.append("index",""),y.search=`?${m}`,{path:_o(y),submission:g}}function Q0(s,t,r,n,o,c,d,m,h,g,y,w,S,_,E,z,I,U,q,O){let R=O?Lr(O[1])?O[1].error:O[1].data:void 0,M=o.createURL(c.location),P=o.createURL(h),ee;if(y&&c.errors){let De=Object.keys(c.errors)[0];ee=d.findIndex(ne=>ne.route.id===De)}else if(O&&Lr(O[1])){let De=O[0];ee=d.findIndex(ne=>ne.route.id===De)-1}let oe=O?O[1].statusCode:void 0,je=oe&&oe>=400,de={currentUrl:M,currentParams:c.matches[0]?.params||{},nextUrl:P,nextParams:d[0].params,...m,actionResult:R,actionStatus:oe},re=d.map((De,ne)=>{let{route:ue}=De,se=null;if(ee!=null&&ne>ee?se=!1:ue.lazy?se=!0:px(ue)?y?se=Yg(ue,c.loaderData,c.errors):G2(c.loaderData,c.matches[ne],De)&&(se=!0):se=!1,se!==null)return Gg(r,n,s,De,g,t,se);let Ae=je?!1:w||M.pathname+M.search===P.pathname+P.search||M.search!==P.search||W2(c.matches[ne],De),Se={...de,defaultShouldRevalidate:Ae},$e=Th(De,Se);return Gg(r,n,s,De,g,t,$e,Se)}),Te=[];return E.forEach((De,ne)=>{if(y||!d.some(ve=>ve.route.id===De.routeId)||_.has(ne))return;let ue=c.fetchers.get(ne),se=ue&&ue.state!=="idle"&&ue.data===void 0,Ae=bo(I,De.path,U);if(!Ae){if(q&&se)return;Te.push({key:ne,routeId:De.routeId,path:De.path,matches:null,match:null,request:null,controller:null});return}if(z.has(ne))return;let Se=bh(Ae,De.path),$e=new AbortController,Q=Dc(o,De.path,$e.signal),xe=null;if(S.has(ne))S.delete(ne),xe=Ec(r,n,Q,Ae,Se,g,t);else if(se)w&&(xe=Ec(r,n,Q,Ae,Se,g,t));else{let ve={...de,defaultShouldRevalidate:je?!1:w};Th(Se,ve)&&(xe=Ec(r,n,Q,Ae,Se,g,t,ve))}xe&&Te.push({key:ne,routeId:De.routeId,path:De.path,matches:xe,match:Se,request:Q,controller:$e})}),{dsMatches:re,revalidatingFetchers:Te}}function px(s){return s.loader!=null||s.middleware!=null&&s.middleware.length>0}function Yg(s,t,r){if(s.lazy)return!0;if(!px(s))return!1;let n=t!=null&&s.id in t,o=r!=null&&r[s.id]!==void 0;return!n&&o?!1:typeof s.loader=="function"&&s.loader.hydrate===!0?!0:!n&&!o}function G2(s,t,r){let n=!t||r.route.id!==t.route.id,o=!s.hasOwnProperty(r.route.id);return n||o}function W2(s,t){let r=s.route.path;return s.pathname!==t.pathname||r!=null&&r.endsWith("*")&&s.params["*"]!==t.params["*"]}function Th(s,t){if(s.route.shouldRevalidate){let r=s.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function Z0(s,t,r,n,o,c){let d;if(s){let g=n[s];ms(g,`No route found to patch children into: routeId = ${s}`),g.children||(g.children=[]),d=g.children}else d=r;let m=[],h=[];if(t.forEach(g=>{let y=d.find(w=>ov(g,w));y?h.push({existingRoute:y,newRoute:g}):m.push(g)}),m.length>0){let g=ju(m,o,[s||"_","patch",String(d?.length||"0")],n);d.push(...g)}if(c&&h.length>0)for(let g=0;g<h.length;g++){let{existingRoute:y,newRoute:w}=h[g],S=y,[_]=ju([w],o,[],{},!0);Object.assign(S,{element:_.element?_.element:S.element,errorElement:_.errorElement?_.errorElement:S.errorElement,hydrateFallbackElement:_.hydrateFallbackElement?_.hydrateFallbackElement:S.hydrateFallbackElement})}}function ov(s,t){return"id"in s&&"id"in t&&s.id===t.id?!0:s.index===t.index&&s.path===t.path&&s.caseSensitive===t.caseSensitive?(!s.children||s.children.length===0)&&(!t.children||t.children.length===0)?!0:s.children.every((r,n)=>t.children?.some(o=>ov(r,o))):!1}var J0=new WeakMap,lv=({key:s,route:t,manifest:r,mapRouteProperties:n})=>{let o=r[t.id];if(ms(o,"No route found in manifest"),!o.lazy||typeof o.lazy!="object")return;let c=o.lazy[s];if(!c)return;let d=J0.get(o);d||(d={},J0.set(o,d));let m=d[s];if(m)return m;let h=(async()=>{let g=g2(s),w=o[s]!==void 0&&s!=="hasErrorBoundary";if(g)ra(!g,"Route property "+s+" is not a supported lazy route property. This property will be ignored."),d[s]=Promise.resolve();else if(w)ra(!1,`Route "${o.id}" has a static property "${s}" defined. The lazy property will be ignored.`);else{let S=await c();S!=null&&(Object.assign(o,{[s]:S}),Object.assign(o,n(o)))}typeof o.lazy=="object"&&(o.lazy[s]=void 0,Object.values(o.lazy).every(S=>S===void 0)&&(o.lazy=void 0))})();return d[s]=h,h},ey=new WeakMap;function X2(s,t,r,n,o){let c=r[s.id];if(ms(c,"No route found in manifest"),!s.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof s.lazy=="function"){let y=ey.get(c);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let w=(async()=>{ms(typeof s.lazy=="function","No lazy route function found");let S=await s.lazy(),_={};for(let E in S){let z=S[E];if(z===void 0)continue;let I=p2(E),q=c[E]!==void 0&&E!=="hasErrorBoundary";I?ra(!I,"Route property "+E+" is not a supported property to be returned from a lazy route function. This property will be ignored."):q?ra(!q,`Route "${c.id}" has a static property "${E}" defined but its lazy function is also returning a value for this property. The lazy route property "${E}" will be ignored.`):_[E]=z}Object.assign(c,_),Object.assign(c,{...n(c),lazy:void 0})})();return ey.set(c,w),w.catch(()=>{}),{lazyRoutePromise:w,lazyHandlerPromise:w}}let d=Object.keys(s.lazy),m=[],h;for(let y of d){if(o&&o.includes(y))continue;let w=lv({key:y,route:s,manifest:r,mapRouteProperties:n});w&&(m.push(w),y===t&&(h=w))}let g=m.length>0?Promise.all(m).then(()=>{}):void 0;return g?.catch(()=>{}),h?.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:h}}async function ty(s){let t=s.matches.filter(o=>o.shouldLoad),r={};return(await Promise.all(t.map(o=>o.resolve()))).forEach((o,c)=>{r[t[c].route.id]=o}),r}async function Q2(s){return s.matches.some(t=>t.route.middleware)?cv(s,()=>ty(s)):ty(s)}function cv(s,t){return Z2(s,t,n=>n,iS,r);function r(n,o,c){if(c)return Promise.resolve(Object.assign(c.value,{[o]:{type:"error",result:n}}));{let{matches:d}=s,m=Math.min(Math.max(d.findIndex(g=>g.route.id===o),0),Math.max(d.findIndex(g=>g.unstable_shouldCallHandler()),0)),h=vo(d,d[m].route.id).route.id;return Promise.resolve({[h]:{type:"error",result:n}})}}}async function Z2(s,t,r,n,o){let{matches:c,request:d,params:m,context:h}=s,g=c.flatMap(w=>w.route.middleware?w.route.middleware.map(S=>[w.route.id,S]):[]);return await dv({request:d,params:m,context:h},g,t,r,n,o)}async function dv(s,t,r,n,o,c,d=0){let{request:m}=s;if(m.signal.aborted)throw m.signal.reason??new Error(`Request aborted: ${m.method} ${m.url}`);let h=t[d];if(!h)return await r();let[g,y]=h,w,S=async()=>{if(w)throw new Error("You may only call `next()` once per middleware");try{return w={value:await dv(s,t,r,n,o,c,d+1)},w.value}catch(_){return w={value:await c(_,g,w)},w.value}};try{let _=await y(s,S),E=_!=null?n(_):void 0;return o(E)?E:w?E??w.value:(w={value:await S()},w.value)}catch(_){return await c(_,g,w)}}function uv(s,t,r,n,o){let c=lv({key:"middleware",route:n.route,manifest:t,mapRouteProperties:s}),d=X2(n.route,wr(r.method)?"action":"loader",t,s,o);return{middleware:c,route:d.lazyRoutePromise,handler:d.lazyHandlerPromise}}function Gg(s,t,r,n,o,c,d,m=null){let h=!1,g=uv(s,t,r,n,o);return{...n,_lazyPromises:g,shouldLoad:d,unstable_shouldRevalidateArgs:m,unstable_shouldCallHandler(y){return h=!0,m?typeof y=="boolean"?Th(n,{...m,defaultShouldRevalidate:y}):Th(n,m):d},resolve(y){return h||d||y&&!wr(r.method)&&(n.route.lazy||n.route.loader)?eS({request:r,match:n,lazyHandlerPromise:g?.handler,lazyRoutePromise:g?.route,handlerOverride:y,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function Ec(s,t,r,n,o,c,d,m=null){return n.map(h=>h.route.id!==o.route.id?{...h,shouldLoad:!1,unstable_shouldRevalidateArgs:m,unstable_shouldCallHandler:()=>!1,_lazyPromises:uv(s,t,r,h,c),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Gg(s,t,r,h,c,d,!0,m))}async function J2(s,t,r,n,o,c){r.some(g=>g._lazyPromises?.middleware)&&await Promise.all(r.map(g=>g._lazyPromises?.middleware));let d={request:t,params:r[0].params,context:o,matches:r},h=await s({...d,fetcherKey:n,runClientMiddleware:g=>{let y=d;return cv(y,()=>g({...y,fetcherKey:n,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(r.flatMap(g=>[g._lazyPromises?.handler,g._lazyPromises?.route]))}catch{}return h}async function eS({request:s,match:t,lazyHandlerPromise:r,lazyRoutePromise:n,handlerOverride:o,scopedContext:c}){let d,m,h=wr(s.method),g=h?"action":"loader",y=w=>{let S,_=new Promise((I,U)=>S=U);m=()=>S(),s.signal.addEventListener("abort",m);let E=I=>typeof w!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${g}" [routeId: ${t.route.id}]`)):w({request:s,params:t.params,context:c},...I!==void 0?[I]:[]),z=(async()=>{try{return{type:"data",result:await(o?o(U=>E(U)):E())}}catch(I){return{type:"error",result:I}}})();return Promise.race([z,_])};try{let w=h?t.route.action:t.route.loader;if(r||n)if(w){let S,[_]=await Promise.all([y(w).catch(E=>{S=E}),r,n]);if(S!==void 0)throw S;d=_}else{await r;let S=h?t.route.action:t.route.loader;if(S)[d]=await Promise.all([y(S),n]);else if(g==="action"){let _=new URL(s.url),E=_.pathname+_.search;throw en(405,{method:s.method,pathname:E,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(w)d=await y(w);else{let S=new URL(s.url),_=S.pathname+S.search;throw en(404,{pathname:_})}}catch(w){return{type:"error",result:w}}finally{m&&s.signal.removeEventListener("abort",m)}return d}async function tS(s){let t=s.headers.get("Content-Type");return t&&/\bapplication\/json\b/.test(t)?s.body==null?null:s.json():s.text()}async function sS(s){let{result:t,type:r}=s;if(hv(t)){let n;try{n=await tS(t)}catch(o){return{type:"error",error:o}}return r==="error"?{type:"error",error:new Eh(t.status,t.statusText,n),statusCode:t.status,headers:t.headers}:{type:"data",data:n,statusCode:t.status,headers:t.headers}}return r==="error"?oy(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new Eh(t.init?.status||500,void 0,t.data),statusCode:wu(t)?t.status:void 0,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:wu(t)?t.status:void 0}:oy(t)?{type:"data",data:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function aS(s,t,r,n,o){let c=s.headers.get("Location");if(ms(c,"Redirects returned/thrown from loaders/actions must have a Location header"),!xx(c)){let d=n.slice(0,n.findIndex(m=>m.route.id===r)+1);c=Kg(new URL(t.url),d,o,c),s.headers.set("Location",c)}return s}function sy(s,t,r){if(xx(s)){let n=s,o=n.startsWith("//")?new URL(t.protocol+n):new URL(n),c=an(o.pathname,r)!=null;if(o.origin===t.origin&&c)return o.pathname+o.search+o.hash}return s}function Dc(s,t,r,n){let o=s.createURL(mv(t)).toString(),c={signal:r};if(n&&wr(n.formMethod)){let{formMethod:d,formEncType:m}=n;c.method=d.toUpperCase(),m==="application/json"?(c.headers=new Headers({"Content-Type":m}),c.body=JSON.stringify(n.json)):m==="text/plain"?c.body=n.text:m==="application/x-www-form-urlencoded"&&n.formData?c.body=Wg(n.formData):c.body=n.formData}return new Request(o,c)}function Wg(s){let t=new URLSearchParams;for(let[r,n]of s.entries())t.append(r,typeof n=="string"?n:n.name);return t}function ay(s){let t=new FormData;for(let[r,n]of s.entries())t.append(r,n);return t}function rS(s,t,r,n=!1,o=!1){let c={},d=null,m,h=!1,g={},y=r&&Lr(r[1])?r[1].error:void 0;return s.forEach(w=>{if(!(w.route.id in t))return;let S=w.route.id,_=t[S];if(ms(!gl(_),"Cannot handle redirect results in processLoaderData"),Lr(_)){let E=_.error;if(y!==void 0&&(E=y,y=void 0),d=d||{},o)d[S]=E;else{let z=vo(s,S);d[z.route.id]==null&&(d[z.route.id]=E)}n||(c[S]=iv),h||(h=!0,m=wu(_.error)?_.error.status:500),_.headers&&(g[S]=_.headers)}else c[S]=_.data,_.statusCode&&_.statusCode!==200&&!h&&(m=_.statusCode),_.headers&&(g[S]=_.headers)}),y!==void 0&&r&&(d={[r[0]]:y},r[2]&&(c[r[2]]=void 0)),{loaderData:c,errors:d,statusCode:m||200,loaderHeaders:g}}function ry(s,t,r,n,o,c){let{loaderData:d,errors:m}=rS(t,r,n);return o.filter(h=>!h.matches||h.matches.some(g=>g.shouldLoad)).forEach(h=>{let{key:g,match:y,controller:w}=h;if(w&&w.signal.aborted)return;let S=c[g];if(ms(S,"Did not find corresponding fetcher result"),Lr(S)){let _=vo(s.matches,y?.route.id);m&&m[_.route.id]||(m={...m,[_.route.id]:S.error}),s.fetchers.delete(g)}else if(gl(S))ms(!1,"Unhandled fetcher revalidation redirect");else{let _=pi(S.data);s.fetchers.set(g,_)}}),{loaderData:d,errors:m}}function ny(s,t,r,n){let o=Object.entries(t).filter(([,c])=>c!==iv).reduce((c,[d,m])=>(c[d]=m,c),{});for(let c of r){let d=c.route.id;if(!t.hasOwnProperty(d)&&s.hasOwnProperty(d)&&c.route.loader&&(o[d]=s[d]),n&&n.hasOwnProperty(d))break}return o}function iy(s){return s?Lr(s[1])?{actionData:{}}:{actionData:{[s[0]]:s[1].data}}:{}}function vo(s,t){return(t?s.slice(0,s.findIndex(n=>n.route.id===t)+1):[...s]).reverse().find(n=>n.route.hasErrorBoundary===!0)||s[0]}function Jm(s){let t=s.length===1?s[0]:s.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function en(s,{pathname:t,routeId:r,method:n,type:o,message:c}={}){let d="Unknown Server Error",m="Unknown @remix-run/router error";return s===400?(d="Bad Request",n&&t&&r?m=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:o==="invalid-body"&&(m="Unable to encode submission body")):s===403?(d="Forbidden",m=`Route "${r}" does not match URL "${t}"`):s===404?(d="Not Found",m=`No route matches URL "${t}"`):s===405&&(d="Method Not Allowed",n&&t&&r?m=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(m=`Invalid request method "${n.toUpperCase()}"`)),new Eh(s||500,d,new Error(m),!0)}function eh(s){let t=Object.entries(s);for(let r=t.length-1;r>=0;r--){let[n,o]=t[r];if(gl(o))return{key:n,result:o}}}function mv(s){let t=typeof s=="string"?Si(s):s;return _o({...t,hash:""})}function nS(s,t){return s.pathname!==t.pathname||s.search!==t.search?!1:s.hash===""?t.hash!=="":s.hash===t.hash?!0:t.hash!==""}function iS(s){return s!=null&&typeof s=="object"&&Object.entries(s).every(([t,r])=>typeof t=="string"&&oS(r))}function oS(s){return s!=null&&typeof s=="object"&&"type"in s&&"result"in s&&(s.type==="data"||s.type==="error")}function lS(s){return hv(s.result)&&U2.has(s.result.status)}function Lr(s){return s.type==="error"}function gl(s){return(s&&s.type)==="redirect"}function oy(s){return typeof s=="object"&&s!=null&&"type"in s&&"data"in s&&"init"in s&&s.type==="DataWithResponseInit"}function hv(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.headers=="object"&&typeof s.body<"u"}function cS(s){return B2.has(s.toUpperCase())}function wr(s){return F2.has(s.toUpperCase())}function yx(s){return new URLSearchParams(s).getAll("index").some(t=>t==="")}function bh(s,t){let r=typeof t=="string"?Si(t).search:t.search;if(s[s.length-1].route.index&&yx(r||""))return s[s.length-1];let n=av(s);return n[n.length-1]}function ly(s){let{formMethod:t,formAction:r,formEncType:n,text:o,formData:c,json:d}=s;if(!(!t||!r||!n)){if(o!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:o};if(c!=null)return{formMethod:t,formAction:r,formEncType:n,formData:c,json:void 0,text:void 0};if(d!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:d,text:void 0}}}function Cg(s,t){return t?{state:"loading",location:s,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:s,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function dS(s,t){return{state:"submitting",location:s,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Zd(s,t){return s?{state:"loading",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function uS(s,t){return{state:"submitting",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:t?t.data:void 0}}function pi(s){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}function mS(s,t){try{let r=s.sessionStorage.getItem(nv);if(r){let n=JSON.parse(r);for(let[o,c]of Object.entries(n||{}))c&&Array.isArray(c)&&t.set(o,new Set(c||[]))}}catch{}}function hS(s,t){if(t.size>0){let r={};for(let[n,o]of t)r[n]=[...o];try{s.sessionStorage.setItem(nv,JSON.stringify(r))}catch(n){ra(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function fS(){let s,t,r=new Promise((n,o)=>{s=async c=>{n(c);try{await r}catch{}},t=async c=>{o(c);try{await r}catch{}}});return{promise:r,resolve:s,reject:t}}var Nl=v.createContext(null);Nl.displayName="DataRouter";var Mu=v.createContext(null);Mu.displayName="DataRouterState";v.createContext(!1);var bx=v.createContext({isTransitioning:!1});bx.displayName="ViewTransition";var fv=v.createContext(new Map);fv.displayName="Fetchers";var gS=v.createContext(null);gS.displayName="Await";var Gn=v.createContext(null);Gn.displayName="Navigation";var qh=v.createContext(null);qh.displayName="Location";var wn=v.createContext({outlet:null,matches:[],isDataRoute:!1});wn.displayName="Route";var vx=v.createContext(null);vx.displayName="RouteError";function xS(s,{relative:t}={}){ms(Ou(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(Gn),{hash:o,pathname:c,search:d}=Ru(s,{relative:t}),m=c;return r!=="/"&&(m=c==="/"?r:Kn([r,c])),n.createHref({pathname:m,search:d,hash:o})}function Ou(){return v.useContext(qh)!=null}function nn(){return ms(Ou(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(qh).location}var gv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xv(s){v.useContext(Gn).static||v.useLayoutEffect(s)}function ya(){let{isDataRoute:s}=v.useContext(wn);return s?MS():pS()}function pS(){ms(Ou(),"useNavigate() may be used only in the context of a <Router> component.");let s=v.useContext(Nl),{basename:t,navigator:r}=v.useContext(Gn),{matches:n}=v.useContext(wn),{pathname:o}=nn(),c=JSON.stringify(fx(n)),d=v.useRef(!1);return xv(()=>{d.current=!0}),v.useCallback((h,g={})=>{if(ra(d.current,gv),!d.current)return;if(typeof h=="number"){r.go(h);return}let y=gx(h,JSON.parse(c),o,g.relative==="path");s==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:Kn([t,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[t,r,c,o,s])}var pv=v.createContext(null);function yS(){return v.useContext(pv)}function bS(s){let t=v.useContext(wn).outlet;return v.useMemo(()=>t&&v.createElement(pv.Provider,{value:s},t),[t,s])}function vS(){let{matches:s}=v.useContext(wn),t=s[s.length-1];return t?t.params:{}}function Ru(s,{relative:t}={}){let{matches:r}=v.useContext(wn),{pathname:n}=nn(),o=JSON.stringify(fx(r));return v.useMemo(()=>gx(s,JSON.parse(o),n,t==="path"),[s,o,n,t])}function jS(s,t,r,n,o){ms(Ou(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=v.useContext(Gn),{matches:d}=v.useContext(wn),m=d[d.length-1],h=m?m.params:{},g=m?m.pathname:"/",y=m?m.pathnameBase:"/",w=m&&m.route;{let q=w&&w.path||"";yv(g,!w||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let S=nn(),_;_=S;let E=_.pathname||"/",z=E;if(y!=="/"){let q=y.replace(/^\//,"").split("/");z="/"+E.replace(/^\//,"").split("/").slice(q.length).join("/")}let I=bo(s,{pathname:z});return ra(w||I!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),ra(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),kS(I&&I.map(q=>Object.assign({},q,{params:Object.assign({},h,q.params),pathname:Kn([y,c.encodeLocation?c.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?y:Kn([y,c.encodeLocation?c.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),d,r,n,o)}function wS(){let s=TS(),t=wu(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n},c={padding:"2px 4px",backgroundColor:n},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:c},"ErrorBoundary")," or"," ",v.createElement("code",{style:c},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:o},r):null,d)}var NS=v.createElement(wS,null),SS=class extends v.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){this.props.unstable_onError?this.props.unstable_onError(s,t):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?v.createElement(wn.Provider,{value:this.props.routeContext},v.createElement(vx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function CS({routeContext:s,match:t,children:r}){let n=v.useContext(Nl);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(wn.Provider,{value:s},r)}function kS(s,t=[],r=null,n=null,o=null){if(s==null){if(!r)return null;if(r.errors)s=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let c=s,d=r?.errors;if(d!=null){let g=c.findIndex(y=>y.route.id&&d?.[y.route.id]!==void 0);ms(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,g+1))}let m=!1,h=-1;if(r)for(let g=0;g<c.length;g++){let y=c[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=g),y.route.id){let{loaderData:w,errors:S}=r,_=y.route.loader&&!w.hasOwnProperty(y.route.id)&&(!S||S[y.route.id]===void 0);if(y.route.lazy||_){m=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((g,y,w)=>{let S,_=!1,E=null,z=null;r&&(S=d&&y.route.id?d[y.route.id]:void 0,E=y.route.errorElement||NS,m&&(h<0&&w===0?(yv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,z=null):h===w&&(_=!0,z=y.route.hydrateFallbackElement||null)));let I=t.concat(c.slice(0,w+1)),U=()=>{let q;return S?q=E:_?q=z:y.route.Component?q=v.createElement(y.route.Component,null):y.route.element?q=y.route.element:q=g,v.createElement(CS,{match:y,routeContext:{outlet:g,matches:I,isDataRoute:r!=null},children:q})};return r&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?v.createElement(SS,{location:r.location,revalidation:r.revalidation,component:E,error:S,children:U(),routeContext:{outlet:null,matches:I,isDataRoute:!0},unstable_onError:n}):U()},null)}function jx(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _S(s){let t=v.useContext(Nl);return ms(t,jx(s)),t}function AS(s){let t=v.useContext(Mu);return ms(t,jx(s)),t}function DS(s){let t=v.useContext(wn);return ms(t,jx(s)),t}function wx(s){let t=DS(s),r=t.matches[t.matches.length-1];return ms(r.route.id,`${s} can only be used on routes that contain a unique "id"`),r.route.id}function ES(){return wx("useRouteId")}function TS(){let s=v.useContext(vx),t=AS("useRouteError"),r=wx("useRouteError");return s!==void 0?s:t.errors?.[r]}function MS(){let{router:s}=_S("useNavigate"),t=wx("useNavigate"),r=v.useRef(!1);return xv(()=>{r.current=!0}),v.useCallback(async(o,c={})=>{ra(r.current,gv),r.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:t,...c}))},[s,t])}var cy={};function yv(s,t,r){!t&&!cy[s]&&(cy[s]=!0,ra(!1,r))}var dy={};function uy(s,t){!s&&!dy[t]&&(dy[t]=!0,console.warn(t))}function OS(s){let t={hasErrorBoundary:s.hasErrorBoundary||s.ErrorBoundary!=null||s.errorElement!=null};return s.Component&&(s.element&&ra(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:v.createElement(s.Component),Component:void 0})),s.HydrateFallback&&(s.hydrateFallbackElement&&ra(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:v.createElement(s.HydrateFallback),HydrateFallback:void 0})),s.ErrorBoundary&&(s.errorElement&&ra(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:v.createElement(s.ErrorBoundary),ErrorBoundary:void 0})),t}var RS=["HydrateFallback","hydrateFallbackElement"],IS=class{constructor(){this.status="pending",this.promise=new Promise((s,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",s(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function zS({router:s,flushSync:t,unstable_onError:r}){let[n,o]=v.useState(s.state),[c,d]=v.useState(),[m,h]=v.useState({isTransitioning:!1}),[g,y]=v.useState(),[w,S]=v.useState(),[_,E]=v.useState(),z=v.useRef(new Map),I=v.useCallback(M=>{o(P=>(M.errors&&r&&Object.entries(M.errors).forEach(([ee,oe])=>{P.errors?.[ee]!==oe&&r(oe)}),M))},[r]),U=v.useCallback((M,{deletedFetchers:P,flushSync:ee,viewTransitionOpts:oe})=>{M.fetchers.forEach((de,re)=>{de.data!==void 0&&z.current.set(re,de.data)}),P.forEach(de=>z.current.delete(de)),uy(ee===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let je=s.window!=null&&s.window.document!=null&&typeof s.window.document.startViewTransition=="function";if(uy(oe==null||je,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!oe||!je){t&&ee?t(()=>I(M)):v.startTransition(()=>I(M));return}if(t&&ee){t(()=>{w&&(g&&g.resolve(),w.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:oe.currentLocation,nextLocation:oe.nextLocation})});let de=s.window.document.startViewTransition(()=>{t(()=>I(M))});de.finished.finally(()=>{t(()=>{y(void 0),S(void 0),d(void 0),h({isTransitioning:!1})})}),t(()=>S(de));return}w?(g&&g.resolve(),w.skipTransition(),E({state:M,currentLocation:oe.currentLocation,nextLocation:oe.nextLocation})):(d(M),h({isTransitioning:!0,flushSync:!1,currentLocation:oe.currentLocation,nextLocation:oe.nextLocation}))},[s.window,t,w,g,I]);v.useLayoutEffect(()=>s.subscribe(U),[s,U]),v.useEffect(()=>{m.isTransitioning&&!m.flushSync&&y(new IS)},[m]),v.useEffect(()=>{if(g&&c&&s.window){let M=c,P=g.promise,ee=s.window.document.startViewTransition(async()=>{v.startTransition(()=>I(M)),await P});ee.finished.finally(()=>{y(void 0),S(void 0),d(void 0),h({isTransitioning:!1})}),S(ee)}},[c,g,s.window,I]),v.useEffect(()=>{g&&c&&n.location.key===c.location.key&&g.resolve()},[g,w,n.location,c]),v.useEffect(()=>{!m.isTransitioning&&_&&(d(_.state),h({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}),E(void 0))},[m.isTransitioning,_]);let q=v.useMemo(()=>({createHref:s.createHref,encodeLocation:s.encodeLocation,go:M=>s.navigate(M),push:(M,P,ee)=>s.navigate(M,{state:P,preventScrollReset:ee?.preventScrollReset}),replace:(M,P,ee)=>s.navigate(M,{replace:!0,state:P,preventScrollReset:ee?.preventScrollReset})}),[s]),O=s.basename||"/",R=v.useMemo(()=>({router:s,navigator:q,static:!1,basename:O,unstable_onError:r}),[s,q,O,r]);return v.createElement(v.Fragment,null,v.createElement(Nl.Provider,{value:R},v.createElement(Mu.Provider,{value:n},v.createElement(fv.Provider,{value:z.current},v.createElement(bx.Provider,{value:m},v.createElement(LS,{basename:O,location:n.location,navigationType:n.historyAction,navigator:q},v.createElement(PS,{routes:s.routes,future:s.future,state:n,unstable_onError:r})))))),null)}var PS=v.memo(FS);function FS({routes:s,future:t,state:r,unstable_onError:n}){return jS(s,void 0,r,n,t)}function bv(s){return bS(s.context)}function LS({basename:s="/",children:t=null,location:r,navigationType:n="POP",navigator:o,static:c=!1}){ms(!Ou(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),m=v.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof r=="string"&&(r=Si(r));let{pathname:h="/",search:g="",hash:y="",state:w=null,key:S="default"}=r,_=v.useMemo(()=>{let E=an(h,d);return E==null?null:{location:{pathname:E,search:g,hash:y,state:w,key:S},navigationType:n}},[d,h,g,y,w,S,n]);return ra(_!=null,`<Router basename="${d}"> is not able to match the URL "${h}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:v.createElement(Gn.Provider,{value:m},v.createElement(qh.Provider,{children:t,value:_}))}var vh="get",jh="application/x-www-form-urlencoded";function Kh(s){return s!=null&&typeof s.tagName=="string"}function BS(s){return Kh(s)&&s.tagName.toLowerCase()==="button"}function US(s){return Kh(s)&&s.tagName.toLowerCase()==="form"}function $S(s){return Kh(s)&&s.tagName.toLowerCase()==="input"}function HS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function VS(s,t){return s.button===0&&(!t||t==="_self")&&!HS(s)}var th=null;function qS(){if(th===null)try{new FormData(document.createElement("form"),0),th=!1}catch{th=!0}return th}var KS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kg(s){return s!=null&&!KS.has(s)?(ra(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jh}"`),null):s}function YS(s,t){let r,n,o,c,d;if(US(s)){let m=s.getAttribute("action");n=m?an(m,t):null,r=s.getAttribute("method")||vh,o=kg(s.getAttribute("enctype"))||jh,c=new FormData(s)}else if(BS(s)||$S(s)&&(s.type==="submit"||s.type==="image")){let m=s.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=s.getAttribute("formaction")||m.getAttribute("action");if(n=h?an(h,t):null,r=s.getAttribute("formmethod")||m.getAttribute("method")||vh,o=kg(s.getAttribute("formenctype"))||kg(m.getAttribute("enctype"))||jh,c=new FormData(m,s),!qS()){let{name:g,type:y,value:w}=s;if(y==="image"){let S=g?`${g}.`:"";c.append(`${S}x`,"0"),c.append(`${S}y`,"0")}else g&&c.append(g,w)}}else{if(Kh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=vh,n=null,o=jh,d=s}return c&&o==="text/plain"&&(d=c,c=void 0),{action:n,method:r.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Nx(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function GS(s,t,r){let n=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&an(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function WS(s,t){if(s.id in t)return t[s.id];try{let r=await import(s.module);return t[s.id]=r,r}catch(r){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function XS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function QS(s,t,r){let n=await Promise.all(s.map(async o=>{let c=t.routes[o.route.id];if(c){let d=await WS(c,r);return d.links?d.links():[]}return[]}));return tC(n.flat(1).filter(XS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function my(s,t,r,n,o,c){let d=(h,g)=>r[g]?h.route.id!==r[g].route.id:!0,m=(h,g)=>r[g].pathname!==h.pathname||r[g].route.path?.endsWith("*")&&r[g].params["*"]!==h.params["*"];return c==="assets"?t.filter((h,g)=>d(h,g)||m(h,g)):c==="data"?t.filter((h,g)=>{let y=n.routes[h.route.id];if(!y||!y.hasLoader)return!1;if(d(h,g)||m(h,g))return!0;if(h.route.shouldRevalidate){let w=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function ZS(s,t,{includeHydrateFallback:r}={}){return JS(s.map(n=>{let o=t.routes[n.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function JS(s){return[...new Set(s)]}function eC(s){let t={},r=Object.keys(s).sort();for(let n of r)t[n]=s[n];return t}function tC(s,t){let r=new Set;return new Set(t),s.reduce((n,o)=>{let c=JSON.stringify(eC(o));return r.has(c)||(r.add(c),n.push({key:c,link:o})),n},[])}function vv(){let s=v.useContext(Nl);return Nx(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function sC(){let s=v.useContext(Mu);return Nx(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Sx=v.createContext(void 0);Sx.displayName="FrameworkContext";function jv(){let s=v.useContext(Sx);return Nx(s,"You must render this element inside a <HydratedRouter> element"),s}function aC(s,t){let r=v.useContext(Sx),[n,o]=v.useState(!1),[c,d]=v.useState(!1),{onFocus:m,onBlur:h,onMouseEnter:g,onMouseLeave:y,onTouchStart:w}=t,S=v.useRef(null);v.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let z=U=>{U.forEach(q=>{d(q.isIntersecting)})},I=new IntersectionObserver(z,{threshold:.5});return S.current&&I.observe(S.current),()=>{I.disconnect()}}},[s]),v.useEffect(()=>{if(n){let z=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(z)}}},[n]);let _=()=>{o(!0)},E=()=>{o(!1),d(!1)};return r?s!=="intent"?[c,S,{}]:[c,S,{onFocus:Jd(m,_),onBlur:Jd(h,E),onMouseEnter:Jd(g,_),onMouseLeave:Jd(y,E),onTouchStart:Jd(w,_)}]:[!1,S,{}]}function Jd(s,t){return r=>{s&&s(r),r.defaultPrevented||t(r)}}function rC({page:s,...t}){let{router:r}=vv(),n=v.useMemo(()=>bo(r.routes,s,r.basename),[r.routes,s,r.basename]);return n?v.createElement(iC,{page:s,matches:n,...t}):null}function nC(s){let{manifest:t,routeModules:r}=jv(),[n,o]=v.useState([]);return v.useEffect(()=>{let c=!1;return QS(s,t,r).then(d=>{c||o(d)}),()=>{c=!0}},[s,t,r]),n}function iC({page:s,matches:t,...r}){let n=nn(),{manifest:o,routeModules:c}=jv(),{basename:d}=vv(),{loaderData:m,matches:h}=sC(),g=v.useMemo(()=>my(s,t,h,o,n,"data"),[s,t,h,o,n]),y=v.useMemo(()=>my(s,t,h,o,n,"assets"),[s,t,h,o,n]),w=v.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let E=new Set,z=!1;if(t.forEach(U=>{let q=o.routes[U.route.id];!q||!q.hasLoader||(!g.some(O=>O.route.id===U.route.id)&&U.route.id in m&&c[U.route.id]?.shouldRevalidate||q.hasClientLoader?z=!0:E.add(U.route.id))}),E.size===0)return[];let I=GS(s,d,"data");return z&&E.size>0&&I.searchParams.set("_routes",t.filter(U=>E.has(U.route.id)).map(U=>U.route.id).join(",")),[I.pathname+I.search]},[d,m,n,o,g,t,s,c]),S=v.useMemo(()=>ZS(y,o),[y,o]),_=nC(y);return v.createElement(v.Fragment,null,w.map(E=>v.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...r})),S.map(E=>v.createElement("link",{key:E,rel:"modulepreload",href:E,...r})),_.map(({key:E,link:z})=>v.createElement("link",{key:E,nonce:r.nonce,...z})))}function oC(...s){return t=>{s.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var wv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wv&&(window.__reactRouterVersion="7.9.2")}catch{}function lC(s,t){return K2({basename:t?.basename,getContext:t?.getContext,future:t?.future,history:u2({window:t?.window}),hydrationData:cC(),routes:s,mapRouteProperties:OS,hydrationRouteProperties:RS,dataStrategy:t?.dataStrategy,patchRoutesOnNavigation:t?.patchRoutesOnNavigation,window:t?.window}).initialize()}function cC(){let s=window?.__staticRouterHydrationData;return s&&s.errors&&(s={...s,errors:dC(s.errors)}),s}function dC(s){if(!s)return null;let t=Object.entries(s),r={};for(let[n,o]of t)if(o&&o.__type==="RouteErrorResponse")r[n]=new Eh(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let c=window[o.__subType];if(typeof c=="function")try{let d=new c(o.message);d.stack="",r[n]=d}catch{}}if(r[n]==null){let c=new Error(o.message);c.stack="",r[n]=c}}else r[n]=o;return r}var Nv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cx=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:o,reloadDocument:c,replace:d,state:m,target:h,to:g,preventScrollReset:y,viewTransition:w,...S},_){let{basename:E}=v.useContext(Gn),z=typeof g=="string"&&Nv.test(g),I,U=!1;if(typeof g=="string"&&z&&(I=g,wv))try{let je=new URL(window.location.href),de=g.startsWith("//")?new URL(je.protocol+g):new URL(g),re=an(de.pathname,E);de.origin===je.origin&&re!=null?g=re+de.search+de.hash:U=!0}catch{ra(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=xS(g,{relative:o}),[O,R,M]=aC(n,S),P=hC(g,{replace:d,state:m,target:h,preventScrollReset:y,relative:o,viewTransition:w});function ee(je){t&&t(je),je.defaultPrevented||P(je)}let oe=v.createElement("a",{...S,...M,href:I||q,onClick:U||c?t:ee,ref:oC(_,R),target:h,"data-discover":!z&&r==="render"?"true":void 0});return O&&!z?v.createElement(v.Fragment,null,oe,v.createElement(rC,{page:q})):oe});Cx.displayName="Link";var Sv=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:o=!1,style:c,to:d,viewTransition:m,children:h,...g},y){let w=Ru(d,{relative:g.relative}),S=nn(),_=v.useContext(Mu),{navigator:E,basename:z}=v.useContext(Gn),I=_!=null&&yC(w)&&m===!0,U=E.encodeLocation?E.encodeLocation(w).pathname:w.pathname,q=S.pathname,O=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;r||(q=q.toLowerCase(),O=O?O.toLowerCase():null,U=U.toLowerCase()),O&&z&&(O=an(O,z)||O);const R=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let M=q===U||!o&&q.startsWith(U)&&q.charAt(R)==="/",P=O!=null&&(O===U||!o&&O.startsWith(U)&&O.charAt(U.length)==="/"),ee={isActive:M,isPending:P,isTransitioning:I},oe=M?t:void 0,je;typeof n=="function"?je=n(ee):je=[n,M?"active":null,P?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let de=typeof c=="function"?c(ee):c;return v.createElement(Cx,{...g,"aria-current":oe,className:je,ref:y,style:de,to:d,viewTransition:m},typeof h=="function"?h(ee):h)});Sv.displayName="NavLink";var uC=v.forwardRef(({discover:s="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:o,state:c,method:d=vh,action:m,onSubmit:h,relative:g,preventScrollReset:y,viewTransition:w,...S},_)=>{let E=xC(),z=pC(m,{relative:g}),I=d.toLowerCase()==="get"?"get":"post",U=typeof m=="string"&&Nv.test(m),q=O=>{if(h&&h(O),O.defaultPrevented)return;O.preventDefault();let R=O.nativeEvent.submitter,M=R?.getAttribute("formmethod")||d;E(R||O.currentTarget,{fetcherKey:t,method:M,navigate:r,replace:o,state:c,relative:g,preventScrollReset:y,viewTransition:w})};return v.createElement("form",{ref:_,method:I,action:z,onSubmit:n?h:q,...S,"data-discover":!U&&s==="render"?"true":void 0})});uC.displayName="Form";function mC(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cv(s){let t=v.useContext(Nl);return ms(t,mC(s)),t}function hC(s,{target:t,replace:r,state:n,preventScrollReset:o,relative:c,viewTransition:d}={}){let m=ya(),h=nn(),g=Ru(s,{relative:c});return v.useCallback(y=>{if(VS(y,t)){y.preventDefault();let w=r!==void 0?r:_o(h)===_o(g);m(s,{replace:w,state:n,preventScrollReset:o,relative:c,viewTransition:d})}},[h,m,g,r,n,t,s,o,c,d])}var fC=0,gC=()=>`__${String(++fC)}__`;function xC(){let{router:s}=Cv("useSubmit"),{basename:t}=v.useContext(Gn),r=ES();return v.useCallback(async(n,o={})=>{let{action:c,method:d,encType:m,formData:h,body:g}=YS(n,t);if(o.navigate===!1){let y=o.fetcherKey||gC();await s.fetch(y,r,o.action||c,{preventScrollReset:o.preventScrollReset,formData:h,body:g,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await s.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:h,body:g,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,t,r])}function pC(s,{relative:t}={}){let{basename:r}=v.useContext(Gn),n=v.useContext(wn);ms(n,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),c={...Ru(s||".",{relative:t})},d=nn();if(s==null){c.search=d.search;let m=new URLSearchParams(c.search),h=m.getAll("index");if(h.some(y=>y==="")){m.delete("index"),h.filter(w=>w).forEach(w=>m.append("index",w));let y=m.toString();c.search=y?`?${y}`:""}}return(!s||s===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:Kn([r,c.pathname])),_o(c)}function yC(s,{relative:t}={}){let r=v.useContext(bx);ms(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Cv("useViewTransitionState"),o=Ru(s,{relative:t});if(!r.isTransitioning)return!1;let c=an(r.currentLocation.pathname,n)||r.currentLocation.pathname,d=an(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Dh(o.pathname,d)!=null||Dh(o.pathname,c)!=null}var bC=Bb();function vC(s){return v.createElement(zS,{flushSync:bC.flushSync,...s})}const kv=v.createContext(),yo={default:{background:"#003C58",logo:"#003C58",logo_border:"#002a3f",keypad:"#003C58",keypad_end:"#005a9c",keypadBorder:"#005a9c",buttonHover:"#005a9c",loginBg:"#005a9c",primary:"#003C58",primaryLight:"#005a9c",primaryExtraLight:"#005a9c1b",dashboardBackground:"#f0f8ff"},blue:{background:"#032D81",logo:"#032D81",logo_border:"#022a6b",keypad:"#032D81",keypad_end:"#4f8cff",keypadBorder:"#4f8cff",buttonHover:"#4f8cff",loginBg:"#4f8cff",primary:"#032D81",primaryLight:"#4f8cff",primaryExtraLight:"#4f8cff1b",dashboardBackground:"#f0f4ff"},green:{background:"#136F63",logo:"#136F63",logo_border:"#0f5a4f",keypad:"#136F63",keypad_end:"#1a8a7a",keypadBorder:"#1a8a7a",buttonHover:"#1a8a7a",loginBg:"#1a8a7a",primary:"#136F63",primaryLight:"#1a8a7a",primaryExtraLight:"#1a8a7a1b",dashboardBackground:"#f0fff4"},black:{background:"#1a1a1a",logo:"#1a1a1a",logo_border:"#0d0d0d",keypad:"#1a1a1a",keypad_end:"#333333",keypadBorder:"#333333",buttonHover:"#333333",loginBg:"#333333",primary:"#1a1a1a",primaryLight:"#333333",primaryExtraLight:"#3333331b",dashboardBackground:"#f5f5f5"}},jC=({children:s})=>{const t=()=>{const h=localStorage.getItem("posTheme");return h&&yo[h]?h:"default"},[r,n]=v.useState(t),[o,c]=v.useState(yo[t()]);v.useEffect(()=>{const h=localStorage.getItem("posTheme");h&&yo[h]&&h!==r&&(n(h),c(yo[h]))},[]),v.useEffect(()=>{const h=document.documentElement;h.style.setProperty("--color-primary",o.primary),h.style.setProperty("--color-primaryLight",o.primaryLight),h.style.setProperty("--color-primaryExtraLight",o.primaryExtraLight),h.style.setProperty("--color-dashboardBackground",o.dashboardBackground)},[o]),v.useEffect(()=>{const h=document.documentElement,g=yo[t()];h.style.setProperty("--color-primary",g.primary),h.style.setProperty("--color-primaryLight",g.primaryLight),h.style.setProperty("--color-primaryExtraLight",g.primaryExtraLight),h.style.setProperty("--color-dashboardBackground",g.dashboardBackground)},[]);const m={currentTheme:r,themeColors:o,changeTheme:h=>{yo[h]&&(n(h),c(yo[h]),localStorage.setItem("posTheme",h),window.dispatchEvent(new CustomEvent("themeChanged",{detail:h})))},themes:yo};return e.jsx(kv.Provider,{value:m,children:s})},Ur=()=>{const s=v.useContext(kv);if(!s)throw new Error("useTheme must be used within a ThemeProvider");return s},wC=()=>{console.log("POSLogin component rendering...");const[s,t]=v.useState(""),[r,n]=v.useState(""),[o,c]=v.useState(!1),[d,m]=v.useState(""),[h,g]=v.useState(new Date),[y,w]=v.useState(!1),S=ya(),[_,E]=v.useState(!1),{themeColors:z,changeTheme:I,currentTheme:U}=Ur(),O=(()=>{switch(U){case"default":return{screenBg:"#003C58",logoBg:"#176B87",logoText:"white",logoSubText:"white",mainContentShadow:"0 8px 32px rgba(0,0,0,0.10), 0 0 10px rgba(0, 188, 212, 0.6)",mainContentBorder:"2px solid var(--primary-light, #00bcd4)",leftSectionBg:"#176B87",rightActionButtonsBg:"#176B87",roleButtonBg:"#003C58",roleButtonText:"white",roleButtonBorder:"2px solid rgba(255, 255, 255, 0.3)",roleButtonSelectedBg:"white",roleButtonSelectedText:"#003C58"};case"blue":return{screenBg:"white",logoBg:"#032C7E",logoText:"white",logoSubText:"black",mainContentShadow:"0 8px 32px rgba(0,0,0,0.10), 0 0 20px rgba(3, 45, 129, 0.3)",mainContentBorder:"2px solid #032d81",leftSectionBg:"#032C7E",rightActionButtonsBg:"#032C7E",roleButtonBg:"white",roleButtonText:"#032D81",roleButtonBorder:"var(--primary-light, #00bcd4)",roleButtonSelectedBg:"#032D81",roleButtonSelectedText:"white"};case"green":return{screenBg:"#136F63",logoBg:"#34A0A4",logoText:"white",logoSubText:"white",mainContentShadow:"0 8px 32px rgba(0,0,0,0.10), 0 0 10px rgba(0, 188, 212, 0.6)",mainContentBorder:"2px solid var(--primary-light, #00bcd4)",leftSectionBg:"#34A0A4",rightActionButtonsBg:"#136F63",roleButtonBg:"#136F63",roleButtonText:"white",roleButtonBorder:"var(--logo-box-bg, #176B87)",roleButtonSelectedBg:"white",roleButtonSelectedText:"#34A0A4"};case"black":return{screenBg:"white",logoBg:"#000000",logoText:"white",logoSubText:"black",mainContentShadow:"0 8px 32px rgba(0,0,0,0.10), 0 0 20px rgba(0, 0, 0, 0.3)",mainContentBorder:"2.5px solid #e0e0e0",leftSectionBg:"#000000",rightActionButtonsBg:"#000000",roleButtonBg:"white",roleButtonText:"#000000",roleButtonBorder:"1px solid #e0e0e0",roleButtonSelectedBg:"#000000",roleButtonSelectedText:"white"};default:return{screenBg:"#003C58",logoBg:"#176B87",logoText:"white",logoSubText:"white",mainContentShadow:"0 8px 32px rgba(0,0,0,0.10), 0 0 10px rgba(0, 188, 212, 0.6)",mainContentBorder:"2px solid var(--primary-light, #00bcd4)",leftSectionBg:"#176B87",rightActionButtonsBg:"#176B87",roleButtonBg:"#003C58",roleButtonText:"white",roleButtonBorder:"2px solid rgba(255, 255, 255, 0.3)",roleButtonSelectedBg:"white",roleButtonSelectedText:"#003C58"}}})(),R=[{id:"Admin",name:"Admin",icon:Vb},{id:"Manager",name:"Manager",icon:bl},{id:"Cashier",name:"Cashier",icon:Fc,subtitle:"Multiple Users"},{id:"Chef",name:"Chef",icon:Bh},{id:"Waiter",name:"Waiter",icon:Lc}];v.useEffect(()=>{const $e=Q=>{_||(Q.key>="0"&&Q.key<="9"?P(Q.key):Q.key==="Backspace"?oe():Q.key==="Delete"?ee():Q.key==="Enter"&&je())};return window.addEventListener("keydown",$e),()=>window.removeEventListener("keydown",$e)},[r,s,_]),v.useEffect(()=>{const $e=()=>{g(new Date)};$e();const Q=setInterval($e,6e4);return()=>clearInterval(Q)},[]);const M=$e=>{t($e),m("")},P=$e=>{if(!s){m("⚠ Please select a role first.");return}r.length<4&&(n(Q=>Q+$e),m(""))},ee=()=>{n("")},oe=()=>{n($e=>$e.slice(0,-1))},je=async()=>{if(!s){m("⚠ Please select a role first.");return}if(r.length<4){m("⚠ PIN must be 4 digits.");return}if(s&&r.length>=4){w(!0);const $e=new Promise(Q=>setTimeout(Q,1e3));try{console.log("Login attempt:",{role:s,pin:r});const Q=window.myAPI?.loginEmployee(r,s),[xe]=await Promise.all([Q,$e]);if(xe.success){console.log("Login successful:",xe.data);try{const ve=await window.myAPI?.createEmployeeLogin(xe.data.id);ve.success?(console.log("Employee login session created:",ve),localStorage.setItem("currentEmployee",JSON.stringify({...xe.data,loginSessionId:ve.login_id,loginTime:ve.login_time}))):(console.warn("Failed to create login session:",ve.message),localStorage.setItem("currentEmployee",JSON.stringify(xe.data)))}catch(ve){console.error("Error creating login session:",ve),localStorage.setItem("currentEmployee",JSON.stringify(xe.data))}try{window.appSettings&&typeof window.appSettings.reloadSettings=="function"&&await window.appSettings.reloadSettings()}catch(ve){console.warn("Could not reload app settings on login:",ve)}S("/dashboard")}else m("⚠ Invalid PIN or role. Please try again."),n("")}catch(Q){console.error("Login error:",Q),m("⚠ Login failed. Please try again."),n("")}finally{w(!1)}}},de=()=>{c(!o)},re=()=>{const $e=R.find(Q=>Q.id===s);return $e?$e.name:""},Te=$e=>$e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),De=()=>{E(!0)},ne=()=>{E(!1)},ue=async $e=>{try{if($e){const Q=await window.myAPI?.updateEmployeeLogout($e);Q.success?console.log("Employee logout session updated:",Q):console.warn("Failed to update logout session:",Q.message)}}catch(Q){console.error("Error updating logout session:",Q)}};Sr.useEffect(()=>(window.handleEmployeeLogout=ue,()=>{delete window.handleEmployeeLogout}),[]);const se=()=>{const $e=Array.from({length:4},(Q,xe)=>{const ve=xe<r.length,ae=r[xe]||"",Ce=!ve;return e.jsx("div",{className:`w-10 h-10 border-[1px] rounded-lg flex items-center justify-center text-lg font-semibold transition-all duration-200 ${Ce?"border-primary bg-[#E0F7FA]":"border-primary bg-[#E0F7FA] text-black"} shadow-[inset_0_2px_4px_rgba(0,0,0,0.1)]`,style:{boxShadow:"0 0 10px rgba(0, 188, 212, 0.6)"},children:ve?o?ae:"●":""},xe)});return e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[$e,e.jsx("button",{onClick:de,disabled:!s,className:`ml-1 w-10 h-10 flex items-center justify-center rounded-lg transition-all duration-200 bg-primary hover:shadow-lg ${s?"text-[#032D3A] hover:text-white hover:bg-[#032D3A] cursor-pointer":"text-[#032D3A] cursor-not-allowed"}`,children:o?e.jsx(_h,{className:"w-6 h-6 text-white"}):e.jsx(vn,{className:"w-6 h-6 text-white"})})]})},Ae=({number:$e,onClick:Q,style:xe})=>e.jsx("button",{onClick:()=>Q($e),disabled:!s,className:"rounded-xl py-1 px-0 shadow-lg cursor-pointer hover:shadow-xl font-bold text-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",style:{backgroundColor:"white",color:O.rightActionButtonsBg,border:`2px solid ${O.rightActionButtonsBg}`},children:$e}),Se=({onClick:$e,className:Q="",children:xe,variant:ve="default",disabled:ae=!1})=>{const Ce="py-1 px-0 rounded-lg text-sm font-semibold transition-all duration-200 border-[1.5px] flex items-center justify-center shadow-md hover:shadow-lg active:shadow-inner active:translate-y-0.5",pe={backgroundColor:O.rightActionButtonsBg,color:"white",border:s?"none":`2px solid ${O.rightActionButtonsBg}`};return e.jsx("button",{onClick:$e,disabled:ae,className:`${Ce} ${Q}`,style:pe,children:xe})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full h-screen relative flex flex-col items-center justify-center px-6 py-3 transition-colors duration-300",style:{backgroundColor:O.screenBg},children:[e.jsx("button",{onClick:()=>window.loginWindowControls?.close(),className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center text-gray-600 hover:text-red-600 hover:bg-red-50 transition-colors duration-200 rounded-full border border-gray-300 hover:border-red-300",title:"Close Application",children:e.jsx(Nt,{className:"w-5 h-5"})}),e.jsx("div",{className:"py-4 rounded-t-xl",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center mt-4",children:[e.jsxs("div",{className:"w-24 h-20 rounded-2xl border-2 flex flex-col items-center justify-center mb-3 shadow-md shadow-black",style:{backgroundColor:O.logoBg,borderColor:O.logoBg},children:[e.jsx("span",{className:"font-bold text-5xl",style:{color:O.logoText},children:"G"}),e.jsx("span",{className:"font-medium text-base",style:{color:O.logoText},children:"POS"})]}),e.jsx("p",{className:"text-lg font-bold",style:{color:O.logoSubText},children:"Welcome to GPOS – Smart & Simplified Point of Sale"})]})}),e.jsxs("div",{className:"w-full h-[500px] max-w-4xl flex transform perspective-1000 rounded-3xl overflow-hidden",style:{boxShadow:O.mainContentShadow,border:O.mainContentBorder},children:[e.jsxs("div",{className:"w-1/2 p-6",style:{backgroundColor:O.leftSectionBg},children:[e.jsx("h2",{className:"text-2xl mt-2 font-bold text-white mb-6 text-center",children:"Select Your Role"}),e.jsx("div",{className:"grid h-[380px] grid-cols-2 gap-4",children:R.map($e=>{const Q=$e.icon,xe=s===$e.id;return e.jsxs("button",{onClick:()=>M($e.id),className:`
                        ${xe?"scale-[1.04] z-[1]":"hover:bg-transparent hover:border-white"}
                         rounded-xl transition-all duration-300 
                        flex flex-col items-center justify-center
                        hover:cursor-pointer transform hover:-translate-y-1 hover:scale-105 active:translate-y-0 
                        border-[2.5px]
                      `,style:{transformStyle:"preserve-3d",background:xe?O.roleButtonSelectedBg:O.roleButtonBg,border:O.roleButtonBorder,boxShadow:xe?`0 0 16px 2px ${O.roleButtonBorder}, 0 0 0 4px rgba(52, 160, 164, 0.12)`:"0 4px 6px -1px rgba(0,0,0,0.2), 0 2px 4px -1px rgba(0,0,0,0.1)"},children:[e.jsx(Q,{className:"w-8 h-8 mb-1",style:{color:xe?O.roleButtonSelectedText:O.roleButtonText}}),e.jsx("span",{className:"text-xl font-bold",style:{color:xe?O.roleButtonSelectedText:O.roleButtonText},children:$e.name}),$e.subtitle&&e.jsx("span",{className:"text-xs opacity-70",style:{color:xe?O.roleButtonSelectedText:O.roleButtonText},children:$e.subtitle})]},$e.id)})})]}),e.jsxs("div",{className:"w-1/2 bg-[#ffffff] text-black p-6",style:{boxShadow:"0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04)"},children:[s&&e.jsx("div",{className:"mb-2 p-2] rounded-md border border-[#4a7ca3] shadow-inner max-w-xs mx-auto",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 text-black",children:[e.jsx(ox,{className:"w-3 h-3"}),e.jsxs("span",{className:"text-sm font-medium",children:["Logging in as: ",re()]})]})}),e.jsx("h2",{className:"text-2xl mt-0 font-semibold text-black mb-2 text-center transform transition-transform hover:scale-105",children:"Enter PIN To Continue"}),e.jsxs("div",{className:"mb-4",children:[se(),e.jsxs("p",{className:"text-center text-xs text-gray-400 mt-2",children:[r.length,"/4 digits"]})]}),d&&e.jsxs("div",{className:"mb-6 mx-10 flex items-center justify-center gap-2 bg-white text-red-500 p-2 rounded-lg border border-red-500",children:[e.jsx(lx,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:d})]}),e.jsxs("div",{className:"max-w-xs mx-auto mb-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-3 text-white cursor-pointer",children:[1,2,3,4,5,6,7,8,9].map($e=>e.jsx(Ae,{number:$e,onClick:P,style:{start:z.keypad,end:z.keypad_end}},$e))}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(Se,{onClick:ee,variant:"clear",disabled:!s,children:"Clear"}),e.jsx(Ae,{number:0,onClick:P,style:{start:z.keypad,end:z.keypad_end}}),e.jsx(Se,{onClick:oe,variant:"backspace",disabled:!s,children:e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 20 20",fill:"none",children:e.jsx("path",{d:"M7.5 10H15M5.5 5L2 10L5.5 15M15 5V15",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),e.jsx("div",{className:"mb-2 flex justify-center",children:e.jsx("button",{onClick:je,disabled:!s||r.length<4||y,className:"w-[80%] cursor-pointer text-white py-3 rounded-lg text-base font-semibold transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl hover:-translate-y-1 active:translate-y-0 active:shadow-inner",style:{backgroundColor:O.rightActionButtonsBg,borderColor:O.rightActionButtonsBg},children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Logging in..."]}):"Login"})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:De,className:" underline font-semibold cursor-pointer text-sm transition-colors hover:-translate-y-0.5",style:{color:O.rightActionButtonsBg},children:"Forgot PIN?"})}),e.jsx("div",{className:"text-center mt-1",children:e.jsxs("div",{className:"text-lg flex items-start justify-start ml-10 font-semibold text-gray-600",children:[e.jsx("span",{className:"inline-flex items-center justify-center rounded-full mr-2",style:{backgroundColor:O.rightActionButtonsBg,width:24,height:24},children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 10.5L9 14.5L15 7.5",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("p",{className:"text-[16px]",children:["Time In logged at ",Te(h)]})]})})]})]})]}),e.jsx(l2,{isOpen:_,onClose:ne})]})},ul=s=>{try{const t=window.location.protocol==="file:"||window.location.href.includes("app.asar")||process?.resourcesPath;if(console.log(`[soundUtils] Getting audio path for: ${s}`),console.log(`[soundUtils] isBuiltApp: ${t}`),console.log(`[soundUtils] window.location.protocol: ${window.location.protocol}`),console.log(`[soundUtils] window.location.href: ${window.location.href}`),t){const r=`./assets/${s}`;return console.log(`✅ [soundUtils] Using built app path: ${r}`),r}else{const r=`./src/assets/${s}`;return console.log(`✅ [soundUtils] Using dev path: ${r}`),r}}catch(t){return console.error(`[soundUtils] Failed to resolve audio path: ${s}`,t),`./src/assets/${s}`}},NC=(s,t={})=>{try{const r=ul(s),n=new Audio(r);return t.volume!==void 0&&(n.volume=t.volume),n.play().catch(o=>{console.log(`Audio play failed for ${s}:`,o)})}catch(r){console.log(`Audio creation failed for ${s}:`,r)}},_v=(s={})=>NC("buttonPressBeep.mp3",s),kx=()=>({playButtonSound:v.useCallback(()=>{try{const t=window.appSettings?.current;if(!(t?.sound_alert===1||t?.sound_alert===!0))return;_v()}catch(t){console.log("Button sound creation failed:",t)}},[])}),Av=({onComplete:s})=>{const[t,r]=v.useState(""),[n,o]=v.useState(!1),[c,d]=v.useState(!1),[m,h]=v.useState(""),[g,y]=v.useState(new Date().toLocaleTimeString()),[w,S]=v.useState(!1),[_,E]=v.useState(""),[z,I]=v.useState(!0);v.useEffect(()=>{const ee=localStorage.getItem("currentEmployee");if(ee)try{const oe=JSON.parse(ee),je=`${oe.fname||""} ${oe.lname||""}`.trim();r(je||"User")}catch(oe){console.error("Error parsing employee data:",oe),r("User")}else r("User")},[]),v.useEffect(()=>{(async()=>{try{const oe=await window.myAPI?.getAllRegisters(),je=oe&&oe.success&&oe.data&&oe.data.length>0?{success:!0,data:oe.data[0]}:{success:!0,data:null};if(console.log("CheckInPopup - allRegistersResult:",oe),console.log("CheckInPopup - lastRegisterResult:",je),je&&je.success&&je.data){const de=je.data;console.log("CheckInPopup - lastRegister:",de),console.log("CheckInPopup - isclosed value:",de.isclosed,"type:",typeof de.isclosed),de.isclosed===1?(console.log("CheckInPopup - Register is closed, showing welcome screen"),o(!0)):(console.log("CheckInPopup - Register is open, going directly to sales"),s(!0))}else console.log("CheckInPopup - No register found, showing welcome screen"),o(!0)}catch(oe){console.error("Error checking register status:",oe),o(!0)}finally{I(!1)}})()},[s]),v.useEffect(()=>{const ee=setInterval(()=>{y(new Date().toLocaleTimeString())},6e4);return()=>clearInterval(ee)},[]);const U=ee=>{h(oe=>ee==="."&&oe.includes(".")?oe:oe+ee)},q=()=>{h(ee=>ee.slice(0,-1))},O=()=>{o(!1),d(!0)},R=()=>{s(!1)},M=async()=>{if(m===""||m===null||m===void 0){E("Please enter opening cash amount");return}const ee=parseFloat(m);if(isNaN(ee)||ee<0){E("Please enter a valid opening cash amount (0 or greater)");return}S(!0),E("");try{const oe=JSON.parse(localStorage.getItem("currentEmployee"));if(!oe||!oe.id){E("No employee data found. Please login again."),S(!1);return}const je={startamount:parseFloat(m)||0,employee_id:oe.id};console.log("Creating register with data:",je);const de=await window.myAPI?.createRegister(je);de&&de.success?(console.log("Register created successfully:",de.data),localStorage.setItem("currentRegister",JSON.stringify(de.data)),s(!0)):(E(de?.message||"Failed to create register"),S(!1))}catch(oe){console.error("Error creating register:",oe),E("Network error. Please try again."),S(!1)}},P=()=>{s(!1)};return z?e.jsx("div",{className:"fixed inset-0 bg-[#0000009a] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-xl w-full max-w-md transform transition-all duration-300",children:[e.jsx("div",{className:"bg-[#032D3A] p-4 flex justify-center items-center",children:e.jsx("h3",{className:"text-white font-bold text-lg",children:"Checking Register Status"})}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-[#032D3A] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Please wait..."})]})]})}):e.jsx("div",{className:"fixed inset-0 bg-[#0000009a] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-xl w-full max-w-md transform transition-all duration-300",children:[e.jsx("div",{className:"bg-[#032D3A] p-4 flex justify-center items-center",children:e.jsx("h3",{className:"text-white font-bold text-lg",children:n?"Welcome":"Register Cash Drawer"})}),e.jsx("div",{className:"p-6",children:n?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(la,{className:"w-16 h-16 text-blue-500"})}),e.jsxs("h4",{className:"text-xl font-semibold text-gray-800 mb-2",children:["Welcome, ",t,"!"]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Do you want to start register?"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:R,className:"bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-6 rounded-lg transition-colors duration-200",children:"No"}),e.jsx("button",{onClick:O,className:"bg-[#032D3A] hover:bg-[#2d5a87] text-white font-medium py-2 px-6 rounded-lg transition-colors duration-200",children:"Yes"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Enter Opening Cash Amount"}),e.jsx("div",{className:"bg-gray-100 p-4 rounded-lg text-2xl font-mono text-right",children:m||"0.00"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[[1,2,3,4,5,6,7,8,9,".",0].map(ee=>e.jsx("button",{onClick:()=>U(ee.toString()),className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-3 rounded-lg transition-colors",children:ee},ee)),e.jsx("button",{onClick:q,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-3 rounded-lg transition-colors",children:"⌫"})]}),_&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg text-sm",children:_}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:P,disabled:w,className:"flex-1 bg-red-500 hover:bg-red-600 text-white font-medium py-2 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:M,disabled:m===""||m===null||m===void 0||w,className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg font-medium transition-colors ${m!==""&&m!==null&&m!==void 0&&!w?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ux,{size:18}),"Save"]})})]})]})})]})})},SC=({navigationItems:s})=>{const[t,r]=v.useState(!1),[n,o]=v.useState(!1),{isOpen:c,toggleSidebar:d,isMobileMenuOpen:m,toggleMobileMenu:h,windowWidth:g}=v.useContext(Ax),{themeColors:y}=Ur(),{playButtonSound:w}=kx(),S=ya(),_=async I=>{if(w(),I.path==="/dashboard/sales")try{const U=await window.myAPI?.getAllRegisters(),q=U&&U.success&&U.data&&U.data.length>0?{success:!0,data:U.data[0]}:{success:!0,data:null};if(console.log("Sidebar - allRegistersResult:",U),console.log("Sidebar - lastRegisterResult:",q),q&&q.success&&q.data){const O=q.data;if(console.log("Sidebar - lastRegister:",O),console.log("Sidebar - isclosed value:",O.isclosed,"type:",typeof O.isclosed),O.isclosed===1){console.log("Sidebar - Register is closed, showing check-in popup"),o(!0);return}else console.log("Sidebar - Register is open, going directly to sales")}else{console.log("Sidebar - No register found, showing check-in popup"),o(!0);return}}catch(U){console.error("Error checking register status:",U),o(!0);return}S(I.path),g<1024&&h()},E=async()=>{r(!0),setTimeout(()=>{r(!1),console.log("User logged out")},1e3)};if(t)return e.jsx("div",{className:"fixed inset-0 bg-[#0000008d] z-50 flex justify-center items-center",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center",children:[e.jsx("div",{className:"w-7 h-7 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Logging out..."})]})});const z=()=>e.jsxs("nav",{className:"mt-3 flex flex-col h-full",children:[e.jsx("div",{className:"flex-1",children:s.map(I=>e.jsx("div",{children:e.jsxs(Sv,{to:I.path,className:({isActive:U})=>`flex items-center px-4 py-3 text-sm text-gray-100 ${U?"border-l-2 border-white":""}`,style:({isActive:U})=>({backgroundColor:U?"rgba(255, 255, 255, 0.055)":"transparent",":hover":{backgroundColor:"rgba(255, 255, 255, 0.055)"}}),onMouseEnter:U=>{U.target.style.backgroundColor="rgba(255, 255, 255, 0.055)"},onMouseLeave:U=>{const q=U.target.classList.contains("bg-[#ffffff0e]")||U.target.closest("a").classList.contains("bg-[#ffffff0e]");U.target.style.backgroundColor=q?"rgba(255, 255, 255, 0.055)":"transparent"},onClick:U=>{U.preventDefault(),_(I)},children:[e.jsx("span",{className:"text-gray-100",children:I.icon}),e.jsx("span",{className:"ml-2 font-medium whitespace-nowrap",style:{opacity:c?1:0,transition:"opacity 300ms ease"},children:I.name})]})},I.name))}),e.jsx("div",{className:"px-4 mb-6 cursor-pointer",children:e.jsxs("button",{onClick:()=>{w(),E()},className:"w-full flex items-center cursor-pointer gap-2 py-3 text-gray-100",children:[e.jsx(Uh,{size:20}),e.jsx("span",{className:"font-medium",style:{opacity:c?1:0,transition:"opacity 300ms ease"},children:"Logout"})]})})]});return e.jsxs(e.Fragment,{children:[n&&e.jsx(Av,{onComplete:(I=!1)=>{o(!1),I&&S("/dashboard/sales"),g<1024&&h()}}),m&&e.jsx("div",{className:"fixed inset-0 bg-[#0000002a] bg-opacity-50 z-40",onClick:h}),e.jsxs("div",{className:`lg:hidden fixed inset-y-0 left-0 z-40 w-64 transform transition-transform duration-300 ease-in-out ${m?"translate-x-0":"-translate-x-full"} shadow-xl`,style:{backgroundColor:y.primary},children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",style:{borderColor:y.primaryLight},children:[e.jsx("div",{className:"cursor-pointer",children:e.jsxs("h1",{className:"font-bold text-white text-xl",children:["G",e.jsx("span",{className:"text-secondary",children:"POS"})]})}),e.jsx("button",{onClick:h,className:"p-2 rounded-full text-white",style:{backgroundColor:"rgba(255, 255, 255, 0.23)"},children:e.jsx(Nt,{size:24})})]}),e.jsx(z,{})]}),e.jsx("div",{className:"hidden lg:block h-full overflow-hidden flex-shrink-0",style:{width:c?"200px":"60px",transition:"width 300ms cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:y.primary},children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"p-3 flex items-center justify-between border-b cursor-pointer",style:{borderColor:"rgba(255, 255, 255, 0.23)"},children:[e.jsxs("h1",{className:"font-bold text-white text-xl transition-opacity duration-300",style:{opacity:c?1:0,width:c?"auto":0},children:["G",e.jsx("span",{className:"text-secondary",children:"POS"}),"System"]}),e.jsx("button",{onClick:I=>{I.stopPropagation(),d()},className:"p-1 cursor-pointer rounded-full text-white",style:{backgroundColor:"rgba(255, 255, 255, 0.39)"},children:e.jsx(Tu,{size:20,className:`transform transition-transform duration-300 ${c?"":"rotate-180"}`})})]}),e.jsx(z,{})]})})]})},hy=({onRecallClick:s,onNotificationsClick:t,onViewToggle:r,currentView:n,notificationCount:o=0})=>{const{toggleMobileMenu:c,windowWidth:d}=v.useContext(Ax),m=ya(),h=nn(),{playButtonSound:g}=kx(),[y,w]=v.useState({name:"Loading...",role:"Loading...",image:null});v.useEffect(()=>{const O=localStorage.getItem("currentEmployee");if(O)try{const R=JSON.parse(O);let M=null;R.imgurl&&(R.imgurl.startsWith("uploads/")?window.myAPI.getEmployeeImage(R.imgurl).then(P=>{P.success&&w(ee=>({...ee,image:P.data}))}).catch(()=>{}):M=`data:image/png;base64,${R.imgurl}`),w({name:`${R.fname||""} ${R.lname||""}`.trim()||"Unknown User",role:R.roll||"Unknown Role",image:M})}catch(R){console.error("Error parsing employee data:",R),w({name:"Unknown User",role:"Unknown Role",image:null})}else m("/login")},[m]);const S=[{icon:e.jsx(ko,{size:14}),onClick:()=>console.log("Sale clicked"),label:"Sale"},{icon:e.jsx(qb,{size:14}),onClick:()=>console.log("Download clicked"),label:"Report"},{icon:e.jsx(Hb,{size:14}),onClick:()=>console.log("Manage Orders clicked"),label:" manage Orders"}],_=[{icon:e.jsx($h,{size:14}),onClick:s,label:"Recall"},{icon:e.jsx(uu,{size:14}),onClick:t,label:"Notifications",hasNotification:o>0},{icon:n==="cards"?e.jsx(Pc,{size:14}):e.jsx(vn,{size:14}),onClick:r,label:n==="cards"?"Card View":"All Day View"}],E=()=>{m(-1)},z=async()=>{try{const O=localStorage.getItem("currentEmployee");let R=null;if(O)try{R=JSON.parse(O).id}catch(M){console.error("Error parsing employee data for logout:",M)}if(R)try{const M=await window.myAPI?.updateEmployeeLogout(R);M.success?console.log("Employee logout session updated successfully:",M):console.warn("Failed to update logout session:",M.message)}catch(M){console.error("Error updating logout session:",M)}localStorage.removeItem("currentEmployee"),sessionStorage.removeItem("hasCheckedIn"),m("/login")}catch(O){console.error("Error during logout:",O),localStorage.removeItem("currentEmployee"),sessionStorage.removeItem("hasCheckedIn"),m("/login")}},I=h.pathname!=="/dashboard",U=h.pathname.includes("/kds"),q=U?_:S;return e.jsxs("header",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between w-full px-4 py-1.5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[d<1024&&e.jsx("button",{onClick:()=>{g(),c()},className:"p-1 hover:bg-gray-100 rounded-lg",children:e.jsx(Xb,{size:24,className:"text-gray-600"})}),e.jsx("div",{className:"hidden md:flex items-center gap-2 ml-2",children:q.map((O,R)=>e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{onClick:()=>{g(),O.onClick()},className:"p-2 bg-primary cursor-pointer text-white hover:bg-primary/90 rounded-lg flex items-center justify-center relative",children:[O.icon,O.hasNotification&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:o})]}),e.jsxs("div",{className:`absolute ${U?"left-1/2 -translate-x-1/2 top-full mt-2":"top-full left-1/2 transform -translate-x-1/2 mt-2"} px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-10`,children:[O.label,e.jsx("div",{className:`absolute ${U?"bottom-full left-1/2 transform -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800":"bottom-full left-1/2 transform -translate-x-1/2 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-800"}`})]})]},R))})]}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[y.image?e.jsx("img",{src:y.image,alt:y.name,className:"w-9 h-9 object-cover rounded-full shadow-sm",onError:O=>{O.target.style.display="none",O.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-9 h-9 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium shadow-sm ${y.image?"hidden":""}`,children:y.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"text-left hidden sm:block",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:y.name}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:y.role})]}),e.jsx("button",{onClick:()=>{g(),z()},className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",title:"Logout",children:e.jsx(Uh,{size:16})})]}),I&&e.jsxs("button",{onClick:()=>{g(),E()},className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-primary text-white cursor-pointer rounded-lg transition-colors duration-200 border border-gray-200",children:[e.jsx(zc,{size:16}),e.jsx("span",{children:"Back"})]})]})]}),d<1024&&e.jsx("div",{className:"px-4 pb-3 flex gap-2",children:q.map((O,R)=>e.jsxs("button",{onClick:O.onClick,className:"p-2 bg-primary text-white hover:bg-primary/90 rounded-lg flex items-center gap-1 relative",title:O.label,children:[O.icon,e.jsx("span",{className:"text-xs ml-1",children:O.label}),O.hasNotification&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:o})]},R))})]})},Dv=({open:s,onBack:t,onClose:r,floors:n,floorsLoading:o,selectedFloor:c,onSelectFloor:d,addSampleData:m,tables:h,tablesLoading:g,mergeTableSelections:y,onSelectionChange:w,onRemoveSelection:S,onAddMoreSelection:_,isAddMoreDisabled:E,getAvailableTablesForSelection:z,isTableReserved:I,onSave:U})=>{if(!s)return null;const q=y.filter(R=>R.tableId).length>=2,O=()=>{if(!q)return;const R=y.filter(M=>M.tableId).map(M=>{const P=h.find(ee=>ee.id.toString()===M.tableId);return{id:M.tableId,tableNo:P?.table_no,floor:c}});U?.(R)};return e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex items-center rounded-t-xl relative flex-shrink-0",children:[e.jsx("button",{onClick:t,className:"text-white cursor-pointer p-1 rounded-full flex items-center gap-1",children:e.jsx(zc,{size:16})}),e.jsx("h2",{className:"text-xl font-bold absolute left-1/2 transform -translate-x-1/2",children:"Merge Tables"}),e.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20 ml-auto",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Select Floor"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-60 overflow-y-auto",children:o?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading floors..."})}):n.length>0?n.map(R=>e.jsxs("button",{onClick:()=>d(R),className:`px-4 py-3 text-left rounded-lg transition-colors border ${c===R.name?"bg-primary text-white border-primary":"bg-white text-gray-700 hover:bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:"font-medium",children:R.name}),e.jsx("div",{className:"text-sm opacity-75",children:R.type})]},R.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No floors found"}),e.jsx("div",{className:"text-gray-400 text-xs mt-2 mb-4",children:"Please add floors to the database"}),e.jsx("button",{onClick:m,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors text-sm",children:"Add Sample Data"})]})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Select Tables to Merge"}),e.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:y.map((R,M)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${c?"text-gray-700":"text-gray-400"}`,children:["Select Table ",M+1]}),e.jsxs("select",{value:R.tableId,onChange:P=>w(R.id,P.target.value),disabled:!c,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary ${c?"border-gray-300 bg-white":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsxs("option",{value:"",children:["Choose table ",M+1,"..."]}),g?e.jsx("option",{value:"",disabled:!0,children:"Loading tables..."}):h.length>0?z(R.id).map(P=>e.jsxs("option",{value:P.id,disabled:I(P.id.toString()),children:["Table ",P.table_no," (",P.seat_capacity||4," seats) ",I(P.id.toString())?"- RESERVED":""]},P.id)):c?e.jsx("option",{value:"",disabled:!0,children:"No available tables"}):e.jsx("option",{value:"",disabled:!0,children:"Select a floor first"})]})]}),y.length>2&&e.jsx("button",{onClick:()=>S(R.id),className:"mt-6 p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Remove table selection",children:e.jsx(Nt,{size:16})})]},R.id))}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs("button",{onClick:_,disabled:E(),className:`w-fit px-4 py-2 font-medium rounded-lg transition-colors flex items-center justify-center gap-2 ${E()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-primary/90"}`,children:[e.jsx(Ls,{size:16}),"Add More"]})})]})]}),e.jsxs("div",{className:"flex gap-4 justify-end pt-4 border-t border-gray-200 flex-shrink-0",children:[e.jsx("button",{onClick:r,className:"px-6 py-2 font-medium rounded-lg transition-colors flex items-center gap-2 border border-gray-300 text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{disabled:!q,onClick:O,className:`px-6 py-2 font-medium rounded-lg transition-colors flex items-center gap-2 ${q?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17,21 17,13 7,13 7,21"}),e.jsx("polyline",{points:"7,3 7,8 15,8"})]}),"Save"]})]})]})]})})},CC=({open:s,onClose:t,floors:r=[],floorsLoading:n=!1,selectedFloor:o="",onSelectFloor:c,addSampleData:d,tables:m=[],tablesLoading:h=!1,selectedTable:g="",onSelectTable:y,reservedTables:w=[],onRemoveReservedTable:S,isTableReserved:_=()=>!1,selectedPersons:E="",onSelectPersons:z,getSeatCapacityOptions:I=()=>[],onMergeTable:U,onSave:q})=>s?e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Table Selection"}),e.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Select Floor"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-60 overflow-y-auto",children:n?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading floors..."})}):r&&r.length>0?r.map(O=>e.jsxs("button",{onClick:()=>c?.(O),className:`px-4 py-3 text-left rounded-lg transition-colors border ${o===O.name?"bg-primary text-white border-primary":"bg-white text-gray-700 hover:bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:"font-medium",children:O.name}),e.jsx("div",{className:"text-sm opacity-75",children:O.type})]},O.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No floors found"}),e.jsx("div",{className:"text-gray-400 text-xs mt-2 mb-4",children:"Please add floors to the database"}),e.jsx("button",{onClick:d,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors text-sm",children:"Add Sample Data"})]})})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${o?"text-gray-700":"text-gray-400"}`,children:"Select Table"}),e.jsxs("select",{value:g,onChange:O=>y?.(O.target.value),disabled:!o,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary ${o?"border-gray-300 bg-white":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Choose a table..."}),h?e.jsx("option",{value:"",disabled:!0,children:"Loading tables..."}):m.length>0?m.map(O=>e.jsxs("option",{value:O.id,disabled:_(O.id.toString()),children:["Table ",O.table_no," (",O.seat_capacity||4," seats) ",_(O.id.toString())?"- RESERVED":""]},O.id)):o?e.jsx("option",{value:"",disabled:!0,children:"No available tables"}):e.jsx("option",{value:"",disabled:!0,children:"Select a floor first"})]}),w.length>0&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Reserved Tables:"}),e.jsx("div",{className:`space-y-2 ${w.length>3?"max-h-32 overflow-y-auto pr-2":""}`,children:w.map(O=>e.jsx("div",{className:"p-2 bg-orange-50 border border-orange-200 rounded-lg flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-orange-700 font-medium",children:["Table ",O.tableNo," (",O.persons," persons) - ",O.floor]})]}),e.jsx("button",{onClick:()=>S?.(O.id),className:"text-red-500 hover:text-red-700 p-1",title:"Remove reservation",children:e.jsx(Nt,{size:14})})]})},O.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${g?"text-gray-700":"text-gray-400"}`,children:"Persons"}),e.jsxs("select",{value:E,onChange:O=>z?.(O.target.value),disabled:!g,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary ${g?"border-gray-300 bg-white":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select number of persons..."}),I().map(O=>e.jsxs("option",{value:O,children:[O," ",O===1?"Person":"Persons"]},O))]})]})]})]}),e.jsxs("div",{className:"flex gap-4 justify-end pt-4 border-t border-gray-200 flex-shrink-0",children:[e.jsxs("button",{disabled:!o,onClick:U,className:`px-6 py-2 font-medium rounded-lg transition-colors flex items-center gap-2 ${o?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}),e.jsx("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}),e.jsx("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}),e.jsx("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]}),"Merge Table"]}),e.jsxs("button",{disabled:!E,onClick:q,className:`px-6 py-2 font-medium rounded-lg transition-colors flex items-center gap-2 ${E?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17,21 17,13 7,13 7,21"}),e.jsx("polyline",{points:"7,3 7,8 15,8"})]}),"Save"]})]})]})]})}):null,Yh=()=>{const[s,t]=v.useState({isVisible:!1,message:"",type:"success",position:"top-right",duration:1e3}),r=v.useRef(!1),n=v.useRef(null),o=v.useCallback((y,w={})=>{n.current&&clearTimeout(n.current),t({isVisible:!0,message:y,type:w.type||"success",position:w.position||"top-right",duration:w.duration||1e3}),r.current=!0,n.current=setTimeout(()=>{t(S=>({...S,isVisible:!1})),r.current=!1,n.current=null},w.duration||1e3)},[]),c=v.useCallback(()=>{n.current&&(clearTimeout(n.current),n.current=null),t(y=>({...y,isVisible:!1})),r.current=!1},[]),d=v.useCallback((y,w={})=>{o(y,{...w,type:"success"})},[o]),m=v.useCallback((y,w={})=>{o(y,{...w,type:"error"})},[o]),h=v.useCallback((y,w={})=>{o(y,{...w,type:"warning"})},[o]),g=v.useCallback((y,w={})=>{o(y,{...w,type:"info"})},[o]);return{alertState:s,showAlert:o,hideAlert:c,showSuccess:d,showError:m,showWarning:h,showInfo:g}},Ci=({message:s,isVisible:t,onClose:r,duration:n=2e3,type:o="success"})=>{const[c,d]=v.useState(!1);if(v.useEffect(()=>{if(t){d(!0);const w=setTimeout(()=>{r&&r()},n);return()=>clearTimeout(w)}else d(!1)},[t,n,r]),!t)return null;const m=()=>{const w="w-[350px] fixed bottom-10 left-1/2 transform -translate-x-1/2 z-50 bg-white rounded-xl shadow-2xl transition-all duration-300 ease-out",S={success:"border-2 border-primary",error:"border-2 border-red-500",warning:"border-2 border-yellow-500",info:"border-2 border-blue-500"},_=c?"opacity-100 translate-y-0":"opacity-0 translate-y-8";return`${w} ${S[o]} ${_}`},h=()=>{const w={success:"bg-primary",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"},S={success:"text-white",error:"text-white",warning:"text-white",info:"text-white"};switch(o){case"success":return e.jsx("div",{className:`w-6 h-6 rounded-full ${w[o]} flex items-center justify-center`,children:e.jsx(kh,{size:16,className:S[o]})});case"error":return e.jsx("div",{className:`w-6 h-6 rounded-full ${w[o]} flex items-center justify-center`,children:e.jsx(Nt,{size:16,className:S[o]})});case"warning":return e.jsx("div",{className:`w-6 h-6 rounded-full ${w[o]} flex items-center justify-center`,children:e.jsx("span",{className:`text-2xl ${S[o]}`,children:"⚠"})});case"info":return e.jsx("div",{className:`w-6 h-6 rounded-full ${w[o]} flex items-center justify-center`,children:e.jsx("span",{className:`text-2xl ${S[o]}`,children:"ℹ"})});default:return e.jsx("div",{className:`w-6 h-6 rounded-full ${w.success} flex items-center justify-center`,children:e.jsx(kh,{size:16,className:"text-white"})})}},g=()=>{switch(o){case"success":return"Success!";case"error":return"Error!";case"warning":return"Warning!";case"info":return"Info!";default:return"Success!"}},y=()=>{switch(o){case"success":return"text-primary";case"error":return"text-red-600";case"warning":return"text-yellow-600";case"info":return"text-blue-600";default:return"text-primary"}};return e.jsx("div",{className:m(),children:e.jsxs("div",{className:"p-4 text-center flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h(),e.jsx("h3",{className:`text-xl font-semibold mb-2 ${y()}`,children:g()})]}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:s})]})})},Ev=({isOpen:s,onClose:t,onCreate:r})=>{const{themeColors:n}=Ur(),[o,c]=v.useState(!1),[d,m]=v.useState(!1),[h,g]=v.useState([]),[y,w]=v.useState(!1),[S,_]=v.useState(""),[E,z]=v.useState([]),[I,U]=v.useState(!1),[q,O]=v.useState(""),[R,M]=v.useState(""),[P,ee]=v.useState([{id:1,tableId:""},{id:2,tableId:""}]),[oe,je]=v.useState({customerName:"",phoneNumber:"",date:"",startTime:"",duration:"2",partySize:"2",tablePreference:"any",notes:""}),[de,re]=v.useState([]),[Te,De]=v.useState(!1),[ne,ue]=v.useState(null),[se,Ae]=v.useState(null),[Se,$e]=v.useState(!1),{alertState:Q,showError:xe,showSuccess:ve,hideAlert:ae}=Yh(),Ce=fe=>{const{name:me,value:Me}=fe.target;je(Re=>({...Re,[me]:Me})),me==="customerName"&&Me.length>=2?pe(Me):me==="customerName"&&Me.length<2&&(re([]),De(!1))},pe=async fe=>{try{if(!window.myAPI)return;const me=await window.myAPI.searchCustomerByName(fe);me&&me.success&&(re(me.data||[]),De(!0))}catch(me){console.error("Error searching customers:",me)}},k=fe=>{ue(fe),je(me=>({...me,customerName:fe.name,phoneNumber:fe.phone||""})),De(!1),re([])},L=async()=>{try{if(!window.myAPI)return;const fe=await window.myAPI.getHotelInfo();fe&&fe.success&&Ae(fe.data)}catch(fe){console.error("Error loading hotel info:",fe)}},f=async(fe,me,Me,Re)=>{try{if(!window.myAPI||!fe)return!0;const Ie=await window.myAPI.getReservationsByDateRange(me,me,1);if(Ie&&Ie.success){const st=Ie.data||[],He=x(Me),Xe=He+parseFloat(Re)*60;return!st.some(et=>{if(et.table_id!==fe)return!1;const rt=x(et.start_time),Qe=rt+parseFloat(et.duration||2)*60;return He<Qe&&Xe>rt})}return!0}catch(Ie){return console.error("Error checking table availability:",Ie),!0}},x=fe=>{const[me,Me]=fe.split(":").map(Number);return me*60+Me},N=(fe,me)=>{if(!se||!se.opening_time||!se.closeing_time)return!0;const Me=x(fe),Re=parseFloat(me)*60,Ie=Me+Re,st=x(se.opening_time),He=x(se.closeing_time);if(Me<st)return xe(`Reservation time must be after opening time (${se.opening_time})`),!1;if(Ie>He){const Xe=Math.floor((He-Me)/60*10)/10;return xe(`Maximum duration is ${Xe} hours (restaurant closes at ${se.closeing_time})`),!1}return!0},C=async fe=>{fe.preventDefault(),$e(!0);try{if(["customerName","phoneNumber","date","startTime","partySize"].filter(Qe=>!String(oe[Qe]||"").trim()).length){xe("Fill in the required fields");return}if(!N(oe.startTime,oe.duration))return;if(q&&!await f(q,oe.date,oe.startTime,oe.duration)){xe("Selected table is not available at the chosen time");return}let Re=ne?.id,Ie={name:oe.customerName,phone:oe.phoneNumber,email:"",address:"",isloyal:!1,addedBy:1,hotel_id:1};if(!Re){const Qe=await window.myAPI.createCustomer(Ie);if(Qe&&Qe.success)Re=Qe.id;else{xe("Failed to create customer");return}}const He=x(oe.startTime)+parseFloat(oe.duration)*60,Xe=`${Math.floor(He/60).toString().padStart(2,"0")}:${(He%60).toString().padStart(2,"0")}`,et={customer_id:Re,customer_name:oe.customerName,customer_phone:oe.phoneNumber,customer_email:ne?.email||"",reservation_date:oe.date,start_time:oe.startTime,end_time:Xe,duration:parseFloat(oe.duration),party_size:parseInt(oe.partySize),table_id:q||null,table_preference:oe.tablePreference,is_table_preferred:oe.tablePreference==="customerrequired",status:"confirmed",special_notes:oe.notes,hotel_id:1,added_by:1},rt=await window.myAPI.createReservation(et);rt&&rt.success?(ve("Reservation created successfully!"),r&&r(rt.data),je({customerName:"",phoneNumber:"",date:"",startTime:"",duration:"2",partySize:"2",tablePreference:"any",notes:""}),ue(null),O(""),t()):xe("Failed to create reservation")}catch(me){console.error("Error creating reservation:",me),xe("An error occurred while creating the reservation")}finally{$e(!1)}};v.useEffect(()=>{s&&L()},[s]),Sr.useEffect(()=>{if(!d)return;(async()=>{try{if(w(!0),!window.myAPI){g([]);return}const me=await window.myAPI.floorGetAll();me&&me.success?g(me.data):g([])}catch{g([])}finally{w(!1)}})()},[d]);const A=async fe=>{try{if(U(!0),!window.myAPI){z([]);return}const me=await window.myAPI.tableGetByFloorWithStatus(fe,"Free");me&&me.success?z(me.data):z([])}catch{z([])}finally{U(!1)}},H=fe=>{_(fe?.name||""),fe?.id!=null&&A(fe.id)},V=(fe,me)=>{ee(Me=>Me.map(Re=>Re.id===fe?{...Re,tableId:me}:Re))},F=fe=>{ee(me=>me.length>2?me.filter(Me=>Me.id!==fe):me)},B=()=>{ee(fe=>[...fe,{id:fe.length?Math.max(...fe.map(me=>Number(me.id)))+1:1,tableId:""}])},J=()=>P.length>=6,Y=()=>E,[T]=v.useState([]),G=()=>!1,ce=()=>{},ie=()=>Array.from({length:12}).map((fe,me)=>me+1);return s?e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:t}),e.jsxs("div",{className:"relative w-full max-w-3xl bg-white rounded-lg shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-4",style:{backgroundColor:n.primary},children:[e.jsx("h2",{className:"text-white font-semibold",children:"New Reservation"}),e.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded hover:bg-white/15",children:e.jsx(Nt,{className:"w-5 h-5 text-white"})})]}),e.jsxs("form",{onSubmit:C,className:"px-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Customer Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"customerName",required:!0,value:oe.customerName,onChange:Ce,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200",placeholder:"Enter customer name",autoComplete:"off"}),e.jsx(jn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})]}),Te&&de.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:de.map(fe=>e.jsxs("div",{onClick:()=>k(fe),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:fe.name}),e.jsx("div",{className:"text-sm text-gray-600",children:fe.phone})]},fe.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{name:"phoneNumber",required:!0,value:oe.phoneNumber,onChange:Ce,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"date",required:!0,value:oe.date,onChange:Ce,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Start Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"time",name:"startTime",required:!0,value:oe.startTime,onChange:Ce,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Duration"}),e.jsxs("select",{name:"duration",value:oe.duration,onChange:Ce,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 bg-white",children:[e.jsx("option",{value:"1",children:"1 hour"}),e.jsx("option",{value:"1.5",children:"1.5 hours"}),e.jsx("option",{value:"2",children:"2 hours"}),e.jsx("option",{value:"3",children:"3 hours"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Party Size ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{name:"partySize",required:!0,value:oe.partySize,onChange:Ce,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 bg-white",children:Array.from({length:20}).map((fe,me)=>e.jsx("option",{value:me+1,children:me+1},me+1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Table Preference"}),e.jsxs("select",{name:"tablePreference",value:oe.tablePreference,onChange:Ce,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 bg-white",children:[e.jsx("option",{value:"any",children:"Any Available Table"}),e.jsx("option",{value:"customerrequired",children:"Customer Required"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:()=>m(!0),className:"py-2.5 px-4 rounded bg-primary text-white text-sm font-medium",children:"Choose Table"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Special Requests"}),e.jsx("textarea",{name:"notes",value:oe.notes,onChange:Ce,rows:4,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200",placeholder:"Any special requests or notes"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-500 text-white",disabled:Se,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-primary text-white",disabled:Se,children:Se?"Creating...":"Create Reservation"})]})]})]}),e.jsx(Ci,{message:Q.message,isVisible:Q.isVisible,onClose:ae,duration:Q.duration,type:Q.type}),e.jsx(CC,{open:d,onClose:()=>m(!1),floors:h,floorsLoading:y,selectedFloor:S,onSelectFloor:H,addSampleData:()=>{},tables:E,tablesLoading:I,selectedTable:q,onSelectTable:fe=>O(fe),reservedTables:T,onRemoveReservedTable:ce,isTableReserved:G,selectedPersons:R,onSelectPersons:fe=>M(fe),getSeatCapacityOptions:ie,onMergeTable:()=>c(!0),onSave:()=>m(!1)}),e.jsx(Dv,{open:o,onBack:()=>c(!1),onClose:()=>{c(!1),ee([{id:1,tableId:""},{id:2,tableId:""}])},floors:h,floorsLoading:y,selectedFloor:S,onSelectFloor:H,addSampleData:()=>{},tables:E,tablesLoading:I,mergeTableSelections:P,onSelectionChange:V,onRemoveSelection:F,onAddMoreSelection:B,isAddMoreDisabled:J,getAvailableTablesForSelection:Y,isTableReserved:G,onSave:()=>{c(!1),ee([{id:1,tableId:""},{id:2,tableId:""}])}})]}):null},kC=()=>{ya();const[s,t]=v.useState(!1);return e.jsx("div",{children:e.jsx(Ev,{isOpen:s,onClose:()=>t(!1),onCreate:()=>t(!1)})})},Tv=v.createContext(),Mv=()=>{const s=v.useContext(Tv);if(!s)throw new Error("useDraftCount must be used within a DraftProvider");return s},_C=({children:s})=>{const[t,r]=v.useState(0),n=o=>{r(o)};return e.jsx(Tv.Provider,{value:{draftCount:t,updateDraftCount:n},children:s})},Ov=v.createContext(),_x=()=>{const s=v.useContext(Ov);if(!s)throw new Error("useNotifications must be used within a NotificationProvider");return s},AC=({children:s})=>{const[t,r]=v.useState([]),n=v.useCallback(y=>{const w={id:Date.now()+Math.random(),timestamp:new Date().toISOString(),isRead:!1,...y};r(S=>[w,...S]),setTimeout(()=>{r(S=>S.filter(_=>_.id!==w.id))},1440*60*1e3)},[]),o=v.useCallback(y=>{r(w=>w.map(S=>S.id===y?{...S,isRead:!0}:S))},[]),c=v.useCallback(()=>{r(y=>y.map(w=>({...w,isRead:!0})))},[]),d=v.useCallback(()=>{r([])},[]),m=v.useCallback(y=>{r(w=>w.filter(S=>S.id!==y))},[]),h=v.useCallback(()=>t.filter(y=>!y.isRead).length,[t]),g={notifications:t,addNotification:n,markAsRead:o,markAllAsRead:c,clearAll:d,clearNotification:m,getUnreadCount:h};return e.jsx(Ov.Provider,{value:g,children:s})},DC=({isOpen:s,onClose:t})=>{const{notifications:r,markAllAsRead:n,clearAll:o}=_x(),c=g=>{switch(g){case"shopping-cart":return e.jsx(ko,{size:16,className:"text-white"});case"table":return e.jsx(mx,{size:16,className:"text-white"});case"utensils":return e.jsx(Ni,{size:16,className:"text-white"});case"store":return e.jsx(mu,{size:16,className:"text-white"});case"package":return e.jsx(yl,{size:16,className:"text-white"});case"truck":return e.jsx(So,{size:16,className:"text-white"});default:return e.jsx(ko,{size:16,className:"text-white"})}},d=g=>{const y=new Date,w=new Date(g),S=Math.floor((y-w)/(1e3*60));if(S<1)return"Just now";if(S<60)return`${S}m ago`;const _=Math.floor(S/60);return _<24?`${_}h ago`:`${Math.floor(_/24)}d ago`},m=()=>{o()},h=()=>{n()};return s?e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-100 rounded-lg shadow-lg w-96 max-h-[500px] flex flex-col",children:[e.jsxs("div",{className:"flex rounded-t-lg bg-primary items-center justify-between p-4 border-b border-gray-300",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Notifications"}),e.jsx("button",{onClick:t,className:"text-white transition-colors",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:r.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(uu,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-semibold",children:"No notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"You are all caught up!"})]}):r.map(g=>e.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-lg bg-white border ${g.isRead?"opacity-60":"shadow-sm"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${g.iconColor}`,children:c(g.icon)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:g.title}),e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:g.description}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:d(g.timestamp)})]})]},g.id))}),r.length>0&&e.jsxs("div",{className:"flex space-x-2 p-4 border-t border-gray-300",children:[e.jsxs("button",{onClick:m,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded text-sm font-medium transition-colors",children:[e.jsx(Pa,{size:14,className:"inline mr-2"}),"Clear All"]}),e.jsxs("button",{onClick:h,className:"flex-1 bg-teal-600 hover:bg-teal-700 text-white py-2 px-4 rounded text-sm font-medium transition-colors",children:[e.jsx(bN,{size:14,className:"inline mr-2"}),"Mark All Read"]})]})]})}):null},EC=({onMenuClick:s,onDraftsClick:t,showMenuButton:r=!0})=>{const o=nn().pathname==="/dashboard/sales",c=ya(),{themeColors:d}=Ur(),{draftCount:m}=Mv(),{getUnreadCount:h}=_x(),[g,y]=v.useState(!1),w=h();if(!o)return null;const S=[{style:{backgroundColor:d.primary},textColor:"text-white",label:"Manage Orders",path:"/dashboard/manage-orders"},{style:{backgroundColor:d.primary},textColor:"text-white",label:"Online Orders"},{style:{backgroundColor:d.primary},textColor:"text-white",label:`Drafts${m>0?` (${m})`:""}`,onClick:t},{style:{backgroundColor:d.primary},textColor:"text-white",label:`Notifications${w>0?` (${w})`:""}`,onClick:()=>y(!0)},{style:{backgroundColor:d.primary},textColor:"text-white",label:"Reservations",path:"/dashboard/reservations"},{label:"Customer Display",style:{backgroundColor:d.primary},textColor:"text-white",path:"/dashboard/customer-management"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white border-b border-gray-300 p-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center justify-center space-x-2 ",children:S.map((_,E)=>e.jsxs("div",{onClick:()=>{if(_.onClick){_.onClick();return}if(_.path){c(_.path);return}E===0&&c("/dashboard")},className:`${_.textColor} ${_.textMargin} btn-lifted rounded-md px-4 py-3 font-semibold flex items-center justify-center cursor-pointer hover:opacity-80 transition-opacity`,style:_.style||(_.bgColor?{backgroundColor:_.bgColor}:{}),children:[_.icon,e.jsx("span",{className:"text-xs font-semibold",children:_.label})]},E))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("headerSaveClicked"))},title:"Save",className:"flex justify-center items-center gap-2 py-3 w-[100px] rounded-md text-white text-sm font-semibold btn-lifted bg-[#16A34A] flex items-center gap-2",children:[e.jsx(ux,{size:14}),"Save"]}),e.jsxs("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("openStatusModal"))},title:"Update order status",className:"flex justify-center items-center gap-2 py-3 w-[100px] rounded-md text-white text-sm font-semibold btn-lifted bg-[#1976D2] flex items-center gap-2",children:[e.jsx(Zb,{size:14}),"Status"]})]})]})}),e.jsx(DC,{isOpen:g,onClose:()=>y(!1)})]})},Ax=v.createContext(),TC=()=>{const[s,t]=v.useState(!0),[r,n]=v.useState(!1),[o,c]=v.useState(window.innerWidth),[d,m]=v.useState(!1),[h,g]=v.useState(!1),[y,w]=v.useState(!1),S=nn(),_=ya(),{themeColors:E}=Ur(),z={role:"admin"},I=z?.role?.toLowerCase();v.useEffect(()=>{const je=()=>c(window.innerWidth);window.addEventListener("resize",je);const de=()=>w(!0);return window.addEventListener("openDashboardMenu",de),()=>window.removeEventListener("resize",je)},[]),v.useEffect(()=>{const je=async()=>{try{const de=localStorage.getItem("currentEmployee");if(de){const re=JSON.parse(de);re.id&&(window.handleEmployeeLogout?await window.handleEmployeeLogout(re.id):await window.myAPI?.updateEmployeeLogout(re.id))}}catch(de){console.error("Error handling beforeunload logout:",de)}};return window.addEventListener("beforeunload",je),()=>window.removeEventListener("beforeunload",je)},[]),v.useEffect(()=>{const je=sessionStorage.getItem("hasCheckedIn"),de=sessionStorage.getItem("triggerCheckIn"),re=localStorage.getItem("currentEmployee"),Te=S.pathname==="/dashboard",De=de==="true";Te&&(De||I!=="admin"&&!je&&re)&&(g(!0),sessionStorage.setItem("hasCheckedIn","true"),De&&sessionStorage.removeItem("triggerCheckIn"))},[S,I]);const O={isOpen:s,isMobileMenuOpen:r,toggleMobileMenu:()=>{n(!r)},toggleSidebar:()=>{t(!s)},windowWidth:o},R=Sr.useMemo(()=>[{name:"Dashboard",icon:e.jsx(Hg,{size:18}),path:"/dashboard",allowedRoles:["admin","cashier","manager","chef","waiter"]},{name:"Manage-Orders",icon:e.jsx(s1,{size:18}),path:"/dashboard/manage-orders",allowedRoles:["admin","cashier"]},{name:"Reservations",icon:e.jsx($s,{size:18}),path:"/dashboard/reservations",allowedRoles:["admin","cashier"]},{name:"KDS",icon:e.jsx(jn,{size:18}),path:"/dashboard/kds",allowedRoles:["admin","bde","cashier"]},{name:"Customer Management",icon:e.jsx(Lc,{size:18}),path:"/dashboard/customer-management",allowedRoles:["admin","cashier"]},{name:"Coupons",icon:e.jsx(Hh,{size:18}),path:"/dashboard/coupons",allowedRoles:["admin","manager","cashier"]},{name:"sales",icon:e.jsx(W1,{size:18}),path:"/dashboard/sales",allowedRoles:["admin","cashier"]},{name:"Reports",icon:e.jsx(ox,{size:18}),path:"/dashboard/reports",allowedRoles:["admin","manager","cashier"]},{name:"Admin Panel",icon:e.jsx(bl,{size:18}),path:"/dashboard/admin-panel",allowedRoles:["admin"]}].filter(de=>de.allowedRoles.includes(I)),[I]),M=S.pathname==="/dashboard/kds",P=S.pathname==="/dashboard/sales",ee=S.pathname==="/dashboard/reservations",oe=P;return d||!z?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading..."})]})}):e.jsxs(Ax.Provider,{value:O,children:[y&&e.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[e.jsxs("div",{className:"w-64 h-full shadow-2xl transform transition-transform duration-300 ease-in-out rounded-r-xl",style:{backgroundColor:E.primary},children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",style:{borderColor:"rgba(255, 255, 255, 0.23)"},children:[e.jsx("div",{className:"cursor-pointer",children:e.jsxs("h1",{className:"font-bold text-white text-xl",children:["G",e.jsx("span",{className:"text-secondary",children:"POS"}),"System"]})}),e.jsx("button",{onClick:()=>w(!1),className:"p-2 rounded-full text-white transition-colors",style:{backgroundColor:"rgba(255, 255, 255, 0.23)",":hover":{backgroundColor:"rgba(255, 255, 255, 0.39)"}},children:e.jsx(Nt,{size:20})})]}),e.jsxs("nav",{className:"mt-3 flex flex-col h-full",children:[e.jsx("div",{className:"flex-1",children:R.map(je=>e.jsx("div",{children:e.jsxs("button",{onClick:async()=>{if(w(!1),je.path==="/dashboard/sales")try{const de=await window.myAPI?.getAllRegisters(),re=de&&de.success&&de.data&&de.data.length>0?{success:!0,data:de.data[0]}:{success:!0,data:null};if(re&&re.success&&re.data){if(re.data.isclosed===1){g(!0);return}}else{g(!0);return}}catch(de){console.error("Error checking register status:",de),g(!0);return}_(je.path)},className:"w-full flex items-center px-4 py-3 text-sm text-gray-100 transition-colors",style:{":hover":{backgroundColor:"rgba(255, 255, 255, 0.055)"}},onMouseEnter:de=>{de.target.style.backgroundColor="rgba(255, 255, 255, 0.055)"},onMouseLeave:de=>{de.target.style.backgroundColor="transparent"},children:[e.jsx("span",{className:"text-gray-100",children:je.icon}),e.jsx("span",{className:"ml-2 font-medium whitespace-nowrap",children:je.name})]})},je.name))}),e.jsx("div",{className:"px-4 mb-6 cursor-pointer",children:e.jsxs("button",{onClick:()=>{w(!1),console.log("Logout clicked")},className:"w-full flex items-center cursor-pointer gap-2 py-3 text-gray-100",children:[e.jsx(Uh,{size:20}),e.jsx("span",{className:"font-medium",children:"Logout"})]})})]})]}),e.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>w(!1)})]}),e.jsxs("div",{className:"dashboard-container",children:[h&&e.jsx(Av,{onComplete:(je=!1)=>{g(!1),je&&_("/dashboard/sales")}}),e.jsx("div",{className:"dashboard-content",children:e.jsxs("div",{className:"flex h-full overflow-hidden",children:[!oe&&e.jsx(SC,{navigationItems:R}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[P?e.jsx(EC,{isOrdersRoute:P,onMenuClick:()=>w(!0),showMenuButton:!1,onDraftsClick:()=>{window.dispatchEvent(new CustomEvent("openDraftsModal"))}}):M?e.jsx("div",{className:oe?"":"md:pl-5",children:e.jsx(hy,{onRecallClick:()=>console.log("Recall clicked"),onNotificationsClick:()=>console.log("Notifications clicked"),onViewToggle:()=>console.log("View toggle clicked"),currentView:"cards",notificationCount:3})}):ee?e.jsx("div",{className:oe?"":"md:pl-5",children:e.jsx(kC,{})}):e.jsx("div",{className:oe?"":"md:pl-5",children:e.jsx(hy,{})}),e.jsx("main",{className:"dashboard-main",children:e.jsx("div",{className:`dashboard-scrollable rounded-br-xl ${oe?"p-0":"p-2"} ${oe?"":"md:ml-2"} ${M?"":"mt-6 md:mt-3"}`,style:{transition:"margin 300ms cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:oe?"transparent":E.dashboardBackground},children:e.jsx(bv,{})})})]})]})})]})]})};var wh={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.122
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */var MC=wh.exports,fy;function OC(){return fy||(fy=1,(function(s,t){(function(r,n){s.exports=n(Lh())})(MC,(function(r){return(function(){var n={442:function(m){m.exports=r},548:function(m){m.exports=(function(){var h={34:function(k,L,f){var x=f(4901);k.exports=function(N){return typeof N=="object"?N!==null:x(N)}},81:function(k,L,f){var x=f(9565),N=f(9306),C=f(8551),A=f(6823),H=f(851),V=TypeError;k.exports=function(F,B){var J=arguments.length<2?H(F):B;if(N(J))return C(x(J,F));throw new V(A(F)+" is not iterable")}},235:function(k,L,f){var x=f(9213).forEach,N=f(4598)("forEach");k.exports=N?[].forEach:function(C){return x(this,C,arguments.length>1?arguments[1]:void 0)}},283:function(k,L,f){var x=f(9504),N=f(9039),C=f(4901),A=f(9297),H=f(3724),V=f(350).CONFIGURABLE,F=f(3706),B=f(1181),J=B.enforce,Y=B.get,T=String,G=Object.defineProperty,ce=x("".slice),ie=x("".replace),fe=x([].join),me=H&&!N((function(){return G((function(){}),"length",{value:8}).length!==8})),Me=String(String).split("String"),Re=k.exports=function(Ie,st,He){ce(T(st),0,7)==="Symbol("&&(st="["+ie(T(st),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),He&&He.getter&&(st="get "+st),He&&He.setter&&(st="set "+st),(!A(Ie,"name")||V&&Ie.name!==st)&&(H?G(Ie,"name",{value:st,configurable:!0}):Ie.name=st),me&&He&&A(He,"arity")&&Ie.length!==He.arity&&G(Ie,"length",{value:He.arity});try{He&&A(He,"constructor")&&He.constructor?H&&G(Ie,"prototype",{writable:!1}):Ie.prototype&&(Ie.prototype=void 0)}catch{}var Xe=J(Ie);return A(Xe,"source")||(Xe.source=fe(Me,typeof st=="string"?st:"")),Ie};Function.prototype.toString=Re((function(){return C(this)&&Y(this).source||F(this)}),"toString")},298:function(k,L,f){var x=f(2195),N=f(5397),C=f(8480).f,A=f(7680),H=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];k.exports.f=function(V){return H&&x(V)==="Window"?(function(F){try{return C(F)}catch{return A(H)}})(V):C(N(V))}},350:function(k,L,f){var x=f(3724),N=f(9297),C=Function.prototype,A=x&&Object.getOwnPropertyDescriptor,H=N(C,"name"),V=H&&(function(){}).name==="something",F=H&&(!x||x&&A(C,"name").configurable);k.exports={EXISTS:H,PROPER:V,CONFIGURABLE:F}},397:function(k,L,f){var x=f(7751);k.exports=x("document","documentElement")},421:function(k){k.exports={}},511:function(k,L,f){var x=f(9167),N=f(9297),C=f(1951),A=f(4913).f;k.exports=function(H){var V=x.Symbol||(x.Symbol={});N(V,H)||A(V,H,{value:C.f(H)})}},566:function(k,L,f){var x=f(9504),N=f(9306),C=f(34),A=f(9297),H=f(7680),V=f(616),F=Function,B=x([].concat),J=x([].join),Y={};k.exports=V?F.bind:function(T){var G=N(this),ce=G.prototype,ie=H(arguments,1),fe=function(){var me=B(ie,H(arguments));return this instanceof fe?(function(Me,Re,Ie){if(!A(Y,Re)){for(var st=[],He=0;He<Re;He++)st[He]="a["+He+"]";Y[Re]=F("C,a","return new C("+J(st,",")+")")}return Y[Re](Me,Ie)})(G,me.length,me):G.apply(T,me)};return C(ce)&&(fe.prototype=ce),fe}},597:function(k,L,f){var x=f(9039),N=f(8227),C=f(9519),A=N("species");k.exports=function(H){return C>=51||!x((function(){var V=[];return(V.constructor={})[A]=function(){return{foo:1}},V[H](Boolean).foo!==1}))}},616:function(k,L,f){var x=f(9039);k.exports=!x((function(){var N=(function(){}).bind();return typeof N!="function"||N.hasOwnProperty("prototype")}))},655:function(k,L,f){var x=f(6955),N=String;k.exports=function(C){if(x(C)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return N(C)}},687:function(k,L,f){var x=f(4913).f,N=f(9297),C=f(8227)("toStringTag");k.exports=function(A,H,V){A&&!V&&(A=A.prototype),A&&!N(A,C)&&x(A,C,{configurable:!0,value:H})}},706:function(k,L,f){var x=f(350).PROPER,N=f(9039),C=f(7452);k.exports=function(A){return N((function(){return!!C[A]()||"​᠎"[A]()!=="​᠎"||x&&C[A].name!==A}))}},739:function(k,L,f){var x=f(6518),N=f(9039),C=f(8981),A=f(2777);x({target:"Date",proto:!0,arity:1,forced:N((function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}))},{toJSON:function(H){var V=C(this),F=A(V,"number");return typeof F!="number"||isFinite(F)?V.toISOString():null}})},741:function(k){var L=Math.ceil,f=Math.floor;k.exports=Math.trunc||function(x){var N=+x;return(N>0?f:L)(N)}},744:function(k,L,f){var x=f(9565),N=f(9504),C=f(9228),A=f(8551),H=f(34),V=f(7750),F=f(2293),B=f(7829),J=f(8014),Y=f(655),T=f(5966),G=f(6682),ce=f(8429),ie=f(9039),fe=ce.UNSUPPORTED_Y,me=Math.min,Me=N([].push),Re=N("".slice),Ie=!ie((function(){var He=/(?:)/,Xe=He.exec;He.exec=function(){return Xe.apply(this,arguments)};var et="ab".split(He);return et.length!==2||et[0]!=="a"||et[1]!=="b"})),st="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;C("split",(function(He,Xe,et){var rt="0".split(void 0,0).length?function(Qe,At){return Qe===void 0&&At===0?[]:x(Xe,this,Qe,At)}:Xe;return[function(Qe,At){var xt=V(this),St=H(Qe)?T(Qe,He):void 0;return St?x(St,Qe,xt,At):x(rt,Y(xt),Qe,At)},function(Qe,At){var xt=A(this),St=Y(Qe);if(!st){var Le=et(rt,xt,St,At,rt!==Xe);if(Le.done)return Le.value}var Ye=F(xt,RegExp),_e=xt.unicode,tt=(xt.ignoreCase?"i":"")+(xt.multiline?"m":"")+(xt.unicode?"u":"")+(fe?"g":"y"),ct=new Ye(fe?"^(?:"+xt.source+")":xt,tt),it=At===void 0?4294967295:At>>>0;if(it===0)return[];if(St.length===0)return G(ct,St)===null?[St]:[];for(var ke=0,Ke=0,ut=[];Ke<St.length;){ct.lastIndex=fe?0:Ke;var Ct,Et=G(ct,fe?Re(St,Ke):St);if(Et===null||(Ct=me(J(ct.lastIndex+(fe?Ke:0)),St.length))===ke)Ke=B(St,Ke,_e);else{if(Me(ut,Re(St,ke,Ke)),ut.length===it)return ut;for(var Bt=1;Bt<=Et.length-1;Bt++)if(Me(ut,Et[Bt]),ut.length===it)return ut;Ke=ke=Ct}}return Me(ut,Re(St,ke)),ut}]}),st||!Ie,fe)},757:function(k,L,f){var x=f(7751),N=f(4901),C=f(1625),A=f(7040),H=Object;k.exports=A?function(V){return typeof V=="symbol"}:function(V){var F=x("Symbol");return N(F)&&C(F.prototype,H(V))}},788:function(k,L,f){var x=f(34),N=f(2195),C=f(8227)("match");k.exports=function(A){var H;return x(A)&&((H=A[C])!==void 0?!!H:N(A)==="RegExp")}},825:function(k,L,f){var x=f(6518),N=f(7751),C=f(8745),A=f(566),H=f(5548),V=f(8551),F=f(34),B=f(2360),J=f(9039),Y=N("Reflect","construct"),T=Object.prototype,G=[].push,ce=J((function(){function me(){}return!(Y((function(){}),[],me)instanceof me)})),ie=!J((function(){Y((function(){}))})),fe=ce||ie;x({target:"Reflect",stat:!0,forced:fe,sham:fe},{construct:function(me,Me){H(me),V(Me);var Re=arguments.length<3?me:H(arguments[2]);if(ie&&!ce)return Y(me,Me,Re);if(me===Re){switch(Me.length){case 0:return new me;case 1:return new me(Me[0]);case 2:return new me(Me[0],Me[1]);case 3:return new me(Me[0],Me[1],Me[2]);case 4:return new me(Me[0],Me[1],Me[2],Me[3])}var Ie=[null];return C(G,Ie,Me),new(C(A,me,Ie))}var st=Re.prototype,He=B(F(st)?st:T),Xe=C(me,He,Me);return F(Xe)?Xe:He}})},851:function(k,L,f){var x=f(6955),N=f(5966),C=f(4117),A=f(6269),H=f(8227)("iterator");k.exports=function(V){if(!C(V))return N(V,H)||N(V,"@@iterator")||A[x(V)]}},926:function(k,L,f){var x=f(9306),N=f(8981),C=f(7055),A=f(6198),H=TypeError,V="Reduce of empty array with no initial value",F=function(B){return function(J,Y,T,G){var ce=N(J),ie=C(ce),fe=A(ce);if(x(Y),fe===0&&T<2)throw new H(V);var me=B?fe-1:0,Me=B?-1:1;if(T<2)for(;;){if(me in ie){G=ie[me],me+=Me;break}if(me+=Me,B?me<0:fe<=me)throw new H(V)}for(;B?me>=0:fe>me;me+=Me)me in ie&&(G=Y(G,ie[me],me,ce));return G}};k.exports={left:F(!1),right:F(!0)}},1034:function(k,L,f){var x=f(9565),N=f(9297),C=f(1625),A=f(5213),H=f(7979),V=RegExp.prototype;k.exports=A.correct?function(F){return F.flags}:function(F){return A.correct||!C(V,F)||N(F,"flags")?F.flags:x(H,F)}},1056:function(k,L,f){var x=f(4913).f;k.exports=function(N,C,A){A in N||x(N,A,{configurable:!0,get:function(){return C[A]},set:function(H){C[A]=H}})}},1072:function(k,L,f){var x=f(1828),N=f(8727);k.exports=Object.keys||function(C){return x(C,N)}},1088:function(k,L,f){var x=f(6518),N=f(9565),C=f(6395),A=f(350),H=f(4901),V=f(3994),F=f(2787),B=f(2967),J=f(687),Y=f(6699),T=f(6840),G=f(8227),ce=f(6269),ie=f(7657),fe=A.PROPER,me=A.CONFIGURABLE,Me=ie.IteratorPrototype,Re=ie.BUGGY_SAFARI_ITERATORS,Ie=G("iterator"),st="keys",He="values",Xe="entries",et=function(){return this};k.exports=function(rt,Qe,At,xt,St,Le,Ye){V(At,Qe,xt);var _e,tt,ct,it=function(ge){if(ge===St&&Et)return Et;if(!Re&&ge&&ge in ut)return ut[ge];switch(ge){case st:case He:case Xe:return function(){return new At(this,ge)}}return function(){return new At(this)}},ke=Qe+" Iterator",Ke=!1,ut=rt.prototype,Ct=ut[Ie]||ut["@@iterator"]||St&&ut[St],Et=!Re&&Ct||it(St),Bt=Qe==="Array"&&ut.entries||Ct;if(Bt&&(_e=F(Bt.call(new rt)))!==Object.prototype&&_e.next&&(C||F(_e)===Me||(B?B(_e,Me):H(_e[Ie])||T(_e,Ie,et)),J(_e,ke,!0,!0),C&&(ce[ke]=et)),fe&&St===He&&Ct&&Ct.name!==He&&(!C&&me?Y(ut,"name",He):(Ke=!0,Et=function(){return N(Ct,this)})),St)if(tt={values:it(He),keys:Le?Et:it(st),entries:it(Xe)},Ye)for(ct in tt)(Re||Ke||!(ct in ut))&&T(ut,ct,tt[ct]);else x({target:Qe,proto:!0,forced:Re||Ke},tt);return C&&!Ye||ut[Ie]===Et||T(ut,Ie,Et,{name:St}),ce[Qe]=Et,tt}},1181:function(k,L,f){var x,N,C,A=f(8622),H=f(4576),V=f(34),F=f(6699),B=f(9297),J=f(7629),Y=f(6119),T=f(421),G="Object already initialized",ce=H.TypeError,ie=H.WeakMap;if(A||J.state){var fe=J.state||(J.state=new ie);fe.get=fe.get,fe.has=fe.has,fe.set=fe.set,x=function(Me,Re){if(fe.has(Me))throw new ce(G);return Re.facade=Me,fe.set(Me,Re),Re},N=function(Me){return fe.get(Me)||{}},C=function(Me){return fe.has(Me)}}else{var me=Y("state");T[me]=!0,x=function(Me,Re){if(B(Me,me))throw new ce(G);return Re.facade=Me,F(Me,me,Re),Re},N=function(Me){return B(Me,me)?Me[me]:{}},C=function(Me){return B(Me,me)}}k.exports={set:x,get:N,has:C,enforce:function(Me){return C(Me)?N(Me):x(Me,{})},getterFor:function(Me){return function(Re){var Ie;if(!V(Re)||(Ie=N(Re)).type!==Me)throw new ce("Incompatible receiver, "+Me+" required");return Ie}}}},1240:function(k,L,f){var x=f(9504);k.exports=x(1.1.valueOf)},1278:function(k,L,f){var x=f(6518),N=f(3724),C=f(5031),A=f(5397),H=f(7347),V=f(4659);x({target:"Object",stat:!0,sham:!N},{getOwnPropertyDescriptors:function(F){for(var B,J,Y=A(F),T=H.f,G=C(Y),ce={},ie=0;G.length>ie;)(J=T(Y,B=G[ie++]))!==void 0&&V(ce,B,J);return ce}})},1291:function(k,L,f){var x=f(741);k.exports=function(N){var C=+N;return C!=C||C===0?0:x(C)}},1296:function(k,L,f){var x=f(4495);k.exports=x&&!!Symbol.for&&!!Symbol.keyFor},1436:function(k,L,f){var x=f(8227)("match");k.exports=function(N){var C=/./;try{"/./"[N](C)}catch{try{return C[x]=!1,"/./"[N](C)}catch{}}return!1}},1469:function(k,L,f){var x=f(7433);k.exports=function(N,C){return new(x(N))(C===0?0:C)}},1480:function(k,L,f){var x=f(6518),N=f(9039),C=f(298).f;x({target:"Object",stat:!0,forced:N((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:C})},1510:function(k,L,f){var x=f(6518),N=f(7751),C=f(9297),A=f(655),H=f(5745),V=f(1296),F=H("string-to-symbol-registry"),B=H("symbol-to-string-registry");x({target:"Symbol",stat:!0,forced:!V},{for:function(J){var Y=A(J);if(C(F,Y))return F[Y];var T=N("Symbol")(Y);return F[Y]=T,B[T]=Y,T}})},1625:function(k,L,f){var x=f(9504);k.exports=x({}.isPrototypeOf)},1699:function(k,L,f){var x=f(6518),N=f(9504),C=f(5749),A=f(7750),H=f(655),V=f(1436),F=N("".indexOf);x({target:"String",proto:!0,forced:!V("includes")},{includes:function(B){return!!~F(H(A(this)),H(C(B)),arguments.length>1?arguments[1]:void 0)}})},1761:function(k,L,f){var x=f(9565),N=f(9504),C=f(9228),A=f(8551),H=f(34),V=f(8014),F=f(655),B=f(7750),J=f(5966),Y=f(7829),T=f(1034),G=f(6682),ce=N("".indexOf);C("match",(function(ie,fe,me){return[function(Me){var Re=B(this),Ie=H(Me)?J(Me,ie):void 0;return Ie?x(Ie,Me,Re):new RegExp(Me)[ie](F(Re))},function(Me){var Re=A(this),Ie=F(Me),st=me(fe,Re,Ie);if(st.done)return st.value;var He=F(T(Re));if(ce(He,"g")===-1)return G(Re,Ie);var Xe=ce(He,"u")!==-1;Re.lastIndex=0;for(var et,rt=[],Qe=0;(et=G(Re,Ie))!==null;){var At=F(et[0]);rt[Qe]=At,At===""&&(Re.lastIndex=Y(Ie,V(Re.lastIndex),Xe)),Qe++}return Qe===0?null:rt}]}))},1828:function(k,L,f){var x=f(9504),N=f(9297),C=f(5397),A=f(9617).indexOf,H=f(421),V=x([].push);k.exports=function(F,B){var J,Y=C(F),T=0,G=[];for(J in Y)!N(H,J)&&N(Y,J)&&V(G,J);for(;B.length>T;)N(Y,J=B[T++])&&(~A(G,J)||V(G,J));return G}},1951:function(k,L,f){var x=f(8227);L.f=x},2008:function(k,L,f){var x=f(6518),N=f(9213).filter;x({target:"Array",proto:!0,forced:!f(597)("filter")},{filter:function(C){return N(this,C,arguments.length>1?arguments[1]:void 0)}})},2010:function(k,L,f){var x=f(3724),N=f(350).EXISTS,C=f(9504),A=f(2106),H=Function.prototype,V=C(H.toString),F=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,B=C(F.exec);x&&!N&&A(H,"name",{configurable:!0,get:function(){try{return B(F,V(this))[1]}catch{return""}}})},2062:function(k,L,f){var x=f(6518),N=f(9213).map;x({target:"Array",proto:!0,forced:!f(597)("map")},{map:function(C){return N(this,C,arguments.length>1?arguments[1]:void 0)}})},2087:function(k,L,f){var x=f(34),N=Math.floor;k.exports=Number.isInteger||function(C){return!x(C)&&isFinite(C)&&N(C)===C}},2106:function(k,L,f){var x=f(283),N=f(4913);k.exports=function(C,A,H){return H.get&&x(H.get,A,{getter:!0}),H.set&&x(H.set,A,{setter:!0}),N.f(C,A,H)}},2140:function(k,L,f){var x={};x[f(8227)("toStringTag")]="z",k.exports=String(x)==="[object z]"},2195:function(k,L,f){var x=f(9504),N=x({}.toString),C=x("".slice);k.exports=function(A){return C(N(A),8,-1)}},2211:function(k,L,f){var x=f(9039);k.exports=!x((function(){function N(){}return N.prototype.constructor=null,Object.getPrototypeOf(new N)!==N.prototype}))},2259:function(k,L,f){f(511)("iterator")},2293:function(k,L,f){var x=f(8551),N=f(5548),C=f(4117),A=f(8227)("species");k.exports=function(H,V){var F,B=x(H).constructor;return B===void 0||C(F=x(B)[A])?V:N(F)}},2360:function(k,L,f){var x,N=f(8551),C=f(6801),A=f(8727),H=f(421),V=f(397),F=f(4055),B=f(6119),J="prototype",Y="script",T=B("IE_PROTO"),G=function(){},ce=function(me){return"<"+Y+">"+me+"</"+Y+">"},ie=function(me){me.write(ce("")),me.close();var Me=me.parentWindow.Object;return me=null,Me},fe=function(){try{x=new ActiveXObject("htmlfile")}catch{}var me,Me,Re;fe=typeof document<"u"?document.domain&&x?ie(x):(Me=F("iframe"),Re="java"+Y+":",Me.style.display="none",V.appendChild(Me),Me.src=String(Re),(me=Me.contentWindow.document).open(),me.write(ce("document.F=Object")),me.close(),me.F):ie(x);for(var Ie=A.length;Ie--;)delete fe[J][A[Ie]];return fe()};H[T]=!0,k.exports=Object.create||function(me,Me){var Re;return me!==null?(G[J]=N(me),Re=new G,G[J]=null,Re[T]=me):Re=fe(),Me===void 0?Re:C.f(Re,Me)}},2478:function(k,L,f){var x=f(9504),N=f(8981),C=Math.floor,A=x("".charAt),H=x("".replace),V=x("".slice),F=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,B=/\$([$&'`]|\d{1,2})/g;k.exports=function(J,Y,T,G,ce,ie){var fe=T+J.length,me=G.length,Me=B;return ce!==void 0&&(ce=N(ce),Me=F),H(ie,Me,(function(Re,Ie){var st;switch(A(Ie,0)){case"$":return"$";case"&":return J;case"`":return V(Y,0,T);case"'":return V(Y,fe);case"<":st=ce[V(Ie,1,-1)];break;default:var He=+Ie;if(He===0)return Re;if(He>me){var Xe=C(He/10);return Xe===0?Re:Xe<=me?G[Xe-1]===void 0?A(Ie,1):G[Xe-1]+A(Ie,1):Re}st=G[He-1]}return st===void 0?"":st}))}},2529:function(k){k.exports=function(L,f){return{value:L,done:f}}},2551:function(k,L,f){var x=f(6395),N=f(4576),C=f(9039),A=f(3607);k.exports=x||!C((function(){if(!(A&&A<535)){var H=Math.random();__defineSetter__.call(null,H,(function(){})),delete N[H]}}))},2637:function(k,L,f){f(6518)({target:"Number",stat:!0},{isInteger:f(2087)})},2675:function(k,L,f){f(6761),f(1510),f(7812),f(3110),f(9773)},2712:function(k,L,f){var x=f(6518),N=f(926).left,C=f(4598),A=f(9519);x({target:"Array",proto:!0,forced:!f(6193)&&A>79&&A<83||!C("reduce")},{reduce:function(H){var V=arguments.length;return N(this,H,V,V>1?arguments[1]:void 0)}})},2762:function(k,L,f){var x=f(6518),N=f(3802).trim;x({target:"String",proto:!0,forced:f(706)("trim")},{trim:function(){return N(this)}})},2777:function(k,L,f){var x=f(9565),N=f(34),C=f(757),A=f(5966),H=f(4270),V=f(8227),F=TypeError,B=V("toPrimitive");k.exports=function(J,Y){if(!N(J)||C(J))return J;var T,G=A(J,B);if(G){if(Y===void 0&&(Y="default"),T=x(G,J,Y),!N(T)||C(T))return T;throw new F("Can't convert object to primitive value")}return Y===void 0&&(Y="number"),H(J,Y)}},2787:function(k,L,f){var x=f(9297),N=f(4901),C=f(8981),A=f(6119),H=f(2211),V=A("IE_PROTO"),F=Object,B=F.prototype;k.exports=H?F.getPrototypeOf:function(J){var Y=C(J);if(x(Y,V))return Y[V];var T=Y.constructor;return N(T)&&Y instanceof T?T.prototype:Y instanceof F?B:null}},2796:function(k,L,f){var x=f(9039),N=f(4901),C=/#|\.prototype\./,A=function(J,Y){var T=V[H(J)];return T===B||T!==F&&(N(Y)?x(Y):!!Y)},H=A.normalize=function(J){return String(J).replace(C,".").toLowerCase()},V=A.data={},F=A.NATIVE="N",B=A.POLYFILL="P";k.exports=A},2839:function(k,L,f){var x=f(4576).navigator,N=x&&x.userAgent;k.exports=N?String(N):""},2892:function(k,L,f){var x=f(6518),N=f(6395),C=f(3724),A=f(4576),H=f(9167),V=f(9504),F=f(2796),B=f(9297),J=f(3167),Y=f(1625),T=f(757),G=f(2777),ce=f(9039),ie=f(8480).f,fe=f(7347).f,me=f(4913).f,Me=f(1240),Re=f(3802).trim,Ie="Number",st=A[Ie],He=H[Ie],Xe=st.prototype,et=A.TypeError,rt=V("".slice),Qe=V("".charCodeAt),At=function(Ye){var _e,tt,ct,it,ke,Ke,ut,Ct,Et=G(Ye,"number");if(T(Et))throw new et("Cannot convert a Symbol value to a number");if(typeof Et=="string"&&Et.length>2){if(Et=Re(Et),(_e=Qe(Et,0))===43||_e===45){if((tt=Qe(Et,2))===88||tt===120)return NaN}else if(_e===48){switch(Qe(Et,1)){case 66:case 98:ct=2,it=49;break;case 79:case 111:ct=8,it=55;break;default:return+Et}for(Ke=(ke=rt(Et,2)).length,ut=0;ut<Ke;ut++)if((Ct=Qe(ke,ut))<48||Ct>it)return NaN;return parseInt(ke,ct)}}return+Et},xt=F(Ie,!st(" 0o1")||!st("0b1")||st("+0x1")),St=function(Ye){var _e,tt=arguments.length<1?0:st((function(ct){var it=G(ct,"number");return typeof it=="bigint"?it:At(it)})(Ye));return Y(Xe,_e=this)&&ce((function(){Me(_e)}))?J(Object(tt),this,St):tt};St.prototype=Xe,xt&&!N&&(Xe.constructor=St),x({global:!0,constructor:!0,wrap:!0,forced:xt},{Number:St});var Le=function(Ye,_e){for(var tt,ct=C?ie(_e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),it=0;ct.length>it;it++)B(_e,tt=ct[it])&&!B(Ye,tt)&&me(Ye,tt,fe(_e,tt))};N&&He&&Le(H[Ie],He),(xt||N)&&Le(H[Ie],st)},2953:function(k,L,f){var x=f(4576),N=f(7400),C=f(9296),A=f(3792),H=f(6699),V=f(687),F=f(8227)("iterator"),B=A.values,J=function(T,G){if(T){if(T[F]!==B)try{H(T,F,B)}catch{T[F]=B}if(V(T,G,!0),N[G]){for(var ce in A)if(T[ce]!==A[ce])try{H(T,ce,A[ce])}catch{T[ce]=A[ce]}}}};for(var Y in N)J(x[Y]&&x[Y].prototype,Y);J(C,"DOMTokenList")},2967:function(k,L,f){var x=f(6706),N=f(34),C=f(7750),A=f(3506);k.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var H,V=!1,F={};try{(H=x(Object.prototype,"__proto__","set"))(F,[]),V=F instanceof Array}catch{}return function(B,J){return C(B),A(J),N(B)&&(V?H(B,J):B.__proto__=J),B}})():void 0)},3110:function(k,L,f){var x=f(6518),N=f(7751),C=f(8745),A=f(9565),H=f(9504),V=f(9039),F=f(4901),B=f(757),J=f(7680),Y=f(6933),T=f(4495),G=String,ce=N("JSON","stringify"),ie=H(/./.exec),fe=H("".charAt),me=H("".charCodeAt),Me=H("".replace),Re=H(1.1.toString),Ie=/[\uD800-\uDFFF]/g,st=/^[\uD800-\uDBFF]$/,He=/^[\uDC00-\uDFFF]$/,Xe=!T||V((function(){var At=N("Symbol")("stringify detection");return ce([At])!=="[null]"||ce({a:At})!=="{}"||ce(Object(At))!=="{}"})),et=V((function(){return ce("\uDF06\uD834")!=='"\\udf06\\ud834"'||ce("\uDEAD")!=='"\\udead"'})),rt=function(At,xt){var St=J(arguments),Le=Y(xt);if(F(Le)||At!==void 0&&!B(At))return St[1]=function(Ye,_e){if(F(Le)&&(_e=A(Le,this,G(Ye),_e)),!B(_e))return _e},C(ce,null,St)},Qe=function(At,xt,St){var Le=fe(St,xt-1),Ye=fe(St,xt+1);return ie(st,At)&&!ie(He,Ye)||ie(He,At)&&!ie(st,Le)?"\\u"+Re(me(At,0),16):At};ce&&x({target:"JSON",stat:!0,arity:3,forced:Xe||et},{stringify:function(At,xt,St){var Le=J(arguments),Ye=C(Xe?rt:ce,null,Le);return et&&typeof Ye=="string"?Me(Ye,Ie,Qe):Ye}})},3167:function(k,L,f){var x=f(4901),N=f(34),C=f(2967);k.exports=function(A,H,V){var F,B;return C&&x(F=H.constructor)&&F!==V&&N(B=F.prototype)&&B!==V.prototype&&C(A,B),A}},3179:function(k,L,f){var x=f(2140),N=f(6955);k.exports=x?{}.toString:function(){return"[object "+N(this)+"]"}},3392:function(k,L,f){var x=f(9504),N=0,C=Math.random(),A=x(1.1.toString);k.exports=function(H){return"Symbol("+(H===void 0?"":H)+")_"+A(++N+C,36)}},3418:function(k,L,f){var x=f(6518),N=f(7916);x({target:"Array",stat:!0,forced:!f(4428)((function(C){Array.from(C)}))},{from:N})},3500:function(k,L,f){var x=f(4576),N=f(7400),C=f(9296),A=f(235),H=f(6699),V=function(B){if(B&&B.forEach!==A)try{H(B,"forEach",A)}catch{B.forEach=A}};for(var F in N)N[F]&&V(x[F]&&x[F].prototype);V(C)},3506:function(k,L,f){var x=f(3925),N=String,C=TypeError;k.exports=function(A){if(x(A))return A;throw new C("Can't set "+N(A)+" as a prototype")}},3517:function(k,L,f){var x=f(9504),N=f(9039),C=f(4901),A=f(6955),H=f(7751),V=f(3706),F=function(){},B=H("Reflect","construct"),J=/^\s*(?:class|function)\b/,Y=x(J.exec),T=!J.test(F),G=function(ie){if(!C(ie))return!1;try{return B(F,[],ie),!0}catch{return!1}},ce=function(ie){if(!C(ie))return!1;switch(A(ie)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return T||!!Y(J,V(ie))}catch{return!0}};ce.sham=!0,k.exports=!B||N((function(){var ie;return G(G.call)||!G(Object)||!G((function(){ie=!0}))||ie}))?ce:G},3607:function(k,L,f){var x=f(2839).match(/AppleWebKit\/(\d+)\./);k.exports=!!x&&+x[1]},3635:function(k,L,f){var x=f(9039),N=f(4576).RegExp;k.exports=x((function(){var C=N(".","s");return!(C.dotAll&&C.test(`
`)&&C.flags==="s")}))},3640:function(k,L,f){var x=f(8551),N=f(4270),C=TypeError;k.exports=function(A){if(x(this),A==="string"||A==="default")A="string";else if(A!=="number")throw new C("Incorrect hint");return N(this,A)}},3706:function(k,L,f){var x=f(9504),N=f(4901),C=f(7629),A=x(Function.toString);N(C.inspectSource)||(C.inspectSource=function(H){return A(H)}),k.exports=C.inspectSource},3709:function(k,L,f){var x=f(2839).match(/firefox\/(\d+)/i);k.exports=!!x&&+x[1]},3717:function(k,L){L.f=Object.getOwnPropertySymbols},3724:function(k,L,f){var x=f(9039);k.exports=!x((function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}))},3763:function(k,L,f){var x=f(2839);k.exports=/MSIE|Trident/.test(x)},3792:function(k,L,f){var x=f(5397),N=f(6469),C=f(6269),A=f(1181),H=f(4913).f,V=f(1088),F=f(2529),B=f(6395),J=f(3724),Y="Array Iterator",T=A.set,G=A.getterFor(Y);k.exports=V(Array,"Array",(function(ie,fe){T(this,{type:Y,target:x(ie),index:0,kind:fe})}),(function(){var ie=G(this),fe=ie.target,me=ie.index++;if(!fe||me>=fe.length)return ie.target=null,F(void 0,!0);switch(ie.kind){case"keys":return F(me,!1);case"values":return F(fe[me],!1)}return F([me,fe[me]],!1)}),"values");var ce=C.Arguments=C.Array;if(N("keys"),N("values"),N("entries"),!B&&J&&ce.name!=="values")try{H(ce,"name",{value:"values"})}catch{}},3802:function(k,L,f){var x=f(9504),N=f(7750),C=f(655),A=f(7452),H=x("".replace),V=RegExp("^["+A+"]+"),F=RegExp("(^|[^"+A+"])["+A+"]+$"),B=function(J){return function(Y){var T=C(N(Y));return 1&J&&(T=H(T,V,"")),2&J&&(T=H(T,F,"$1")),T}};k.exports={start:B(1),end:B(2),trim:B(3)}},3851:function(k,L,f){var x=f(6518),N=f(9039),C=f(5397),A=f(7347).f,H=f(3724);x({target:"Object",stat:!0,forced:!H||N((function(){A(1)})),sham:!H},{getOwnPropertyDescriptor:function(V,F){return A(C(V),F)}})},3925:function(k,L,f){var x=f(34);k.exports=function(N){return x(N)||N===null}},3994:function(k,L,f){var x=f(7657).IteratorPrototype,N=f(2360),C=f(6980),A=f(687),H=f(6269),V=function(){return this};k.exports=function(F,B,J,Y){var T=B+" Iterator";return F.prototype=N(x,{next:C(+!Y,J)}),A(F,T,!1,!0),H[T]=V,F}},4055:function(k,L,f){var x=f(4576),N=f(34),C=x.document,A=N(C)&&N(C.createElement);k.exports=function(H){return A?C.createElement(H):{}}},4117:function(k){k.exports=function(L){return L==null}},4209:function(k,L,f){var x=f(8227),N=f(6269),C=x("iterator"),A=Array.prototype;k.exports=function(H){return H!==void 0&&(N.Array===H||A[C]===H)}},4213:function(k,L,f){var x=f(3724),N=f(9504),C=f(9565),A=f(9039),H=f(1072),V=f(3717),F=f(8773),B=f(8981),J=f(7055),Y=Object.assign,T=Object.defineProperty,G=N([].concat);k.exports=!Y||A((function(){if(x&&Y({b:1},Y(T({},"a",{enumerable:!0,get:function(){T(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var ce={},ie={},fe=Symbol("assign detection"),me="abcdefghijklmnopqrst";return ce[fe]=7,me.split("").forEach((function(Me){ie[Me]=Me})),Y({},ce)[fe]!==7||H(Y({},ie)).join("")!==me}))?function(ce,ie){for(var fe=B(ce),me=arguments.length,Me=1,Re=V.f,Ie=F.f;me>Me;)for(var st,He=J(arguments[Me++]),Xe=Re?G(H(He),Re(He)):H(He),et=Xe.length,rt=0;et>rt;)st=Xe[rt++],x&&!C(Ie,He,st)||(fe[st]=He[st]);return fe}:Y},4215:function(k,L,f){var x=f(4576),N=f(2839),C=f(2195),A=function(H){return N.slice(0,H.length)===H};k.exports=A("Bun/")?"BUN":A("Cloudflare-Workers")?"CLOUDFLARE":A("Deno/")?"DENO":A("Node.js/")?"NODE":x.Bun&&typeof Bun.version=="string"?"BUN":x.Deno&&typeof Deno.version=="object"?"DENO":C(x.process)==="process"?"NODE":x.window&&x.document?"BROWSER":"REST"},4270:function(k,L,f){var x=f(9565),N=f(4901),C=f(34),A=TypeError;k.exports=function(H,V){var F,B;if(V==="string"&&N(F=H.toString)&&!C(B=x(F,H))||N(F=H.valueOf)&&!C(B=x(F,H))||V!=="string"&&N(F=H.toString)&&!C(B=x(F,H)))return B;throw new A("Can't convert object to primitive value")}},4376:function(k,L,f){var x=f(2195);k.exports=Array.isArray||function(N){return x(N)==="Array"}},4423:function(k,L,f){var x=f(6518),N=f(9617).includes,C=f(9039),A=f(6469);x({target:"Array",proto:!0,forced:C((function(){return!Array(1).includes()}))},{includes:function(H){return N(this,H,arguments.length>1?arguments[1]:void 0)}}),A("includes")},4428:function(k,L,f){var x=f(8227)("iterator"),N=!1;try{var C=0,A={next:function(){return{done:!!C++}},return:function(){N=!0}};A[x]=function(){return this},Array.from(A,(function(){throw 2}))}catch{}k.exports=function(H,V){try{if(!V&&!N)return!1}catch{return!1}var F=!1;try{var B={};B[x]=function(){return{next:function(){return{done:F=!0}}}},H(B)}catch{}return F}},4488:function(k,L,f){var x=f(7680),N=Math.floor,C=function(A,H){var V=A.length;if(V<8)for(var F,B,J=1;J<V;){for(B=J,F=A[J];B&&H(A[B-1],F)>0;)A[B]=A[--B];B!==J++&&(A[B]=F)}else for(var Y=N(V/2),T=C(x(A,0,Y),H),G=C(x(A,Y),H),ce=T.length,ie=G.length,fe=0,me=0;fe<ce||me<ie;)A[fe+me]=fe<ce&&me<ie?H(T[fe],G[me])<=0?T[fe++]:G[me++]:fe<ce?T[fe++]:G[me++];return A};k.exports=C},4495:function(k,L,f){var x=f(9519),N=f(9039),C=f(4576).String;k.exports=!!Object.getOwnPropertySymbols&&!N((function(){var A=Symbol("symbol detection");return!C(A)||!(Object(A)instanceof Symbol)||!Symbol.sham&&x&&x<41}))},4527:function(k,L,f){var x=f(3724),N=f(4376),C=TypeError,A=Object.getOwnPropertyDescriptor,H=x&&!(function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(V){return V instanceof TypeError}})();k.exports=H?function(V,F){if(N(V)&&!A(V,"length").writable)throw new C("Cannot set read only .length");return V.length=F}:function(V,F){return V.length=F}},4554:function(k,L,f){var x=f(6518),N=f(8981),C=f(5610),A=f(1291),H=f(6198),V=f(4527),F=f(6837),B=f(1469),J=f(4659),Y=f(4606),T=f(597)("splice"),G=Math.max,ce=Math.min;x({target:"Array",proto:!0,forced:!T},{splice:function(ie,fe){var me,Me,Re,Ie,st,He,Xe=N(this),et=H(Xe),rt=C(ie,et),Qe=arguments.length;for(Qe===0?me=Me=0:Qe===1?(me=0,Me=et-rt):(me=Qe-2,Me=ce(G(A(fe),0),et-rt)),F(et+me-Me),Re=B(Xe,Me),Ie=0;Ie<Me;Ie++)(st=rt+Ie)in Xe&&J(Re,Ie,Xe[st]);if(Re.length=Me,me<Me){for(Ie=rt;Ie<et-Me;Ie++)He=Ie+me,(st=Ie+Me)in Xe?Xe[He]=Xe[st]:Y(Xe,He);for(Ie=et;Ie>et-Me+me;Ie--)Y(Xe,Ie-1)}else if(me>Me)for(Ie=et-Me;Ie>rt;Ie--)He=Ie+me-1,(st=Ie+Me-1)in Xe?Xe[He]=Xe[st]:Y(Xe,He);for(Ie=0;Ie<me;Ie++)Xe[Ie+rt]=arguments[Ie+2];return V(Xe,et-Me+me),Re}})},4576:function(k,L,f){var x=function(N){return N&&N.Math===Math&&N};k.exports=x(typeof globalThis=="object"&&globalThis)||x(typeof window=="object"&&window)||x(typeof self=="object"&&self)||x(typeof f.g=="object"&&f.g)||x(typeof this=="object"&&this)||(function(){return this})()||Function("return this")()},4598:function(k,L,f){var x=f(9039);k.exports=function(N,C){var A=[][N];return!!A&&x((function(){A.call(null,C||function(){return 1},1)}))}},4606:function(k,L,f){var x=f(6823),N=TypeError;k.exports=function(C,A){if(!delete C[A])throw new N("Cannot delete property "+x(A)+" of "+x(C))}},4659:function(k,L,f){var x=f(3724),N=f(4913),C=f(6980);k.exports=function(A,H,V){x?N.f(A,H,C(0,V)):A[H]=V}},4782:function(k,L,f){var x=f(6518),N=f(4376),C=f(3517),A=f(34),H=f(5610),V=f(6198),F=f(5397),B=f(4659),J=f(8227),Y=f(597),T=f(7680),G=Y("slice"),ce=J("species"),ie=Array,fe=Math.max;x({target:"Array",proto:!0,forced:!G},{slice:function(me,Me){var Re,Ie,st,He=F(this),Xe=V(He),et=H(me,Xe),rt=H(Me===void 0?Xe:Me,Xe);if(N(He)&&(Re=He.constructor,(C(Re)&&(Re===ie||N(Re.prototype))||A(Re)&&(Re=Re[ce])===null)&&(Re=void 0),Re===ie||Re===void 0))return T(He,et,rt);for(Ie=new(Re===void 0?ie:Re)(fe(rt-et,0)),st=0;et<rt;et++,st++)et in He&&B(Ie,st,He[et]);return Ie.length=st,Ie}})},4864:function(k,L,f){var x=f(3724),N=f(4576),C=f(9504),A=f(2796),H=f(3167),V=f(6699),F=f(2360),B=f(8480).f,J=f(1625),Y=f(788),T=f(655),G=f(1034),ce=f(8429),ie=f(1056),fe=f(6840),me=f(9039),Me=f(9297),Re=f(1181).enforce,Ie=f(7633),st=f(8227),He=f(3635),Xe=f(8814),et=st("match"),rt=N.RegExp,Qe=rt.prototype,At=N.SyntaxError,xt=C(Qe.exec),St=C("".charAt),Le=C("".replace),Ye=C("".indexOf),_e=C("".slice),tt=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,ct=/a/g,it=/a/g,ke=new rt(ct)!==ct,Ke=ce.MISSED_STICKY,ut=ce.UNSUPPORTED_Y;if(A("RegExp",x&&(!ke||Ke||He||Xe||me((function(){return it[et]=!1,rt(ct)!==ct||rt(it)===it||String(rt(ct,"i"))!=="/a/i"}))))){for(var Ct=function(ge,Ee){var le,Ve,nt,mt,wt,vt,_t=J(Qe,this),ye=Y(ge),ze=Ee===void 0,Z=[],te=ge;if(!_t&&ye&&ze&&ge.constructor===Ct)return ge;if((ye||J(Qe,ge))&&(ge=ge.source,ze&&(Ee=G(te))),ge=ge===void 0?"":T(ge),Ee=Ee===void 0?"":T(Ee),te=ge,He&&"dotAll"in ct&&(Ve=!!Ee&&Ye(Ee,"s")>-1)&&(Ee=Le(Ee,/s/g,"")),le=Ee,Ke&&"sticky"in ct&&(nt=!!Ee&&Ye(Ee,"y")>-1)&&ut&&(Ee=Le(Ee,/y/g,"")),Xe&&(mt=(function(Fe){for(var Ge,ot=Fe.length,ht=0,jt="",It=[],Vt=F(null),rs=!1,zt=!1,gs=0,ns="";ht<=ot;ht++){if((Ge=St(Fe,ht))==="\\")Ge+=St(Fe,++ht);else if(Ge==="]")rs=!1;else if(!rs)switch(!0){case Ge==="[":rs=!0;break;case Ge==="(":if(jt+=Ge,_e(Fe,ht+1,ht+3)==="?:")continue;xt(tt,_e(Fe,ht+1))&&(ht+=2,zt=!0),gs++;continue;case(Ge===">"&&zt):if(ns===""||Me(Vt,ns))throw new At("Invalid capture group name");Vt[ns]=!0,It[It.length]=[ns,gs],zt=!1,ns="";continue}zt?ns+=Ge:jt+=Ge}return[jt,It]})(ge),ge=mt[0],Z=mt[1]),wt=H(rt(ge,Ee),_t?this:Qe,Ct),(Ve||nt||Z.length)&&(vt=Re(wt),Ve&&(vt.dotAll=!0,vt.raw=Ct((function(Fe){for(var Ge,ot=Fe.length,ht=0,jt="",It=!1;ht<=ot;ht++)(Ge=St(Fe,ht))!=="\\"?It||Ge!=="."?(Ge==="["?It=!0:Ge==="]"&&(It=!1),jt+=Ge):jt+="[\\s\\S]":jt+=Ge+St(Fe,++ht);return jt})(ge),le)),nt&&(vt.sticky=!0),Z.length&&(vt.groups=Z)),ge!==te)try{V(wt,"source",te===""?"(?:)":te)}catch{}return wt},Et=B(rt),Bt=0;Et.length>Bt;)ie(Ct,rt,Et[Bt++]);Qe.constructor=Ct,Ct.prototype=Qe,fe(N,"RegExp",Ct,{constructor:!0})}Ie("RegExp")},4901:function(k){var L=typeof document=="object"&&document.all;k.exports=L===void 0&&L!==void 0?function(f){return typeof f=="function"||f===L}:function(f){return typeof f=="function"}},4913:function(k,L,f){var x=f(3724),N=f(5917),C=f(8686),A=f(8551),H=f(6969),V=TypeError,F=Object.defineProperty,B=Object.getOwnPropertyDescriptor,J="enumerable",Y="configurable",T="writable";L.f=x?C?function(G,ce,ie){if(A(G),ce=H(ce),A(ie),typeof G=="function"&&ce==="prototype"&&"value"in ie&&T in ie&&!ie[T]){var fe=B(G,ce);fe&&fe[T]&&(G[ce]=ie.value,ie={configurable:Y in ie?ie[Y]:fe[Y],enumerable:J in ie?ie[J]:fe[J],writable:!1})}return F(G,ce,ie)}:F:function(G,ce,ie){if(A(G),ce=H(ce),A(ie),N)try{return F(G,ce,ie)}catch{}if("get"in ie||"set"in ie)throw new V("Accessors not supported");return"value"in ie&&(G[ce]=ie.value),G}},5031:function(k,L,f){var x=f(7751),N=f(9504),C=f(8480),A=f(3717),H=f(8551),V=N([].concat);k.exports=x("Reflect","ownKeys")||function(F){var B=C.f(H(F)),J=A.f;return J?V(B,J(F)):B}},5213:function(k,L,f){var x=f(4576),N=f(9039),C=x.RegExp,A=!N((function(){var H=!0;try{C(".","d")}catch{H=!1}var V={},F="",B=H?"dgimsy":"gimsy",J=function(G,ce){Object.defineProperty(V,G,{get:function(){return F+=ce,!0}})},Y={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var T in H&&(Y.hasIndices="d"),Y)J(T,Y[T]);return Object.getOwnPropertyDescriptor(C.prototype,"flags").get.call(V)!==B||F!==B}));k.exports={correct:A}},5276:function(k,L,f){var x=f(6518),N=f(7476),C=f(9617).indexOf,A=f(4598),H=N([].indexOf),V=!!H&&1/H([1],1,-0)<0;x({target:"Array",proto:!0,forced:V||!A("indexOf")},{indexOf:function(F){var B=arguments.length>1?arguments[1]:void 0;return V?H(this,F,B)||0:C(this,F,B)}})},5397:function(k,L,f){var x=f(7055),N=f(7750);k.exports=function(C){return x(N(C))}},5440:function(k,L,f){var x=f(8745),N=f(9565),C=f(9504),A=f(9228),H=f(9039),V=f(8551),F=f(4901),B=f(34),J=f(1291),Y=f(8014),T=f(655),G=f(7750),ce=f(7829),ie=f(5966),fe=f(2478),me=f(1034),Me=f(6682),Re=f(8227)("replace"),Ie=Math.max,st=Math.min,He=C([].concat),Xe=C([].push),et=C("".indexOf),rt=C("".slice),Qe="a".replace(/./,"$0")==="$0",At=!!/./[Re]&&/./[Re]("a","$0")==="";A("replace",(function(xt,St,Le){var Ye=At?"$":"$0";return[function(_e,tt){var ct=G(this),it=B(_e)?ie(_e,Re):void 0;return it?N(it,_e,ct,tt):N(St,T(ct),_e,tt)},function(_e,tt){var ct=V(this),it=T(_e);if(typeof tt=="string"&&et(tt,Ye)===-1&&et(tt,"$<")===-1){var ke=Le(St,ct,it,tt);if(ke.done)return ke.value}var Ke=F(tt);Ke||(tt=T(tt));var ut,Ct=T(me(ct)),Et=et(Ct,"g")!==-1;Et&&(ut=et(Ct,"u")!==-1,ct.lastIndex=0);for(var Bt,ge=[];(Bt=Me(ct,it))!==null&&(Xe(ge,Bt),Et);)T(Bt[0])===""&&(ct.lastIndex=ce(it,Y(ct.lastIndex),ut));for(var Ee,le="",Ve=0,nt=0;nt<ge.length;nt++){for(var mt,wt=T((Bt=ge[nt])[0]),vt=Ie(st(J(Bt.index),it.length),0),_t=[],ye=1;ye<Bt.length;ye++)Xe(_t,(Ee=Bt[ye])===void 0?Ee:String(Ee));var ze=Bt.groups;if(Ke){var Z=He([wt],_t,vt,it);ze!==void 0&&Xe(Z,ze),mt=T(x(tt,void 0,Z))}else mt=fe(wt,it,vt,_t,ze,tt);vt>=Ve&&(le+=rt(it,Ve,vt)+mt,Ve=vt+wt.length)}return le+rt(it,Ve)}]}),!!H((function(){var xt=/./;return xt.exec=function(){var St=[];return St.groups={a:"7"},St},"".replace(xt,"$<a>")!=="7"}))||!Qe||At)},5548:function(k,L,f){var x=f(3517),N=f(6823),C=TypeError;k.exports=function(A){if(x(A))return A;throw new C(N(A)+" is not a constructor")}},5610:function(k,L,f){var x=f(1291),N=Math.max,C=Math.min;k.exports=function(A,H){var V=x(A);return V<0?N(V+H,0):C(V,H)}},5700:function(k,L,f){var x=f(511),N=f(8242);x("toPrimitive"),N()},5745:function(k,L,f){var x=f(7629);k.exports=function(N,C){return x[N]||(x[N]=C||{})}},5749:function(k,L,f){var x=f(788),N=TypeError;k.exports=function(C){if(x(C))throw new N("The method doesn't accept regular expressions");return C}},5917:function(k,L,f){var x=f(3724),N=f(9039),C=f(4055);k.exports=!x&&!N((function(){return Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a!==7}))},5966:function(k,L,f){var x=f(9306),N=f(4117);k.exports=function(C,A){var H=C[A];return N(H)?void 0:x(H)}},6080:function(k,L,f){var x=f(7476),N=f(9306),C=f(616),A=x(x.bind);k.exports=function(H,V){return N(H),V===void 0?H:C?A(H,V):function(){return H.apply(V,arguments)}}},6099:function(k,L,f){var x=f(2140),N=f(6840),C=f(3179);x||N(Object.prototype,"toString",C,{unsafe:!0})},6119:function(k,L,f){var x=f(5745),N=f(3392),C=x("keys");k.exports=function(A){return C[A]||(C[A]=N(A))}},6193:function(k,L,f){var x=f(4215);k.exports=x==="NODE"},6198:function(k,L,f){var x=f(8014);k.exports=function(N){return x(N.length)}},6269:function(k){k.exports={}},6319:function(k,L,f){var x=f(8551),N=f(9539);k.exports=function(C,A,H,V){try{return V?A(x(H)[0],H[1]):A(H)}catch(F){N(C,"throw",F)}}},6395:function(k){k.exports=!1},6469:function(k,L,f){var x=f(8227),N=f(2360),C=f(4913).f,A=x("unscopables"),H=Array.prototype;H[A]===void 0&&C(H,A,{configurable:!0,value:N(null)}),k.exports=function(V){H[A][V]=!0}},6518:function(k,L,f){var x=f(4576),N=f(7347).f,C=f(6699),A=f(6840),H=f(9433),V=f(7740),F=f(2796);k.exports=function(B,J){var Y,T,G,ce,ie,fe=B.target,me=B.global,Me=B.stat;if(Y=me?x:Me?x[fe]||H(fe,{}):x[fe]&&x[fe].prototype)for(T in J){if(ce=J[T],G=B.dontCallGetSet?(ie=N(Y,T))&&ie.value:Y[T],!F(me?T:fe+(Me?".":"#")+T,B.forced)&&G!==void 0){if(typeof ce==typeof G)continue;V(ce,G)}(B.sham||G&&G.sham)&&C(ce,"sham",!0),A(Y,T,ce,B)}}},6682:function(k,L,f){var x=f(9565),N=f(8551),C=f(4901),A=f(2195),H=f(7323),V=TypeError;k.exports=function(F,B){var J=F.exec;if(C(J)){var Y=x(J,F,B);return Y!==null&&N(Y),Y}if(A(F)==="RegExp")return x(H,F,B);throw new V("RegExp#exec called on incompatible receiver")}},6699:function(k,L,f){var x=f(3724),N=f(4913),C=f(6980);k.exports=x?function(A,H,V){return N.f(A,H,C(1,V))}:function(A,H,V){return A[H]=V,A}},6706:function(k,L,f){var x=f(9504),N=f(9306);k.exports=function(C,A,H){try{return x(N(Object.getOwnPropertyDescriptor(C,A)[H]))}catch{}}},6761:function(k,L,f){var x=f(6518),N=f(4576),C=f(9565),A=f(9504),H=f(6395),V=f(3724),F=f(4495),B=f(9039),J=f(9297),Y=f(1625),T=f(8551),G=f(5397),ce=f(6969),ie=f(655),fe=f(6980),me=f(2360),Me=f(1072),Re=f(8480),Ie=f(298),st=f(3717),He=f(7347),Xe=f(4913),et=f(6801),rt=f(8773),Qe=f(6840),At=f(2106),xt=f(5745),St=f(6119),Le=f(421),Ye=f(3392),_e=f(8227),tt=f(1951),ct=f(511),it=f(8242),ke=f(687),Ke=f(1181),ut=f(9213).forEach,Ct=St("hidden"),Et="Symbol",Bt="prototype",ge=Ke.set,Ee=Ke.getterFor(Et),le=Object[Bt],Ve=N.Symbol,nt=Ve&&Ve[Bt],mt=N.RangeError,wt=N.TypeError,vt=N.QObject,_t=He.f,ye=Xe.f,ze=Ie.f,Z=rt.f,te=A([].push),Fe=xt("symbols"),Ge=xt("op-symbols"),ot=xt("wks"),ht=!vt||!vt[Bt]||!vt[Bt].findChild,jt=function(Ot,gt,Tt){var qt=_t(le,gt);qt&&delete le[gt],ye(Ot,gt,Tt),qt&&Ot!==le&&ye(le,gt,qt)},It=V&&B((function(){return me(ye({},"a",{get:function(){return ye(this,"a",{value:7}).a}})).a!==7}))?jt:ye,Vt=function(Ot,gt){var Tt=Fe[Ot]=me(nt);return ge(Tt,{type:Et,tag:Ot,description:gt}),V||(Tt.description=gt),Tt},rs=function(Ot,gt,Tt){Ot===le&&rs(Ge,gt,Tt),T(Ot);var qt=ce(gt);return T(Tt),J(Fe,qt)?(Tt.enumerable?(J(Ot,Ct)&&Ot[Ct][qt]&&(Ot[Ct][qt]=!1),Tt=me(Tt,{enumerable:fe(0,!1)})):(J(Ot,Ct)||ye(Ot,Ct,fe(1,me(null))),Ot[Ct][qt]=!0),It(Ot,qt,Tt)):ye(Ot,qt,Tt)},zt=function(Ot,gt){T(Ot);var Tt=G(gt),qt=Me(Tt).concat(js(Tt));return ut(qt,(function(is){V&&!C(gs,Tt,is)||rs(Ot,is,Tt[is])})),Ot},gs=function(Ot){var gt=ce(Ot),Tt=C(Z,this,gt);return!(this===le&&J(Fe,gt)&&!J(Ge,gt))&&(!(Tt||!J(this,gt)||!J(Fe,gt)||J(this,Ct)&&this[Ct][gt])||Tt)},ns=function(Ot,gt){var Tt=G(Ot),qt=ce(gt);if(Tt!==le||!J(Fe,qt)||J(Ge,qt)){var is=_t(Tt,qt);return!is||!J(Fe,qt)||J(Tt,Ct)&&Tt[Ct][qt]||(is.enumerable=!0),is}},xs=function(Ot){var gt=ze(G(Ot)),Tt=[];return ut(gt,(function(qt){J(Fe,qt)||J(Le,qt)||te(Tt,qt)})),Tt},js=function(Ot){var gt=Ot===le,Tt=ze(gt?Ge:G(Ot)),qt=[];return ut(Tt,(function(is){!J(Fe,is)||gt&&!J(le,is)||te(qt,Fe[is])})),qt};F||(Ve=function(){if(Y(nt,this))throw new wt("Symbol is not a constructor");var Ot=arguments.length&&arguments[0]!==void 0?ie(arguments[0]):void 0,gt=Ye(Ot),Tt=function(qt){var is=this===void 0?N:this;is===le&&C(Tt,Ge,qt),J(is,Ct)&&J(is[Ct],gt)&&(is[Ct][gt]=!1);var Zt=fe(1,qt);try{It(is,gt,Zt)}catch(Vs){if(!(Vs instanceof mt))throw Vs;jt(is,gt,Zt)}};return V&&ht&&It(le,gt,{configurable:!0,set:Tt}),Vt(gt,Ot)},Qe(nt=Ve[Bt],"toString",(function(){return Ee(this).tag})),Qe(Ve,"withoutSetter",(function(Ot){return Vt(Ye(Ot),Ot)})),rt.f=gs,Xe.f=rs,et.f=zt,He.f=ns,Re.f=Ie.f=xs,st.f=js,tt.f=function(Ot){return Vt(_e(Ot),Ot)},V&&(At(nt,"description",{configurable:!0,get:function(){return Ee(this).description}}),H||Qe(le,"propertyIsEnumerable",gs,{unsafe:!0}))),x({global:!0,constructor:!0,wrap:!0,forced:!F,sham:!F},{Symbol:Ve}),ut(Me(ot),(function(Ot){ct(Ot)})),x({target:Et,stat:!0,forced:!F},{useSetter:function(){ht=!0},useSimple:function(){ht=!1}}),x({target:"Object",stat:!0,forced:!F,sham:!V},{create:function(Ot,gt){return gt===void 0?me(Ot):zt(me(Ot),gt)},defineProperty:rs,defineProperties:zt,getOwnPropertyDescriptor:ns}),x({target:"Object",stat:!0,forced:!F},{getOwnPropertyNames:xs}),it(),ke(Ve,Et),Le[Ct]=!0},6801:function(k,L,f){var x=f(3724),N=f(8686),C=f(4913),A=f(8551),H=f(5397),V=f(1072);L.f=x&&!N?Object.defineProperties:function(F,B){A(F);for(var J,Y=H(B),T=V(B),G=T.length,ce=0;G>ce;)C.f(F,J=T[ce++],Y[J]);return F}},6823:function(k){var L=String;k.exports=function(f){try{return L(f)}catch{return"Object"}}},6837:function(k){var L=TypeError;k.exports=function(f){if(f>9007199254740991)throw L("Maximum allowed index exceeded");return f}},6840:function(k,L,f){var x=f(4901),N=f(4913),C=f(283),A=f(9433);k.exports=function(H,V,F,B){B||(B={});var J=B.enumerable,Y=B.name!==void 0?B.name:V;if(x(F)&&C(F,Y,B),B.global)J?H[V]=F:A(V,F);else{try{B.unsafe?H[V]&&(J=!0):delete H[V]}catch{}J?H[V]=F:N.f(H,V,{value:F,enumerable:!1,configurable:!B.nonConfigurable,writable:!B.nonWritable})}return H}},6910:function(k,L,f){var x=f(6518),N=f(9504),C=f(9306),A=f(8981),H=f(6198),V=f(4606),F=f(655),B=f(9039),J=f(4488),Y=f(4598),T=f(3709),G=f(3763),ce=f(9519),ie=f(3607),fe=[],me=N(fe.sort),Me=N(fe.push),Re=B((function(){fe.sort(void 0)})),Ie=B((function(){fe.sort(null)})),st=Y("sort"),He=!B((function(){if(ce)return ce<70;if(!(T&&T>3)){if(G)return!0;if(ie)return ie<603;var Xe,et,rt,Qe,At="";for(Xe=65;Xe<76;Xe++){switch(et=String.fromCharCode(Xe),Xe){case 66:case 69:case 70:case 72:rt=3;break;case 68:case 71:rt=4;break;default:rt=2}for(Qe=0;Qe<47;Qe++)fe.push({k:et+Qe,v:rt})}for(fe.sort((function(xt,St){return St.v-xt.v})),Qe=0;Qe<fe.length;Qe++)et=fe[Qe].k.charAt(0),At.charAt(At.length-1)!==et&&(At+=et);return At!=="DGBEFHACIJK"}}));x({target:"Array",proto:!0,forced:Re||!Ie||!st||!He},{sort:function(Xe){Xe!==void 0&&C(Xe);var et=A(this);if(He)return Xe===void 0?me(et):me(et,Xe);var rt,Qe,At=[],xt=H(et);for(Qe=0;Qe<xt;Qe++)Qe in et&&Me(At,et[Qe]);for(J(At,(function(St){return function(Le,Ye){return Ye===void 0?-1:Le===void 0?1:St!==void 0?+St(Le,Ye)||0:F(Le)>F(Ye)?1:-1}})(Xe)),rt=H(At),Qe=0;Qe<rt;)et[Qe]=At[Qe++];for(;Qe<xt;)V(et,Qe++);return et}})},6933:function(k,L,f){var x=f(9504),N=f(4376),C=f(4901),A=f(2195),H=f(655),V=x([].push);k.exports=function(F){if(C(F))return F;if(N(F)){for(var B=F.length,J=[],Y=0;Y<B;Y++){var T=F[Y];typeof T=="string"?V(J,T):typeof T!="number"&&A(T)!=="Number"&&A(T)!=="String"||V(J,H(T))}var G=J.length,ce=!0;return function(ie,fe){if(ce)return ce=!1,fe;if(N(this))return fe;for(var me=0;me<G;me++)if(J[me]===ie)return fe}}}},6955:function(k,L,f){var x=f(2140),N=f(4901),C=f(2195),A=f(8227)("toStringTag"),H=Object,V=C((function(){return arguments})())==="Arguments";k.exports=x?C:function(F){var B,J,Y;return F===void 0?"Undefined":F===null?"Null":typeof(J=(function(T,G){try{return T[G]}catch{}})(B=H(F),A))=="string"?J:V?C(B):(Y=C(B))==="Object"&&N(B.callee)?"Arguments":Y}},6969:function(k,L,f){var x=f(2777),N=f(757);k.exports=function(C){var A=x(C,"string");return N(A)?A:A+""}},6980:function(k){k.exports=function(L,f){return{enumerable:!(1&L),configurable:!(2&L),writable:!(4&L),value:f}}},7040:function(k,L,f){var x=f(4495);k.exports=x&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},7055:function(k,L,f){var x=f(9504),N=f(9039),C=f(2195),A=Object,H=x("".split);k.exports=N((function(){return!A("z").propertyIsEnumerable(0)}))?function(V){return C(V)==="String"?H(V,""):A(V)}:A},7323:function(k,L,f){var x,N,C=f(9565),A=f(9504),H=f(655),V=f(7979),F=f(8429),B=f(5745),J=f(2360),Y=f(1181).get,T=f(3635),G=f(8814),ce=B("native-string-replace",String.prototype.replace),ie=RegExp.prototype.exec,fe=ie,me=A("".charAt),Me=A("".indexOf),Re=A("".replace),Ie=A("".slice),st=(N=/b*/g,C(ie,x=/a/,"a"),C(ie,N,"a"),x.lastIndex!==0||N.lastIndex!==0),He=F.BROKEN_CARET,Xe=/()??/.exec("")[1]!==void 0;(st||Xe||He||T||G)&&(fe=function(et){var rt,Qe,At,xt,St,Le,Ye,_e=this,tt=Y(_e),ct=H(et),it=tt.raw;if(it)return it.lastIndex=_e.lastIndex,rt=C(fe,it,ct),_e.lastIndex=it.lastIndex,rt;var ke=tt.groups,Ke=He&&_e.sticky,ut=C(V,_e),Ct=_e.source,Et=0,Bt=ct;if(Ke&&(ut=Re(ut,"y",""),Me(ut,"g")===-1&&(ut+="g"),Bt=Ie(ct,_e.lastIndex),_e.lastIndex>0&&(!_e.multiline||_e.multiline&&me(ct,_e.lastIndex-1)!==`
`)&&(Ct="(?: "+Ct+")",Bt=" "+Bt,Et++),Qe=new RegExp("^(?:"+Ct+")",ut)),Xe&&(Qe=new RegExp("^"+Ct+"$(?!\\s)",ut)),st&&(At=_e.lastIndex),xt=C(ie,Ke?Qe:_e,Bt),Ke?xt?(xt.input=Ie(xt.input,Et),xt[0]=Ie(xt[0],Et),xt.index=_e.lastIndex,_e.lastIndex+=xt[0].length):_e.lastIndex=0:st&&xt&&(_e.lastIndex=_e.global?xt.index+xt[0].length:At),Xe&&xt&&xt.length>1&&C(ce,xt[0],Qe,(function(){for(St=1;St<arguments.length-2;St++)arguments[St]===void 0&&(xt[St]=void 0)})),xt&&ke)for(xt.groups=Le=J(null),St=0;St<ke.length;St++)Le[(Ye=ke[St])[0]]=xt[Ye[1]];return xt}),k.exports=fe},7347:function(k,L,f){var x=f(3724),N=f(9565),C=f(8773),A=f(6980),H=f(5397),V=f(6969),F=f(9297),B=f(5917),J=Object.getOwnPropertyDescriptor;L.f=x?J:function(Y,T){if(Y=H(Y),T=V(T),B)try{return J(Y,T)}catch{}if(F(Y,T))return A(!N(C.f,Y,T),Y[T])}},7400:function(k){k.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},7427:function(k,L,f){var x=f(6518),N=f(3724),C=f(2551),A=f(9306),H=f(8981),V=f(4913);N&&x({target:"Object",proto:!0,forced:C},{__defineGetter__:function(F,B){V.f(H(this),F,{get:A(B),enumerable:!0,configurable:!0})}})},7433:function(k,L,f){var x=f(4376),N=f(3517),C=f(34),A=f(8227)("species"),H=Array;k.exports=function(V){var F;return x(V)&&(F=V.constructor,(N(F)&&(F===H||x(F.prototype))||C(F)&&(F=F[A])===null)&&(F=void 0)),F===void 0?H:F}},7452:function(k){k.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},7476:function(k,L,f){var x=f(2195),N=f(9504);k.exports=function(C){if(x(C)==="Function")return N(C)}},7495:function(k,L,f){var x=f(6518),N=f(7323);x({target:"RegExp",proto:!0,forced:/./.exec!==N},{exec:N})},7629:function(k,L,f){var x=f(6395),N=f(4576),C=f(9433),A="__core-js_shared__",H=k.exports=N[A]||C(A,{});(H.versions||(H.versions=[])).push({version:"3.45.1",mode:x?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"})},7633:function(k,L,f){var x=f(7751),N=f(2106),C=f(8227),A=f(3724),H=C("species");k.exports=function(V){var F=x(V);A&&F&&!F[H]&&N(F,H,{configurable:!0,get:function(){return this}})}},7657:function(k,L,f){var x,N,C,A=f(9039),H=f(4901),V=f(34),F=f(2360),B=f(2787),J=f(6840),Y=f(8227),T=f(6395),G=Y("iterator"),ce=!1;[].keys&&("next"in(C=[].keys())?(N=B(B(C)))!==Object.prototype&&(x=N):ce=!0),!V(x)||A((function(){var ie={};return x[G].call(ie)!==ie}))?x={}:T&&(x=F(x)),H(x[G])||J(x,G,(function(){return this})),k.exports={IteratorPrototype:x,BUGGY_SAFARI_ITERATORS:ce}},7680:function(k,L,f){var x=f(9504);k.exports=x([].slice)},7740:function(k,L,f){var x=f(9297),N=f(5031),C=f(7347),A=f(4913);k.exports=function(H,V,F){for(var B=N(V),J=A.f,Y=C.f,T=0;T<B.length;T++){var G=B[T];x(H,G)||F&&x(F,G)||J(H,G,Y(V,G))}}},7750:function(k,L,f){var x=f(4117),N=TypeError;k.exports=function(C){if(x(C))throw new N("Can't call method on "+C);return C}},7751:function(k,L,f){var x=f(4576),N=f(4901);k.exports=function(C,A){return arguments.length<2?(H=x[C],N(H)?H:void 0):x[C]&&x[C][A];var H}},7764:function(k,L,f){var x=f(8183).charAt,N=f(655),C=f(1181),A=f(1088),H=f(2529),V="String Iterator",F=C.set,B=C.getterFor(V);A(String,"String",(function(J){F(this,{type:V,string:N(J),index:0})}),(function(){var J,Y=B(this),T=Y.string,G=Y.index;return G>=T.length?H(void 0,!0):(J=x(T,G),Y.index+=J.length,H(J,!1))}))},7812:function(k,L,f){var x=f(6518),N=f(9297),C=f(757),A=f(6823),H=f(5745),V=f(1296),F=H("symbol-to-string-registry");x({target:"Symbol",stat:!0,forced:!V},{keyFor:function(B){if(!C(B))throw new TypeError(A(B)+" is not a symbol");if(N(F,B))return F[B]}})},7829:function(k,L,f){var x=f(8183).charAt;k.exports=function(N,C,A){return C+(A?x(N,C).length:1)}},7916:function(k,L,f){var x=f(6080),N=f(9565),C=f(8981),A=f(6319),H=f(4209),V=f(3517),F=f(6198),B=f(4659),J=f(81),Y=f(851),T=Array;k.exports=function(G){var ce=C(G),ie=V(this),fe=arguments.length,me=fe>1?arguments[1]:void 0,Me=me!==void 0;Me&&(me=x(me,fe>2?arguments[2]:void 0));var Re,Ie,st,He,Xe,et,rt=Y(ce),Qe=0;if(!rt||this===T&&H(rt))for(Re=F(ce),Ie=ie?new this(Re):T(Re);Re>Qe;Qe++)et=Me?me(ce[Qe],Qe):ce[Qe],B(Ie,Qe,et);else for(Ie=ie?new this:[],Xe=(He=J(ce,rt)).next;!(st=N(Xe,He)).done;Qe++)et=Me?A(He,me,[st.value,Qe],!0):st.value,B(Ie,Qe,et);return Ie.length=Qe,Ie}},7979:function(k,L,f){var x=f(8551);k.exports=function(){var N=x(this),C="";return N.hasIndices&&(C+="d"),N.global&&(C+="g"),N.ignoreCase&&(C+="i"),N.multiline&&(C+="m"),N.dotAll&&(C+="s"),N.unicode&&(C+="u"),N.unicodeSets&&(C+="v"),N.sticky&&(C+="y"),C}},8014:function(k,L,f){var x=f(1291),N=Math.min;k.exports=function(C){var A=x(C);return A>0?N(A,9007199254740991):0}},8183:function(k,L,f){var x=f(9504),N=f(1291),C=f(655),A=f(7750),H=x("".charAt),V=x("".charCodeAt),F=x("".slice),B=function(J){return function(Y,T){var G,ce,ie=C(A(Y)),fe=N(T),me=ie.length;return fe<0||fe>=me?J?"":void 0:(G=V(ie,fe))<55296||G>56319||fe+1===me||(ce=V(ie,fe+1))<56320||ce>57343?J?H(ie,fe):G:J?F(ie,fe,fe+2):ce-56320+(G-55296<<10)+65536}};k.exports={codeAt:B(!1),charAt:B(!0)}},8227:function(k,L,f){var x=f(4576),N=f(5745),C=f(9297),A=f(3392),H=f(4495),V=f(7040),F=x.Symbol,B=N("wks"),J=V?F.for||F:F&&F.withoutSetter||A;k.exports=function(Y){return C(B,Y)||(B[Y]=H&&C(F,Y)?F[Y]:J("Symbol."+Y)),B[Y]}},8242:function(k,L,f){var x=f(9565),N=f(7751),C=f(8227),A=f(6840);k.exports=function(){var H=N("Symbol"),V=H&&H.prototype,F=V&&V.valueOf,B=C("toPrimitive");V&&!V[B]&&A(V,B,(function(J){return x(F,this)}),{arity:1})}},8344:function(k,L,f){f(8543)},8429:function(k,L,f){var x=f(9039),N=f(4576).RegExp,C=x((function(){var V=N("a","y");return V.lastIndex=2,V.exec("abcd")!==null})),A=C||x((function(){return!N("a","y").sticky})),H=C||x((function(){var V=N("^r","gy");return V.lastIndex=2,V.exec("str")!==null}));k.exports={BROKEN_CARET:H,MISSED_STICKY:A,UNSUPPORTED_Y:C}},8480:function(k,L,f){var x=f(1828),N=f(8727).concat("length","prototype");L.f=Object.getOwnPropertyNames||function(C){return x(C,N)}},8543:function(k,L,f){var x=f(6518),N=f(9565),C=f(7476),A=f(3994),H=f(2529),V=f(7750),F=f(8014),B=f(655),J=f(8551),Y=f(34),T=f(2195),G=f(788),ce=f(1034),ie=f(5966),fe=f(6840),me=f(9039),Me=f(8227),Re=f(2293),Ie=f(7829),st=f(6682),He=f(1181),Xe=f(6395),et=Me("matchAll"),rt="RegExp String",Qe=rt+" Iterator",At=He.set,xt=He.getterFor(Qe),St=RegExp.prototype,Le=TypeError,Ye=C("".indexOf),_e=C("".matchAll),tt=!!_e&&!me((function(){_e("a",/./)})),ct=A((function(ke,Ke,ut,Ct){At(this,{type:Qe,regexp:ke,string:Ke,global:ut,unicode:Ct,done:!1})}),rt,(function(){var ke=xt(this);if(ke.done)return H(void 0,!0);var Ke=ke.regexp,ut=ke.string,Ct=st(Ke,ut);return Ct===null?(ke.done=!0,H(void 0,!0)):ke.global?(B(Ct[0])===""&&(Ke.lastIndex=Ie(ut,F(Ke.lastIndex),ke.unicode)),H(Ct,!1)):(ke.done=!0,H(Ct,!1))})),it=function(ke){var Ke,ut,Ct,Et=J(this),Bt=B(ke),ge=Re(Et,RegExp),Ee=B(ce(Et));return Ke=new ge(ge===RegExp?Et.source:Et,Ee),ut=!!~Ye(Ee,"g"),Ct=!!~Ye(Ee,"u"),Ke.lastIndex=F(Et.lastIndex),new ct(Ke,Bt,ut,Ct)};x({target:"String",proto:!0,forced:tt},{matchAll:function(ke){var Ke,ut,Ct,Et,Bt=V(this);if(Y(ke)){if(G(ke)&&(Ke=B(V(ce(ke))),!~Ye(Ke,"g")))throw new Le("`.matchAll` does not allow non-global regexes");if(tt)return _e(Bt,ke);if((Ct=ie(ke,et))===void 0&&Xe&&T(ke)==="RegExp"&&(Ct=it),Ct)return N(Ct,ke,Bt)}else if(tt)return _e(Bt,ke);return ut=B(Bt),Et=new RegExp(ke,"g"),Xe?N(it,Et,ut):Et[et](ut)}}),Xe||et in St||fe(St,et,it)},8551:function(k,L,f){var x=f(34),N=String,C=TypeError;k.exports=function(A){if(x(A))return A;throw new C(N(A)+" is not an object")}},8598:function(k,L,f){var x=f(6518),N=f(9504),C=f(7055),A=f(5397),H=f(4598),V=N([].join);x({target:"Array",proto:!0,forced:C!==Object||!H("join",",")},{join:function(F){return V(A(this),F===void 0?",":F)}})},8622:function(k,L,f){var x=f(4576),N=f(4901),C=x.WeakMap;k.exports=N(C)&&/native code/.test(String(C))},8686:function(k,L,f){var x=f(3724),N=f(9039);k.exports=x&&N((function(){return Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype!==42}))},8706:function(k,L,f){var x=f(6518),N=f(9039),C=f(4376),A=f(34),H=f(8981),V=f(6198),F=f(6837),B=f(4659),J=f(1469),Y=f(597),T=f(8227),G=f(9519),ce=T("isConcatSpreadable"),ie=G>=51||!N((function(){var me=[];return me[ce]=!1,me.concat()[0]!==me})),fe=function(me){if(!A(me))return!1;var Me=me[ce];return Me!==void 0?!!Me:C(me)};x({target:"Array",proto:!0,arity:1,forced:!ie||!Y("concat")},{concat:function(me){var Me,Re,Ie,st,He,Xe=H(this),et=J(Xe,0),rt=0;for(Me=-1,Ie=arguments.length;Me<Ie;Me++)if(fe(He=Me===-1?Xe:arguments[Me]))for(st=V(He),F(rt+st),Re=0;Re<st;Re++,rt++)Re in He&&B(et,rt,He[Re]);else F(rt+1),B(et,rt++,He);return et.length=rt,et}})},8727:function(k){k.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:function(k,L,f){var x=f(616),N=Function.prototype,C=N.apply,A=N.call;k.exports=typeof Reflect=="object"&&Reflect.apply||(x?A.bind(C):function(){return A.apply(C,arguments)})},8773:function(k,L){var f={}.propertyIsEnumerable,x=Object.getOwnPropertyDescriptor,N=x&&!f.call({1:2},1);L.f=N?function(C){var A=x(this,C);return!!A&&A.enumerable}:f},8781:function(k,L,f){var x=f(350).PROPER,N=f(6840),C=f(8551),A=f(655),H=f(9039),V=f(1034),F="toString",B=RegExp.prototype,J=B[F],Y=H((function(){return J.call({source:"a",flags:"b"})!=="/a/b"})),T=x&&J.name!==F;(Y||T)&&N(B,F,(function(){var G=C(this);return"/"+A(G.source)+"/"+A(V(G))}),{unsafe:!0})},8814:function(k,L,f){var x=f(9039),N=f(4576).RegExp;k.exports=x((function(){var C=N("(?<a>b)","g");return C.exec("b").groups.a!=="b"||"b".replace(C,"$<a>c")!=="bc"}))},8981:function(k,L,f){var x=f(7750),N=Object;k.exports=function(C){return N(x(C))}},9039:function(k){k.exports=function(L){try{return!!L()}catch{return!0}}},9085:function(k,L,f){var x=f(6518),N=f(4213);x({target:"Object",stat:!0,arity:2,forced:Object.assign!==N},{assign:N})},9167:function(k,L,f){var x=f(4576);k.exports=x},9213:function(k,L,f){var x=f(6080),N=f(9504),C=f(7055),A=f(8981),H=f(6198),V=f(1469),F=N([].push),B=function(J){var Y=J===1,T=J===2,G=J===3,ce=J===4,ie=J===6,fe=J===7,me=J===5||ie;return function(Me,Re,Ie,st){for(var He,Xe,et=A(Me),rt=C(et),Qe=H(rt),At=x(Re,Ie),xt=0,St=st||V,Le=Y?St(Me,Qe):T||fe?St(Me,0):void 0;Qe>xt;xt++)if((me||xt in rt)&&(Xe=At(He=rt[xt],xt,et),J))if(Y)Le[xt]=Xe;else if(Xe)switch(J){case 3:return!0;case 5:return He;case 6:return xt;case 2:F(Le,He)}else switch(J){case 4:return!1;case 7:F(Le,He)}return ie?-1:G||ce?ce:Le}};k.exports={forEach:B(0),map:B(1),filter:B(2),some:B(3),every:B(4),find:B(5),findIndex:B(6),filterReject:B(7)}},9228:function(k,L,f){f(7495);var x=f(9565),N=f(6840),C=f(7323),A=f(9039),H=f(8227),V=f(6699),F=H("species"),B=RegExp.prototype;k.exports=function(J,Y,T,G){var ce=H(J),ie=!A((function(){var Re={};return Re[ce]=function(){return 7},""[J](Re)!==7})),fe=ie&&!A((function(){var Re=!1,Ie=/a/;return J==="split"&&((Ie={}).constructor={},Ie.constructor[F]=function(){return Ie},Ie.flags="",Ie[ce]=/./[ce]),Ie.exec=function(){return Re=!0,null},Ie[ce](""),!Re}));if(!ie||!fe||T){var me=/./[ce],Me=Y(ce,""[J],(function(Re,Ie,st,He,Xe){var et=Ie.exec;return et===C||et===B.exec?ie&&!Xe?{done:!0,value:x(me,Ie,st,He)}:{done:!0,value:x(Re,st,Ie,He)}:{done:!1}}));N(String.prototype,J,Me[0]),N(B,ce,Me[1])}G&&V(B[ce],"sham",!0)}},9296:function(k,L,f){var x=f(4055)("span").classList,N=x&&x.constructor&&x.constructor.prototype;k.exports=N===Object.prototype?void 0:N},9297:function(k,L,f){var x=f(9504),N=f(8981),C=x({}.hasOwnProperty);k.exports=Object.hasOwn||function(A,H){return C(N(A),H)}},9306:function(k,L,f){var x=f(4901),N=f(6823),C=TypeError;k.exports=function(A){if(x(A))return A;throw new C(N(A)+" is not a function")}},9432:function(k,L,f){var x=f(6518),N=f(8981),C=f(1072);x({target:"Object",stat:!0,forced:f(9039)((function(){C(1)}))},{keys:function(A){return C(N(A))}})},9433:function(k,L,f){var x=f(4576),N=Object.defineProperty;k.exports=function(C,A){try{N(x,C,{value:A,configurable:!0,writable:!0})}catch{x[C]=A}return A}},9463:function(k,L,f){var x=f(6518),N=f(3724),C=f(4576),A=f(9504),H=f(9297),V=f(4901),F=f(1625),B=f(655),J=f(2106),Y=f(7740),T=C.Symbol,G=T&&T.prototype;if(N&&V(T)&&(!("description"in G)||T().description!==void 0)){var ce={},ie=function(){var He=arguments.length<1||arguments[0]===void 0?void 0:B(arguments[0]),Xe=F(G,this)?new T(He):He===void 0?T():T(He);return He===""&&(ce[Xe]=!0),Xe};Y(ie,T),ie.prototype=G,G.constructor=ie;var fe=String(T("description detection"))==="Symbol(description detection)",me=A(G.valueOf),Me=A(G.toString),Re=/^Symbol\((.*)\)[^)]+$/,Ie=A("".replace),st=A("".slice);J(G,"description",{configurable:!0,get:function(){var He=me(this);if(H(ce,He))return"";var Xe=Me(He),et=fe?st(Xe,7,-1):Ie(Xe,Re,"$1");return et===""?void 0:et}}),x({global:!0,constructor:!0,forced:!0},{Symbol:ie})}},9504:function(k,L,f){var x=f(616),N=Function.prototype,C=N.call,A=x&&N.bind.bind(C,C);k.exports=x?A:function(H){return function(){return C.apply(H,arguments)}}},9519:function(k,L,f){var x,N,C=f(4576),A=f(2839),H=C.process,V=C.Deno,F=H&&H.versions||V&&V.version,B=F&&F.v8;B&&(N=(x=B.split("."))[0]>0&&x[0]<4?1:+(x[0]+x[1])),!N&&A&&(!(x=A.match(/Edge\/(\d+)/))||x[1]>=74)&&(x=A.match(/Chrome\/(\d+)/))&&(N=+x[1]),k.exports=N},9539:function(k,L,f){var x=f(9565),N=f(8551),C=f(5966);k.exports=function(A,H,V){var F,B;N(A);try{if(!(F=C(A,"return"))){if(H==="throw")throw V;return V}F=x(F,A)}catch(J){B=!0,F=J}if(H==="throw")throw V;if(B)throw F;return N(F),V}},9565:function(k,L,f){var x=f(616),N=Function.prototype.call;k.exports=x?N.bind(N):function(){return N.apply(N,arguments)}},9572:function(k,L,f){var x=f(9297),N=f(6840),C=f(3640),A=f(8227)("toPrimitive"),H=Date.prototype;x(H,A)||N(H,A,C)},9617:function(k,L,f){var x=f(5397),N=f(5610),C=f(6198),A=function(H){return function(V,F,B){var J=x(V),Y=C(J);if(Y===0)return!H&&-1;var T,G=N(B,Y);if(H&&F!=F){for(;Y>G;)if((T=J[G++])!=T)return!0}else for(;Y>G;G++)if((H||G in J)&&J[G]===F)return H||G||0;return!H&&-1}};k.exports={includes:A(!0),indexOf:A(!1)}},9773:function(k,L,f){var x=f(6518),N=f(4495),C=f(9039),A=f(3717),H=f(8981);x({target:"Object",stat:!0,forced:!N||C((function(){A.f(1)}))},{getOwnPropertySymbols:function(V){var F=A.f;return F?F(H(V)):[]}})}},g={};function y(k){var L=g[k];if(L!==void 0)return L.exports;var f=g[k]={exports:{}};return h[k].call(f.exports,f,f.exports,y),f.exports}y.d=function(k,L){for(var f in L)y.o(L,f)&&!y.o(k,f)&&Object.defineProperty(k,f,{enumerable:!0,get:L[f]})},y.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),y.o=function(k,L){return Object.prototype.hasOwnProperty.call(k,L)},y.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})};var w={};function S(k){return(function(L){if(Array.isArray(L))return E(L)})(k)||(function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)})(k)||_(k)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function _(k,L){if(k){if(typeof k=="string")return E(k,L);var f={}.toString.call(k).slice(8,-1);return f==="Object"&&k.constructor&&(f=k.constructor.name),f==="Map"||f==="Set"?Array.from(k):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?E(k,L):void 0}}function E(k,L){(L==null||L>k.length)&&(L=k.length);for(var f=0,x=Array(L);f<L;f++)x[f]=k[f];return x}function z(k){return z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},z(k)}function I(k,L){for(var f=0;f<L.length;f++){var x=L[f];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(k,q(x.key),x)}}function U(k,L,f){return(L=q(L))in k?Object.defineProperty(k,L,{value:f,enumerable:!0,configurable:!0,writable:!0}):k[L]=f,k}function q(k){var L=(function(f,x){if(z(f)!="object"||!f)return f;var N=f[Symbol.toPrimitive];if(N!==void 0){var C=N.call(f,x);if(z(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(f)})(k,"string");return z(L)=="symbol"?L:L+""}y.r(w),y.d(w,{SimpleKeyboard:function(){return Ce},default:function(){return pe}}),y(5276),y(8598),y(4782),y(4554),y(2010),y(7427),y(6099),y(7495),y(8781),y(5440),y(744),y(2762),typeof Element>"u"||"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof self<"u"&&"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&(function(k){if("Element"in k){var L="classList",f="prototype",x=k.Element[f],N=Object,C=String[f].trim||function(){return this.replace(/^\s+|\s+$/g,"")},A=Array[f].indexOf||function(T){for(var G=0,ce=this.length;G<ce;G++)if(G in this&&this[G]===T)return G;return-1},H=function(T,G){this.name=T,this.code=DOMException[T],this.message=G},V=function(T,G){if(G==="")throw new H("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(G))throw new H("INVALID_CHARACTER_ERR","The token must not contain space characters.");return A.call(T,G)},F=function(T){for(var G=C.call(T.getAttribute("class")||""),ce=G?G.split(/\s+/):[],ie=0,fe=ce.length;ie<fe;ie++)this.push(ce[ie]);this._updateClassName=function(){T.setAttribute("class",this.toString())}},B=F[f]=[],J=function(){return new F(this)};if(H[f]=Error[f],B.item=function(T){return this[T]||null},B.contains=function(T){return~V(this,T+"")},B.add=function(){var T,G=arguments,ce=0,ie=G.length,fe=!1;do~V(this,T=G[ce]+"")||(this.push(T),fe=!0);while(++ce<ie);fe&&this._updateClassName()},B.remove=function(){var T,G,ce=arguments,ie=0,fe=ce.length,me=!1;do for(G=V(this,T=ce[ie]+"");~G;)this.splice(G,1),me=!0,G=V(this,T);while(++ie<fe);me&&this._updateClassName()},B.toggle=function(T,G){var ce=this.contains(T),ie=ce?G!==!0&&"remove":G!==!1&&"add";return ie&&this[ie](T),G===!0||G===!1?G:!ce},B.replace=function(T,G){var ce=V(T+"");~ce&&(this.splice(ce,1,G),this._updateClassName())},B.toString=function(){return this.join(" ")},N.defineProperty){var Y={get:J,enumerable:!0,configurable:!0};try{N.defineProperty(x,L,Y)}catch(T){T.number!==void 0&&T.number!==-2146823252||(Y.enumerable=!1,N.defineProperty(x,L,Y))}}else N[f].__defineGetter__&&x.__defineGetter__(L,J)}})(self),(function(){var k=document.createElement("_");if(k.classList.add("c1","c2"),!k.classList.contains("c2")){var L=function(x){var N=DOMTokenList.prototype[x];DOMTokenList.prototype[x]=function(C){var A,H=arguments.length;for(A=0;A<H;A++)C=arguments[A],N.call(this,C)}};L("add"),L("remove")}if(k.classList.toggle("c3",!1),k.classList.contains("c3")){var f=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(x,N){return 1 in arguments&&!this.contains(x)==!N?N:f.call(this,x)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(x,N){var C=this.toString().split(" "),A=C.indexOf(x+"");~A&&(C=C.slice(A),this.remove.apply(this,C),this.add(N),this.add.apply(this,C.slice(1)))}),k=null})()),y(2675),y(9463),y(2259),y(5700),y(8706),y(2008),y(3418),y(4423),y(3792),y(2062),y(6910),y(739),y(9572),y(2892),y(9085),y(3851),y(1278),y(9432),y(4864),y(1699),y(7764),y(8344),y(3500),y(2953),y(2712),y(2637),y(1480),y(825),y(1761);var O=(function(){return k=function x(N){var C=N.getOptions,A=N.getCaretPosition,H=N.getCaretPositionEnd,V=N.dispatch;(function(F,B){if(!(F instanceof B))throw new TypeError("Cannot call a class as a function")})(this,x),U(this,"getOptions",void 0),U(this,"getCaretPosition",void 0),U(this,"getCaretPositionEnd",void 0),U(this,"dispatch",void 0),U(this,"maxLengthReached",void 0),U(this,"isStandardButton",(function(F){return F&&!(F[0]==="{"&&F[F.length-1]==="}")})),this.getOptions=C,this.getCaretPosition=A,this.getCaretPositionEnd=H,this.dispatch=V,x.bindMethods(x,this)},L=[{key:"getButtonType",value:function(x){return x.includes("{")&&x.includes("}")&&x!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(x){var N=this.getButtonType(x),C=x.replace("{","").replace("}",""),A="";return N!=="standardBtn"&&(A=" hg-button-".concat(C)),"hg-".concat(N).concat(A)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(x,N){return(N=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),N):N||this.getDefaultDiplay())[x]||x}},{key:"getUpdatedInput",value:function(x,N,C){var A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:C,H=arguments.length>4&&arguments[4]!==void 0&&arguments[4],V=this.getOptions(),F=[C,A,H],B=N;return(x==="{bksp}"||x==="{backspace}")&&B.length>0?B=this.removeAt.apply(this,[B].concat(F)):(x==="{delete}"||x==="{forwarddelete}")&&B.length>0?B=this.removeForwardsAt.apply(this,[B].concat(F)):x==="{space}"?B=this.addStringAt.apply(this,[B," "].concat(F)):x!=="{tab}"||typeof V.tabCharOnTab=="boolean"&&V.tabCharOnTab===!1?x!=="{enter}"&&x!=="{numpadenter}"||!V.newLineOnEnter?x.includes("numpad")&&Number.isInteger(Number(x[x.length-2]))?B=this.addStringAt.apply(this,[B,x[x.length-2]].concat(F)):x==="{numpaddivide}"?B=this.addStringAt.apply(this,[B,"/"].concat(F)):x==="{numpadmultiply}"?B=this.addStringAt.apply(this,[B,"*"].concat(F)):x==="{numpadsubtract}"?B=this.addStringAt.apply(this,[B,"-"].concat(F)):x==="{numpadadd}"?B=this.addStringAt.apply(this,[B,"+"].concat(F)):x==="{numpaddecimal}"?B=this.addStringAt.apply(this,[B,"."].concat(F)):x==="{"||x==="}"?B=this.addStringAt.apply(this,[B,x].concat(F)):x.includes("{")||x.includes("}")||(B=this.addStringAt.apply(this,[B,x].concat(F))):B=this.addStringAt.apply(this,[B,`
`].concat(F)):B=this.addStringAt.apply(this,[B,"	"].concat(F)),V.debug&&console.log("Input will be: "+B),B}},{key:"updateCaretPos",value:function(x){var N=arguments.length>1&&arguments[1]!==void 0&&arguments[1],C=this.updateCaretPosAction(x,N);this.dispatch((function(A){A.setCaretPosition(C)}))}},{key:"updateCaretPosAction",value:function(x){var N=arguments.length>1&&arguments[1]!==void 0&&arguments[1],C=this.getOptions(),A=this.getCaretPosition();return A!=null&&(N?A>0&&(A-=x):A+=x),C.debug&&console.log("Caret at:",A),A}},{key:"addStringAt",value:function(x,N){var C,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.length,H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x.length,V=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return A||A===0?(C=[x.slice(0,A),N,x.slice(H)].join(""),this.isMaxLengthReached()||V&&this.updateCaretPos(N.length)):C=x+N,C}},{key:"removeAt",value:function(x){var N,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.length,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.length,H=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(C===0&&A===0)return x;if(C===A){var V=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;C&&C>=0?x.substring(C-2,C).match(V)?(N=x.substr(0,C-2)+x.substr(C),H&&this.updateCaretPos(2,!0)):(N=x.substr(0,C-1)+x.substr(C),H&&this.updateCaretPos(1,!0)):x.slice(-2).match(V)?(N=x.slice(0,-2),H&&this.updateCaretPos(2,!0)):(N=x.slice(0,-1),H&&this.updateCaretPos(1,!0))}else N=x.slice(0,C)+x.slice(A),H&&this.dispatch((function(F){F.setCaretPosition(C)}));return N}},{key:"removeForwardsAt",value:function(x){var N,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.length,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.length,H=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return x!=null&&x.length&&C!==null?(C===A?N=x.substring(C,C+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?x.substr(0,C)+x.substr(C+2):x.substr(0,C)+x.substr(C+1):(N=x.slice(0,C)+x.slice(A),H&&this.dispatch((function(V){V.setCaretPosition(C)}))),N):x}},{key:"handleMaxLength",value:function(x,N){var C=this.getOptions(),A=C.maxLength,H=x[C.inputName||"default"],V=N.length-1>=A;if(N.length<=H.length)return!1;if(Number.isInteger(A))return C.debug&&console.log("maxLength (num) reached:",V),V?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(z(A)==="object"){var F=N.length-1>=A[C.inputName||"default"];return C.debug&&console.log("maxLength (obj) reached:",F),F?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(x){return x?x.toLowerCase().trim().split(/[.\-_\s]/g).reduce((function(N,C){return C.length?N+C[0].toUpperCase()+C.slice(1):N})):""}},{key:"chunkArray",value:function(x,N){return S(Array(Math.ceil(x.length/N))).map((function(C,A){return x.slice(N*A,N+N*A)}))}},{key:"escapeRegex",value:function(x){return x.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(x,N){var C=x,A=N.indexOf("‫");return A<x&&A!=-1&&C--,N.indexOf("‬")<x&&A!=-1&&C--,C<0?0:C}},{key:"isConstructor",value:function(x){try{Reflect.construct(String,[],x)}catch{return!1}return!0}}],f=[{key:"bindMethods",value:function(x,N){var C,A=(function(V,F){var B=typeof Symbol<"u"&&V[Symbol.iterator]||V["@@iterator"];if(!B){if(Array.isArray(V)||(B=_(V))||F){B&&(V=B);var J=0,Y=function(){};return{s:Y,n:function(){return J>=V.length?{done:!0}:{done:!1,value:V[J++]}},e:function(ie){throw ie},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var T,G=!0,ce=!1;return{s:function(){B=B.call(V)},n:function(){var ie=B.next();return G=ie.done,ie},e:function(ie){ce=!0,T=ie},f:function(){try{G||B.return==null||B.return()}finally{if(ce)throw T}}}})(Object.getOwnPropertyNames(x.prototype));try{for(A.s();!(C=A.n()).done;){var H=C.value;H==="constructor"||H==="bindMethods"||(N[H]=N[H].bind(N))}}catch(V){A.e(V)}finally{A.f()}}}],L&&I(k.prototype,L),f&&I(k,f),Object.defineProperty(k,"prototype",{writable:!1}),k;var k,L,f})();U(O,"noop",(function(){}));var R=O;function M(k){return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},M(k)}function P(k,L){for(var f=0;f<L.length;f++){var x=L[f];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(k,oe(x.key),x)}}function ee(k,L,f){return(L=oe(L))in k?Object.defineProperty(k,L,{value:f,enumerable:!0,configurable:!0,writable:!0}):k[L]=f,k}function oe(k){var L=(function(f,x){if(M(f)!="object"||!f)return f;var N=f[Symbol.toPrimitive];if(N!==void 0){var C=N.call(f,x);if(M(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(f)})(k,"string");return M(L)=="symbol"?L:L+""}var je=(function(){return k=function x(N){var C=this,A=N.dispatch,H=N.getOptions;(function(V,F){if(!(V instanceof F))throw new TypeError("Cannot call a class as a function")})(this,x),ee(this,"getOptions",void 0),ee(this,"dispatch",void 0),ee(this,"isModifierKey",(function(V){return V.altKey||V.ctrlKey||V.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(V.code||V.key||C.keyCodeToKey(V?.keyCode))})),this.dispatch=A,this.getOptions=H,R.bindMethods(x,this)},L=[{key:"handleHighlightKeyDown",value:function(x){var N=this.getOptions();N.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(x)&&(x.preventDefault(),x.stopImmediatePropagation());var C=this.getSimpleKeyboardLayoutKey(x);this.dispatch((function(A){var H,V,F=A.getButtonElement(C),B=A.getButtonElement("{".concat(C,"}"));if(F)H=F,V=C;else{if(!B)return;H=B,V="{".concat(C,"}")}var J,Y,T,G,ce=function(fe){fe.style.background=N.physicalKeyboardHighlightBgColor||"#dadce4",fe.style.color=N.physicalKeyboardHighlightTextColor||"black"};if(H)if(Array.isArray(H)){if(H.forEach((function(fe){return ce(fe)})),N.physicalKeyboardHighlightPress)if(N.physicalKeyboardHighlightPressUsePointerEvents)(J=H[0])===null||J===void 0||(Y=J.onpointerdown)===null||Y===void 0||Y.call(J,x);else if(N.physicalKeyboardHighlightPressUseClick){var ie;(ie=H[0])===null||ie===void 0||ie.click()}else A.handleButtonClicked(V,x)}else ce(H),N.physicalKeyboardHighlightPress&&(N.physicalKeyboardHighlightPressUsePointerEvents?(T=H)===null||T===void 0||(G=T.onpointerdown)===null||G===void 0||G.call(T,x):N.physicalKeyboardHighlightPressUseClick?H.click():A.handleButtonClicked(V,x))}))}},{key:"handleHighlightKeyUp",value:function(x){var N=this.getOptions();N.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(x)&&(x.preventDefault(),x.stopImmediatePropagation());var C=this.getSimpleKeyboardLayoutKey(x);this.dispatch((function(A){var H,V,F,B=A.getButtonElement(C)||A.getButtonElement("{".concat(C,"}")),J=function(Y){Y.removeAttribute&&Y.removeAttribute("style")};B&&(Array.isArray(B)?(B.forEach((function(Y){return J(Y)})),N.physicalKeyboardHighlightPressUsePointerEvents&&((H=B[0])===null||H===void 0||(V=H.onpointerup)===null||V===void 0||V.call(H,x))):(J(B),N.physicalKeyboardHighlightPressUsePointerEvents&&(B==null||(F=B.onpointerup)===null||F===void 0||F.call(B,x))))}))}},{key:"getSimpleKeyboardLayoutKey",value:function(x){var N,C="",A=x.code||x.key||this.keyCodeToKey(x?.keyCode);return(C=A!=null&&A.includes("Numpad")||A!=null&&A.includes("Shift")||A!=null&&A.includes("Space")||A!=null&&A.includes("Backspace")||A!=null&&A.includes("Control")||A!=null&&A.includes("Alt")||A!=null&&A.includes("Meta")?x.code||"":x.key||this.keyCodeToKey(x?.keyCode)||"").length>1?(N=C)===null||N===void 0?void 0:N.toLowerCase():C}},{key:"keyCodeToKey",value:function(x){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[x]||""}}],L&&P(k.prototype,L),f&&P(k,f),Object.defineProperty(k,"prototype",{writable:!1}),k;var k,L,f})();function de(k){return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},de(k)}function re(k,L){for(var f=0;f<L.length;f++){var x=L[f];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(k,De(x.key),x)}}function Te(k,L,f){return(L=De(L))in k?Object.defineProperty(k,L,{value:f,enumerable:!0,configurable:!0,writable:!0}):k[L]=f,k}function De(k){var L=(function(f,x){if(de(f)!="object"||!f)return f;var N=f[Symbol.toPrimitive];if(N!==void 0){var C=N.call(f,x);if(de(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(f)})(k,"string");return de(L)=="symbol"?L:L+""}var ne=(function(){return k=function x(N){var C=N.utilities,A=N.options;(function(H,V){if(!(H instanceof V))throw new TypeError("Cannot call a class as a function")})(this,x),Te(this,"utilities",void 0),Te(this,"options",void 0),Te(this,"candidateBoxElement",void 0),Te(this,"pageIndex",0),Te(this,"pageSize",void 0),this.utilities=C,this.options=A,R.bindMethods(x,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},L=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(x){var N=this,C=x.candidateValue,A=x.targetElement,H=x.onSelect;if(C&&C.length){var V=this.utilities.chunkArray(C.split(" "),this.pageSize);this.renderPage({candidateListPages:V,targetElement:A,pageIndex:this.pageIndex,nbPages:V.length,onItemSelected:function(F,B){H(F,B),N.destroy()}})}}},{key:"renderPage",value:function(x){var N,C=this,A=x.candidateListPages,H=x.targetElement,V=x.pageIndex,F=x.nbPages,B=x.onItemSelected;(N=this.candidateBoxElement)===null||N===void 0||N.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var J=document.createElement("ul");J.className="hg-candidate-box-list",A[V].forEach((function(me){var Me,Re=document.createElement("li"),Ie=function(){var st=new(C.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(st,"target",{value:Re}),st};Re.className="hg-candidate-box-list-item",Re.innerHTML=((Me=C.options.display)===null||Me===void 0?void 0:Me[me])||me,C.options.useTouchEvents?Re.ontouchstart=function(st){return B(me,st||Ie())}:Re.onclick=function(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ie();return B(me,st)},J.appendChild(Re)}));var Y=V>0,T=document.createElement("div");T.classList.add("hg-candidate-box-prev"),Y&&T.classList.add("hg-candidate-box-btn-active");var G=function(){Y&&C.renderPage({candidateListPages:A,targetElement:H,pageIndex:V-1,nbPages:F,onItemSelected:B})};this.options.useTouchEvents?T.ontouchstart=G:T.onclick=G,this.candidateBoxElement.appendChild(T),this.candidateBoxElement.appendChild(J);var ce=V<F-1,ie=document.createElement("div");ie.classList.add("hg-candidate-box-next"),ce&&ie.classList.add("hg-candidate-box-btn-active");var fe=function(){ce&&C.renderPage({candidateListPages:A,targetElement:H,pageIndex:V+1,nbPages:F,onItemSelected:B})};this.options.useTouchEvents?ie.ontouchstart=fe:ie.onclick=fe,this.candidateBoxElement.appendChild(ie),H.prepend(this.candidateBoxElement)}}],L&&re(k.prototype,L),f&&re(k,f),Object.defineProperty(k,"prototype",{writable:!1}),k;var k,L,f})(),ue=ne;function se(k){return(function(L){if(Array.isArray(L))return Ae(L)})(k)||(function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)})(k)||(function(L,f){if(L){if(typeof L=="string")return Ae(L,f);var x={}.toString.call(L).slice(8,-1);return x==="Object"&&L.constructor&&(x=L.constructor.name),x==="Map"||x==="Set"?Array.from(L):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?Ae(L,f):void 0}})(k)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Ae(k,L){(L==null||L>k.length)&&(L=k.length);for(var f=0,x=Array(L);f<L;f++)x[f]=k[f];return x}function Se(k){return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},Se(k)}function $e(k,L){var f=Object.keys(k);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(k);L&&(x=x.filter((function(N){return Object.getOwnPropertyDescriptor(k,N).enumerable}))),f.push.apply(f,x)}return f}function Q(k,L){for(var f=0;f<L.length;f++){var x=L[f];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(k,ve(x.key),x)}}function xe(k,L,f){return(L=ve(L))in k?Object.defineProperty(k,L,{value:f,enumerable:!0,configurable:!0,writable:!0}):k[L]=f,k}function ve(k){var L=(function(f,x){if(Se(f)!="object"||!f)return f;var N=f[Symbol.toPrimitive];if(N!==void 0){var C=N.call(f,x);if(Se(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(f)})(k,"string");return Se(L)=="symbol"?L:L+""}var ae=(function(){return k=function x(N,C){var A=this;if((function(G,ce){if(!(G instanceof ce))throw new TypeError("Cannot call a class as a function")})(this,x),xe(this,"input",void 0),xe(this,"options",void 0),xe(this,"utilities",void 0),xe(this,"caretPosition",void 0),xe(this,"caretPositionEnd",void 0),xe(this,"keyboardDOM",void 0),xe(this,"keyboardPluginClasses",void 0),xe(this,"keyboardDOMClass",void 0),xe(this,"buttonElements",void 0),xe(this,"currentInstanceName",void 0),xe(this,"allKeyboardInstances",void 0),xe(this,"keyboardInstanceNames",void 0),xe(this,"isFirstKeyboardInstance",void 0),xe(this,"physicalKeyboard",void 0),xe(this,"modules",void 0),xe(this,"activeButtonClass",void 0),xe(this,"holdInteractionTimeout",void 0),xe(this,"holdTimeout",void 0),xe(this,"isMouseHold",void 0),xe(this,"initialized",void 0),xe(this,"candidateBox",void 0),xe(this,"keyboardRowsDOM",void 0),xe(this,"defaultName","default"),xe(this,"activeInputElement",null),xe(this,"handleParams",(function(G,ce){var ie,fe,me;if(typeof G=="string")ie=G.split(".").join(""),fe=document.querySelector(".".concat(ie)),me=ce;else if(G instanceof HTMLDivElement){if(!G.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");ie=G.className.split(" ")[0],fe=G,me=ce}else ie="simple-keyboard",fe=document.querySelector(".".concat(ie)),me=G;return{keyboardDOMClass:ie,keyboardDOM:fe,options:me}})),xe(this,"getOptions",(function(){return A.options})),xe(this,"getCaretPosition",(function(){return A.caretPosition})),xe(this,"getCaretPositionEnd",(function(){return A.caretPositionEnd})),xe(this,"registerModule",(function(G,ce){A.modules[G]||(A.modules[G]={}),ce(A.modules[G])})),xe(this,"getKeyboardClassString",(function(){for(var G=arguments.length,ce=new Array(G),ie=0;ie<G;ie++)ce[ie]=arguments[ie];return[A.keyboardDOMClass].concat(ce).filter((function(fe){return!!fe})).join(" ")})),typeof window<"u"){var H=this.handleParams(N,C),V=H.keyboardDOMClass,F=H.keyboardDOM,B=H.options,J=B===void 0?{}:B;this.utilities=new R({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=F,this.options=(function(G){for(var ce=1;ce<arguments.length;ce++){var ie=arguments[ce]!=null?arguments[ce]:{};ce%2?$e(Object(ie),!0).forEach((function(fe){xe(G,fe,ie[fe])})):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(ie)):$e(Object(ie)).forEach((function(fe){Object.defineProperty(G,fe,Object.getOwnPropertyDescriptor(ie,fe))}))}return G})({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},J),this.keyboardPluginClasses="",R.bindMethods(x,this);var Y=this.options.inputName,T=Y===void 0?this.defaultName:Y;if(this.input={},this.input[T]="",this.keyboardDOMClass=V,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new je({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new ue({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(V,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},L=[{key:"setCaretPosition",value:function(x){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.caretPosition=x,this.caretPositionEnd=N}},{key:"getInputCandidates",value:function(x){var N=this,C=this.options,A=C.layoutCandidates,H=C.layoutCandidatesCaseSensitiveMatch;if(!A||Se(A)!=="object")return{};var V=Object.keys(A).filter((function(J){var Y=x.substring(0,N.getCaretPositionEnd()||0)||x,T=new RegExp("".concat(N.utilities.escapeRegex(J),"$"),H?"g":"gi");return!!se(Y.matchAll(T)).length}));if(V.length>1){var F=V.sort((function(J,Y){return Y.length-J.length}))[0];return{candidateKey:F,candidateValue:A[F]}}if(V.length){var B=V[0];return{candidateKey:B,candidateValue:A[B]}}return{}}},{key:"showCandidatesBox",value:function(x,N,C){var A=this;this.candidateBox&&this.candidateBox.show({candidateValue:N,targetElement:C,onSelect:function(H,V){var F=A.options,B=F.layoutCandidatesCaseSensitiveMatch,J=F.disableCandidateNormalization,Y=F.enableLayoutCandidatesKeyPress,T=H;J||(T=H.normalize("NFD")),typeof A.options.beforeInputUpdate=="function"&&A.options.beforeInputUpdate(A);var G=A.getInput(A.options.inputName,!0),ce=A.getCaretPositionEnd()||0,ie=G.substring(0,ce||0)||G,fe=new RegExp("".concat(A.utilities.escapeRegex(x),"$"),B?"g":"gi"),me=ie.replace(fe,T),Me=G.replace(ie,me),Re=me.length-ie.length,Ie=(ce||G.length)+Re;Ie<0&&(Ie=0),A.setInput(Me,A.options.inputName,!0),A.setCaretPosition(Ie),Y&&typeof A.options.onKeyPress=="function"&&A.options.onKeyPress(H,V),typeof A.options.onChange=="function"&&A.options.onChange(A.getInput(A.options.inputName,!0),V),typeof A.options.onChangeAll=="function"&&A.options.onChangeAll(A.getAllInputs(),V)}})}},{key:"handleButtonClicked",value:function(x,N){var C=this.options,A=C.inputName,H=A===void 0?this.defaultName:A,V=C.debug;if(x!=="{//}"){this.input[H]||(this.input[H]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var F=this.utilities.getUpdatedInput(x,this.input[H],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(x)&&this.activeInputElement&&this.input[H]&&this.input[H]===F&&this.caretPosition===0&&this.caretPositionEnd===F.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(x,N);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(x,N),this.input[H]!==F&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(F))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,F))return;var B=this.utilities.getUpdatedInput(x,this.input[H],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(B,this.options.inputName,!0),V&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),N?.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),N),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),N),N!=null&&N.target&&this.options.enableLayoutCandidates){var J,Y=this.getInputCandidates(F),T=Y.candidateKey,G=Y.candidateValue;T&&G?this.showCandidatesBox(T,G,this.keyboardDOM):(J=this.candidateBox)===null||J===void 0||J.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),V&&console.log("Key pressed:",x)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(x){this.options.syncInstanceInputs?this.dispatch((function(N){N.isMouseHold=x})):this.isMouseHold=x}},{key:"handleButtonMouseDown",value:function(x,N){var C=this;N&&(this.options.preventMouseDownDefault&&N.preventDefault(),this.options.stopMouseDownPropagation&&N.stopPropagation(),N.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout((function(){(C.getMouseHold()&&(!x.includes("{")&&!x.includes("}")||x==="{delete}"||x==="{backspace}"||x==="{bksp}"||x==="{space}"||x==="{tab}")||x==="{arrowright}"||x==="{arrowleft}"||x==="{arrowup}"||x==="{arrowdown}")&&(C.options.debug&&console.log("Button held:",x),C.handleButtonHold(x)),clearTimeout(C.holdTimeout)}),500))}},{key:"handleButtonMouseUp",value:function(x,N){var C=this;N&&(this.options.preventMouseUpDefault&&N.preventDefault&&N.preventDefault(),this.options.stopMouseUpPropagation&&N.stopPropagation&&N.stopPropagation(),!(N.target===this.keyboardDOM||N.target&&this.keyboardDOM.contains(N.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(N.target===this.candidateBox.candidateBoxElement||N.target&&this.candidateBox.candidateBoxElement.contains(N.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons((function(A){A.classList.remove(C.activeButtonClass)})),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),x&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(x,N)}},{key:"handleKeyboardContainerMouseDown",value:function(x){this.options.preventMouseDownDefault&&x.preventDefault()}},{key:"handleButtonHold",value:function(x){var N=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout((function(){N.getMouseHold()?(N.handleButtonClicked(x),N.handleButtonHold(x)):clearTimeout(N.holdInteractionTimeout)}),100)}},{key:"syncInstanceInputs",value:function(){var x=this;this.dispatch((function(N){N.replaceInput(x.input),N.setCaretPosition(x.caretPosition,x.caretPositionEnd)}))}},{key:"clearInput",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[x]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,N=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!N&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[x].replace("‫","").replace("‬","")+"‬":this.input[x]}},{key:"getAllInputs",value:function(){var x=this,N={};return Object.keys(this.input).forEach((function(C){N[C]=x.getInput(C,!0)})),N}},{key:"setInput",value:function(x){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,C=arguments.length>2?arguments[2]:void 0;this.input[N]=x,!C&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(x){this.input=x}},{key:"setOptions",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N=this.changedOptions(x);this.options=Object.assign(this.options,x),N.length&&(this.options.debug&&console.log("changedOptions",N),this.onSetOptions(N),this.render())}},{key:"changedOptions",value:function(x){var N=this;return Object.keys(x).filter((function(C){return JSON.stringify(x[C])!==JSON.stringify(N.options[C])}))}},{key:"onSetOptions",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];x.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(x.includes("layoutCandidatesPageSize")||x.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new ue({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(x){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach((function(N){x(window.SimpleKeyboardInstances[N],N)}))}},{key:"addButtonTheme",value:function(x,N){var C=this;N&&x&&(x.split(" ").forEach((function(A){N.split(" ").forEach((function(H){C.options.buttonTheme||(C.options.buttonTheme=[]);var V=!1;C.options.buttonTheme.map((function(F){if(F!=null&&F.class.split(" ").includes(H)){V=!0;var B=F.buttons.split(" ");B.includes(A)||(V=!0,B.push(A),F.buttons=B.join(" "))}return F})),V||C.options.buttonTheme.push({class:H,buttons:x})}))})),this.render())}},{key:"removeButtonTheme",value:function(x,N){var C=this;if(!x&&!N)return this.options.buttonTheme=[],void this.render();x&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(x.split(" ").forEach((function(A){var H;(H=C.options)===null||H===void 0||(H=H.buttonTheme)===null||H===void 0||H.map((function(V,F){if(V&&N&&N.includes(V.class)||!N){var B,J,Y=(B=V)===null||B===void 0?void 0:B.buttons.split(" ").filter((function(T){return T!==A}));V&&Y!=null&&Y.length?V.buttons=Y.join(" "):((J=C.options.buttonTheme)===null||J===void 0||J.splice(F,1),V=null)}return V}))})),this.render())}},{key:"getButtonElement",value:function(x){var N,C=this.buttonElements[x];return C&&(N=C.length>1?C:C[0]),N}},{key:"inputPatternIsValid",value:function(x){var N,C=this.options.inputPattern;if((N=C instanceof RegExp?C:C[this.options.inputName||this.defaultName])&&x){var A=N.test(x);return this.options.debug&&console.log('inputPattern ("'.concat(N,'"): ').concat(A?"passed":"did not pass!")),A}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var x=this.options.physicalKeyboardHighlightPreventDefault,N=x!==void 0&&x;document.addEventListener("keyup",this.handleKeyUp,N),document.addEventListener("keydown",this.handleKeyDown,N),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(x){this.caretEventHandler(x),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(x)}},{key:"handleKeyDown",value:function(x){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(x)}},{key:"handleMouseUp",value:function(x){this.caretEventHandler(x)}},{key:"handleTouchEnd",value:function(x){this.caretEventHandler(x)}},{key:"handleSelect",value:function(x){this.caretEventHandler(x)}},{key:"handleSelectionChange",value:function(x){navigator.userAgent.includes("Firefox")||this.caretEventHandler(x)}},{key:"caretEventHandler",value:function(x){var N,C=this;x.target.tagName&&(N=x.target.tagName.toLowerCase()),this.dispatch((function(A){var H=x.target===A.keyboardDOM||x.target&&A.keyboardDOM.contains(x.target);if(C.options.syncInstanceInputs&&Array.isArray(x.path)&&(H=x.path.some((function(B){var J;return B==null||(J=B.hasAttribute)===null||J===void 0?void 0:J.call(B,"data-skInstance")}))),(N==="textarea"||N==="input"&&["text","search","url","tel","password"].includes(x.target.type))&&!A.options.disableCaretPositioning){var V=x.target.selectionStart,F=x.target.selectionEnd;A.options.rtl&&(V=A.utilities.getRtlOffset(V,A.getInput()),F=A.utilities.getRtlOffset(F,A.getInput())),A.setCaretPosition(V,F),A.activeInputElement=x.target,A.options.debug&&console.log("Caret at: ",A.getCaretPosition(),A.getCaretPositionEnd(),x&&x.target.tagName.toLowerCase(),"(".concat(A.keyboardDOMClass,")"),x?.type)}else!A.options.disableCaretPositioning&&H||x?.type==="selectionchange"||(A.setCaretPosition(null),A.activeInputElement=null,A.options.debug&&console.log('Caret position reset due to "'.concat(x?.type,'" event'),x))}))}},{key:"recurseButtons",value:function(x){var N=this;x&&Object.keys(this.buttonElements).forEach((function(C){return N.buttonElements[C].forEach(x)}))}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var x=this.options.physicalKeyboardHighlightPreventDefault,N=x!==void 0&&x;document.removeEventListener("keyup",this.handleKeyUp,N),document.removeEventListener("keydown",this.handleKeyDown,N),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons((function(C){C&&(C.onpointerdown=null,C.onpointerup=null,C.onpointercancel=null,C.ontouchstart=null,C.ontouchend=null,C.ontouchcancel=null,C.onclick=null,C.onmousedown=null,C.onmouseup=null,C.remove(),C=null)})),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(x){var N=this.options.buttonTheme,C=[];return Array.isArray(N)&&N.forEach((function(A){if(A&&A.class&&typeof A.class=="string"&&A.buttons&&typeof A.buttons=="string"){var H=A.class.split(" ");A.buttons.split(" ").includes(x)&&(C=[].concat(se(C),se(H)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',A)})),C}},{key:"setDOMButtonAttributes",value:function(x,N){var C=this.options.buttonAttributes;Array.isArray(C)&&C.forEach((function(A){A.attribute&&typeof A.attribute=="string"&&A.value&&typeof A.value=="string"?A.buttons&&typeof A.buttons=="string"?A.buttons.split(" ").includes(x)&&N(A.attribute,A.value):N(A.attribute,A.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',A)}))}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(x){var N;if((N=x.target.classList)!==null&&N!==void 0&&N.contains("hg-button"))return x.preventDefault(),x.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var x=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach((function(N){var C=x.utilities.isConstructor(N)?new N(x):N(x);C.init&&C.init(x)})),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(x,N){return!!this.modules[x]&&this.modules[x][N]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(x,N,C,A){var H=this,V=Array.from(x.children),F=0;return V.length&&C.forEach((function(B,J){var Y=A[J];if(!(Y&&Y>B))return!1;var T=B-F,G=Y-F,ce=document.createElement("div");ce.className+="hg-button-container";var ie="".concat(H.options.layoutName,"-r").concat(N,"c").concat(J);ce.setAttribute("data-skUID",ie);var fe=V.splice(T,G-T+1);F+=G-T,fe.forEach((function(me){return ce.appendChild(me)})),V.splice(T,0,ce),x.innerHTML="",V.forEach((function(me){return x.appendChild(me)})),H.options.debug&&console.log("rowDOMContainer",fe,T,G,F+1)})),x}},{key:"render",value:function(){var x=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var N="hg-layout-".concat(this.options.layoutName),C=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},A=this.options.useTouchEvents||!1,H=A?"hg-touch-events":"",V=this.options.useMouseEvents||!1,F=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,N,this.keyboardPluginClasses,H),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",C[this.options.layoutName||this.defaultName].forEach((function(B,J){var Y=B.split(" ");x.options.excludeFromLayout&&x.options.excludeFromLayout[x.options.layoutName||x.defaultName]&&(Y=Y.filter((function(ie){return x.options.excludeFromLayout&&!x.options.excludeFromLayout[x.options.layoutName||x.defaultName].includes(ie)})));var T=document.createElement("div");T.className+="hg-row";var G=[],ce=[];Y.forEach((function(ie,fe){var me,Me=!F&&typeof ie=="string"&&ie.length>1&&ie.indexOf("[")===0,Re=!F&&typeof ie=="string"&&ie.length>1&&ie.indexOf("]")===ie.length-1;Me&&(G.push(fe),ie=ie.replace(/\[/g,"")),Re&&(ce.push(fe),ie=ie.replace(/\]/g,""));var Ie=x.utilities.getButtonClass(ie),st=x.utilities.getButtonDisplayName(ie,x.options.display,x.options.mergeDisplay),He=x.options.useButtonTag?"button":"div",Xe=document.createElement(He);Xe.className+="hg-button ".concat(Ie),(me=Xe.classList).add.apply(me,se(x.getButtonThemeClasses(ie))),x.setDOMButtonAttributes(ie,(function(Qe,At){Xe.setAttribute(Qe,At)})),x.activeButtonClass="hg-activeButton",!x.utilities.pointerEventsSupported()||A||V?A?(Xe.ontouchstart=function(Qe){x.handleButtonClicked(ie,Qe),x.handleButtonMouseDown(ie,Qe)},Xe.ontouchend=function(Qe){x.handleButtonMouseUp(ie,Qe)},Xe.ontouchcancel=function(Qe){x.handleButtonMouseUp(ie,Qe)}):(Xe.onclick=function(Qe){x.setMouseHold(!1),typeof x.options.onKeyReleased=="function"||x.options.useMouseEvents&&x.options.clickOnMouseDown||x.handleButtonClicked(ie,Qe)},Xe.onmousedown=function(Qe){(typeof x.options.onKeyReleased=="function"||x.options.useMouseEvents&&x.options.clickOnMouseDown)&&!x.isMouseHold&&x.handleButtonClicked(ie,Qe),x.handleButtonMouseDown(ie,Qe)},Xe.onmouseup=function(Qe){x.handleButtonMouseUp(ie,Qe)}):(Xe.onpointerdown=function(Qe){x.handleButtonClicked(ie,Qe),x.handleButtonMouseDown(ie,Qe)},Xe.onpointerup=function(Qe){x.handleButtonMouseUp(ie,Qe)},Xe.onpointercancel=function(Qe){x.handleButtonMouseUp(ie,Qe)}),Xe.setAttribute("data-skBtn",ie);var et="".concat(x.options.layoutName,"-r").concat(J,"b").concat(fe);Xe.setAttribute("data-skBtnUID",et);var rt=document.createElement("span");rt.innerHTML=st,Xe.appendChild(rt),x.buttonElements[ie]||(x.buttonElements[ie]=[]),x.buttonElements[ie].push(Xe),T.appendChild(Xe)})),T=x.parseRowDOMContainers(T,J,G,ce),x.keyboardRowsDOM.appendChild(T)})),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||A||V?A?(document.ontouchend=function(B){return x.handleButtonMouseUp(void 0,B)},document.ontouchcancel=function(B){return x.handleButtonMouseUp(void 0,B)},this.keyboardDOM.ontouchstart=function(B){return x.handleKeyboardContainerMouseDown(B)}):A||(document.onmouseup=function(B){return x.handleButtonMouseUp(void 0,B)},this.keyboardDOM.onmousedown=function(B){return x.handleKeyboardContainerMouseDown(B)}):(document.onpointerup=function(B){return x.handleButtonMouseUp(void 0,B)},this.keyboardDOM.onpointerdown=function(B){return x.handleKeyboardContainerMouseDown(B)}),this.onInit())}}],L&&Q(k.prototype,L),f&&Q(k,f),Object.defineProperty(k,"prototype",{writable:!1}),k;var k,L,f})(),Ce=ae,pe=Ce;return w})()},981:function(){typeof Element>"u"||"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof self<"u"&&"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&(function(m){if("Element"in m){var h="classList",g="prototype",y=m.Element[g],w=Object,S=String[g].trim||function(){return this.replace(/^\s+|\s+$/g,"")},_=Array[g].indexOf||function(R){for(var M=0,P=this.length;M<P;M++)if(M in this&&this[M]===R)return M;return-1},E=function(R,M){this.name=R,this.code=DOMException[R],this.message=M},z=function(R,M){if(M==="")throw new E("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(M))throw new E("INVALID_CHARACTER_ERR","The token must not contain space characters.");return _.call(R,M)},I=function(R){for(var M=S.call(R.getAttribute("class")||""),P=M?M.split(/\s+/):[],ee=0,oe=P.length;ee<oe;ee++)this.push(P[ee]);this._updateClassName=function(){R.setAttribute("class",this.toString())}},U=I[g]=[],q=function(){return new I(this)};if(E[g]=Error[g],U.item=function(R){return this[R]||null},U.contains=function(R){return~z(this,R+"")},U.add=function(){var R,M=arguments,P=0,ee=M.length,oe=!1;do~z(this,R=M[P]+"")||(this.push(R),oe=!0);while(++P<ee);oe&&this._updateClassName()},U.remove=function(){var R,M,P=arguments,ee=0,oe=P.length,je=!1;do for(M=z(this,R=P[ee]+"");~M;)this.splice(M,1),je=!0,M=z(this,R);while(++ee<oe);je&&this._updateClassName()},U.toggle=function(R,M){var P=this.contains(R),ee=P?M!==!0&&"remove":M!==!1&&"add";return ee&&this[ee](R),M===!0||M===!1?M:!P},U.replace=function(R,M){var P=z(R+"");~P&&(this.splice(P,1,M),this._updateClassName())},U.toString=function(){return this.join(" ")},w.defineProperty){var O={get:q,enumerable:!0,configurable:!0};try{w.defineProperty(y,h,O)}catch(R){R.number!==void 0&&R.number!==-2146823252||(O.enumerable=!1,w.defineProperty(y,h,O))}}else w[g].__defineGetter__&&y.__defineGetter__(h,q)}})(self),(function(){var m=document.createElement("_");if(m.classList.add("c1","c2"),!m.classList.contains("c2")){var h=function(y){var w=DOMTokenList.prototype[y];DOMTokenList.prototype[y]=function(S){var _,E=arguments.length;for(_=0;_<E;_++)S=arguments[_],w.call(this,S)}};h("add"),h("remove")}if(m.classList.toggle("c3",!1),m.classList.contains("c3")){var g=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(y,w){return 1 in arguments&&!this.contains(y)==!w?w:g.call(this,y)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(y,w){var S=this.toString().split(" "),_=S.indexOf(y+"");~_&&(S=S.slice(_),this.remove.apply(this,S),this.add(w),this.add.apply(this,S.slice(1)))}),m=null})())}},o={};function c(m){var h=o[m];if(h!==void 0)return h.exports;var g=o[m]={exports:{}};return n[m].call(g.exports,g,g.exports,c),g.exports}c.n=function(m){var h=m&&m.__esModule?function(){return m.default}:function(){return m};return c.d(h,{a:h}),h},c.d=function(m,h){for(var g in h)c.o(h,g)&&!c.o(m,g)&&Object.defineProperty(m,g,{enumerable:!0,get:h[g]})},c.o=function(m,h){return Object.prototype.hasOwnProperty.call(m,h)},c.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var d={};return(function(){c.r(d),c.d(d,{KeyboardReact:function(){return z},default:function(){return I}}),c(981);var m=c(442),h=c(548),g=c.n(h);function y(U){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},y(U)}function w(U,q){var O=Object.keys(U);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(U);q&&(R=R.filter((function(M){return Object.getOwnPropertyDescriptor(U,M).enumerable}))),O.push.apply(O,R)}return O}function S(U){for(var q=1;q<arguments.length;q++){var O=arguments[q]!=null?arguments[q]:{};q%2?w(Object(O),!0).forEach((function(R){_(U,R,O[R])})):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(O)):w(Object(O)).forEach((function(R){Object.defineProperty(U,R,Object.getOwnPropertyDescriptor(O,R))}))}return U}function _(U,q,O){return(q=(function(R){var M=(function(P,ee){if(y(P)!="object"||!P)return P;var oe=P[Symbol.toPrimitive];if(oe!==void 0){var je=oe.call(P,ee);if(y(je)!="object")return je;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ee==="string"?String:Number)(P)})(R,"string");return y(M)=="symbol"?M:M+""})(q))in U?Object.defineProperty(U,q,{value:O,enumerable:!0,configurable:!0,writable:!0}):U[q]=O,U}var E=function(U){return S(S({},U),{},{keyboardRef:null})},z=function(U){var q=U.baseClass||"react-simple-keyboard",O=m.useRef(null),R=m.useRef(null),M=m.useRef(null),P=m.useRef(U);return m.useEffect((function(){return function(){M.current&&M.current.destroy(),O.current=!1}}),[]),m.useEffect((function(){var ee=(function(Te){return S(S({},Te),{},{theme:"simple-keyboard ".concat(Te.theme||"hg-theme-default")})})(U);if(!O.current){O.current=!0,ee.debug&&console.log("ReactSimpleKeyboard: Init");var oe=R.current,je=".".concat(q);M.current=new(g())(oe||je,ee),ee.keyboardRef&&ee.keyboardRef(M.current)}var de=(function(Te,De){var ne=E(De),ue=E(Te);return Object.keys(ne).filter((function(se){return ne[se]!==ue[se]}))})(P.current,ee);if(de.length){var re=M.current;P.current=ee,re?.setOptions(ee),ee.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",de)}}),[O,q,P,U]),m.createElement("div",{className:q,ref:R})},I=z})(),d})()}))})(wh)),wh.exports}var RC=OC();const Dx=Lb(RC),Rv=()=>{const s=v.useCallback(()=>{try{return window.appSettings?.current?.select_keyboard||"System Keyboard"}catch(r){return console.log("Failed to get keyboard setting:",r),"System Keyboard"}},[]),t=v.useCallback(()=>s()==="GBoard",[s]);return{getKeyboardSetting:s,shouldShowVirtualKeyboard:t,isGBoardSelected:t()}},Xa=({isVisible:s,onClose:t,activeInput:r,onInputChange:n,onInputBlur:o,inputValue:c="",placeholder:d="Type here...",onKeyPress:m})=>{const[h,g]=v.useState(""),[y,w]=v.useState(!1),{shouldShowVirtualKeyboard:S}=Rv();v.useEffect(()=>{r&&c!==void 0&&g(c)},[r,c]),v.useEffect(()=>{},[y]);const _=q=>{g(q),n&&n(q,r)},E=q=>{g(q[r]||"")},z=q=>{if(r){if(q==="{bksp}"){const R=(h||"").slice(0,-1);g(R),n&&n(R,r)}else if(q==="{enter}")m?m({action:"enter",nextField:r}):n&&n(h,r,"enter");else if(q==="{lock}")w(!y);else if(q!=="{shift}"){if(q==="{tab}")m?m({action:"tab",nextField:r}):n&&n(h,r,"tab");else if(q==="{space}"){const R=(h||"")+" ";g(R),n&&n(R,r)}}}},I=()=>{g(""),w(!1)},U=()=>{n&&r&&h!==void 0&&n(h,r),I(),t&&t()};return!s||!S()?null:e.jsx("div",{className:"fixed bottom-0 left-[15%] right-[15%] z-50 bg-white border-t border-gray-200 shadow-lg",children:e.jsxs("div",{className:"p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Virtual Keyboard"}),y&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:"CAPS LOCK"}),r&&e.jsx("span",{className:"px-2 py-1 bg-primaryExtraLight text-primary font-medium rounded-full text-xs",children:r})]}),e.jsx("button",{onClick:U,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"keyboard-container w-full",onClick:q=>q.stopPropagation(),onMouseDown:q=>q.preventDefault(),children:e.jsx(Dx,{keyboardRef:q=>window.keyboard=q,input:h,onChange:_,onChangeAll:E,onKeyPress:z,theme:"hg-theme-default",layoutName:y?"shift":"default",layout:{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","z x c v b n m , . /","{space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"Z X C V B N M < > ?","{space}"]},physicalKeyboardHighlight:!0,physicalKeyboardHighlightTextColor:"#000000",physicalKeyboardHighlightBgColor:"#fff475"},r)})]})})},Wn=(s=[])=>{const[t,r]=v.useState(!1),[n,o]=v.useState(""),[c,d]=v.useState(""),[m,h]=v.useState(!1),{shouldShowVirtualKeyboard:g}=Rv();v.useEffect(()=>{},[m]);const y=(O,R="")=>{o(O),d(R||""),r(g())},w=O=>{const{name:R,value:M}=O.target;R===n&&d(M)},S=(O,R,M="")=>{n!==R&&d(M||""),o(R),r(g()),d(M||""),O&&O.target&&(O.target.value=M||"")};return{showKeyboard:t,activeInput:n,keyboardInput:c,capsLock:m,handleInputFocus:y,handleInputBlur:w,handleAnyInputFocus:S,handleAnyInputClick:(O,R,M="")=>{(!t||n!==R)&&S(O,R,M)},onKeyboardChange:O=>(d(O),{input:O,activeInput:n}),onKeyboardChangeAll:O=>{d(O[n]||"")},onKeyboardKeyPress:O=>{if(n)if(O==="{bksp}"){const M=(c||"").slice(0,-1);return d(M),{action:"backspace",value:M,activeInput:n}}else if(O==="{enter}"){const R=s.indexOf(n);return R<s.length-1?{action:"enter",nextField:s[R+1],activeInput:n}:{action:"enter",submit:!0,activeInput:n}}else{if(O==="{lock}")return h(!m),{action:"capslock",capsLock:!m};if(O==="{shift}")return{action:"shift",activeInput:n};if(O==="{tab}"){const R=s.indexOf(n);return R<s.length-1?{action:"tab",nextField:s[R+1],activeInput:n}:{action:"tab",nextField:s[0],activeInput:n}}else if(O==="{space}"){const M=(c||"")+" ";return d(M),{action:"space",value:M,activeInput:n}}}return null},resetKeyboardInputs:()=>{d(""),o(""),r(!1),h(!1)},hideKeyboard:O=>{O&&n&&c!==void 0&&O(n,c),r(!1)},setActiveInput:o,setKeyboardInput:d}},gy=({isOpen:s,onClose:t,onCustomerSelect:r,editingCustomer:n,orderType:o,onParentClose:c})=>{const[d,m]=v.useState({name:"",phone:"",email:"",isloyal:!1}),[h,g]=v.useState([{address:"",eircode:""}]),[y,w]=v.useState([]),[S,_]=v.useState(0),[E,z]=v.useState({}),[I,U]=v.useState(!1),[q,O]=v.useState(""),[R,M]=v.useState(""),[P,ee]=v.useState([]),[oe,je]=v.useState(!1),[de,re]=v.useState(-1),[Te,De]=v.useState(!1),[ne,ue]=v.useState({addressIndex:-1,value:""}),[se,Ae]=v.useState(null),[Se,$e]=v.useState([]),[Q,xe]=v.useState(!1),[ve,ae]=v.useState(-1),[Ce,pe]=v.useState(!1),[k,L]=v.useState({addressIndex:-1,value:""}),[f,x]=v.useState(null),N="PCWK5-XD39R-HSZW6-SK54F",C="https://ws.postcoder.com/pcw",A={H91TK33:{summaryline:"National University of Ireland Galway",locationsummary:"Galway",addressline1:"National University of Ireland Galway",addressline2:"University Road",addressline3:"Galway",addressline4:"H91 TK33"},D01F5P2:{summaryline:"O'Connell Bridge",locationsummary:"Dublin",addressline1:"O'Connell Bridge",addressline2:"Dublin 1",addressline3:"Dublin",addressline4:"D01 F5P2"},D02PK15:{summaryline:"Trinity College Dublin",locationsummary:"Dublin",addressline1:"Trinity College Dublin",addressline2:"College Green",addressline3:"Dublin 2",addressline4:"D02 PK15"}};v.useEffect(()=>{if(s){if(n)if(m({name:n.name||"",phone:n.phone||"",email:n.email||"",isloyal:n.isloyal||!1}),n.addresses&&n.addresses.length>0){const Le=n.addresses.map(tt=>({id:tt.id,address:tt.address||"",eircode:tt.code||""}));g(Le);const Ye=n.selectedAddressIndex||0,_e=Math.min(Ye,Le.length-1);w([_e]),_(_e)}else g([{address:"",eircode:""}]),w([0]);else m({name:"",phone:"",email:"",isloyal:!1}),g([{address:"",eircode:""}]),w([0]),_(0);z({}),U(!1),O(""),ee([]),je(!1),re(-1),$e([]),xe(!1),ae(-1)}},[s,n]),v.useEffect(()=>()=>{se&&clearTimeout(se),f&&clearTimeout(f)},[se,f]),v.useEffect(()=>{console.log("Selected addresses state updated:",y)},[y]),v.useEffect(()=>{console.log("Selected address index updated:",S)},[S]);const H=async(Le,Ye)=>{if(console.log("Searching address:",Le,"for address index:",Ye),!Le||Le.length<3){console.log("Address too short, clearing suggestions"),$e([]),xe(!1),ae(-1);return}pe(!0),L({addressIndex:Ye,value:Le}),$e([]),xe(!1),ae(-1);try{const _e=`${C}/${N}/address/IE/${encodeURIComponent(Le)}`;console.log("Making address API request to:",_e);const tt=await fetch(_e);if(console.log("Address API response status:",tt.status),!tt.ok)throw new Error(`HTTP error! status: ${tt.status}`);const ct=await tt.json();if(console.log("Address API response data:",ct),Array.isArray(ct)&&ct.length>0){console.log("Setting address suggestions:",ct.length,"items");const it=ct.map((ke,Ke)=>({id:Ke.toString(),summaryline:ke.summaryline||`${ke.addressline1||""} ${ke.addressline2||""}`.trim(),locationsummary:ke.posttown||"",addressline1:ke.addressline1||"",addressline2:ke.addressline2||"",addressline3:ke.addressline3||"",addressline4:ke.addressline4||""}));$e(it),xe(!0),ae(-1)}else console.log("No address suggestions found"),$e([]),xe(!1)}catch(_e){console.error("Error fetching address suggestions:",_e),console.log("Address API failed, suggesting manual entry");const tt=[{id:"0",summaryline:`Address search for "${Le}" - API temporarily unavailable`,locationsummary:"Please enter address manually",addressline1:"",addressline2:"",addressline3:"",addressline4:"",isFallback:!0}];$e(tt),xe(!0),ae(-1)}finally{pe(!1)}},V=async(Le,Ye)=>{if(console.log("Retrieving address from suggestion:",Le,"address index:",Ye),!k.value||!Se[Le]){console.log("No current input or suggestion not found");return}try{const _e=Se[Le];if(console.log("Selected address suggestion:",_e),_e.isFallback){console.log("Fallback message clicked - not populating address"),xe(!1),$e([]),ae(-1);return}const tt=[];if(_e.addressline1&&tt.push(_e.addressline1),_e.addressline2&&tt.push(_e.addressline2),_e.addressline3&&tt.push(_e.addressline3),_e.addressline4&&tt.push(_e.addressline4),tt.length>0){const ct=tt.join(", ");console.log("Full address from suggestion:",ct),g(it=>{const ke=it.map((Ke,ut)=>ut===Ye?{...Ke,address:ct}:Ke);return console.log("Updated addresses:",ke),ke})}else _e.summaryline?(console.log("Using summaryline as address:",_e.summaryline),g(ct=>{const it=ct.map((ke,Ke)=>Ke===Ye?{...ke,address:_e.summaryline}:ke);return console.log("Updated addresses with summaryline:",it),it})):console.log("No address data available in suggestion");console.log("Address updated successfully")}catch(_e){console.error("Error retrieving address:",_e)}finally{xe(!1),$e([]),ae(-1)}},F=(Le,Ye)=>{if(console.log("Address input changed:",Ye,"for index:",Le),He(Le,"address",Ye),f&&clearTimeout(f),!Ye||Ye.length<3){$e([]),xe(!1),ae(-1);return}const _e=setTimeout(()=>{console.log("Executing debounced address search for:",Ye),H(Ye,Le)},300);x(_e)},B=(Le,Ye)=>{if(Q)switch(Le.key){case"ArrowDown":Le.preventDefault(),ae(_e=>_e<Se.length-1?_e+1:0);break;case"ArrowUp":Le.preventDefault(),ae(_e=>_e>0?_e-1:Se.length-1);break;case"Enter":Le.preventDefault(),ve>=0&&Se[ve]&&V(ve,Ye);break;case"Escape":xe(!1),$e([]),ae(-1);break}},J=(Le,Ye)=>{console.log("Address suggestion clicked:",Le,"for address index:",Ye),console.log("Available address suggestions:",Se);const _e=Se.findIndex(tt=>tt.summaryline===Le.summaryline&&tt.locationsummary===Le.locationsummary);if(console.log("Found address suggestion index:",_e),_e>=0)console.log("Calling retrieveAddressFromSuggestion with index:",_e),V(_e,Ye);else{console.log("Address suggestion not found in list");const tt=Se.findIndex(ct=>ct.id===Le.id);tt>=0?(console.log("Found by ID fallback, index:",tt),V(tt,Ye)):console.log("Address suggestion not found by any method")}},Y=async(Le,Ye)=>{if(console.log("Searching eircode:",Le,"for address index:",Ye),!Le||Le.length<3){console.log("Eircode too short, clearing suggestions"),ee([]),je(!1),re(-1);return}De(!0),ue({addressIndex:Ye,value:Le}),ee([]),je(!1),re(-1);const _e=Le.toUpperCase().replace(/\s/g,"");if(A[_e]){console.log("Found in local database:",_e);const tt=A[_e],ct={id:"0",summaryline:tt.summaryline,locationsummary:tt.locationsummary,addressline1:tt.addressline1,addressline2:tt.addressline2,addressline3:tt.addressline3,addressline4:tt.addressline4};ee([ct]),je(!0),re(-1),De(!1);return}try{const tt=`${C}/${N}/address/IE/${encodeURIComponent(Le)}`;console.log("Making API request to:",tt);const ct=await fetch(tt);if(console.log("API response status:",ct.status),!ct.ok)throw new Error(`HTTP error! status: ${ct.status}`);const it=await ct.json();if(console.log("API response data:",it),Array.isArray(it)&&it.length>0){console.log("Setting suggestions:",it.length,"items");const ke=it.map((Ke,ut)=>({id:ut.toString(),summaryline:Ke.summaryline||`${Ke.addressline1||""} ${Ke.addressline2||""}`.trim(),locationsummary:Ke.posttown||"",addressline1:Ke.addressline1||"",addressline2:Ke.addressline2||"",addressline3:Ke.addressline3||"",addressline4:Ke.addressline4||""}));ee(ke),je(!0),re(-1)}else console.log("No suggestions found"),ee([]),je(!1)}catch(tt){console.error("Error fetching eircode suggestions:",tt),console.log("API failed, suggesting manual entry");const ct=[{id:"0",summaryline:`Eircode ${Le} - API temporarily unavailable`,locationsummary:"Please enter address manually",addressline1:"",addressline2:"",addressline3:"",addressline4:"",isFallback:!0}];ee(ct),je(!0),re(-1)}finally{De(!1)}},T=async(Le,Ye)=>{if(console.log("Retrieving address for suggestion:",Le,"address index:",Ye),!ne.value||!P[Le]){console.log("No current input or suggestion not found");return}try{const _e=P[Le];if(console.log("Selected suggestion:",_e),_e.isFallback){console.log("Fallback message clicked - not populating address"),je(!1),ee([]),re(-1);return}const tt=[];if(_e.addressline1&&tt.push(_e.addressline1),_e.addressline2&&tt.push(_e.addressline2),_e.addressline3&&tt.push(_e.addressline3),_e.addressline4&&tt.push(_e.addressline4),tt.length>0){const ct=tt.join(", ");console.log("Full address from suggestion:",ct),g(it=>{const ke=it.map((Ke,ut)=>ut===Ye?{...Ke,address:ct,eircode:ne.value.toUpperCase()}:Ke);return console.log("Updated addresses:",ke),ke})}else _e.summaryline?(console.log("Using summaryline as address:",_e.summaryline),g(ct=>{const it=ct.map((ke,Ke)=>Ke===Ye?{...ke,address:_e.summaryline,eircode:ne.value.toUpperCase()}:ke);return console.log("Updated addresses with summaryline:",it),it})):console.log("No address data available in suggestion");console.log("Address updated successfully")}catch(_e){console.error("Error retrieving address:",_e)}finally{je(!1),ee([]),re(-1)}},G=(Le,Ye)=>{if(console.log("Eircode input changed:",Ye,"for index:",Le),He(Le,"eircode",Ye),se&&clearTimeout(se),!Ye||Ye.length<3){ee([]),je(!1),re(-1);return}const _e=setTimeout(()=>{console.log("Executing debounced search for:",Ye),Y(Ye,Le)},300);Ae(_e)},ce=(Le,Ye)=>{if(oe)switch(Le.key){case"ArrowDown":Le.preventDefault(),re(_e=>_e<P.length-1?_e+1:0);break;case"ArrowUp":Le.preventDefault(),re(_e=>_e>0?_e-1:P.length-1);break;case"Enter":Le.preventDefault(),de>=0&&P[de]&&T(de,Ye);break;case"Escape":je(!1),ee([]),re(-1);break}},ie=(Le,Ye)=>{console.log("Suggestion clicked:",Le,"for address index:",Ye),console.log("Available suggestions:",P);const _e=P.findIndex(tt=>tt.summaryline===Le.summaryline&&tt.locationsummary===Le.locationsummary);if(console.log("Found suggestion index:",_e),_e>=0)console.log("Calling retrieveAddress with index:",_e),T(_e,Ye);else{console.log("Suggestion not found in list");const tt=P.findIndex(ct=>ct.id===Le.id);tt>=0?(console.log("Found by ID fallback, index:",tt),T(tt,Ye)):console.log("Suggestion not found by any method")}},fe=Le=>{Le.target.closest(".eircode-input-container")||(je(!1),ee([]),re(-1)),Le.target.closest(".address-input-container")||(xe(!1),$e([]),ae(-1))};v.useEffect(()=>{if(oe||Q)return document.addEventListener("click",fe),()=>document.removeEventListener("click",fe)},[oe,Q]);const me=Le=>{if(O(Le),Le.startsWith("address_")){const[Ye,_e,tt]=Le.split("_"),ct=parseInt(_e),it=h[ct];it&&tt&&M(it[tt]||"")}else M(d[Le]||"");U(!0)},Me=Le=>{setTimeout(()=>{U(!1),O("")},300)},Re=(Le,Ye)=>{me(Ye)},Ie=(Le,Ye)=>{(!I||q!==Ye)&&me(Ye)},st=Le=>{const{name:Ye,value:_e,type:tt,checked:ct}=Le.target;m(it=>({...it,[Ye]:tt==="checkbox"?ct:_e})),q===Ye&&M(_e),E[Ye]&&z(it=>({...it,[Ye]:""}))},He=(Le,Ye,_e)=>{g(tt=>tt.map((ct,it)=>it===Le?{...ct,[Ye]:_e}:ct)),q===`address_${Le}_${Ye}`&&M(_e)},Xe=()=>{g(Ye=>[...Ye,{address:"",eircode:""}]);const Le=h.length;w([Le]),_(Le)},et=Le=>{h.length>1&&(g(Ye=>Ye.filter((_e,tt)=>tt!==Le)),w(Ye=>{const _e=Ye.filter(tt=>tt!==Le);if(_e.length===0){const tt=Math.min(S,h.length-2);return _(tt),[tt]}return _e}))},rt=Le=>{console.log("Address selection changed for index:",Le),w(Ye=>{if(Ye.includes(Le)){const _e=Ye.filter(tt=>tt!==Le);return console.log("Removed index",Le,"from selection"),console.log("New selection:",_e),_e}else{const _e=[Le];return console.log("Selected only index",Le,"for single selection"),console.log("New selection:",_e),_(Le),_e}})},Qe=async Le=>{if(Le)try{const Ye=await window.myAPI?.deleteAddress(Le);Ye&&Ye.success?(g(_e=>_e.filter(tt=>tt.id!==Le)),w(_e=>{const tt=h.findIndex(it=>it.id===Le),ct=_e.filter(it=>it!==tt);if(ct.length===0){const it=Math.min(S,h.length-2);return _(it),[it]}return ct})):alert("Error deleting address")}catch(Ye){console.error("Error deleting address:",Ye),alert("Error deleting address")}},At=()=>{const Le={};return d.name.trim()||(Le.name="Full name is required"),(o==="Collection"||o==="Delivery")&&!d.phone.trim()&&(Le.phone="Phone number is required for "+o+" orders"),d.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)&&(Le.email="Please enter a valid email address"),o==="Delivery"&&(h.some((_e,tt)=>_e.address.trim()&&y.includes(tt))||(Le.address="At least one address is required for Delivery orders")),z(Le),Object.keys(Le).length===0},xt=async Le=>{if(Le.preventDefault(),!!At()){console.log("Form submission - addresses:",h),console.log("Form submission - selectedAddresses:",y),console.log("Form submission - editingCustomer:",n);try{if(n){const Ye={name:d.name.trim(),phone:d.phone.trim()||null,email:d.email.trim()||null,isloyal:d.isloyal?1:0,addedBy:1,hotel_id:1},_e=await window.myAPI?.updateCustomer(n.id,Ye);if(_e.success){const tt=h.filter((it,ke)=>it.id&&y.includes(ke)).map(it=>({id:it.id,address:it.address.trim(),code:it.eircode.trim()||null}));console.log("Addresses to update:",tt);for(const it of tt){const ke=await window.myAPI?.updateAddress(it.id,{address:it.address,code:it.code});console.log("Update result for address",it.id,":",ke)}const ct=h.filter((it,ke)=>it.address.trim()&&!it.id&&y.includes(ke)).map(it=>({address:it.address.trim(),code:it.eircode.trim()||null,addedby:1}));console.log("New addresses to create:",ct);for(const it of ct){const ke=await window.myAPI?.createAddress({customer_id:n.id,...it});console.log("Create result for new address:",ke)}r&&r({id:n.id,...Ye,isloyal:d.isloyal,selectedAddressIndex:S}),t(),c&&c()}else alert("Error updating customer: "+_e.message)}else{const Ye=h.filter((ct,it)=>ct.address.trim()&&y.includes(it)).map(ct=>({address:ct.address.trim(),code:ct.eircode.trim()||null,addedby:1})),_e={name:d.name.trim(),phone:d.phone.trim()||null,email:d.email.trim()||null,address:null,isloyal:d.isloyal?1:0,addedBy:1,hotel_id:1},tt=await window.myAPI?.createCustomerWithAddresses({customer:_e,addresses:Ye});tt.success?(r&&r({id:tt.customerId,name:_e.name,phone:_e.phone,email:_e.email,isloyal:d.isloyal,addresses:Ye,selectedAddressIndex:S}),t(),c&&c()):alert("Error creating customer: "+tt.message)}}catch(Ye){console.error("Error saving customer:",Ye),alert("Error saving customer")}}},St=()=>{m({name:"",phone:"",email:"",eircode:"",address:"",isloyal:!1}),z({}),t()};return s?e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:n?"Edit Customer":"Add New Customer"}),e.jsx("button",{onClick:t,className:"text-white hover:text-primary p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[80vh]",children:e.jsxs("form",{onSubmit:xt,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:d.name,onChange:st,onFocus:Le=>Re(Le,"name"),onClick:Le=>Ie(Le,"name"),onBlur:Me,className:`w-full px-3 py-2.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${E.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter full name"}),E.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:E.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone ",(o==="Collection"||o==="Delivery")&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"phone",value:d.phone,onChange:st,onFocus:Le=>Re(Le,"phone"),onClick:Le=>Ie(Le,"phone"),onBlur:Me,className:`w-full px-3 py-2.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${E.phone?"border-red-500":"border-gray-300"}`,placeholder:"Enter phone number"}),E.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:E.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:d.email,onChange:st,onFocus:Le=>Re(Le,"email"),onClick:Le=>Ie(Le,"email"),onBlur:Me,className:`w-full px-3 py-2.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${E.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),E.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:E.email})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Addresses ",o==="Delivery"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("button",{type:"button",onClick:Xe,className:"text-sm text-primary hover:text-primary/80 font-medium",children:"+ Add More Address"})]}),E.address&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:E.address}),n&&h.length>=2&&e.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-700",children:"💡 Select the addresses you want to include. Unselected addresses will remain but won't be updated."})}),h.map((Le,Ye)=>e.jsxs("div",{className:`mb-4 p-3 border rounded-lg transition-colors ${n?y.includes(Ye)?"border-primary bg-primary/5":"border-gray-200 bg-gray-50 opacity-60":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[n&&e.jsx("input",{type:"checkbox",checked:y.includes(Ye),onChange:()=>rt(Ye),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary focus:ring-2"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Address ",Ye+1," ",Le.id&&"(Existing)",!1]})]}),e.jsxs("div",{className:"flex gap-2",children:[Le.id&&e.jsx("button",{type:"button",onClick:()=>Qe(Le.id),className:"text-red-500 hover:text-red-700 text-sm",children:"Delete"}),h.length>1&&e.jsx("button",{type:"button",onClick:()=>et(Ye),className:"text-gray-500 hover:text-gray-700 text-sm",children:"Remove"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative eircode-input-container",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Eircode"}),e.jsx("input",{type:"text",value:Le.eircode,onChange:_e=>G(Ye,_e.target.value),onKeyDown:_e=>ce(_e,Ye),onFocus:_e=>Re(_e,`address_${Ye}_eircode`),onClick:_e=>Ie(_e,`address_${Ye}_eircode`),onBlur:Me,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Enter Eircode (e.g., D01F5P2)"}),oe&&ne.addressIndex===Ye&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:Te?e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"Loading..."}):P.length>0?P.map((_e,tt)=>e.jsxs("div",{className:`px-3 py-2 text-sm cursor-pointer hover:bg-gray-100 ${tt===de?"bg-primary text-white":""}`,onClick:()=>ie(_e,Ye),children:[e.jsx("div",{className:"font-medium",children:_e.summaryline}),_e.locationsummary&&e.jsx("div",{className:"text-xs text-gray-500",children:_e.locationsummary})]},_e.id)):e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No addresses found"})}),!1]}),e.jsxs("div",{className:"relative address-input-container",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:Le.address,onChange:_e=>F(Ye,_e.target.value),onKeyDown:_e=>B(_e,Ye),onFocus:_e=>Re(_e,`address_${Ye}_address`),onClick:_e=>Ie(_e,`address_${Ye}_address`),onBlur:Me,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Start typing address..."}),Q&&k.addressIndex===Ye&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:Ce?e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"Loading..."}):Se.length>0?Se.map((_e,tt)=>e.jsxs("div",{className:`px-3 py-2 text-sm cursor-pointer hover:bg-gray-100 ${tt===ve?"bg-primary text-white":""}`,onClick:()=>J(_e,Ye),children:[e.jsx("div",{className:"font-medium",children:_e.summaryline}),_e.locationsummary&&e.jsx("div",{className:"text-xs text-gray-500",children:_e.locationsummary})]},_e.id)):e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No addresses found"})}),!1]})]})]},Ye))]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Favourite Customer"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isloyal",checked:d.isloyal,onChange:st,className:"sr-only",id:"loyal-toggle"}),e.jsx("label",{htmlFor:"loyal-toggle",className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${d.isloyal?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d.isloyal?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:St,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:n?"Update Customer":"Save"})]})]})})]})})}):null},IC=({isOpen:s,onClose:t,onCustomerSelect:r,onEditCustomer:n,onNewCustomer:o,orderType:c})=>{const[d,m]=v.useState(""),[h,g]=v.useState(""),[y,w]=v.useState(""),[S,_]=v.useState([]),[E,z]=v.useState([]),[I,U]=v.useState(null),[q,O]=v.useState(!1),[R,M]=v.useState(!1),[P,ee]=v.useState({isVisible:!1,message:"",type:"error"}),[oe,je]=v.useState(!1),[de,re]=v.useState(""),[Te,De]=v.useState(""),ne=async()=>{O(!0);try{const f=await window.myAPI?.getCustomersByHotelId(1);f&&f.success&&_(f.data||[])}catch(f){console.error("Error fetching customers:",f)}finally{O(!1)}};v.useCallback(async()=>{S.length>0&&await ne()},[S.length]);const ue=v.useCallback(f=>{console.log("Updating customer in list:",f),_(x=>x.some(C=>C.id===f.id)?x.map(C=>C.id===f.id?f:C):x),z(x=>x.some(C=>C.id===f.id)?x.map(C=>C.id===f.id?f:C):x),I&&I.id===f.id&&U(f)},[I]);v.useEffect(()=>{s&&(_([]),z([]),M(!1),m(""),g(""),w(""),U(null))},[s]),v.useEffect(()=>{const f=x=>{console.log("Customer updated event received:",x.detail);const N=x.detail.customer;N&&ue(N)};return window.addEventListener("customerUpdated",f),()=>{window.removeEventListener("customerUpdated",f)}},[ue]);const se=async()=>{if(!d.trim()&&!h.trim()){alert("Please enter either a name or phone number to search");return}O(!0),M(!0),je(!1),re("");try{let f=[];if(d.trim()){console.log("Searching by name:",d.trim());const N=await window.myAPI?.searchCustomerByName(d.trim());console.log("Name search result:",N),N&&N.success&&N.data&&(f=[...f,...N.data])}if(h.trim()){const N=await window.myAPI?.searchCustomerByPhone(h.trim());N&&N.success&&N.data&&(f=[...f,...N.data])}const x=f.filter((N,C,A)=>C===A.findIndex(H=>H.id===N.id));if(console.log("All customers found:",f.length),console.log("Unique customers:",x.length),x.length>0){const N=await Promise.all(x.map(async C=>{try{const A=await window.myAPI?.getCustomerAddresses(C.id);return A&&A.success?{...C,addresses:A.data||[]}:C}catch(A){return console.error("Error fetching addresses for customer:",C.id,A),C}}));_(N),z(N)}else _([]),z([])}catch(f){console.error("Error searching customers:",f),_([]),z([])}finally{O(!1)}},Ae=f=>{U(f)};v.useCallback((f,x="error")=>{ee({isVisible:!0,message:f,type:x})},[]);const Se=v.useCallback(()=>{ee({isVisible:!1,message:"",type:"error"})},[]),$e=()=>{if(console.log("CustomerSearchModal handleSave called"),console.log("selectedCustomer:",I),console.log("orderType:",c),console.log("onCustomerSelect:",r),I&&r){if(c==="Collection"||c==="Delivery"){if(!I.phone||I.phone.trim().length===0){console.log("Customer missing phone number, opening edit modal"),n&&n(I);return}if(c==="Delivery"&&(!I.addresses||I.addresses.length===0)){console.log("Customer missing address, opening edit modal"),n&&n(I);return}}console.log("Customer has all required data, calling onCustomerSelect"),r(I),t()}else console.log("No customer selected or onCustomerSelect not available")},Q=()=>{m(""),g(""),w(""),_([]),z([]),U(null),M(!1)},xe=f=>{re(f),f==="searchName"?De(d||""):f==="searchPhone"&&De(h||""),je(!0)},ve=f=>{setTimeout(()=>{je(!1),re(""),De("")},300)},ae=(f,x)=>{xe(x)},Ce=(f,x)=>{(!oe||de!==x)&&xe(x)},pe=(f,x)=>{De(f),x==="searchName"?m(f):x==="searchPhone"&&g(f)},k=(f,x)=>{const N=f.target.value;x==="searchName"?(m(N),de==="searchName"&&De(N)):x==="searchPhone"?(g(N),de==="searchPhone"&&De(N)):x==="searchEmail"&&(w(N),de==="searchEmail"&&De(N))},L=f=>{if(f==="{enter}")if(de==="searchName"){const x=document.querySelector('[name="searchPhone"]');x&&x.focus()}else de==="searchPhone"&&se()};return s?e.jsxs("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("h2",{className:"text-xl font-bold",children:"Customer List"})]}),e.jsx("button",{onClick:t,className:"text-white hover:text-primary p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Search"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone:"}),e.jsx("input",{type:"text",name:"searchPhone",value:h,onChange:f=>k(f,"searchPhone"),onFocus:f=>ae(f,"searchPhone"),onBlur:ve,onClick:f=>Ce(f,"searchPhone"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name:"}),e.jsx("input",{type:"text",name:"searchName",value:d,onChange:f=>k(f,"searchName"),onFocus:f=>ae(f,"searchName"),onBlur:ve,onClick:f=>Ce(f,"searchName"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Enter customer name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email:"}),e.jsx("input",{type:"text",name:"searchEmail",value:y,onChange:f=>k(f,"searchEmail"),onFocus:f=>ae(f,"searchEmail"),onBlur:ve,onClick:f=>Ce(f,"searchEmail"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Enter email"})]}),e.jsxs("button",{onClick:se,className:"px-4 py-3 bg-[#16A34A] text-white rounded-md hover:bg-[#16A34A]/90 focus:outline-none focus:ring-2 focus:ring-[#16A34A] focus:ring-offset-2 text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(jn,{size:16}),"Search"]})]})]}),e.jsx("div",{className:"pb-6 pl-6 pr-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsxs("button",{onClick:()=>{I&&window&&window.dispatchEvent(new CustomEvent("openCustomerInfo",{detail:{customer:I}}))},disabled:!I,className:`flex-1 px-4 py-2 rounded-md text-sm font-medium flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2 ${I?"bg-[#007BFF] text-white hover:bg-[#007BFF]/90 focus:ring-[#007BFF]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(vn,{size:16}),"View"]}),e.jsxs("button",{onClick:()=>{o&&o()},className:"flex-1 px-4 py-2 bg-[#007BFF] text-white rounded-md hover:bg-[#007BFF]/90 focus:outline-none focus:ring-2 focus:ring-[#007BFF] focus:ring-offset-2 text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Ls,{size:16}),"Create"]}),e.jsxs("button",{onClick:()=>{I&&n&&n(I)},disabled:!I,className:`flex-1 px-4 py-2 rounded-md text-sm font-medium flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2 ${I?"bg-[#007BFF] text-white hover:bg-[#007BFF]/90 focus:ring-[#007BFF]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(oa,{size:16}),"Edit"]}),e.jsxs("button",{onClick:Q,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Qb,{size:16}),"Reset"]})]})}),e.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:e.jsx("div",{className:"h-full flex flex-col",children:e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Select"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Count"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Delivery Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Loyal"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"Loading customers..."})}):E.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:R?"No customers found":"Enter name, phone, or email to search customers"})}):E.map(f=>e.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${I?.id===f.id?"bg-blue-50":""}`,onClick:()=>Ae(f),children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"radio",name:"customerSelect",checked:I?.id===f.id,onChange:()=>Ae(f),className:"text-primary focus:ring-primary border-gray-300"})}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:f.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:f.phone||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:f.orderCount||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.jsx("div",{className:"flex flex-col gap-1",children:f.addresses&&f.addresses.length>0?f.addresses.map((x,N)=>e.jsxs("div",{className:"text-xs",children:[x.address,x.code&&` (${x.code})`]},N)):e.jsx("span",{children:"No addresses"})})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:f.isLoyal?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"YES"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"NO"})})]},f.id))})]})})})})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3 bg-white flex-shrink-0",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Cancel"}),e.jsx("button",{onClick:$e,disabled:!I,className:`px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary ${I?"bg-primary hover:bg-primary/90":"bg-gray-300 cursor-not-allowed"}`,children:"Save"})]})]}),e.jsx(Xa,{isVisible:oe,onClose:()=>je(!1),activeInput:de,onInputChange:pe,onInputBlur:ve,inputValue:Te,onKeyPress:L}),e.jsx(Ci,{message:P.message,isVisible:P.isVisible,onClose:Se,type:P.type,duration:3e3})]}):null},zC=({isOpen:s,onClose:t,order:r,onCreateInvoice:n,foodDetails:o=null})=>!s||!r?null:e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Order Details"}),e.jsx("button",{onClick:t,className:"text-gray-600 hover:text-gray-800 p-1 rounded-full hover:bg-gray-100",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Order Type:"}),e.jsx("div",{className:"mt-1 text-gray-900",children:r.orderType})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Order Number:"}),e.jsx("div",{className:"mt-1 text-gray-900",children:r.orderNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Waiter:"}),e.jsx("div",{className:"mt-1 text-gray-900",children:r.waiter})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Customer:"}),e.jsx("div",{className:"mt-1 text-gray-900",children:r.customer?.name||"Walk-in Customer"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Table:"}),e.jsx("div",{className:"mt-1 text-gray-900",children:r.table||"None"})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"text-sm font-medium text-gray-700",children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Item"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Discount"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white",children:r.items&&r.items.length>0?r.items.map((c,d)=>e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c.food?.name||"Unknown Item"}),c.variations&&Object.keys(c.variations).length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Object.entries(c.variations).map(([m,h])=>{const g=o?.variations?.find(S=>S.id===parseInt(m)),y=g?.name||m,w=Array.isArray(h)?h:[h];return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-gray-500",children:["• ",y,":"]}),e.jsx("span",{className:"text-gray-700",children:w.map((S,_)=>{const E=g?.options?.find(z=>z.id===parseInt(S));return e.jsxs("span",{children:[E?.option_name||S,_<w.length-1?", ":""]},S)})})]},m)})}),c.adons&&c.adons.length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:c.adons.map((m,h)=>{const g=o?.adons?.find(S=>S.id===parseInt(m)),y=g?.name||m,w=g?.price;return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"• Addon:"}),e.jsx("span",{className:"text-gray-700",children:y}),w&&e.jsxs("span",{className:"text-gray-500",children:["(+€",w.toFixed(2),")"]})]},h)})})]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:["€",(parseFloat(c.totalPrice)/parseFloat(c.quantity)).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:c.quantity}),e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:"€0.00"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center font-medium text-gray-800",children:["€",parseFloat(c.totalPrice).toFixed(2)]})]},d)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"No items found"})})})]})})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Item:"}),e.jsx("span",{className:"font-semibold",children:r.items?r.items.reduce((c,d)=>c+(parseInt(d.quantity)||0),0):0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Sub Total:"}),e.jsxs("span",{className:"font-semibold",children:["€",(r.total/1.135).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Discount:"}),e.jsxs("span",{className:"font-semibold",children:["€",r.coupon?r.coupon.discount:"0.00"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tax:"}),e.jsxs("span",{className:"font-semibold",children:["€",(r.total*.135/1.135).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Discount:"}),e.jsxs("span",{className:"font-semibold",children:["€",r.coupon?r.coupon.discount:"0.00"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Charge:"}),e.jsx("span",{className:"font-semibold",children:"€0.00"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tips:"}),e.jsx("span",{className:"font-semibold",children:"€0.00"})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Total Payable:"}),e.jsxs("span",{className:"text-xl font-bold text-gray-800",children:["€",r.total.toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[e.jsxs("button",{onClick:n,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Oc,{size:20}),"Create Invoice & Close"]}),e.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Close"})]})]})}),Nh=({order:s,isOpen:t,onClose:r,onPrint:n,foodDetails:o=null,isKitchen:c=!1,isEmployee:d=!1,paymentStatus:m="PAID"})=>{const{themeColors:h}=Ur();if(!t||!s)return null;const g=z=>new Date(z).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),y=z=>new Date(z).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}),w=()=>s.items?s.items.reduce((z,I)=>z+parseFloat(I.totalPrice),0):0,S=()=>{const z=w(),I=typeof window<"u"?window.appSettings?.current||{}:{},U=parseFloat(I?.standard_tax||I?.food_tax||13.5);return z*U/100},_=()=>{const z=w(),I=S(),U=typeof window<"u"?window.appSettings?.current||{}:{},q=parseFloat(U?.delivery_fee_per_km||2),O=s.orderType==="Delivery"?.75:0,R=.22,M=s.orderType==="Delivery"?q:0;return z+I+M+O+R},E=()=>{n?n():window.print()};return e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:c?"Kitchen Order":d?"Employee Copy":"Print Invoice"}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100",children:"✕"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 print:p-0 print:border-0 invoice-print-content",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("div",{className:"w-16 h-16 mx-auto rounded-lg border-2 flex flex-col items-center justify-center mb-2 shadow-md",style:{backgroundColor:h.primary,borderColor:h.primaryLight},children:[e.jsx("span",{className:"text-white font-bold text-2xl",children:"G"}),e.jsx("span",{className:"text-white font-medium text-xs",children:"POS"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-lg font-bold text-gray-800",children:"Saffron Indian Cuisine Cashel"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tel: 06262080"})]})]}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase",children:s.orderType}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",g(s.placedAt||s.createdAt),", ASAP (",y(s.placedAt||s.createdAt),")"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-800",children:["# ",s.orderNumber]})]}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsx("div",{className:"mb-4",children:s.items&&s.items.length>0?s.items.map((z,I)=>e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:[z.quantity," x ",z.food?.name||"Unknown Item"]})}),z.variations&&Object.keys(z.variations).length>0&&e.jsx("div",{className:"text-xs text-gray-600 ml-4 mt-1",children:Object.entries(z.variations).map(([U,q])=>{const O=o?.variations?.find(P=>P.id===parseInt(U)),R=O?.name||U,M=Array.isArray(q)?q:[q];return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{children:["• ",R,":"]}),e.jsx("span",{children:M.map((P,ee)=>{const oe=O?.options?.find(je=>je.id===parseInt(P));return e.jsxs("span",{children:[oe?.option_name||P,ee<M.length-1?", ":""]},P)})})]},U)})}),z.adons&&z.adons.length>0&&e.jsx("div",{className:"text-xs text-gray-600 ml-4 mt-1",children:z.adons.map((U,q)=>{const O=o?.adons?.find(P=>P.id===parseInt(U)),R=O?.name||U,M=O?.price;return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{children:["• Addon: ",R]}),M&&e.jsxs("span",{children:["(+€",M.toFixed(2),")"]})]},q)})})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-800 ml-4",children:["€",parseFloat(z.totalPrice).toFixed(2)]})]},I)):e.jsx("p",{className:"text-center text-gray-500",children:"No items found"})}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsxs("span",{className:"font-medium",children:["€",w().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bag Fee:"}),e.jsx("span",{className:"font-medium",children:"€0.22"})]}),s.orderType==="Delivery"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Service Fee:"}),e.jsx("span",{className:"font-medium",children:"€0.75"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Delivery Charge:"}),e.jsx("span",{className:"font-medium",children:"€2.00"})]})]}),e.jsx("div",{className:"border-t border-gray-300 pt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold text-gray-800",children:"TOTAL (Incl. VAT):"}),e.jsxs("span",{className:"font-bold text-gray-800",children:["€",_().toFixed(2)]})]})})]}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsx("div",{className:"text-center mb-4",children:e.jsxs("div",{className:`text-lg font-bold ${m==="PAID"?"text-green-600":"text-red-600"}`,children:["***** ",m," *****"]})}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-2",children:"Customer Info:"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",s.customer?.name||"Walk-in Customer"]}),(s.orderType==="Delivery"||s.customer?.phone)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Phone:"}),s.customer?.phone||"N/A"]}),s.customer?.email&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",s.customer.email]}),s.orderType==="Delivery"&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Delivery Address:"}),(()=>{if(s.customer?.addresses&&s.customer.addresses.length>0){const z=s.customer.addresses[0];return typeof z=="string"?z:z.address?z.address:"Address format error"}else return s.customer?.address?s.customer.address:"No address available"})()]}),s.orderType!=="Delivery"&&s.table&&s.table!=="None"&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Table:"})," ",s.table]})]})]}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),s.notes&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-2",children:"Notes:"}),e.jsx("p",{className:"text-sm text-gray-700",children:s.notes})]}),e.jsx("div",{className:"border-t border-gray-300 my-4"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 mb-1",children:"Thank You For Ordering!"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Powered By G Tech Nexa Limited"})]}),e.jsx("div",{className:"border-t border-gray-300 my-4"})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:E,className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors font-medium",children:c?"Print Kitchen Order":d?"Print Employee Copy":"Print Invoice"}),e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Close"})]})]})})},eu=({label:s,value:t})=>e.jsxs("div",{className:"flex items-center justify-between py-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsx("span",{className:"text-gray-900 font-medium",children:t??"—"})]}),_g=({children:s})=>e.jsx("div",{className:"border-b border-gray-200 pb-2 mb-3",children:e.jsx("span",{className:"text-[13px] font-semibold text-gray-700",children:s})}),PC=({ok:s})=>e.jsx("span",{className:`inline-flex items-center justify-center h-7 px-3 rounded-full text-xs font-semibold ${s?"bg-green-100 text-green-800":"bg-red-100 text-red-700"}`,children:s?"YES":"NO"}),FC=({isOpen:s,onClose:t,customer:r,onEditCustomer:n,onChangeCustomer:o})=>{if(!s)return null;const c=r?.name??"N/A",d=r?.phone??"N/A",m=r?.email??"N/A",h=r?.orderCount??0,g=!!r?.isLoyal,y=r?.lastOrderDate??"—",w=(r?.addresses??[]).slice(0,3);return e.jsx("div",{className:"fixed inset-0 bg-black/40 z-[70] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl",children:[e.jsxs("div",{className:"bg-primary text-white px-4 py-3 rounded-t-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2.5 h-2.5 bg-green-500 rounded-full"}),e.jsx("h3",{className:"font-semibold",children:"Customer Information"})]}),e.jsx("button",{onClick:t,className:"text-white/80 hover:text-white",children:"✕"})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx(_g,{children:"Personal Information"}),e.jsx(eu,{label:"Name:",value:c}),e.jsx(eu,{label:"Phone:",value:d}),e.jsx(eu,{label:"Email:",value:m})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx(_g,{children:"Order Information"}),e.jsx(eu,{label:"Total Orders:",value:h}),e.jsxs("div",{className:"flex items-center justify-between py-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Loyalty Status:"}),e.jsx(PC,{ok:g})]}),e.jsx(eu,{label:"Last Order:",value:y})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx(_g,{children:"Address Information"}),[0,1,2].map(S=>e.jsxs("div",{className:"flex items-center justify-between py-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:`Delivery Address ${S+1}:`}),e.jsx("span",{className:"text-gray-900 font-medium text-right",children:w[S]?.address??"—"})]},S))]})]}),e.jsxs("div",{className:"px-5 pb-5 pt-2 grid grid-cols-4 gap-3",children:[e.jsx("button",{onClick:t,className:"col-span-1 h-11 rounded-md bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Back"}),e.jsx("button",{onClick:o,className:"col-span-1 h-11 rounded-md bg-gray-600 text-white hover:bg-gray-700",children:"Change Customer"}),e.jsx("button",{onClick:()=>n?.(r),className:"col-span-1 h-11 rounded-md bg-primary text-white hover:bg-black/90",children:"Edit Customer"}),e.jsx("button",{onClick:t,className:"col-span-1 h-11 rounded-md bg-primary/90 text-white",children:"OK"})]})]})})},LC=({isOpen:s,onClose:t,onEditDraft:r,currentDraftOrders:n=[],onDeleteDraft:o,onDeleteAllDrafts:c})=>{const[d,m]=v.useState(""),[h,g]=v.useState(null),[y,w]=v.useState(!1),[S,_]=v.useState(!1);v.useEffect(()=>{console.log("Drafts modal isOpen:",s),console.log("Current draft orders:",n)},[s,n]);const E=n.filter(M=>{if(!d.trim())return!0;if(!M)return!1;const P=d.toLowerCase();return(M.draftName||M.customer&&M.customer.name||"Unknown").toLowerCase().includes(P)||(M.customer&&M.customer.phone||"N/A").toLowerCase().includes(P)||(M.orderNumber||M.id||"Unknown").toString().toLowerCase().includes(P)}),z=M=>{g(M)},I=()=>{if(h&&r){const M={id:h.id,items:h.items,customer:h.customer,table:h.table,orderType:h.orderType,waiter:h.waiter,subTotal:h.subTotal,discount:h.discount,tax:h.tax,charge:h.charge,tips:h.tips,totalPayable:h.totalPayable};r(M),t()}},U=()=>{h&&w(!0)},q=()=>{_(!0)},O=()=>{h&&o&&(o(h.databaseId),g(null)),w(!1)},R=()=>{c&&(c(),g(null)),_(!1)};return s?e.jsxs("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-11/12 max-w-6xl h-5/6 flex",children:[e.jsxs("div",{className:"w-1/2 border-r border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Draft Sale"})}),e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search Customer Name",value:d,onChange:M=>m(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"px-4 py-2",children:e.jsx("div",{className:"bg-gray-50 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Customer (Phone)"})]})}),e.jsx("tbody",{children:E.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"p-4 text-center text-gray-500",children:"No draft orders found"})}):E.map(M=>M?e.jsxs("tr",{onClick:()=>z(M),className:`cursor-pointer hover:bg-gray-50 transition-colors ${h?.id===M.id?"bg-blue-50 border-l-4 border-blue-500":""}`,children:[e.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:M.orderNumber||M.id||"Unknown"}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:M.draftName||M.customer&&M.customer.name||"Unknown"})]},M.id||Math.random()):null)})]})})})}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsx("button",{onClick:q,className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Delete all Draft Sales"})})]}),e.jsxs("div",{className:"w-1/2 flex flex-col overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Order Details"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Nt,{className:"w-6 h-6"})})]}),h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-6 py-2 border-b border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Draft ID:"}),e.jsx("span",{className:"text-sm text-gray-900",children:h.orderNumber||h.id||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Draft Name:"}),e.jsx("span",{className:"text-sm text-gray-900",children:h.draftName||h.customer&&h.customer.name||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Customer:"}),e.jsx("span",{className:"text-sm text-gray-900",children:h.customer&&h.customer.name||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Phone:"}),e.jsx("span",{className:"text-sm text-gray-900",children:h.customer&&h.customer.phone||"N/A"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-gray-50 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Item"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"Qty Disc"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"Total"})]})}),e.jsx("tbody",{children:h.items.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-4 py-8 text-center text-gray-500",children:"No items in this draft order"})}):h.items.map((M,P)=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:M.name||M.food?.name||"Unknown Item"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:["€",((M.totalPrice||0)/(M.quantity||1)).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:M.qty||M.quantity||0}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:["€",(M.totalPrice||0).toFixed(2)]})]},P))})]})})})}),e.jsx("div",{className:"px-6 py-2 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Total Item:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:h.totalItems||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Sub Total:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["€",(h.subTotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Total Discount:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["€",(h.totalDiscount||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Tax:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["€",(h.tax||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Charge:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["€",(h.charge||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Tips:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["€",(h.tips||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between bg-gray-100 p-3 rounded-lg mt-2",children:[e.jsx("span",{className:"text-lg font-bold text-gray-800",children:"Total Payable:"}),e.jsxs("span",{className:"text-lg font-bold text-gray-800",children:["€",(h.totalPayable||0).toFixed(2)]})]})]})}),e.jsx("div",{className:"px-6 py-2 border-t border-gray-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:I,className:"flex-1 bg-primary text-white py-2 px-4 rounded-lg transition-colors font-medium flex items-center justify-center gap-2",children:[e.jsx(oa,{className:"w-4 h-4"}),"Edit In Cart"]}),e.jsxs("button",{onClick:U,className:"flex-1 bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors font-medium flex items-center justify-center gap-2",children:[e.jsx(Pa,{className:"w-4 h-4"}),"Delete"]}),e.jsx("button",{onClick:t,className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Cancel"})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(Lc,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"Select a draft order to view details"}),e.jsx("p",{className:"text-sm",children:"Choose an order from the list on the left"})]})})]})]}),y&&h&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-500 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Draft Order"}),e.jsx("button",{onClick:()=>w(!1),className:"text-white hover:text-red-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete this draft order? This action cannot be undone."}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Draft: ",e.jsx("strong",{children:h.orderNumber})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Customer: ",e.jsx("strong",{children:h.draftName||h.customer&&h.customer.name||"Unknown"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:O,className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-500 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete All Draft Orders"}),e.jsx("button",{onClick:()=>_(!1),className:"text-white hover:text-red-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete all draft orders? This action cannot be undone."}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["This will delete ",e.jsx("strong",{children:n.length})," draft order",n.length!==1?"s":"","."]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:R,className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete All"})]})]})})]}):null},BC=({isOpen:s,onClose:t,onSubmit:r})=>{const[n,o]=v.useState(""),c=()=>{n.trim()&&(r(n.trim()),o(""),t())},d=()=>{o(""),t()};return s?e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-96 max-w-md",children:[e.jsx("div",{className:"p-6 bg-primary rounded-t-lg text-white border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold",children:"Draft"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),e.jsx("input",{type:"text",value:n,onChange:m=>o(m.target.value),placeholder:"Enter customer name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none",autoFocus:!0})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:c,disabled:!n.trim(),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${n.trim()?"bg-primary text-white":"bg-primary text-white cursor-not-allowed"}`,children:"Submit"}),e.jsx("button",{onClick:d,className:"flex-1 py-2 px-4 bg-gray-200 text-gray-800 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})}):null},UC=({isOpen:s,onClose:t,hotelInfo:r,selectedScheduleDate:n,selectedScheduleTime:o,availableTimeSlots:c,useCustomTime:d,customTime:m,onDateChange:h,onTimeSelect:g,onCustomTimeChange:y,onUseCustomTimeChange:w,onConfirm:S,onCancel:_})=>s?e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Schedule Order"}),e.jsx("button",{onClick:_,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),r&&e.jsx("div",{className:"p-4 bg-gray-50 border-b",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Open: ",r.opening_time," - Close: ",r.closeing_time]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Date"}),e.jsx("input",{type:"date",value:n,onChange:E=>h(E.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Time"}),!d&&e.jsx(e.Fragment,{children:c.length>0?e.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-60 overflow-y-auto",children:c.map(E=>e.jsx("button",{onClick:()=>g(E),className:`p-3 text-sm rounded-lg border transition-all cursor-pointer ${o===E?"bg-primary text-white border-primary":"bg-white text-gray-700 border-gray-300 hover:border-primary hover:bg-gray-50"}`,children:E},E))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx($s,{size:24,className:"mx-auto mb-2"}),e.jsx("p",{children:"No available time slots for selected date"})]})})]}),(o||d&&m)&&e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Order scheduled for:"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-800",children:[n," at ",d?m:o]})]})})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:_,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors cursor-pointer",children:"Cancel"}),e.jsx("button",{onClick:S,disabled:!o&&!(d&&m),className:`flex-1 px-4 py-2 rounded-lg transition-colors cursor-pointer ${o||d&&m?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Confirm Schedule"})]})]})}):null,Iv=v.createContext(),Ex=()=>{const s=v.useContext(Iv);if(!s)throw new Error("useRiders must be used within a RiderProvider");return s},$C=({children:s})=>{const[t,r]=v.useState([{id:1,name:"John Smith",status:"Available",vehicle:"Car - ABC123",vehicleType:"car",mobile:"+353 87 123 4567",address:"123 Main St, Dublin",fullName:"John Smith"},{id:2,name:"Mike Johnson",status:"Available",vehicle:"Motorcycle - XYZ789",vehicleType:"motorcycle",mobile:"+353 87 234 5678",address:"456 Oak Ave, Cork",fullName:"Mike Johnson"},{id:3,name:"Sarah Wilson",status:"On Delivery",vehicle:"Car - DEF456",vehicleType:"car",mobile:"+353 87 345 6789",address:"789 Pine Rd, Galway",fullName:"Sarah Wilson"},{id:4,name:"David Brown",status:"Available",vehicle:"Motorcycle - GHI789",vehicleType:"motorcycle",mobile:"+353 87 456 7890",address:"321 Elm St, Limerick",fullName:"David Brown"},{id:5,name:"Lisa Davis",status:"Available",vehicle:"Car - JKL012",vehicleType:"car",mobile:"+353 87 567 8901",address:"654 Maple Dr, Waterford",fullName:"Lisa Davis"}]),[n,o]=v.useState(null),h={riders:t,selectedRider:n,setSelectedRider:o,addRider:g=>{const y={id:Date.now(),name:g.fullName,fullName:g.fullName,status:g.status==="active"?"Available":"Inactive",vehicle:g.vehicleType==="car"?`Car - ${g.regNo||"N/A"}`:g.vehicleType==="bike"?`Bike - ${g.regNo||"N/A"}`:`E-bike - ${g.regNo||"N/A"}`,vehicleType:g.vehicleType,mobile:g.mobile,address:g.address,licenceExpiry:g.licenceExpiry,insuranceExpiry:g.insuranceExpiry,blockOnExpiry:g.blockOnExpiry,payPreset:g.payPreset,perDrop:g.perDrop,perKm:g.perKm,basePerShift:g.basePerShift,hourlyRate:g.hourlyRate,deliveryFeeKeptBy:g.deliveryFeeKeptBy,riderShare:g.riderShare,cashTipsKeptByRider:g.cashTipsKeptByRider,cardTipsPayout:g.cardTipsPayout,payoutMethod:g.payoutMethod,ibanBic:g.ibanBic};return r(w=>[...w,y]),y},updateRiderStatus:(g,y)=>{r(w=>w.map(S=>S.id===g?{...S,status:y}:S))},getAvailableRiders:()=>t.filter(g=>g.status==="Available")};return e.jsx(Iv.Provider,{value:h,children:s})},Tx=({isOpen:s,onClose:t,onBack:r,order:n,onAssignRider:o,onStatusUpdate:c})=>{const{setSelectedRider:d}=Ex(),[m,h]=v.useState(null),[g,y]=v.useState(""),[w,S]=v.useState([]),[_,E]=v.useState(!1),[z,I]=v.useState(!1),U=async()=>{try{E(!0);const R=await window.myAPI.getAllEmployees();if(R&&R.success&&Array.isArray(R.data)){const M=R.data.filter(P=>String(P.roll).toLowerCase()==="delivery_man").map(P=>({id:P.id,name:[P.fname,P.lname].filter(Boolean).join(" ")||P.phone||`Rider ${P.id}`,vehicle:P.vtype&&P.vnumber?`${P.vtype} • ${P.vnumber}`:P.vtype||"N/A",vehicleType:(P.vtype||"").toLowerCase().includes("car")?"car":"bike",status:P.isavailable===1||P.isavailable===!0?"Available":"Not Available",raw:P}));S(M)}else S([])}catch(R){console.error("Error fetching riders:",R),S([])}finally{E(!1)}},q=R=>{h(R)},O=async()=>{if(!m)return!1;try{return I(!0),d(m),await o(m)?(h(null),y(""),!0):!1}catch(R){return console.error("Error assigning rider:",R),!1}finally{I(!1)}};return v.useEffect(()=>{s?(h(null),y(""),I(!1),U()):(h(null),y(""),I(!1),S([]))},[s]),s?e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(zc,{size:20})}),e.jsx("h2",{className:"text-xl font-bold",children:"Assign Rider"})]}),e.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-4 bg-gray-50 border-b",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:["#",n?.orderNumber]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Delivery Order"})]})}),e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search riders...",value:g,onChange:R=>y(R.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",autoFocus:!0},`search-${s}`)]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:_?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading riders..."})}):w.length>0?e.jsx("div",{className:"space-y-3",children:w.filter(R=>R.name.toLowerCase().includes(g.toLowerCase())||(R.vehicle||"").toLowerCase().includes(g.toLowerCase())).map(R=>e.jsx("div",{onClick:()=>q(R),className:`p-4 border rounded-lg cursor-pointer transition-all ${m?.id===R.id?"border-primary bg-primary/5":"border-gray-200 hover:border-primary/50 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:R.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[R.vehicleType==="car"?e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-sm text-gray-600",children:R.vehicle})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R.status==="Available"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:R.status}),m?.id===R.id&&e.jsx(la,{size:16,className:"text-primary"})]})]})},`rider-${R.id}-${s}`))}):e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"No riders available"})})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors cursor-pointer",children:"Cancel"}),e.jsx("button",{onClick:O,disabled:!m||z,className:`flex-1 px-4 py-2 rounded-lg transition-colors cursor-pointer ${!m||z?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-primary/90"}`,children:z?"Assigning...":"Assign Rider"})]})]})}):null},zv=({isOpen:s,onClose:t,order:r,onStatusUpdate:n,onRiderAssignment:o,selectedStatus:c,onStatusChange:d,isUpdating:m=!1})=>{const[h,g]=v.useState(!1);Sr.useEffect(()=>{s&&g(!1)},[s]);const y=()=>{g(!1),t()};if(!s||!r)return null;const w=E=>{switch(E){case"In Store":return[{key:"New",label:"New",icon:e.jsx($s,{size:20}),disabled:!1},{key:"In Progress",label:"In Progress",icon:e.jsx($s,{size:20}),disabled:!1},{key:"Ready",label:"Ready",icon:e.jsx(la,{size:20}),disabled:!1},{key:"Completed",label:"Completed",icon:e.jsx(iu,{size:20}),disabled:!1}];case"Table":case"Dine In":case"Collection":return[{key:"New",label:"New",icon:e.jsx($s,{size:20}),disabled:!1},{key:"In Progress",label:"In Progress",icon:e.jsx($s,{size:20}),disabled:!1},{key:"Ready",label:"Ready",icon:e.jsx(la,{size:20}),disabled:!1},{key:"Completed",label:"Completed",icon:e.jsx(iu,{size:20}),disabled:!1}];case"Delivery":return[{key:"New",label:"New",icon:e.jsx($s,{size:20}),disabled:!1},{key:"In Progress",label:"In Progress",icon:e.jsx($s,{size:20}),disabled:!1},{key:"Ready",label:"Ready",icon:e.jsx(la,{size:20}),disabled:!1},{key:"On the way",label:"On the way",icon:e.jsx(So,{size:20}),disabled:!1},{key:"Delivered",label:"Delivered",icon:e.jsx(la,{size:20}),disabled:!1},{key:"Completed",label:"Completed",icon:e.jsx(iu,{size:20}),disabled:!1}];default:return[{key:"New",label:"New",icon:e.jsx($s,{size:20}),disabled:!1},{key:"In Progress",label:"In Progress",icon:e.jsx($s,{size:20}),disabled:!1},{key:"Ready",label:"Ready",icon:e.jsx(la,{size:20}),disabled:!1},{key:"Completed",label:"Completed",icon:e.jsx(iu,{size:20}),disabled:!1}]}},S=E=>{E.disabled||(r.orderType==="Delivery"&&E.key==="On the way"?(y(),o&&o()):d(E.key))},_=()=>{n&&(g(!0),n(c))};return e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Update Order Status"}),e.jsx("button",{onClick:y,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-6 bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:["#",r.orderNumber]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Type: ",r.orderType||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Current: ",r.status||"Pending"]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:w(r.orderType).map(E=>e.jsx("button",{onClick:()=>S(E),className:`p-4 rounded-lg border-2 transition-all ${E.disabled?"bg-gray-300 text-gray-500 border-gray-300 cursor-not-allowed":c===E.key?"bg-white border-primary text-primary cursor-pointer":"bg-primary text-white border-primary hover:bg-primary/90 cursor-pointer"}`,disabled:E.disabled,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[E.icon,e.jsx("span",{className:"font-medium",children:E.label})]})},E.key))})}),h&&e.jsx("div",{className:"px-6 py-3 bg-green-50 border-t border-green-200",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[e.jsx(la,{size:20}),e.jsx("span",{className:"font-medium",children:"Status updated successfully!"})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:y,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors cursor-pointer",children:"Cancel"}),e.jsx("button",{onClick:_,disabled:m,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${m?"bg-gray-400 text-gray-400 cursor-not-allowed":"bg-primary text-white hover:bg-primary cursor-pointer"}`,children:m?"Updating...":"Update Status"})]})]})})},HC=()=>{const s=v.useCallback(()=>{try{const r=window.appSettings?.current;return{dineInOrders:r?.dine_in_orders===1||r?.dine_in_orders===!0,inStoreOrders:r?.in_store_orders===1||r?.in_store_orders===!0,takeawayOrders:r?.takeaway_orders===1||r?.takeaway_orders===!0,deliveryOrders:r?.delivery_orders===1||r?.delivery_orders===!0}}catch(r){return console.log("Failed to get order type settings:",r),{dineInOrders:!0,inStoreOrders:!0,takeawayOrders:!0,deliveryOrders:!0}}},[]),t=v.useCallback(r=>{const n=s();switch(r){case"table":return n.dineInOrders;case"instore":return n.inStoreOrders;case"collection":return n.takeawayOrders;case"delivery":return n.deliveryOrders;default:return!0}},[s]);return{getOrderTypeSettings:s,shouldShowOrderType:t,orderTypeSettings:s()}};let Pv=null;const VC=s=>{Pv=s},qC=()=>{try{const s=window.appSettings?.current||Pv;if(!(s?.sound_alert===1||s?.sound_alert===!0))return;_v()}catch(s){console.log("Button sound creation failed:",s)}},Xg=s=>{const t=s.target;(t.tagName==="BUTTON"||t.closest("button")||t.getAttribute("role")==="button"||t.classList.contains("btn")||t.classList.contains("button")||t.classList.contains("btn-lifted")||t.closest("[data-invoice-button]")||t.closest(".cursor-pointer")||t.closest('a[class*="cursor-pointer"]')||t.closest('a[class*="hover:"]')||t.closest('a[class*="flex items-center"]')||t.closest('[class*="hover:bg-"]')||t.closest('[class*="hover:text-"]')||t.onclick!==null||t.parentElement?.onclick!==null||t.parentElement?.tagName==="BUTTON"||t.parentElement?.classList.contains("cursor-pointer"))&&qC()},KC=()=>{document.removeEventListener("click",Xg),document.addEventListener("click",Xg,!0),console.log("Button sound handler initialized")},YC=()=>{document.removeEventListener("click",Xg,!0),console.log("Button sound handler cleaned up")},Fv=v.createContext(null),GC=({children:s})=>{const[t,r]=v.useState(null),[n,o]=v.useState(!1),c=v.useRef(!1),d=v.useCallback(async()=>{try{o(!0);const h=await window.settingsAPI?.get();if(h?.success){const g=h.data||null;r(g),VC(g)}}catch(h){console.error("Failed to load settings:",h)}finally{o(!1),c.current=!0}},[]);v.useEffect(()=>(d(),KC(),()=>{YC()}),[d]);const m={settings:t,isLoading:n,hasLoaded:c.current,reloadSettings:d};return v.useEffect(()=>{window.appSettings={reloadSettings:d,get current(){return t}}},[d,t]),e.jsx(Fv.Provider,{value:m,children:s})},WC=()=>{const s=v.useContext(Fv);if(!s)throw new Error("useSettings must be used within a SettingsProvider");return s},Qg=({isOpen:s,onClose:t,selectedPaymentMethod:r,setSelectedPaymentMethod:n,paymentAmount:o,setPaymentAmount:c,givenAmount:d,setGivenAmount:m,changeAmount:h,setChangeAmount:g,currencyAmount:y,setCurrencyAmount:w,selectedCurrency:S,setSelectedCurrency:_,currencyOptions:E,addedPayments:z,setAddedPayments:I,isSinglePayMode:U,selectedSplitBill:q,selectedPlacedOrder:O,cartItems:R,foodDetails:M,appliedCoupon:P,removeAppliedCoupon:ee,couponCode:oe,setCouponCode:je,availableCoupons:de,couponsLoading:re,discountType:Te,setDiscountType:De,discountAmount:ne,setDiscountAmount:ue,sendSMS:se,setSendSMS:Ae,handleCashGivenAmountChange:Se,handleCashAmountChange:$e,handleNumericInputFocus:Q,handleNumericKeyboardChange:xe,handleNumericKeyboardKeyPress:ve,handleAddPayment:ae,handleApplyManualDiscount:Ce,handleApplyCoupon:pe,handleAnyInputFocus:k,handleAnyInputClick:L,handleCustomInputBlur:f,calculateSinglePayTotals:x,calculateSplitBillTotal:N,calculateCartTotal:C,calculateSplitBillSubtotal:A,calculateSplitBillTax:H,calculateSplitBillDiscount:V,calculateSplitBillCharge:F,calculateSplitBillTips:B,calculateCartSubtotal:J,calculateCartTax:Y,calculateCartDiscount:T,calculateDueAmount:G,getCurrencySymbol:ce,numericActiveInput:ie,numericKeyboardInput:fe,setNumericActiveInput:me,setNumericKeyboardInput:Me,setShowCartDetailsModal:Re,splitBillToRemove:Ie,setSplitBills:st,setSplitBillToRemove:He,placedOrders:Xe,selectedCustomer:et,selectedOrderType:rt,selectedTable:Qe,handlePlaceOrder:At,showError:xt,showSuccess:St,setIsInvoiceAfterPayment:Le,setShowInvoiceModal:Ye,clearCart:_e,resetFinalizeSaleModal:tt,setIsSinglePayMode:ct,setSelectedPlacedOrder:it,setCurrentOrderForInvoice:ke,isModifyingOrder:Ke,modifyingOrderId:ut,modifyingOrderPaymentInfo:Ct,showPayLaterButton:Et,setShowPayLaterButton:Bt,hasResetPayment:ge,setHasResetPayment:Ee})=>s?(Sr.useEffect(()=>{Ke&&Ct&&Ct.payment_method&&n(Ct.payment_method)},[Ke,Ct,n]),e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl h-[95vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold",children:U?"Finalize Sale - Single Pay":q?`Finalize Sale - Split Bill ${q.id}`:"Finalize Sale"}),e.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6 flex gap-6 flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-44 flex-shrink-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Payment Method"}),e.jsx("div",{className:"space-y-2",children:["Cash","Credit Card","Check","Bank Transfer"].map(le=>e.jsx("button",{onClick:()=>{n(le),c(""),m(""),g(""),w("")},className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${r===le?"bg-gray-200 text-gray-800 font-medium":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:le},le))})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto max-h-[70vh]",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:r}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[r==="Cash"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Given Amount"}),e.jsx("input",{type:"number",value:d,onChange:le=>Se(le.target.value),onFocus:le=>Q(le,"givenAmount",d),onClick:le=>Q(le,"givenAmount",d),onBlur:le=>{if(ie==="givenAmount"&&fe!==void 0)if(m(fe),c(fe),fe){const Ve=U?x().total:q?N():C(),nt=parseFloat(fe)-Ve;g(nt>0?nt.toFixed(2):"0.00")}else g("0.00");me("")},onInput:le=>{const Ve=le.target.value;if(m(Ve),c(Ve),ie==="givenAmount"&&Me(Ve),Ve){const nt=U?x().total:q?N():C(),mt=parseFloat(Ve)-nt;g(mt>0?mt.toFixed(2):"0.00")}else g("0.00")},placeholder:"Given Amount",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Change Amount"}),e.jsx("input",{type:"number",value:h,onChange:le=>g(le.target.value),placeholder:"Change Amount",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",readOnly:!0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsx("input",{type:"number",value:o,onChange:le=>$e(le.target.value),onFocus:le=>Q(le,"paymentAmount",o),onClick:le=>Q(le,"paymentAmount",o),onBlur:le=>{if(ie==="paymentAmount"&&fe!==void 0&&(c(fe),r==="Cash"))if(m(fe),fe){const Ve=U?x().total:q?N():C(),nt=parseFloat(fe)-Ve;g(nt>0?nt.toFixed(2):"0.00")}else g("0.00");me("")},onInput:le=>{const Ve=le.target.value;if(c(Ve),ie==="paymentAmount"&&Me(Ve),r==="Cash")if(m(Ve),Ve){const nt=U?x().total:q?N():C(),mt=parseFloat(Ve)-nt;g(mt>0?mt.toFixed(2):"0.00")}else g("0.00")},placeholder:"Amount",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}):r==="Change Currency"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),e.jsx("select",{value:S,onChange:le=>_(le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:E.map(le=>e.jsxs("option",{value:le.code,children:[le.symbol," ",le.name]},le.code))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsx("input",{type:"number",value:y,onChange:le=>w(le.target.value),placeholder:"Amount",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:()=>{w("")},className:"px-2 py-2 text-red-500 hover:text-red-700 self-end",children:e.jsx(Nt,{size:16})})]}):e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsx("input",{type:"number",value:o,onChange:le=>c(le.target.value),onFocus:le=>Q(le,"paymentAmount",o),onClick:le=>Q(le,"paymentAmount",o),onBlur:le=>{ie==="paymentAmount"&&fe!==void 0&&c(fe),me("")},onInput:le=>{const Ve=le.target.value;c(Ve),ie==="paymentAmount"&&Me(Ve)},placeholder:"Amount",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r!=="Change Currency"&&e.jsx("button",{onClick:ae,className:"px-6 py-2 bg-gray-300 text-black rounded-lg hover:bg-gray-400 transition-colors self-end",children:"Add"})]}),e.jsx("div",{className:"flex-1 bg-gray-50 rounded-lg p-4 mb-6",children:z.length>0?e.jsx("div",{className:"space-y-2",children:z.map((le,Ve)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded border",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[le.method,": €",le.amount]}),e.jsx("button",{onClick:()=>I(nt=>nt.filter((mt,wt)=>wt!==Ve)),className:"text-red-500 hover:text-red-700",children:e.jsx(Nt,{size:16})})]},Ve))}):e.jsxs("div",{className:"text-gray-400 text-center py-8",children:[e.jsx("div",{className:"mb-2",children:"No payments added yet"}),e.jsx("div",{className:"text-xs",children:"Add a payment above to enable the Submit button"})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"space-y-2",children:[q&&e.jsx("div",{className:"border-b border-gray-200 pb-2 mb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Split Bill ",q.id,":"]}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:q.customer})]})}),U&&O&&e.jsx("div",{className:"border-b border-gray-200 pb-2 mb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-md font-medium text-gray-700",children:["Order #",O.id||O.orderNumber,":"]}),e.jsx("span",{className:"text-md font-medium text-gray-700",children:O.customer?.name||O.customer||"Walk-in Customer"})]})}),e.jsxs("div",{className:"border-b border-gray-200 pb-2 mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-md font-medium text-gray-700",children:"Subtotal:"}),e.jsxs("span",{className:"text-md font-medium text-gray-700",children:[ce(),U?x().subtotal.toFixed(2):q?A().toFixed(2):J().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-md font-medium text-gray-700",children:"Tax:"}),e.jsxs("span",{className:"text-md font-medium text-gray-700",children:[ce(),U?x().tax.toFixed(2):q?H().toFixed(2):Y().toFixed(2)]})]}),(U?x().discount:q?V():T())>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Discount:"}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["-",ce(),U?x().discount.toFixed(2):q?V().toFixed(2):T().toFixed(2)]})]}),(U?0:q?F():0)>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Charge:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[ce(),q?F().toFixed(2):"0.00"]})]}),(U?0:q?B():0)>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tips:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[ce(),q?B().toFixed(2):"0.00"]})]})]}),P&&e.jsx("div",{className:"border-b border-gray-200 pb-2 mb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm font-medium text-green-600",children:[P.title," (",P.code,"):"]}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["-",ce(),U?x().discount.toFixed(2):q?V().toFixed(2):T().toFixed(2)]})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Payable:"}),e.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[ce(),U?x().total.toFixed(2):q?N().toFixed(2):C().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Paid:"}),e.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[ce(),z.reduce((le,Ve)=>le+parseFloat(Ve.amount),0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Due:"}),e.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[ce(),Math.max(0,(U?x().total:q?N():C())-z.reduce((le,Ve)=>le+parseFloat(Ve.amount),0)).toFixed(2)]})]})]})}),Ke&&Ct&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"text-md font-semibold text-blue-800",children:"Previous Payment Information"}),e.jsx("button",{onClick:()=>{Ee(!0),c("0"),m("0"),g("0"),I([]),Bt(!0)},className:"px-3 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600 transition-colors",children:"Reset Payment"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Payment Method:"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:Ct.payment_method})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Previously Paid:"}),e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[ce(),Ct.paid_amount.toFixed(2)]})]})]}),ge&&e.jsx("div",{className:"mt-3 p-2 bg-yellow-100 border border-yellow-300 rounded",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"Payment has been reset. You can now add new payments or use Pay Later option."})})]}),z.length>0&&G()>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bu,{size:16,className:"text-yellow-600"}),e.jsxs("span",{className:"text-sm text-yellow-800 font-medium",children:["Payment incomplete. Due amount: ",ce(),G().toFixed(2)]})]}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Add more payments to complete the transaction."})]}),z.length>0&&G()===0&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(la,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-sm text-green-800 font-medium",children:"Payment complete! Ready to submit."})]})}),q&&q.items&&q.items.length>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Items in this Split Bill:"}),e.jsx("div",{className:"space-y-2",children:q.items.map((le,Ve)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-800",children:le.food?.name||"Unknown Item"}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["x",le.quantity||0]})]}),e.jsxs("span",{className:"text-gray-800 font-medium",children:["€",(le.totalPrice||0).toFixed(2)]})]},Ve))})]}),U&&(R.length>0||O&&O.items&&O.items.length>0)&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Order Items:"}),e.jsx("div",{className:"space-y-2",children:(R.length>0?R:O.items).map((le,Ve)=>e.jsxs("div",{className:"flex justify-between items-start text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:le.food?.name||"Unknown Item"}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["x",le.quantity||0]})]}),le.variations&&Object.keys(le.variations).length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Object.entries(le.variations).map(([nt,mt])=>{const wt=M?.variations?.find(ye=>ye.id===parseInt(nt)),vt=wt?.name||nt,_t=Array.isArray(mt)?mt:[mt];return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-gray-500",children:["• ",vt,":"]}),e.jsx("span",{className:"text-gray-700",children:_t.map((ye,ze)=>{const Z=wt?.options?.find(te=>te.id===parseInt(ye));return e.jsxs("span",{children:[Z?.option_name||ye,ze<_t.length-1?", ":""]},ye)})})]},nt)})}),le.adons&&le.adons.length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:le.adons.map((nt,mt)=>{const wt=M?.adons?.find(ye=>ye.id===parseInt(nt)),vt=wt?.name||nt,_t=wt?.price;return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"• Addon:"}),e.jsx("span",{className:"text-gray-700",children:vt}),_t&&e.jsxs("span",{className:"text-gray-500",children:["(+€",_t.toFixed(2),")"]})]},mt)})})]}),e.jsxs("span",{className:"text-gray-800 font-medium",children:["€",(parseFloat(le.totalPrice)||0).toFixed(2)]})]},Ve))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:se,onChange:le=>Ae(le.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Send SMS"})]}),e.jsx("button",{onClick:()=>Re(!0),className:"px-4 py-2 bg-gray-300 text-black rounded-lg hover:bg-gray-400 transition-colors text-sm",children:U?"Order Details":q?"Split Bill Details":"Cart Details"})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-col h-full",children:[e.jsx("div",{className:"mb-4 flex-shrink-0",children:e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("div",{className:"keyboard-container w-full",onClick:le=>le.stopPropagation(),onMouseDown:le=>le.preventDefault(),children:e.jsx(Dx,{keyboardRef:le=>window.keyboard=le,input:fe,onChange:xe,onKeyPress:ve,theme:"hg-theme-default",layoutName:"numeric",layout:{numeric:["1 2 3","4 5 6","7 8 9","0 {bksp}"]},display:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0","{bksp}":"⌫"},physicalKeyboardHighlight:!0,physicalKeyboardHighlightTextColor:"#000000",physicalKeyboardHighlightBgColor:"#fff475"})})})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Coupons & Discounts"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ah,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Manual Discount"})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Discount Type"}),e.jsxs("select",{name:"discountType",value:Te,onChange:le=>De(le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm",children:[e.jsx("option",{value:"percentage",children:"Percentage (%)"}),e.jsx("option",{value:"fixed",children:"Fixed Amount (€)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Disc. Amount"}),e.jsx("input",{type:"number",name:"discountAmount",value:ne,onChange:le=>ue(le.target.value),onFocus:le=>Q(le,"discountAmount",ne),onClick:le=>Q(le,"discountAmount",ne),onBlur:le=>{ie==="discountAmount"&&fe!==void 0&&ue(fe),me("")},onInput:le=>{const Ve=le.target.value;ue(Ve),ie==="discountAmount"&&Me(Ve)},min:"0",step:"0.01",placeholder:Te==="percentage"?"20":"10",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"})]})]}),ne&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:["✓ Manual discount of ",ne,Te==="percentage"?"%":"€"," is ready to apply."]}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx("button",{onClick:Ce,disabled:!ne||parseFloat(ne)<=0,className:`px-4 py-2 rounded-lg transition-colors font-medium ${ne&&parseFloat(ne)>0?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Apply Manual Discount"})})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ah,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Enter Coupon Code"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"couponCode",value:oe,onChange:le=>je(le.target.value),onFocus:le=>k(le,"couponCode"),onClick:le=>L(le,"couponCode"),onBlur:le=>f(le,"couponCode"),placeholder:"Enter promo code or click a coupon below",className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${oe.trim()?"border-green-400 focus:ring-green-500 focus:ring-green-500 bg-green-50":"border-gray-300 focus:ring-green-500 focus:border-green-500"}`,onKeyUp:le=>{le.key==="Enter"&&pe()}}),e.jsx("button",{onClick:pe,disabled:!oe.trim(),className:`px-4 py-2 rounded-lg transition-colors font-medium ${oe.trim()?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Apply"})]}),oe.trim()&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:['✓ Coupon code "',oe,'" is ready to apply. Click "Apply".']})]}),P&&e.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Applied Coupon"}),e.jsx("p",{className:"text-sm text-green-600",children:P.title}),e.jsxs("p",{className:"text-xs text-green-600",children:["Code: ",P.code]}),P.discountType==="percentage"?e.jsxs("p",{className:"text-green-700 font-medium",children:[P.discount,"% OFF"]}):e.jsxs("p",{className:"text-green-700 font-medium",children:["€",P.discount," OFF"]})]}),e.jsx("button",{onClick:ee,className:"text-red-600 hover:text-red-800 p-1",children:e.jsx(Nt,{size:16})})]})}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-md font-semibold text-gray-800 mb-3",children:"Available Coupons"}),re?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading coupons..."})}):de.length>0?e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:de.map(le=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:border-green-300 hover:bg-green-50 transition-all cursor-pointer group",onClick:()=>{je(le.code)},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h6",{className:"font-semibold text-gray-800 text-sm",children:le.title}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Customer Type: ",le.customerType]}),le.discountType==="percentage"?e.jsxs("p",{className:"text-green-600 font-medium mt-1 text-sm",children:[le.discount,"% OFF"]}):e.jsxs("p",{className:"text-green-600 font-medium mt-1 text-sm",children:["€",le.discount," OFF"]})]}),e.jsx("div",{className:"text-right ml-4",children:e.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:["Code: ",le.code]})})]}),e.jsx("div",{className:"mt-1 text-xs text-green-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to use this coupon code"})]},le.id))}):e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"No coupons available"})})]})]})})]})]}),Ke&&Et&&e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("button",{onClick:async()=>{try{const Ve={order_amount:U?x().total:q?N():C(),payment_status:"pending",payment_method:null};if(ut){const nt=await window.myAPI.updateOrder(ut,Ve);if(!nt.success){xt("Failed to update order: "+nt.message);return}St("Order updated with new amount. Payment status set to pending.")}else{xt("Order ID not found. Cannot update order.");return}t(),ct(!1),_e(),tt()}catch(le){console.error("Error updating order for pay later:",le),xt("Failed to update order. Please try again.")}},className:"w-full px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx($s,{size:20}),"Pay Later (€",(U?x().total:q?N():C()).toFixed(2),")"]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-4",children:[e.jsxs("button",{onClick:()=>{t(),ct(!1)},className:"flex-1 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Nt,{size:20}),"Cancel"]}),e.jsxs("button",{disabled:z.length===0||G()>0,onClick:async()=>{try{const le=parseFloat(o)||0,Ve=parseFloat(d)||0,nt=parseFloat(h)||0;if(U){Le(!0);const mt=await At();if(!mt){xt("Failed to create order for payment");return}try{const wt={payment_status:"paid",payment_method:r,order_status:"completed"},vt=await window.myAPI.updateOrder(mt,wt);if(!vt.success){xt("Failed to update order payment: "+vt.message);return}try{const ye=await window.myAPI.getOrderById(mt);if(ye.success&&ye.data.table_details){const ze=JSON.parse(ye.data.table_details);if(ze&&ze.tables&&ze.tables.length>0){const Z=ze.tables.map(Fe=>Fe.id);console.log("Freeing tables after payment completion:",Z);const te=await window.myAPI.tableUpdateMultipleStatuses(Z,"Free");te.success?console.log("Tables freed successfully after payment:",te.message):console.warn("Failed to free tables after payment:",te.message)}}}catch(ye){console.error("Error freeing tables after payment:",ye)}const _t={id:mt,orderNumber:`ORD-${String(mt).padStart(3,"0")}`,items:R,customer:et||{name:"Walk-in Customer"},total:C(),coupon:P,orderType:rt,table:Qe?`Table ${Qe}`:"None",waiter:"Ds Waiter",status:"Completed",placedAt:new Date().toISOString(),databaseId:mt};it(_t)}catch(wt){console.error("Error processing single pay order:",wt),xt("Failed to process payment for new order");return}}else if(O&&O.databaseId){Le(!0);const mt={payment_status:"paid",payment_method:r},wt=await window.myAPI.updateOrder(O.databaseId,mt);if(!wt.success){xt("Failed to update order payment: "+wt.message);return}}else if(q){Le(!0);const mt={id:q.id,orderNumber:`${O?.orderNumber||"ORD-000"}-SPLIT-${q.id}`,items:q.items,customer:q.customer||O?.customer||{name:"Walk-in Customer"},total:q.total,coupon:P,orderType:O?.orderType||"In Store",table:O?.table||"None",waiter:O?.waiter||"Ds Waiter",status:"Split Payment",placedAt:new Date().toISOString(),databaseId:O?.databaseId};it(mt),Ie&&(st(wt=>wt.filter(vt=>vt.id!==Ie)),He(null))}t(),ct(!1),_e(),tt(),U&&O?(Le(!0),Ye(!0)):Xe[0]?(it(Xe[0]),Le(!0),Ye(!0)):O&&(Le(!0),Ye(!0)),ct(!1),Le(!1),ke(null)}catch(le){console.error("Error processing payment:",le),xt("Failed to process payment. Please try again.")}},className:`flex-1 px-6 py-3 rounded-lg transition-colors flex items-center justify-center gap-2 ${z.length===0||G()>0?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[e.jsx(Oc,{size:20}),"Submit"]})]})]})})):null,XC=({isVisible:s,onClose:t,foodId:r,foodName:n})=>{const{themeColors:o}=Ur(),[c,d]=v.useState([]),[m,h]=v.useState(!1),[g,y]=v.useState(""),[w,S]=v.useState(null),[_,E]=v.useState(""),[z,I]=v.useState(!1),[U,q]=v.useState({isVisible:!1,message:"",type:"success"}),O=async()=>{if(r)try{h(!0);const de=await window.myAPI?.getFoodIngredients(r);de.success?d(de.data||[]):(console.error("Error fetching ingredients:",de.message),d([]))}catch(de){console.error("Error fetching ingredients:",de),d([])}finally{h(!1)}},R=async()=>{if(!(!g.trim()||!r))try{h(!0);const de=await window.myAPI?.createIngredient({name:g.trim(),status:1});if(de.success){const re=de.id;(await window.myAPI?.createFoodIngredient(r,re)).success?(await O(),y(""),oe(`Ingredient "${g.trim()}" added successfully!`,"success")):oe("Failed to add ingredient to food","error")}else oe("Failed to create ingredient","error")}catch(de){console.error("Error adding ingredient:",de),oe("An error occurred while adding the ingredient","error")}finally{h(!1)}},M=async de=>{try{h(!0),(await window.myAPI?.removeFoodIngredient(r,de)).success?(await O(),oe("Ingredient removed successfully!","success")):oe("Failed to remove ingredient","error")}catch(re){console.error("Error removing ingredient:",re),oe("An error occurred while removing the ingredient","error")}finally{h(!1)}},P=async()=>{if(!(!_.trim()||!w))try{h(!0),(await window.myAPI?.updateIngredient(w.id,{name:_.trim()})).success?(await O(),I(!1),S(null),E(""),oe("Ingredient updated successfully!","success")):oe("Failed to update ingredient","error")}catch(de){console.error("Error updating ingredient:",de),oe("An error occurred while updating the ingredient","error")}finally{h(!1)}},ee=de=>{S(de),E(de.name),I(!0)},oe=(de,re="success")=>{q({isVisible:!0,message:de,type:re})},je=de=>{de.key==="Enter"&&(de.preventDefault(),R())};return v.useEffect(()=>{s&&r&&O()},[s,r]),s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"text-white p-4 flex justify-between items-center rounded-t-xl flex-shrink-0",style:{backgroundColor:o.primary},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Ingredients"}),e.jsxs("span",{className:"text-sm opacity-90",children:["for ",n]})]}),e.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Ls,{size:18,style:{color:o.primary}}),"Add New Ingredient"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:g,onChange:de=>y(de.target.value),onKeyPress:je,placeholder:"Enter ingredient name...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",style:{"--tw-ring-color":o.primary}}),e.jsxs("button",{onClick:R,disabled:m||!g.trim(),className:"px-4 py-2 text-white font-medium rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:o.primary},children:[e.jsx(Ls,{size:16}),"Add"]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(fl,{size:18,style:{color:o.primary}}),"Current Ingredients (",c.length,")"]}),m?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading ingredients..."})}):c.length>0?e.jsx("div",{className:"space-y-2",children:c.map(de=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("span",{className:"text-gray-800 font-medium",children:de.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ee(de),className:"p-1 text-gray-600 hover:text-primary transition-colors",style:{color:o.primary},children:e.jsx(fl,{size:16})}),e.jsx("button",{onClick:()=>M(de.id),className:"p-1 text-gray-600 hover:text-red-500 transition-colors",children:e.jsx(Pa,{size:16})})]})]},de.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No ingredients added yet"}),e.jsx("div",{className:"text-gray-400 text-xs mt-1",children:"Add ingredients using the form above"})]})]})]})]})}),z&&w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"text-white p-4 flex justify-between items-center rounded-t-xl",style:{backgroundColor:o.primary},children:[e.jsx("h3",{className:"text-lg font-bold",children:"Edit Ingredient"}),e.jsx("button",{onClick:()=>{I(!1),S(null),E("")},className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ingredient Name"}),e.jsx("input",{type:"text",value:_,onChange:de=>E(de.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",style:{"--tw-ring-color":o.primary}})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{I(!1),S(null),E("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:P,disabled:m||!_.trim(),className:"flex-1 px-4 py-2 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:o.primary},children:m?"Updating...":"Update"})]})]})]})}),e.jsx(Ci,{isVisible:U.isVisible,message:U.message,type:U.type,onClose:()=>q({...U,isVisible:!1})})]}):null},QC=()=>{const s=nn(),{alertState:t,showSuccess:r,showError:n,showWarning:o,hideAlert:c}=Yh(),{updateDraftCount:d}=Mv(),{addNotification:m}=_x(),{playButtonSound:h}=kx(),{shouldShowOrderType:g,orderTypeSettings:y}=HC(),{settings:w}=WC(),S=b=>{if(!b)return!1;const K={"In Store":"instore",Table:"table",Collection:"collection",Delivery:"delivery"}[b];return K?g(K):!1},_=()=>{if(!Rt||!S(Rt)){const b=[];return g("instore")&&b.push("In Store"),g("table")&&b.push("Table"),g("collection")&&b.push("Collection"),g("delivery")&&b.push("Delivery"),b.length>0?(n(`Please select an order type first. Available options: ${b.join(", ")}`),!1):(n("No order types are available. Please check your settings."),!1)}return!0},[E,z]=v.useState(null),[I,U]=v.useState(!1),[q,O]=v.useState(!1),[R,M]=v.useState(null),[P,ee]=v.useState(!1),[oe,je]=v.useState(!1),[de,re]=v.useState(!1),[Te,De]=v.useState(!1),[ne,ue]=v.useState(null),[se,Ae]=v.useState([]),[Se,$e]=v.useState(!0),[Q,xe]=v.useState(null),[ve,ae]=v.useState(!1),[Ce,pe]=v.useState(null),[k,L]=v.useState({}),[f,x]=v.useState(1),[N,C]=v.useState(!1),[A,H]=v.useState(!1),[V,F]=v.useState(!1),[B,J]=v.useState(null),[Y,T]=v.useState(!1),[G,ce]=v.useState([]),[ie,fe]=v.useState([]),[me,Me]=v.useState(""),[Re,Ie]=v.useState([]),[st,He]=v.useState(""),[Xe,et]=v.useState(""),[rt,Qe]=v.useState([]),[At,xt]=v.useState(!1),[St,Le]=v.useState(!1),[Ye,_e]=v.useState(""),[tt,ct]=v.useState(""),[it,ke]=v.useState([{id:1,tableId:""},{id:2,tableId:""}]);v.useEffect(()=>{const b=s?.state;if(!b||!b.loadOrder)return;const D=b.loadOrder;console.log("RunningOrders: Received order data from ManageOrders:",D),Tt([]),gs(null),He(""),et(""),Me(""),M(null),_e(""),ct(""),ke([{id:1,tableId:""},{id:2,tableId:""}]),Vs(null),x(1),L({}),ce([]),D.customer&&(console.log("Setting customer:",D.customer),M(D.customer)),D.orderType&&(console.log("Setting order type:",D.orderType),Ks(D.orderType));const K=Date.now();if(D.items&&Array.isArray(D.items)){console.log("Loading items into cart:",D.items);const he=D.items.map((we,be)=>we.isCustomPizza?{id:K+be,name:we.name,price:we.price,tax:we.tax,totalPrice:we.totalPrice,quantity:we.quantity||1,variations:{},adons:[],slices:we.slices,size:we.size,selectedPizzas:we.selectedPizzas,flavorIngredients:we.flavorIngredients,sliceColors:we.sliceColors,customNote:we.customNote,isCustomPizza:!0,addedAt:new Date().toISOString()}:we.isCustomFood?{id:K+be,name:we.name,price:we.price,tax:we.tax,totalPrice:we.totalPrice,quantity:we.quantity||1,variations:{},adons:[],customFoodName:we.customFoodName,customFoodNote:we.customFoodNote,customFoodIngredients:we.customFoodIngredients,isCustomFood:!0,addedAt:new Date().toISOString()}:{id:K+be,food:we.food,variations:we.variations||{},adons:we.adons||[],quantity:we.quantity||1,totalPrice:we.totalPrice||0,addedAt:new Date().toISOString()});Tt(he),is(K+(D.items.length||0)+1)}D.table&&(console.log("Setting table:",D.table),He(D.table)),Es(!0),Yr(D.databaseId||D.orderId),En({id:D.orderId,databaseId:D.databaseId,customer:D.customer,items:D.items,orderType:D.orderType,table:D.table}),window.history.replaceState({},document.title)},[s]);const[Ke,ut]=v.useState([]),[Ct,Et]=v.useState(!1),[Bt,ge]=v.useState(""),[Ee,le]=v.useState(""),[Ve,nt]=v.useState([]),[mt,wt]=v.useState(""),[vt,_t]=v.useState(!1),[ye,ze]=v.useState(null),[Z,te]=v.useState(0),[Fe,Ge]=v.useState(!1),[ot,ht]=v.useState(""),[jt,It]=v.useState([]),[Vt,rs]=v.useState(!1),[zt,gs]=v.useState(null),[ns,xs]=v.useState(""),[js,Ot]=v.useState("percentage"),[gt,Tt]=v.useState([]),[qt,is]=v.useState(1),[Zt,Vs]=v.useState(null),[Xn,Aa]=v.useState(0),[Do,Uc]=v.useState(0),[Os,Cl]=v.useState(""),[_i,Eo]=v.useState(!1),[zs,Nn]=v.useState(4),[kl,Qn]=v.useState(!1),[ba,Sn]=v.useState(""),[Zn,Cr]=v.useState(""),[$r,Hr]=v.useState(""),[on,kr]=v.useState([]),[ir,or]=v.useState(""),[Cn,da]=v.useState(!1),[kn,qs]=v.useState([]),[ua,Jn]=v.useState(null),[ei,Rs]=v.useState([]),[va,ma]=v.useState(""),[ln,Da]=v.useState("12"),[W,Pe]=v.useState(""),[Lt,Jt]=v.useState([]),[ss,lr]=v.useState(null),[Vr,ls]=v.useState([]),[Fa,_n]=v.useState({}),[Qa,Fu]=v.useState({}),[Lu,Bu]=v.useState(!1),[_l,$c]=v.useState([]),[tf,Uu]=v.useState({}),[Hc,cn]=v.useState({}),[cr,Al]=v.useState({}),[sf,Dl]=v.useState({}),[ws,El]=v.useState(null),[$u,Tl]=v.useState(!1),[Hu,To]=v.useState(""),[Ml,Mo]=v.useState(""),[Ol,Ai]=v.useState(""),[af,Vu]=v.useState([]),[Di,rf]=v.useState(null),[Ei,Rl]=v.useState(""),[Vc,Il]=v.useState(!1),[nf,qc]=v.useState(!1),[Za,Oo]=v.useState(""),[ti,Kc]=v.useState(!1),[zl,Ti]=v.useState([]),[qu,Ku]=v.useState(!1),[La,An]=v.useState([]),[Gx,Yu]=v.useState(0),[Wx,Yc]=v.useState(0),[of,Mi]=v.useState(0),[dr,Ja]=v.useState([]),[Gt,_r]=v.useState(null),[si,Oi]=v.useState(null),dn=()=>{if(!La||La.length===0)return 10;const b=La.reduce((D,K)=>D+K.quantity,0);return Math.min(b,10)},[Ri,Dn]=v.useState([]),[kt,En]=v.useState(null),[Pl,Fl]=v.useState(!1),[Gc,lf]=v.useState(new Set),[er,ur]=v.useState(!1),[ha,Ro]=v.useState(null),[Bs,ai]=v.useState("New"),[Wc,Ii]=v.useState(!1),[zi,Io]=v.useState(!1),[zo,Po]=v.useState(!1),[Xc,un]=v.useState(null),[Pi,Fi]=v.useState(!1),[Fo,Ar]=v.useState(!1),[Li,Bi]=v.useState("Cash"),[Ui,mr]=v.useState(""),[Gu,hr]=v.useState(""),[Qc,ea]=v.useState(""),[Lo,ja]=v.useState([]),[Zc,Ba]=v.useState(""),[tr,qr]=v.useState(!1),[Bo,Tn]=v.useState("EUR"),[Uo,ri]=v.useState(""),[$i,$o]=v.useState(!1),[Ll,Mn]=v.useState(!1),[cf,Ua]=v.useState(new Date),[Jc,fr]=v.useState(!1),[Hi,On]=v.useState(""),[ni,Vi]=v.useState(!1),[mn,hn]=v.useState(null),[fa,ii]=v.useState("In Store"),[Ea,wa]=v.useState(""),[na,Kr]=v.useState(""),[ga,gr]=v.useState(""),[Rt,Ks]=v.useState(null),[Ys,Rn]=v.useState(!1),[$t,Es]=v.useState(!1),[Wt,Yr]=v.useState(null),[$a,Bl]=v.useState(null),[In,qi]=v.useState(!1),[Ul,fn]=v.useState(!1),[gn,Wu]=v.useState("New"),{showKeyboard:Ho,activeInput:Gr,keyboardInput:sr,handleInputBlur:ar,handleAnyInputFocus:xa,handleAnyInputClick:ia,hideKeyboard:ed}=Wn(["searchQuery","runningOrdersSearchQuery","couponCode","customIngredientInput","pizzaNote","customFoodName","customFoodNote"]),[Na,Wr]=v.useState(""),[Dr,Ta]=v.useState("");v.useEffect(()=>{const b=document.createElement("style");return b.textContent=`
      @keyframes fade-in {
        0% {
          opacity: 0;
          transform: scale(0.95) translateY(-10px);
        }
        100% {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }
      .animate-fade-in {
        animation: fade-in 0.3s ease-out forwards;
      }
    `,document.head.appendChild(b),()=>{document.head.removeChild(b)}},[]),v.useEffect(()=>{const b=D=>{if(Pl){const K=document.querySelector("[data-invoice-button]"),he=document.querySelector("[data-invoice-options]");K&&!K.contains(D.target)&&he&&!he.contains(D.target)&&Fl(!1)}};return document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[Pl]),v.useEffect(()=>{const b=()=>{Kc(!0)};return window.addEventListener("openDraftsModal",b),()=>{window.removeEventListener("openDraftsModal",b)}},[]),v.useEffect(()=>{ti&&cm()},[ti]),v.useEffect(()=>{d(zl.length)},[zl,d]),v.useEffect(()=>{const b=new Date,D=(60-b.getSeconds())*1e3-b.getMilliseconds();let K=null;const he=setTimeout(()=>{Ua(new Date),K=setInterval(()=>{Ua(new Date)},6e4)},D);return()=>{K&&clearInterval(K),clearTimeout(he)}},[]);const Sa=async()=>{try{if($e(!0),console.log("Fetching categories for hotel_id: 1"),!window.myAPI){console.error("myAPI is not available"),Ae([]);return}const b=await window.myAPI.getCategoriesByHotel(1);if(console.log("Categories API result:",b),b&&b.success){const D=b.data.filter(K=>K.status===1);if(console.log("Active categories:",D),Ae(D),console.log("Active categories loaded successfully:",D),D&&D.length>0){const K=D[0];console.log("Auto-selecting first active category:",K),xe(K),td(K.id)}}else console.error("Failed to fetch categories:",b?.message),Ae([])}catch(b){console.error("Error fetching categories:",b),Ae([])}finally{$e(!1)}},Vo=()=>{Ro({orderType:Rt||"In Store",orderNumber:"NEW-ORDER",status:"New"}),ai("New"),ur(!0)};Sr.useEffect(()=>{window.addEventListener("openStatusModal",Vo);const b=D=>{const K=D?.detail?.customer;K&&(ue(K),De(!0))};return window.addEventListener("openCustomerInfo",b),()=>window.removeEventListener("openStatusModal",Vo)},[Rt]);const td=async b=>{try{if(Et(!0),console.log("Fetching foods for category_id:",b),!window.myAPI){console.error("myAPI is not available"),ut([]);return}const D=await window.myAPI.getFoodByCategory(b);console.log("Foods API result:",D),D&&D.success?(ut(D.data),console.log("Foods loaded successfully:",D.data),D.data.forEach(K=>{console.log(`Food: ${K.name}, Image: ${K.image}`)})):(console.error("Failed to fetch foods:",D?.message),ut([]))}catch(D){console.error("Error fetching foods:",D),ut([])}finally{Et(!1)}},df=b=>{xe(b),td(b.id)},uf=async b=>{try{if(!b)return"Walk-in Customer";const D=await window.myAPI.getCustomerById(b);return D&&D.success&&D.data?D.data.name||`Customer ${b}`:`Customer ${b}`}catch(D){return console.error("Error fetching customer name:",D),`Customer ${b}`}},Xu=async()=>{try{if(console.log("Fetching active orders from database..."),!window.myAPI){console.error("myAPI is not available");return}const b=await window.myAPI.getAllOrders(100,0);if(b&&b.success){console.log("All orders loaded:",b.data);const D=b.data.filter(be=>{const Be=be.order_status?.toLowerCase(),Je=be.order_type?.toLowerCase(),pt=Be!=="completed"&&Be!=="delivered"&&Be!=="canceled"&&Be!=="done"&&Be!=="finished"&&Be!=="closed"&&Be!=="draft"&&Je!=="draft";return console.log(`Order ${be.id}: status="${be.order_status}", order_type="${be.order_type}" (normalized: "${Be}"), isActive=${pt}`),pt});console.log("Active orders (not completed):",D);const K=D.map(async be=>{try{console.log(`Fetching order details for order ${be.id}...`);const Be=await window.myAPI.getOrderDetailsWithFood(be.id);let Je=[];Be&&Be.success?(console.log(`Order ${be.id} details:`,Be.data),Je=Be.data.map(Pt=>{let ts={},bt={},yt=[];try{Pt.food_details&&(ts=JSON.parse(Pt.food_details)),Pt.variation&&(bt=JSON.parse(Pt.variation)),Pt.add_ons&&(yt=JSON.parse(Pt.add_ons))}catch(Ut){console.error("Error parsing JSON data:",Ut)}return{id:Pt.id,food:{id:Pt.food_id,name:Pt.food_name||ts.food?.name||"Unknown Food",description:Pt.food_description||ts.food?.description,price:Pt.price,image:Pt.food_image||ts.food?.image},variations:bt,adons:yt,quantity:Pt.quantity,totalPrice:Pt.price*Pt.quantity,addedAt:Pt.created_at}})):console.warn(`No order details found for order ${be.id}. Including order with empty items.`);const pt=be.customer_id?await uf(be.customer_id):"Walk-in Customer";let Mt={id:be.customer_id,name:pt};if(be.customer_id)try{const Pt=await window.myAPI.getCustomerById(be.customer_id);if(Pt&&Pt.success&&Pt.data){Mt={id:Pt.data.id,name:Pt.data.name,phone:Pt.data.phone,email:Pt.data.email};const ts=await window.myAPI.getCustomerAddresses(be.customer_id);ts&&ts.success&&ts.data&&(Mt.addresses=ts.data),be.order_type==="delivery"&&console.log("Delivery order customer data:",{orderId:be.id,customerId:be.customer_id,customerData:Mt,addresses:Mt.addresses})}}catch(Pt){console.error(`Error fetching customer data for order ${be.id}:`,Pt)}return be.order_type==="draft"&&console.log("Processing draft order from database:",{id:be.id,order_type:be.order_type,order_status:be.order_status}),{id:be.id,orderNumber:be.order_type==="draft"?`DRAFT-${String(be.id).padStart(3,"0")}`:`ORD-${String(be.id).padStart(3,"0")}`,items:Je,customer:Mt,total:be.order_amount,coupon:be.coupon_code?{code:be.coupon_code,title:be.coupon_discount_title,discount:be.coupon_discount_amount}:null,orderType:be.order_type==="draft"?"Draft":be.order_type==="instore"?"In Store":be.order_type==="table"?"Table":be.order_type==="collection"?"Collection":be.order_type==="delivery"?"Delivery":"In Store",table:be.delivery_address_id?"Table "+be.delivery_address_id:"None",waiter:"Ds Waiter",status:be.order_status==="pending"?"Pending":be.order_status==="completed"?"Complete":be.order_status==="ready"?"Ready":be.order_status,placedAt:be.created_at,databaseId:be.id,isDraft:be.order_type==="draft"}}catch(Be){return console.error(`Error processing order ${be.id}:`,Be),{id:be.id,orderNumber:be.order_type==="draft"?`DRAFT-${String(be.id).padStart(3,"0")}`:`ORD-${String(be.id).padStart(3,"0")}`,items:[],customer:{id:be.customer_id,name:be.customer_id?`Customer ${be.customer_id}`:"Walk-in Customer"},total:be.order_amount,coupon:null,orderType:be.order_type==="draft"?"Draft":"In Store",table:"None",waiter:"Ds Waiter",status:be.order_status==="pending"?"Pending":be.order_status==="completed"?"Complete":be.order_status==="ready"?"Ready":be.order_status,placedAt:be.created_at,databaseId:be.id,isDraft:be.order_type==="draft"}}}),we=(await Promise.all(K)).filter(be=>!!be);Dn(be=>{const Be=new Map;console.log("Existing orders before merge:",be.map(pt=>({id:pt.id,databaseId:pt.databaseId,orderType:pt.orderType,isDraft:pt.isDraft}))),console.log("New orders from database:",we.map(pt=>({id:pt.id,databaseId:pt.databaseId,orderType:pt.orderType,isDraft:pt.isDraft}))),[...be,...we].forEach(pt=>{if(pt){const Mt=pt.databaseId||pt.id;if(Be.has(Mt)){const Pt=Be.get(Mt);console.log("Merge conflict detected:",{key:Mt,existing:{id:Pt.id,databaseId:Pt.databaseId,orderType:Pt.orderType,isDraft:Pt.isDraft},new:{id:pt.id,databaseId:pt.databaseId,orderType:pt.orderType,isDraft:pt.isDraft}})}Be.set(Mt,pt)}});const Je=Array.from(Be.values());return console.log("Merged active orders:",Je.map(pt=>({id:pt.id,databaseId:pt.databaseId,orderType:pt.orderType,isDraft:pt.isDraft}))),Je}),console.log("Transformed active orders loaded:",we)}else console.error("Failed to fetch existing orders:",b?.message)}catch(b){console.error("Error fetching existing orders:",b)}};v.useEffect(()=>{Sa(),Gs(),Xu(),cm()},[]),v.useEffect(()=>{!Rt&&g("instore")&&Ks("In Store")},[Rt,g]),v.useEffect(()=>{console.log("selectedCustomer changed to:",R),console.log("selectedCustomer name:",R?.name)},[R]),v.useEffect(()=>{Rt&&!S(Rt)?g("instore")?Ks("In Store"):Ks(null):!Rt&&g("instore")&&Ks("In Store")},[y,Rt,g]),v.useEffect(()=>{console.log("Floors state updated:",ie),console.log("Floors loading:",At)},[ie,At]),v.useEffect(()=>{const b=setTimeout(()=>{wt(Bt)},300);return()=>clearTimeout(b)},[Bt]),v.useEffect(()=>{if(mt.trim()==="")nt(Ke);else{const b=Ke.filter(D=>D.name.toLowerCase().includes(mt.toLowerCase())||D.description&&D.description.toLowerCase().includes(mt.toLowerCase()));nt(b)}},[mt,Ke]),v.useEffect(()=>{nt(Ke)},[Ke]);const Gs=async()=>{try{if(xt(!0),console.log("Fetching floors..."),!window.myAPI){console.error("myAPI is not available"),fe([]);return}console.log("Calling floorGetAll...");const b=await window.myAPI.floorGetAll();console.log("Floors API result:",b),b&&b.success?(console.log("Floors data:",b.data),fe(b.data),console.log("Floors loaded successfully:",b.data)):(console.error("Failed to fetch floors:",b?.message),fe([]))}catch(b){console.error("Error fetching floors:",b),fe([])}finally{xt(!1)}},$l=b=>{if($t&&Rt==="Table"){console.log("In modification mode with Table order type - preventing floor selection change");return}Me(b.name),ke([{id:1,tableId:""},{id:2,tableId:""}]),Ki(b.id)},Ki=async b=>{try{if(Le(!0),console.log("Fetching tables for floor ID:",b),!window.myAPI){console.error("myAPI is not available"),Ie([]);return}const D=await window.myAPI.floorGetById(b);if(console.log("Floor details:",D),!D||!D.success){console.error("Failed to get floor details:",D?.message),Ie([]);return}const K=await window.myAPI.tableGetByFloorWithStatus(b,"Free");console.log("Tables API result:",K),K&&K.success?(Ie(K.data),console.log("Tables loaded successfully:",K.data)):(console.error("Failed to fetch tables:",K?.message),Ie([]))}catch(D){console.error("Error fetching tables:",D),Ie([])}finally{Le(!1)}},qo=(b,D)=>{L(K=>{const he=B?.variations?.find(be=>be.id===b);if(he?.type==="multiple"){const be=K[b]||[],Be=be.includes(D);let Je;if(Be)Je=be.filter(pt=>pt!==D);else{if(he.max&&be.length>=he.max)return K;Je=[...be,D]}return{...K,[b]:Je}}else return{...K,[b]:D}})},sd=b=>{ce(D=>D.includes(b)?D.filter(he=>he!==b):[...D,b])},xn=()=>{if(!Ce)return 0;let b=Ce.price||0,D=0,K=0;return B?.variations&&Object.entries(k).forEach(([we,be])=>{const Be=B.variations.find(Je=>Je.id===parseInt(we));if(Be)if(Array.isArray(be))be.forEach(Je=>{const pt=Be.options?.find(Mt=>Mt.id===parseInt(Je));pt&&(D+=pt.option_price||0)});else{const Je=Be.options?.find(pt=>pt.id===parseInt(be));Je&&(D+=Je.option_price||0)}}),B?.adons&&G.forEach(we=>{const be=B.adons.find(Be=>Be.id===parseInt(we));be&&(K+=be.price||0)}),(b+D+K)*f},Yi=()=>{x(b=>b+1)},mf=()=>{f>1&&x(b=>b-1)},Qu=()=>{if(vt){console.log("Already adding item to cart, ignoring click");return}if(!Rt){n("Select the Order Type First");return}if(!tc()){n("Please complete all required selections before adding to cart");return}if(_t(!0),console.log("Adding to cart:",{food:Ce,variations:k,adons:G,quantity:f,totalPrice:xn()}),Zt){Wl();return}const b=hf(Ce,k,G);if(b)es(b.id,b.quantity+f),console.log("Increased quantity for existing item with variations and adons:",b.food.name),r(`${b.food.name} quantity increased!`);else{const D={id:qt,food:Ce,variations:k,adons:G,quantity:f,totalPrice:xn(),addedAt:new Date().toISOString()};Tt(he=>{console.log("Previous cart items:",he);const we=[...he,D];return console.log("New cart items:",we),we}),is(he=>he+1),console.log("Added new item to cart:",Ce.name);const K=Date.now();if(K-Z>200)try{new Audio(ul("newProductAdd.mp3")).play().catch(we=>{console.log("Audio play failed:",we)}),te(K)}catch(he){console.log("Audio creation failed:",he)}r(`${Ce.name} added to cart!`)}ae(!1),pe(null),L({}),ce([]),x(1),_t(!1)},hf=(b,D,K=[])=>gt.find(he=>he.food?.id===b.id&&JSON.stringify(he.variations)===JSON.stringify(D)&&JSON.stringify(he.adons||[])===JSON.stringify(K)),Zu=b=>gt.find(D=>D.food?.id===b.id),oi=async b=>{if(!b){console.error("Food item is undefined or null");return}if(vt){console.log("Already adding item to cart, ignoring click");return}if(console.log("Food item clicked:",b),!Rt){n("Select the Order Type First");return}const D=Zu(b);if(D)es(D.id,D.quantity+1),console.log("Increased quantity for existing item:",D.food.name),r(`${D.food.name} quantity increased!`);else{_t(!0),console.log("Fetching detailed food data for:",b?.name||"Unknown Food"),T(!0);try{const K=await window.myAPI.getFoodById(b.id);if(console.log("Food details API result:",K),K&&K.success){console.log("Food details loaded successfully:",K.data),J(K.data);const he=K.data.variations&&K.data.variations.length>0;if(console.log("Food has variations:",he),he)pe(K.data),ae(!0),L({}),ce([]),x(1);else{const we={id:qt,food:K.data,variations:{},adons:[],quantity:1,totalPrice:K.data.price,addedAt:new Date().toISOString()};Tt(Be=>{console.log("Previous cart items:",Be);const Je=[...Be,we];return console.log("New cart items:",Je),Je}),is(Be=>Be+1),console.log("Added food without variations directly to cart:",K.data.name);const be=Date.now();if(be-Z>200)try{new Audio(ul("newProductAdd.mp3")).play().catch(Je=>{console.log("Audio play failed:",Je)}),te(be)}catch(Be){console.log("Audio creation failed:",Be)}r(`${K.data.name} added to cart!`)}}else{console.error("Failed to fetch food details:",K?.message);const he={id:qt,food:b,variations:{},adons:[],quantity:1,totalPrice:b.price,addedAt:new Date().toISOString()};Tt(be=>{console.log("Previous cart items:",be);const Be=[...be,he];return console.log("New cart items:",Be),Be}),is(be=>be+1),console.log("Added food without variations directly to cart (fallback):",b?.name||"Unknown Food");const we=Date.now();if(we-Z>200)try{new Audio(ul("newProductAdd.mp3")).play().catch(Be=>{console.log("Audio play failed:",Be)}),te(we)}catch(be){console.log("Audio creation failed:",be)}r(`${b?.name||"Unknown Food"} added to cart!`)}}catch(K){console.error("Error fetching food details:",K);const he={id:qt,food:b,variations:{},adons:[],quantity:1,totalPrice:b.price,addedAt:new Date().toISOString()};Tt(be=>{console.log("Previous cart items:",be);const Be=[...be,he];return console.log("New cart items:",Be),Be}),is(be=>be+1),console.log("Added food without variations directly to cart (error fallback):",b?.name||"Unknown Food");const we=Date.now();if(we-Z>200)try{new Audio(ul("newProductAdd.mp3")).play().catch(Be=>{console.log("Audio play failed:",Be)}),te(we)}catch(be){console.log("Audio creation failed:",be)}r(`${b?.name||"Unknown Food"} added to cart!`)}finally{T(!1),_t(!1)}}},ad=b=>{if($t&&Rt==="Table"){console.log("In modification mode with Table order type - preventing table selection change"),o("Cannot change table selection while modifying a table order");return}He(b),et(""),Ks("Table")},zn=b=>rt.some(D=>D.id===b),rd=(b,D)=>{if($t&&Rt==="Table"){console.log("In modification mode with Table order type - preventing reserved table addition");return}const K=Re.find(he=>he.id.toString()===b);K&&!zn(b)&&(Qe(he=>[...he,{id:b,tableNo:K.table_no,persons:D,floor:me}]),Ks("Table"))},Ko=b=>{if($t&&Rt==="Table"){console.log("In modification mode with Table order type - preventing reserved table removal");return}Qe(D=>D.filter(K=>K.id!==b))},Ju=b=>{if($t&&Rt==="Table"){console.log("In modification mode with Table order type - preventing persons selection change");return}et(b)},Hl=()=>Re.find(b=>b.id.toString()===st),nd=()=>{const b=Hl();if(!b)return[];const D=b.seat_capacity||4;return Array.from({length:D},(K,he)=>he+1)},em=()=>{if($t&&Rt==="Table"){console.log("In modification mode with Table order type - preventing merge table modal");return}H(!1),F(!0),ke([{id:1,tableId:""},{id:2,tableId:""}])},Vl=()=>{if($t&&Rt==="Table"){console.log("In modification mode with Table order type - preventing back to table selection");return}F(!1),H(!0),ke([{id:1,tableId:""},{id:2,tableId:""}])},tm=(b,D)=>{if($t&&Rt==="Table"){console.log("In modification mode with Table order type - preventing dynamic merge table selection");return}ke(K=>K.map(he=>he.id===b?{...he,tableId:D}:he)),Ks("Table")},Yo=()=>{if($t&&Rt==="Table"){console.log("In modification mode with Table order type - preventing add more table selection");return}const b=Math.max(...it.map(D=>D.id))+1;ke(D=>[...D,{id:b,tableId:""}])},sm=b=>{if($t&&Rt==="Table"){console.log("In modification mode with Table order type - preventing remove table selection");return}it.length>2&&ke(D=>D.filter(K=>K.id!==b))},am=b=>{const D=it.filter(K=>K.id!==b&&K.tableId).map(K=>K.tableId);return Re.filter(K=>!D.includes(K.id.toString()))},Pn=()=>it.filter(D=>D.tableId).map(D=>D.tableId).length>=Re.length,ql=b=>{if(console.log("handleCustomerSelect called with:",b),console.log("Current selectedOrderType:",Rt),console.log("Customer name:",b?.name),console.log("Customer id:",b?.id),M(b),U(!1),O(!1),console.log("Customer set, selectedCustomer should be:",b),console.log("Customer name after setting:",b?.name),b&&Rt){let D=!1;if(Rt==="Delivery"){const K=b.phone&&b.phone.trim().length>0,he=b.addresses&&b.addresses.length>0;console.log("Delivery validation - hasPhone:",K,"hasAddress:",he),(!K||!he)&&(D=!0)}else if(Rt==="Collection"){const K=b.phone&&b.phone.trim().length>0;console.log("Collection validation - hasPhone:",K),K||(D=!0)}else(Rt==="In Store"||Rt==="Table")&&console.log("In Store/Table order - no validation needed");if(D){console.log("Opening edit modal for customer"),re(!0);return}}console.log("Customer selection completed successfully"),b&&b.id&&window.dispatchEvent(new CustomEvent("customerUpdated",{detail:{customer:b}}))},id=async()=>{if(R)try{if(R.addresses&&R.addresses.length>0)for(const D of R.addresses)await window.myAPI?.deleteAddress(D.id);const b=await window.myAPI?.updateCustomer(R.id,{isDelete:1});b&&b.success?(M(null),ee(!1),r("Customer deleted successfully","success")):n("Error deleting customer")}catch(b){console.error("Error deleting customer:",b),n("Error deleting customer")}},Fn=b=>{if(console.log("handleEditCustomer called with:",b),console.log("Current selectedOrderType:",Rt),M(b),b&&Rt){let D=!0;if(Rt==="Delivery"){const K=b.phone&&b.phone.trim().length>0,he=b.addresses&&b.addresses.length>0;console.log("Delivery validation - hasPhone:",K,"hasAddress:",he),(!K||!he)&&(D=!1)}else if(Rt==="Collection"){const K=b.phone&&b.phone.trim().length>0;console.log("Collection validation - hasPhone:",K),K||(D=!1)}else(Rt==="In Store"||Rt==="Table")&&(console.log("In Store/Table order - no validation needed"),D=!0);console.log("Customer validation result:",D)}re(!1),q&&O(!1),window.dispatchEvent(new CustomEvent("customerUpdated",{detail:{customer:b}}))},pn=async()=>{try{console.log("Adding sample data...");const b=await window.myAPI?.floorAddSampleData();console.log("Sample data result:",b),b&&b.success?(console.log("Sample data added successfully"),await Gs()):(console.error("Failed to add sample data:",b?.error),n("Failed to add sample data: "+(b?.error||"Unknown error")))}catch(b){console.error("Error adding sample data:",b),n("Error adding sample data")}},Go=async b=>{const D=b??R;if(!D){n("No customer selected to edit");return}try{const K=await window.myAPI?.getCustomerAddresses(D.id);if(K&&K.success){const he={...D,addresses:K.data||[]};M(he)}else M(D);re(!0)}catch(K){console.error("Error fetching customer addresses:",K),M(D),re(!0)}},Gi=async()=>{try{if(rs(!0),console.log("Fetching available coupons..."),!window.myAPI){console.error("myAPI is not available"),It([]);return}const b=await window.myAPI.getAllCoupons();if(console.log("Raw coupons API result:",b),console.log("Result success:",b?.success),console.log("Result data:",b?.data),b&&b.success){console.log("Raw coupons data:",b.data);const D=b.data.map(he=>{console.log("Processing coupon:",he);const we={id:he.id,title:he.title,code:he.code,customerType:he.type||"All Customers",limitForSameUser:he.usage_limit||0,startDate:he.start_date?he.start_date.split("T")[0]:"",expireDate:he.end_date?he.end_date.split("T")[0]:"",discountType:he.discount_type||"percentage",discount:he.amount||0,maxDiscount:he.max_discount||0,minPurchase:he.min_purchase||0,totalUsers:0,status:he.status===1?"active":"inactive"};return console.log("Transformed coupon:",we),we});console.log("All transformed coupons:",D);const K=D.filter(he=>{console.log("Checking coupon status:",he.status,"expireDate:",he.expireDate);const we=he.status==="active",be=!he.expireDate||new Date(he.expireDate)>new Date;return console.log("Is active:",we,"Not expired:",be),we&&be});console.log("All coupons (including inactive):",D),console.log("Active coupons only:",K),console.log("Active coupons after filtering:",K),It(K),console.log("Available coupons loaded:",K)}else console.error("Failed to fetch coupons:",b?.message),It([])}catch(b){console.error("Error fetching coupons:",b),It([])}finally{rs(!1)}},Wi=async()=>{if(!ot.trim()){n("Please enter a coupon code");return}try{if(console.log("Applying coupon code:",ot),!window.myAPI){console.error("myAPI is not available"),n("System error: API not available");return}const b=await window.myAPI.searchCouponByCode(ot.trim());if(console.log("Coupon search result:",b),b&&b.success&&b.data){const D=b.data,K={id:D.id,title:D.title,code:D.code,customerType:D.type||"All Customers",limitForSameUser:D.usage_limit||0,startDate:D.start_date?D.start_date.split("T")[0]:"",expireDate:D.end_date?D.end_date.split("T")[0]:"",discountType:D.discount_type||"percentage",discount:D.amount||0,maxDiscount:D.max_discount||0,minPurchase:D.min_purchase||0,totalUsers:0,status:D.status===1?"active":"inactive"};if(K.status!=="active"){n("This coupon is not active");return}if(K.expireDate&&new Date(K.expireDate)<new Date){n("This coupon has expired");return}gs(K),ht("")}else n("Invalid coupon code. Please try again.")}catch(b){console.error("Error applying coupon:",b),n("Error applying coupon. Please try again.")}},Wo=()=>{Ge(!0),ht(""),gs(null),Gi(),Wr("discountAmount"),Ta(ns||"")},Xo=()=>{Ge(!1),ht(""),gs(null),xs(""),Ot("percentage"),setShowKeyboard(!1),Wr(null)},Kl=()=>{gs(null)},Yl=()=>{if(!ns||parseFloat(ns)<=0){n("Please enter a valid discount amount");return}const b={id:"manual",title:"Manual Discount",code:"MANUAL",discount:parseFloat(ns),discountType:js,customerType:"All Customers",status:"active"};gs(b),xs(""),Ot("percentage")},Xi=(b,D)=>{b==="searchQuery"?ge(D):b==="runningOrdersSearchQuery"?le(D):b==="couponCode"?ht(D):b==="discountAmount"?xs(D):b==="customIngredientInput"?or(D):b==="pizzaNote"?Pe(D):b==="customFoodName"?Sn(D):b==="customFoodNote"&&Hr(D)},Gl=b=>b==="searchQuery"?Bt||"":b==="runningOrdersSearchQuery"?Ee||"":b==="couponCode"?ot||"":b==="discountAmount"?ns||"":b==="customIngredientInput"?ir||"":b==="pizzaNote"?W||"":b==="customFoodName"?ba||"":b==="customFoodNote"&&$r||"",Ln=(b,D)=>{Gr===D&&sr!==void 0&&handleKeyboardChange(sr,D),ar(b)},Qi=(b,D,K="")=>{Wr(D),Ta(K||""),window.keyboard&&window.keyboard.setInput(K||"")},Qo=b=>{if(Ta(b),Na==="discountAmount")xs(b);else if(Na==="paymentAmount"){if(mr(b),Li==="Cash")if(hr(b),b){const D=Ys?yr().total:Gt?Va():Tr(),K=parseFloat(b)-D;ea(K>0?K.toFixed(2):"0.00")}else ea("0.00")}else if(Na==="givenAmount")if(hr(b),mr(b),b){const D=Ys?yr().total:Gt?Va():Tr(),K=parseFloat(b)-D;ea(K>0?K.toFixed(2):"0.00")}else ea("0.00")},Xr=b=>{if(Na==="discountAmount"){if(b==="{bksp}"){const K=(Dr||"").slice(0,-1);return Ta(K),xs(K),{action:"backspace",value:K,activeInput:Na}}}else if(Na==="paymentAmount"){if(b==="{bksp}"){const K=(Dr||"").slice(0,-1);if(Ta(K),mr(K),Li==="Cash")if(hr(K),K){const he=Va(),we=parseFloat(K)-he;ea(we>0?we.toFixed(2):"0.00")}else ea("0.00");return{action:"backspace",value:K,activeInput:Na}}}else if(Na==="givenAmount"&&b==="{bksp}"){const K=(Dr||"").slice(0,-1);if(Ta(K),hr(K),mr(K),K){const he=Va(),we=parseFloat(K)-he;ea(we>0?we.toFixed(2):"0.00")}else ea("0.00");return{action:"backspace",value:K,activeInput:Na}}return null},es=(b,D)=>{if(D<=0){vs(b);return}ye&&clearTimeout(ye);const K=Date.now();if(K-Z>200)try{new Audio(ul("newProductAdd.mp3")).play().catch(be=>{console.log("Audio play failed:",be)}),te(K)}catch(we){console.log("Audio creation failed:",we)}const he=setTimeout(()=>{ze(null)},100);ze(he),Tt(we=>we.map(be=>{if(be.id===b){if(be.isCustomPizza||be.isCustomFood){const ts=be.price*D;return{...be,quantity:D,totalPrice:ts}}const Be=be.food?.price||0;let Je=0;const pt={size:{Small:0,Medium:2.5,Large:5},toppings:{"Extra Cheese":1.5,Bacon:2,Mushrooms:1,Olives:.75},addons:{"Extra Cheese":1.5,Bacon:2,Mushrooms:1,Olives:.75,"Extra Sauce":.5,"Double Portion":3}};Object.entries(be.variations).forEach(([ts,bt])=>{(ts==="size"||ts==="toppings"||ts==="addons")&&Array.isArray(bt)&&bt.forEach(yt=>{pt[ts]&&pt[ts][yt]&&(Je+=pt[ts][yt])})});const Pt=(Be+Je)*D;return{...be,quantity:D,totalPrice:Pt}}return be}))},vs=b=>{const D=gt.find(he=>he.id===b),K=D?D.isCustomPizza?"Split Pizza":D.isCustomFood?"Open Food":D.food.name:"Item";Tt(he=>he.filter(we=>we.id!==b)),r(`${K} removed from cart!`)},Ws=async b=>{if(console.log("=== EDIT BUTTON CLICKED ==="),console.log("Editing cart item:",b),console.log("Is custom pizza:",b.isCustomPizza),console.log("Item keys:",Object.keys(b)),b.isCustomFood){console.log("=== CUSTOM FOOD DETECTED ==="),console.log("Editing custom food:",b),Jn(b),Sn(b.customFoodName||""),Cr(b.price.toString()),Hr(b.customFoodNote||""),kr(b.customFoodIngredients||[]),console.log("Set custom food data for editing:",{name:b.customFoodName||"",price:b.price.toString(),note:b.customFoodNote||"",ingredients:b.customFoodIngredients||[]}),console.log("Raw cartItem.customFoodNote:",b.customFoodNote),console.log("Setting customFoodNote to:",b.customFoodNote||""),console.log("=== SETTING CUSTOM FOOD MODAL TO TRUE ==="),Qn(!0),console.log("Opening custom food modal for editing");return}if(b.isCustomPizza||b.slices||b.size||b.selectedPizzas){console.log("=== CUSTOM PIZZA DETECTED ==="),console.log("Editing custom pizza:",b),Vs(b),Nn(b.slices||4),ma(b.price.toString()),Da(b.size||"12"),Pe(b.customNote||""),Al(b.selectedPizzas||{}),cn(b.flavorIngredients||{}),console.log("Set pizza data for editing:",{slices:b.slices||4,price:b.price.toString(),size:b.size||"12",note:b.customNote||"",selectedPizzas:b.selectedPizzas||{},flavorIngredients:b.flavorIngredients||{}}),console.log("=== SETTING MODAL TO TRUE ==="),Eo(!0),console.log("Opening split pizza modal for editing"),console.log("Modal should now be visible");return}Vs(b),pe(b.food);let D={},K=[];try{typeof b.variations=="string"?D=JSON.parse(b.variations):D=b.variations||{},typeof b.adons=="string"?K=JSON.parse(b.adons):K=b.adons||[]}catch(he){console.error("Error parsing variations/addons for editing:",he),D=b.variations||{},K=b.adons||[]}console.log("Setting variations for editing:",D),console.log("Setting addons for editing:",K),L(D),ce(K),x(b.quantity);try{T(!0);const he=await window.myAPI.getFoodById(b.food.id);he&&he.success&&(J(he.data),console.log("Food details loaded for editing:",he.data))}catch(he){console.error("Error loading food details for editing:",he)}finally{T(!1)}ae(!0)},Wl=()=>{Zt&&(Tt(b=>b.map(D=>D.id===Zt.id?{...D,variations:k,adons:G,quantity:f,totalPrice:xn()}:D)),Vs(null),ae(!1),pe(null),L({}),ce([]),x(1))},xr=()=>{const b=parseFloat(w?.food_tax)||0,D=parseFloat(w?.standard_tax)||0;return b>0?b:D},Ma=b=>{const D=xr();return b*D/100},pr=()=>gt.reduce((b,D)=>b+D.totalPrice,0),Er=()=>{const b=pr();return Ma(b)},rr=()=>{if(!zt)return 0;const b=pr();if(zt.discountType==="percentage"){const D=b*(zt.discount/100);return zt.maxDiscount>0?Math.min(D,zt.maxDiscount):D}else return zt.discount},Tr=()=>{const b=pr(),D=Er(),K=rr();return b+D-K},Ts=()=>{const b=gt.length;Tt([]),gs(null),He(""),et(""),Me(""),M(null),_e(""),ct(""),ke([{id:1,tableId:""},{id:2,tableId:""}]),Qe([]),Vs(null),x(1),L({}),ce([]),Ks("In Store"),Ai(""),Es(!1),Yr(null),b>0&&r(`All ${b} item${b===1?"":"s"} removed from cart!`)},od=async()=>{try{const b=await window.myAPI.getAllIngredients();b.success&&Rs(b.data||[])}catch(b){console.error("Error fetching ingredients:",b),Rs([])}},ld=async()=>{ua||(Sn(""),Cr(""),Hr(""),kr([]),or(""),da(!1),qs([])),await od(),Qn(!0)},Xl=()=>{Qn(!1),Sn(""),Cr(""),Hr(""),kr([]),or(""),da(!1),qs([]),Jn(null)},rm=()=>{if(!ba.trim()){n("Please enter a food name");return}if(!Zn||parseFloat(Zn)<=0){n("Please enter a valid price");return}const b=parseFloat(Zn),D=Ma(b),K=b+D,he={id:ua?ua.id:`custom_food_${Date.now()}`,name:`Open Food - ${ba}`,price:b,tax:D,totalPrice:K,quantity:ua?ua.quantity:1,variations:{},adons:[],customFoodName:ba,customFoodNote:$r,customFoodIngredients:on,isCustomFood:!0};ua?(Tt(we=>we.map(be=>be.id===ua.id?he:be)),r(`Custom food "${ba}" updated!`)):(Tt(we=>[...we,he]),h(),r(`Custom food "${ba}" added to order!`)),Jn(null),Xl()},ff=b=>{const D=b.target.value;if(or(D),console.log("Ingredient input changed:",D),console.log("All ingredients available:",ei.length),D.length>0){const K=ei.filter(he=>he.name.toLowerCase().includes(D.toLowerCase()));console.log("Filtered ingredients:",K),qs(K),da(!0)}else da(!1),qs([])},Ql=b=>{console.log("Adding ingredient:",b),on.find(D=>D.id===b.id)||kr(D=>{const K=[...D,b];return console.log("Updated ingredients:",K),K}),or(""),da(!1),qs([])},cd=b=>{kr(D=>D.filter(K=>K.id!==b))},dd=async()=>{Zt||(Nn(2),Al({}),Dl({}),ls([]),or(""),qs([]),da(!1),hd([]),ma(""),Da("12"),Pe(""),El(null),cn({}),Uu({})),Eo(!0),await Ha()},Ha=async()=>{try{const b=await window.myAPI.getPizzaFoods();b.success?Jt(b.data||[]):(console.error("Failed to fetch pizza foods:",b.message),n("Failed to load pizza options"))}catch(b){console.error("Error fetching pizza foods:",b),n("Error loading pizza options")}},Xs=async(b,D)=>{try{const K=Lt.find(he=>he.id===parseInt(D));if(K){Al(we=>({...we,[b]:K})),El(b);const he=await window.myAPI.getFoodIngredients(D);if(he.success){const we=he.data||[];Dl(Be=>({...Be,[b]:we}));const be=Hc[b];be&&be.default.length>0?console.log(`Keeping saved ingredients for slice ${b}:`,be):(cn(Be=>({...Be,[b]:{default:we,custom:[]}})),console.log(`Initialized fresh ingredients for slice ${b}:`,we))}else console.error("Failed to fetch pizza ingredients:",he.message),Dl(we=>({...we,[b]:[]})),cn(we=>({...we,[b]:{default:[],custom:[]}}))}}catch(K){console.error("Error selecting pizza for slice:",K),n("Error loading pizza ingredients for slice")}},ud=async b=>{if(or(b),b.length>=1)try{const D=await window.myAPI.searchIngredientsByName(b);if(D.success){const K=(D.data||[]).sort((he,we)=>he.name.toLowerCase().localeCompare(we.name.toLowerCase()));qs(K),da(!0)}}catch(D){console.error("Error fetching ingredient suggestions:",D),qs([]),da(!1)}else qs([]),da(!1)},Zo=b=>{or(b.name),da(!1),qs([])},Zl=()=>{if(!ir.trim())return;if(ws===null){n("Please select a flavor first");return}const b={id:`custom_${Date.now()}`,name:ir.trim(),isCustom:!0};cn(D=>{const K={...D,[ws]:{default:D[ws]?.default||[],custom:[...D[ws]?.custom||[],b]}};return console.log(`Added custom ingredient "${b.name}" to slice ${ws}. Updated ingredients:`,K[ws]),K}),or(""),da(!1),qs([])},md=()=>{if(!va||va<=0){n("Please enter a valid price for the pizza");return}if(!Object.keys(cr).some(be=>cr[be])){n("Please select at least one pizza type for the slices");return}const D=parseFloat(va),K=Ma(D),he=D+K,we={id:Zt?Zt.id:`custom_pizza_${Date.now()}`,name:`Custom Pizza (${ln}" - ${zs} halves)`,price:D,tax:K,totalPrice:he,quantity:Zt?Zt.quantity:1,variations:{},adons:[],slices:zs,size:ln,selectedPizzas:cr,flavorIngredients:Hc,sliceColors:fd,customNote:W,isCustomPizza:!0};if(Zt)Tt(be=>be.map(Be=>Be.id===Zt.id?we:Be)),r(`Custom ${ln}" pizza with ${zs} halves updated!`);else{Tt(be=>[...be,we]);try{new Audio(ul("newProductAdd.mp3")).play().catch(Be=>console.log("Audio play failed:",Be))}catch(be){console.log("Audio creation failed:",be)}r(`Custom ${ln}" pizza with ${zs} halves added to cart!`)}Vs(null),Mr()},Mr=()=>{Eo(!1),Nn(2),Al({}),Dl({}),ls([]),or(""),qs([]),da(!1),hd([]),ma(""),Da("12"),Pe(""),Uu({}),cn({}),El(null),Vs(null),console.log("Pizza modal closed - all state reset")},Jl=b=>{const D=parseInt(b.target.value);D>=2&&D<=4&&Nn(D)},Jo=b=>Hc[b]||{default:[],custom:[]},[nm,hd]=v.useState([]),[im,ec]=v.useState(!1),fd=["#B8860B","#8B4513","#2F4F4F","#8B008B"],om=()=>{const b=[],D=360/zs;for(let K=0;K<zs;K++){const he=K*D,we=(K+1)*D,be=cr[K],Be=100+80*Math.cos(he*Math.PI/180),Je=100+80*Math.sin(he*Math.PI/180),pt=100+80*Math.cos(we*Math.PI/180),Mt=100+80*Math.sin(we*Math.PI/180),Pt=Math.abs(we-he)>180?1:0;let ts="#B8860B";be&&(ts=fd[K]||"#B8860B"),b.push(e.jsx("g",{children:e.jsx("path",{d:`M 100 100 L ${Be} ${Je} A 80 80 0 ${Pt} 1 ${pt} ${Mt} Z`,fill:ts,stroke:"#FF8C00",strokeWidth:"2",style:{transition:"fill 0.3s ease-in-out"}})},K))}return b},gd=(b,D,K,he)=>{const we={title:"",description:"",icon:"",iconColor:""};switch(b){case"instore":return{...we,title:"In Store Order",description:`New in-store order #${D} placed`,icon:"store",iconColor:"bg-blue-500"};case"table":const Be=(he?JSON.parse(he):null)?.tables?.[0]?.table_no||"Unknown";return{...we,title:"Table Order",description:`New order #${D} from Table ${Be}`,icon:"table",iconColor:"bg-purple-500"};case"collection":return{...we,title:"Collection Order",description:`New collection order #${D} from ${K||"Customer"}`,icon:"package",iconColor:"bg-orange-500"};case"delivery":return{...we,title:"Delivery Order",description:`New delivery order #${D} to ${K||"Customer"}`,icon:"truck",iconColor:"bg-green-500"};default:return{...we,title:"New Order",description:`New order #${D} placed`,icon:"shopping-cart",iconColor:"bg-red-500"}}},el=async()=>{if(gt.length===0){n("Please add items to cart before placing order");return}if(_()){if(Rn(!1),Rt==="Delivery"&&!R){n("Select customer first");return}if(Rt==="Collection"&&!R){n("Select customer first");return}if((Rt==="Collection"||Rt==="Delivery")&&R&&(!R.phone||R.phone.trim().length===0)){re(!0);return}if(Rt==="Delivery"&&R){if(console.log("Delivery order validation - Customer data:",R),console.log("Customer addresses:",R.addresses),!R.addresses||R.addresses.length===0){console.log("No addresses found for customer"),re(!0);return}const b=R.addresses.some(D=>D&&D.address&&D.address.trim().length>0);if(console.log("Has valid address:",b),console.log("Address details:",R.addresses.map(D=>({id:D.id,address:D.address,code:D.code,hasAddress:D&&D.address&&D.address.trim().length>0}))),!b){re(!0);return}console.log("Customer validation passed - ready for delivery order")}try{if(console.log("Starting order placement process..."),console.log("Is modifying order:",$t),console.log("Modifying order ID:",Wt),!window.myAPI){n("API not available. Please refresh the page.");return}console.log("Mapping order type. selectedOrderType:",Rt);let b="instore";Rt==="Table"?b="table":Rt==="Collection"?b="collection":Rt==="Delivery"?b="delivery":Rt==="In Store"&&(b="instore"),console.log("Mapped to database order type:",b);const D=pr(),K=Er(),he=rr(),we=Tr();let be=null,Be=[];if(fa==="Table"&&Ea){const yt=Re.find(Ut=>Ut.id.toString()===Ea);yt&&(be=JSON.stringify({tables:[{id:yt.id,table_no:yt.table_no,floor_name:yt.floor_name,persons:na||yt.seat_capacity||4}],total_persons:na||yt.seat_capacity||4}),Be.push(yt.id))}let Je="pending";switch(gn){case"New":Je="new";break;case"In Progress":Je="in_progress";break;case"Ready":Je="ready";break;case"On the way":Je="on_the_way";break;case"Delivered":Je="delivered";break;case"Completed":Je="completed";break;case"Pending":Je="pending";break;case"Complete":Je="completed";break;default:Je=gn.toLowerCase().replace(" ","_")}let pt=null;b==="delivery"&&R&&R.addresses&&R.addresses.length>0&&(pt=R.addresses[0].id);const Mt={customer_id:R?.id||null,order_amount:we,coupon_discount_amount:he,coupon_discount_title:zt?.title||null,payment_status:"pending",order_status:Je,total_tax_amount:K,payment_method:null,delivery_address_id:pt,coupon_code:zt?.code||null,order_note:null,order_type:b,restaurant_id:1,delivery_charge:0,additional_charge:0,discount_amount:he,tax_percentage:xr(),scheduled:Ol?1:0,schedule_at:Ol||null,failed:0,refunded:0,isdeleted:0,issyncronized:0,table_details:be,placed_at:Je==="new"?new Date().toISOString():null};let Pt;if($t&&Wt){console.log("Updating existing order:",Wt),console.log("Order data to update:",Mt);const yt=await window.myAPI.updateOrder(Wt,Mt);if(console.log("Update result:",yt),!yt.success){n("Failed to update order: "+yt.message);return}if(Pt=Wt,console.log("Order updated successfully"),Be.length>0)try{console.log("Reserving tables for modified order:",Be);const Ut=await window.myAPI.tableUpdateMultipleStatuses(Be,"Reserved");Ut.success?console.log("Tables reserved successfully for modified order:",Ut.message):console.warn("Failed to reserve tables for modified order:",Ut.message)}catch(Ut){console.error("Error reserving tables for modified order:",Ut)}}else{console.log("Creating new order");const yt=await window.myAPI.createOrder(Mt);if(!yt.success){n("Failed to create order: "+yt.message);return}if(Pt=yt.id,console.log("Order created successfully"),Be.length>0)try{console.log("Reserving tables:",Be);const Ut=await window.myAPI.tableUpdateMultipleStatuses(Be,"Reserved");Ut.success?console.log("Tables reserved successfully:",Ut.message):console.warn("Failed to reserve tables:",Ut.message)}catch(Ut){console.error("Error reserving tables:",Ut)}}const ts=gt.map(yt=>{const Ut=yt.totalPrice,Xt=Ma(Ut),Oa=0;if(yt.isCustomPizza){const hc=JSON.stringify({type:"custom_pizza",name:"Split Pizza",size:yt.size,slices:yt.slices,price:yt.price,note:yt.customNote,selectedPizzas:yt.selectedPizzas,flavorIngredients:yt.flavorIngredients,sliceColors:yt.sliceColors});return{order_id:Pt,food_id:0,quantity:yt.quantity,price:yt.price,food_details:hc,item_note:yt.customNote,variation:null,add_ons:null,ingredients:JSON.stringify(yt.flavorIngredients),discount_on_food:0,discount_type:null,tax_amount:Xt,total_add_on_price:0,issynicronized:0,isdeleted:0,iscreateyourown:1,isopen:0}}if(yt.isCustomFood){const hc=JSON.stringify({type:"custom_food",name:yt.customFoodName,price:yt.price,note:yt.customFoodNote,ingredients:yt.customFoodIngredients});return{order_id:Pt,food_id:0,quantity:yt.quantity,price:yt.price,food_details:hc,item_note:yt.customFoodNote,variation:null,add_ons:null,ingredients:JSON.stringify(yt.customFoodIngredients),discount_on_food:0,discount_type:null,tax_amount:Xt,total_add_on_price:0,issynicronized:0,isdeleted:0,iscreateyourown:0,isopen:1}}const ys=Object.keys(yt.variations).length>0?JSON.stringify(yt.variations):null,Qs=yt.adons&&yt.adons.length>0?JSON.stringify(yt.adons):null,nr=JSON.stringify({food:{id:yt.food?.id||0,name:yt.food?.name||"Unknown Food",description:yt.food?.description||"",price:yt.food?.price||0,image:yt.food?.image||null},variations:yt.variations,addons:yt.adons,quantity:yt.quantity,totalPrice:yt.totalPrice});return{food_id:yt.food?.id||0,order_id:Pt,price:yt.food?.price||0,food_details:nr,item_note:null,variation:ys,add_ons:Qs,discount_on_food:Oa,discount_type:null,quantity:yt.quantity,tax_amount:Xt,total_add_on_price:0,issynicronized:!1,isdeleted:!1}});if($t&&Wt){console.log("Smart updating order details for order:",Wt);try{const yt=await window.myAPI.getOrderDetailsWithFood(Wt);if(!yt.success){console.error("Failed to get existing order details:",yt.message),n("Failed to get existing order details");return}const Ut=yt.data||[];console.log("Existing order details:",Ut);for(const Xt of ts){const Oa=Ut.find(ys=>{if(ys.food_id!==Xt.food_id)return!1;if(Xt.variation&&ys.variation)try{const Qs=JSON.parse(Xt.variation),nr=JSON.parse(ys.variation);if(JSON.stringify(Qs)!==JSON.stringify(nr))return!1}catch(Qs){console.warn("Error parsing variations:",Qs)}else if(Xt.variation!==ys.variation)return!1;if(Xt.add_ons&&ys.add_ons)try{const Qs=JSON.parse(Xt.add_ons),nr=JSON.parse(ys.add_ons);if(JSON.stringify(Qs)!==JSON.stringify(nr))return!1}catch(Qs){console.warn("Error parsing addons:",Qs)}else if(Xt.add_ons!==ys.add_ons)return!1;return!0});if(Oa){console.log("Updating existing item:",Oa.id);const ys=await window.myAPI.updateOrderDetail(Oa.id,{quantity:Xt.quantity,price:Xt.price,food_details:Xt.food_details,variation:Xt.variation,add_ons:Xt.add_ons,discount_on_food:Xt.discount_on_food,tax_amount:Xt.tax_amount,total_add_on_price:Xt.total_add_on_price});ys.success||console.error("Failed to update order detail:",ys.message)}else{console.log("Adding new item:",Xt.food_id);const ys=await window.myAPI.createOrderDetail(Xt);ys.success||console.error("Failed to create new order detail:",ys.message)}}for(const Xt of Ut)if(!ts.find(ys=>{if(Xt.food_id!==ys.food_id)return!1;if(ys.variation&&Xt.variation)try{const Qs=JSON.parse(ys.variation),nr=JSON.parse(Xt.variation);if(JSON.stringify(Qs)!==JSON.stringify(nr))return!1}catch(Qs){console.warn("Error parsing variations:",Qs)}else if(ys.variation!==Xt.variation)return!1;if(ys.add_ons&&Xt.add_ons)try{const Qs=JSON.parse(ys.add_ons),nr=JSON.parse(Xt.add_ons);if(JSON.stringify(Qs)!==JSON.stringify(nr))return!1}catch(Qs){console.warn("Error parsing addons:",Qs)}else if(ys.add_ons!==Xt.add_ons)return!1;return!0})){console.log("Removing item:",Xt.id);const ys=await window.myAPI.deleteOrderDetail(Xt.id);ys.success||console.error("Failed to delete order detail:",ys.message)}console.log("Smart update completed")}catch(yt){console.error("Error in smart update:",yt),n("Failed to update order details: "+yt.message);return}}else{console.log("Creating new order details:",ts);const yt=await window.myAPI.createMultipleOrderDetails(ts);if(console.log("Order details result:",yt),!yt.success){n("Failed to create order details: "+yt.message);return}}const bt={id:Pt,orderNumber:`ORD-${String(Pt).padStart(3,"0")}`,items:[...gt],customer:R?{...R,id:R.id,name:R.name,phone:R.phone||null,email:R.email||null,addresses:R.addresses||[]}:{name:"Walk-in Customer"},total:we,coupon:zt,orderType:Rt,table:(()=>{if(Rt==="Table"){if(st){const yt=Re.find(Ut=>Ut.id.toString()===st);return yt?`Table ${yt.table_no}`:st}else if(rt.length>0)return rt.map(yt=>`Table ${yt.tableNo}`).join(", ")}return"None"})(),waiter:"Ds Waiter",status:gn,placedAt:new Date().toISOString(),databaseId:Pt};if($t&&Wt)console.log("Modifying order. Original order type:",kt?.orderType),console.log("Current selectedOrderType:",Rt),Dn(yt=>yt.map(Ut=>Ut.databaseId===Wt?{...bt,databaseId:Wt}:Ut)),Es(!1),Yr(null),Tt([]),gs(null),He(""),et(""),Me(""),M(null),_e(""),ct(""),ke([{id:1,tableId:""},{id:2,tableId:""}]),Qe([]),Vs(null),x(1),L({}),ce([]),console.log("Order type preserved after modification:",Rt),r("Order updated successfully!","success");else if(Ys){r("Order created for payment!","success");const yt=R?.name||null,Ut=gd(b,Pt,yt,be);m(Ut)}else{Dn(Xt=>[bt,...Xt]),r("Order placed successfully!","success");const yt=R?.name||null,Ut=gd(b,Pt,yt,be);m(Ut),Ts(),Ks("In Store")}return Ai(""),!$t&&!Pi&&!Ys&&(un(bt),Io(!0),setTimeout(()=>{Po(!0)},500)),Pt}catch(b){return console.error("Error placing order:",b),console.error("Error details:",b.message,b.stack),n("Failed to place order: "+b.message),null}}},lm=async()=>{try{if(!window.myAPI)return`draft_id${Date.now()}`;const b=await window.myAPI.getOrdersByStatus("draft");if(b&&b.success){const D=b.data||[];let K=0;return D.forEach(we=>{if(we.order_number&&we.order_number.startsWith("draft_id")){const be=parseInt(we.order_number.replace("draft_id",""));!isNaN(be)&&be>K&&(K=be)}}),`draft_id${(K+1).toString().padStart(3,"0")}`}return"draft_id001"}catch(b){return console.error("Error getting next draft ID:",b),`draft_id${Date.now()}`}},cm=async()=>{try{if(!window.myAPI){console.warn("API not available for fetching draft orders");return}const b=await window.myAPI.getOrdersByStatus("draft");if(b&&b.success){const D=b.data||[],he=(await Promise.all(D.map(async we=>{if(!we||!we.id)return console.warn("Invalid order found:",we),null;let be=[];try{const Be=await window.myAPI.getOrderDetailsByOrderId(we.id);console.log(`Order details for draft ${we.id}:`,Be),Be&&Be.success&&Array.isArray(Be.data)&&(be=Be.data.filter(Je=>Je&&typeof Je=="object"&&Je.food_id&&typeof Je.quantity=="number").map(Je=>{let pt=null,Mt=null;try{Je.variation&&(pt=JSON.parse(Je.variation))}catch(Pt){console.error("Error parsing variations:",Pt),pt=null}try{Je.add_ons&&(Mt=JSON.parse(Je.add_ons))}catch(Pt){console.error("Error parsing addons:",Pt),Mt=null}return{id:Je.food_id,food:{id:Je.food_id,name:Je.food_details||"Unknown Food",price:Je.price||0},quantity:Je.quantity||1,variations:pt,adons:Mt,notes:Je.item_note||null,totalPrice:(Je.price||0)*(Je.quantity||1)}}))}catch(Be){console.error(`Error fetching order details for order ${we.id}:`,Be),be=[]}return{id:we.id,databaseId:we.id,orderNumber:we.order_number||`draft_id${we.id}`,items:be,customer:{name:we.draft_name||"Unknown",phone:"N/A"},total:we.order_amount||0,coupon:null,orderType:"Draft",table:"None",waiter:"N/A",status:"Draft",placedAt:we.created_at||new Date().toISOString(),totalItems:be.reduce((Be,Je)=>Be+(Je&&Je.quantity?Je.quantity:0),0),subTotal:(we.order_amount||0)-(we.total_tax_amount||0),discount:we.discount_amount||0,totalDiscount:we.discount_amount||0,tax:we.total_tax_amount||0,charge:0,tips:0,totalPayable:we.order_amount||0,draftName:we.draft_name||"Unknown"}}))).filter(we=>we!==null);Ti(he),console.log("Fetched draft orders:",he)}}catch(b){console.error("Error fetching draft orders:",b)}},dm=async b=>{if(gt.length===0){n("Please add items to cart before creating draft");return}try{if(console.log("Creating draft order for customer:",b),!window.myAPI){n("API not available. Please refresh the page.");return}const D=pr(),K=Er(),he=rr(),we=Tr(),be=await lm(),Be={customer_id:R?.id||null,order_amount:we,coupon_discount_amount:he,coupon_discount_title:zt?.title||null,payment_status:"pending",order_status:"draft",total_tax_amount:K,payment_method:null,delivery_address_id:null,coupon_code:zt?.code||null,order_note:null,order_type:"draft",restaurant_id:1,delivery_charge:0,additional_charge:0,discount_amount:he,tax_percentage:xr(),scheduled:0,schedule_at:null,failed:0,refunded:0,isdeleted:0,issyncronized:0,table_details:null,draft_name:b,order_number:be},Je=await window.myAPI.createOrder(Be);if(!Je.success){n("Failed to create draft order: "+Je.message);return}const pt=Je.id;console.log("Draft order created successfully with ID:",pt),console.log("Cart items before creating order details:",gt),console.log("Cart items structure:",gt.map(bt=>({id:bt.id,foodId:bt.food?.id,foodName:bt.food?.name,price:bt.food?.price,quantity:bt.quantity,totalPrice:bt.totalPrice,hasVariations:!!bt.variations,hasAdons:!!bt.adons})));const Mt=gt.filter(bt=>{if(bt.isCustomPizza){const Ut=bt&&bt.quantity&&bt.price;return Ut||console.warn("Filtered out invalid custom pizza item:",bt),Ut}if(bt.isCustomFood){const Ut=bt&&bt.quantity&&bt.price&&bt.customFoodName;return Ut||console.warn("Filtered out invalid custom food item:",bt),Ut}const yt=bt&&bt.food&&bt.food?.id&&bt.quantity&&bt.food?.price;return yt||console.warn("Filtered out invalid cart item:",bt),yt}).map(bt=>{if(bt.isCustomPizza){const Ut=JSON.stringify({type:"custom_pizza",name:"Split Pizza",size:bt.size,slices:bt.slices,price:bt.price,note:bt.customNote,selectedPizzas:bt.selectedPizzas,flavorIngredients:bt.flavorIngredients,sliceColors:bt.sliceColors}),Xt={order_id:pt,food_id:0,quantity:bt.quantity,price:bt.price,food_details:Ut,item_note:bt.customNote,variation:null,add_ons:null,ingredients:JSON.stringify(bt.flavorIngredients),discount_on_food:0,discount_type:null,tax_amount:Ma(bt.price),total_add_on_price:0,issynicronized:0,isdeleted:0,iscreateyourown:1,isopen:0};return console.log("Created custom pizza order detail object:",Xt),Xt}if(bt.isCustomFood){const Ut=JSON.stringify({type:"custom_food",name:bt.customFoodName,price:bt.price,note:bt.customFoodNote,ingredients:bt.customFoodIngredients}),Xt={order_id:pt,food_id:0,quantity:bt.quantity,price:bt.price,food_details:Ut,item_note:bt.customFoodNote,variation:null,add_ons:null,ingredients:JSON.stringify(bt.customFoodIngredients),discount_on_food:0,discount_type:null,tax_amount:Ma(bt.price),total_add_on_price:0,issynicronized:0,isdeleted:0,iscreateyourown:0,isopen:1};return console.log("Created custom food order detail object:",Xt),Xt}const yt={order_id:pt,food_id:bt.food?.id||0,quantity:bt.quantity,price:bt.food?.price||0,food_details:bt.food?.name||null,item_note:null,variation:bt.variations?JSON.stringify(bt.variations):null,add_ons:bt.adons?JSON.stringify(bt.adons):null,discount_on_food:0,discount_type:null,tax_amount:0,total_add_on_price:0,issynicronized:0,isdeleted:0};return console.log("Created order detail object:",yt),yt});console.log("Testing API availability..."),console.log("window.myAPI.createOrderDetail exists:",typeof window.myAPI.createOrderDetail),console.log("window.myAPI.createMultipleOrderDetails exists:",typeof window.myAPI.createMultipleOrderDetails),console.log("Creating order details for draft order:",Mt);let Pt=0;if(Mt.length>0)try{console.log("Using createMultipleOrderDetails...");const bt=await window.myAPI.createMultipleOrderDetails(Mt);if(console.log("Batch API response:",bt),bt&&bt.success)console.log("Order details created successfully in batch:",bt),Pt=bt.count||Mt.length;else{console.error("Failed to create order details in batch:",bt),console.log("Falling back to individual creation...");for(const yt of Mt)try{console.log("Creating order detail individually:",yt);const Ut=await window.myAPI.createOrderDetail(yt);console.log("Individual API response:",Ut),Ut&&Ut.success?(console.log("Order detail created successfully:",Ut),Pt++):console.error("Failed to create order detail:",Ut)}catch(Ut){console.error("Error creating order detail:",Ut),console.error("Error stack:",Ut.stack)}}}catch(bt){console.error("Error in batch creation:",bt),console.error("Error stack:",bt.stack)}else console.log("No order details to create");if(console.log(`Created ${Pt} out of ${Mt.length} order details`),Pt>0)try{const bt=await window.myAPI.getOrderDetailsByOrderId(pt);bt&&bt.success&&console.log(`Verification: Found ${bt.data.length} order details for draft order ${pt}`)}catch(bt){console.error("Error verifying order details:",bt)}const ts={id:pt,databaseId:pt,orderNumber:be,items:[...gt],customer:R||{name:b,phone:"N/A"},total:we,coupon:zt,orderType:"Draft",table:"None",waiter:"N/A",status:"Draft",placedAt:new Date().toISOString(),totalItems:gt.reduce((bt,yt)=>bt+yt.quantity,0),subTotal:D,discount:he,totalDiscount:he,tax:K,charge:0,tips:0,totalPayable:we,draftName:b};Ti(bt=>[ts,...bt]),r("Draft order created successfully!","success"),Ts(),Ks("In Store")}catch(D){console.error("Error creating draft order:",D),console.error("Error details:",D.message,D.stack),n("Failed to create draft order: "+D.message)}},um=async b=>{hn(b),Vi(!0)},mm=async b=>{try{if(console.log("Deleting draft order:",b),!window.myAPI){n("API not available. Please refresh the page.");return}const D=await window.myAPI.deleteOrder(b);if(!D.success){n("Failed to delete draft order: "+D.message);return}Ti(K=>K.filter(he=>he.databaseId!==b)),r("Draft order deleted successfully!")}catch(D){console.error("Error deleting draft order:",D),n("Failed to delete draft order: "+D.message)}},xd=async()=>{try{if(console.log("Deleting all draft orders"),!window.myAPI){n("API not available. Please refresh the page.");return}const b=await window.myAPI.getOrdersByStatus("draft");if(!b.success){n("Failed to fetch draft orders: "+b.message);return}const D=b.data||[];if(D.length===0){n("No draft orders to delete");return}let K=0,he=0;for(const we of D)try{const be=await window.myAPI.deleteOrder(we.id);be.success?K++:(he++,console.error(`Failed to delete draft ${we.id}:`,be.message))}catch(be){he++,console.error(`Error deleting draft ${we.id}:`,be)}Ti([]),he===0?r(`Successfully deleted ${K} draft orders!`):n(`Deleted ${K} draft orders, but failed to delete ${he} orders.`)}catch(b){console.error("Error deleting all draft orders:",b),n("Failed to delete all draft orders: "+b.message)}},hm=async()=>{if(!mn){n("No draft order selected for conversion");return}try{if(console.log("Converting draft order to regular order:",mn),!window.myAPI){n("API not available. Please refresh the page.");return}let b="instore";fa==="Table"?b="table":fa==="Collection"?b="collection":fa==="Delivery"?b="delivery":fa==="In Store"&&(b="instore");let D=null,K=[];if(fa==="Table"&&(Ea||rt.length>0)){if(Ea){const Je=Re.find(pt=>pt.id.toString()===Ea);Je&&(D=JSON.stringify({tables:[{id:Je.id,table_no:Je.table_no,floor_name:Je.floor_name,persons:na||Je.seat_capacity||4}],total_persons:na||Je.seat_capacity||4}),K.push(Je.id))}if(rt.length>0){const Je=rt.map(pt=>{const Mt=Re.find(Pt=>Pt.id.toString()===pt.id);return{id:Mt?.id||pt.id,table_no:Mt?.table_no||pt.tableNo,floor_name:Mt?.floor_name||pt.floor,persons:pt.persons||Mt?.seat_capacity||4}});D=JSON.stringify({tables:Je,total_persons:Je.reduce((pt,Mt)=>pt+(Mt.persons||0),0)}),K=Je.map(pt=>pt.id)}}let he="pending";switch(gn){case"New":he="new";break;case"In Progress":he="in_progress";break;case"Ready":he="ready";break;case"On the way":he="on_the_way";break;case"Delivered":he="delivered";break;case"Completed":he="completed";break;case"Pending":he="pending";break;case"Complete":he="completed";break;default:he=gn.toLowerCase().replace(" ","_")}const we={order_type:b,order_status:he,table_details:D};console.log("Updating draft order with data:",we);const be=await window.myAPI.updateOrder(mn.databaseId,we);if(!be.success){n("Failed to convert draft order: "+be.message);return}if(K.length>0)try{console.log("Reserving tables for converted order:",K);const Je=await window.myAPI.tableUpdateMultipleStatuses(K,"Reserved");Je.success?console.log("Tables reserved successfully for converted order:",Je.message):console.warn("Failed to reserve tables for converted order:",Je.message)}catch(Je){console.error("Error reserving tables for converted order:",Je)}const Be={...mn,orderType:fa,status:"Pending",table:(()=>{if(fa==="Table"){if(Ea){const Je=Re.find(pt=>pt.id.toString()===Ea);return Je?`Table ${Je.table_no}`:Ea}else if(rt.length>0)return rt.map(Je=>`Table ${Je.tableNo}`).join(", ")}return"None"})(),isDraft:!1};Dn(Je=>Je.map(pt=>pt.databaseId===mn.databaseId?Be:pt)),Vi(!1),hn(null),ii("In Store"),wa(""),Kr(""),gr(""),r("Draft order converted to regular order successfully!","success")}catch(b){console.error("Error converting draft order:",b),console.error("Error details:",b.message,b.stack),n("Failed to convert draft order: "+b.message)}},fm=async()=>{if(gt.length===0){n("Please add items to cart before proceeding to payment");return}_()&&(nc(),Rn(!0),Ar(!0))},pd=async b=>{if(console.log("Loading food image:",b),!b||!b.startsWith("uploads/"))return console.log("Invalid image path:",b),null;try{const D=await window.myAPI.getFoodImage(b);if(console.log("Image loading result:",D),D&&D.success)return D.data;console.log("Image loading failed:",D?.message)}catch(D){console.error("Error loading food image:",D)}return null},gm=({food:b})=>{const[D,K]=v.useState(null),[he,we]=v.useState(!0);return v.useEffect(()=>{(async()=>{if(we(!0),b&&b.image){const Be=await pd(b.image);K(Be)}else K(null);we(!1)})()},[b?.image]),he?e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400 text-xs",children:"Loading..."})}):D?e.jsx("img",{src:D,alt:b?.name||"Food",className:"w-full h-full object-cover",onError:()=>K(null)}):e.jsx("img",{src:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=400&fit=crop&crop=center",alt:b?.name||"Food",className:"w-full h-full object-cover"})},xm=({item:b})=>{const[D,K]=v.useState(null),[he,we]=v.useState(!0);return v.useEffect(()=>{(async()=>{if(we(!0),b.image){const Be=await pd(b.image);K(Be)}else K(null);we(!1)})()},[b.image]),e.jsxs("div",{className:"bg-white border border-gray-200 shadow-lg hover:shadow-xl transition-all overflow-hidden transform hover:-translate-y-1 cursor-pointer",children:[e.jsx("div",{className:"h-[88px] relative",children:he?e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400 text-xs",children:"Loading..."})}):D?e.jsx("img",{src:D,alt:b?.name||"Food",className:"w-full h-[100%] object-cover",onError:()=>K(null)}):e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400 text-xs",children:"No Image"})})}),e.jsx("h3",{className:"font-semibold text-gray-800 text-md mt-2 mb-1 text-center",children:b?.name||"Unknown Food"}),e.jsxs("div",{className:"flex justify-between p-2 items-center",children:[e.jsx("div",{className:"flex flex-col",children:b.discount&&b.discount>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-gray-400 font-medium text-[12px] line-through",children:["€",b.price?.toFixed(2)||"0.00"]}),e.jsxs("p",{className:"text-green-600 font-semibold text-md",children:["€",(b.price-b.discount).toFixed(2)||"0.00"]})]}):e.jsxs("p",{className:"text-gray-600 font-semibold text-md mt-1",children:["€",b.price?.toFixed(2)||"0.00"]})}),e.jsx("button",{className:"mt-1 w-6 h-6 flex items-center justify-center rounded-full bg-primary border-2 border-primary text-white cursor-pointer",title:"Add",onClick:()=>oi(b),children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:e.jsx("path",{d:"M10 4v12M4 10h12",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})},gf=()=>e.jsx("div",{className:"flex-1 overflow-y-auto py-4 px-2",children:Ct?e.jsx("div",{className:"text-center py-8"}):Bt!==mt?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Searching..."})}):Ve.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-2 gap-y-4",children:Ve.map(b=>e.jsx(xm,{item:b},b.id))}):mt.trim()!==""?e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:"text-gray-500 text-sm",children:['No foods found matching "',mt,'"']}),e.jsx("div",{className:"text-gray-400 text-xs mt-2",children:"Try a different search term"})]}):Q?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No foods found in this category"}),e.jsxs("div",{className:"text-gray-400 text-xs mt-2",children:["Category: ",Q.name]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"Select a category to view foods"}),e.jsxs("div",{className:"text-gray-400 text-xs mt-2",children:["Categories loaded: ",se.length]})]})}),tc=()=>{if(!B?.variations)return!0;for(const b of B.variations){const D=k[b.id];if(b.is_required&&!D)return!1;if(D){const K=Array.isArray(D)?D.length:1;if(b.min&&K<b.min||b.max&&K>b.max)return!1}}return!0},li=()=>{qc(!0),Fl(!1),Oo(""),Ja([]),_r(null);const b=kt?kt.items:[];An(b.map(D=>({...D,splitQuantity:0,isSelected:!1}))),Yu(0),Yc(0),Mi(0)},sc=()=>{qc(!1),Oo(""),An([]),Ja([]),_r(null),Yu(0),Yc(0),Mi(0)},yd=()=>{if(!Za||parseInt(Za)<=0){n("Please enter a valid number of splits");return}const b=parseInt(Za),D=dn();if(b>D){n(`Maximum ${D} splits allowed based on total quantity`);return}const K=["Walk-in Customer","Dona M. Leighty 408-230-51","Donld PB 432226663","Gustavo J. Weitz 256-537-96","Mr Joe 231654849","Mr. Heri 523154215","John Smith 555-1234","Jane Doe 555-5678","Mike Johnson 555-9012","Sarah Wilson 555-3456"],he=Array.from({length:b},(we,be)=>({id:be+1,customer:K[be]||`Customer ${be+1}`,items:[],subtotal:0,tax:0,discount:0,charge:0,tips:0,total:0}));Ja(he),_r(he[0]),r(`Created ${b} split bills successfully!`,"success")},ac=(b,D)=>{const K=La.find(we=>we.id===b);if(!K)return;if(Zi(b)<=0){n("No more quantity available for this item");return}Ja(we=>we.map(be=>{if(be.id===D){if(be.items.find(Je=>Je.food?.id===K.food?.id))return{...be,items:be.items.map(Je=>Je.food?.id===K.food?.id?{...Je,quantity:(Je.quantity||0)+1,totalPrice:(Je.totalPrice||0)/(Je.quantity||1)*((Je.quantity||0)+1)}:Je)};{const Je={...K,quantity:1};return{...be,items:[...be.items,Je]}}}return be})),vd(D)},tl=(b,D)=>{const K=La.find(he=>he.id===b);K&&(Ja(he=>he.map(we=>{if(we.id===D){const be=we.items.find(Be=>Be.food?.id===K.food?.id);if(be)return be.quantity>1?{...we,items:we.items.map(Be=>Be.food?.id===K.food?.id?{...Be,quantity:(Be.quantity||0)-1,totalPrice:(Be.totalPrice||0)/(Be.quantity||1)*((Be.quantity||0)-1)}:Be)}:{...we,items:we.items.filter(Be=>Be.food?.id!==K.food?.id)}}return we})),vd(D))},bd=(b,D)=>{const K=La.find(be=>be.id===b);if(!K)return 0;const he=dr.find(be=>be.id===D);if(!he)return 0;const we=he.items.find(be=>be.food?.id===K.food?.id);return we&&we.quantity||0},Zi=b=>{const D=La.find(he=>he.id===b);if(!D)return 0;const K=dr.reduce((he,we)=>{if(we.paid)return he;const be=we.items.find(Be=>Be.food?.id===D.food?.id);return he+(be&&be.quantity||0)},0);return Math.max(0,(D.quantity||0)-K)},ci=()=>{if(!La||La.length===0)return!1;const b=La.filter(D=>D.quantity>0);return b.length===0?!0:b.every(D=>Zi(D.id)===0)},vd=b=>{Ja(D=>D.map(K=>{if(K.id===b){const he=K.items.reduce((Be,Je)=>Be+(Je.totalPrice||0),0),we=Ma(he),be=he+we+(K.charge||0)+(K.tips||0)-(K.discount||0);return{...K,subtotal:he,tax:we,total:be}}return K}))},pm=(b,D)=>{Ja(K=>K.map(he=>he.id===b?{...he,customer:D}:he))},ym=b=>{const D=dr.find(K=>K.id===b);if(Ja(K=>K.filter(he=>he.id!==b)),Gt?.id===b){const K=dr.filter(he=>he.id!==b);_r(K[0]||null)}D?.paid},jd=()=>{Ja(b=>b.map(D=>{const K=D.items.reduce((be,Be)=>be+(Be.totalPrice||0),0),he=Ma(K),we=K+he+(D.charge||0)+(D.tips||0)-(D.discount||0);return{...D,subtotal:K,tax:he,total:we}}))},wd=()=>{const b=Ys?yr().total:Gt?Va():Tr(),D=Lo.reduce((K,he)=>K+parseFloat(he.amount),0);return Math.max(0,b-D)},Nd=()=>{if(!Ui||parseFloat(Ui)<=0){n("Please enter a valid payment amount");return}const b={method:Li,amount:parseFloat(Ui),timestamp:new Date().toISOString()};ja(D=>[...D,b]),mr(""),hr(""),ea("")},rc=b=>{if(mr(b),hr(b),b){const D=Va(),K=parseFloat(b)-D;ea(K>0?K.toFixed(2):"0.00")}else ea("0.00")},Sd=b=>{if(hr(b),mr(b),b){const D=Ys?yr().total:Gt?Va():Tr(),K=parseFloat(b)-D;ea(K>0?K.toFixed(2):"0.00")}else ea("0.00")},Cd=()=>{Bi("Cash"),mr(""),hr(""),ea(""),ja([]),Ba(""),qr(!1),Tn("EUR"),ri(""),_r(null),Gi()},xf=()=>{Bi("Cash"),mr(""),hr(""),ea(""),ja([]),Ba(""),qr(!1),Tn("EUR"),ri(""),Gi()},nc=()=>{Bi("Cash"),mr(""),hr(""),ea(""),ja([]),Ba(""),qr(!1),Tn("EUR"),ri(""),_r(null),gs(null),Gi()},yr=()=>{if(!Ys)return{subtotal:0,tax:0,total:0};const D=(gt.length>0?gt:kt?.items||[]).reduce((be,Be)=>be+(parseFloat(Be.totalPrice)||0),0),K=Ma(D);let he=0;zt&&(zt.discountType==="percentage"?(he=D*(zt.discount/100),zt.maxDiscount>0&&(he=Math.min(he,zt.maxDiscount))):he=zt.discount),Zc&&(he+=parseFloat(Zc)||0);const we=D+K-he;return{subtotal:D,tax:K,discount:he,total:we}},ic=[{code:"EUR",symbol:"€",name:"Euro"},{code:"USD",symbol:"$",name:"US Dollar"}],Or=()=>{const b=ic.find(D=>D.code===Bo);return b?b.symbol:"€"},oc=()=>{if(console.log("calculateSplitBillSubtotal - selectedSplitBill:",Gt),!Gt)return 0;const b=Gt.subtotal||0;return console.log("calculateSplitBillSubtotal - returning:",b),b},lc=()=>Gt&&Gt.tax||0,sl=()=>{if(!Gt)return 0;const b=Gt.discount||0;let D=0;if(zt){const K=Gt.subtotal||0;zt.discountType==="percentage"?(D=K*(zt.discount/100),zt.maxDiscount>0&&(D=Math.min(D,zt.maxDiscount))):D=zt.discount}return b+D},kd=()=>Gt&&Gt.charge||0,cc=()=>Gt&&Gt.tips||0,Va=()=>{if(console.log("calculateSplitBillTotal - selectedSplitBill:",Gt),!Gt)return 0;const b=Gt.subtotal||0,D=Gt.tax||0,K=Gt.charge||0,he=Gt.tips||0,we=sl(),be=b+D+K+he-we;return console.log("calculateSplitBillTotal - returning:",be),be},_d=(b,D)=>{D.stopPropagation(),lf(K=>{const he=new Set(K);return he.has(b)?he.delete(b):he.add(b),he})},dc=()=>{if(!kt){n("Please select an order to view details");return}ec(!0)},bm=()=>{ec(!1),Ii(!0)},Ad=()=>{if(window.print(),r("Payment processed successfully! Invoice printed successfully!"),Ii(!1),si){const b=dr.find(D=>D.id===si);Ja(D=>D.map(K=>K.id===si?{...K,paid:!0}:K)),setTimeout(()=>{Ja(D=>{const K=D.filter(he=>he.id!==si);return K.length===0?(qc(!1),_r(null)):(_r(K[0]),setTimeout(()=>jd(),100)),K}),b&&b.items.length>0&&An(D=>D.map(K=>{const he=b.items.find(we=>we.food?.id===K.food?.id);if(he){const we=Math.max(0,K.quantity-he.quantity);return{...K,quantity:we}}return K})),Oi(null)},1e3)}},uc=(b,D)=>{D&&D.stopPropagation(),Ro(b),ai((he=>{switch(he){case"In Store":return"New";case"Table":case"Dine In":case"Collection":case"Delivery":return"New";default:return"New"}})(b.orderType)),ur(!0)},vm=async()=>{if(ha)try{let b="pending",D=null;switch(Bs){case"New":b="new",D="placed_at";break;case"In Progress":b="in_progress",D="processing_date";break;case"Ready":b="ready",D="ready_date";break;case"On the way":b="on_the_way",D="ontheway";break;case"Delivered":b="delivered",D="delivered_date";break;case"Completed":b="completed",D="confirmed_date";break;case"Pending":b="pending",D=null;break;case"Complete":b="completed",D="done_date";break;case"Confirmed":b="confirmed",D="confirmed_date";break;case"Processing":b="processing",D="processing_date";break;case"Handover":b="handover",D=null;break;case"Picked Up":b="picked_up",D=null;break;case"Cooked":b="cooked",D=null;break;case"Canceled":b="canceled",D="canceled_date";break;default:b=Bs.toLowerCase().replace(" ","_"),Bs.toLowerCase().includes("new")?D="placed_at":Bs.toLowerCase().includes("confirmed")?D="confirmed_date":Bs.toLowerCase().includes("processing")||Bs.toLowerCase().includes("in_progress")?D="processing_date":Bs.toLowerCase().includes("ready")?D="ready_date":Bs.toLowerCase().includes("on_the_way")?D="ontheway":Bs.toLowerCase().includes("delivered")?D="delivered_date":Bs.toLowerCase().includes("canceled")?D="canceled_date":(Bs.toLowerCase().includes("done")||Bs.toLowerCase().includes("completed"))&&(D="done_date")}if(!ha.databaseId){Wu(Bs),r(`Order status set to ${Bs} for new orders!`),ur(!1),Ro(null),ai("New");return}const K={order_status:b};D&&(K[D]=new Date().toISOString());const he=await window.myAPI.updateOrder(ha.databaseId,K);if(!he.success){n("Failed to update order status: "+he.message);return}if((b==="completed"||b==="delivered")&&ha.databaseId)try{const Be=await window.myAPI.getOrderById(ha.databaseId);if(Be.success&&Be.data.table_details){const Je=JSON.parse(Be.data.table_details);if(Je&&Je.tables&&Je.tables.length>0){const pt=Je.tables.map(Pt=>Pt.id);console.log("Freeing tables:",pt);const Mt=await window.myAPI.tableUpdateMultipleStatuses(pt,"Free");Mt.success?console.log("Tables freed successfully:",Mt.message):console.warn("Failed to free tables:",Mt.message)}}}catch(Be){console.error("Error freeing tables:",Be)}const we=Bs.toLowerCase(),be=we==="complete"||we==="completed"||we==="delivered"||we==="canceled"||we==="done"||we==="finished"||we==="closed";console.log("Status update debug:",{selectedStatus:Bs,normalizedStatus:we,shouldRemove:be,orderId:ha.id}),be?(console.log("Removing order from running orders:",ha.id),console.log("Current orders before removal:",Ri.length),Dn(Be=>{console.log("Previous orders:",Be.map(pt=>({id:pt.id,databaseId:pt.databaseId,status:pt.status})));const Je=Be.filter(pt=>pt.id!==ha.id&&pt.databaseId!==ha.databaseId);return console.log("Orders after removal:",Je.length),console.log("Removed order details:",{targetId:ha.id,targetDatabaseId:ha.databaseId}),Je}),r(`Order ${Bs.toLowerCase()} and removed from running orders!`)):(console.log("Updating order status in list:",ha.id),Dn(Be=>Be.map(Je=>Je.id===ha.id||Je.databaseId===ha.databaseId?{...Je,status:Bs}:Je)),r(`Order status updated to ${Bs}!`)),ur(!1),Ro(null),ai("New")}catch(b){console.error("Error updating order status:",b),n("Failed to update order status. Please try again.")}},jm=async()=>{if(!kt){n("Please select an order to modify");return}if(kt.payment_status==="paid"){const b=kt.status?.toLowerCase(),D=kt.orderType?.toLowerCase();if(!(D==="table"||D==="collection"||D==="instore"?b!=="completed":D==="delivery"?b!=="on_the_way"&&b!=="delivered"&&b!=="completed":!0)){n("Cannot modify order: Order status does not allow modification");return}}if(Tt([]),gs(null),He(""),et(""),Me(""),M(null),_e(""),ct(""),ke([{id:1,tableId:""},{id:2,tableId:""}]),Vs(null),x(1),L({}),ce([]),kt.items&&kt.items.length>0){console.log("Loading order items:",kt.items);const b=kt.items.map((D,K)=>{if(console.log("Processing item:",D),D.isCustomPizza)return{id:Date.now()+K,name:D.name,price:D.price,tax:D.tax,totalPrice:D.totalPrice,quantity:D.quantity,variations:{},adons:[],slices:D.slices,size:D.size,selectedPizzas:D.selectedPizzas,flavorIngredients:D.flavorIngredients,sliceColors:D.sliceColors,customNote:D.customNote,isCustomPizza:!0,addedAt:new Date().toISOString()};if(D.isCustomFood)return{id:Date.now()+K,name:D.name,price:D.price,tax:D.tax,totalPrice:D.totalPrice,quantity:D.quantity,variations:{},adons:[],customFoodName:D.customFoodName,customFoodNote:D.customFoodNote,customFoodIngredients:D.customFoodIngredients,isCustomFood:!0,addedAt:new Date().toISOString()};let he={},we=[];try{typeof D.variations=="string"?he=JSON.parse(D.variations):he=D.variations||{},typeof D.adons=="string"?we=JSON.parse(D.adons):we=D.adons||[]}catch(be){console.error("Error parsing variations/addons for item:",D,be)}return console.log("Parsed variations:",he),console.log("Parsed addons:",we),{id:Date.now()+K,food:D.food,variations:he,adons:we,quantity:D.quantity,totalPrice:D.totalPrice,addedAt:new Date().toISOString()}});console.log("Cart items from order:",b),Tt(b),is(Date.now()+b.length+1)}if(kt.customer&&(console.log("Loading customer:",kt.customer),M(kt.customer)),kt.orderType?(console.log("Loading order type from order:",kt.orderType),Ks(kt.orderType),console.log("Order type set to:",kt.orderType)):console.log("No order type found in selectedPlacedOrder"),kt.table&&kt.table!=="None"){if(console.log("Loading table:",kt.table),kt.databaseId)try{const D=await window.myAPI.getOrderById(kt.databaseId);if(D.success&&D.data.table_details){const K=JSON.parse(D.data.table_details);if(K&&K.tables&&K.tables.length>0){console.log("Loading table details from database:",K);const he=K.tables.map(Be=>{const Je=Re.find(pt=>pt.id===Be.id);return{id:Be.id.toString(),tableNo:Je?.table_no||Be.table_no,persons:Be.persons||Je?.seat_capacity||4,floor:Je?.floor_name||Be.floor_name}});Qe(he),console.log("Loaded reserved tables from database:",he);const we=K.tables[0],be=Re.find(Be=>Be.id===we.id);be&&(console.log("Found table from database:",be),Me(be.floor_name||"Floor 1"),He(be.id.toString()),et(we.persons||be.seat_capacity||4));return}}}catch(D){console.error("Error loading table details from database:",D)}const b=kt.table.match(/Table (\d+)/);if(b){const D=b[1],K=Re.find(he=>he.table_no.toString()===D);K?(console.log("Found table:",K),Me(K.floor_name||"Floor 1"),He(K.id.toString())):(console.log("Table not found, setting table name as is"),He(kt.table))}else He(kt.table)}kt.coupon&&(console.log("Loading coupon:",kt.coupon),gs(kt.coupon)),kt.waiter&&console.log("Loading waiter:",kt.waiter),Es(!0),Yr(kt.databaseId),kt.payment_status==="paid"?(Bl({payment_method:kt.payment_method,paid_amount:kt.order_amount||0}),qi(!1),fn(!1)):(Bl(null),qi(!1),fn(!1)),En(null),kt.orderType==="Collection"&&await eo(),r("Order loaded for modification. You can now edit the items.")},pf=()=>{if(!kt){n("Please select an order to cancel");return}fr(!0),On("")},Ji=async(b=!0)=>{if(!kt){n("Please select an order to cancel");return}try{const D={order_status:"canceled"};if(b&&Hi.trim()&&(D.cancellation_reason=Hi.trim()),kt.databaseId){const K=await window.myAPI.updateOrder(kt.databaseId,D);if(!K.success){n("Failed to cancel order: "+K.message);return}try{const he=await window.myAPI.getOrderById(kt.databaseId);if(he.success&&he.data.table_details){const we=JSON.parse(he.data.table_details);if(we&&we.tables&&we.tables.length>0){const be=we.tables.map(Je=>Je.id);console.log("Freeing tables due to cancellation:",be);const Be=await window.myAPI.tableUpdateMultipleStatuses(be,"Free");Be.success?console.log("Tables freed successfully after cancellation:",Be.message):console.warn("Failed to free tables after cancellation:",Be.message)}}}catch(he){console.error("Error freeing tables after cancellation:",he)}}Dn(K=>K.filter(he=>he.id!==kt.id)),fr(!1),On(""),En(null),r("Order canceled successfully!")}catch(D){console.error("Error canceling order:",D),n("Failed to cancel order. Please try again.")}},al=b=>{switch(b){case"Pending":return"bg-yellow-100 text-yellow-700";case"Ready":return"bg-blue-100 text-blue-700";case"Complete":return"bg-green-100 text-green-700";default:return"bg-yellow-100 text-yellow-700"}},eo=async()=>{try{if(!window.myAPI){n("API not available");return}const b=await window.myAPI.getHotelInfo();if(!b.success){n("Failed to fetch hotel information");return}rf(b.data);const K=new Date().toISOString().split("T")[0];Mo(K),to(b.data,K),Tl(!0)}catch(b){console.error("Error opening schedule modal:",b),n("Failed to open schedule modal")}},to=(b,D)=>{if(!b.opening_time||!b.closeing_time){n("Hotel opening/closing times not configured");return}const K=new Date,we=new Date(D).toDateString()===K.toDateString(),be=b.opening_time.split(":").slice(0,2).join(":"),Be=b.closeing_time.split(":").slice(0,2).join(":"),Je=[],pt=parseInt(be.split(":")[0]);parseInt(be.split(":")[1]);const Mt=parseInt(Be.split(":")[0]),Pt=parseInt(Be.split(":")[1]);for(let ts=pt;ts<=Mt;ts++)for(let bt=0;bt<60&&!(ts===Mt&&bt>=Pt);bt+=5){const yt=`${ts.toString().padStart(2,"0")}:${bt.toString().padStart(2,"0")}`,Ut=new Date(D+"T"+yt);we&&Ut<=K||Je.push(yt)}Vu(Je)},mc=b=>{Mo(b),To(""),Di&&to(Di,b)},wm=b=>{To(b),Il(!1),Rl("")},Nm=b=>{Rl(b),Il(!0),To("")},so=()=>{const b=Vc?Ei:Hu;if(!b){n("Please select a time");return}if(Vc){if(!/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(Ei)){n("Please enter a valid time in HH:MM format");return}if(Di){const he=Di.opening_time.split(":").slice(0,2).join(":"),we=Di.closeing_time.split(":").slice(0,2).join(":");if(Ei<he||Ei>we){n(`Time must be between ${he} and ${we}`);return}const be=new Date;if(new Date(Ml).toDateString()===be.toDateString()){const pt=be.toTimeString().slice(0,5);if(Ei<=pt){n("Custom time must be in the future for today");return}}}}const D=`${Ml}T${b}:00`;Ai(D),Tl(!1),r(`Order scheduled for ${Ml} at ${b}`)},Sm=()=>{Tl(!1),To(""),Mo(""),Rl(""),Il(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between gap-2 h-full",children:[e.jsxs("div",{className:"flex w-[20%] flex-col bg-[#ffffff] border-r border-gray-200 shadow-lg rounded-xl pb-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"font-bold text-gray-800",children:"Active Orders"}),e.jsxs("button",{onClick:()=>{h(),Xu()},className:"text-[#715af3] text-[11px] font-bold bg-white border border-gray-300 rounded-lg p-2 cursor-pointer hover:text-blue-800 flex items-center gap-2 shadow-[0_2px_4px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] hover:shadow-[0_1px_2px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] active:shadow-[0_1px_2px_rgba(0,0,0,0.1)_inset] active:translate-y-[1px] transition-all duration-150",children:[e.jsx(Qb,{size:12}),"Refresh"]})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:14}),e.jsx("input",{type:"text",name:"runningOrdersSearchQuery",placeholder:"Search Active Orders",value:Ee,onChange:b=>le(b.target.value),onFocus:b=>xa(b,"runningOrdersSearchQuery"),onClick:b=>ia(b,"runningOrdersSearchQuery"),onBlur:b=>Ln(b,"runningOrdersSearchQuery"),className:"w-full pl-8 text-sm font-semibold pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsx("div",{className:"flex-1 space-y-3 overflow-y-auto",children:Ri.length>0?Ri.filter(b=>{if(!Ee.trim())return!0;const D=Ee.toLowerCase().trim();return b.orderNumber.toString().toLowerCase().includes(D)}).map(b=>{const D=new Date(b.placedAt),K=cf-D,he=Math.floor(K/(1e3*60)),we=Math.floor(K/(1e3*60*60)),be=Math.floor(K/(1e3*60*60*24));let Be;be>0?Be=`${be} day${be>1?"s":""} ago`:we>0?Be=`${we} hour${we>1?"s":""} ago`:he>0?Be=`${he} min${he>1?"s":""} ago`:Be="Just now";const pt=(Mt=>{switch(Mt){case"Dine In":return{bgColor:"bg-blue-100",textColor:"text-blue-700",icon:e.jsx(Ni,{size:12})};case"Collection":return{bgColor:"bg-orange-100",textColor:"text-orange-700",icon:e.jsx(yu,{size:12})};case"Delivery":return{bgColor:"bg-green-100",textColor:"text-green-700",icon:e.jsx(So,{size:12})};case"In Store":return{bgColor:"bg-purple-100",textColor:"text-purple-700",icon:e.jsx(pu,{size:12})};case"Draft":return{bgColor:"bg-yellow-100",textColor:"text-yellow-700",icon:e.jsx(Oc,{size:12})};default:return{bgColor:"bg-gray-100",textColor:"text-gray-700",icon:e.jsx(q0,{size:12})}}})(b.orderType);return e.jsxs("div",{className:`relative bg-white border border-gray-200 hover:border-primary hover:shadow-md rounded-lg p-4 cursor-pointer transition-all duration-200 ${kt?.id===b.id?"border-primary b-2 bg-primaryExtraLight shadow-md":"hover:bg-gray-50"}`,onClick:()=>En(b),children:[e.jsx("div",{className:"absolute top-4 right-3 cursor-pointer",onClick:Mt=>_d(b.id,Mt),children:Gc.has(b.id)?e.jsx($g,{size:20,className:"text-blue-500"}):e.jsx(hs,{size:20,className:"text-gray-400"})}),e.jsx("div",{className:`flex items-start justify-between ${Gc.has(b.id)?"bg-blue-50 p-3 border-b border-blue-200  -m-3 rounded-t-lg":""}`,children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 text-sm",children:["#",b.orderNumber]}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${pt.bgColor} ${pt.textColor}`,children:[pt.icon,b.orderType==="Dine In"?`${b.orderType} - ${b.table}`:b.orderType]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:b.customer.name}),e.jsx("p",{className:"text-xs text-gray-500",children:Be})]}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${al(b.status||"Pending")}`,children:b.status||"PENDING"})]})]})}),Gc.has(b.id)&&e.jsxs("div",{className:" pt-4 ",children:[e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Order Items:"}),b.items.map((Mt,Pt)=>e.jsxs("div",{className:"flex justify-between items-start text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:Mt.food?.name||"Unknown Food"}),e.jsxs("span",{className:"text-blue-600 ml-2",children:["x",Mt.quantity]})]}),Mt.variations&&Object.keys(Mt.variations).length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Object.entries(Mt.variations).map(([ts,bt])=>{const yt=B?.variations?.find(Oa=>Oa.id===parseInt(ts)),Ut=yt?.name||ts,Xt=Array.isArray(bt)?bt:[bt];return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-gray-500",children:["• ",Ut,":"]}),e.jsx("span",{className:"text-gray-700",children:Xt.map((Oa,ys)=>{const Qs=yt?.options?.find(nr=>nr.id===parseInt(Oa));return e.jsxs("span",{children:[Qs?.option_name||Oa,ys<Xt.length-1?", ":""]},Oa)})})]},ts)})}),Mt.adons&&Mt.adons.length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Mt.adons.map((ts,bt)=>{const yt=B?.adons?.find(Oa=>Oa.id===parseInt(ts)),Ut=yt?.name||ts,Xt=yt?.price;return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"• Addon:"}),e.jsx("span",{className:"text-gray-700",children:Ut}),Xt&&e.jsxs("span",{className:"text-gray-500",children:["(+€",Xt.toFixed(2),")"]})]},bt)})})]}),e.jsxs("span",{className:"font-medium text-gray-800",children:["€",Mt.totalPrice.toFixed(2)]})]},Pt))]}),e.jsx("div",{className:"border-t border-gray-200 pt-2 mb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"Total:"}),e.jsxs("span",{className:"text-lg font-bold text-gray-800",children:["€",b.total.toFixed(2)]})]})}),e.jsx("div",{className:"flex gap-3",children:b.isDraft?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"flex-1 bg-gray-600 text-white text-sm font-medium py-1.5 px-2 rounded-lg hover:bg-gray-700 transition-colors",onClick:Mt=>{Mt.stopPropagation(),En(b)},children:"View Details"}),e.jsx("button",{className:"flex-1 bg-green-600 text-white text-sm font-medium py-1.5 px-2 rounded-lg hover:bg-green-700 transition-colors",onClick:Mt=>{Mt.stopPropagation(),um(b)},children:"Convert to Order"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"flex-1 bg-gray-600 text-white text-sm font-medium py-1.5 px-2 rounded-lg hover:bg-gray-700 transition-colors",onClick:Mt=>{Mt.stopPropagation(),En(b)},children:"View Details"}),e.jsx("button",{className:"flex-1 bg-blue-600 text-white text-sm font-medium py-1.5 px-2 rounded-lg hover:bg-blue-700 transition-colors",onClick:Mt=>{Mt.stopPropagation(),uc(b,Mt)},children:"Mark As"})]})})]})]},b.id)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No active orders"}),e.jsx("div",{className:"text-gray-400 text-xs mt-2",children:"Place orders to see active orders here"})]})})]}),e.jsxs("div",{className:"flex justify-center p-2",children:[$t&&e.jsx(e.Fragment,{}),e.jsxs("div",{className:"flex flex-col gap-2 text-[10px] w-full",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{"data-invoice-button":!0,onClick:()=>Fl(!Pl),disabled:!kt,className:`flex-1 h-12 text-[13px] font-bold rounded-lg px-3 cursor-pointer flex items-center justify-center gap-1 shadow-[0_2px_4px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] hover:shadow-[0_1px_2px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] active:shadow-[0_1px_2px_rgba(0,0,0,0.1)_inset] active:translate-y-[1px] transition-all duration-150 ${kt?"bg-[#010101] text-white":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:[e.jsx(q0,{size:14}),"BILL"]}),e.jsxs("button",{onClick:()=>{kt&&(Fi(!1),Ii(!0))},disabled:!kt,className:`flex-1 h-12 text-[13px] font-bold rounded-lg px-3 cursor-pointer flex items-center justify-center gap-1 shadow-[0_2px_4px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] hover:shadow-[0_1px_2px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] active:shadow-[0_1px_2px_rgba(0,0,0,0.1)_inset] active:translate-y-[1px] transition-all duration-150 ${kt?"bg-[#4d36eb] text-white":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:[e.jsx(Oc,{size:14}),"INVOICE"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:dc,disabled:!kt,className:`flex-1 text-[13px] h-12 font-bold rounded-lg px-3 cursor-pointer flex items-center justify-center gap-1 shadow-[0_2px_4px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] hover:shadow-[0_1px_2px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] active:shadow-[0_1px_2px_rgba(0,0,0,0.1)_inset] active:translate-y-[1px] transition-all duration-150 ${kt?"bg-[#4d36eb] text-white":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:[e.jsx(vn,{size:14}),"Details"]}),e.jsxs("button",{onClick:async()=>{try{await jm()}catch(b){console.error("Error modifying order:",b),n("Failed to modify order. Please try again.")}},disabled:!kt||$t&&kt&&kt.databaseId===Wt,className:`flex-1 text-[13px] h-12 font-bold rounded-lg px-3 cursor-pointer flex items-center justify-center gap-1 shadow-[0_2px_4px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] hover:shadow-[0_1px_2px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] active:shadow-[0_1px_2px_rgba(0,0,0,0.1)_inset] active:translate-y-[1px] transition-all duration-150 ${kt&&!($t&&kt&&kt.databaseId===Wt)?"bg-[#f3be25] text-white hover:bg-[#e6b31e]":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,title:kt?$t&&kt&&kt.databaseId===Wt?"Order is already being modified":"Modify order":"Select an order to modify",children:[e.jsx(oa,{size:14}),"Modify"]})]}),e.jsxs("button",{onClick:pf,disabled:!kt,className:`w-[70%] text-[13px] mx-auto h-12 font-bold rounded-lg px-3 flex items-center justify-center gap-2 shadow-[0_2px_4px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] hover:shadow-[0_1px_2px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] active:shadow-[0_1px_2px_rgba(0,0,0,0.1)_inset] active:translate-y-[1px] transition-all duration-150 ${kt?"bg-[#C42232] text-white cursor-pointer hover:bg-[#b01a28]":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:[e.jsx(Nt,{size:14}),"CANCEL ORDER"]})]})]}),Pl&&kt&&e.jsx("div",{"data-invoice-options":!0,className:"absolute bottom-37 left-10 transform -translate-x-7 bg-gray-200 rounded-lg p-2 shadow-lg z-10",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>{if(nc(),Rn(!1),kt&&kt.items){const b=kt.items.map((D,K)=>{let he={},we=[];try{typeof D.variations=="string"?he=JSON.parse(D.variations):he=D.variations||{},typeof D.adons=="string"?we=JSON.parse(D.adons):we=D.adons||[]}catch(be){console.error("Error parsing variations/addons for item:",D,be)}return{id:Date.now()+K,food:D.food,variations:he,adons:we,quantity:D.quantity,totalPrice:D.totalPrice,addedAt:new Date().toISOString()}});Tt(b),is(Date.now()+b.length+1),kt.customer&&M(kt.customer),kt.coupon&&gs(kt.coupon)}Ar(!0),Fl(!1)},className:"w-32 bg-gray-300 text-black font-medium rounded px-3 py-2 text-center hover:bg-gray-400 transition-colors text-xs",children:"Single Pay"}),e.jsx("button",{onClick:li,className:"w-32 bg-gray-300 text-black font-medium rounded px-3 py-2 text-center hover:bg-gray-400 transition-colors text-xs",children:"Split Bill"})]})})]}),e.jsxs("div",{className:"w-[40%] bg-white flex flex-col shadow-lg rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"py-3 px-2 border-b border-gray-200",children:[e.jsxs("div",{className:"relative mb-4 w-full",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx(jn,{className:"w-4 h-4 text-primary"})}),e.jsx("input",{type:"text",name:"searchQuery",placeholder:"Search Food Items",value:Bt,onChange:b=>ge(b.target.value),onFocus:b=>xa(b,"searchQuery"),onClick:b=>ia(b,"searchQuery"),onBlur:b=>Ln(b,"searchQuery"),className:`w-full pl-10 pr-4 py-2 text-sm bg-white placeholder:text-primary font-semibold border border-gray-300 rounded-xl z-10
      focus:outline-none focus:ring-2 focus:ring-primary`}),Bt&&e.jsx("button",{onClick:()=>ge(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Nt,{className:"w-4 h-4"})})]}),mt&&e.jsxs("div",{className:"mb-2 text-xs text-gray-600",children:["Found ",Ve.length," result",Ve.length!==1?"s":"",' for "',mt,'"']}),e.jsxs("div",{className:"flex items-center justify-between mb-2 border-b border-gray-200 pb-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-semibold text-gray-800 text-[16px]",children:"🍽 Food & Categories"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:dd,className:"bg-[#e53943] hover:bg-[#c62836] cursor-pointer text-white font-medium rounded-lg px-5 h-12 text-sm transition-colors",children:"Create Your Own"}),e.jsx("button",{onClick:ld,className:"bg-primary hover:bg-primaryLight cursor-pointer text-white font-medium rounded-lg px-5 h-12 text-sm transition-colors",children:"Open Order"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:Se?e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading categories..."}):se.length>0?se.map(b=>e.jsx("button",{className:`h-13 px-2 w-[120px] text-md font-semibold flex items-center justify-center gap-1 
                       btn-lifted transition-colors cursor-pointer ${Q?.id===b.id?"bg-white text-black border-2 border-primary":"bg-primary text-white hover:bg-primary/90"}`,onClick:()=>df(b),children:b.name},b.id)):e.jsx("div",{className:"text-gray-500 text-sm",children:"No categories found"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(gf,{})})]}),e.jsxs("div",{className:"w-[40%] bg-white rounded-lg flex flex-col",children:[$t&&e.jsx(e.Fragment,{}),e.jsxs("div",{className:"px-2 py-2 flex-shrink-0 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[g("instore")&&e.jsxs("button",{onClick:()=>{if($t){o("Cannot change order type while modifying an existing order");return}Ks("In Store"),He(""),et(""),Qe([]),Ai("")},disabled:$t,className:`px-3 py-1.5 h-10 text-[#666] text-base font-semibold rounded-lg border border-[#e0e0e0] flex items-center justify-center gap-1 
                          transition-colors cursor-pointer ${$t?Rt==="In Store"?"bg-primary text-white cursor-not-allowed":"bg-gray-300 text-gray-500 cursor-not-allowed":Rt==="In Store"?"bg-primary text-white":"bg-white hover:bg-[#F8F9FA] hover:border-primary hover:border-2"}`,children:[e.jsx(mu,{size:14}),"In Store"]}),g("table")&&e.jsxs("button",{onClick:()=>{if($t){o("Cannot change order type while modifying an existing order");return}Ks("Table"),Ai(""),H(!0)},disabled:$t,className:`px-3 py-1.5 h-10 text-[#666] text-base font-semibold rounded-lg border border-[#e0e0e0] flex items-center justify-center gap-1 
                          transition-colors cursor-pointer ${$t?Rt==="Table"?"bg-primary text-white cursor-not-allowed":"bg-gray-300 text-gray-500 cursor-not-allowed":Rt==="Table"?"bg-primary text-white":"bg-white hover:border-primary hover:border-2 hover:bg-[#F8F9FA]"}`,children:[e.jsx(mx,{size:14}),"Table"]}),g("collection")&&e.jsxs("button",{onClick:()=>{if($t){o("Cannot change order type while modifying an existing order");return}Ks("Collection"),He(""),et(""),Qe([]),R?R.phone&&R.phone.trim().length>0||re(!0):O(!0)},disabled:$t,className:`px-3 py-1.5 h-10 text-[#666] text-base font-semibold rounded-lg border border-[#e0e0e0] flex items-center justify-center gap-1 
                          transition-colors cursor-pointer ${$t?Rt==="Collection"?"bg-primary text-white cursor-not-allowed":"bg-gray-300 text-gray-500 cursor-not-allowed":Rt==="Collection"?"bg-primary text-white":"bg-white hover:border-primary hover:border-2 hover:bg-[#F8F9FA]"}`,children:[e.jsx(yl,{size:14}),"Collection"]}),g("delivery")&&e.jsxs("button",{onClick:()=>{if($t){o("Cannot change order type while modifying an existing order");return}if(Ks("Delivery"),He(""),et(""),Qe([]),Ai(""),R){const b=R.phone&&R.phone.trim().length>0,D=R.addresses&&R.addresses.length>0;(!b||!D)&&re(!0)}else O(!0)},disabled:$t,className:`px-3 py-1.5 h-10 text-[#666] text-base font-semibold rounded-lg border border-[#e0e0e0] flex items-center justify-center gap-1 
                           transition-colors cursor-pointer ${$t?Rt==="Delivery"?"bg-primary text-white cursor-not-allowed":"bg-gray-300 text-gray-500 cursor-not-allowed":Rt==="Delivery"?"bg-primary text-white":"bg-white hover:border-primary hover:border-2 hover:bg-[#F8F9FA]"}`,children:[e.jsx(So,{size:14}),"Delivery"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("button",{onClick:eo,className:`px-3 py-1.5 h-10 text-base text-[#666666] font-semibold rounded-lg border border-[#e0e0e0] flex items-center justify-center gap-1 
                        transition-colors cursor-pointer hover:border-[#007BFF] hover:border-2 ${Ol?"bg-primary text-white border-primary":"text-black hover:border-[#007BFF] hover:border-2 hover:bg-[#F8F9FA]"}`,children:[e.jsx($s,{size:14}),"Due to",Ol&&e.jsx("div",{})]}),e.jsxs("button",{onClick:()=>O(!0),className:`px-3 py-1.5 h-10 bg-[#007BFF] text-white text-base font-semibold rounded-lg border border-[#e0e0e0] flex items-center justify-center gap-1 
                       transition-colors cursor-pointer`,children:[e.jsx(Lc,{size:14}),"Customer"]}),e.jsxs("button",{onClick:()=>M(null),className:`px-3 py-1.5 h-10 text-base text-[#666666] font-semibold rounded-lg border border-[#e0e0e0] flex items-center justify-center gap-1 
                         transition-colors cursor-pointer hover:border-[#007BFF] hover:bg-[#F8F9FA] hover:border-2`,children:[!R&&e.jsx(V1,{size:14}),(console.log("Rendering customer button - selectedCustomer:",R),console.log("selectedCustomer name:",R?.name),R?R.name:"Walk In Customer")]}),e.jsxs("button",{onClick:()=>{if(gt.length===0){n("Cart is already empty");return}je(!0)},disabled:gt.length===0||$t,className:`flex justify-center bg-[#dc3545] items-center gap-2 text-white w-[100%] h-10 px-3 py-1.5 text-base font-semibold rounded-lg border border-[#e0e0e0] ${gt.length>0&&!$t?"cursor-pointer":"cursor-pointer hover:border-[#007BFF] hover:border-2"}`,children:[e.jsx(Pa,{size:14}),"Delete"]})]})]}),e.jsxs("div",{className:"bg-white flex flex-col mb-2 rounded-lg p-2 flex-1",children:[e.jsx("div",{className:"mt-3 border border-gray-200 rounded-lg flex flex-col flex-1 min-h-0",children:e.jsxs("table",{className:"w-full flex flex-col h-full",children:[e.jsx("thead",{className:"bg-gray-100 flex-shrink-0",children:e.jsxs("tr",{className:"grid grid-cols-[auto_100px_100px_100px] gap-2 text-sm font-medium text-gray-700 p-3",children:[e.jsx("th",{className:"text-left",children:"Items"}),e.jsx("th",{className:"text-center",children:"Qty"}),e.jsx("th",{className:"text-center",children:"Total"}),e.jsx("th",{className:"text-center",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white flex-1 overflow-y-auto",children:gt.length>0?gt.map(b=>e.jsxs("tr",{className:"grid grid-cols-[auto_100px_100px_100px] gap-2 items-center text-sm p-2 border-b border-gray-200",children:[e.jsx("td",{className:"text-gray-800 text-sm",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:b.isCustomPizza?"Split Pizza":b.isCustomFood?"Open Food":b.food?.name||"Unknown Food"}),b.isCustomPizza&&e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[e.jsxs("div",{children:[b.size,'" - ',b.slices," halves"]}),b.customNote&&e.jsxs("div",{children:["Note: ",b.customNote]}),e.jsxs("div",{children:["Price: €",b.price.toFixed(2)]})]}),b.isCustomFood&&e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[e.jsxs("div",{children:["Name: ",b.customFoodName]}),b.customFoodNote&&e.jsxs("div",{children:["Note: ",b.customFoodNote]}),b.customFoodIngredients&&b.customFoodIngredients.length>0&&e.jsxs("div",{children:["Ingredients: ",b.customFoodIngredients.map(D=>D.name).join(", ")]}),e.jsxs("div",{children:["Price: €",b.price.toFixed(2)]})]}),b.variations&&Object.keys(b.variations).length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Object.entries(b.variations).map(([D,K])=>{const he=B?.variations?.find(Be=>Be.id===parseInt(D)),we=he?.name||D,be=Array.isArray(K)?K:[K];return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-gray-500",children:["• ",we,":"]}),e.jsx("span",{className:"text-gray-700",children:be.map((Be,Je)=>{const pt=he?.options?.find(Mt=>Mt.id===parseInt(Be));return e.jsxs("span",{children:[pt?.option_name||Be,Je<be.length-1?", ":""]},Be)})})]},D)})}),b.adons&&b.adons.length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:b.adons.map((D,K)=>{const he=B?.adons?.find(Be=>Be.id===parseInt(D)),we=he?.name||D,be=he?.price;return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"• Addon:"}),e.jsx("span",{className:"text-gray-700",children:we}),be&&e.jsxs("span",{className:"text-gray-500",children:["(+€",be.toFixed(2),")"]})]},K)})})]})}),e.jsx("td",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center rounded",children:[e.jsx("button",{className:"text-primary flex items-center cursor-pointer justify-center transition-colors",onClick:()=>es(b.id,b.quantity-1),children:e.jsx(Vg,{size:15})}),e.jsx("span",{className:"w-8 text-center text-gray-800 py-1 text-sm",children:b.quantity}),e.jsx("button",{className:"flex items-center cursor-pointer justify-center text-primary transition-colors",onClick:()=>es(b.id,b.quantity+1),children:e.jsx(Ls,{size:15})})]})}),e.jsx("td",{className:"flex items-center justify-center",children:e.jsxs("span",{className:"text-gray-800",children:["€",b.totalPrice.toFixed(2)]})}),e.jsxs("td",{className:"flex items-center justify-center gap-2",children:[e.jsx(fl,{size:15,className:"text-primary cursor-pointer hover:text-primary-dark transition-colors",onClick:()=>Ws(b),title:"Edit item"}),e.jsx(Pa,{size:16,className:"text-[#c81118] mt-0.5 cursor-pointer",onClick:()=>vs(b.id)})]})]},b.id)):e.jsx("tr",{className:"grid grid-cols-[auto_1fr_80px_80px_100px] gap-2 items-center text-sm p-4",children:e.jsx("td",{colSpan:"5",className:"text-center text-gray-500"})})})]})}),e.jsxs("div",{className:"bg-white mt-5 w-[100%] rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsx("div",{className:"space-y-4 pb-2",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Subtotal"}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-md px-3 py-2 text-sm font-medium text-gray-900",children:["€",pr().toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:["Tax (",xr().toFixed(1),"%)"]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-md px-3 py-2 text-sm font-medium text-gray-900",children:["€",Er().toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Discount"}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-md px-3 py-2 text-sm font-medium text-gray-900",children:["€",rr().toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Total"}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-md px-3 py-2 text-sm font-medium text-gray-900",children:["€",Tr().toFixed(2)]})]})]})}),e.jsxs("div",{className:"grid grid-cols-7 gap-3 mb-3",children:[!($t&&$a)&&e.jsxs("button",{onClick:()=>{h(),el()},className:"col-span-2 bg-[#fb8b02] text-white btn-lifted h-12 px-3 text-sm font-bold rounded flex items-center justify-center gap-2 hover:bg-[#e67a00] transition-colors",children:[e.jsx(ko,{size:16}),$t?"UPDATE ORDER":"PLACE ORDER"]}),e.jsxs("button",{onClick:()=>{h(),fm()},className:`${$t&&$a?"col-span-5":"col-span-3"} bg-[#16A34A] text-white btn-lifted h-12 px-3 text-sm font-bold rounded flex items-center justify-center gap-2 hover:bg-[#15803d] transition-colors`,children:["PAY (€",Tr().toFixed(2),")"]}),e.jsxs("button",{onClick:()=>{h(),Ad()},className:"col-span-2 bg-[#3db4e4] text-white btn-lifted h-12 px-3 text-sm font-bold rounded flex items-center justify-center gap-2 hover:bg-[#2a9fd8] transition-colors",children:[e.jsx(pu,{size:16}),"PRINT"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("button",{onClick:li,className:"bg-gray-600 text-white btn-lifted h-12 px-2 text-xs font-bold rounded flex items-center justify-center gap-1 hover:bg-gray-700 transition-colors",children:[e.jsx(qg,{size:14}),"SPLIT SALE"]}),e.jsxs("button",{onClick:Wo,className:"bg-gray-600 text-white btn-lifted h-12 px-2 text-xs font-bold rounded flex items-center justify-center gap-1 hover:bg-gray-700 transition-colors",children:[e.jsx(ux,{size:14}),"HOLD"]}),e.jsxs("button",{className:"bg-gray-600 text-white btn-lifted h-12 px-2 text-xs font-bold rounded flex items-center justify-center gap-1 hover:bg-gray-700 transition-colors",children:[e.jsx(rN,{size:14}),"OPEN DRAWER"]}),e.jsxs("button",{className:"bg-gray-600 text-white btn-lifted h-12 px-2 text-xs font-bold rounded flex items-center justify-center gap-1 hover:bg-gray-700 transition-colors",children:[e.jsx(Bh,{size:14}),"SERVICE FEE"]})]})]})]})]}),e.jsx(gy,{isOpen:I,onClose:()=>{U(!1)},onCustomerSelect:ql,orderType:Rt}),e.jsx(IC,{isOpen:q,onClose:()=>{O(!1)},onCustomerSelect:ql,onEditCustomer:Go,onNewCustomer:()=>U(!0),orderType:Rt}),e.jsx(FC,{isOpen:Te,onClose:()=>De(!1),customer:ne,onEditCustomer:b=>{b&&M(b),De(!1),re(!0)},onChangeCustomer:()=>{De(!1),O(!0)}}),de&&R&&e.jsx(gy,{isOpen:de,onClose:()=>{re(!1),(Rt==="Delivery"||Rt==="Collection")&&g("instore")&&Ks("In Store")},onCustomerSelect:Fn,editingCustomer:R,orderType:Rt,onParentClose:q?()=>O(!1):void 0}),nf&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl h-[95vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Split Bill"}),e.jsx("button",{onClick:sc,disabled:ci(),className:`p-1 rounded-full transition-colors ${ci()?"text-gray-400 cursor-not-allowed":"text-red-500 hover:text-red-300 hover:bg-white hover:bg-opacity-20"}`,children:"X Cancel"})]}),e.jsx("div",{className:"p-6 flex-1 overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Order Items"}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"text-sm font-medium text-gray-700",children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Item Name"}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Price"}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Qty"}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Dis."}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Total"}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white",children:La.map(b=>e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 text-sm text-gray-800",children:e.jsx("span",{className:"truncate",children:b.food?.name||"Unknown Food"})}),e.jsxs("td",{className:"px-3 py-2 text-sm text-center text-gray-600",children:["€",(b.totalPrice/b.quantity).toFixed(2)]}),e.jsx("td",{className:"px-3 py-2 text-sm text-center text-gray-600",children:Zi(b.id)}),e.jsx("td",{className:"px-3 py-2 text-sm text-center text-gray-600",children:"€0.00"}),e.jsxs("td",{className:"px-3 py-2 text-sm text-center font-medium text-gray-800",children:["€",b.totalPrice.toFixed(2)]}),e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>tl(b.id,Gt?.id),disabled:!Gt||bd(b.id,Gt?.id)===0,className:`w-6 h-6 flex items-center justify-center rounded text-sm font-bold transition-colors ${Gt&&bd(b.id,Gt?.id)>0?"bg-red-500 text-white hover:bg-red-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:"Remove from selected split",children:"-"}),e.jsx("button",{onClick:()=>ac(b.id,Gt?.id),disabled:!Gt||Zi(b.id)<=0,className:`w-6 h-6 flex items-center justify-center rounded text-sm font-bold transition-colors ${Gt&&Zi(b.id)>0?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:"Add to selected split",children:"+"})]})})]},b.id))})]})}),e.jsxs("div",{className:"border-gray-200 pt-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Total Items:"}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:La.reduce((b,D)=>b+D.quantity,0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Sub Total:"}),e.jsxs("span",{className:"text-sm font-bold text-gray-800",children:["€",kt?(kt.total/(1+xr()/100)).toFixed(2):"0.00"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Tax:"}),e.jsxs("span",{className:"text-sm font-bold text-gray-800",children:["€",kt?(kt.total*xr()/100/(1+xr()/100)).toFixed(2):"0.00"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-800",children:"Total Payable:"}),e.jsxs("span",{className:"text-lg font-bold text-primary",children:["€",kt?kt.total.toFixed(2):"0.00"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Split Bills"}),dr.length===0&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-blue-800 font-medium mb-2",children:["Maximum Split(s): ",dn(),dn()<10&&e.jsxs("span",{className:"text-xs text-blue-600 block mt-1",children:["(Based on total quantity: ",La.reduce((b,D)=>b+D.quantity,0)," items)"]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Split"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"1",max:dn(),value:Za,onChange:b=>Oo(b.target.value),onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),Za&&parseInt(Za)>0&&parseInt(Za)<=dn()&&yd())},placeholder:"Enter number of splits",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"}),e.jsx("button",{onClick:yd,disabled:!Za||parseInt(Za)<=0||parseInt(Za)>dn(),className:`px-6 py-2 font-medium rounded-lg transition-colors ${Za&&parseInt(Za)>0&&parseInt(Za)<=dn()?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Go"})]})]})})]}),dr.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-4",children:dr.map(b=>e.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${Gt?.id===b.id?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>_r(b),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:["Split Bill ",b.id]}),Gt?.id===b.id&&e.jsx(la,{size:16,className:"text-green-600"}),b.paid&&e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-medium",children:"PAID"})]}),e.jsx("button",{onClick:D=>{D.stopPropagation(),ym(b.id)},className:"text-red-500 hover:text-red-700 p-1",children:e.jsx(Nt,{size:16})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Customer:"}),e.jsxs("select",{value:b.customer,onChange:D=>pm(b.id,D.target.value),onClick:D=>D.stopPropagation(),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"Walk-in Customer",children:"Walk-in Customer"}),e.jsx("option",{value:"Dona M. Leighty 408-230-51",children:"Dona M. Leighty 408-230-51"}),e.jsx("option",{value:"Donld PB 432226663",children:"Donld PB 432226663"}),e.jsx("option",{value:"Gustavo J. Weitz 256-537-96",children:"Gustavo J. Weitz 256-537-96"}),e.jsx("option",{value:"Mr Joe 231654849",children:"Mr Joe 231654849"}),e.jsx("option",{value:"Mr. Heri 523154215",children:"Mr. Heri 523154215"}),e.jsx("option",{value:"John Smith 555-1234",children:"John Smith 555-1234"}),e.jsx("option",{value:"Jane Doe 555-5678",children:"Jane Doe 555-5678"}),e.jsx("option",{value:"Mike Johnson 555-9012",children:"Mike Johnson 555-9012"}),e.jsx("option",{value:"Sarah Wilson 555-3456",children:"Sarah Wilson 555-3456"})]})]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sub Total:"}),e.jsxs("span",{children:["€",(b.subtotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Disc Amt(%):"}),e.jsxs("span",{children:["€",(b.discount||0).toFixed(2),"X"]})]}),e.jsxs("div",{className:"flex justify-between font-bold border-t border-gray-200 pt-1",children:[e.jsx("span",{children:"Total Payable:"}),e.jsxs("span",{children:["€",(b.total||0).toFixed(2)]})]})]}),e.jsx("button",{disabled:!ci(),className:`w-full mt-3 text-xs font-medium py-2 px-3 rounded transition-colors ${ci()?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:D=>{D.stopPropagation(),ci()&&(console.log("Setting selectedSplitBill:",b),_r(b),Oi(b.id),xf(),Rn(!1),Ar(!0))},children:"Checkout"}),!ci()&&e.jsx("div",{className:"text-xs text-gray-500 mt-1 text-center",children:"All items must be distributed before checkout"})]},b.id))})]})]})})]})}),_i&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold",children:Zt?"Edit Split Pizza":"Split Pizza"}),e.jsx("button",{onClick:Mr,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Food Type:"}),e.jsx("div",{className:"bg-gray-100 rounded-lg px-3 py-2 text-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Pizza"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size:"}),e.jsxs("select",{value:ln,onChange:b=>Da(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",children:[e.jsx("option",{value:"7",children:"7 inch"}),e.jsx("option",{value:"12",children:"12 inch"}),e.jsx("option",{value:"16",children:"16 inch"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"No. of Splits:"}),e.jsxs("select",{value:zs,onChange:Jl,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",children:[e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price:"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:va,onChange:b=>ma(b.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",placeholder:"0.00"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-800",children:"€"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-[40%_60%] gap-8 mb-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 text-center",children:"Pizza Preview"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"relative",children:e.jsx("svg",{width:"300",height:"300",viewBox:"0 0 200 200",children:om()})})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Select Flavors"}),e.jsx("div",{className:`grid gap-4 mb-6 ${zs===2?"grid-cols-2":zs===3?"grid-cols-3":"grid-cols-2"}`,children:Array.from({length:zs},(b,D)=>{const K=ws===D;cr[D];const he=Jo(D),we=he.default.length>0||he.custom.length>0;return e.jsxs("div",{className:`p-4 rounded-xl border-3 transition-all duration-200 cursor-pointer transform ${K?"border-blue-600 bg-blue-100 shadow-lg scale-105 ring-2 ring-blue-200":we?"border-green-400 bg-green-50 hover:border-green-500 hover:shadow-md":"border-gray-300 bg-white hover:border-gray-400 hover:shadow-sm"}`,onClick:()=>{El(D)},children:[e.jsxs("label",{className:`block text-sm font-semibold mb-2 \${
                              isCurrentlySelected 
                                ? 'text-blue-800' 
                                : hasSavedIngredients 
                                  ? 'text-green-700' 
                                  : 'text-gray-700'
                            }`,children:["Flavor ",D+1,":",we&&e.jsx("span",{className:"ml-2 text-xs text-green-600 font-normal",children:"(Modified)"}),K&&e.jsx("span",{className:"ml-2 text-xs text-blue-600 font-bold",children:"(Selected)"})]}),e.jsxs("select",{value:cr[D]?.id||"",onChange:be=>Xs(D,be.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 text-sm transition-colors ${K?"border-blue-400 focus:ring-blue-300 focus:border-blue-500 bg-blue-50":"border-gray-300 focus:ring-primary focus:border-primary bg-white"}`,children:[e.jsx("option",{value:"",children:"Select pizza..."}),Lt.map(be=>e.jsxs("option",{value:be.id,children:[be.name," - €",be.price]},be.id))]}),we&&e.jsxs("div",{className:`mt-2 text-xs ${K?"text-blue-600":"text-gray-600"}`,children:[he.default.length+he.custom.length," ingredients"]})]},D)})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Ingredients for ",(()=>{if(ws!==null&&cr[ws]){const b=cr[ws];return`Flavor ${ws+1} (${b.name})`}return"Selected Flavor"})(),":"]}),(()=>{if(ws!==null){const b=Jo(ws);if(b.default.length>0||b.custom.length>0)return e.jsx("button",{onClick:()=>{if(ws!==null){const K=sf[ws]||[];cn(he=>({...he,[ws]:{default:K,custom:[]}})),console.log(`Reset ingredients for slice ${ws} to original:`,K)}},className:"text-xs text-red-600 hover:text-red-800 underline",children:"Reset to Original"})}return null})()]}),(()=>{if(ws===null||!cr[ws])return e.jsx("div",{className:"text-gray-400 text-sm",children:"Select a flavor above to see ingredients"});cr[ws];const b=Jo(ws),D=[...b.default,...b.custom];return D.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:D.map((K,he)=>{const we=he<b.default.length,be=K.name||K;return e.jsxs("span",{className:"bg-primary text-white px-3 py-1 rounded-full text-sm flex items-center gap-1",children:[be,e.jsx("button",{onClick:()=>{if(we){const Be=b.default.filter((Je,pt)=>pt!==he);cn(Je=>({...Je,[ws]:{...Je[ws],default:Be}})),console.log(`Removed default ingredient "${be}" from slice ${ws}. Updated defaults:`,Be)}else{const Be=he-b.default.length,Je=b.custom.filter((pt,Mt)=>Mt!==Be);cn(pt=>({...pt,[ws]:{...pt[ws],custom:Je}})),console.log(`Removed custom ingredient "${be}" from slice ${ws}. Updated custom:`,Je)}},className:"text-white hover:text-red-200",children:e.jsx(Nt,{size:10})})]},`${ws}-${he}`)})}):e.jsx("div",{className:"text-gray-400 text-sm",children:"No ingredients available for this pizza"})})()]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Add Custom Ingredient:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:Gr==="customIngredientInput"?sr:ir,onChange:b=>ud(b.target.value),onFocus:b=>xa(b,"customIngredientInput",ir),onClick:b=>ia(b,"customIngredientInput",ir),onBlur:b=>Ln(b,"customIngredientInput"),onKeyPress:b=>{b.key==="Enter"&&Zl()},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",placeholder:"Type ingredient name and press Enter or click Add..."}),e.jsx("button",{onClick:Ql,className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors",children:"Add"})]}),Cn&&kn.length>0&&e.jsx("div",{className:"mt-2 bg-white border border-gray-300 rounded-lg shadow-lg max-h-40 overflow-y-auto",children:kn.map(b=>e.jsx("button",{onClick:()=>Zo(b),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 border-b border-gray-100 last:border-b-0",children:b.name},b.id))})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Order Note"}),e.jsx("textarea",{value:Gr==="pizzaNote"?sr:W,onChange:b=>Pe(b.target.value),onFocus:b=>xa(b,"pizzaNote",W),onClick:b=>ia(b,"pizzaNote",W),onBlur:b=>Ln(b,"pizzaNote"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm resize-none",rows:3,placeholder:"Add any special instructions or notes for this pizza order..."})]})}),e.jsxs("div",{className:"flex gap-4 justify-end mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:Mr,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:md,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-blue-700 transition-colors",children:Zt?"Update Pizza":"Add to Order"})]})]})]})}),kl&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold",children:ua?"Edit Open Food":"Open Order"}),e.jsx("button",{onClick:Xl,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Food Name:"}),e.jsx("input",{type:"text",value:Gr==="customFoodName"?sr:ba,onChange:b=>Sn(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",placeholder:"Enter food name",onFocus:b=>xa(b,"customFoodName",ba),onClick:b=>ia(b,"customFoodName",ba),onBlur:ar})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price:"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:Zn,onChange:b=>Cr(b.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",placeholder:"0.00"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-800",children:"€"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ingredients:"}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx("input",{type:"text",value:Gr==="customIngredientInput"?sr:ir,onChange:ff,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",placeholder:"Type ingredient name...",onFocus:b=>xa(b,"customIngredientInput",ir),onClick:b=>ia(b,"customIngredientInput",ir),onBlur:ar}),Cn&&kn.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-lg shadow-lg z-10 max-h-40 overflow-y-auto",children:kn.map(b=>e.jsx("button",{onClick:()=>Ql(b),className:"w-full px-3 py-2 text-left hover:bg-gray-100 text-sm border-b border-gray-100 last:border-b-0",children:b.name},b.id))})]}),on.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:on.map(b=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary text-white text-sm rounded-full",children:[b.name,e.jsx("button",{onClick:()=>cd(b.id),className:"ml-1 hover:bg-white hover:bg-opacity-20 rounded-full p-0.5",children:e.jsx(Nt,{size:12})})]},b.id))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note:"}),e.jsx("textarea",{value:Gr==="customFoodNote"?sr:$r,onChange:b=>Hr(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",rows:"3",placeholder:"Enter any special notes or instructions",onFocus:b=>xa(b,"customFoodNote",$r),onClick:b=>ia(b,"customFoodNote",$r),onBlur:ar})]}),e.jsxs("div",{className:"flex gap-4 justify-end mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:Xl,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:rm,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primaryLight transition-colors",children:ua?"Update Food":"Add to Order"})]})]})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Table Selection"}),e.jsx("button",{onClick:()=>{H(!1),Rt==="Table"&&!st&&rt.length===0&&g("instore")&&Ks("In Store")},className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Select Floor"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-60 overflow-y-auto",children:At?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading floors..."})}):ie&&ie.length>0?ie.map(b=>e.jsxs("button",{onClick:()=>$l(b),className:`px-4 py-3 text-left rounded-lg transition-colors border ${me===b.name?"bg-primary text-white border-primary":"bg-white text-gray-700 hover:bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:"font-medium",children:b.name}),e.jsx("div",{className:"text-sm opacity-75",children:b.type})]},b.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No floors found"}),e.jsx("div",{className:"text-gray-400 text-xs mt-2 mb-4",children:"Please add floors to the database"}),e.jsx("button",{onClick:pn,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors text-sm",children:"Add Sample Data"})]})})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${me?"text-gray-700":"text-gray-400"}`,children:"Select Table"}),e.jsxs("select",{value:st,onChange:b=>ad(b.target.value),disabled:!me,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary ${me?"border-gray-300 bg-white":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Choose a table..."}),St?e.jsx("option",{value:"",disabled:!0,children:"Loading tables..."}):Re.length>0?Re.map(b=>e.jsxs("option",{value:b.id,disabled:zn(b.id.toString()),children:["Table ",b.table_no," (",b.seat_capacity||4," seats) ",zn(b.id.toString())?"- RESERVED":""]},b.id)):me?e.jsx("option",{value:"",disabled:!0,children:"No available tables"}):e.jsx("option",{value:"",disabled:!0,children:"Select a floor first"})]}),rt.length>0&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Reserved Tables:"}),e.jsx("div",{className:`space-y-2 ${rt.length>3?"max-h-32 overflow-y-auto pr-2":""}`,children:rt.map(b=>e.jsx("div",{className:"p-2 bg-orange-50 border border-orange-200 rounded-lg flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-orange-700 font-medium",children:["Table ",b.tableNo," (",b.persons," persons) - ",b.floor]})]}),e.jsx("button",{onClick:()=>Ko(b.id),className:"text-red-500 hover:text-red-700 p-1",title:"Remove reservation",children:e.jsx(Nt,{size:14})})]})},b.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${st?"text-gray-700":"text-gray-400"}`,children:"Persons"}),e.jsxs("select",{value:Xe,onChange:b=>Ju(b.target.value),disabled:!st,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary ${st?"border-gray-300 bg-white":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select number of persons..."}),nd().map(b=>e.jsxs("option",{value:b,children:[b," ",b===1?"Person":"Persons"]},b))]})]})]})]}),e.jsxs("div",{className:"flex gap-4 justify-end pt-4 border-t border-gray-200 flex-shrink-0",children:[e.jsxs("button",{disabled:!me,onClick:em,className:`px-6 py-2 font-medium rounded-lg transition-colors flex items-center gap-2 ${me?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}),e.jsx("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}),e.jsx("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}),e.jsx("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]}),"Merge Table"]}),e.jsxs("button",{disabled:!Xe,onClick:()=>{st&&Xe&&rd(st,Xe),He(""),et(""),H(!1)},className:`px-6 py-2 font-medium rounded-lg transition-colors flex items-center gap-2 ${Xe?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17,21 17,13 7,13 7,21"}),e.jsx("polyline",{points:"7,3 7,8 15,8"})]}),"Save"]})]})]})]})}),V&&e.jsx(Dv,{open:V,onBack:Vl,onClose:()=>{F(!1),ke([{id:1,tableId:""},{id:2,tableId:""}])},floors:ie,floorsLoading:At,selectedFloor:me,onSelectFloor:$l,addSampleData:pn,tables:Re,tablesLoading:St,mergeTableSelections:it,onSelectionChange:tm,onRemoveSelection:sm,onAddMoreSelection:Yo,isAddMoreDisabled:Pn,getAvailableTablesForSelection:am,isTableReserved:b=>zn(b.toString()),onSave:b=>{b.forEach(D=>{zn(D.id)||rd(D.id,"Merged Table")}),r(`Successfully merged ${b.length} tables!`),F(!1),ke([{id:1,tableId:""},{id:2,tableId:""}])}}),P&&R&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-500 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Customer"}),e.jsx("button",{onClick:()=>ee(!1),className:"text-white hover:text-red-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete this customer? This action cannot be undone."}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Customer: ",e.jsx("strong",{children:R.name})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>ee(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:id,className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),console.log("Modal render check:",{showFoodModal:ve,selectedFood:!!Ce}),ve&&Ce&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-xl font-bold",children:Zt?"Edit Food Item":"Food Details"}),$t&&e.jsx("span",{className:"bg-yellow-500 text-yellow-900 px-2 py-1 rounded-full text-xs font-medium",children:"Modifying Order"})]}),e.jsx("button",{onClick:()=>{ae(!1),pe(null),L({}),x(1),Vs(null)},className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:[e.jsxs("div",{className:"mb-6",children:[Zt&&e.jsx(e.Fragment,{}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex-shrink-0 mb-3",children:e.jsx(gm,{food:Ce})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:Ce.name}),Ce.description&&e.jsx("p",{className:"text-sm text-gray-600",children:Ce.description})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["€",Ce.price?.toFixed(2)||"0.00"]})})]})]}),Y?e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(fl,{size:18,className:"text-primary"}),"Select Variation"]}),e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading variations..."})})]}):B?.variations&&B.variations.length>0?e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(fl,{size:18,className:"text-primary"}),"Select Variation"]}),e.jsx("div",{className:"space-y-4",children:B.variations.map(b=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h5",{className:"font-medium text-gray-800",children:b.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[b.is_required&&e.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Required"}),e.jsx("span",{className:"text-xs text-gray-500",children:b.type==="multiple"?"Multiple":"Single"})]})]}),(b.min||b.max)&&e.jsxs("div",{className:"mb-3 text-xs text-gray-600",children:[b.min&&b.max&&e.jsxs("span",{children:["Select ",b.min," to ",b.max," options"]}),b.min&&!b.max&&e.jsxs("span",{children:["Select at least ",b.min," option",b.min>1?"s":""]}),!b.min&&b.max&&e.jsxs("span",{children:["Select up to ",b.max," option",b.max>1?"s":""]})]}),e.jsx("div",{className:"space-y-2",children:b.options?.map(D=>{const K=b.type==="multiple"?k[b.id]?.includes(D.id):k[b.id]===D.id;return e.jsxs("button",{onClick:()=>qo(b.id,D.id),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-colors ${K?"bg-primary/10 border-primary":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${K?"border-primary bg-primary":"border-gray-300"}`,children:K&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsx("span",{className:`font-medium ${K?"text-primary":"text-gray-700"}`,children:D.option_name})]}),e.jsx("span",{className:`font-semibold ${K?"text-primary":"text-gray-600"}`,children:D.option_price>0?`+€${D.option_price.toFixed(2)}`:"Free"})]},D.id)})}),(()=>{const D=k[b.id],K=D?Array.isArray(D)?D.length:1:0,he=[];return b.is_required&&!D&&he.push(`Required: ${b.name}`),D&&(b.min&&K<b.min&&he.push(`Minimum selection: ${b.min}`),b.max&&K>b.max&&he.push(`Maximum selection: ${b.max}`)),he.length>0?e.jsx("div",{className:"mt-2 space-y-1",children:he.map((we,be)=>e.jsx("div",{className:"text-xs text-red-600",children:we},be))}):null})()]},b.id))})]}):null,Y?e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Ls,{size:18,className:"text-primary"}),"Select Add on"]}),e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading addons..."})})]}):B?.adons&&B.adons.length>0?e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Ls,{size:18,className:"text-primary"}),"Select Add on"]}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsx("div",{className:"space-y-2",children:B.adons.map(b=>{const D=G.includes(b.id);return e.jsxs("button",{onClick:()=>sd(b.id),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-colors ${D?"bg-primary/10 border-primary":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${D?"border-primary bg-primary":"border-gray-300"}`,children:D&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsx("span",{className:`font-medium ${D?"text-primary":"text-gray-700"}`,children:b.name})]}),e.jsxs("span",{className:`font-semibold ${D?"text-primary":"text-gray-600"}`,children:["+€",b.price.toFixed(2)]})]},b.id)})})})]}):null,e.jsx("div",{className:"mb-6 rounded-lg",children:e.jsxs("button",{onClick:()=>C(!0),className:"w-[150px] bg-primary text-white  flex items-center justify-center gap-2 px-4 py-3 border border-gray-300 rounded-lg transition-colors",children:[e.jsx(fl,{size:18,className:"text-white"}),e.jsx("span",{className:"font-medium text-white",children:"Ingredients"})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note:"}),e.jsx("textarea",{value:Os,onChange:b=>Cl(b.target.value),placeholder:"Add any special instructions or notes for this order...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none",rows:"3"})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4 mb-4",children:e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Total Price:"}),e.jsxs("span",{className:"text-2xl font-bold text-primary",children:["€",xn().toFixed(2)]})]})})]}),e.jsx("div",{className:"border-t border-gray-200 p-6 bg-white rounded-b-xl flex-shrink-0",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border border-gray-300 rounded-lg bg-white",children:[e.jsx("button",{onClick:mf,disabled:f<=1,className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:text-gray-800 disabled:text-gray-300 disabled:cursor-not-allowed transition-colors",children:e.jsx(Vg,{size:16})}),e.jsx("span",{className:"w-12 text-center text-gray-800 font-medium text-lg",children:f}),e.jsx("button",{onClick:Yi,className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx(Ls,{size:16})})]}),e.jsxs("button",{onClick:Qu,disabled:!tc(),className:`flex-1 px-4 py-3 font-medium rounded-lg transition-colors flex items-center justify-center gap-2 ${tc()?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(ko,{size:18}),Zt?"Update":"Add"]})]})})]})}),e.jsx(XC,{isVisible:N,onClose:()=>C(!1),foodId:Ce?.id,foodName:Ce?.name}),Fe&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl min-w-[800px] max-h-[90vh]",children:[e.jsxs("div",{className:"bg-white text-black p-3 flex justify-between items-center rounded-t-xl border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Coupons & Offers"}),e.jsx("button",{onClick:Xo,className:"text-black hover:text-gray-600 p-1 rounded-full hover:bg-gray-100",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-4 flex gap-4 overflow-y-auto max-h-[80vh]",children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ah,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Manual Discount"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Discount Type"}),e.jsxs("select",{name:"discountType",value:js,onChange:b=>Ot(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm",children:[e.jsx("option",{value:"percentage",children:"Percentage (%)"}),e.jsx("option",{value:"fixed",children:"Fixed Amount (€)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Disc. Amount"}),e.jsx("input",{type:"number",name:"discountAmount",value:ns,onChange:b=>xs(b.target.value),onFocus:b=>Qi(b,"discountAmount",ns),onClick:b=>Qi(b,"discountAmount",ns),onBlur:b=>{Na==="discountAmount"&&Dr!==void 0&&xs(Dr),Wr("")},onInput:b=>{const D=b.target.value;xs(D),Na==="discountAmount"&&Ta(D)},min:"0",step:"0.01",placeholder:js==="percentage"?"20":"10",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"})]})]}),ns&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:["✓ Manual discount of ",ns,js==="percentage"?"%":"€"," is ready to apply."]}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx("button",{onClick:Yl,disabled:!ns||parseFloat(ns)<=0,className:`px-4 py-2 rounded-lg transition-colors font-medium ${ns&&parseFloat(ns)>0?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Apply Manual Discount"})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ah,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Enter Coupon Code"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"couponCode",value:ot,onChange:b=>ht(b.target.value),onFocus:b=>xa(b,"couponCode"),onClick:b=>ia(b,"couponCode"),onBlur:b=>Ln(b,"couponCode"),placeholder:"Enter promo code or click a coupon below",className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${ot.trim()?"border-green-400 focus:ring-green-500 focus:ring-green-500 bg-green-50":"border-gray-300 focus:ring-green-500 focus:border-green-500"}`,onKeyUp:b=>{b.key==="Enter"&&Wi()}}),e.jsx("button",{onClick:Wi,disabled:!ot.trim(),className:`px-4 py-2 rounded-lg transition-colors font-medium ${ot.trim()?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Apply"})]}),ot.trim()&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:['✓ Coupon code "',ot,'" is ready to apply. Click "Apply".']})]}),zt&&e.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Applied Coupon"}),e.jsx("p",{className:"text-sm text-green-600",children:zt.title}),e.jsxs("p",{className:"text-xs text-green-600",children:["Code: ",zt.code]}),zt.discountType==="percentage"?e.jsxs("p",{className:"text-green-700 font-medium",children:[zt.discount,"% OFF"]}):e.jsxs("p",{className:"text-green-700 font-medium",children:["€",zt.discount," OFF"]})]}),e.jsx("button",{onClick:Kl,className:"text-red-600 hover:text-red-800 p-1",children:e.jsx(Nt,{size:16})})]})}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Available Coupons"}),Vt?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading coupons..."})}):jt.length>0?e.jsx("div",{className:"space-y-3",children:jt.map(b=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-green-300 hover:bg-green-50 transition-all cursor-pointer group",onClick:()=>{ht(b.code)},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:b.title}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Customer Type: ",b.customerType]}),b.discountType==="percentage"?e.jsxs("p",{className:"text-green-600 font-medium mt-1",children:[b.discount,"% OFF"]}):e.jsxs("p",{className:"text-green-600 font-medium mt-1",children:["€",b.discount," OFF"]}),b.minPurchase>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Min Purchase: €",b.minPurchase]}),b.maxDiscount>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Max Discount: €",b.maxDiscount]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:["Code: ",b.code]}),b.expireDate&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Expires: ",new Date(b.expireDate).toLocaleDateString()]}),b.limitForSameUser>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Limit: ",b.limitForSameUser," uses"]})]})]}),e.jsx("div",{className:"mt-2 text-xs text-green-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to use this coupon code"})]},b.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No coupons available"}),e.jsx("div",{className:"text-gray-400 text-xs mt-2",children:"Create coupons in the Coupons section"}),e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("p",{className:"text-xs text-yellow-800 font-medium",children:"Debug Info:"}),e.jsxs("p",{className:"text-xs text-yellow-700",children:["Available coupons count: ",jt.length]}),e.jsxs("p",{className:"text-xs text-yellow-700",children:["Loading state: ",Vt?"true":"false"]})]})]})]})]}),Na==="discountAmount"&&e.jsx("div",{className:"w-80",children:e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsx("div",{className:"keyboard-container w-full",onClick:b=>b.stopPropagation(),onMouseDown:b=>b.preventDefault(),children:e.jsx(Dx,{keyboardRef:b=>window.keyboard=b,input:Dr,onChange:Qo,onKeyPress:Xr,theme:"hg-theme-default",layoutName:"numeric",layout:{numeric:["1 2 3","4 5 6","7 8 9","0 {bksp}"]},display:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0","{bksp}":"⌫"},physicalKeyboardHighlight:!0,physicalKeyboardHighlightTextColor:"#000000",physicalKeyboardHighlightBgColor:"#fff475"})})})})]})]})})})]})}),Fo&&e.jsx(Qg,{isOpen:Fo,onClose:()=>{$t&&$a&&Ul&&(fn(!1),qi(!1)),Ar(!1)},selectedPaymentMethod:Li,setSelectedPaymentMethod:Bi,paymentAmount:Ui,setPaymentAmount:mr,givenAmount:Gu,setGivenAmount:hr,changeAmount:Qc,setChangeAmount:ea,currencyAmount:Uo,setCurrencyAmount:ri,selectedCurrency:Bo,setSelectedCurrency:Tn,currencyOptions:ic,addedPayments:Lo,setAddedPayments:ja,isSinglePayMode:Ys,selectedSplitBill:Gt,selectedPlacedOrder:kt,cartItems:gt,foodDetails:B,appliedCoupon:zt,removeAppliedCoupon:Kl,couponCode:ot,setCouponCode:ht,availableCoupons:jt,couponsLoading:Vt,discountType:js,setDiscountType:Ot,discountAmount:ns,setDiscountAmount:xs,sendSMS:tr,setSendSMS:qr,handleCashGivenAmountChange:Sd,handleCashAmountChange:rc,handleNumericInputFocus:Qi,handleNumericKeyboardChange:Qo,handleNumericKeyboardKeyPress:Xr,handleAddPayment:Nd,handleApplyManualDiscount:Yl,handleApplyCoupon:Wi,handleAnyInputFocus:xa,handleAnyInputClick:ia,handleCustomInputBlur:Ln,calculateSinglePayTotals:yr,calculateSplitBillTotal:Va,calculateCartTotal:Tr,calculateSplitBillSubtotal:oc,calculateSplitBillTax:lc,calculateSplitBillDiscount:sl,calculateSplitBillCharge:kd,calculateSplitBillTips:cc,calculateCartSubtotal:pr,calculateCartTax:Er,calculateCartDiscount:rr,calculateDueAmount:wd,getCurrencySymbol:Or,numericActiveInput:Na,numericKeyboardInput:Dr,setNumericActiveInput:Wr,setNumericKeyboardInput:Ta,setShowCartDetailsModal:Mn,splitBillToRemove:si,setSplitBills:Ja,setSplitBillToRemove:Oi,placedOrders:Ri,selectedCustomer:R,selectedOrderType:Rt,selectedTable:st,handlePlaceOrder:el,showError:n,showSuccess:r,setIsInvoiceAfterPayment:Fi,setShowInvoiceModal:Ii,clearCart:Ts,resetFinalizeSaleModal:Cd,setIsSinglePayMode:Rn,setSelectedPlacedOrder:En,setCurrentOrderForInvoice:un,isModifyingOrder:$t,modifyingOrderId:Wt,modifyingOrderPaymentInfo:$a,showPayLaterButton:In,setShowPayLaterButton:qi,hasResetPayment:Ul,setHasResetPayment:fn})]}),oe&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full transform transition-all duration-300 scale-100 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Delete Cart Items"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700 text-base leading-relaxed",children:["Are you sure you want to delete ",e.jsx("span",{className:"font-semibold text-red-600",children:gt.length})," item",gt.length!==1?"s":""," from your cart?"]}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"This will permanently remove all items and reset your order. You'll need to start over."})]}),gt.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Items to be deleted:"}),e.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[gt.slice(0,5).map((b,D)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 truncate flex-1",children:[D+1,". ",b.food?.name||"Unknown Food"]}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["Qty: ",b.quantity]})]},b.id)),gt.length>5&&e.jsxs("div",{className:"text-xs text-gray-400 text-center pt-2 border-t border-gray-200",children:["+",gt.length-5," more items"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50 rounded-b-2xl",children:[e.jsx("button",{onClick:()=>je(!1),className:"px-6 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200",children:"Cancel"}),e.jsxs("button",{onClick:()=>{Ts(),je(!1)},className:"px-6 py-2.5 text-white bg-red-600 rounded-lg font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete All Items"]})]})]})}),e.jsx(Ci,{isVisible:t.isVisible,message:t.message,type:t.type,position:t.position,duration:t.duration,onClose:c}),Ll&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Cart Details"}),e.jsx("button",{onClick:()=>Mn(!1),className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-3",children:[Ys&&kt&&kt.items&&kt.items.length>0&&e.jsxs("div",{className:"border-b border-gray-200 pb-3 mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Order Items:"}),e.jsx("div",{className:"space-y-2",children:kt.items.map((b,D)=>e.jsxs("div",{className:"flex justify-between items-start text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:b.food?.name||"Unknown Item"}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["x",b.quantity||0]})]}),b.variations&&Object.keys(b.variations).length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Object.entries(b.variations).map(([K,he])=>{const we=B?.variations?.find(Je=>Je.id===parseInt(K)),be=we?.name||K,Be=Array.isArray(he)?he:[he];return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-gray-500",children:["• ",be,":"]}),e.jsx("span",{className:"text-gray-700",children:Be.map((Je,pt)=>{const Mt=we?.options?.find(Pt=>Pt.id===parseInt(Je));return e.jsxs("span",{children:[Mt?.option_name||Je,pt<Be.length-1?", ":""]},Je)})})]},K)})}),b.adons&&b.adons.length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:b.adons.map((K,he)=>{const we=B?.adons?.find(Je=>Je.id===parseInt(K)),be=we?.name||K,Be=we?.price;return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"• Addon:"}),e.jsx("span",{className:"text-gray-700",children:be}),Be&&e.jsxs("span",{className:"text-gray-500",children:["(+€",Be.toFixed(2),")"]})]},he)})})]}),e.jsxs("span",{className:"text-gray-800 font-medium",children:["€",(parseFloat(b.totalPrice)||0).toFixed(2)]})]},D))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Item:"}),e.jsx("span",{className:"font-semibold",children:Ys?(gt.length>0?gt:kt?.items||[]).reduce((b,D)=>b+(parseInt(D.quantity)||0),0):Gt?Gt.items.reduce((b,D)=>b+(D.quantity||0),0):gt.reduce((b,D)=>b+(D.quantity||0),0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Sub Total:"}),e.jsxs("span",{className:"font-semibold",children:[Or(),Ys?yr().subtotal.toFixed(2):Gt?oc().toFixed(2):pr().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Discount:"}),e.jsxs("span",{className:"font-semibold",children:[Or(),Ys?yr().discount.toFixed(2):Gt?sl().toFixed(2):rr().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Discount:"}),e.jsxs("span",{className:"font-semibold",children:[Or(),Ys?yr().discount.toFixed(2):Gt?sl().toFixed(2):rr().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tax:"}),e.jsxs("span",{className:"font-semibold",children:[Or(),Ys?yr().tax.toFixed(2):Gt?lc().toFixed(2):Er().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Charge:"}),e.jsxs("span",{className:"font-semibold",children:[Or(),Ys?"0.00":Gt?kd().toFixed(2):Xn.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tips:"}),e.jsxs("span",{className:"font-semibold",children:[Or(),Ys?"0.00":Gt?cc().toFixed(2):Do.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-3",children:[e.jsx("span",{className:"text-gray-800 font-semibold",children:"Total Payable:"}),e.jsxs("span",{className:"font-bold text-lg",children:[Or(),Ys?yr().total.toFixed(2):Gt?Va().toFixed(2):Tr().toFixed(2)]})]})]})})]})}),Jc&&kt&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Cancel Order"}),e.jsx("button",{onClick:()=>{fr(!1),On("")},className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Cancel Order #",kt.orderNumber,"?"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This action will cancel the order. Please provide a reason for cancellation (optional)."}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cancellation Reason"}),e.jsx("textarea",{value:Hi,onChange:b=>On(b.target.value),placeholder:"Enter reason for cancellation...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none resize-none",rows:"3"})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:()=>{fr(!1),On("")},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Close"}),e.jsx("button",{onClick:()=>Ji(!0),disabled:!Hi.trim(),className:`flex-1 px-4 py-2 rounded-lg transition-colors ${Hi.trim()?"bg-primary text-white":"bg-primary text-white cursor-not-allowed"}`,children:"Cancel Order"})]})]})}),ni&&mn&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Convert Draft to Order"}),e.jsx("button",{onClick:()=>{Vi(!1),hn(null),ii("In Store"),wa(""),Kr(""),gr("")},className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Convert Draft #",mn.orderNumber,"?"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select the order type and details to convert this draft to a regular order."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Type"}),e.jsxs("select",{value:fa,onChange:async b=>{const D=b.target.value;if(ii(D),D==="Collection")try{console.log("Collection selected, opening schedule modal..."),await eo()}catch(K){console.error("Error opening schedule modal:",K)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[g("instore")&&e.jsx("option",{value:"In Store",children:"In Store"}),g("collection")&&e.jsx("option",{value:"Collection",children:"Collection"}),g("delivery")&&e.jsx("option",{value:"Delivery",children:"Delivery"}),g("table")&&e.jsx("option",{value:"Table",children:"Table"})]})]}),fa==="Table"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Floor"}),e.jsxs("select",{value:ga,onChange:async b=>{const D=b.target.value;if(gr(D),wa(""),D)try{console.log("Fetching tables for floor ID:",D),await Ki(D)}catch(K){console.error("Error fetching tables for floor:",K)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select Floor"}),ie.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]})]}),ga&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Table"}),e.jsxs("select",{value:Ea,onChange:b=>wa(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select Table"}),(()=>{console.log("Debug table filtering:",{conversionFloor:ga,conversionFloorType:typeof ga,tablesCount:Re.length,tables:Re.map(D=>({id:D.id,floor_id:D.floor_id,floor_id_type:typeof D.floor_id,status:D.status,table_no:D.table_no}))});const b=Re.filter(D=>{const K=D.floor_id.toString()===ga.toString(),he=D.status==="Free";return console.log(`Table ${D.table_no}: floor_id=${D.floor_id} (${typeof D.floor_id}), conversionFloor=${ga} (${typeof ga}), matchesFloor=${K}, isFree=${he}`),K&&he});return console.log("Filtered tables:",b),b.map(D=>e.jsxs("option",{value:D.id,children:["Table ",D.table_no," (",D.seat_capacity," seats)"]},D.id))})()]})]}),Ea&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Persons"}),e.jsx("input",{type:"number",value:na,onChange:b=>Kr(b.target.value),min:"1",max:"20",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter number of persons"})]})]})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:()=>{Vi(!1),hn(null),ii("In Store"),wa(""),Kr(""),gr("")},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:hm,disabled:fa==="Table"&&(!ga||!Ea||!na),className:`flex-1 px-4 py-2 rounded-lg transition-colors ${fa==="Table"&&(!ga||!Ea||!na)?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-primary text-white hover:bg-primary-dark"}`,children:"Convert to Order"})]})]})}),e.jsx(zv,{isOpen:er,onClose:()=>ur(!1),order:ha,onStatusUpdate:vm,onRiderAssignment:()=>{ur(!1),$o(!0)},selectedStatus:Bs,onStatusChange:ai}),e.jsx(Tx,{isOpen:$i,onClose:()=>{$o(!1)},onBack:()=>{$o(!1),ur(!0)},order:ha,onAssignRider:async b=>{try{return r(`Rider ${b.name} assigned to order successfully!`),ai("On the way"),$o(!1),ur(!0),!0}catch(D){return console.error("Error assigning rider:",D),n("Failed to assign rider. Please try again."),!1}},onStatusUpdate:()=>{}}),e.jsx(zC,{isOpen:im,onClose:()=>ec(!1),order:kt,onCreateInvoice:bm,foodDetails:B}),e.jsx(Nh,{isOpen:Wc,onClose:()=>{Ii(!1),Fi(!1)},order:kt,onPrint:Ad,foodDetails:B,paymentStatus:"PAID"}),e.jsx(Nh,{isOpen:zi,onClose:()=>Io(!1),order:Xc,onPrint:()=>{window.print(),Io(!1)},foodDetails:B,isKitchen:!0,paymentStatus:"UNPAID"}),e.jsx(Nh,{isOpen:zo,onClose:()=>Po(!1),order:Xc,onPrint:()=>{window.print(),Po(!1)},foodDetails:B,isEmployee:!0,paymentStatus:"UNPAID"}),e.jsx(BC,{isOpen:qu,onClose:()=>Ku(!1),onSubmit:b=>{dm(b)}}),e.jsx(LC,{isOpen:ti,onClose:()=>Kc(!1),currentDraftOrders:zl,onEditDraft:b=>{console.log("Editing draft:",b),b.items&&b.items.length>0&&Tt(b.items),b.customer&&M(b.customer),b.orderType&&Ks(b.orderType),Ti(D=>D.filter(K=>K.id!==b.id)),Kc(!1)},onDeleteDraft:mm,onDeleteAllDrafts:xd}),e.jsx(UC,{isOpen:$u,onClose:()=>Tl(!1),hotelInfo:Di,selectedScheduleDate:Ml,selectedScheduleTime:Hu,availableTimeSlots:af,useCustomTime:Vc,customTime:Ei,onDateChange:mc,onTimeSelect:wm,onCustomTimeChange:Nm,onUseCustomTimeChange:b=>{Il(b),b?To(""):Rl("")},onConfirm:so,onCancel:Sm}),e.jsx(Xa,{isVisible:Ho,onClose:()=>ed(),activeInput:Gr,onInputChange:(b,D)=>{Xi(D,b)},onInputBlur:ar,inputValue:Gl(Gr)}),Fo&&e.jsx(Qg,{isOpen:Fo,onClose:()=>Ar(!1),selectedPaymentMethod:Li,setSelectedPaymentMethod:Bi,paymentAmount:Ui,setPaymentAmount:mr,givenAmount:Gu,setGivenAmount:hr,changeAmount:Qc,setChangeAmount:ea,currencyAmount:Uo,setCurrencyAmount:ri,selectedCurrency:Bo,setSelectedCurrency:Tn,currencyOptions:ic,addedPayments:Lo,setAddedPayments:ja,isSinglePayMode:Ys,selectedSplitBill:Gt,selectedPlacedOrder:kt,cartItems:gt,foodDetails:B,appliedCoupon:zt,removeAppliedCoupon:Kl,couponCode:ot,setCouponCode:ht,availableCoupons:jt,couponsLoading:Vt,discountType:js,setDiscountType:Ot,discountAmount:ns,setDiscountAmount:xs,sendSMS:tr,setSendSMS:qr,handleCashGivenAmountChange:Sd,handleCashAmountChange:rc,handleNumericInputFocus:Qi,handleNumericKeyboardChange:Qo,handleNumericKeyboardKeyPress:Xr,handleAddPayment:Nd,handleApplyManualDiscount:Yl,handleApplyCoupon:Wi,handleAnyInputFocus:xa,handleAnyInputClick:ia,handleCustomInputBlur:Ln,calculateSinglePayTotals:yr,calculateSplitBillTotal:Va,calculateCartTotal:Tr,calculateSplitBillSubtotal:oc,calculateSplitBillTax:lc,calculateSplitBillDiscount:sl,calculateSplitBillCharge:kd,calculateSplitBillTips:cc,calculateCartSubtotal:pr,calculateCartTax:Er,calculateCartDiscount:rr,calculateDueAmount:wd,getCurrencySymbol:Or,numericActiveInput:Na,numericKeyboardInput:Dr,setNumericActiveInput:Wr,setNumericKeyboardInput:Ta,setShowCartDetailsModal:Mn,splitBillToRemove:si,setSplitBills:Ja,setSplitBillToRemove:Oi,placedOrders:Ri,selectedCustomer:R,selectedOrderType:Rt,selectedTable:st,handlePlaceOrder:el,showError:n,showSuccess:r,setIsInvoiceAfterPayment:Fi,setShowInvoiceModal:Ii,clearCart:Ts,resetFinalizeSaleModal:Cd,setIsSinglePayMode:Rn,setSelectedPlacedOrder:En,setCurrentOrderForInvoice:un,isModifyingOrder:$t,modifyingOrderId:Wt,modifyingOrderPaymentInfo:$a,showPayLaterButton:In,setShowPayLaterButton:qi,hasResetPayment:Ul,setHasResetPayment:fn})]})},ZC=()=>{const[s,t]=v.useState(new Date),r=ya(),n=nn(),{themeColors:o,changeTheme:c}=Ur(),d=()=>localStorage.getItem("currentEmployee")!==null,m=()=>n.pathname==="/login"||n.pathname==="/";v.useEffect(()=>{const _=()=>{t(new Date)};_();const E=setInterval(_,6e4);return()=>clearInterval(E)},[]);const h=()=>{window.windowControls?.minimize()},g=async()=>{try{const _=localStorage.getItem("currentEmployee");if(_){const E=JSON.parse(_);E.id&&(window.handleEmployeeLogout?await window.handleEmployeeLogout(E.id):await window.myAPI?.updateEmployeeLogout(E.id))}localStorage.removeItem("currentEmployee"),sessionStorage.clear(),r("/login")}catch(_){console.error("Error during logout:",_),localStorage.removeItem("currentEmployee"),sessionStorage.clear(),r("/login")}},y=_=>_.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),w=_=>_.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),S=_=>_.toLocaleDateString("en-US",{weekday:"long"});return e.jsxs("div",{className:"fixed top-0 left-0 right-0 h-11 z-50 flex items-center justify-between px-4 select-none title-bar",style:{backgroundColor:o.primary,borderBottom:`1px solid ${o.primaryLight}`},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[m()?e.jsx("span",{className:"text-white text-sm font-semibold",children:"POS System"}):d()?e.jsx("button",{onClick:g,className:"w-8 h-8 cursor-pointer flex items-center justify-center text-white hover:bg-white/15 transition-colors duration-200 rounded-lg",style:{border:"1px solid rgba(255,255,255,0.35)",backgroundColor:"transparent"},title:"Logout",children:e.jsx(zc,{className:"w-5 h-5"})}):e.jsx("span",{className:"text-white text-sm font-semibold",children:"POS System"}),!m()&&e.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("openDashboardMenu")),className:"w-8 h-8 cursor-pointer flex items-center justify-center text-white hover:bg-white/15 transition-colors duration-200 rounded-lg",style:{border:"1px solid rgba(255,255,255,0.35)",backgroundColor:"transparent"},title:"Menu",children:e.jsx(Xb,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-4 h-4 relative mr-2",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-4 h-4 stroke-white stroke-2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"white",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M12 6v6l4 2",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("span",{className:"text-white text-md font-bold",children:y(s)}),e.jsx("span",{className:"text-white text-sm font-semibold",children:w(s)}),e.jsx("span",{className:"text-white text-sm font-semibold",children:S(s)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-1 mr-2",children:[e.jsx("button",{onClick:()=>c("default"),className:"w-4 h-4 rounded-full border border-white cursor-pointer transform active:scale-95",style:{background:"linear-gradient(to bottom right, #003E5C, #1976d2)"},title:"Default Theme"}),e.jsx("button",{onClick:()=>c("blue"),className:"w-4 h-4 rounded-full border border-white cursor-pointer transform active:scale-95",style:{background:"linear-gradient(to bottom right, #176B87, #3498db)"},title:"Blue Theme"}),e.jsx("button",{onClick:()=>c("green"),className:"w-4 h-4 rounded-full border border-white cursor-pointer transform active:scale-95",style:{background:"linear-gradient(to bottom right, #25A18E, #34A0A4)"},title:"Green Theme"}),e.jsx("button",{onClick:()=>c("black"),className:"w-4 h-4 rounded-full border border-white cursor-pointer transform active:scale-95",style:{background:"linear-gradient(to bottom right, #1a1a1a, #333333)"},title:"Black Theme"})]}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx("button",{onClick:h,className:"w-9 h-9 flex items-center justify-center text-white hover:bg-white/15 transition-colors duration-200 rounded-lg",style:{border:"1px solid rgba(255,255,255,0.35)",backgroundColor:"transparent"},title:"Minimize",children:e.jsx(Vg,{className:"w-4 h-4"})})})]})]})};function JC(){console.log("App component rendering...");const{themeColors:s}=Ur();return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:s.dashboardBackground},children:[e.jsx(ZC,{}),e.jsxs("div",{className:"pt-8",children:[" ",e.jsx(bv,{})]})]})}const e3=()=>{const[s,t]=v.useState(!0),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState(null),h=ya(),g=async()=>{try{t(!0),m(null);const w=await window.myAPI.checkHotelTable();if(!w.success)throw new Error("Failed to check hotel table");if(!w.tableExists||!w.hasData){console.log("No hotel record found, redirecting to license screen"),n(!1),h("/license");return}const S=await window.myAPI.checkHotelStatus();if(!S.success)throw new Error(S.message||"Failed to check hotel status");n(S.isLicensed),c(S),S.isLicensed?console.log("Hotel is licensed, staying on current page"):(console.log("Hotel not licensed, redirecting to license screen"),h("/license"))}catch(w){console.error("Error checking hotel status:",w),m(w.message),h("/license")}finally{t(!1)}};return v.useEffect(()=>{g()},[]),{isLoading:s,isLicensed:r,hotelInfo:o,error:d,refreshStatus:()=>{g()}}},t3=()=>{const s=ya(),{themeColors:t}=Ur(),[r,n]=v.useState(new Date),[o,c]=v.useState(!1),{isLoading:d,isLicensed:m,error:h}=e3(),[g,y]=v.useState(!1),[w,S]=v.useState(0),[_,E]=v.useState(""),[z,I]=v.useState("");v.useEffect(()=>{const ee=()=>{n(new Date)};ee();const oe=setInterval(ee,6e4);return()=>clearInterval(oe)},[]);const U=ee=>ee.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),q=ee=>ee.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),O=()=>{s("/login")},R=async(ee,oe,je,de)=>{try{const re=new FormData;re.append("file",ee),re.append("license",oe),re.append("adminName",je),re.append("hotelUsername",de);const De=await(await fetch("http://127.0.0.1:8080/api/v1/upload/database",{method:"POST",body:re})).json();return De.status==="ok"?(console.log("Upload successful:",De.filePath),{success:!0,data:De}):De.status==="inactive"?(console.log("License expired:",De.message),{success:!1,error:"LICENSE_EXPIRED",message:De.message}):(console.log("Upload failed:",De.message),{success:!1,error:"UPLOAD_FAILED",message:De.message})}catch(re){return console.error("Network error:",re),{success:!1,error:"NETWORK_ERROR",message:re.message}}},M=async()=>{try{if(y(!0),S(0),E("uploading"),I("Preparing database backup..."),!(await window.myAPI.getHotelInfo()).success)throw new Error("Failed to get hotel information");const oe=setInterval(()=>{S(ne=>ne>=90?(clearInterval(oe),90):ne+10)},200),je=await window.myAPI.getDatabasePath();if(!je.success)throw new Error("Failed to get database path");I("Uploading database to server...");const de=await fetch(`local-file://${je.path}`);if(!de.ok)throw new Error("Failed to read database file");const re=await de.blob(),Te=new File([re],"pos.db",{type:"application/x-sqlite3"}),De=await R(Te,"QgtXF2TwCu03gKIwZJbO","saqib","miday");clearInterval(oe),S(100),De.success?(E("success"),I("Database uploaded successfully! Closing application..."),setTimeout(()=>{window.loginWindowControls?.close()},2e3)):(E("error"),I(De.message||"Upload failed"),setTimeout(()=>{window.loginWindowControls?.close()},3e3))}catch(ee){console.error("Error during upload:",ee),E("error"),I(ee.message||"Upload failed"),setTimeout(()=>{window.loginWindowControls?.close()},3e3)}},P=[{icon:TN,title:"Smart Ordering",description:"Streamlined order management"},{icon:Ni,title:"Kitchen Display",description:"Real-time kitchen coordination"},{icon:sn,title:"Customer Care",description:"Enhanced customer experience"},{icon:$s,title:"24/7 Support",description:"Always ready to serve"}];return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center relative overflow-hidden",style:{backgroundColor:t.dashboardBackground},children:[e.jsx("button",{onClick:M,disabled:g,className:`absolute top-4 right-4 w-8 h-8 flex items-center justify-center transition-colors duration-200 rounded-full border z-50 ${g?"text-gray-400 cursor-not-allowed border-gray-200":"text-gray-600 hover:text-red-600 hover:bg-red-50 border-gray-300 hover:border-red-300"}`,title:g?"Uploading database...":"Close Application",children:g?e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):e.jsx(Nt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 rounded-full",style:{backgroundColor:t.primary}}),e.jsx("div",{className:"absolute top-40 right-32 w-24 h-24 rounded-full",style:{backgroundColor:t.primaryLight}}),e.jsx("div",{className:"absolute bottom-32 left-32 w-28 h-28 rounded-full",style:{backgroundColor:t.primary}}),e.jsx("div",{className:"absolute bottom-20 right-20 w-20 h-20 rounded-full",style:{backgroundColor:t.primaryLight}})]}),e.jsxs("div",{className:"relative z-10 text-center px-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-4 transform hover:scale-105 transition-transform duration-300",children:[e.jsxs("div",{className:"w-32 h-32 mx-auto rounded-3xl border-4 flex flex-col items-center justify-center mb-6 shadow-2xl",style:{backgroundColor:t.primary,borderColor:t.primaryLight,boxShadow:`0 20px 40px rgba(0, 0, 0, 0.1), 0 0 0 1px ${t.primaryLight}20`},children:[e.jsx("span",{className:"text-white font-bold text-6xl mb-1",children:"G"}),e.jsx("span",{className:"text-white font-medium text-xl",children:"POS"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(jo,{className:"absolute -top-4 -left-4 w-6 h-6 animate-pulse",style:{color:t.primaryLight}}),e.jsx(jo,{className:"absolute -top-4 -right-4 w-6 h-6 animate-pulse",style:{color:t.primaryLight}}),e.jsx(jo,{className:"absolute -bottom-4 -left-4 w-6 h-6 animate-pulse",style:{color:t.primaryLight}}),e.jsx(jo,{className:"absolute -bottom-4 -right-4 w-6 h-6 animate-pulse",style:{color:t.primaryLight}})]})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"Welcome to GPOS"}),e.jsx("p",{className:"text-xl text-gray-600 mb-2 font-medium",children:"Smart & Simplified Point of Sale"}),e.jsx("p",{className:"text-gray-500 max-w-2xl mx-auto",children:"Experience the future of restaurant management with our comprehensive POS solution. From order processing to kitchen coordination, we've got everything covered."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8 max-w-3xl mx-auto",children:P.map((ee,oe)=>{const je=ee.icon;return e.jsxs("div",{className:"p-4 rounded-xl text-center transform hover:scale-105 transition-all duration-300",style:{backgroundColor:"white",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",border:`1px solid ${t.primaryExtraLight}`},children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-lg flex items-center justify-center",style:{backgroundColor:t.primaryExtraLight},children:e.jsx(je,{className:"w-6 h-6",style:{color:t.primary}})}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:ee.title}),e.jsx("p",{className:"text-sm text-gray-500",children:ee.description})]},oe)})}),e.jsx("div",{className:"mb-4 flex flex-col sm:flex-row gap-4 justify-center",children:d?e.jsxs("div",{className:"flex items-center justify-center gap-3 px-8 py-4 rounded-2xl bg-gray-100",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-gray-600 font-medium",children:"Checking License Status..."})]}):h?e.jsx("div",{className:"flex items-center justify-center gap-3 px-8 py-4 rounded-2xl bg-red-50 border border-red-200",children:e.jsxs("span",{className:"text-red-600 font-medium",children:["Error: ",h]})}):m?e.jsx("button",{onClick:O,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),className:"group relative px-8 py-4 rounded-2xl cursor-pointer font-semibold text-lg transition-all duration-300 transform shadow-sm hover:scale-105",style:{backgroundColor:t.primary,color:"white",boxShadow:`0 8px 25px ${t.primary}40`},children:e.jsxs("span",{className:"flex items-center gap-3",children:["Go to Login Screen",e.jsx(oN,{className:`w-5 h-5 transition-transform duration-300 ${o?"translate-x-1":""}`})]})}):null}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"inline-flex items-center gap-3 px-6 py-3 rounded-full",style:{backgroundColor:"white",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:t.primary},children:U(r)}),e.jsx("div",{className:"text-sm text-gray-500",children:q(r)})]})})})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl",style:{border:`2px solid ${t.primary}`},children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mb-6",children:[_==="uploading"&&e.jsx("div",{className:"w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4",style:{backgroundColor:t.primaryExtraLight},children:e.jsx(hx,{className:"w-8 h-8",style:{color:t.primary}})}),_==="success"&&e.jsx("div",{className:"w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4 bg-green-100",children:e.jsx(la,{className:"w-8 h-8 text-green-600"})}),_==="error"&&e.jsx("div",{className:"w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4 bg-red-100",children:e.jsx(lx,{className:"w-8 h-8 text-red-600"})})]}),e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:[_==="uploading"&&"Uploading Database",_==="success"&&"Upload Complete",_==="error"&&"Upload Failed"]}),e.jsx("p",{className:"text-gray-600 mb-6",children:z}),_==="uploading"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:e.jsx("div",{className:"h-3 rounded-full transition-all duration-300",style:{width:`${w}%`,backgroundColor:t.primary}})}),e.jsxs("p",{className:"text-sm text-gray-500",children:[w,"% Complete"]})]}),e.jsx("div",{className:"text-xs text-gray-400 mb-4",children:"Server: 127.0.0.1:8080"}),_==="success"&&e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Database backup saved successfully!"}),_==="error"&&e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Application will close anyway..."})]})})}),e.jsx("div",{className:"absolute top-10 right-10 opacity-20",children:e.jsx("div",{className:"w-4 h-4 rounded-full animate-bounce",style:{backgroundColor:t.primary}})}),e.jsx("div",{className:"absolute bottom-10 left-10 opacity-20",children:e.jsx("div",{className:"w-6 h-6 rounded-full animate-bounce",style:{backgroundColor:t.primaryLight}})})]})},s3=()=>{const s=ya(),{themeColors:t}=Ur(),[r,n]=v.useState(""),[o,c]=v.useState(!1),[d,m]=v.useState(null),[h,g]=v.useState(null),[y,w]=v.useState(""),[S,_]=v.useState("checking"),E=()=>{console.log("Back to Welcome clicked, navigating to /"),s("/")},z=async()=>{try{_("checking");const O=await fetch("http://127.0.0.1:8080/api/v1/check/license/test",{method:"GET",signal:AbortSignal.timeout(5e3)});console.log("Network check - Status:",O.status),console.log("Network check - Headers:",O.headers),_("online")}catch(O){console.log("Network check failed:",O),_("offline")}},I=async O=>{try{_("checking");const R=await fetch(`http://127.0.0.1:8080/api/v1/check/license/${O}`,{signal:AbortSignal.timeout(1e4)});console.log("Response status:",R.status),console.log("Response headers:",R.headers);const M=R.headers.get("content-type");if(!M||!M.includes("application/json")){const ee=await R.text();return console.log("Non-JSON response:",ee),g({status:"error",message:"Server returned non-JSON response",rawResponse:ee,statusCode:R.status}),_("online"),{success:!1,error:"INVALID_RESPONSE",message:`Server returned ${R.status}: ${ee.substring(0,100)}...`}}const P=await R.json();return console.log("API Response:",P),g(P),_("online"),P.status==="ok"?{success:!0,hotel:P.hotel,isActive:P.hotel.status,isExpired:new Date(P.hotel.validUntil)<new Date}:{success:!1,error:"INVALID_LICENSE",message:P.message}}catch(R){return console.error("License verification error:",R),_("offline"),g({status:"error",message:"Network or parsing error",error:R.message,type:R.name}),{success:!1,error:"NETWORK_ERROR",message:R.message}}},U=async()=>{if(r.trim()){c(!0),g(null),w("");try{const O=await I(r);if(O.success)if(O.isActive&&!O.isExpired){if(!(await window.myAPI.checkHotelTable()).success)throw new Error("Failed to check hotel table");const M={name:O.hotel.hotelName||"GPOS Restaurant",status:90500,active:!0,isDelete:!1,isSyncronized:!1},P=await window.myAPI.createOrUpdateHotel(M);if(!P.success)throw new Error(P.message||"Failed to update hotel status");m(!0),c(!1),setTimeout(()=>{s("/")},3e3)}else m(!1),c(!1),w(O.isExpired?"License has expired":"License is inactive");else m(!1),c(!1),w(O.message||"Invalid license key")}catch(O){console.error("Error validating license:",O),m(!1),c(!1),w(O.message)}}},q=O=>{O.key==="Enter"&&U()};return v.useEffect(()=>{z()},[]),e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center relative overflow-hidden",style:{backgroundColor:t.dashboardBackground},children:[e.jsx("button",{onClick:()=>window.loginWindowControls?.close(),className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center text-gray-600 hover:text-red-600 hover:bg-red-50 transition-colors duration-200 rounded-full border border-gray-300 hover:border-red-300 z-50",title:"Close Application",children:e.jsx(Nt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 rounded-full",style:{backgroundColor:t.primary}}),e.jsx("div",{className:"absolute top-40 right-32 w-24 h-24 rounded-full",style:{backgroundColor:t.primaryLight}}),e.jsx("div",{className:"absolute bottom-32 left-32 w-28 h-28 rounded-full",style:{backgroundColor:t.primary}}),e.jsx("div",{className:"absolute bottom-20 right-20 w-20 h-20 rounded-full",style:{backgroundColor:t.primaryLight}})]}),e.jsxs("div",{className:"relative z-10 text-center px-6 max-w-md mx-auto",children:[e.jsxs("button",{onClick:E,className:"mb-8 flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors duration-200 hover:scale-105 mx-auto px-4 py-2 rounded-lg hover:bg-gray-100 active:scale-95",children:[e.jsx(zc,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Back to Welcome"})]}),e.jsxs("div",{className:"mb-8 transform hover:scale-105 transition-transform duration-300",children:[e.jsx("div",{className:"w-24 h-24 mx-auto rounded-2xl border-4 flex items-center justify-center mb-6 shadow-2xl",style:{backgroundColor:t.primary,borderColor:t.primaryLight,boxShadow:`0 20px 40px rgba(0, 0, 0, 0.1), 0 0 0 1px ${t.primaryLight}20`},children:e.jsx(Gb,{className:"w-12 h-12 text-white"})}),e.jsxs("div",{className:"relative",children:[e.jsx(jo,{className:"absolute -top-2 -left-2 w-4 h-4 animate-pulse",style:{color:t.primaryLight}}),e.jsx(jo,{className:"absolute -top-2 -right-2 w-4 h-4 animate-pulse",style:{color:t.primaryLight}}),e.jsx(jo,{className:"absolute -bottom-2 -left-2 w-4 h-4 animate-pulse",style:{color:t.primaryLight}}),e.jsx(jo,{className:"absolute -bottom-2 -right-2 w-4 h-4 animate-pulse",style:{color:t.primaryLight}})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"License Verification"}),e.jsx("p",{className:"text-gray-600 mb-2 font-medium",children:"Enter your license key to continue"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Please provide your valid license key to access GPOS"}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[S==="checking"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm text-blue-600",children:"Checking server connection..."})]}),S==="online"&&e.jsxs(e.Fragment,{children:[e.jsx(s2,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-600",children:"Server connected"})]}),S==="offline"&&e.jsxs(e.Fragment,{children:[e.jsx(e2,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-sm text-red-600",children:"Server offline"})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:r,onChange:O=>n(O.target.value),onKeyPress:q,placeholder:"Enter your license key...",className:`w-full px-4 py-4 rounded-xl border-2 transition-all duration-300 focus:outline-none focus:ring-4 text-center font-mono text-lg ${d===null?"border-gray-300 focus:border-blue-500 focus:ring-blue-100":d?"border-green-500 focus:border-green-500 focus:ring-green-100":"border-red-500 focus:border-red-500 focus:ring-red-100"}`,style:{backgroundColor:"white",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"}}),d!==null&&e.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:d?e.jsx(la,{className:"w-6 h-6 text-green-500"}):e.jsx(Nt,{className:"w-6 h-6 text-red-500"})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:U,disabled:!r.trim()||o,className:`group relative w-full px-8 py-4 rounded-xl cursor-pointer font-semibold text-lg transition-all duration-300 transform shadow-sm ${!r.trim()||o?"opacity-50 cursor-not-allowed":"hover:scale-105"}`,style:{backgroundColor:t.primary,color:"white",boxShadow:`0 8px 25px ${t.primary}40`},children:[o?e.jsxs("span",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Validating License..."]}):e.jsxs("span",{className:"flex items-center justify-center gap-3",children:[e.jsx(vl,{className:"w-5 h-5"}),"Validate License"]}),e.jsx("div",{className:`absolute inset-0 rounded-xl transition-opacity duration-300 ${!r.trim()||o?"opacity-0":"opacity-0 hover:opacity-100"}`,style:{background:`linear-gradient(45deg, ${t.primary}, ${t.primaryLight})`,filter:"blur(5px)",zIndex:-1}})]}),e.jsxs("div",{className:"mt-3 text-center space-y-2",children:[e.jsx("button",{onClick:()=>n("ABC123XYZ789DEF456GHI"),className:"text-sm text-gray-500 hover:text-gray-700 underline block",children:"Use Test License Key"}),e.jsx("button",{onClick:async()=>{try{const O=await fetch("http://127.0.0.1:8080/api/v1/check/license/test"),R=await O.text();console.log("Test endpoint response:",R),g({status:"test",message:"Test endpoint response",rawResponse:R,statusCode:O.status})}catch(O){console.error("Test endpoint error:",O),g({status:"error",message:"Test endpoint failed",error:O.message})}},className:"text-sm text-blue-500 hover:text-blue-700 underline block",children:"Test API Endpoint"})]})]}),d&&e.jsx("div",{className:"mb-6 p-4 rounded-xl bg-green-50 border border-green-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(la,{className:"w-6 h-6 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-800",children:"License Valid!"}),e.jsx("p",{className:"text-sm text-green-600",children:"Redirecting to login..."})]})]})}),d===!1&&e.jsx("div",{className:"mb-6 p-4 rounded-xl bg-red-50 border border-red-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Nt,{className:"w-6 h-6 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-800",children:"Invalid License"}),e.jsx("p",{className:"text-sm text-red-600",children:y||"Please check your license key and try again."})]})]})}),h&&e.jsxs("div",{className:"mb-6 p-4 rounded-xl bg-blue-50 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(qN,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-800",children:"API Response (Testing)"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Server: 127.0.0.1:8080"})]})]}),e.jsx("div",{className:"bg-white p-3 rounded-lg border",children:e.jsx("pre",{className:"text-xs text-gray-700 overflow-x-auto whitespace-pre-wrap",children:h.rawResponse?`Status: ${h.statusCode||"N/A"}

Raw Response:
${h.rawResponse}`:JSON.stringify(h,null,2)})}),h.status==="ok"&&h.hotel&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Hotel:"})," ",h.hotel.hotelName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Admin:"})," ",h.hotel.adminName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",h.hotel.adminEmail]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Phone:"})," ",h.hotel.adminPhone]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",new Date(h.hotel.validUntil).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-1 px-2 py-1 rounded text-xs ${h.hotel.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:h.hotel.status?"Active":"Inactive"})]})]})})]}),e.jsx("div",{className:"p-4 rounded-xl text-left",style:{backgroundColor:"white",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",border:`1px solid ${t.primaryExtraLight}`},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 mt-1",style:{backgroundColor:t.primaryExtraLight},children:e.jsx(vl,{className:"w-4 h-4",style:{color:t.primary}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"License Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your license key ensures you have access to all GPOS features and updates. Contact support if you need assistance with your license."})]})]})})]}),e.jsx("div",{className:"absolute top-10 right-10 opacity-20",children:e.jsx("div",{className:"w-4 h-4 rounded-full animate-bounce",style:{backgroundColor:t.primary}})}),e.jsx("div",{className:"absolute bottom-10 left-10 opacity-20",children:e.jsx("div",{className:"w-6 h-6 rounded-full animate-bounce",style:{backgroundColor:t.primaryLight}})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Iu(s){return s+.5|0}const wo=(s,t,r)=>Math.max(Math.min(s,r),t);function lu(s){return wo(Iu(s*2.55),0,255)}function Co(s){return wo(Iu(s*255),0,255)}function vi(s){return wo(Iu(s/2.55)/100,0,1)}function xy(s){return wo(Iu(s*100),0,100)}const Jr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Zg=[..."0123456789ABCDEF"],a3=s=>Zg[s&15],r3=s=>Zg[(s&240)>>4]+Zg[s&15],sh=s=>(s&240)>>4===(s&15),n3=s=>sh(s.r)&&sh(s.g)&&sh(s.b)&&sh(s.a);function i3(s){var t=s.length,r;return s[0]==="#"&&(t===4||t===5?r={r:255&Jr[s[1]]*17,g:255&Jr[s[2]]*17,b:255&Jr[s[3]]*17,a:t===5?Jr[s[4]]*17:255}:(t===7||t===9)&&(r={r:Jr[s[1]]<<4|Jr[s[2]],g:Jr[s[3]]<<4|Jr[s[4]],b:Jr[s[5]]<<4|Jr[s[6]],a:t===9?Jr[s[7]]<<4|Jr[s[8]]:255})),r}const o3=(s,t)=>s<255?t(s):"";function l3(s){var t=n3(s)?a3:r3;return s?"#"+t(s.r)+t(s.g)+t(s.b)+o3(s.a,t):void 0}const c3=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Lv(s,t,r){const n=t*Math.min(r,1-r),o=(c,d=(c+s/30)%12)=>r-n*Math.max(Math.min(d-3,9-d,1),-1);return[o(0),o(8),o(4)]}function d3(s,t,r){const n=(o,c=(o+s/60)%6)=>r-r*t*Math.max(Math.min(c,4-c,1),0);return[n(5),n(3),n(1)]}function u3(s,t,r){const n=Lv(s,1,.5);let o;for(t+r>1&&(o=1/(t+r),t*=o,r*=o),o=0;o<3;o++)n[o]*=1-t-r,n[o]+=t;return n}function m3(s,t,r,n,o){return s===o?(t-r)/n+(t<r?6:0):t===o?(r-s)/n+2:(s-t)/n+4}function Mx(s){const r=s.r/255,n=s.g/255,o=s.b/255,c=Math.max(r,n,o),d=Math.min(r,n,o),m=(c+d)/2;let h,g,y;return c!==d&&(y=c-d,g=m>.5?y/(2-c-d):y/(c+d),h=m3(r,n,o,y,c),h=h*60+.5),[h|0,g||0,m]}function Ox(s,t,r,n){return(Array.isArray(t)?s(t[0],t[1],t[2]):s(t,r,n)).map(Co)}function Rx(s,t,r){return Ox(Lv,s,t,r)}function h3(s,t,r){return Ox(u3,s,t,r)}function f3(s,t,r){return Ox(d3,s,t,r)}function Bv(s){return(s%360+360)%360}function g3(s){const t=c3.exec(s);let r=255,n;if(!t)return;t[5]!==n&&(r=t[6]?lu(+t[5]):Co(+t[5]));const o=Bv(+t[2]),c=+t[3]/100,d=+t[4]/100;return t[1]==="hwb"?n=h3(o,c,d):t[1]==="hsv"?n=f3(o,c,d):n=Rx(o,c,d),{r:n[0],g:n[1],b:n[2],a:r}}function x3(s,t){var r=Mx(s);r[0]=Bv(r[0]+t),r=Rx(r),s.r=r[0],s.g=r[1],s.b=r[2]}function p3(s){if(!s)return;const t=Mx(s),r=t[0],n=xy(t[1]),o=xy(t[2]);return s.a<255?`hsla(${r}, ${n}%, ${o}%, ${vi(s.a)})`:`hsl(${r}, ${n}%, ${o}%)`}const py={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},yy={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function y3(){const s={},t=Object.keys(yy),r=Object.keys(py);let n,o,c,d,m;for(n=0;n<t.length;n++){for(d=m=t[n],o=0;o<r.length;o++)c=r[o],m=m.replace(c,py[c]);c=parseInt(yy[d],16),s[m]=[c>>16&255,c>>8&255,c&255]}return s}let ah;function b3(s){ah||(ah=y3(),ah.transparent=[0,0,0,0]);const t=ah[s.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const v3=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function j3(s){const t=v3.exec(s);let r=255,n,o,c;if(t){if(t[7]!==n){const d=+t[7];r=t[8]?lu(d):wo(d*255,0,255)}return n=+t[1],o=+t[3],c=+t[5],n=255&(t[2]?lu(n):wo(n,0,255)),o=255&(t[4]?lu(o):wo(o,0,255)),c=255&(t[6]?lu(c):wo(c,0,255)),{r:n,g:o,b:c,a:r}}}function w3(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${vi(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const Ag=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,_c=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function N3(s,t,r){const n=_c(vi(s.r)),o=_c(vi(s.g)),c=_c(vi(s.b));return{r:Co(Ag(n+r*(_c(vi(t.r))-n))),g:Co(Ag(o+r*(_c(vi(t.g))-o))),b:Co(Ag(c+r*(_c(vi(t.b))-c))),a:s.a+r*(t.a-s.a)}}function rh(s,t,r){if(s){let n=Mx(s);n[t]=Math.max(0,Math.min(n[t]+n[t]*r,t===0?360:1)),n=Rx(n),s.r=n[0],s.g=n[1],s.b=n[2]}}function Uv(s,t){return s&&Object.assign(t||{},s)}function by(s){var t={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(t={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(t.a=Co(s[3]))):(t=Uv(s,{r:0,g:0,b:0,a:1}),t.a=Co(t.a)),t}function S3(s){return s.charAt(0)==="r"?j3(s):g3(s)}class Nu{constructor(t){if(t instanceof Nu)return t;const r=typeof t;let n;r==="object"?n=by(t):r==="string"&&(n=i3(t)||b3(t)||S3(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Uv(this._rgb);return t&&(t.a=vi(t.a)),t}set rgb(t){this._rgb=by(t)}rgbString(){return this._valid?w3(this._rgb):void 0}hexString(){return this._valid?l3(this._rgb):void 0}hslString(){return this._valid?p3(this._rgb):void 0}mix(t,r){if(t){const n=this.rgb,o=t.rgb;let c;const d=r===c?.5:r,m=2*d-1,h=n.a-o.a,g=((m*h===-1?m:(m+h)/(1+m*h))+1)/2;c=1-g,n.r=255&g*n.r+c*o.r+.5,n.g=255&g*n.g+c*o.g+.5,n.b=255&g*n.b+c*o.b+.5,n.a=d*n.a+(1-d)*o.a,this.rgb=n}return this}interpolate(t,r){return t&&(this._rgb=N3(this._rgb,t._rgb,r)),this}clone(){return new Nu(this.rgb)}alpha(t){return this._rgb.a=Co(t),this}clearer(t){const r=this._rgb;return r.a*=1-t,this}greyscale(){const t=this._rgb,r=Iu(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=r,this}opaquer(t){const r=this._rgb;return r.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return rh(this._rgb,2,t),this}darken(t){return rh(this._rgb,2,-t),this}saturate(t){return rh(this._rgb,1,t),this}desaturate(t){return rh(this._rgb,1,-t),this}rotate(t){return x3(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function xi(){}const C3=(()=>{let s=0;return()=>s++})();function Ns(s){return s==null}function ca(s){if(Array.isArray&&Array.isArray(s))return!0;const t=Object.prototype.toString.call(s);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function fs(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function Wa(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function Hn(s,t){return Wa(s)?s:t}function os(s,t){return typeof s>"u"?t:s}const k3=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/t,$v=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*t:+s;function Ps(s,t,r){if(s&&typeof s.call=="function")return s.apply(r,t)}function ks(s,t,r,n){let o,c,d;if(ca(s))for(c=s.length,o=0;o<c;o++)t.call(r,s[o],o);else if(fs(s))for(d=Object.keys(s),c=d.length,o=0;o<c;o++)t.call(r,s[d[o]],d[o])}function Mh(s,t){let r,n,o,c;if(!s||!t||s.length!==t.length)return!1;for(r=0,n=s.length;r<n;++r)if(o=s[r],c=t[r],o.datasetIndex!==c.datasetIndex||o.index!==c.index)return!1;return!0}function Oh(s){if(ca(s))return s.map(Oh);if(fs(s)){const t=Object.create(null),r=Object.keys(s),n=r.length;let o=0;for(;o<n;++o)t[r[o]]=Oh(s[r[o]]);return t}return s}function Hv(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function _3(s,t,r,n){if(!Hv(s))return;const o=t[s],c=r[s];fs(o)&&fs(c)?Su(o,c,n):t[s]=Oh(c)}function Su(s,t,r){const n=ca(t)?t:[t],o=n.length;if(!fs(s))return s;r=r||{};const c=r.merger||_3;let d;for(let m=0;m<o;++m){if(d=n[m],!fs(d))continue;const h=Object.keys(d);for(let g=0,y=h.length;g<y;++g)c(h[g],s,d,r)}return s}function hu(s,t){return Su(s,t,{merger:A3})}function A3(s,t,r){if(!Hv(s))return;const n=t[s],o=r[s];fs(n)&&fs(o)?hu(n,o):Object.prototype.hasOwnProperty.call(t,s)||(t[s]=Oh(o))}const vy={"":s=>s,x:s=>s.x,y:s=>s.y};function D3(s){const t=s.split("."),r=[];let n="";for(const o of t)n+=o,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function E3(s){const t=D3(s);return r=>{for(const n of t){if(n==="")break;r=r&&r[n]}return r}}function jl(s,t){return(vy[t]||(vy[t]=E3(t)))(s)}function Ix(s){return s.charAt(0).toUpperCase()+s.slice(1)}const Cu=s=>typeof s<"u",Ao=s=>typeof s=="function",jy=(s,t)=>{if(s.size!==t.size)return!1;for(const r of s)if(!t.has(r))return!1;return!0};function T3(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const _s=Math.PI,Hs=2*_s,M3=Hs+_s,Rh=Number.POSITIVE_INFINITY,O3=_s/180,pa=_s/2,ll=_s/4,wy=_s*2/3,Vv=Math.log10,Yn=Math.sign;function fu(s,t,r){return Math.abs(s-t)<r}function Ny(s){const t=Math.round(s);s=fu(s,t,s/1e3)?t:s;const r=Math.pow(10,Math.floor(Vv(s))),n=s/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function R3(s){const t=[],r=Math.sqrt(s);let n;for(n=1;n<r;n++)s%n===0&&(t.push(n),t.push(s/n));return r===(r|0)&&t.push(r),t.sort((o,c)=>o-c).pop(),t}function I3(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function ku(s){return!I3(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function z3(s,t){const r=Math.round(s);return r-t<=s&&r+t>=s}function P3(s,t,r){let n,o,c;for(n=0,o=s.length;n<o;n++)c=s[n][r],isNaN(c)||(t.min=Math.min(t.min,c),t.max=Math.max(t.max,c))}function ji(s){return s*(_s/180)}function F3(s){return s*(180/_s)}function Sy(s){if(!Wa(s))return;let t=1,r=0;for(;Math.round(s*t)/t!==s;)t*=10,r++;return r}function qv(s,t){const r=t.x-s.x,n=t.y-s.y,o=Math.sqrt(r*r+n*n);let c=Math.atan2(n,r);return c<-.5*_s&&(c+=Hs),{angle:c,distance:o}}function Jg(s,t){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function L3(s,t){return(s-t+M3)%Hs-_s}function Br(s){return(s%Hs+Hs)%Hs}function _u(s,t,r,n){const o=Br(s),c=Br(t),d=Br(r),m=Br(c-o),h=Br(d-o),g=Br(o-c),y=Br(o-d);return o===c||o===d||n&&c===d||m>h&&g<y}function Ya(s,t,r){return Math.max(t,Math.min(r,s))}function B3(s){return Ya(s,-32768,32767)}function wi(s,t,r,n=1e-6){return s>=Math.min(t,r)-n&&s<=Math.max(t,r)+n}function zx(s,t,r){r=r||(d=>s[d]<t);let n=s.length-1,o=0,c;for(;n-o>1;)c=o+n>>1,r(c)?o=c:n=c;return{lo:o,hi:n}}const xl=(s,t,r,n)=>zx(s,r,n?o=>{const c=s[o][t];return c<r||c===r&&s[o+1][t]===r}:o=>s[o][t]<r),U3=(s,t,r)=>zx(s,r,n=>s[n][t]>=r);function $3(s,t,r){let n=0,o=s.length;for(;n<o&&s[n]<t;)n++;for(;o>n&&s[o-1]>r;)o--;return n>0||o<s.length?s.slice(n,o):s}const Kv=["push","pop","shift","splice","unshift"];function H3(s,t){if(s._chartjs){s._chartjs.listeners.push(t);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Kv.forEach(r=>{const n="_onData"+Ix(r),o=s[r];Object.defineProperty(s,r,{configurable:!0,enumerable:!1,value(...c){const d=o.apply(this,c);return s._chartjs.listeners.forEach(m=>{typeof m[n]=="function"&&m[n](...c)}),d}})})}function Cy(s,t){const r=s._chartjs;if(!r)return;const n=r.listeners,o=n.indexOf(t);o!==-1&&n.splice(o,1),!(n.length>0)&&(Kv.forEach(c=>{delete s[c]}),delete s._chartjs)}function Yv(s){const t=new Set(s);return t.size===s.length?s:Array.from(t)}const Gv=(function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame})();function Wv(s,t){let r=[],n=!1;return function(...o){r=o,n||(n=!0,Gv.call(window,()=>{n=!1,s.apply(t,r)}))}}function V3(s,t){let r;return function(...n){return t?(clearTimeout(r),r=setTimeout(s,t,n)):s.apply(this,n),t}}const Px=s=>s==="start"?"left":s==="end"?"right":"center",Ka=(s,t,r)=>s==="start"?t:s==="end"?r:(t+r)/2,q3=(s,t,r,n)=>s===(n?"left":"right")?r:s==="center"?(t+r)/2:t;function K3(s,t,r){const n=t.length;let o=0,c=n;if(s._sorted){const{iScale:d,vScale:m,_parsed:h}=s,g=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,y=d.axis,{min:w,max:S,minDefined:_,maxDefined:E}=d.getUserBounds();if(_){if(o=Math.min(xl(h,y,w).lo,r?n:xl(t,y,d.getPixelForValue(w)).lo),g){const z=h.slice(0,o+1).reverse().findIndex(I=>!Ns(I[m.axis]));o-=Math.max(0,z)}o=Ya(o,0,n-1)}if(E){let z=Math.max(xl(h,d.axis,S,!0).hi+1,r?0:xl(t,y,d.getPixelForValue(S),!0).hi+1);if(g){const I=h.slice(z-1).findIndex(U=>!Ns(U[m.axis]));z+=Math.max(0,I)}c=Ya(z,o,n)-o}else c=n-o}return{start:o,count:c}}function Y3(s){const{xScale:t,yScale:r,_scaleRanges:n}=s,o={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!n)return s._scaleRanges=o,!0;const c=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,o),c}const nh=s=>s===0||s===1,ky=(s,t,r)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-t)*Hs/r)),_y=(s,t,r)=>Math.pow(2,-10*s)*Math.sin((s-t)*Hs/r)+1,gu={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*pa)+1,easeOutSine:s=>Math.sin(s*pa),easeInOutSine:s=>-.5*(Math.cos(_s*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>nh(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>nh(s)?s:ky(s,.075,.3),easeOutElastic:s=>nh(s)?s:_y(s,.075,.3),easeInOutElastic(s){return nh(s)?s:s<.5?.5*ky(s*2,.1125,.45):.5+.5*_y(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let t=1.70158;return(s/=.5)<1?.5*(s*s*(((t*=1.525)+1)*s-t)):.5*((s-=2)*s*(((t*=1.525)+1)*s+t)+2)},easeInBounce:s=>1-gu.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?gu.easeInBounce(s*2)*.5:gu.easeOutBounce(s*2-1)*.5+.5};function Fx(s){if(s&&typeof s=="object"){const t=s.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Ay(s){return Fx(s)?s:new Nu(s)}function Dg(s){return Fx(s)?s:new Nu(s).saturate(.5).darken(.1).hexString()}const G3=["x","y","borderWidth","radius","tension"],W3=["color","borderColor","backgroundColor"];function X3(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),s.set("animations",{colors:{type:"color",properties:W3},numbers:{type:"number",properties:G3}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Q3(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Dy=new Map;function Z3(s,t){t=t||{};const r=s+JSON.stringify(t);let n=Dy.get(r);return n||(n=new Intl.NumberFormat(s,t),Dy.set(r,n)),n}function Lx(s,t,r){return Z3(t,r).format(s)}const J3={values(s){return ca(s)?s:""+s},numeric(s,t,r){if(s===0)return"0";const n=this.chart.options.locale;let o,c=s;if(r.length>1){const g=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(g<1e-4||g>1e15)&&(o="scientific"),c=e4(s,r)}const d=Vv(Math.abs(c)),m=isNaN(d)?1:Math.max(Math.min(-1*Math.floor(d),20),0),h={notation:o,minimumFractionDigits:m,maximumFractionDigits:m};return Object.assign(h,this.options.ticks.format),Lx(s,n,h)}};function e4(s,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(r)>=1&&s!==Math.floor(s)&&(r=s-Math.floor(s)),r}var Xv={formatters:J3};function t4(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,r)=>r.lineWidth,tickColor:(t,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Xv.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const wl=Object.create(null),ex=Object.create(null);function xu(s,t){if(!t)return s;const r=t.split(".");for(let n=0,o=r.length;n<o;++n){const c=r[n];s=s[c]||(s[c]=Object.create(null))}return s}function Eg(s,t,r){return typeof t=="string"?Su(xu(s,t),r):Su(xu(s,""),t)}class s4{constructor(t,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,o)=>Dg(o.backgroundColor),this.hoverBorderColor=(n,o)=>Dg(o.borderColor),this.hoverColor=(n,o)=>Dg(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(r)}set(t,r){return Eg(this,t,r)}get(t){return xu(this,t)}describe(t,r){return Eg(ex,t,r)}override(t,r){return Eg(wl,t,r)}route(t,r,n,o){const c=xu(this,t),d=xu(this,n),m="_"+r;Object.defineProperties(c,{[m]:{value:c[r],writable:!0},[r]:{enumerable:!0,get(){const h=this[m],g=d[o];return fs(h)?Object.assign({},g,h):os(h,g)},set(h){this[m]=h}}})}apply(t){t.forEach(r=>r(this))}}var aa=new s4({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[X3,Q3,t4]);function a4(s){return!s||Ns(s.size)||Ns(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function Ey(s,t,r,n,o){let c=t[o];return c||(c=t[o]=s.measureText(o).width,r.push(o)),c>n&&(n=c),n}function cl(s,t,r){const n=s.currentDevicePixelRatio,o=r!==0?Math.max(r/2,.5):0;return Math.round((t-o)*n)/n+o}function Ty(s,t){!t&&!s||(t=t||s.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,s.width,s.height),t.restore())}function tx(s,t,r,n){Qv(s,t,r,n,null)}function Qv(s,t,r,n,o){let c,d,m,h,g,y,w,S;const _=t.pointStyle,E=t.rotation,z=t.radius;let I=(E||0)*O3;if(_&&typeof _=="object"&&(c=_.toString(),c==="[object HTMLImageElement]"||c==="[object HTMLCanvasElement]")){s.save(),s.translate(r,n),s.rotate(I),s.drawImage(_,-_.width/2,-_.height/2,_.width,_.height),s.restore();return}if(!(isNaN(z)||z<=0)){switch(s.beginPath(),_){default:o?s.ellipse(r,n,o/2,z,0,0,Hs):s.arc(r,n,z,0,Hs),s.closePath();break;case"triangle":y=o?o/2:z,s.moveTo(r+Math.sin(I)*y,n-Math.cos(I)*z),I+=wy,s.lineTo(r+Math.sin(I)*y,n-Math.cos(I)*z),I+=wy,s.lineTo(r+Math.sin(I)*y,n-Math.cos(I)*z),s.closePath();break;case"rectRounded":g=z*.516,h=z-g,d=Math.cos(I+ll)*h,w=Math.cos(I+ll)*(o?o/2-g:h),m=Math.sin(I+ll)*h,S=Math.sin(I+ll)*(o?o/2-g:h),s.arc(r-w,n-m,g,I-_s,I-pa),s.arc(r+S,n-d,g,I-pa,I),s.arc(r+w,n+m,g,I,I+pa),s.arc(r-S,n+d,g,I+pa,I+_s),s.closePath();break;case"rect":if(!E){h=Math.SQRT1_2*z,y=o?o/2:h,s.rect(r-y,n-h,2*y,2*h);break}I+=ll;case"rectRot":w=Math.cos(I)*(o?o/2:z),d=Math.cos(I)*z,m=Math.sin(I)*z,S=Math.sin(I)*(o?o/2:z),s.moveTo(r-w,n-m),s.lineTo(r+S,n-d),s.lineTo(r+w,n+m),s.lineTo(r-S,n+d),s.closePath();break;case"crossRot":I+=ll;case"cross":w=Math.cos(I)*(o?o/2:z),d=Math.cos(I)*z,m=Math.sin(I)*z,S=Math.sin(I)*(o?o/2:z),s.moveTo(r-w,n-m),s.lineTo(r+w,n+m),s.moveTo(r+S,n-d),s.lineTo(r-S,n+d);break;case"star":w=Math.cos(I)*(o?o/2:z),d=Math.cos(I)*z,m=Math.sin(I)*z,S=Math.sin(I)*(o?o/2:z),s.moveTo(r-w,n-m),s.lineTo(r+w,n+m),s.moveTo(r+S,n-d),s.lineTo(r-S,n+d),I+=ll,w=Math.cos(I)*(o?o/2:z),d=Math.cos(I)*z,m=Math.sin(I)*z,S=Math.sin(I)*(o?o/2:z),s.moveTo(r-w,n-m),s.lineTo(r+w,n+m),s.moveTo(r+S,n-d),s.lineTo(r-S,n+d);break;case"line":d=o?o/2:Math.cos(I)*z,m=Math.sin(I)*z,s.moveTo(r-d,n-m),s.lineTo(r+d,n+m);break;case"dash":s.moveTo(r,n),s.lineTo(r+Math.cos(I)*(o?o/2:z),n+Math.sin(I)*z);break;case!1:s.closePath();break}s.fill(),t.borderWidth>0&&s.stroke()}}function Au(s,t,r){return r=r||.5,!t||s&&s.x>t.left-r&&s.x<t.right+r&&s.y>t.top-r&&s.y<t.bottom+r}function Gh(s,t){s.save(),s.beginPath(),s.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),s.clip()}function Wh(s){s.restore()}function r4(s,t,r,n,o){if(!t)return s.lineTo(r.x,r.y);if(o==="middle"){const c=(t.x+r.x)/2;s.lineTo(c,t.y),s.lineTo(c,r.y)}else o==="after"!=!!n?s.lineTo(t.x,r.y):s.lineTo(r.x,t.y);s.lineTo(r.x,r.y)}function n4(s,t,r,n){if(!t)return s.lineTo(r.x,r.y);s.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function i4(s,t){t.translation&&s.translate(t.translation[0],t.translation[1]),Ns(t.rotation)||s.rotate(t.rotation),t.color&&(s.fillStyle=t.color),t.textAlign&&(s.textAlign=t.textAlign),t.textBaseline&&(s.textBaseline=t.textBaseline)}function o4(s,t,r,n,o){if(o.strikethrough||o.underline){const c=s.measureText(n),d=t-c.actualBoundingBoxLeft,m=t+c.actualBoundingBoxRight,h=r-c.actualBoundingBoxAscent,g=r+c.actualBoundingBoxDescent,y=o.strikethrough?(h+g)/2:g;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=o.decorationWidth||2,s.moveTo(d,y),s.lineTo(m,y),s.stroke()}}function l4(s,t){const r=s.fillStyle;s.fillStyle=t.color,s.fillRect(t.left,t.top,t.width,t.height),s.fillStyle=r}function Du(s,t,r,n,o,c={}){const d=ca(t)?t:[t],m=c.strokeWidth>0&&c.strokeColor!=="";let h,g;for(s.save(),s.font=o.string,i4(s,c),h=0;h<d.length;++h)g=d[h],c.backdrop&&l4(s,c.backdrop),m&&(c.strokeColor&&(s.strokeStyle=c.strokeColor),Ns(c.strokeWidth)||(s.lineWidth=c.strokeWidth),s.strokeText(g,r,n,c.maxWidth)),s.fillText(g,r,n,c.maxWidth),o4(s,r,n,g,c),n+=Number(o.lineHeight);s.restore()}function Ih(s,t){const{x:r,y:n,w:o,h:c,radius:d}=t;s.arc(r+d.topLeft,n+d.topLeft,d.topLeft,1.5*_s,_s,!0),s.lineTo(r,n+c-d.bottomLeft),s.arc(r+d.bottomLeft,n+c-d.bottomLeft,d.bottomLeft,_s,pa,!0),s.lineTo(r+o-d.bottomRight,n+c),s.arc(r+o-d.bottomRight,n+c-d.bottomRight,d.bottomRight,pa,0,!0),s.lineTo(r+o,n+d.topRight),s.arc(r+o-d.topRight,n+d.topRight,d.topRight,0,-pa,!0),s.lineTo(r+d.topLeft,n)}const c4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,d4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function u4(s,t){const r=(""+s).match(c4);if(!r||r[1]==="normal")return t*1.2;switch(s=+r[2],r[3]){case"px":return s;case"%":s/=100;break}return t*s}const m4=s=>+s||0;function Bx(s,t){const r={},n=fs(t),o=n?Object.keys(t):t,c=fs(s)?n?d=>os(s[d],s[t[d]]):d=>s[d]:()=>s;for(const d of o)r[d]=m4(c(d));return r}function Zv(s){return Bx(s,{top:"y",right:"x",bottom:"y",left:"x"})}function Tc(s){return Bx(s,["topLeft","topRight","bottomLeft","bottomRight"])}function rn(s){const t=Zv(s);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ga(s,t){s=s||{},t=t||aa.font;let r=os(s.size,t.size);typeof r=="string"&&(r=parseInt(r,10));let n=os(s.style,t.style);n&&!(""+n).match(d4)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const o={family:os(s.family,t.family),lineHeight:u4(os(s.lineHeight,t.lineHeight),r),size:r,style:n,weight:os(s.weight,t.weight),string:""};return o.string=a4(o),o}function ih(s,t,r,n){let o,c,d;for(o=0,c=s.length;o<c;++o)if(d=s[o],d!==void 0&&d!==void 0)return d}function h4(s,t,r){const{min:n,max:o}=s,c=$v(t,(o-n)/2),d=(m,h)=>r&&m===0?0:m+h;return{min:d(n,-Math.abs(c)),max:d(o,c)}}function Sl(s,t){return Object.assign(Object.create(s),t)}function Ux(s,t=[""],r,n,o=()=>s[0]){const c=r||s;typeof n>"u"&&(n=sj("_fallback",s));const d={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:c,_fallback:n,_getTarget:o,override:m=>Ux([m,...s],t,c,n)};return new Proxy(d,{deleteProperty(m,h){return delete m[h],delete m._keys,delete s[0][h],!0},get(m,h){return ej(m,h,()=>j4(h,t,s,m))},getOwnPropertyDescriptor(m,h){return Reflect.getOwnPropertyDescriptor(m._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(m,h){return Oy(m).includes(h)},ownKeys(m){return Oy(m)},set(m,h,g){const y=m._storage||(m._storage=o());return m[h]=y[h]=g,delete m._keys,!0}})}function Rc(s,t,r,n){const o={_cacheable:!1,_proxy:s,_context:t,_subProxy:r,_stack:new Set,_descriptors:Jv(s,n),setContext:c=>Rc(s,c,r,n),override:c=>Rc(s.override(c),t,r,n)};return new Proxy(o,{deleteProperty(c,d){return delete c[d],delete s[d],!0},get(c,d,m){return ej(c,d,()=>g4(c,d,m))},getOwnPropertyDescriptor(c,d){return c._descriptors.allKeys?Reflect.has(s,d)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,d)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(c,d){return Reflect.has(s,d)},ownKeys(){return Reflect.ownKeys(s)},set(c,d,m){return s[d]=m,delete c[d],!0}})}function Jv(s,t={scriptable:!0,indexable:!0}){const{_scriptable:r=t.scriptable,_indexable:n=t.indexable,_allKeys:o=t.allKeys}=s;return{allKeys:o,scriptable:r,indexable:n,isScriptable:Ao(r)?r:()=>r,isIndexable:Ao(n)?n:()=>n}}const f4=(s,t)=>s?s+Ix(t):t,$x=(s,t)=>fs(t)&&s!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function ej(s,t,r){if(Object.prototype.hasOwnProperty.call(s,t)||t==="constructor")return s[t];const n=r();return s[t]=n,n}function g4(s,t,r){const{_proxy:n,_context:o,_subProxy:c,_descriptors:d}=s;let m=n[t];return Ao(m)&&d.isScriptable(t)&&(m=x4(t,m,s,r)),ca(m)&&m.length&&(m=p4(t,m,s,d.isIndexable)),$x(t,m)&&(m=Rc(m,o,c&&c[t],d)),m}function x4(s,t,r,n){const{_proxy:o,_context:c,_subProxy:d,_stack:m}=r;if(m.has(s))throw new Error("Recursion detected: "+Array.from(m).join("->")+"->"+s);m.add(s);let h=t(c,d||n);return m.delete(s),$x(s,h)&&(h=Hx(o._scopes,o,s,h)),h}function p4(s,t,r,n){const{_proxy:o,_context:c,_subProxy:d,_descriptors:m}=r;if(typeof c.index<"u"&&n(s))return t[c.index%t.length];if(fs(t[0])){const h=t,g=o._scopes.filter(y=>y!==h);t=[];for(const y of h){const w=Hx(g,o,s,y);t.push(Rc(w,c,d&&d[s],m))}}return t}function tj(s,t,r){return Ao(s)?s(t,r):s}const y4=(s,t)=>s===!0?t:typeof s=="string"?jl(t,s):void 0;function b4(s,t,r,n,o){for(const c of t){const d=y4(r,c);if(d){s.add(d);const m=tj(d._fallback,r,o);if(typeof m<"u"&&m!==r&&m!==n)return m}else if(d===!1&&typeof n<"u"&&r!==n)return null}return!1}function Hx(s,t,r,n){const o=t._rootScopes,c=tj(t._fallback,r,n),d=[...s,...o],m=new Set;m.add(n);let h=My(m,d,r,c||r,n);return h===null||typeof c<"u"&&c!==r&&(h=My(m,d,c,h,n),h===null)?!1:Ux(Array.from(m),[""],o,c,()=>v4(t,r,n))}function My(s,t,r,n,o){for(;r;)r=b4(s,t,r,n,o);return r}function v4(s,t,r){const n=s._getTarget();t in n||(n[t]={});const o=n[t];return ca(o)&&fs(r)?r:o||{}}function j4(s,t,r,n){let o;for(const c of t)if(o=sj(f4(c,s),r),typeof o<"u")return $x(s,o)?Hx(r,n,s,o):o}function sj(s,t){for(const r of t){if(!r)continue;const n=r[s];if(typeof n<"u")return n}}function Oy(s){let t=s._keys;return t||(t=s._keys=w4(s._scopes)),t}function w4(s){const t=new Set;for(const r of s)for(const n of Object.keys(r).filter(o=>!o.startsWith("_")))t.add(n);return Array.from(t)}const N4=Number.EPSILON||1e-14,Ic=(s,t)=>t<s.length&&!s[t].skip&&s[t],aj=s=>s==="x"?"y":"x";function S4(s,t,r,n){const o=s.skip?t:s,c=t,d=r.skip?t:r,m=Jg(c,o),h=Jg(d,c);let g=m/(m+h),y=h/(m+h);g=isNaN(g)?0:g,y=isNaN(y)?0:y;const w=n*g,S=n*y;return{previous:{x:c.x-w*(d.x-o.x),y:c.y-w*(d.y-o.y)},next:{x:c.x+S*(d.x-o.x),y:c.y+S*(d.y-o.y)}}}function C4(s,t,r){const n=s.length;let o,c,d,m,h,g=Ic(s,0);for(let y=0;y<n-1;++y)if(h=g,g=Ic(s,y+1),!(!h||!g)){if(fu(t[y],0,N4)){r[y]=r[y+1]=0;continue}o=r[y]/t[y],c=r[y+1]/t[y],m=Math.pow(o,2)+Math.pow(c,2),!(m<=9)&&(d=3/Math.sqrt(m),r[y]=o*d*t[y],r[y+1]=c*d*t[y])}}function k4(s,t,r="x"){const n=aj(r),o=s.length;let c,d,m,h=Ic(s,0);for(let g=0;g<o;++g){if(d=m,m=h,h=Ic(s,g+1),!m)continue;const y=m[r],w=m[n];d&&(c=(y-d[r])/3,m[`cp1${r}`]=y-c,m[`cp1${n}`]=w-c*t[g]),h&&(c=(h[r]-y)/3,m[`cp2${r}`]=y+c,m[`cp2${n}`]=w+c*t[g])}}function _4(s,t="x"){const r=aj(t),n=s.length,o=Array(n).fill(0),c=Array(n);let d,m,h,g=Ic(s,0);for(d=0;d<n;++d)if(m=h,h=g,g=Ic(s,d+1),!!h){if(g){const y=g[t]-h[t];o[d]=y!==0?(g[r]-h[r])/y:0}c[d]=m?g?Yn(o[d-1])!==Yn(o[d])?0:(o[d-1]+o[d])/2:o[d-1]:o[d]}C4(s,o,c),k4(s,c,t)}function oh(s,t,r){return Math.max(Math.min(s,r),t)}function A4(s,t){let r,n,o,c,d,m=Au(s[0],t);for(r=0,n=s.length;r<n;++r)d=c,c=m,m=r<n-1&&Au(s[r+1],t),c&&(o=s[r],d&&(o.cp1x=oh(o.cp1x,t.left,t.right),o.cp1y=oh(o.cp1y,t.top,t.bottom)),m&&(o.cp2x=oh(o.cp2x,t.left,t.right),o.cp2y=oh(o.cp2y,t.top,t.bottom)))}function D4(s,t,r,n,o){let c,d,m,h;if(t.spanGaps&&(s=s.filter(g=>!g.skip)),t.cubicInterpolationMode==="monotone")_4(s,o);else{let g=n?s[s.length-1]:s[0];for(c=0,d=s.length;c<d;++c)m=s[c],h=S4(g,m,s[Math.min(c+1,d-(n?0:1))%d],t.tension),m.cp1x=h.previous.x,m.cp1y=h.previous.y,m.cp2x=h.next.x,m.cp2y=h.next.y,g=m}t.capBezierPoints&&A4(s,r)}function Vx(){return typeof window<"u"&&typeof document<"u"}function qx(s){let t=s.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function zh(s,t,r){let n;return typeof s=="string"?(n=parseInt(s,10),s.indexOf("%")!==-1&&(n=n/100*t.parentNode[r])):n=s,n}const Xh=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function E4(s,t){return Xh(s).getPropertyValue(t)}const T4=["top","right","bottom","left"];function pl(s,t,r){const n={};r=r?"-"+r:"";for(let o=0;o<4;o++){const c=T4[o];n[c]=parseFloat(s[t+"-"+c+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const M4=(s,t,r)=>(s>0||t>0)&&(!r||!r.shadowRoot);function O4(s,t){const r=s.touches,n=r&&r.length?r[0]:s,{offsetX:o,offsetY:c}=n;let d=!1,m,h;if(M4(o,c,s.target))m=o,h=c;else{const g=t.getBoundingClientRect();m=n.clientX-g.left,h=n.clientY-g.top,d=!0}return{x:m,y:h,box:d}}function ml(s,t){if("native"in s)return s;const{canvas:r,currentDevicePixelRatio:n}=t,o=Xh(r),c=o.boxSizing==="border-box",d=pl(o,"padding"),m=pl(o,"border","width"),{x:h,y:g,box:y}=O4(s,r),w=d.left+(y&&m.left),S=d.top+(y&&m.top);let{width:_,height:E}=t;return c&&(_-=d.width+m.width,E-=d.height+m.height),{x:Math.round((h-w)/_*r.width/n),y:Math.round((g-S)/E*r.height/n)}}function R4(s,t,r){let n,o;if(t===void 0||r===void 0){const c=s&&qx(s);if(!c)t=s.clientWidth,r=s.clientHeight;else{const d=c.getBoundingClientRect(),m=Xh(c),h=pl(m,"border","width"),g=pl(m,"padding");t=d.width-g.width-h.width,r=d.height-g.height-h.height,n=zh(m.maxWidth,c,"clientWidth"),o=zh(m.maxHeight,c,"clientHeight")}}return{width:t,height:r,maxWidth:n||Rh,maxHeight:o||Rh}}const lh=s=>Math.round(s*10)/10;function I4(s,t,r,n){const o=Xh(s),c=pl(o,"margin"),d=zh(o.maxWidth,s,"clientWidth")||Rh,m=zh(o.maxHeight,s,"clientHeight")||Rh,h=R4(s,t,r);let{width:g,height:y}=h;if(o.boxSizing==="content-box"){const S=pl(o,"border","width"),_=pl(o,"padding");g-=_.width+S.width,y-=_.height+S.height}return g=Math.max(0,g-c.width),y=Math.max(0,n?g/n:y-c.height),g=lh(Math.min(g,d,h.maxWidth)),y=lh(Math.min(y,m,h.maxHeight)),g&&!y&&(y=lh(g/2)),(t!==void 0||r!==void 0)&&n&&h.height&&y>h.height&&(y=h.height,g=lh(Math.floor(y*n))),{width:g,height:y}}function Ry(s,t,r){const n=t||1,o=Math.floor(s.height*n),c=Math.floor(s.width*n);s.height=Math.floor(s.height),s.width=Math.floor(s.width);const d=s.canvas;return d.style&&(r||!d.style.height&&!d.style.width)&&(d.style.height=`${s.height}px`,d.style.width=`${s.width}px`),s.currentDevicePixelRatio!==n||d.height!==o||d.width!==c?(s.currentDevicePixelRatio=n,d.height=o,d.width=c,s.ctx.setTransform(n,0,0,n,0,0),!0):!1}const z4=(function(){let s=!1;try{const t={get passive(){return s=!0,!1}};Vx()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return s})();function Iy(s,t){const r=E4(s,t),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function hl(s,t,r,n){return{x:s.x+r*(t.x-s.x),y:s.y+r*(t.y-s.y)}}function P4(s,t,r,n){return{x:s.x+r*(t.x-s.x),y:n==="middle"?r<.5?s.y:t.y:n==="after"?r<1?s.y:t.y:r>0?t.y:s.y}}function F4(s,t,r,n){const o={x:s.cp2x,y:s.cp2y},c={x:t.cp1x,y:t.cp1y},d=hl(s,o,r),m=hl(o,c,r),h=hl(c,t,r),g=hl(d,m,r),y=hl(m,h,r);return hl(g,y,r)}const L4=function(s,t){return{x(r){return s+s+t-r},setWidth(r){t=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},B4=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,t){return s+t},leftForLtr(s,t){return s}}};function Mc(s,t,r){return s?L4(t,r):B4()}function rj(s,t){let r,n;(t==="ltr"||t==="rtl")&&(r=s.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),s.prevTextDirection=n)}function nj(s,t){t!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",t[0],t[1]))}function ij(s){return s==="angle"?{between:_u,compare:L3,normalize:Br}:{between:wi,compare:(t,r)=>t-r,normalize:t=>t}}function zy({start:s,end:t,count:r,loop:n,style:o}){return{start:s%r,end:t%r,loop:n&&(t-s+1)%r===0,style:o}}function U4(s,t,r){const{property:n,start:o,end:c}=r,{between:d,normalize:m}=ij(n),h=t.length;let{start:g,end:y,loop:w}=s,S,_;if(w){for(g+=h,y+=h,S=0,_=h;S<_&&d(m(t[g%h][n]),o,c);++S)g--,y--;g%=h,y%=h}return y<g&&(y+=h),{start:g,end:y,loop:w,style:s.style}}function oj(s,t,r){if(!r)return[s];const{property:n,start:o,end:c}=r,d=t.length,{compare:m,between:h,normalize:g}=ij(n),{start:y,end:w,loop:S,style:_}=U4(s,t,r),E=[];let z=!1,I=null,U,q,O;const R=()=>h(o,O,U)&&m(o,O)!==0,M=()=>m(c,U)===0||h(c,O,U),P=()=>z||R(),ee=()=>!z||M();for(let oe=y,je=y;oe<=w;++oe)q=t[oe%d],!q.skip&&(U=g(q[n]),U!==O&&(z=h(U,o,c),I===null&&P()&&(I=m(U,o)===0?oe:je),I!==null&&ee()&&(E.push(zy({start:I,end:oe,loop:S,count:d,style:_})),I=null),je=oe,O=U));return I!==null&&E.push(zy({start:I,end:w,loop:S,count:d,style:_})),E}function lj(s,t){const r=[],n=s.segments;for(let o=0;o<n.length;o++){const c=oj(n[o],s.points,t);c.length&&r.push(...c)}return r}function $4(s,t,r,n){let o=0,c=t-1;if(r&&!n)for(;o<t&&!s[o].skip;)o++;for(;o<t&&s[o].skip;)o++;for(o%=t,r&&(c+=o);c>o&&s[c%t].skip;)c--;return c%=t,{start:o,end:c}}function H4(s,t,r,n){const o=s.length,c=[];let d=t,m=s[t],h;for(h=t+1;h<=r;++h){const g=s[h%o];g.skip||g.stop?m.skip||(n=!1,c.push({start:t%o,end:(h-1)%o,loop:n}),t=d=g.stop?h:null):(d=h,m.skip&&(t=h)),m=g}return d!==null&&c.push({start:t%o,end:d%o,loop:n}),c}function V4(s,t){const r=s.points,n=s.options.spanGaps,o=r.length;if(!o)return[];const c=!!s._loop,{start:d,end:m}=$4(r,o,c,n);if(n===!0)return Py(s,[{start:d,end:m,loop:c}],r,t);const h=m<d?m+o:m,g=!!s._fullLoop&&d===0&&m===o-1;return Py(s,H4(r,d,h,g),r,t)}function Py(s,t,r,n){return!n||!n.setContext||!r?t:q4(s,t,r,n)}function q4(s,t,r,n){const o=s._chart.getContext(),c=Fy(s.options),{_datasetIndex:d,options:{spanGaps:m}}=s,h=r.length,g=[];let y=c,w=t[0].start,S=w;function _(E,z,I,U){const q=m?-1:1;if(E!==z){for(E+=h;r[E%h].skip;)E-=q;for(;r[z%h].skip;)z+=q;E%h!==z%h&&(g.push({start:E%h,end:z%h,loop:I,style:U}),y=U,w=z%h)}}for(const E of t){w=m?w:E.start;let z=r[w%h],I;for(S=w+1;S<=E.end;S++){const U=r[S%h];I=Fy(n.setContext(Sl(o,{type:"segment",p0:z,p1:U,p0DataIndex:(S-1)%h,p1DataIndex:S%h,datasetIndex:d}))),K4(I,y)&&_(w,S-1,E.loop,y),z=U,y=I}w<S-1&&_(w,S-1,E.loop,y)}return g}function Fy(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function K4(s,t){if(!t)return!1;const r=[],n=function(o,c){return Fx(c)?(r.includes(c)||r.push(c),r.indexOf(c)):c};return JSON.stringify(s,n)!==JSON.stringify(t,n)}function ch(s,t,r){return s.options.clip?s[r]:t[r]}function Y4(s,t){const{xScale:r,yScale:n}=s;return r&&n?{left:ch(r,t,"left"),right:ch(r,t,"right"),top:ch(n,t,"top"),bottom:ch(n,t,"bottom")}:t}function cj(s,t){const r=t._clip;if(r.disabled)return!1;const n=Y4(t,s.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?s.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?s.height:n.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class G4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,r,n,o){const c=r.listeners[o],d=r.duration;c.forEach(m=>m({chart:t,initial:r.initial,numSteps:d,currentStep:Math.min(n-r.start,d)}))}_refresh(){this._request||(this._running=!0,this._request=Gv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let r=0;this._charts.forEach((n,o)=>{if(!n.running||!n.items.length)return;const c=n.items;let d=c.length-1,m=!1,h;for(;d>=0;--d)h=c[d],h._active?(h._total>n.duration&&(n.duration=h._total),h.tick(t),m=!0):(c[d]=c[c.length-1],c.pop());m&&(o.draw(),this._notify(o,n,t,"progress")),c.length||(n.running=!1,this._notify(o,n,t,"complete"),n.initial=!1),r+=c.length}),this._lastDate=t,r===0&&(this._running=!1)}_getAnims(t){const r=this._charts;let n=r.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(t,n)),n}listen(t,r,n){this._getAnims(t).listeners[r].push(n)}add(t,r){!r||!r.length||this._getAnims(t).items.push(...r)}has(t){return this._getAnims(t).items.length>0}start(t){const r=this._charts.get(t);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,o)=>Math.max(n,o._duration),0),this._refresh())}running(t){if(!this._running)return!1;const r=this._charts.get(t);return!(!r||!r.running||!r.items.length)}stop(t){const r=this._charts.get(t);if(!r||!r.items.length)return;const n=r.items;let o=n.length-1;for(;o>=0;--o)n[o].cancel();r.items=[],this._notify(t,r,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var yi=new G4;const Ly="transparent",W4={boolean(s,t,r){return r>.5?t:s},color(s,t,r){const n=Ay(s||Ly),o=n.valid&&Ay(t||Ly);return o&&o.valid?o.mix(n,r).hexString():t},number(s,t,r){return s+(t-s)*r}};class X4{constructor(t,r,n,o){const c=r[n];o=ih([t.to,o,c,t.from]);const d=ih([t.from,c,o]);this._active=!0,this._fn=t.fn||W4[t.type||typeof d],this._easing=gu[t.easing]||gu.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=r,this._prop=n,this._from=d,this._to=o,this._promises=void 0}active(){return this._active}update(t,r,n){if(this._active){this._notify(!1);const o=this._target[this._prop],c=n-this._start,d=this._duration-c;this._start=n,this._duration=Math.floor(Math.max(d,t.duration)),this._total+=c,this._loop=!!t.loop,this._to=ih([t.to,r,o,t.from]),this._from=ih([t.from,o,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const r=t-this._start,n=this._duration,o=this._prop,c=this._from,d=this._loop,m=this._to;let h;if(this._active=c!==m&&(d||r<n),!this._active){this._target[o]=m,this._notify(!0);return}if(r<0){this._target[o]=c;return}h=r/n%2,h=d&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[o]=this._fn(c,m,h)}wait(){const t=this._promises||(this._promises=[]);return new Promise((r,n)=>{t.push({res:r,rej:n})})}_notify(t){const r=t?"res":"rej",n=this._promises||[];for(let o=0;o<n.length;o++)n[o][r]()}}class dj{constructor(t,r){this._chart=t,this._properties=new Map,this.configure(r)}configure(t){if(!fs(t))return;const r=Object.keys(aa.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(o=>{const c=t[o];if(!fs(c))return;const d={};for(const m of r)d[m]=c[m];(ca(c.properties)&&c.properties||[o]).forEach(m=>{(m===o||!n.has(m))&&n.set(m,d)})})}_animateOptions(t,r){const n=r.options,o=Z4(t,n);if(!o)return[];const c=this._createAnimations(o,n);return n.$shared&&Q4(t.options.$animations,n).then(()=>{t.options=n},()=>{}),c}_createAnimations(t,r){const n=this._properties,o=[],c=t.$animations||(t.$animations={}),d=Object.keys(r),m=Date.now();let h;for(h=d.length-1;h>=0;--h){const g=d[h];if(g.charAt(0)==="$")continue;if(g==="options"){o.push(...this._animateOptions(t,r));continue}const y=r[g];let w=c[g];const S=n.get(g);if(w)if(S&&w.active()){w.update(S,y,m);continue}else w.cancel();if(!S||!S.duration){t[g]=y;continue}c[g]=w=new X4(S,t,g,y),o.push(w)}return o}update(t,r){if(this._properties.size===0){Object.assign(t,r);return}const n=this._createAnimations(t,r);if(n.length)return yi.add(this._chart,n),!0}}function Q4(s,t){const r=[],n=Object.keys(t);for(let o=0;o<n.length;o++){const c=s[n[o]];c&&c.active()&&r.push(c.wait())}return Promise.all(r)}function Z4(s,t){if(!t)return;let r=s.options;if(!r){s.options=t;return}return r.$shared&&(s.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function By(s,t){const r=s&&s.options||{},n=r.reverse,o=r.min===void 0?t:0,c=r.max===void 0?t:0;return{start:n?c:o,end:n?o:c}}function J4(s,t,r){if(r===!1)return!1;const n=By(s,r),o=By(t,r);return{top:o.end,right:n.end,bottom:o.start,left:n.start}}function ek(s){let t,r,n,o;return fs(s)?(t=s.top,r=s.right,n=s.bottom,o=s.left):t=r=n=o=s,{top:t,right:r,bottom:n,left:o,disabled:s===!1}}function uj(s,t){const r=[],n=s._getSortedDatasetMetas(t);let o,c;for(o=0,c=n.length;o<c;++o)r.push(n[o].index);return r}function Uy(s,t,r,n={}){const o=s.keys,c=n.mode==="single";let d,m,h,g;if(t===null)return;let y=!1;for(d=0,m=o.length;d<m;++d){if(h=+o[d],h===r){if(y=!0,n.all)continue;break}g=s.values[h],Wa(g)&&(c||t===0||Yn(t)===Yn(g))&&(t+=g)}return!y&&!n.all?0:t}function tk(s,t){const{iScale:r,vScale:n}=t,o=r.axis==="x"?"x":"y",c=n.axis==="x"?"x":"y",d=Object.keys(s),m=new Array(d.length);let h,g,y;for(h=0,g=d.length;h<g;++h)y=d[h],m[h]={[o]:y,[c]:s[y]};return m}function Tg(s,t){const r=s&&s.options.stacked;return r||r===void 0&&t.stack!==void 0}function sk(s,t,r){return`${s.id}.${t.id}.${r.stack||r.type}`}function ak(s){const{min:t,max:r,minDefined:n,maxDefined:o}=s.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:o?r:Number.POSITIVE_INFINITY}}function rk(s,t,r){const n=s[t]||(s[t]={});return n[r]||(n[r]={})}function $y(s,t,r,n){for(const o of t.getMatchingVisibleMetas(n).reverse()){const c=s[o.index];if(r&&c>0||!r&&c<0)return o.index}return null}function Hy(s,t){const{chart:r,_cachedMeta:n}=s,o=r._stacks||(r._stacks={}),{iScale:c,vScale:d,index:m}=n,h=c.axis,g=d.axis,y=sk(c,d,n),w=t.length;let S;for(let _=0;_<w;++_){const E=t[_],{[h]:z,[g]:I}=E,U=E._stacks||(E._stacks={});S=U[g]=rk(o,y,z),S[m]=I,S._top=$y(S,d,!0,n.type),S._bottom=$y(S,d,!1,n.type);const q=S._visualValues||(S._visualValues={});q[m]=I}}function Mg(s,t){const r=s.scales;return Object.keys(r).filter(n=>r[n].axis===t).shift()}function nk(s,t){return Sl(s,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function ik(s,t,r){return Sl(s,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}function tu(s,t){const r=s.controller.index,n=s.vScale&&s.vScale.axis;if(n){t=t||s._parsed;for(const o of t){const c=o._stacks;if(!c||c[n]===void 0||c[n][r]===void 0)return;delete c[n][r],c[n]._visualValues!==void 0&&c[n]._visualValues[r]!==void 0&&delete c[n]._visualValues[r]}}}const Og=s=>s==="reset"||s==="none",Vy=(s,t)=>t?s:Object.assign({},s),ok=(s,t,r)=>s&&!t.hidden&&t._stacked&&{keys:uj(r,!0),values:null};class Qh{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Tg(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&tu(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,n=this.getDataset(),o=(w,S,_,E)=>w==="x"?S:w==="r"?E:_,c=r.xAxisID=os(n.xAxisID,Mg(t,"x")),d=r.yAxisID=os(n.yAxisID,Mg(t,"y")),m=r.rAxisID=os(n.rAxisID,Mg(t,"r")),h=r.indexAxis,g=r.iAxisID=o(h,c,d,m),y=r.vAxisID=o(h,d,c,m);r.xScale=this.getScaleForId(c),r.yScale=this.getScaleForId(d),r.rScale=this.getScaleForId(m),r.iScale=this.getScaleForId(g),r.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Cy(this._data,this),t._stacked&&tu(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),n=this._data;if(fs(r)){const o=this._cachedMeta;this._data=tk(r,o)}else if(n!==r){if(n){Cy(n,this);const o=this._cachedMeta;tu(o),o._parsed=[]}r&&Object.isExtensible(r)&&H3(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,n=this.getDataset();let o=!1;this._dataCheck();const c=r._stacked;r._stacked=Tg(r.vScale,r),r.stack!==n.stack&&(o=!0,tu(r),r.stack=n.stack),this._resyncElements(t),(o||c!==r._stacked)&&(Hy(this,r._parsed),r._stacked=Tg(r.vScale,r))}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:n,_data:o}=this,{iScale:c,_stacked:d}=n,m=c.axis;let h=t===0&&r===o.length?!0:n._sorted,g=t>0&&n._parsed[t-1],y,w,S;if(this._parsing===!1)n._parsed=o,n._sorted=!0,S=o;else{ca(o[t])?S=this.parseArrayData(n,o,t,r):fs(o[t])?S=this.parseObjectData(n,o,t,r):S=this.parsePrimitiveData(n,o,t,r);const _=()=>w[m]===null||g&&w[m]<g[m];for(y=0;y<r;++y)n._parsed[y+t]=w=S[y],h&&(_()&&(h=!1),g=w);n._sorted=h}d&&Hy(this,S)}parsePrimitiveData(t,r,n,o){const{iScale:c,vScale:d}=t,m=c.axis,h=d.axis,g=c.getLabels(),y=c===d,w=new Array(o);let S,_,E;for(S=0,_=o;S<_;++S)E=S+n,w[S]={[m]:y||c.parse(g[E],E),[h]:d.parse(r[E],E)};return w}parseArrayData(t,r,n,o){const{xScale:c,yScale:d}=t,m=new Array(o);let h,g,y,w;for(h=0,g=o;h<g;++h)y=h+n,w=r[y],m[h]={x:c.parse(w[0],y),y:d.parse(w[1],y)};return m}parseObjectData(t,r,n,o){const{xScale:c,yScale:d}=t,{xAxisKey:m="x",yAxisKey:h="y"}=this._parsing,g=new Array(o);let y,w,S,_;for(y=0,w=o;y<w;++y)S=y+n,_=r[S],g[y]={x:c.parse(jl(_,m),S),y:d.parse(jl(_,h),S)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,n){const o=this.chart,c=this._cachedMeta,d=r[t.axis],m={keys:uj(o,!0),values:r._stacks[t.axis]._visualValues};return Uy(m,d,c.index,{mode:n})}updateRangeFromParsed(t,r,n,o){const c=n[r.axis];let d=c===null?NaN:c;const m=o&&n._stacks[r.axis];o&&m&&(o.values=m,d=Uy(o,c,this._cachedMeta.index)),t.min=Math.min(t.min,d),t.max=Math.max(t.max,d)}getMinMax(t,r){const n=this._cachedMeta,o=n._parsed,c=n._sorted&&t===n.iScale,d=o.length,m=this._getOtherScale(t),h=ok(r,n,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:w}=ak(m);let S,_;function E(){_=o[S];const z=_[m.axis];return!Wa(_[t.axis])||y>z||w<z}for(S=0;S<d&&!(!E()&&(this.updateRangeFromParsed(g,t,_,h),c));++S);if(c){for(S=d-1;S>=0;--S)if(!E()){this.updateRangeFromParsed(g,t,_,h);break}}return g}getAllParsedValues(t){const r=this._cachedMeta._parsed,n=[];let o,c,d;for(o=0,c=r.length;o<c;++o)d=r[o][t.axis],Wa(d)&&n.push(d);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,n=r.iScale,o=r.vScale,c=this.getParsed(t);return{label:n?""+n.getLabelForValue(c[n.axis]):"",value:o?""+o.getLabelForValue(c[o.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=ek(os(this.options.clip,J4(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,r=this.chart,n=this._cachedMeta,o=n.data||[],c=r.chartArea,d=[],m=this._drawStart||0,h=this._drawCount||o.length-m,g=this.options.drawActiveElementsOnTop;let y;for(n.dataset&&n.dataset.draw(t,c,m,h),y=m;y<m+h;++y){const w=o[y];w.hidden||(w.active&&g?d.push(w):w.draw(t,c))}for(y=0;y<d.length;++y)d[y].draw(t,c)}getStyle(t,r){const n=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,r,n){const o=this.getDataset();let c;if(t>=0&&t<this._cachedMeta.data.length){const d=this._cachedMeta.data[t];c=d.$context||(d.$context=ik(this.getContext(),t,d)),c.parsed=this.getParsed(t),c.raw=o.data[t],c.index=c.dataIndex=t}else c=this.$context||(this.$context=nk(this.chart.getContext(),this.index)),c.dataset=o,c.index=c.datasetIndex=this.index;return c.active=!!r,c.mode=n,c}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",n){const o=r==="active",c=this._cachedDataOpts,d=t+"-"+r,m=c[d],h=this.enableOptionSharing&&Cu(n);if(m)return Vy(m,h);const g=this.chart.config,y=g.datasetElementScopeKeys(this._type,t),w=o?[`${t}Hover`,"hover",t,""]:[t,""],S=g.getOptionScopes(this.getDataset(),y),_=Object.keys(aa.elements[t]),E=()=>this.getContext(n,o,r),z=g.resolveNamedOptions(S,_,E,w);return z.$shared&&(z.$shared=h,c[d]=Object.freeze(Vy(z,h))),z}_resolveAnimations(t,r,n){const o=this.chart,c=this._cachedDataOpts,d=`animation-${r}`,m=c[d];if(m)return m;let h;if(o.options.animation!==!1){const y=this.chart.config,w=y.datasetAnimationScopeKeys(this._type,r),S=y.getOptionScopes(this.getDataset(),w);h=y.createResolver(S,this.getContext(t,n,r))}const g=new dj(o,h&&h.animations);return h&&h._cacheable&&(c[d]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||Og(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const n=this.resolveDataElementOptions(t,r),o=this._sharedOptions,c=this.getSharedOptions(n),d=this.includeOptions(r,c)||c!==o;return this.updateSharedOptions(c,r,n),{sharedOptions:c,includeOptions:d}}updateElement(t,r,n,o){Og(o)?Object.assign(t,n):this._resolveAnimations(r,o).update(t,n)}updateSharedOptions(t,r,n){t&&!Og(r)&&this._resolveAnimations(void 0,r).update(t,n)}_setStyle(t,r,n,o){t.active=o;const c=this.getStyle(r,o);this._resolveAnimations(r,n,o).update(t,{options:!o&&this.getSharedOptions(c)||c})}removeHoverStyle(t,r,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,r,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,n=this._cachedMeta.data;for(const[m,h,g]of this._syncList)this[m](h,g);this._syncList=[];const o=n.length,c=r.length,d=Math.min(c,o);d&&this.parse(0,d),c>o?this._insertElements(o,c-o,t):c<o&&this._removeElements(c,o-c)}_insertElements(t,r,n=!0){const o=this._cachedMeta,c=o.data,d=t+r;let m;const h=g=>{for(g.length+=r,m=g.length-1;m>=d;m--)g[m]=g[m-r]};for(h(c),m=t;m<d;++m)c[m]=new this.dataElementType;this._parsing&&h(o._parsed),this.parse(t,r),n&&this.updateElements(c,t,r,"reset")}updateElements(t,r,n,o){}_removeElements(t,r){const n=this._cachedMeta;if(this._parsing){const o=n._parsed.splice(t,r);n._stacked&&tu(n,o)}n.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,n,o]=t;this[r](n,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function lk(s,t){if(!s._cache.$bar){const r=s.getMatchingVisibleMetas(t);let n=[];for(let o=0,c=r.length;o<c;o++)n=n.concat(r[o].controller.getAllParsedValues(s));s._cache.$bar=Yv(n.sort((o,c)=>o-c))}return s._cache.$bar}function ck(s){const t=s.iScale,r=lk(t,s.type);let n=t._length,o,c,d,m;const h=()=>{d===32767||d===-32768||(Cu(m)&&(n=Math.min(n,Math.abs(d-m)||n)),m=d)};for(o=0,c=r.length;o<c;++o)d=t.getPixelForValue(r[o]),h();for(m=void 0,o=0,c=t.ticks.length;o<c;++o)d=t.getPixelForTick(o),h();return n}function dk(s,t,r,n){const o=r.barThickness;let c,d;return Ns(o)?(c=t.min*r.categoryPercentage,d=r.barPercentage):(c=o*n,d=1),{chunk:c/n,ratio:d,start:t.pixels[s]-c/2}}function uk(s,t,r,n){const o=t.pixels,c=o[s];let d=s>0?o[s-1]:null,m=s<o.length-1?o[s+1]:null;const h=r.categoryPercentage;d===null&&(d=c-(m===null?t.end-t.start:m-c)),m===null&&(m=c+c-d);const g=c-(c-Math.min(d,m))/2*h;return{chunk:Math.abs(m-d)/2*h/n,ratio:r.barPercentage,start:g}}function mk(s,t,r,n){const o=r.parse(s[0],n),c=r.parse(s[1],n),d=Math.min(o,c),m=Math.max(o,c);let h=d,g=m;Math.abs(d)>Math.abs(m)&&(h=m,g=d),t[r.axis]=g,t._custom={barStart:h,barEnd:g,start:o,end:c,min:d,max:m}}function mj(s,t,r,n){return ca(s)?mk(s,t,r,n):t[r.axis]=r.parse(s,n),t}function qy(s,t,r,n){const o=s.iScale,c=s.vScale,d=o.getLabels(),m=o===c,h=[];let g,y,w,S;for(g=r,y=r+n;g<y;++g)S=t[g],w={},w[o.axis]=m||o.parse(d[g],g),h.push(mj(S,w,c,g));return h}function Rg(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function hk(s,t,r){return s!==0?Yn(s):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}function fk(s){let t,r,n,o,c;return s.horizontal?(t=s.base>s.x,r="left",n="right"):(t=s.base<s.y,r="bottom",n="top"),t?(o="end",c="start"):(o="start",c="end"),{start:r,end:n,reverse:t,top:o,bottom:c}}function gk(s,t,r,n){let o=t.borderSkipped;const c={};if(!o){s.borderSkipped=c;return}if(o===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:d,end:m,reverse:h,top:g,bottom:y}=fk(s);o==="middle"&&r&&(s.enableBorderRadius=!0,(r._top||0)===n?o=g:(r._bottom||0)===n?o=y:(c[Ky(y,d,m,h)]=!0,o=g)),c[Ky(o,d,m,h)]=!0,s.borderSkipped=c}function Ky(s,t,r,n){return n?(s=xk(s,t,r),s=Yy(s,r,t)):s=Yy(s,t,r),s}function xk(s,t,r){return s===t?r:s===r?t:s}function Yy(s,t,r){return s==="start"?t:s==="end"?r:s}function pk(s,{inflateAmount:t},r){s.inflateAmount=t==="auto"?r===1?.33:0:t}class yk extends Qh{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,n,o){return qy(t,r,n,o)}parseArrayData(t,r,n,o){return qy(t,r,n,o)}parseObjectData(t,r,n,o){const{iScale:c,vScale:d}=t,{xAxisKey:m="x",yAxisKey:h="y"}=this._parsing,g=c.axis==="x"?m:h,y=d.axis==="x"?m:h,w=[];let S,_,E,z;for(S=n,_=n+o;S<_;++S)z=r[S],E={},E[c.axis]=c.parse(jl(z,g),S),w.push(mj(jl(z,y),E,d,S));return w}updateRangeFromParsed(t,r,n,o){super.updateRangeFromParsed(t,r,n,o);const c=n._custom;c&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,c.min),t.max=Math.max(t.max,c.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:n,vScale:o}=r,c=this.getParsed(t),d=c._custom,m=Rg(d)?"["+d.start+", "+d.end+"]":""+o.getLabelForValue(c[o.axis]);return{label:""+n.getLabelForValue(c[n.axis]),value:m}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,n,o){const c=o==="reset",{index:d,_cachedMeta:{vScale:m}}=this,h=m.getBasePixel(),g=m.isHorizontal(),y=this._getRuler(),{sharedOptions:w,includeOptions:S}=this._getSharedOptions(r,o);for(let _=r;_<r+n;_++){const E=this.getParsed(_),z=c||Ns(E[m.axis])?{base:h,head:h}:this._calculateBarValuePixels(_),I=this._calculateBarIndexPixels(_,y),U=(E._stacks||{})[m.axis],q={horizontal:g,base:z.base,enableBorderRadius:!U||Rg(E._custom)||d===U._top||d===U._bottom,x:g?z.head:I.center,y:g?I.center:z.head,height:g?I.size:Math.abs(z.size),width:g?Math.abs(z.size):I.size};S&&(q.options=w||this.resolveDataElementOptions(_,t[_].active?"active":o));const O=q.options||t[_].options;gk(q,O,U,d),pk(q,O,y.ratio),this.updateElement(t[_],_,q,o)}}_getStacks(t,r){const{iScale:n}=this._cachedMeta,o=n.getMatchingVisibleMetas(this._type).filter(y=>y.controller.options.grouped),c=n.options.stacked,d=[],m=this._cachedMeta.controller.getParsed(r),h=m&&m[n.axis],g=y=>{const w=y._parsed.find(_=>_[n.axis]===h),S=w&&w[y.vScale.axis];if(Ns(S)||isNaN(S))return!0};for(const y of o)if(!(r!==void 0&&g(y))&&((c===!1||d.indexOf(y.stack)===-1||c===void 0&&y.stack===void 0)&&d.push(y.stack),y.index===t))break;return d.length||d.push(void 0),d}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===r).shift()}_getAxis(){const t={},r=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[os(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,n){const o=this._getStacks(t,n),c=r!==void 0?o.indexOf(r):-1;return c===-1?o.length-1:c}_getRuler(){const t=this.options,r=this._cachedMeta,n=r.iScale,o=[];let c,d;for(c=0,d=r.data.length;c<d;++c)o.push(n.getPixelForValue(this.getParsed(c)[n.axis],c));const m=t.barThickness;return{min:m||ck(r),pixels:o,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:m?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:n,index:o},options:{base:c,minBarLength:d}}=this,m=c||0,h=this.getParsed(t),g=h._custom,y=Rg(g);let w=h[r.axis],S=0,_=n?this.applyStack(r,h,n):w,E,z;_!==w&&(S=_-w,_=w),y&&(w=g.barStart,_=g.barEnd-g.barStart,w!==0&&Yn(w)!==Yn(g.barEnd)&&(S=0),S+=w);const I=!Ns(c)&&!y?c:S;let U=r.getPixelForValue(I);if(this.chart.getDataVisibility(t)?E=r.getPixelForValue(S+_):E=U,z=E-U,Math.abs(z)<d){z=hk(z,r,m)*d,w===m&&(U-=z/2);const q=r.getPixelForDecimal(0),O=r.getPixelForDecimal(1),R=Math.min(q,O),M=Math.max(q,O);U=Math.max(Math.min(U,M),R),E=U+z,n&&!y&&(h._stacks[r.axis]._visualValues[o]=r.getValueForPixel(E)-r.getValueForPixel(U))}if(U===r.getPixelForValue(m)){const q=Yn(z)*r.getLineWidthForValue(m)/2;U+=q,z-=q}return{size:z,base:U,head:E,center:E+z/2}}_calculateBarIndexPixels(t,r){const n=r.scale,o=this.options,c=o.skipNull,d=os(o.maxBarThickness,1/0);let m,h;const g=this._getAxisCount();if(r.grouped){const y=c?this._getStackCount(t):r.stackCount,w=o.barThickness==="flex"?uk(t,r,o,y*g):dk(t,r,o,y*g),S=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,_=this._getAxis().indexOf(os(S,this.getFirstScaleIdForIndexAxis())),E=this._getStackIndex(this.index,this._cachedMeta.stack,c?t:void 0)+_;m=w.start+w.chunk*E+w.chunk/2,h=Math.min(d,w.chunk*w.ratio)}else m=n.getPixelForValue(this.getParsed(t)[n.axis],t),h=Math.min(d,r.min*r.ratio);return{base:m-h/2,head:m+h/2,center:m,size:h}}draw(){const t=this._cachedMeta,r=t.vScale,n=t.data,o=n.length;let c=0;for(;c<o;++c)this.getParsed(c)[r.axis]!==null&&!n[c].hidden&&n[c].draw(this._ctx)}}function bk(s,t,r){let n=1,o=1,c=0,d=0;if(t<Hs){const m=s,h=m+t,g=Math.cos(m),y=Math.sin(m),w=Math.cos(h),S=Math.sin(h),_=(O,R,M)=>_u(O,m,h,!0)?1:Math.max(R,R*r,M,M*r),E=(O,R,M)=>_u(O,m,h,!0)?-1:Math.min(R,R*r,M,M*r),z=_(0,g,w),I=_(pa,y,S),U=E(_s,g,w),q=E(_s+pa,y,S);n=(z-U)/2,o=(I-q)/2,c=-(z+U)/2,d=-(I+q)/2}return{ratioX:n,ratioY:o,offsetX:c,offsetY:d}}class vk extends Qh{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const r=t.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:o}}=t.legend.options;return r.labels.map((c,d)=>{const h=t.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:o,lineWidth:h.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(d),index:d}})}return[]}},onClick(t,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){const n=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=n;else{let c=h=>+n[h];if(fs(n[t])){const{key:h="value"}=this._parsing;c=g=>+jl(n[g],h)}let d,m;for(d=t,m=t+r;d<m;++d)o._parsed[d]=c(d)}}_getRotation(){return ji(this.options.rotation-90)}_getCircumference(){return ji(this.options.circumference)}_getRotationExtents(){let t=Hs,r=-Hs;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const o=this.chart.getDatasetMeta(n).controller,c=o._getRotation(),d=o._getCircumference();t=Math.min(t,c),r=Math.max(r,c+d)}return{rotation:t,circumference:r-t}}update(t){const r=this.chart,{chartArea:n}=r,o=this._cachedMeta,c=o.data,d=this.getMaxBorderWidth()+this.getMaxOffset(c)+this.options.spacing,m=Math.max((Math.min(n.width,n.height)-d)/2,0),h=Math.min(k3(this.options.cutout,m),1),g=this._getRingWeight(this.index),{circumference:y,rotation:w}=this._getRotationExtents(),{ratioX:S,ratioY:_,offsetX:E,offsetY:z}=bk(w,y,h),I=(n.width-d)/S,U=(n.height-d)/_,q=Math.max(Math.min(I,U)/2,0),O=$v(this.options.radius,q),R=Math.max(O*h,0),M=(O-R)/this._getVisibleDatasetWeightTotal();this.offsetX=E*O,this.offsetY=z*O,o.total=this.calculateTotal(),this.outerRadius=O-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*g,0),this.updateElements(c,0,c.length,t)}_circumference(t,r){const n=this.options,o=this._cachedMeta,c=this._getCircumference();return r&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*c/Hs)}updateElements(t,r,n,o){const c=o==="reset",d=this.chart,m=d.chartArea,g=d.options.animation,y=(m.left+m.right)/2,w=(m.top+m.bottom)/2,S=c&&g.animateScale,_=S?0:this.innerRadius,E=S?0:this.outerRadius,{sharedOptions:z,includeOptions:I}=this._getSharedOptions(r,o);let U=this._getRotation(),q;for(q=0;q<r;++q)U+=this._circumference(q,c);for(q=r;q<r+n;++q){const O=this._circumference(q,c),R=t[q],M={x:y+this.offsetX,y:w+this.offsetY,startAngle:U,endAngle:U+O,circumference:O,outerRadius:E,innerRadius:_};I&&(M.options=z||this.resolveDataElementOptions(q,R.active?"active":o)),U+=O,this.updateElement(R,q,M,o)}}calculateTotal(){const t=this._cachedMeta,r=t.data;let n=0,o;for(o=0;o<r.length;o++){const c=t._parsed[o];c!==null&&!isNaN(c)&&this.chart.getDataVisibility(o)&&!r[o].hidden&&(n+=Math.abs(c))}return n}calculateCircumference(t){const r=this._cachedMeta.total;return r>0&&!isNaN(t)?Hs*(Math.abs(t)/r):0}getLabelAndValue(t){const r=this._cachedMeta,n=this.chart,o=n.data.labels||[],c=Lx(r._parsed[t],n.options.locale);return{label:o[t]||"",value:c}}getMaxBorderWidth(t){let r=0;const n=this.chart;let o,c,d,m,h;if(!t){for(o=0,c=n.data.datasets.length;o<c;++o)if(n.isDatasetVisible(o)){d=n.getDatasetMeta(o),t=d.data,m=d.controller;break}}if(!t)return 0;for(o=0,c=t.length;o<c;++o)h=m.resolveDataElementOptions(o),h.borderAlign!=="inner"&&(r=Math.max(r,h.borderWidth||0,h.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let n=0,o=t.length;n<o;++n){const c=this.resolveDataElementOptions(n);r=Math.max(r,c.offset||0,c.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(r+=this._getRingWeight(n));return r}_getRingWeight(t){return Math.max(os(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class jk extends Qh{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:n,data:o=[],_dataset:c}=r,d=this.chart._animationsDisabled;let{start:m,count:h}=K3(r,o,d);this._drawStart=m,this._drawCount=h,Y3(r)&&(m=0,h=o.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!c._decimated,n.points=o;const g=this.resolveDatasetElementOptions(t);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(n,void 0,{animated:!d,options:g},t),this.updateElements(o,m,h,t)}updateElements(t,r,n,o){const c=o==="reset",{iScale:d,vScale:m,_stacked:h,_dataset:g}=this._cachedMeta,{sharedOptions:y,includeOptions:w}=this._getSharedOptions(r,o),S=d.axis,_=m.axis,{spanGaps:E,segment:z}=this.options,I=ku(E)?E:Number.POSITIVE_INFINITY,U=this.chart._animationsDisabled||c||o==="none",q=r+n,O=t.length;let R=r>0&&this.getParsed(r-1);for(let M=0;M<O;++M){const P=t[M],ee=U?P:{};if(M<r||M>=q){ee.skip=!0;continue}const oe=this.getParsed(M),je=Ns(oe[_]),de=ee[S]=d.getPixelForValue(oe[S],M),re=ee[_]=c||je?m.getBasePixel():m.getPixelForValue(h?this.applyStack(m,oe,h):oe[_],M);ee.skip=isNaN(de)||isNaN(re)||je,ee.stop=M>0&&Math.abs(oe[S]-R[S])>I,z&&(ee.parsed=oe,ee.raw=g.data[M]),w&&(ee.options=y||this.resolveDataElementOptions(M,P.active?"active":o)),U||this.updateElement(P,M,ee,o),R=oe}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,n=r.options&&r.options.borderWidth||0,o=t.data||[];if(!o.length)return n;const c=o[0].size(this.resolveDataElementOptions(0)),d=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(n,c,d)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function dl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Kx{static override(t){Object.assign(Kx.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return dl()}parse(){return dl()}format(){return dl()}add(){return dl()}diff(){return dl()}startOf(){return dl()}endOf(){return dl()}}var wk={_date:Kx};function Nk(s,t,r,n){const{controller:o,data:c,_sorted:d}=s,m=o._cachedMeta.iScale,h=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(m&&t===m.axis&&t!=="r"&&d&&c.length){const g=m._reversePixels?U3:xl;if(n){if(o._sharedOptions){const y=c[0],w=typeof y.getRange=="function"&&y.getRange(t);if(w){const S=g(c,t,r-w),_=g(c,t,r+w);return{lo:S.lo,hi:_.hi}}}}else{const y=g(c,t,r);if(h){const{vScale:w}=o._cachedMeta,{_parsed:S}=s,_=S.slice(0,y.lo+1).reverse().findIndex(z=>!Ns(z[w.axis]));y.lo-=Math.max(0,_);const E=S.slice(y.hi).findIndex(z=>!Ns(z[w.axis]));y.hi+=Math.max(0,E)}return y}}return{lo:0,hi:c.length-1}}function Zh(s,t,r,n,o){const c=s.getSortedVisibleDatasetMetas(),d=r[t];for(let m=0,h=c.length;m<h;++m){const{index:g,data:y}=c[m],{lo:w,hi:S}=Nk(c[m],t,d,o);for(let _=w;_<=S;++_){const E=y[_];E.skip||n(E,g,_)}}}function Sk(s){const t=s.indexOf("x")!==-1,r=s.indexOf("y")!==-1;return function(n,o){const c=t?Math.abs(n.x-o.x):0,d=r?Math.abs(n.y-o.y):0;return Math.sqrt(Math.pow(c,2)+Math.pow(d,2))}}function Ig(s,t,r,n,o){const c=[];return!o&&!s.isPointInArea(t)||Zh(s,r,t,function(m,h,g){!o&&!Au(m,s.chartArea,0)||m.inRange(t.x,t.y,n)&&c.push({element:m,datasetIndex:h,index:g})},!0),c}function Ck(s,t,r,n){let o=[];function c(d,m,h){const{startAngle:g,endAngle:y}=d.getProps(["startAngle","endAngle"],n),{angle:w}=qv(d,{x:t.x,y:t.y});_u(w,g,y)&&o.push({element:d,datasetIndex:m,index:h})}return Zh(s,r,t,c),o}function kk(s,t,r,n,o,c){let d=[];const m=Sk(r);let h=Number.POSITIVE_INFINITY;function g(y,w,S){const _=y.inRange(t.x,t.y,o);if(n&&!_)return;const E=y.getCenterPoint(o);if(!(!!c||s.isPointInArea(E))&&!_)return;const I=m(t,E);I<h?(d=[{element:y,datasetIndex:w,index:S}],h=I):I===h&&d.push({element:y,datasetIndex:w,index:S})}return Zh(s,r,t,g),d}function zg(s,t,r,n,o,c){return!c&&!s.isPointInArea(t)?[]:r==="r"&&!n?Ck(s,t,r,o):kk(s,t,r,n,o,c)}function Gy(s,t,r,n,o){const c=[],d=r==="x"?"inXRange":"inYRange";let m=!1;return Zh(s,r,t,(h,g,y)=>{h[d]&&h[d](t[r],o)&&(c.push({element:h,datasetIndex:g,index:y}),m=m||h.inRange(t.x,t.y,o))}),n&&!m?[]:c}var _k={modes:{index(s,t,r,n){const o=ml(t,s),c=r.axis||"x",d=r.includeInvisible||!1,m=r.intersect?Ig(s,o,c,n,d):zg(s,o,c,!1,n,d),h=[];return m.length?(s.getSortedVisibleDatasetMetas().forEach(g=>{const y=m[0].index,w=g.data[y];w&&!w.skip&&h.push({element:w,datasetIndex:g.index,index:y})}),h):[]},dataset(s,t,r,n){const o=ml(t,s),c=r.axis||"xy",d=r.includeInvisible||!1;let m=r.intersect?Ig(s,o,c,n,d):zg(s,o,c,!1,n,d);if(m.length>0){const h=m[0].datasetIndex,g=s.getDatasetMeta(h).data;m=[];for(let y=0;y<g.length;++y)m.push({element:g[y],datasetIndex:h,index:y})}return m},point(s,t,r,n){const o=ml(t,s),c=r.axis||"xy",d=r.includeInvisible||!1;return Ig(s,o,c,n,d)},nearest(s,t,r,n){const o=ml(t,s),c=r.axis||"xy",d=r.includeInvisible||!1;return zg(s,o,c,r.intersect,n,d)},x(s,t,r,n){const o=ml(t,s);return Gy(s,o,"x",r.intersect,n)},y(s,t,r,n){const o=ml(t,s);return Gy(s,o,"y",r.intersect,n)}}};const hj=["left","top","right","bottom"];function su(s,t){return s.filter(r=>r.pos===t)}function Wy(s,t){return s.filter(r=>hj.indexOf(r.pos)===-1&&r.box.axis===t)}function au(s,t){return s.sort((r,n)=>{const o=t?n:r,c=t?r:n;return o.weight===c.weight?o.index-c.index:o.weight-c.weight})}function Ak(s){const t=[];let r,n,o,c,d,m;for(r=0,n=(s||[]).length;r<n;++r)o=s[r],{position:c,options:{stack:d,stackWeight:m=1}}=o,t.push({index:r,box:o,pos:c,horizontal:o.isHorizontal(),weight:o.weight,stack:d&&c+d,stackWeight:m});return t}function Dk(s){const t={};for(const r of s){const{stack:n,pos:o,stackWeight:c}=r;if(!n||!hj.includes(o))continue;const d=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});d.count++,d.weight+=c}return t}function Ek(s,t){const r=Dk(s),{vBoxMaxWidth:n,hBoxMaxHeight:o}=t;let c,d,m;for(c=0,d=s.length;c<d;++c){m=s[c];const{fullSize:h}=m.box,g=r[m.stack],y=g&&m.stackWeight/g.weight;m.horizontal?(m.width=y?y*n:h&&t.availableWidth,m.height=o):(m.width=n,m.height=y?y*o:h&&t.availableHeight)}return r}function Tk(s){const t=Ak(s),r=au(t.filter(g=>g.box.fullSize),!0),n=au(su(t,"left"),!0),o=au(su(t,"right")),c=au(su(t,"top"),!0),d=au(su(t,"bottom")),m=Wy(t,"x"),h=Wy(t,"y");return{fullSize:r,leftAndTop:n.concat(c),rightAndBottom:o.concat(h).concat(d).concat(m),chartArea:su(t,"chartArea"),vertical:n.concat(o).concat(h),horizontal:c.concat(d).concat(m)}}function Xy(s,t,r,n){return Math.max(s[r],t[r])+Math.max(s[n],t[n])}function fj(s,t){s.top=Math.max(s.top,t.top),s.left=Math.max(s.left,t.left),s.bottom=Math.max(s.bottom,t.bottom),s.right=Math.max(s.right,t.right)}function Mk(s,t,r,n){const{pos:o,box:c}=r,d=s.maxPadding;if(!fs(o)){r.size&&(s[o]-=r.size);const w=n[r.stack]||{size:0,count:1};w.size=Math.max(w.size,r.horizontal?c.height:c.width),r.size=w.size/w.count,s[o]+=r.size}c.getPadding&&fj(d,c.getPadding());const m=Math.max(0,t.outerWidth-Xy(d,s,"left","right")),h=Math.max(0,t.outerHeight-Xy(d,s,"top","bottom")),g=m!==s.w,y=h!==s.h;return s.w=m,s.h=h,r.horizontal?{same:g,other:y}:{same:y,other:g}}function Ok(s){const t=s.maxPadding;function r(n){const o=Math.max(t[n]-s[n],0);return s[n]+=o,o}s.y+=r("top"),s.x+=r("left"),r("right"),r("bottom")}function Rk(s,t){const r=t.maxPadding;function n(o){const c={left:0,top:0,right:0,bottom:0};return o.forEach(d=>{c[d]=Math.max(t[d],r[d])}),c}return n(s?["left","right"]:["top","bottom"])}function cu(s,t,r,n){const o=[];let c,d,m,h,g,y;for(c=0,d=s.length,g=0;c<d;++c){m=s[c],h=m.box,h.update(m.width||t.w,m.height||t.h,Rk(m.horizontal,t));const{same:w,other:S}=Mk(t,r,m,n);g|=w&&o.length,y=y||S,h.fullSize||o.push(m)}return g&&cu(o,t,r,n)||y}function dh(s,t,r,n,o){s.top=r,s.left=t,s.right=t+n,s.bottom=r+o,s.width=n,s.height=o}function Qy(s,t,r,n){const o=r.padding;let{x:c,y:d}=t;for(const m of s){const h=m.box,g=n[m.stack]||{placed:0,weight:1},y=m.stackWeight/g.weight||1;if(m.horizontal){const w=t.w*y,S=g.size||h.height;Cu(g.start)&&(d=g.start),h.fullSize?dh(h,o.left,d,r.outerWidth-o.right-o.left,S):dh(h,t.left+g.placed,d,w,S),g.start=d,g.placed+=w,d=h.bottom}else{const w=t.h*y,S=g.size||h.width;Cu(g.start)&&(c=g.start),h.fullSize?dh(h,c,o.top,S,r.outerHeight-o.bottom-o.top):dh(h,c,t.top+g.placed,S,w),g.start=c,g.placed+=w,c=h.right}}t.x=c,t.y=d}var tn={addBox(s,t){s.boxes||(s.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(r){t.draw(r)}}]},s.boxes.push(t)},removeBox(s,t){const r=s.boxes?s.boxes.indexOf(t):-1;r!==-1&&s.boxes.splice(r,1)},configure(s,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(s,t,r,n){if(!s)return;const o=rn(s.options.layout.padding),c=Math.max(t-o.width,0),d=Math.max(r-o.height,0),m=Tk(s.boxes),h=m.vertical,g=m.horizontal;ks(s.boxes,z=>{typeof z.beforeLayout=="function"&&z.beforeLayout()});const y=h.reduce((z,I)=>I.box.options&&I.box.options.display===!1?z:z+1,0)||1,w=Object.freeze({outerWidth:t,outerHeight:r,padding:o,availableWidth:c,availableHeight:d,vBoxMaxWidth:c/2/y,hBoxMaxHeight:d/2}),S=Object.assign({},o);fj(S,rn(n));const _=Object.assign({maxPadding:S,w:c,h:d,x:o.left,y:o.top},o),E=Ek(h.concat(g),w);cu(m.fullSize,_,w,E),cu(h,_,w,E),cu(g,_,w,E)&&cu(h,_,w,E),Ok(_),Qy(m.leftAndTop,_,w,E),_.x+=_.w,_.y+=_.h,Qy(m.rightAndBottom,_,w,E),s.chartArea={left:_.left,top:_.top,right:_.left+_.w,bottom:_.top+_.h,height:_.h,width:_.w},ks(m.chartArea,z=>{const I=z.box;Object.assign(I,s.chartArea),I.update(_.w,_.h,{left:0,top:0,right:0,bottom:0})})}};class gj{acquireContext(t,r){}releaseContext(t){return!1}addEventListener(t,r,n){}removeEventListener(t,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,r,n,o){return r=Math.max(0,r||t.width),n=n||t.height,{width:r,height:Math.max(0,o?Math.floor(r/o):n)}}isAttached(t){return!0}updateConfig(t){}}class Ik extends gj{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Sh="$chartjs",zk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Zy=s=>s===null||s==="";function Pk(s,t){const r=s.style,n=s.getAttribute("height"),o=s.getAttribute("width");if(s[Sh]={initial:{height:n,width:o,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",Zy(o)){const c=Iy(s,"width");c!==void 0&&(s.width=c)}if(Zy(n))if(s.style.height==="")s.height=s.width/(t||2);else{const c=Iy(s,"height");c!==void 0&&(s.height=c)}return s}const xj=z4?{passive:!0}:!1;function Fk(s,t,r){s&&s.addEventListener(t,r,xj)}function Lk(s,t,r){s&&s.canvas&&s.canvas.removeEventListener(t,r,xj)}function Bk(s,t){const r=zk[s.type]||s.type,{x:n,y:o}=ml(s,t);return{type:r,chart:t,native:s,x:n!==void 0?n:null,y:o!==void 0?o:null}}function Ph(s,t){for(const r of s)if(r===t||r.contains(t))return!0}function Uk(s,t,r){const n=s.canvas,o=new MutationObserver(c=>{let d=!1;for(const m of c)d=d||Ph(m.addedNodes,n),d=d&&!Ph(m.removedNodes,n);d&&r()});return o.observe(document,{childList:!0,subtree:!0}),o}function $k(s,t,r){const n=s.canvas,o=new MutationObserver(c=>{let d=!1;for(const m of c)d=d||Ph(m.removedNodes,n),d=d&&!Ph(m.addedNodes,n);d&&r()});return o.observe(document,{childList:!0,subtree:!0}),o}const Eu=new Map;let Jy=0;function pj(){const s=window.devicePixelRatio;s!==Jy&&(Jy=s,Eu.forEach((t,r)=>{r.currentDevicePixelRatio!==s&&t()}))}function Hk(s,t){Eu.size||window.addEventListener("resize",pj),Eu.set(s,t)}function Vk(s){Eu.delete(s),Eu.size||window.removeEventListener("resize",pj)}function qk(s,t,r){const n=s.canvas,o=n&&qx(n);if(!o)return;const c=Wv((m,h)=>{const g=o.clientWidth;r(m,h),g<o.clientWidth&&r()},window),d=new ResizeObserver(m=>{const h=m[0],g=h.contentRect.width,y=h.contentRect.height;g===0&&y===0||c(g,y)});return d.observe(o),Hk(s,c),d}function Pg(s,t,r){r&&r.disconnect(),t==="resize"&&Vk(s)}function Kk(s,t,r){const n=s.canvas,o=Wv(c=>{s.ctx!==null&&r(Bk(c,s))},s);return Fk(n,t,o),o}class Yk extends gj{acquireContext(t,r){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(Pk(t,r),n):null}releaseContext(t){const r=t.canvas;if(!r[Sh])return!1;const n=r[Sh].initial;["height","width"].forEach(c=>{const d=n[c];Ns(d)?r.removeAttribute(c):r.setAttribute(c,d)});const o=n.style||{};return Object.keys(o).forEach(c=>{r.style[c]=o[c]}),r.width=r.width,delete r[Sh],!0}addEventListener(t,r,n){this.removeEventListener(t,r);const o=t.$proxies||(t.$proxies={}),d={attach:Uk,detach:$k,resize:qk}[r]||Kk;o[r]=d(t,r,n)}removeEventListener(t,r){const n=t.$proxies||(t.$proxies={}),o=n[r];if(!o)return;({attach:Pg,detach:Pg,resize:Pg}[r]||Lk)(t,r,o),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,r,n,o){return I4(t,r,n,o)}isAttached(t){const r=t&&qx(t);return!!(r&&r.isConnected)}}function Gk(s){return!Vx()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?Ik:Yk}let ki=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:r,y:n}=this.getProps(["x","y"],t);return{x:r,y:n}}hasValue(){return ku(this.x)&&ku(this.y)}getProps(t,r){const n=this.$animations;if(!r||!n)return this;const o={};return t.forEach(c=>{o[c]=n[c]&&n[c].active()?n[c]._to:this[c]}),o}};function Wk(s,t){const r=s.options.ticks,n=Xk(s),o=Math.min(r.maxTicksLimit||n,n),c=r.major.enabled?Zk(t):[],d=c.length,m=c[0],h=c[d-1],g=[];if(d>o)return Jk(t,g,c,d/o),g;const y=Qk(c,t,o);if(d>0){let w,S;const _=d>1?Math.round((h-m)/(d-1)):null;for(uh(t,g,y,Ns(_)?0:m-_,m),w=0,S=d-1;w<S;w++)uh(t,g,y,c[w],c[w+1]);return uh(t,g,y,h,Ns(_)?t.length:h+_),g}return uh(t,g,y),g}function Xk(s){const t=s.options.offset,r=s._tickSize(),n=s._length/r+(t?0:1),o=s._maxLength/r;return Math.floor(Math.min(n,o))}function Qk(s,t,r){const n=e_(s),o=t.length/r;if(!n)return Math.max(o,1);const c=R3(n);for(let d=0,m=c.length-1;d<m;d++){const h=c[d];if(h>o)return h}return Math.max(o,1)}function Zk(s){const t=[];let r,n;for(r=0,n=s.length;r<n;r++)s[r].major&&t.push(r);return t}function Jk(s,t,r,n){let o=0,c=r[0],d;for(n=Math.ceil(n),d=0;d<s.length;d++)d===c&&(t.push(s[d]),o++,c=r[o*n])}function uh(s,t,r,n,o){const c=os(n,0),d=Math.min(os(o,s.length),s.length);let m=0,h,g,y;for(r=Math.ceil(r),o&&(h=o-n,r=h/Math.floor(h/r)),y=c;y<0;)m++,y=Math.round(c+m*r);for(g=Math.max(c,0);g<d;g++)g===y&&(t.push(s[g]),m++,y=Math.round(c+m*r))}function e_(s){const t=s.length;let r,n;if(t<2)return!1;for(n=s[0],r=1;r<t;++r)if(s[r]-s[r-1]!==n)return!1;return n}const t_=s=>s==="left"?"right":s==="right"?"left":s,eb=(s,t,r)=>t==="top"||t==="left"?s[t]+r:s[t]-r,tb=(s,t)=>Math.min(t||s,s);function sb(s,t){const r=[],n=s.length/t,o=s.length;let c=0;for(;c<o;c+=n)r.push(s[Math.floor(c)]);return r}function s_(s,t,r){const n=s.ticks.length,o=Math.min(t,n-1),c=s._startPixel,d=s._endPixel,m=1e-6;let h=s.getPixelForTick(o),g;if(!(r&&(n===1?g=Math.max(h-c,d-h):t===0?g=(s.getPixelForTick(1)-h)/2:g=(h-s.getPixelForTick(o-1))/2,h+=o<t?g:-g,h<c-m||h>d+m)))return h}function a_(s,t){ks(s,r=>{const n=r.gc,o=n.length/2;let c;if(o>t){for(c=0;c<o;++c)delete r.data[n[c]];n.splice(0,o)}})}function ru(s){return s.drawTicks?s.tickLength:0}function ab(s,t){if(!s.display)return 0;const r=Ga(s.font,t),n=rn(s.padding);return(ca(s.text)?s.text.length:1)*r.lineHeight+n.height}function r_(s,t){return Sl(s,{scale:t,type:"scale"})}function n_(s,t,r){return Sl(s,{tick:r,index:t,type:"tick"})}function i_(s,t,r){let n=Px(s);return(r&&t!=="right"||!r&&t==="right")&&(n=t_(n)),n}function o_(s,t,r,n){const{top:o,left:c,bottom:d,right:m,chart:h}=s,{chartArea:g,scales:y}=h;let w=0,S,_,E;const z=d-o,I=m-c;if(s.isHorizontal()){if(_=Ka(n,c,m),fs(r)){const U=Object.keys(r)[0],q=r[U];E=y[U].getPixelForValue(q)+z-t}else r==="center"?E=(g.bottom+g.top)/2+z-t:E=eb(s,r,t);S=m-c}else{if(fs(r)){const U=Object.keys(r)[0],q=r[U];_=y[U].getPixelForValue(q)-I+t}else r==="center"?_=(g.left+g.right)/2-I+t:_=eb(s,r,t);E=Ka(n,d,o),w=r==="left"?-pa:pa}return{titleX:_,titleY:E,maxWidth:S,rotation:w}}class Bc extends ki{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,r){return t}getUserBounds(){let{_userMin:t,_userMax:r,_suggestedMin:n,_suggestedMax:o}=this;return t=Hn(t,Number.POSITIVE_INFINITY),r=Hn(r,Number.NEGATIVE_INFINITY),n=Hn(n,Number.POSITIVE_INFINITY),o=Hn(o,Number.NEGATIVE_INFINITY),{min:Hn(t,n),max:Hn(r,o),minDefined:Wa(t),maxDefined:Wa(r)}}getMinMax(t){let{min:r,max:n,minDefined:o,maxDefined:c}=this.getUserBounds(),d;if(o&&c)return{min:r,max:n};const m=this.getMatchingVisibleMetas();for(let h=0,g=m.length;h<g;++h)d=m[h].controller.getMinMax(this,t),o||(r=Math.min(r,d.min)),c||(n=Math.max(n,d.max));return r=c&&r>n?n:r,n=o&&r>n?r:n,{min:Hn(r,Hn(n,r)),max:Hn(n,Hn(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ps(this.options.beforeUpdate,[this])}update(t,r,n){const{beginAtZero:o,grace:c,ticks:d}=this.options,m=d.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=h4(this,c,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=m<this.ticks.length;this._convertTicksToLabels(h?sb(this.ticks,m):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),d.display&&(d.autoSkip||d.source==="auto")&&(this.ticks=Wk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,t=!t),this._startPixel=r,this._endPixel=n,this._reversePixels=t,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ps(this.options.afterUpdate,[this])}beforeSetDimensions(){Ps(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ps(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ps(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ps(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const r=this.options.ticks;let n,o,c;for(n=0,o=t.length;n<o;n++)c=t[n],c.label=Ps(r.callback,[c.value,n,t],this)}afterTickToLabelConversion(){Ps(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ps(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,r=t.ticks,n=tb(this.ticks.length,t.ticks.maxTicksLimit),o=r.minRotation||0,c=r.maxRotation;let d=o,m,h,g;if(!this._isVisible()||!r.display||o>=c||n<=1||!this.isHorizontal()){this.labelRotation=o;return}const y=this._getLabelSizes(),w=y.widest.width,S=y.highest.height,_=Ya(this.chart.width-w,0,this.maxWidth);m=t.offset?this.maxWidth/n:_/(n-1),w+6>m&&(m=_/(n-(t.offset?.5:1)),h=this.maxHeight-ru(t.grid)-r.padding-ab(t.title,this.chart.options.font),g=Math.sqrt(w*w+S*S),d=F3(Math.min(Math.asin(Ya((y.highest.height+6)/m,-1,1)),Math.asin(Ya(h/g,-1,1))-Math.asin(Ya(S/g,-1,1)))),d=Math.max(o,Math.min(c,d))),this.labelRotation=d}afterCalculateLabelRotation(){Ps(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ps(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:r,options:{ticks:n,title:o,grid:c}}=this,d=this._isVisible(),m=this.isHorizontal();if(d){const h=ab(o,r.options.font);if(m?(t.width=this.maxWidth,t.height=ru(c)+h):(t.height=this.maxHeight,t.width=ru(c)+h),n.display&&this.ticks.length){const{first:g,last:y,widest:w,highest:S}=this._getLabelSizes(),_=n.padding*2,E=ji(this.labelRotation),z=Math.cos(E),I=Math.sin(E);if(m){const U=n.mirror?0:I*w.width+z*S.height;t.height=Math.min(this.maxHeight,t.height+U+_)}else{const U=n.mirror?0:z*w.width+I*S.height;t.width=Math.min(this.maxWidth,t.width+U+_)}this._calculatePadding(g,y,I,z)}}this._handleMargins(),m?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,r,n,o){const{ticks:{align:c,padding:d},position:m}=this.options,h=this.labelRotation!==0,g=m!=="top"&&this.axis==="x";if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,w=this.right-this.getPixelForTick(this.ticks.length-1);let S=0,_=0;h?g?(S=o*t.width,_=n*r.height):(S=n*t.height,_=o*r.width):c==="start"?_=r.width:c==="end"?S=t.width:c!=="inner"&&(S=t.width/2,_=r.width/2),this.paddingLeft=Math.max((S-y+d)*this.width/(this.width-y),0),this.paddingRight=Math.max((_-w+d)*this.width/(this.width-w),0)}else{let y=r.height/2,w=t.height/2;c==="start"?(y=0,w=t.height):c==="end"&&(y=r.height,w=0),this.paddingTop=y+d,this.paddingBottom=w+d}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ps(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:r}=this.options;return r==="top"||r==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let r,n;for(r=0,n=t.length;r<n;r++)Ns(t[r].label)&&(t.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=sb(n,r)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,r,n){const{ctx:o,_longestTextCache:c}=this,d=[],m=[],h=Math.floor(r/tb(r,n));let g=0,y=0,w,S,_,E,z,I,U,q,O,R,M;for(w=0;w<r;w+=h){if(E=t[w].label,z=this._resolveTickFontOptions(w),o.font=I=z.string,U=c[I]=c[I]||{data:{},gc:[]},q=z.lineHeight,O=R=0,!Ns(E)&&!ca(E))O=Ey(o,U.data,U.gc,O,E),R=q;else if(ca(E))for(S=0,_=E.length;S<_;++S)M=E[S],!Ns(M)&&!ca(M)&&(O=Ey(o,U.data,U.gc,O,M),R+=q);d.push(O),m.push(R),g=Math.max(O,g),y=Math.max(R,y)}a_(c,r);const P=d.indexOf(g),ee=m.indexOf(y),oe=je=>({width:d[je]||0,height:m[je]||0});return{first:oe(0),last:oe(r-1),widest:oe(P),highest:oe(ee),widths:d,heights:m}}getLabelForValue(t){return t}getPixelForValue(t,r){return NaN}getValueForPixel(t){}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const r=this._startPixel+t*this._length;return B3(this._alignToPixels?cl(this.chart,r,0):r)}getDecimalForPixel(t){const r=(t-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:r}=this;return t<0&&r<0?r:t>0&&r>0?t:0}getContext(t){const r=this.ticks||[];if(t>=0&&t<r.length){const n=r[t];return n.$context||(n.$context=n_(this.getContext(),t,n))}return this.$context||(this.$context=r_(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,r=ji(this.labelRotation),n=Math.abs(Math.cos(r)),o=Math.abs(Math.sin(r)),c=this._getLabelSizes(),d=t.autoSkipPadding||0,m=c?c.widest.width+d:0,h=c?c.highest.height+d:0;return this.isHorizontal()?h*n>m*o?m/n:h/o:h*o<m*n?h/n:m/o}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const r=this.axis,n=this.chart,o=this.options,{grid:c,position:d,border:m}=o,h=c.offset,g=this.isHorizontal(),w=this.ticks.length+(h?1:0),S=ru(c),_=[],E=m.setContext(this.getContext()),z=E.display?E.width:0,I=z/2,U=function(se){return cl(n,se,z)};let q,O,R,M,P,ee,oe,je,de,re,Te,De;if(d==="top")q=U(this.bottom),ee=this.bottom-S,je=q-I,re=U(t.top)+I,De=t.bottom;else if(d==="bottom")q=U(this.top),re=t.top,De=U(t.bottom)-I,ee=q+I,je=this.top+S;else if(d==="left")q=U(this.right),P=this.right-S,oe=q-I,de=U(t.left)+I,Te=t.right;else if(d==="right")q=U(this.left),de=t.left,Te=U(t.right)-I,P=q+I,oe=this.left+S;else if(r==="x"){if(d==="center")q=U((t.top+t.bottom)/2+.5);else if(fs(d)){const se=Object.keys(d)[0],Ae=d[se];q=U(this.chart.scales[se].getPixelForValue(Ae))}re=t.top,De=t.bottom,ee=q+I,je=ee+S}else if(r==="y"){if(d==="center")q=U((t.left+t.right)/2);else if(fs(d)){const se=Object.keys(d)[0],Ae=d[se];q=U(this.chart.scales[se].getPixelForValue(Ae))}P=q-I,oe=P-S,de=t.left,Te=t.right}const ne=os(o.ticks.maxTicksLimit,w),ue=Math.max(1,Math.ceil(w/ne));for(O=0;O<w;O+=ue){const se=this.getContext(O),Ae=c.setContext(se),Se=m.setContext(se),$e=Ae.lineWidth,Q=Ae.color,xe=Se.dash||[],ve=Se.dashOffset,ae=Ae.tickWidth,Ce=Ae.tickColor,pe=Ae.tickBorderDash||[],k=Ae.tickBorderDashOffset;R=s_(this,O,h),R!==void 0&&(M=cl(n,R,$e),g?P=oe=de=Te=M:ee=je=re=De=M,_.push({tx1:P,ty1:ee,tx2:oe,ty2:je,x1:de,y1:re,x2:Te,y2:De,width:$e,color:Q,borderDash:xe,borderDashOffset:ve,tickWidth:ae,tickColor:Ce,tickBorderDash:pe,tickBorderDashOffset:k}))}return this._ticksLength=w,this._borderValue=q,_}_computeLabelItems(t){const r=this.axis,n=this.options,{position:o,ticks:c}=n,d=this.isHorizontal(),m=this.ticks,{align:h,crossAlign:g,padding:y,mirror:w}=c,S=ru(n.grid),_=S+y,E=w?-y:_,z=-ji(this.labelRotation),I=[];let U,q,O,R,M,P,ee,oe,je,de,re,Te,De="middle";if(o==="top")P=this.bottom-E,ee=this._getXAxisLabelAlignment();else if(o==="bottom")P=this.top+E,ee=this._getXAxisLabelAlignment();else if(o==="left"){const ue=this._getYAxisLabelAlignment(S);ee=ue.textAlign,M=ue.x}else if(o==="right"){const ue=this._getYAxisLabelAlignment(S);ee=ue.textAlign,M=ue.x}else if(r==="x"){if(o==="center")P=(t.top+t.bottom)/2+_;else if(fs(o)){const ue=Object.keys(o)[0],se=o[ue];P=this.chart.scales[ue].getPixelForValue(se)+_}ee=this._getXAxisLabelAlignment()}else if(r==="y"){if(o==="center")M=(t.left+t.right)/2-_;else if(fs(o)){const ue=Object.keys(o)[0],se=o[ue];M=this.chart.scales[ue].getPixelForValue(se)}ee=this._getYAxisLabelAlignment(S).textAlign}r==="y"&&(h==="start"?De="top":h==="end"&&(De="bottom"));const ne=this._getLabelSizes();for(U=0,q=m.length;U<q;++U){O=m[U],R=O.label;const ue=c.setContext(this.getContext(U));oe=this.getPixelForTick(U)+c.labelOffset,je=this._resolveTickFontOptions(U),de=je.lineHeight,re=ca(R)?R.length:1;const se=re/2,Ae=ue.color,Se=ue.textStrokeColor,$e=ue.textStrokeWidth;let Q=ee;d?(M=oe,ee==="inner"&&(U===q-1?Q=this.options.reverse?"left":"right":U===0?Q=this.options.reverse?"right":"left":Q="center"),o==="top"?g==="near"||z!==0?Te=-re*de+de/2:g==="center"?Te=-ne.highest.height/2-se*de+de:Te=-ne.highest.height+de/2:g==="near"||z!==0?Te=de/2:g==="center"?Te=ne.highest.height/2-se*de:Te=ne.highest.height-re*de,w&&(Te*=-1),z!==0&&!ue.showLabelBackdrop&&(M+=de/2*Math.sin(z))):(P=oe,Te=(1-re)*de/2);let xe;if(ue.showLabelBackdrop){const ve=rn(ue.backdropPadding),ae=ne.heights[U],Ce=ne.widths[U];let pe=Te-ve.top,k=0-ve.left;switch(De){case"middle":pe-=ae/2;break;case"bottom":pe-=ae;break}switch(ee){case"center":k-=Ce/2;break;case"right":k-=Ce;break;case"inner":U===q-1?k-=Ce:U>0&&(k-=Ce/2);break}xe={left:k,top:pe,width:Ce+ve.width,height:ae+ve.height,color:ue.backdropColor}}I.push({label:R,font:je,textOffset:Te,options:{rotation:z,color:Ae,strokeColor:Se,strokeWidth:$e,textAlign:Q,textBaseline:De,translation:[M,P],backdrop:xe}})}return I}_getXAxisLabelAlignment(){const{position:t,ticks:r}=this.options;if(-ji(this.labelRotation))return t==="top"?"left":"right";let o="center";return r.align==="start"?o="left":r.align==="end"?o="right":r.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(t){const{position:r,ticks:{crossAlign:n,mirror:o,padding:c}}=this.options,d=this._getLabelSizes(),m=t+c,h=d.widest.width;let g,y;return r==="left"?o?(y=this.right+c,n==="near"?g="left":n==="center"?(g="center",y+=h/2):(g="right",y+=h)):(y=this.right-m,n==="near"?g="right":n==="center"?(g="center",y-=h/2):(g="left",y=this.left)):r==="right"?o?(y=this.left+c,n==="near"?g="right":n==="center"?(g="center",y-=h/2):(g="left",y-=h)):(y=this.left+m,n==="near"?g="left":n==="center"?(g="center",y+=h/2):(g="right",y=this.right)):g="right",{textAlign:g,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:r},left:n,top:o,width:c,height:d}=this;r&&(t.save(),t.fillStyle=r,t.fillRect(n,o,c,d),t.restore())}getLineWidthForValue(t){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const o=this.ticks.findIndex(c=>c.value===t);return o>=0?r.setContext(this.getContext(o)).lineWidth:0}drawGrid(t){const r=this.options.grid,n=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let c,d;const m=(h,g,y)=>{!y.width||!y.color||(n.save(),n.lineWidth=y.width,n.strokeStyle=y.color,n.setLineDash(y.borderDash||[]),n.lineDashOffset=y.borderDashOffset,n.beginPath(),n.moveTo(h.x,h.y),n.lineTo(g.x,g.y),n.stroke(),n.restore())};if(r.display)for(c=0,d=o.length;c<d;++c){const h=o[c];r.drawOnChartArea&&m({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),r.drawTicks&&m({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:r,options:{border:n,grid:o}}=this,c=n.setContext(this.getContext()),d=n.display?c.width:0;if(!d)return;const m=o.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let g,y,w,S;this.isHorizontal()?(g=cl(t,this.left,d)-d/2,y=cl(t,this.right,m)+m/2,w=S=h):(w=cl(t,this.top,d)-d/2,S=cl(t,this.bottom,m)+m/2,g=y=h),r.save(),r.lineWidth=c.width,r.strokeStyle=c.color,r.beginPath(),r.moveTo(g,w),r.lineTo(y,S),r.stroke(),r.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,o=this._computeLabelArea();o&&Gh(n,o);const c=this.getLabelItems(t);for(const d of c){const m=d.options,h=d.font,g=d.label,y=d.textOffset;Du(n,g,0,y,h,m)}o&&Wh(n)}drawTitle(){const{ctx:t,options:{position:r,title:n,reverse:o}}=this;if(!n.display)return;const c=Ga(n.font),d=rn(n.padding),m=n.align;let h=c.lineHeight/2;r==="bottom"||r==="center"||fs(r)?(h+=d.bottom,ca(n.text)&&(h+=c.lineHeight*(n.text.length-1))):h+=d.top;const{titleX:g,titleY:y,maxWidth:w,rotation:S}=o_(this,h,r,m);Du(t,n.text,0,0,c,{color:n.color,maxWidth:w,rotation:S,textAlign:i_(m,r,o),textBaseline:"middle",translation:[g,y]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,r=t.ticks&&t.ticks.z||0,n=os(t.grid&&t.grid.z,-1),o=os(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Bc.prototype.draw?[{z:r,draw:c=>{this.draw(c)}}]:[{z:n,draw:c=>{this.drawBackground(),this.drawGrid(c),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:r,draw:c=>{this.drawLabels(c)}}]}getMatchingVisibleMetas(t){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",o=[];let c,d;for(c=0,d=r.length;c<d;++c){const m=r[c];m[n]===this.id&&(!t||m.type===t)&&o.push(m)}return o}_resolveTickFontOptions(t){const r=this.options.ticks.setContext(this.getContext(t));return Ga(r.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class mh{constructor(t,r,n){this.type=t,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const r=Object.getPrototypeOf(t);let n;d_(r)&&(n=this.register(r));const o=this.items,c=t.id,d=this.scope+"."+c;if(!c)throw new Error("class does not have id: "+t);return c in o||(o[c]=t,l_(t,d,n),this.override&&aa.override(t.id,t.overrides)),d}get(t){return this.items[t]}unregister(t){const r=this.items,n=t.id,o=this.scope;n in r&&delete r[n],o&&n in aa[o]&&(delete aa[o][n],this.override&&delete wl[n])}}function l_(s,t,r){const n=Su(Object.create(null),[r?aa.get(r):{},aa.get(t),s.defaults]);aa.set(t,n),s.defaultRoutes&&c_(t,s.defaultRoutes),s.descriptors&&aa.describe(t,s.descriptors)}function c_(s,t){Object.keys(t).forEach(r=>{const n=r.split("."),o=n.pop(),c=[s].concat(n).join("."),d=t[r].split("."),m=d.pop(),h=d.join(".");aa.route(c,o,h,m)})}function d_(s){return"id"in s&&"defaults"in s}class u_{constructor(){this.controllers=new mh(Qh,"datasets",!0),this.elements=new mh(ki,"elements"),this.plugins=new mh(Object,"plugins"),this.scales=new mh(Bc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,r,n){[...r].forEach(o=>{const c=n||this._getRegistryForType(o);n||c.isForType(o)||c===this.plugins&&o.id?this._exec(t,c,o):ks(o,d=>{const m=n||this._getRegistryForType(d);this._exec(t,m,d)})})}_exec(t,r,n){const o=Ix(t);Ps(n["before"+o],[],n),r[t](n),Ps(n["after"+o],[],n)}_getRegistryForType(t){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(t))return n}return this.plugins}_get(t,r,n){const o=r.get(t);if(o===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return o}}var qn=new u_;class m_{constructor(){this._init=[]}notify(t,r,n,o){r==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const c=o?this._descriptors(t).filter(o):this._descriptors(t),d=this._notify(c,t,r,n);return r==="afterDestroy"&&(this._notify(c,t,"stop"),this._notify(this._init,t,"uninstall")),d}_notify(t,r,n,o){o=o||{};for(const c of t){const d=c.plugin,m=d[n],h=[r,o,c.options];if(Ps(m,h,d)===!1&&o.cancelable)return!1}return!0}invalidate(){Ns(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),r}_createDescriptors(t,r){const n=t&&t.config,o=os(n.options&&n.options.plugins,{}),c=h_(n);return o===!1&&!r?[]:g_(t,c,o,r)}_notifyStateChanges(t){const r=this._oldCache||[],n=this._cache,o=(c,d)=>c.filter(m=>!d.some(h=>m.plugin.id===h.plugin.id));this._notify(o(r,n),t,"stop"),this._notify(o(n,r),t,"start")}}function h_(s){const t={},r=[],n=Object.keys(qn.plugins.items);for(let c=0;c<n.length;c++)r.push(qn.getPlugin(n[c]));const o=s.plugins||[];for(let c=0;c<o.length;c++){const d=o[c];r.indexOf(d)===-1&&(r.push(d),t[d.id]=!0)}return{plugins:r,localIds:t}}function f_(s,t){return!t&&s===!1?null:s===!0?{}:s}function g_(s,{plugins:t,localIds:r},n,o){const c=[],d=s.getContext();for(const m of t){const h=m.id,g=f_(n[h],o);g!==null&&c.push({plugin:m,options:x_(s.config,{plugin:m,local:r[h]},g,d)})}return c}function x_(s,{plugin:t,local:r},n,o){const c=s.pluginScopeKeys(t),d=s.getOptionScopes(n,c);return r&&t.defaults&&d.push(t.defaults),s.createResolver(d,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function sx(s,t){const r=aa.datasets[s]||{};return((t.datasets||{})[s]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function p_(s,t){let r=s;return s==="_index_"?r=t:s==="_value_"&&(r=t==="x"?"y":"x"),r}function y_(s,t){return s===t?"_index_":"_value_"}function rb(s){if(s==="x"||s==="y"||s==="r")return s}function b_(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function ax(s,...t){if(rb(s))return s;for(const r of t){const n=r.axis||b_(r.position)||s.length>1&&rb(s[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function nb(s,t,r){if(r[t+"AxisID"]===s)return{axis:t}}function v_(s,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(n=>n.xAxisID===s||n.yAxisID===s);if(r.length)return nb(s,"x",r[0])||nb(s,"y",r[0])}return{}}function j_(s,t){const r=wl[s.type]||{scales:{}},n=t.scales||{},o=sx(s.type,t),c=Object.create(null);return Object.keys(n).forEach(d=>{const m=n[d];if(!fs(m))return console.error(`Invalid scale configuration for scale: ${d}`);if(m._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${d}`);const h=ax(d,m,v_(d,s),aa.scales[m.type]),g=y_(h,o),y=r.scales||{};c[d]=hu(Object.create(null),[{axis:h},m,y[h],y[g]])}),s.data.datasets.forEach(d=>{const m=d.type||s.type,h=d.indexAxis||sx(m,t),y=(wl[m]||{}).scales||{};Object.keys(y).forEach(w=>{const S=p_(w,h),_=d[S+"AxisID"]||S;c[_]=c[_]||Object.create(null),hu(c[_],[{axis:S},n[_],y[w]])})}),Object.keys(c).forEach(d=>{const m=c[d];hu(m,[aa.scales[m.type],aa.scale])}),c}function yj(s){const t=s.options||(s.options={});t.plugins=os(t.plugins,{}),t.scales=j_(s,t)}function bj(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function w_(s){return s=s||{},s.data=bj(s.data),yj(s),s}const ib=new Map,vj=new Set;function hh(s,t){let r=ib.get(s);return r||(r=t(),ib.set(s,r),vj.add(r)),r}const nu=(s,t,r)=>{const n=jl(t,r);n!==void 0&&s.add(n)};class N_{constructor(t){this._config=w_(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=bj(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),yj(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return hh(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,r){return hh(`${t}.transition.${r}`,()=>[[`datasets.${t}.transitions.${r}`,`transitions.${r}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,r){return hh(`${t}-${r}`,()=>[[`datasets.${t}.elements.${r}`,`datasets.${t}`,`elements.${r}`,""]])}pluginScopeKeys(t){const r=t.id,n=this.type;return hh(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,r){const n=this._scopeCache;let o=n.get(t);return(!o||r)&&(o=new Map,n.set(t,o)),o}getOptionScopes(t,r,n){const{options:o,type:c}=this,d=this._cachedScopes(t,n),m=d.get(r);if(m)return m;const h=new Set;r.forEach(y=>{t&&(h.add(t),y.forEach(w=>nu(h,t,w))),y.forEach(w=>nu(h,o,w)),y.forEach(w=>nu(h,wl[c]||{},w)),y.forEach(w=>nu(h,aa,w)),y.forEach(w=>nu(h,ex,w))});const g=Array.from(h);return g.length===0&&g.push(Object.create(null)),vj.has(r)&&d.set(r,g),g}chartOptionScopes(){const{options:t,type:r}=this;return[t,wl[r]||{},aa.datasets[r]||{},{type:r},aa,ex]}resolveNamedOptions(t,r,n,o=[""]){const c={$shared:!0},{resolver:d,subPrefixes:m}=ob(this._resolverCache,t,o);let h=d;if(C_(d,r)){c.$shared=!1,n=Ao(n)?n():n;const g=this.createResolver(t,n,m);h=Rc(d,n,g)}for(const g of r)c[g]=h[g];return c}createResolver(t,r,n=[""],o){const{resolver:c}=ob(this._resolverCache,t,n);return fs(r)?Rc(c,r,void 0,o):c}}function ob(s,t,r){let n=s.get(t);n||(n=new Map,s.set(t,n));const o=r.join();let c=n.get(o);return c||(c={resolver:Ux(t,r),subPrefixes:r.filter(m=>!m.toLowerCase().includes("hover"))},n.set(o,c)),c}const S_=s=>fs(s)&&Object.getOwnPropertyNames(s).some(t=>Ao(s[t]));function C_(s,t){const{isScriptable:r,isIndexable:n}=Jv(s);for(const o of t){const c=r(o),d=n(o),m=(d||c)&&s[o];if(c&&(Ao(m)||S_(m))||d&&ca(m))return!0}return!1}var k_="4.5.0";const __=["top","bottom","left","right","chartArea"];function lb(s,t){return s==="top"||s==="bottom"||__.indexOf(s)===-1&&t==="x"}function cb(s,t){return function(r,n){return r[s]===n[s]?r[t]-n[t]:r[s]-n[s]}}function db(s){const t=s.chart,r=t.options.animation;t.notifyPlugins("afterRender"),Ps(r&&r.onComplete,[s],t)}function A_(s){const t=s.chart,r=t.options.animation;Ps(r&&r.onProgress,[s],t)}function jj(s){return Vx()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const Ch={},ub=s=>{const t=jj(s);return Object.values(Ch).filter(r=>r.canvas===t).pop()};function D_(s,t,r){const n=Object.keys(s);for(const o of n){const c=+o;if(c>=t){const d=s[o];delete s[o],(r>0||c>t)&&(s[c+r]=d)}}}function E_(s,t,r,n){return!r||s.type==="mouseout"?null:n?t:s}let zu=class{static defaults=aa;static instances=Ch;static overrides=wl;static registry=qn;static version=k_;static getChart=ub;static register(...t){qn.add(...t),mb()}static unregister(...t){qn.remove(...t),mb()}constructor(t,r){const n=this.config=new N_(r),o=jj(t),c=ub(o);if(c)throw new Error("Canvas is already in use. Chart with ID '"+c.id+"' must be destroyed before the canvas with ID '"+c.canvas.id+"' can be reused.");const d=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Gk(o)),this.platform.updateConfig(n);const m=this.platform.acquireContext(o,d.aspectRatio),h=m&&m.canvas,g=h&&h.height,y=h&&h.width;if(this.id=C3(),this.ctx=m,this.canvas=h,this.width=y,this.height=g,this._options=d,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new m_,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=V3(w=>this.update(w),d.resizeDelay||0),this._dataChanges=[],Ch[this.id]=this,!m||!h){console.error("Failed to create chart: can't acquire context from the given item");return}yi.listen(this,"complete",db),yi.listen(this,"progress",A_),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:n,height:o,_aspectRatio:c}=this;return Ns(t)?r&&c?c:o?n/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return qn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ry(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ty(this.canvas,this.ctx),this}stop(){return yi.stop(this),this}resize(t,r){yi.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const n=this.options,o=this.canvas,c=n.maintainAspectRatio&&this.aspectRatio,d=this.platform.getMaximumSize(o,t,r,c),m=n.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=d.width,this.height=d.height,this._aspectRatio=this.aspectRatio,Ry(this,m,!0)&&(this.notifyPlugins("resize",{size:d}),Ps(n.onResize,[this,d],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};ks(r,(n,o)=>{n.id=o})}buildOrUpdateScales(){const t=this.options,r=t.scales,n=this.scales,o=Object.keys(n).reduce((d,m)=>(d[m]=!1,d),{});let c=[];r&&(c=c.concat(Object.keys(r).map(d=>{const m=r[d],h=ax(d,m),g=h==="r",y=h==="x";return{options:m,dposition:g?"chartArea":y?"bottom":"left",dtype:g?"radialLinear":y?"category":"linear"}}))),ks(c,d=>{const m=d.options,h=m.id,g=ax(h,m),y=os(m.type,d.dtype);(m.position===void 0||lb(m.position,g)!==lb(d.dposition))&&(m.position=d.dposition),o[h]=!0;let w=null;if(h in n&&n[h].type===y)w=n[h];else{const S=qn.getScale(y);w=new S({id:h,type:y,ctx:this.ctx,chart:this}),n[w.id]=w}w.init(m,t)}),ks(o,(d,m)=>{d||delete n[m]}),ks(n,d=>{tn.configure(this,d,d.options),tn.addBox(this,d)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,n=t.length;if(t.sort((o,c)=>o.index-c.index),n>r){for(let o=r;o<n;++o)this._destroyDatasetMeta(o);t.splice(r,n-r)}this._sortedMetasets=t.slice(0).sort(cb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((n,o)=>{r.filter(c=>c===n._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let n,o;for(this._removeUnreferencedMetasets(),n=0,o=r.length;n<o;n++){const c=r[n];let d=this.getDatasetMeta(n);const m=c.type||this.config.type;if(d.type&&d.type!==m&&(this._destroyDatasetMeta(n),d=this.getDatasetMeta(n)),d.type=m,d.indexAxis=c.indexAxis||sx(m,this.options),d.order=c.order||0,d.index=n,d.label=""+c.label,d.visible=this.isDatasetVisible(n),d.controller)d.controller.updateIndex(n),d.controller.linkScales();else{const h=qn.getController(m),{datasetElementType:g,dataElementType:y}=aa.datasets[m];Object.assign(h,{dataElementType:qn.getElement(y),datasetElementType:g&&qn.getElement(g)}),d.controller=new h(this,n),t.push(d.controller)}}return this._updateMetasets(),t}_resetElements(){ks(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const c=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let d=0;for(let g=0,y=this.data.datasets.length;g<y;g++){const{controller:w}=this.getDatasetMeta(g),S=!o&&c.indexOf(w)===-1;w.buildOrUpdateElements(S),d=Math.max(+w.getMaxOverflow(),d)}d=this._minPadding=n.layout.autoPadding?d:0,this._updateLayout(d),o||ks(c,g=>{g.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(cb("z","_idx"));const{_active:m,_lastEvent:h}=this;h?this._eventHandler(h,!0):m.length&&this._updateHoverStyles(m,m,!0),this.render()}_updateScales(){ks(this.scales,t=>{tn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!jy(r,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:o,count:c}of r){const d=n==="_removeElements"?-c:c;D_(t,o,d)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=c=>new Set(t.filter(d=>d[0]===c).map((d,m)=>m+","+d.splice(1).join(","))),o=n(0);for(let c=1;c<r;c++)if(!jy(o,n(c)))return;return Array.from(o).map(c=>c.split(",")).map(c=>({method:c[1],start:+c[2],count:+c[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;tn.update(this,this.width,this.height,t);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],ks(this.boxes,o=>{n&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,c)=>{o._idx=c}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,Ao(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const n=this.getDatasetMeta(t),o={meta:n,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(n.controller._update(r),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(yi.has(this)?this.attached&&!yi.running(this)&&yi.start(this):(this.draw(),db({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,n=[];let o,c;for(o=0,c=r.length;o<c;++o){const d=r[o];(!t||d.visible)&&n.push(d)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,n={meta:t,index:t.index,cancelable:!0},o=cj(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(o&&Gh(r,o),t.controller.draw(),o&&Wh(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return Au(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,n,o){const c=_k.modes[r];return typeof c=="function"?c(this,t,n,o):[]}getDatasetMeta(t){const r=this.data.datasets[t],n=this._metasets;let o=n.filter(c=>c&&c._dataset===r).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},n.push(o)),o}getContext(){return this.$context||(this.$context=Sl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(t,r){const n=this.getDatasetMeta(t);n.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,n){const o=n?"show":"hide",c=this.getDatasetMeta(t),d=c.controller._resolveAnimations(void 0,o);Cu(r)?(c.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),d.update(c,{visible:n}),this.update(m=>m.datasetIndex===t?o:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),yi.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ty(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete Ch[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,n=(c,d)=>{r.addEventListener(this,c,d),t[c]=d},o=(c,d,m)=>{c.offsetX=d,c.offsetY=m,this._eventHandler(c)};ks(this.options.events,c=>n(c,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,n=(h,g)=>{r.addEventListener(this,h,g),t[h]=g},o=(h,g)=>{t[h]&&(r.removeEventListener(this,h,g),delete t[h])},c=(h,g)=>{this.canvas&&this.resize(h,g)};let d;const m=()=>{o("attach",m),this.attached=!0,this.resize(),n("resize",c),n("detach",d)};d=()=>{this.attached=!1,o("resize",c),this._stop(),this._resize(0,0),n("attach",m)},r.isAttached(this.canvas)?m():d()}unbindEvents(){ks(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},ks(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,n){const o=n?"set":"remove";let c,d,m,h;for(r==="dataset"&&(c=this.getDatasetMeta(t[0].datasetIndex),c.controller["_"+o+"DatasetHoverStyle"]()),m=0,h=t.length;m<h;++m){d=t[m];const g=d&&this.getDatasetMeta(d.datasetIndex).controller;g&&g[o+"HoverStyle"](d.element,d.datasetIndex,d.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],n=t.map(({datasetIndex:c,index:d})=>{const m=this.getDatasetMeta(c);if(!m)throw new Error("No dataset found at index "+c);return{datasetIndex:c,element:m.data[d],index:d}});!Mh(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(t,r,n){return this._plugins.notify(this,t,r,n)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,n){const o=this.options.hover,c=(h,g)=>h.filter(y=>!g.some(w=>y.datasetIndex===w.datasetIndex&&y.index===w.index)),d=c(r,t),m=n?t:c(t,r);d.length&&this.updateHoverStyle(d,o.mode,!1),m.length&&o.mode&&this.updateHoverStyle(m,o.mode,!0)}_eventHandler(t,r){const n={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},o=d=>(d.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,o)===!1)return;const c=this._handleEvent(t,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,o),(c||n.changed)&&this.render(),this}_handleEvent(t,r,n){const{_active:o=[],options:c}=this,d=r,m=this._getActiveElements(t,o,n,d),h=T3(t),g=E_(t,this._lastEvent,n,h);n&&(this._lastEvent=null,Ps(c.onHover,[t,m,this],this),h&&Ps(c.onClick,[t,m,this],this));const y=!Mh(m,o);return(y||r)&&(this._active=m,this._updateHoverStyles(m,o,r)),this._lastEvent=g,y}_getActiveElements(t,r,n,o){if(t.type==="mouseout")return[];if(!n)return r;const c=this.options.hover;return this.getElementsAtEventForMode(t,c.mode,c,o)}};function mb(){return ks(zu.instances,s=>s._plugins.invalidate())}function T_(s,t,r){const{startAngle:n,x:o,y:c,outerRadius:d,innerRadius:m,options:h}=t,{borderWidth:g,borderJoinStyle:y}=h,w=Math.min(g/d,Br(n-r));if(s.beginPath(),s.arc(o,c,d-g/2,n+w/2,r-w/2),m>0){const S=Math.min(g/m,Br(n-r));s.arc(o,c,m+g/2,r-S/2,n+S/2,!0)}else{const S=Math.min(g/2,d*Br(n-r));if(y==="round")s.arc(o,c,S,r-_s/2,n+_s/2,!0);else if(y==="bevel"){const _=2*S*S,E=-_*Math.cos(r+_s/2)+o,z=-_*Math.sin(r+_s/2)+c,I=_*Math.cos(n+_s/2)+o,U=_*Math.sin(n+_s/2)+c;s.lineTo(E,z),s.lineTo(I,U)}}s.closePath(),s.moveTo(0,0),s.rect(0,0,s.canvas.width,s.canvas.height),s.clip("evenodd")}function M_(s,t,r){const{startAngle:n,pixelMargin:o,x:c,y:d,outerRadius:m,innerRadius:h}=t;let g=o/m;s.beginPath(),s.arc(c,d,m,n-g,r+g),h>o?(g=o/h,s.arc(c,d,h,r+g,n-g,!0)):s.arc(c,d,o,r+pa,n-pa),s.closePath(),s.clip()}function O_(s){return Bx(s,["outerStart","outerEnd","innerStart","innerEnd"])}function R_(s,t,r,n){const o=O_(s.options.borderRadius),c=(r-t)/2,d=Math.min(c,n*t/2),m=h=>{const g=(r-Math.min(c,h))*n/2;return Ya(h,0,Math.min(c,g))};return{outerStart:m(o.outerStart),outerEnd:m(o.outerEnd),innerStart:Ya(o.innerStart,0,d),innerEnd:Ya(o.innerEnd,0,d)}}function Ac(s,t,r,n){return{x:r+s*Math.cos(t),y:n+s*Math.sin(t)}}function Fh(s,t,r,n,o,c){const{x:d,y:m,startAngle:h,pixelMargin:g,innerRadius:y}=t,w=Math.max(t.outerRadius+n+r-g,0),S=y>0?y+n+r+g:0;let _=0;const E=o-h;if(n){const ue=y>0?y-n:0,se=w>0?w-n:0,Ae=(ue+se)/2,Se=Ae!==0?E*Ae/(Ae+n):E;_=(E-Se)/2}const z=Math.max(.001,E*w-r/_s)/w,I=(E-z)/2,U=h+I+_,q=o-I-_,{outerStart:O,outerEnd:R,innerStart:M,innerEnd:P}=R_(t,S,w,q-U),ee=w-O,oe=w-R,je=U+O/ee,de=q-R/oe,re=S+M,Te=S+P,De=U+M/re,ne=q-P/Te;if(s.beginPath(),c){const ue=(je+de)/2;if(s.arc(d,m,w,je,ue),s.arc(d,m,w,ue,de),R>0){const $e=Ac(oe,de,d,m);s.arc($e.x,$e.y,R,de,q+pa)}const se=Ac(Te,q,d,m);if(s.lineTo(se.x,se.y),P>0){const $e=Ac(Te,ne,d,m);s.arc($e.x,$e.y,P,q+pa,ne+Math.PI)}const Ae=(q-P/S+(U+M/S))/2;if(s.arc(d,m,S,q-P/S,Ae,!0),s.arc(d,m,S,Ae,U+M/S,!0),M>0){const $e=Ac(re,De,d,m);s.arc($e.x,$e.y,M,De+Math.PI,U-pa)}const Se=Ac(ee,U,d,m);if(s.lineTo(Se.x,Se.y),O>0){const $e=Ac(ee,je,d,m);s.arc($e.x,$e.y,O,U-pa,je)}}else{s.moveTo(d,m);const ue=Math.cos(je)*w+d,se=Math.sin(je)*w+m;s.lineTo(ue,se);const Ae=Math.cos(de)*w+d,Se=Math.sin(de)*w+m;s.lineTo(Ae,Se)}s.closePath()}function I_(s,t,r,n,o){const{fullCircles:c,startAngle:d,circumference:m}=t;let h=t.endAngle;if(c){Fh(s,t,r,n,h,o);for(let g=0;g<c;++g)s.fill();isNaN(m)||(h=d+(m%Hs||Hs))}return Fh(s,t,r,n,h,o),s.fill(),h}function z_(s,t,r,n,o){const{fullCircles:c,startAngle:d,circumference:m,options:h}=t,{borderWidth:g,borderJoinStyle:y,borderDash:w,borderDashOffset:S,borderRadius:_}=h,E=h.borderAlign==="inner";if(!g)return;s.setLineDash(w||[]),s.lineDashOffset=S,E?(s.lineWidth=g*2,s.lineJoin=y||"round"):(s.lineWidth=g,s.lineJoin=y||"bevel");let z=t.endAngle;if(c){Fh(s,t,r,n,z,o);for(let I=0;I<c;++I)s.stroke();isNaN(m)||(z=d+(m%Hs||Hs))}E&&M_(s,t,z),h.selfJoin&&z-d>=_s&&_===0&&y!=="miter"&&T_(s,t,z),c||(Fh(s,t,r,n,z,o),s.stroke())}class P_ extends ki{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,r,n){const o=this.getProps(["x","y"],n),{angle:c,distance:d}=qv(o,{x:t,y:r}),{startAngle:m,endAngle:h,innerRadius:g,outerRadius:y,circumference:w}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),S=(this.options.spacing+this.options.borderWidth)/2,_=os(w,h-m),E=_u(c,m,h)&&m!==h,z=_>=Hs||E,I=wi(d,g+S,y+S);return z&&I}getCenterPoint(t){const{x:r,y:n,startAngle:o,endAngle:c,innerRadius:d,outerRadius:m}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:h,spacing:g}=this.options,y=(o+c)/2,w=(d+m+g+h)/2;return{x:r+Math.cos(y)*w,y:n+Math.sin(y)*w}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:r,circumference:n}=this,o=(r.offset||0)/4,c=(r.spacing||0)/2,d=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=n>Hs?Math.floor(n/Hs):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const m=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(m)*o,Math.sin(m)*o);const h=1-Math.sin(Math.min(_s,n||0)),g=o*h;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,I_(t,this,g,c,d),z_(t,this,g,c,d),t.restore()}}function wj(s,t,r=t){s.lineCap=os(r.borderCapStyle,t.borderCapStyle),s.setLineDash(os(r.borderDash,t.borderDash)),s.lineDashOffset=os(r.borderDashOffset,t.borderDashOffset),s.lineJoin=os(r.borderJoinStyle,t.borderJoinStyle),s.lineWidth=os(r.borderWidth,t.borderWidth),s.strokeStyle=os(r.borderColor,t.borderColor)}function F_(s,t,r){s.lineTo(r.x,r.y)}function L_(s){return s.stepped?r4:s.tension||s.cubicInterpolationMode==="monotone"?n4:F_}function Nj(s,t,r={}){const n=s.length,{start:o=0,end:c=n-1}=r,{start:d,end:m}=t,h=Math.max(o,d),g=Math.min(c,m),y=o<d&&c<d||o>m&&c>m;return{count:n,start:h,loop:t.loop,ilen:g<h&&!y?n+g-h:g-h}}function B_(s,t,r,n){const{points:o,options:c}=t,{count:d,start:m,loop:h,ilen:g}=Nj(o,r,n),y=L_(c);let{move:w=!0,reverse:S}=n||{},_,E,z;for(_=0;_<=g;++_)E=o[(m+(S?g-_:_))%d],!E.skip&&(w?(s.moveTo(E.x,E.y),w=!1):y(s,z,E,S,c.stepped),z=E);return h&&(E=o[(m+(S?g:0))%d],y(s,z,E,S,c.stepped)),!!h}function U_(s,t,r,n){const o=t.points,{count:c,start:d,ilen:m}=Nj(o,r,n),{move:h=!0,reverse:g}=n||{};let y=0,w=0,S,_,E,z,I,U;const q=R=>(d+(g?m-R:R))%c,O=()=>{z!==I&&(s.lineTo(y,I),s.lineTo(y,z),s.lineTo(y,U))};for(h&&(_=o[q(0)],s.moveTo(_.x,_.y)),S=0;S<=m;++S){if(_=o[q(S)],_.skip)continue;const R=_.x,M=_.y,P=R|0;P===E?(M<z?z=M:M>I&&(I=M),y=(w*y+R)/++w):(O(),s.lineTo(R,M),E=P,w=0,z=I=M),U=M}O()}function rx(s){const t=s.options,r=t.borderDash&&t.borderDash.length;return!s._decimated&&!s._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!r?U_:B_}function $_(s){return s.stepped?P4:s.tension||s.cubicInterpolationMode==="monotone"?F4:hl}function H_(s,t,r,n){let o=t._path;o||(o=t._path=new Path2D,t.path(o,r,n)&&o.closePath()),wj(s,t.options),s.stroke(o)}function V_(s,t,r,n){const{segments:o,options:c}=t,d=rx(t);for(const m of o)wj(s,c,m.style),s.beginPath(),d(s,t,m,{start:r,end:r+n-1})&&s.closePath(),s.stroke()}const q_=typeof Path2D=="function";function K_(s,t,r,n){q_&&!t.options.segment?H_(s,t,r,n):V_(s,t,r,n)}class Pu extends ki{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const o=n.spanGaps?this._loop:this._fullLoop;D4(this._points,n,t,o,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=V4(this,this.options.segment))}first(){const t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){const t=this.segments,r=this.points,n=t.length;return n&&r[t[n-1].end]}interpolate(t,r){const n=this.options,o=t[r],c=this.points,d=lj(this,{property:r,start:o,end:o});if(!d.length)return;const m=[],h=$_(n);let g,y;for(g=0,y=d.length;g<y;++g){const{start:w,end:S}=d[g],_=c[w],E=c[S];if(_===E){m.push(_);continue}const z=Math.abs((o-_[r])/(E[r]-_[r])),I=h(_,E,z,n.stepped);I[r]=t[r],m.push(I)}return m.length===1?m[0]:m}pathSegment(t,r,n){return rx(this)(t,this,r,n)}path(t,r,n){const o=this.segments,c=rx(this);let d=this._loop;r=r||0,n=n||this.points.length-r;for(const m of o)d&=c(t,this,m,{start:r,end:r+n-1});return!!d}draw(t,r,n,o){const c=this.options||{};(this.points||[]).length&&c.borderWidth&&(t.save(),K_(t,this,n,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function hb(s,t,r,n){const o=s.options,{[r]:c}=s.getProps([r],n);return Math.abs(t-c)<o.radius+o.hitRadius}class Sj extends ki{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,n){const o=this.options,{x:c,y:d}=this.getProps(["x","y"],n);return Math.pow(t-c,2)+Math.pow(r-d,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,r){return hb(this,t,"x",r)}inYRange(t,r){return hb(this,t,"y",r)}getCenterPoint(t){const{x:r,y:n}=this.getProps(["x","y"],t);return{x:r,y:n}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);const n=r&&t.borderWidth||0;return(r+n)*2}draw(t,r){const n=this.options;this.skip||n.radius<.1||!Au(this,r,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,tx(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Cj(s,t){const{x:r,y:n,base:o,width:c,height:d}=s.getProps(["x","y","base","width","height"],t);let m,h,g,y,w;return s.horizontal?(w=d/2,m=Math.min(r,o),h=Math.max(r,o),g=n-w,y=n+w):(w=c/2,m=r-w,h=r+w,g=Math.min(n,o),y=Math.max(n,o)),{left:m,top:g,right:h,bottom:y}}function No(s,t,r,n){return s?0:Ya(t,r,n)}function Y_(s,t,r){const n=s.options.borderWidth,o=s.borderSkipped,c=Zv(n);return{t:No(o.top,c.top,0,r),r:No(o.right,c.right,0,t),b:No(o.bottom,c.bottom,0,r),l:No(o.left,c.left,0,t)}}function G_(s,t,r){const{enableBorderRadius:n}=s.getProps(["enableBorderRadius"]),o=s.options.borderRadius,c=Tc(o),d=Math.min(t,r),m=s.borderSkipped,h=n||fs(o);return{topLeft:No(!h||m.top||m.left,c.topLeft,0,d),topRight:No(!h||m.top||m.right,c.topRight,0,d),bottomLeft:No(!h||m.bottom||m.left,c.bottomLeft,0,d),bottomRight:No(!h||m.bottom||m.right,c.bottomRight,0,d)}}function W_(s){const t=Cj(s),r=t.right-t.left,n=t.bottom-t.top,o=Y_(s,r/2,n/2),c=G_(s,r/2,n/2);return{outer:{x:t.left,y:t.top,w:r,h:n,radius:c},inner:{x:t.left+o.l,y:t.top+o.t,w:r-o.l-o.r,h:n-o.t-o.b,radius:{topLeft:Math.max(0,c.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,c.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,c.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,c.bottomRight-Math.max(o.b,o.r))}}}}function Fg(s,t,r,n){const o=t===null,c=r===null,m=s&&!(o&&c)&&Cj(s,n);return m&&(o||wi(t,m.left,m.right))&&(c||wi(r,m.top,m.bottom))}function X_(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function Q_(s,t){s.rect(t.x,t.y,t.w,t.h)}function Lg(s,t,r={}){const n=s.x!==r.x?-t:0,o=s.y!==r.y?-t:0,c=(s.x+s.w!==r.x+r.w?t:0)-n,d=(s.y+s.h!==r.y+r.h?t:0)-o;return{x:s.x+n,y:s.y+o,w:s.w+c,h:s.h+d,radius:s.radius}}class Z_ extends ki{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:r,options:{borderColor:n,backgroundColor:o}}=this,{inner:c,outer:d}=W_(this),m=X_(d.radius)?Ih:Q_;t.save(),(d.w!==c.w||d.h!==c.h)&&(t.beginPath(),m(t,Lg(d,r,c)),t.clip(),m(t,Lg(c,-r,d)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),m(t,Lg(c,r)),t.fillStyle=o,t.fill(),t.restore()}inRange(t,r,n){return Fg(this,t,r,n)}inXRange(t,r){return Fg(this,t,null,r)}inYRange(t,r){return Fg(this,null,t,r)}getCenterPoint(t){const{x:r,y:n,base:o,horizontal:c}=this.getProps(["x","y","base","horizontal"],t);return{x:c?(r+o)/2:r,y:c?n:(n+o)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}function J_(s,t,r){const n=s.segments,o=s.points,c=t.points,d=[];for(const m of n){let{start:h,end:g}=m;g=Jh(h,g,o);const y=nx(r,o[h],o[g],m.loop);if(!t.segments){d.push({source:m,target:y,start:o[h],end:o[g]});continue}const w=lj(t,y);for(const S of w){const _=nx(r,c[S.start],c[S.end],S.loop),E=oj(m,o,_);for(const z of E)d.push({source:z,target:S,start:{[r]:fb(y,_,"start",Math.max)},end:{[r]:fb(y,_,"end",Math.min)}})}}return d}function nx(s,t,r,n){if(n)return;let o=t[s],c=r[s];return s==="angle"&&(o=Br(o),c=Br(c)),{property:s,start:o,end:c}}function e5(s,t){const{x:r=null,y:n=null}=s||{},o=t.points,c=[];return t.segments.forEach(({start:d,end:m})=>{m=Jh(d,m,o);const h=o[d],g=o[m];n!==null?(c.push({x:h.x,y:n}),c.push({x:g.x,y:n})):r!==null&&(c.push({x:r,y:h.y}),c.push({x:r,y:g.y}))}),c}function Jh(s,t,r){for(;t>s;t--){const n=r[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function fb(s,t,r,n){return s&&t?n(s[r],t[r]):s?s[r]:t?t[r]:0}function kj(s,t){let r=[],n=!1;return ca(s)?(n=!0,r=s):r=e5(s,t),r.length?new Pu({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function gb(s){return s&&s.fill!==!1}function t5(s,t,r){let o=s[t].fill;const c=[t];let d;if(!r)return o;for(;o!==!1&&c.indexOf(o)===-1;){if(!Wa(o))return o;if(d=s[o],!d)return!1;if(d.visible)return o;c.push(o),o=d.fill}return!1}function s5(s,t,r){const n=i5(s);if(fs(n))return isNaN(n.value)?!1:n;let o=parseFloat(n);return Wa(o)&&Math.floor(o)===o?a5(n[0],t,o,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function a5(s,t,r,n){return(s==="-"||s==="+")&&(r=t+r),r===t||r<0||r>=n?!1:r}function r5(s,t){let r=null;return s==="start"?r=t.bottom:s==="end"?r=t.top:fs(s)?r=t.getPixelForValue(s.value):t.getBasePixel&&(r=t.getBasePixel()),r}function n5(s,t,r){let n;return s==="start"?n=r:s==="end"?n=t.options.reverse?t.min:t.max:fs(s)?n=s.value:n=t.getBaseValue(),n}function i5(s){const t=s.options,r=t.fill;let n=os(r&&r.target,r);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function o5(s){const{scale:t,index:r,line:n}=s,o=[],c=n.segments,d=n.points,m=l5(t,r);m.push(kj({x:null,y:t.bottom},n));for(let h=0;h<c.length;h++){const g=c[h];for(let y=g.start;y<=g.end;y++)c5(o,d[y],m)}return new Pu({points:o,options:{}})}function l5(s,t){const r=[],n=s.getMatchingVisibleMetas("line");for(let o=0;o<n.length;o++){const c=n[o];if(c.index===t)break;c.hidden||r.unshift(c.dataset)}return r}function c5(s,t,r){const n=[];for(let o=0;o<r.length;o++){const c=r[o],{first:d,last:m,point:h}=d5(c,t,"x");if(!(!h||d&&m)){if(d)n.unshift(h);else if(s.push(h),!m)break}}s.push(...n)}function d5(s,t,r){const n=s.interpolate(t,r);if(!n)return{};const o=n[r],c=s.segments,d=s.points;let m=!1,h=!1;for(let g=0;g<c.length;g++){const y=c[g],w=d[y.start][r],S=d[y.end][r];if(wi(o,w,S)){m=o===w,h=o===S;break}}return{first:m,last:h,point:n}}class _j{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,r,n){const{x:o,y:c,radius:d}=this;return r=r||{start:0,end:Hs},t.arc(o,c,d,r.end,r.start,!0),!n.bounds}interpolate(t){const{x:r,y:n,radius:o}=this,c=t.angle;return{x:r+Math.cos(c)*o,y:n+Math.sin(c)*o,angle:c}}}function u5(s){const{chart:t,fill:r,line:n}=s;if(Wa(r))return m5(t,r);if(r==="stack")return o5(s);if(r==="shape")return!0;const o=h5(s);return o instanceof _j?o:kj(o,n)}function m5(s,t){const r=s.getDatasetMeta(t);return r&&s.isDatasetVisible(t)?r.dataset:null}function h5(s){return(s.scale||{}).getPointPositionForValue?g5(s):f5(s)}function f5(s){const{scale:t={},fill:r}=s,n=r5(r,t);if(Wa(n)){const o=t.isHorizontal();return{x:o?n:null,y:o?null:n}}return null}function g5(s){const{scale:t,fill:r}=s,n=t.options,o=t.getLabels().length,c=n.reverse?t.max:t.min,d=n5(r,t,c),m=[];if(n.grid.circular){const h=t.getPointPositionForValue(0,c);return new _j({x:h.x,y:h.y,radius:t.getDistanceFromCenterForValue(d)})}for(let h=0;h<o;++h)m.push(t.getPointPositionForValue(h,d));return m}function Bg(s,t,r){const n=u5(t),{chart:o,index:c,line:d,scale:m,axis:h}=t,g=d.options,y=g.fill,w=g.backgroundColor,{above:S=w,below:_=w}=y||{},E=o.getDatasetMeta(c),z=cj(o,E);n&&d.points.length&&(Gh(s,r),x5(s,{line:d,target:n,above:S,below:_,area:r,scale:m,axis:h,clip:z}),Wh(s))}function x5(s,t){const{line:r,target:n,above:o,below:c,area:d,scale:m,clip:h}=t,g=r._loop?"angle":t.axis;s.save();let y=c;c!==o&&(g==="x"?(xb(s,n,d.top),Ug(s,{line:r,target:n,color:o,scale:m,property:g,clip:h}),s.restore(),s.save(),xb(s,n,d.bottom)):g==="y"&&(pb(s,n,d.left),Ug(s,{line:r,target:n,color:c,scale:m,property:g,clip:h}),s.restore(),s.save(),pb(s,n,d.right),y=o)),Ug(s,{line:r,target:n,color:y,scale:m,property:g,clip:h}),s.restore()}function xb(s,t,r){const{segments:n,points:o}=t;let c=!0,d=!1;s.beginPath();for(const m of n){const{start:h,end:g}=m,y=o[h],w=o[Jh(h,g,o)];c?(s.moveTo(y.x,y.y),c=!1):(s.lineTo(y.x,r),s.lineTo(y.x,y.y)),d=!!t.pathSegment(s,m,{move:d}),d?s.closePath():s.lineTo(w.x,r)}s.lineTo(t.first().x,r),s.closePath(),s.clip()}function pb(s,t,r){const{segments:n,points:o}=t;let c=!0,d=!1;s.beginPath();for(const m of n){const{start:h,end:g}=m,y=o[h],w=o[Jh(h,g,o)];c?(s.moveTo(y.x,y.y),c=!1):(s.lineTo(r,y.y),s.lineTo(y.x,y.y)),d=!!t.pathSegment(s,m,{move:d}),d?s.closePath():s.lineTo(r,w.y)}s.lineTo(r,t.first().y),s.closePath(),s.clip()}function Ug(s,t){const{line:r,target:n,property:o,color:c,scale:d,clip:m}=t,h=J_(r,n,o);for(const{source:g,target:y,start:w,end:S}of h){const{style:{backgroundColor:_=c}={}}=g,E=n!==!0;s.save(),s.fillStyle=_,p5(s,d,m,E&&nx(o,w,S)),s.beginPath();const z=!!r.pathSegment(s,g);let I;if(E){z?s.closePath():yb(s,n,S,o);const U=!!n.pathSegment(s,y,{move:z,reverse:!0});I=z&&U,I||yb(s,n,w,o)}s.closePath(),s.fill(I?"evenodd":"nonzero"),s.restore()}}function p5(s,t,r,n){const o=t.chart.chartArea,{property:c,start:d,end:m}=n||{};if(c==="x"||c==="y"){let h,g,y,w;c==="x"?(h=d,g=o.top,y=m,w=o.bottom):(h=o.left,g=d,y=o.right,w=m),s.beginPath(),r&&(h=Math.max(h,r.left),y=Math.min(y,r.right),g=Math.max(g,r.top),w=Math.min(w,r.bottom)),s.rect(h,g,y-h,w-g),s.clip()}}function yb(s,t,r,n){const o=t.interpolate(r,n);o&&s.lineTo(o.x,o.y)}var Aj={id:"filler",afterDatasetsUpdate(s,t,r){const n=(s.data.datasets||[]).length,o=[];let c,d,m,h;for(d=0;d<n;++d)c=s.getDatasetMeta(d),m=c.dataset,h=null,m&&m.options&&m instanceof Pu&&(h={visible:s.isDatasetVisible(d),index:d,fill:s5(m,d,n),chart:s,axis:c.controller.options.indexAxis,scale:c.vScale,line:m}),c.$filler=h,o.push(h);for(d=0;d<n;++d)h=o[d],!(!h||h.fill===!1)&&(h.fill=t5(o,d,r.propagate))},beforeDraw(s,t,r){const n=r.drawTime==="beforeDraw",o=s.getSortedVisibleDatasetMetas(),c=s.chartArea;for(let d=o.length-1;d>=0;--d){const m=o[d].$filler;m&&(m.line.updateControlPoints(c,m.axis),n&&m.fill&&Bg(s.ctx,m,c))}},beforeDatasetsDraw(s,t,r){if(r.drawTime!=="beforeDatasetsDraw")return;const n=s.getSortedVisibleDatasetMetas();for(let o=n.length-1;o>=0;--o){const c=n[o].$filler;gb(c)&&Bg(s.ctx,c,s.chartArea)}},beforeDatasetDraw(s,t,r){const n=t.meta.$filler;!gb(n)||r.drawTime!=="beforeDatasetDraw"||Bg(s.ctx,n,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const bb=(s,t)=>{let{boxHeight:r=t,boxWidth:n=t}=s;return s.usePointStyle&&(r=Math.min(r,t),n=s.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(t,r)}},y5=(s,t)=>s!==null&&t!==null&&s.datasetIndex===t.datasetIndex&&s.index===t.index;class vb extends ki{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r,n){this.maxWidth=t,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let r=Ps(t.generateLabels,[this.chart],this)||[];t.filter&&(r=r.filter(n=>t.filter(n,this.chart.data))),t.sort&&(r=r.sort((n,o)=>t.sort(n,o,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:t,ctx:r}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,o=Ga(n.font),c=o.size,d=this._computeTitleHeight(),{boxWidth:m,itemHeight:h}=bb(n,c);let g,y;r.font=o.string,this.isHorizontal()?(g=this.maxWidth,y=this._fitRows(d,c,m,h)+10):(y=this.maxHeight,g=this._fitCols(d,o,m,h)+10),this.width=Math.min(g,t.maxWidth||this.maxWidth),this.height=Math.min(y,t.maxHeight||this.maxHeight)}_fitRows(t,r,n,o){const{ctx:c,maxWidth:d,options:{labels:{padding:m}}}=this,h=this.legendHitBoxes=[],g=this.lineWidths=[0],y=o+m;let w=t;c.textAlign="left",c.textBaseline="middle";let S=-1,_=-y;return this.legendItems.forEach((E,z)=>{const I=n+r/2+c.measureText(E.text).width;(z===0||g[g.length-1]+I+2*m>d)&&(w+=y,g[g.length-(z>0?0:1)]=0,_+=y,S++),h[z]={left:0,top:_,row:S,width:I,height:o},g[g.length-1]+=I+m}),w}_fitCols(t,r,n,o){const{ctx:c,maxHeight:d,options:{labels:{padding:m}}}=this,h=this.legendHitBoxes=[],g=this.columnSizes=[],y=d-t;let w=m,S=0,_=0,E=0,z=0;return this.legendItems.forEach((I,U)=>{const{itemWidth:q,itemHeight:O}=b5(n,r,c,I,o);U>0&&_+O+2*m>y&&(w+=S+m,g.push({width:S,height:_}),E+=S+m,z++,S=_=0),h[U]={left:E,top:_,col:z,width:q,height:O},S=Math.max(S,q),_+=O+m}),w+=S,g.push({width:S,height:_}),w}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:o},rtl:c}}=this,d=Mc(c,this.left,this.width);if(this.isHorizontal()){let m=0,h=Ka(n,this.left+o,this.right-this.lineWidths[m]);for(const g of r)m!==g.row&&(m=g.row,h=Ka(n,this.left+o,this.right-this.lineWidths[m])),g.top+=this.top+t+o,g.left=d.leftForLtr(d.x(h),g.width),h+=g.width+o}else{let m=0,h=Ka(n,this.top+t+o,this.bottom-this.columnSizes[m].height);for(const g of r)g.col!==m&&(m=g.col,h=Ka(n,this.top+t+o,this.bottom-this.columnSizes[m].height)),g.top=h,g.left+=this.left+o,g.left=d.leftForLtr(d.x(g.left),g.width),h+=g.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Gh(t,this),this._draw(),Wh(t)}}_draw(){const{options:t,columnSizes:r,lineWidths:n,ctx:o}=this,{align:c,labels:d}=t,m=aa.color,h=Mc(t.rtl,this.left,this.width),g=Ga(d.font),{padding:y}=d,w=g.size,S=w/2;let _;this.drawTitle(),o.textAlign=h.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=g.string;const{boxWidth:E,boxHeight:z,itemHeight:I}=bb(d,w),U=function(P,ee,oe){if(isNaN(E)||E<=0||isNaN(z)||z<0)return;o.save();const je=os(oe.lineWidth,1);if(o.fillStyle=os(oe.fillStyle,m),o.lineCap=os(oe.lineCap,"butt"),o.lineDashOffset=os(oe.lineDashOffset,0),o.lineJoin=os(oe.lineJoin,"miter"),o.lineWidth=je,o.strokeStyle=os(oe.strokeStyle,m),o.setLineDash(os(oe.lineDash,[])),d.usePointStyle){const de={radius:z*Math.SQRT2/2,pointStyle:oe.pointStyle,rotation:oe.rotation,borderWidth:je},re=h.xPlus(P,E/2),Te=ee+S;Qv(o,de,re,Te,d.pointStyleWidth&&E)}else{const de=ee+Math.max((w-z)/2,0),re=h.leftForLtr(P,E),Te=Tc(oe.borderRadius);o.beginPath(),Object.values(Te).some(De=>De!==0)?Ih(o,{x:re,y:de,w:E,h:z,radius:Te}):o.rect(re,de,E,z),o.fill(),je!==0&&o.stroke()}o.restore()},q=function(P,ee,oe){Du(o,oe.text,P,ee+I/2,g,{strikethrough:oe.hidden,textAlign:h.textAlign(oe.textAlign)})},O=this.isHorizontal(),R=this._computeTitleHeight();O?_={x:Ka(c,this.left+y,this.right-n[0]),y:this.top+y+R,line:0}:_={x:this.left+y,y:Ka(c,this.top+R+y,this.bottom-r[0].height),line:0},rj(this.ctx,t.textDirection);const M=I+y;this.legendItems.forEach((P,ee)=>{o.strokeStyle=P.fontColor,o.fillStyle=P.fontColor;const oe=o.measureText(P.text).width,je=h.textAlign(P.textAlign||(P.textAlign=d.textAlign)),de=E+S+oe;let re=_.x,Te=_.y;h.setWidth(this.width),O?ee>0&&re+de+y>this.right&&(Te=_.y+=M,_.line++,re=_.x=Ka(c,this.left+y,this.right-n[_.line])):ee>0&&Te+M>this.bottom&&(re=_.x=re+r[_.line].width+y,_.line++,Te=_.y=Ka(c,this.top+R+y,this.bottom-r[_.line].height));const De=h.x(re);if(U(De,Te,P),re=q3(je,re+E+S,O?re+de:this.right,t.rtl),q(h.x(re),Te,P),O)_.x+=de+y;else if(typeof P.text!="string"){const ne=g.lineHeight;_.y+=Dj(P,ne)+y}else _.y+=M}),nj(this.ctx,t.textDirection)}drawTitle(){const t=this.options,r=t.title,n=Ga(r.font),o=rn(r.padding);if(!r.display)return;const c=Mc(t.rtl,this.left,this.width),d=this.ctx,m=r.position,h=n.size/2,g=o.top+h;let y,w=this.left,S=this.width;if(this.isHorizontal())S=Math.max(...this.lineWidths),y=this.top+g,w=Ka(t.align,w,this.right-S);else{const E=this.columnSizes.reduce((z,I)=>Math.max(z,I.height),0);y=g+Ka(t.align,this.top,this.bottom-E-t.labels.padding-this._computeTitleHeight())}const _=Ka(m,w,w+S);d.textAlign=c.textAlign(Px(m)),d.textBaseline="middle",d.strokeStyle=r.color,d.fillStyle=r.color,d.font=n.string,Du(d,r.text,_,y,n)}_computeTitleHeight(){const t=this.options.title,r=Ga(t.font),n=rn(t.padding);return t.display?r.lineHeight+n.height:0}_getLegendItemAt(t,r){let n,o,c;if(wi(t,this.left,this.right)&&wi(r,this.top,this.bottom)){for(c=this.legendHitBoxes,n=0;n<c.length;++n)if(o=c[n],wi(t,o.left,o.left+o.width)&&wi(r,o.top,o.top+o.height))return this.legendItems[n]}return null}handleEvent(t){const r=this.options;if(!w5(t.type,r))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const o=this._hoveredItem,c=y5(o,n);o&&!c&&Ps(r.onLeave,[t,o,this],this),this._hoveredItem=n,n&&!c&&Ps(r.onHover,[t,n,this],this)}else n&&Ps(r.onClick,[t,n,this],this)}}function b5(s,t,r,n,o){const c=v5(n,s,t,r),d=j5(o,n,t.lineHeight);return{itemWidth:c,itemHeight:d}}function v5(s,t,r,n){let o=s.text;return o&&typeof o!="string"&&(o=o.reduce((c,d)=>c.length>d.length?c:d)),t+r.size/2+n.measureText(o).width}function j5(s,t,r){let n=s;return typeof t.text!="string"&&(n=Dj(t,r)),n}function Dj(s,t){const r=s.text?s.text.length:0;return t*r}function w5(s,t){return!!((s==="mousemove"||s==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(s==="click"||s==="mouseup"))}var Ej={id:"legend",_element:vb,start(s,t,r){const n=s.legend=new vb({ctx:s.ctx,options:r,chart:s});tn.configure(s,n,r),tn.addBox(s,n)},stop(s){tn.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,t,r){const n=s.legend;tn.configure(s,n,r),n.options=r},afterUpdate(s){const t=s.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(s,t){t.replay||s.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,t,r){const n=t.datasetIndex,o=r.chart;o.isDatasetVisible(n)?(o.hide(n),t.hidden=!0):(o.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const t=s.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:o,color:c,useBorderRadius:d,borderRadius:m}}=s.legend.options;return s._getSortedDatasetMetas().map(h=>{const g=h.controller.getStyle(r?0:void 0),y=rn(g.borderWidth);return{text:t[h.index].label,fillStyle:g.backgroundColor,fontColor:c,hidden:!h.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:g.borderColor,pointStyle:n||g.pointStyle,rotation:g.rotation,textAlign:o||g.textAlign,borderRadius:d&&(m||g.borderRadius),datasetIndex:h.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class Tj extends ki{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=r;const o=ca(n.text)?n.text.length:1;this._padding=rn(n.padding);const c=o*Ga(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=c:this.width=c}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:r,left:n,bottom:o,right:c,options:d}=this,m=d.align;let h=0,g,y,w;return this.isHorizontal()?(y=Ka(m,n,c),w=r+t,g=c-n):(d.position==="left"?(y=n+t,w=Ka(m,o,r),h=_s*-.5):(y=c-t,w=Ka(m,r,o),h=_s*.5),g=o-r),{titleX:y,titleY:w,maxWidth:g,rotation:h}}draw(){const t=this.ctx,r=this.options;if(!r.display)return;const n=Ga(r.font),c=n.lineHeight/2+this._padding.top,{titleX:d,titleY:m,maxWidth:h,rotation:g}=this._drawArgs(c);Du(t,r.text,0,0,n,{color:r.color,maxWidth:h,rotation:g,textAlign:Px(r.align),textBaseline:"middle",translation:[d,m]})}}function N5(s,t){const r=new Tj({ctx:s.ctx,options:t,chart:s});tn.configure(s,r,t),tn.addBox(s,r),s.titleBlock=r}var Mj={id:"title",_element:Tj,start(s,t,r){N5(s,r)},stop(s){const t=s.titleBlock;tn.removeBox(s,t),delete s.titleBlock},beforeUpdate(s,t,r){const n=s.titleBlock;tn.configure(s,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const du={average(s){if(!s.length)return!1;let t,r,n=new Set,o=0,c=0;for(t=0,r=s.length;t<r;++t){const m=s[t].element;if(m&&m.hasValue()){const h=m.tooltipPosition();n.add(h.x),o+=h.y,++c}}return c===0||n.size===0?!1:{x:[...n].reduce((m,h)=>m+h)/n.size,y:o/c}},nearest(s,t){if(!s.length)return!1;let r=t.x,n=t.y,o=Number.POSITIVE_INFINITY,c,d,m;for(c=0,d=s.length;c<d;++c){const h=s[c].element;if(h&&h.hasValue()){const g=h.getCenterPoint(),y=Jg(t,g);y<o&&(o=y,m=h)}}if(m){const h=m.tooltipPosition();r=h.x,n=h.y}return{x:r,y:n}}};function Vn(s,t){return t&&(ca(t)?Array.prototype.push.apply(s,t):s.push(t)),s}function bi(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function S5(s,t){const{element:r,datasetIndex:n,index:o}=t,c=s.getDatasetMeta(n).controller,{label:d,value:m}=c.getLabelAndValue(o);return{chart:s,label:d,parsed:c.getParsed(o),raw:s.data.datasets[n].data[o],formattedValue:m,dataset:c.getDataset(),dataIndex:o,datasetIndex:n,element:r}}function jb(s,t){const r=s.chart.ctx,{body:n,footer:o,title:c}=s,{boxWidth:d,boxHeight:m}=t,h=Ga(t.bodyFont),g=Ga(t.titleFont),y=Ga(t.footerFont),w=c.length,S=o.length,_=n.length,E=rn(t.padding);let z=E.height,I=0,U=n.reduce((R,M)=>R+M.before.length+M.lines.length+M.after.length,0);if(U+=s.beforeBody.length+s.afterBody.length,w&&(z+=w*g.lineHeight+(w-1)*t.titleSpacing+t.titleMarginBottom),U){const R=t.displayColors?Math.max(m,h.lineHeight):h.lineHeight;z+=_*R+(U-_)*h.lineHeight+(U-1)*t.bodySpacing}S&&(z+=t.footerMarginTop+S*y.lineHeight+(S-1)*t.footerSpacing);let q=0;const O=function(R){I=Math.max(I,r.measureText(R).width+q)};return r.save(),r.font=g.string,ks(s.title,O),r.font=h.string,ks(s.beforeBody.concat(s.afterBody),O),q=t.displayColors?d+2+t.boxPadding:0,ks(n,R=>{ks(R.before,O),ks(R.lines,O),ks(R.after,O)}),q=0,r.font=y.string,ks(s.footer,O),r.restore(),I+=E.width,{width:I,height:z}}function C5(s,t){const{y:r,height:n}=t;return r<n/2?"top":r>s.height-n/2?"bottom":"center"}function k5(s,t,r,n){const{x:o,width:c}=n,d=r.caretSize+r.caretPadding;if(s==="left"&&o+c+d>t.width||s==="right"&&o-c-d<0)return!0}function _5(s,t,r,n){const{x:o,width:c}=r,{width:d,chartArea:{left:m,right:h}}=s;let g="center";return n==="center"?g=o<=(m+h)/2?"left":"right":o<=c/2?g="left":o>=d-c/2&&(g="right"),k5(g,s,t,r)&&(g="center"),g}function wb(s,t,r){const n=r.yAlign||t.yAlign||C5(s,r);return{xAlign:r.xAlign||t.xAlign||_5(s,t,r,n),yAlign:n}}function A5(s,t){let{x:r,width:n}=s;return t==="right"?r-=n:t==="center"&&(r-=n/2),r}function D5(s,t,r){let{y:n,height:o}=s;return t==="top"?n+=r:t==="bottom"?n-=o+r:n-=o/2,n}function Nb(s,t,r,n){const{caretSize:o,caretPadding:c,cornerRadius:d}=s,{xAlign:m,yAlign:h}=r,g=o+c,{topLeft:y,topRight:w,bottomLeft:S,bottomRight:_}=Tc(d);let E=A5(t,m);const z=D5(t,h,g);return h==="center"?m==="left"?E+=g:m==="right"&&(E-=g):m==="left"?E-=Math.max(y,S)+o:m==="right"&&(E+=Math.max(w,_)+o),{x:Ya(E,0,n.width-t.width),y:Ya(z,0,n.height-t.height)}}function fh(s,t,r){const n=rn(r.padding);return t==="center"?s.x+s.width/2:t==="right"?s.x+s.width-n.right:s.x+n.left}function Sb(s){return Vn([],bi(s))}function E5(s,t,r){return Sl(s,{tooltip:t,tooltipItems:r,type:"tooltip"})}function Cb(s,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?s.override(r):s}const Oj={beforeTitle:xi,title(s){if(s.length>0){const t=s[0],r=t.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return r[t.dataIndex]}return""},afterTitle:xi,beforeBody:xi,beforeLabel:xi,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let t=s.dataset.label||"";t&&(t+=": ");const r=s.formattedValue;return Ns(r)||(t+=r),t},labelColor(s){const r=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const r=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:xi,afterBody:xi,beforeFooter:xi,footer:xi,afterFooter:xi};function jr(s,t,r,n){const o=s[t].call(r,n);return typeof o>"u"?Oj[t].call(r,n):o}class kb extends ki{static positioners=du;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,n=this.options.setContext(this.getContext()),o=n.enabled&&r.options.animation&&n.animations,c=new dj(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(c)),c}getContext(){return this.$context||(this.$context=E5(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:n}=r,o=jr(n,"beforeTitle",this,t),c=jr(n,"title",this,t),d=jr(n,"afterTitle",this,t);let m=[];return m=Vn(m,bi(o)),m=Vn(m,bi(c)),m=Vn(m,bi(d)),m}getBeforeBody(t,r){return Sb(jr(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:n}=r,o=[];return ks(t,c=>{const d={before:[],lines:[],after:[]},m=Cb(n,c);Vn(d.before,bi(jr(m,"beforeLabel",this,c))),Vn(d.lines,jr(m,"label",this,c)),Vn(d.after,bi(jr(m,"afterLabel",this,c))),o.push(d)}),o}getAfterBody(t,r){return Sb(jr(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:n}=r,o=jr(n,"beforeFooter",this,t),c=jr(n,"footer",this,t),d=jr(n,"afterFooter",this,t);let m=[];return m=Vn(m,bi(o)),m=Vn(m,bi(c)),m=Vn(m,bi(d)),m}_createItems(t){const r=this._active,n=this.chart.data,o=[],c=[],d=[];let m=[],h,g;for(h=0,g=r.length;h<g;++h)m.push(S5(this.chart,r[h]));return t.filter&&(m=m.filter((y,w,S)=>t.filter(y,w,S,n))),t.itemSort&&(m=m.sort((y,w)=>t.itemSort(y,w,n))),ks(m,y=>{const w=Cb(t.callbacks,y);o.push(jr(w,"labelColor",this,y)),c.push(jr(w,"labelPointStyle",this,y)),d.push(jr(w,"labelTextColor",this,y))}),this.labelColors=o,this.labelPointStyles=c,this.labelTextColors=d,this.dataPoints=m,m}update(t,r){const n=this.options.setContext(this.getContext()),o=this._active;let c,d=[];if(!o.length)this.opacity!==0&&(c={opacity:0});else{const m=du[n.position].call(this,o,this._eventPosition);d=this._createItems(n),this.title=this.getTitle(d,n),this.beforeBody=this.getBeforeBody(d,n),this.body=this.getBody(d,n),this.afterBody=this.getAfterBody(d,n),this.footer=this.getFooter(d,n);const h=this._size=jb(this,n),g=Object.assign({},m,h),y=wb(this.chart,n,g),w=Nb(n,g,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,c={opacity:1,x:w.x,y:w.y,width:h.width,height:h.height,caretX:m.x,caretY:m.y}}this._tooltipItems=d,this.$context=void 0,c&&this._resolveAnimations().update(this,c),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,n,o){const c=this.getCaretPosition(t,n,o);r.lineTo(c.x1,c.y1),r.lineTo(c.x2,c.y2),r.lineTo(c.x3,c.y3)}getCaretPosition(t,r,n){const{xAlign:o,yAlign:c}=this,{caretSize:d,cornerRadius:m}=n,{topLeft:h,topRight:g,bottomLeft:y,bottomRight:w}=Tc(m),{x:S,y:_}=t,{width:E,height:z}=r;let I,U,q,O,R,M;return c==="center"?(R=_+z/2,o==="left"?(I=S,U=I-d,O=R+d,M=R-d):(I=S+E,U=I+d,O=R-d,M=R+d),q=I):(o==="left"?U=S+Math.max(h,y)+d:o==="right"?U=S+E-Math.max(g,w)-d:U=this.caretX,c==="top"?(O=_,R=O-d,I=U-d,q=U+d):(O=_+z,R=O+d,I=U+d,q=U-d),M=O),{x1:I,x2:U,x3:q,y1:O,y2:R,y3:M}}drawTitle(t,r,n){const o=this.title,c=o.length;let d,m,h;if(c){const g=Mc(n.rtl,this.x,this.width);for(t.x=fh(this,n.titleAlign,n),r.textAlign=g.textAlign(n.titleAlign),r.textBaseline="middle",d=Ga(n.titleFont),m=n.titleSpacing,r.fillStyle=n.titleColor,r.font=d.string,h=0;h<c;++h)r.fillText(o[h],g.x(t.x),t.y+d.lineHeight/2),t.y+=d.lineHeight+m,h+1===c&&(t.y+=n.titleMarginBottom-m)}}_drawColorBox(t,r,n,o,c){const d=this.labelColors[n],m=this.labelPointStyles[n],{boxHeight:h,boxWidth:g}=c,y=Ga(c.bodyFont),w=fh(this,"left",c),S=o.x(w),_=h<y.lineHeight?(y.lineHeight-h)/2:0,E=r.y+_;if(c.usePointStyle){const z={radius:Math.min(g,h)/2,pointStyle:m.pointStyle,rotation:m.rotation,borderWidth:1},I=o.leftForLtr(S,g)+g/2,U=E+h/2;t.strokeStyle=c.multiKeyBackground,t.fillStyle=c.multiKeyBackground,tx(t,z,I,U),t.strokeStyle=d.borderColor,t.fillStyle=d.backgroundColor,tx(t,z,I,U)}else{t.lineWidth=fs(d.borderWidth)?Math.max(...Object.values(d.borderWidth)):d.borderWidth||1,t.strokeStyle=d.borderColor,t.setLineDash(d.borderDash||[]),t.lineDashOffset=d.borderDashOffset||0;const z=o.leftForLtr(S,g),I=o.leftForLtr(o.xPlus(S,1),g-2),U=Tc(d.borderRadius);Object.values(U).some(q=>q!==0)?(t.beginPath(),t.fillStyle=c.multiKeyBackground,Ih(t,{x:z,y:E,w:g,h,radius:U}),t.fill(),t.stroke(),t.fillStyle=d.backgroundColor,t.beginPath(),Ih(t,{x:I,y:E+1,w:g-2,h:h-2,radius:U}),t.fill()):(t.fillStyle=c.multiKeyBackground,t.fillRect(z,E,g,h),t.strokeRect(z,E,g,h),t.fillStyle=d.backgroundColor,t.fillRect(I,E+1,g-2,h-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,r,n){const{body:o}=this,{bodySpacing:c,bodyAlign:d,displayColors:m,boxHeight:h,boxWidth:g,boxPadding:y}=n,w=Ga(n.bodyFont);let S=w.lineHeight,_=0;const E=Mc(n.rtl,this.x,this.width),z=function(oe){r.fillText(oe,E.x(t.x+_),t.y+S/2),t.y+=S+c},I=E.textAlign(d);let U,q,O,R,M,P,ee;for(r.textAlign=d,r.textBaseline="middle",r.font=w.string,t.x=fh(this,I,n),r.fillStyle=n.bodyColor,ks(this.beforeBody,z),_=m&&I!=="right"?d==="center"?g/2+y:g+2+y:0,R=0,P=o.length;R<P;++R){for(U=o[R],q=this.labelTextColors[R],r.fillStyle=q,ks(U.before,z),O=U.lines,m&&O.length&&(this._drawColorBox(r,t,R,E,n),S=Math.max(w.lineHeight,h)),M=0,ee=O.length;M<ee;++M)z(O[M]),S=w.lineHeight;ks(U.after,z)}_=0,S=w.lineHeight,ks(this.afterBody,z),t.y-=c}drawFooter(t,r,n){const o=this.footer,c=o.length;let d,m;if(c){const h=Mc(n.rtl,this.x,this.width);for(t.x=fh(this,n.footerAlign,n),t.y+=n.footerMarginTop,r.textAlign=h.textAlign(n.footerAlign),r.textBaseline="middle",d=Ga(n.footerFont),r.fillStyle=n.footerColor,r.font=d.string,m=0;m<c;++m)r.fillText(o[m],h.x(t.x),t.y+d.lineHeight/2),t.y+=d.lineHeight+n.footerSpacing}}drawBackground(t,r,n,o){const{xAlign:c,yAlign:d}=this,{x:m,y:h}=t,{width:g,height:y}=n,{topLeft:w,topRight:S,bottomLeft:_,bottomRight:E}=Tc(o.cornerRadius);r.fillStyle=o.backgroundColor,r.strokeStyle=o.borderColor,r.lineWidth=o.borderWidth,r.beginPath(),r.moveTo(m+w,h),d==="top"&&this.drawCaret(t,r,n,o),r.lineTo(m+g-S,h),r.quadraticCurveTo(m+g,h,m+g,h+S),d==="center"&&c==="right"&&this.drawCaret(t,r,n,o),r.lineTo(m+g,h+y-E),r.quadraticCurveTo(m+g,h+y,m+g-E,h+y),d==="bottom"&&this.drawCaret(t,r,n,o),r.lineTo(m+_,h+y),r.quadraticCurveTo(m,h+y,m,h+y-_),d==="center"&&c==="left"&&this.drawCaret(t,r,n,o),r.lineTo(m,h+w),r.quadraticCurveTo(m,h,m+w,h),r.closePath(),r.fill(),o.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,n=this.$animations,o=n&&n.x,c=n&&n.y;if(o||c){const d=du[t.position].call(this,this._active,this._eventPosition);if(!d)return;const m=this._size=jb(this,t),h=Object.assign({},d,this._size),g=wb(r,t,h),y=Nb(t,h,g,r);(o._to!==y.x||c._to!==y.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=m.width,this.height=m.height,this.caretX=d.x,this.caretY=d.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const o={width:this.width,height:this.height},c={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const d=rn(r.padding),m=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&m&&(t.save(),t.globalAlpha=n,this.drawBackground(c,t,o,r),rj(t,r.textDirection),c.y+=d.top,this.drawTitle(c,t,r),this.drawBody(c,t,r),this.drawFooter(c,t,r),nj(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const n=this._active,o=t.map(({datasetIndex:m,index:h})=>{const g=this.chart.getDatasetMeta(m);if(!g)throw new Error("Cannot find a dataset at index "+m);return{datasetIndex:m,element:g.data[h],index:h}}),c=!Mh(n,o),d=this._positionChanged(o,r);(c||d)&&(this._active=o,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,c=this._active||[],d=this._getActiveElements(t,c,r,n),m=this._positionChanged(d,t),h=r||!Mh(d,c)||m;return h&&(this._active=d,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),h}_getActiveElements(t,r,n,o){const c=this.options;if(t.type==="mouseout")return[];if(!o)return r.filter(m=>this.chart.data.datasets[m.datasetIndex]&&this.chart.getDatasetMeta(m.datasetIndex).controller.getParsed(m.index)!==void 0);const d=this.chart.getElementsAtEventForMode(t,c.mode,c,n);return c.reverse&&d.reverse(),d}_positionChanged(t,r){const{caretX:n,caretY:o,options:c}=this,d=du[c.position].call(this,t,r);return d!==!1&&(n!==d.x||o!==d.y)}}var Rj={id:"tooltip",_element:kb,positioners:du,afterInit(s,t,r){r&&(s.tooltip=new kb({chart:s,options:r}))},beforeUpdate(s,t,r){s.tooltip&&s.tooltip.initialize(r)},reset(s,t,r){s.tooltip&&s.tooltip.initialize(r)},afterDraw(s){const t=s.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(s.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;t.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",r)}},afterEvent(s,t){if(s.tooltip){const r=t.replay;s.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,t)=>t.bodyFont.size,boxWidth:(s,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Oj},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const T5=(s,t,r,n)=>(typeof t=="string"?(r=s.push(t)-1,n.unshift({index:r,label:t})):isNaN(t)&&(r=null),r);function M5(s,t,r,n){const o=s.indexOf(t);if(o===-1)return T5(s,t,r,n);const c=s.lastIndexOf(t);return o!==c?r:o}const O5=(s,t)=>s===null?null:Ya(Math.round(s),0,t);function _b(s){const t=this.getLabels();return s>=0&&s<t.length?t[s]:s}class Ij extends Bc{static id="category";static defaults={ticks:{callback:_b}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:o,label:c}of r)n[o]===c&&n.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Ns(t))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===t?r:M5(n,t,os(r,t),this._addedLabels),O5(r,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),r||(o=this.getLabels().length-1)),this.min=n,this.max=o}buildTicks(){const t=this.min,r=this.max,n=this.options.offset,o=[];let c=this.getLabels();c=t===0&&r===c.length-1?c:c.slice(t,r+1),this._valueRange=Math.max(c.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let d=t;d<=r;d++)o.push({value:d});return o}getLabelForValue(t){return _b.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function R5(s,t){const r=[],{bounds:o,step:c,min:d,max:m,precision:h,count:g,maxTicks:y,maxDigits:w,includeBounds:S}=s,_=c||1,E=y-1,{min:z,max:I}=t,U=!Ns(d),q=!Ns(m),O=!Ns(g),R=(I-z)/(w+1);let M=Ny((I-z)/E/_)*_,P,ee,oe,je;if(M<1e-14&&!U&&!q)return[{value:z},{value:I}];je=Math.ceil(I/M)-Math.floor(z/M),je>E&&(M=Ny(je*M/E/_)*_),Ns(h)||(P=Math.pow(10,h),M=Math.ceil(M*P)/P),o==="ticks"?(ee=Math.floor(z/M)*M,oe=Math.ceil(I/M)*M):(ee=z,oe=I),U&&q&&c&&z3((m-d)/c,M/1e3)?(je=Math.round(Math.min((m-d)/M,y)),M=(m-d)/je,ee=d,oe=m):O?(ee=U?d:ee,oe=q?m:oe,je=g-1,M=(oe-ee)/je):(je=(oe-ee)/M,fu(je,Math.round(je),M/1e3)?je=Math.round(je):je=Math.ceil(je));const de=Math.max(Sy(M),Sy(ee));P=Math.pow(10,Ns(h)?de:h),ee=Math.round(ee*P)/P,oe=Math.round(oe*P)/P;let re=0;for(U&&(S&&ee!==d?(r.push({value:d}),ee<d&&re++,fu(Math.round((ee+re*M)*P)/P,d,Ab(d,R,s))&&re++):ee<d&&re++);re<je;++re){const Te=Math.round((ee+re*M)*P)/P;if(q&&Te>m)break;r.push({value:Te})}return q&&S&&oe!==m?r.length&&fu(r[r.length-1].value,m,Ab(m,R,s))?r[r.length-1].value=m:r.push({value:m}):(!q||oe===m)&&r.push({value:oe}),r}function Ab(s,t,{horizontal:r,minRotation:n}){const o=ji(n),c=(r?Math.sin(o):Math.cos(o))||.001,d=.75*t*(""+s).length;return Math.min(t/c,d)}class I5 extends Bc{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,r){return Ns(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:o,max:c}=this;const d=h=>o=r?o:h,m=h=>c=n?c:h;if(t){const h=Yn(o),g=Yn(c);h<0&&g<0?m(0):h>0&&g>0&&d(0)}if(o===c){let h=c===0?1:Math.abs(c*.05);m(c+h),t||d(o-h)}this.min=o,this.max=c}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=t,o;return n?(o=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),r=r||11),r&&(o=Math.min(r,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,r=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const o={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},c=this._range||this,d=R5(o,c);return t.bounds==="ticks"&&P3(d,this,"value"),t.reverse?(d.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),d}configure(){const t=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const o=(n-r)/Math.max(t.length-1,1)/2;r-=o,n+=o}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(t){return Lx(t,this.chart.options.locale,this.options.ticks.format)}}class zj extends I5{static id="linear";static defaults={ticks:{callback:Xv.formatters.numeric}};determineDataLimits(){const{min:t,max:r}=this.getMinMax(!0);this.min=Wa(t)?t:0,this.max=Wa(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),r=t?this.width:this.height,n=ji(this.options.ticks.minRotation),o=(t?Math.sin(n):Math.cos(n))||.001,c=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,c.lineHeight/o))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const ef={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Nr=Object.keys(ef);function Db(s,t){return s-t}function Eb(s,t){if(Ns(t))return null;const r=s._adapter,{parser:n,round:o,isoWeekday:c}=s._parseOpts;let d=t;return typeof n=="function"&&(d=n(d)),Wa(d)||(d=typeof n=="string"?r.parse(d,n):r.parse(d)),d===null?null:(o&&(d=o==="week"&&(ku(c)||c===!0)?r.startOf(d,"isoWeek",c):r.startOf(d,o)),+d)}function Tb(s,t,r,n){const o=Nr.length;for(let c=Nr.indexOf(s);c<o-1;++c){const d=ef[Nr[c]],m=d.steps?d.steps:Number.MAX_SAFE_INTEGER;if(d.common&&Math.ceil((r-t)/(m*d.size))<=n)return Nr[c]}return Nr[o-1]}function z5(s,t,r,n,o){for(let c=Nr.length-1;c>=Nr.indexOf(r);c--){const d=Nr[c];if(ef[d].common&&s._adapter.diff(o,n,d)>=t-1)return d}return Nr[r?Nr.indexOf(r):0]}function P5(s){for(let t=Nr.indexOf(s)+1,r=Nr.length;t<r;++t)if(ef[Nr[t]].common)return Nr[t]}function Mb(s,t,r){if(!r)s[t]=!0;else if(r.length){const{lo:n,hi:o}=zx(r,t),c=r[n]>=t?r[n]:r[o];s[c]=!0}}function F5(s,t,r,n){const o=s._adapter,c=+o.startOf(t[0].value,n),d=t[t.length-1].value;let m,h;for(m=c;m<=d;m=+o.add(m,1,n))h=r[m],h>=0&&(t[h].major=!0);return t}function Ob(s,t,r){const n=[],o={},c=t.length;let d,m;for(d=0;d<c;++d)m=t[d],o[m]=d,n.push({value:m,major:!1});return c===0||!r?n:F5(s,n,o,r)}class Rb extends Bc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const n=t.time||(t.time={}),o=this._adapter=new wk._date(t.adapters.date);o.init(r),hu(n.displayFormats,o.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:Eb(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,n=t.time.unit||"day";let{min:o,max:c,minDefined:d,maxDefined:m}=this.getUserBounds();function h(g){!d&&!isNaN(g.min)&&(o=Math.min(o,g.min)),!m&&!isNaN(g.max)&&(c=Math.max(c,g.max))}(!d||!m)&&(h(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&h(this.getMinMax(!1))),o=Wa(o)&&!isNaN(o)?o:+r.startOf(Date.now(),n),c=Wa(c)&&!isNaN(c)?c:+r.endOf(Date.now(),n)+1,this.min=Math.min(o,c-1),this.max=Math.max(o+1,c)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],n=t[t.length-1]),{min:r,max:n}}buildTicks(){const t=this.options,r=t.time,n=t.ticks,o=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const c=this.min,d=this.max,m=$3(o,c,d);return this._unit=r.unit||(n.autoSkip?Tb(r.minUnit,this.min,this.max,this._getLabelCapacity(c)):z5(this,m.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:P5(this._unit),this.initOffsets(o),t.reverse&&m.reverse(),Ob(this,m,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,n=0,o,c;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?r=1-o:r=(this.getDecimalForValue(t[1])-o)/2,c=this.getDecimalForValue(t[t.length-1]),t.length===1?n=c:n=(c-this.getDecimalForValue(t[t.length-2]))/2);const d=t.length<3?.5:.25;r=Ya(r,0,d),n=Ya(n,0,d),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const t=this._adapter,r=this.min,n=this.max,o=this.options,c=o.time,d=c.unit||Tb(c.minUnit,r,n,this._getLabelCapacity(r)),m=os(o.ticks.stepSize,1),h=d==="week"?c.isoWeekday:!1,g=ku(h)||h===!0,y={};let w=r,S,_;if(g&&(w=+t.startOf(w,"isoWeek",h)),w=+t.startOf(w,g?"day":d),t.diff(n,r,d)>1e5*m)throw new Error(r+" and "+n+" are too far apart with stepSize of "+m+" "+d);const E=o.ticks.source==="data"&&this.getDataTimestamps();for(S=w,_=0;S<n;S=+t.add(S,m,d),_++)Mb(y,S,E);return(S===n||o.bounds==="ticks"||_===1)&&Mb(y,S,E),Object.keys(y).sort(Db).map(z=>+z)}getLabelForValue(t){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(t,n.tooltipFormat):r.format(t,n.displayFormats.datetime)}format(t,r){const o=this.options.time.displayFormats,c=this._unit,d=r||o[c];return this._adapter.format(t,d)}_tickFormatFunction(t,r,n,o){const c=this.options,d=c.ticks.callback;if(d)return Ps(d,[t,r,n],this);const m=c.time.displayFormats,h=this._unit,g=this._majorUnit,y=h&&m[h],w=g&&m[g],S=n[r],_=g&&w&&S&&S.major;return this._adapter.format(t,o||(_?w:y))}generateTickLabels(t){let r,n,o;for(r=0,n=t.length;r<n;++r)o=t[r],o.label=this._tickFormatFunction(o.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(t){const r=this._offsets,n=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,n=this.ctx.measureText(t).width,o=ji(this.isHorizontal()?r.maxRotation:r.minRotation),c=Math.cos(o),d=Math.sin(o),m=this._resolveTickFontOptions(0).size;return{w:n*c+m*d,h:n*d+m*c}}_getLabelCapacity(t){const r=this.options.time,n=r.displayFormats,o=n[r.unit]||n.millisecond,c=this._tickFormatFunction(t,0,Ob(this,[t],this._majorUnit),o),d=this._getLabelSize(c),m=Math.floor(this.isHorizontal()?this.width/d.w:this.height/d.h)-1;return m>0?m:1}getDataTimestamps(){let t=this._cache.data||[],r,n;if(t.length)return t;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(r=0,n=o.length;r<n;++r)t=t.concat(o[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,n;if(t.length)return t;const o=this.getLabels();for(r=0,n=o.length;r<n;++r)t.push(Eb(this,o[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Yv(t.sort(Db))}}function gh(s,t,r){let n=0,o=s.length-1,c,d,m,h;r?(t>=s[n].pos&&t<=s[o].pos&&({lo:n,hi:o}=xl(s,"pos",t)),{pos:c,time:m}=s[n],{pos:d,time:h}=s[o]):(t>=s[n].time&&t<=s[o].time&&({lo:n,hi:o}=xl(s,"time",t)),{time:c,pos:m}=s[n],{time:d,pos:h}=s[o]);const g=d-c;return g?m+(h-m)*(t-c)/g:m}class M6 extends Rb{static id="timeseries";static defaults=Rb.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(t);this._minPos=gh(r,this.min),this._tableRange=gh(r,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:r,max:n}=this,o=[],c=[];let d,m,h,g,y;for(d=0,m=t.length;d<m;++d)g=t[d],g>=r&&g<=n&&o.push(g);if(o.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(d=0,m=o.length;d<m;++d)y=o[d+1],h=o[d-1],g=o[d],Math.round((y+h)/2)!==g&&c.push({time:g,pos:d/(m-1)});return c}_generate(){const t=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((o,c)=>o-c)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?t=this.normalize(r.concat(n)):t=r.length?r:n,t=this._cache.all=t,t}getDecimalForValue(t){return(gh(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const r=this._offsets,n=this.getDecimalForPixel(t)/r.factor-r.end;return gh(this._table,n*this._tableRange+this._minPos,!0)}}const Pj="label";function Ib(s,t){typeof s=="function"?s(t):s&&(s.current=t)}function L5(s,t){const r=s.options;r&&t&&Object.assign(r,t)}function Fj(s,t){s.labels=t}function Lj(s,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pj;const n=[];s.datasets=t.map(o=>{const c=s.datasets.find(d=>d[r]===o[r]);return!c||!o.data||n.includes(c)?{...o}:(n.push(c),Object.assign(c,o),c)})}function B5(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pj;const r={labels:[],datasets:[]};return Fj(r,s.labels),Lj(r,s.datasets,t),r}function U5(s,t){const{height:r=150,width:n=300,redraw:o=!1,datasetIdKey:c,type:d,data:m,options:h,plugins:g=[],fallbackContent:y,updateMode:w,...S}=s,_=v.useRef(null),E=v.useRef(null),z=()=>{_.current&&(E.current=new zu(_.current,{type:d,data:B5(m,c),options:h&&{...h},plugins:g}),Ib(t,E.current))},I=()=>{Ib(t,null),E.current&&(E.current.destroy(),E.current=null)};return v.useEffect(()=>{!o&&E.current&&h&&L5(E.current,h)},[o,h]),v.useEffect(()=>{!o&&E.current&&Fj(E.current.config.data,m.labels)},[o,m.labels]),v.useEffect(()=>{!o&&E.current&&m.datasets&&Lj(E.current.config.data,m.datasets,c)},[o,m.datasets]),v.useEffect(()=>{E.current&&(o?(I(),setTimeout(z)):E.current.update(w))},[o,h,m.labels,m.datasets,w]),v.useEffect(()=>{E.current&&(I(),setTimeout(z))},[d]),v.useEffect(()=>(z(),()=>I()),[]),Sr.createElement("canvas",{ref:_,role:"img",height:r,width:n,...S},y)}const $5=v.forwardRef(U5);function Yx(s,t){return zu.register(t),v.forwardRef((r,n)=>Sr.createElement($5,{...r,ref:n,type:s}))}const Bj=Yx("line",jk),zb=Yx("bar",yk),H5=Yx("doughnut",vk);zu.register(Ij,zj,Sj,Pu,Z_,P_,Mj,Rj,Ej,Aj);const V5=()=>{const[s,t]=v.useState("30D"),[r,n]=v.useState("7D"),o=[{id:"#ORD-001",customer:"John Smith",items:"Pizza Margherita, Coke",paymentMethod:"Credit Card",total:24.5,status:"COMPLETED",time:"2 min ago"},{id:"#ORD-002",customer:"Sarah Johnson",items:"Burger Deluxe, Fries",paymentMethod:"Cash",total:18.75,status:"COMPLETED",time:"5 min ago"},{id:"#ORD-003",customer:"Mike Wilson",items:"Pasta Carbonara",paymentMethod:"Mobile Pay",total:16.9,status:"PROCESSING",time:"8 min ago"},{id:"#ORD-004",customer:"Lisa Brown",items:"Chicken Wings, Beer",paymentMethod:"Credit Card",total:22.3,status:"COMPLETED",time:"12 min ago"},{id:"#ORD-005",customer:"David Lee",items:"Caesar Salad, Water",paymentMethod:"Cash",total:14.25,status:"COMPLETED",time:"15 min ago"},{id:"#ORD-006",customer:"Emma Davis",items:"Steak, Wine",paymentMethod:"Credit Card",total:45.8,status:"PREPARING",time:"18 min ago"}],c=R=>{switch(R){case"Credit Card":return e.jsx($0,{className:"w-4 h-4 text-yellow-600"});case"Cash":return e.jsx(cN,{className:"w-4 h-4 text-green-600"});case"Mobile Pay":return e.jsx(A1,{className:"w-4 h-4 text-blue-600"});default:return e.jsx($0,{className:"w-4 h-4 text-gray-600"})}},d=R=>{switch(R){case"COMPLETED":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:R});case"PROCESSING":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:R});case"PREPARING":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded-full",children:R});default:return e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:R})}},m=R=>{switch(R){case"7D":return{labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],data:[1200,1900,1600,2100,1800,2200,1950]};case"30D":return{labels:["Week 1","Week 2","Week 3","Week 4"],data:[15e3,18e3,22e3,19e3]};case"90D":return{labels:["Month 1","Month 2","Month 3"],data:[45e3,52e3,48e3]};default:return{labels:["Week 1","Week 2","Week 3","Week 4"],data:[15e3,18e3,22e3,19e3]}}},h=R=>{const M={Pizza:34,Burger:24,Pasta:20,Salad:15,Dessert:5},P=R==="7D"?1:R==="30D"?4:12;return Object.fromEntries(Object.entries(M).map(([ee,oe])=>[ee,oe*P]))},g=m(s),y=h(r),w={labels:g.labels,datasets:[{label:"Daily Sales",data:g.data,borderColor:"#0f766e",backgroundColor:"rgba(15, 118, 110, 0.1)",borderWidth:2,fill:!0,tension:.4,pointBackgroundColor:"#0f766e",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]},S={labels:Object.keys(y),datasets:[{label:"Sales",data:Object.values(y),backgroundColor:["#0f766e","#0891b2","#059669","#ea580c","#dc2626"],borderRadius:8,borderSkipped:!1}]},_={labels:["Credit Card","Cash","Mobile Pay"],datasets:[{data:[65,25,10],backgroundColor:["#0f766e","#0891b2","#059669"],borderWidth:0,cutout:"60%"}]},E={labels:["Lunch (12-2PM)","Dinner (6-8PM)","Late Night (9-11PM)"],datasets:[{label:"Sales",data:[2700,4100,1300],backgroundColor:["#0f766e","#0891b2","#059669"],borderRadius:8,borderSkipped:!1}]},z={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,color:"#0f766e",font:{size:16,weight:"bold"},align:"start",padding:{bottom:20}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#374151",bodyColor:"#374151",borderColor:"#e5e7eb",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(R){return`Sales: $${R.parsed.y.toLocaleString()}`}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6b7280",font:{size:12}}},y:{beginAtZero:!0,max:s==="7D"?2500:s==="30D"?25e3:6e4,grid:{color:"rgba(229, 231, 235, 0.3)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:12},callback:function(R){return"$"+R.toLocaleString()}}}},interaction:{intersect:!1,mode:"index"}},I={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,color:"#0f766e",font:{size:16,weight:"bold"},align:"start",padding:{bottom:20}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#374151",bodyColor:"#374151",borderColor:"#e5e7eb",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(R){return`Sales: ${R.parsed.y.toLocaleString()}`}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6b7280",font:{size:12}}},y:{beginAtZero:!0,max:r==="7D"?35:r==="30D"?140:420,grid:{color:"rgba(229, 231, 235, 0.3)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:12}}}}},U={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:20,color:"#374151",font:{size:12}}},title:{display:!0,color:"#0f766e",font:{size:16,weight:"bold"},align:"start",padding:{bottom:20}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#374151",bodyColor:"#374151",borderColor:"#e5e7eb",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(R){return`${R.label}: ${R.parsed}%`}}}}},q={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,color:"#0f766e",font:{size:16,weight:"bold"},align:"start",padding:{bottom:20}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#374151",bodyColor:"#374151",borderColor:"#e5e7eb",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(R){return`Sales: $${R.parsed.y.toLocaleString()}`}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6b7280",font:{size:12}}},y:{beginAtZero:!0,max:4500,grid:{color:"rgba(229, 231, 235, 0.3)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:12},callback:function(R){return"$"+R.toLocaleString()}}}}},O=({active:R,children:M,onClick:P})=>e.jsx("button",{onClick:P,className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${R?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:M});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Dashboard Overview"}),e.jsx("p",{className:"text-gray-600",children:"Real-time insights into your restaurant performance"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:"$12,847"}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+12.5% vs last week"})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-yellow-400 to-yellow-600 flex items-center justify-center",children:e.jsx(Fc,{className:"w-6 h-6 text-white"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Orders Today"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:"156"}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+8.2% vs yesterday"})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center",children:e.jsx(ko,{className:"w-6 h-6 text-white"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Food Items Sold"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:"342"}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+15.3% vs yesterday"})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center",children:e.jsx(Ni,{className:"w-6 h-6 text-white"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Customer Rating"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:"4.8/5"}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+0.2 vs last week"})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-yellow-400 to-yellow-600 flex items-center justify-center",children:e.jsx(iu,{className:"w-6 h-6 text-white"})})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Daily Sales Trend"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(O,{active:s==="7D",onClick:()=>t("7D"),children:"7D"}),e.jsx(O,{active:s==="30D",onClick:()=>t("30D"),children:"30D"}),e.jsx(O,{active:s==="90D",onClick:()=>t("90D"),children:"90D"})]})]}),e.jsx("div",{className:"h-80",children:e.jsx(Bj,{data:w,options:z})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Top Food Items"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(O,{active:r==="7D",onClick:()=>n("7D"),children:"7D"}),e.jsx(O,{active:r==="30D",onClick:()=>n("30D"),children:"30D"}),e.jsx(O,{active:r==="90D",onClick:()=>n("90D"),children:"90D"})]})]}),e.jsx("div",{className:"h-80",children:e.jsx(zb,{data:S,options:I})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qg,{className:"w-5 h-5 text-yellow-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Payment Methods"})]}),e.jsxs("div",{className:"flex space-x-4 text-sm text-gray-600",children:[e.jsx("span",{children:"Credit Card"}),e.jsx("span",{children:"Cash"}),e.jsx("span",{children:"Mobile Pay"})]})]}),e.jsx("div",{className:"h-80",children:e.jsx(H5,{data:_,options:U})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5 text-red-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Peak Hours Analysis"})]}),e.jsxs("div",{className:"flex space-x-4 text-sm text-gray-600",children:[e.jsx("span",{children:"Lunch"}),e.jsx("span",{children:"Dinner"}),e.jsx("span",{children:"Late Night"})]})]}),e.jsx("div",{className:"h-80",children:e.jsx(zb,{data:E,options:q})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qg,{className:"w-5 h-5 text-yellow-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Recent Sales Transactions"})]}),e.jsxs("button",{className:"bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg transition-colors duration-200 flex items-center gap-2",children:[e.jsx(vn,{className:"w-4 h-4"}),"View All Sales"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Order ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Items"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Payment Method"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Total"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Time"})]})}),e.jsx("tbody",{children:o.map((R,M)=>e.jsxs("tr",{className:`border-b border-gray-100 ${M%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:R.id}),e.jsx("td",{className:"py-3 px-4 text-gray-700",children:R.customer}),e.jsx("td",{className:"py-3 px-4 text-gray-700",children:R.items}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[c(R.paymentMethod),e.jsx("span",{className:"text-gray-700",children:R.paymentMethod})]})}),e.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900",children:["$",R.total.toFixed(2)]}),e.jsx("td",{className:"py-3 px-4",children:d(R.status)}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:R.time})]},R.id))})]})})]})]})},q5=()=>{const s=ya(),[t,r]=v.useState("all"),[n,o]=v.useState([]),[c,d]=v.useState(!1),[m,h]=v.useState(!1),[g,y]=v.useState(!1),[w,S]=v.useState(null),[_,E]=v.useState(null),[z,I]=v.useState(null),{alertState:U,showError:q,showSuccess:O,hideAlert:R}=Yh(),M=async()=>{d(!0);try{if(!window.myAPI)return;let ue;if(t==="today"){const se=new Date().toISOString().split("T")[0];ue=await window.myAPI.getReservationsByDateRange(se,se,1)}else if(t==="upcoming"){const se=new Date().toISOString().split("T")[0],Ae=new Date;Ae.setFullYear(Ae.getFullYear()+1),ue=await window.myAPI.getReservationsByDateRange(se,Ae.toISOString().split("T")[0],1)}else t==="all"?ue=await window.myAPI.getReservationsByHotelId(1,100,0):ue=await window.myAPI.getReservationsByStatus(t,1,100,0);ue&&ue.success&&o(ue.data||[])}catch(ue){console.error("Error loading reservations:",ue),q("Failed to load reservations")}finally{d(!1)}};v.useEffect(()=>{M()},[t]);const P=v.useMemo(()=>{if(t==="today"){const ue=new Date().toISOString().split("T")[0];return n.filter(se=>se.reservation_date===ue&&se.status!=="completed")}else if(t==="upcoming"){const ue=new Date().toISOString().split("T")[0];return n.filter(se=>se.reservation_date>ue)}else return t==="all"?n:n.filter(ue=>ue.status===t)},[t,n]),ee=ue=>{S(ue),h(!0)},oe=async()=>{if(w)try{const ue=await window.myAPI.deleteReservation(w.id);ue&&ue.success?(O("Reservation deleted successfully"),M()):q("Failed to delete reservation")}catch(ue){console.error("Error deleting reservation:",ue),q("An error occurred while deleting the reservation")}h(!1),S(null)},je=()=>{h(!1),S(null)},de=async(ue,se)=>{try{const Ae=await window.myAPI.updateReservation(ue,{status:se});Ae&&Ae.success?(O(`Reservation ${se} successfully`),M()):q(`Failed to ${se} reservation`)}catch(Ae){console.error("Error updating reservation status:",Ae),q(`An error occurred while ${se} the reservation`)}},re=()=>{y(!0)},Te=()=>{M()},De=ue=>ue.status==="confirmed",ne=ue=>ue==="confirmed"?e.jsx("span",{className:"px-2 py-2 text-xs rounded bg-green-100 text-green-700",children:"CONFIRMED"}):ue==="completed"?e.jsx("span",{className:"px-2 py-2 text-xs rounded bg-blue-100 text-blue-700",children:"COMPLETED"}):e.jsx("span",{className:"px-2 py-2 text-xs rounded bg-gray-100 text-gray-700",children:"CANCELLED"});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gN,{size:18,className:"text-primary"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Reservations"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:re,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx(Ls,{size:16}),"New Reservation"]}),e.jsx("button",{onClick:()=>s("/dashboard/sales"),className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"Sales Screen"})]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-3",children:[{id:"all",label:"All"},{id:"today",label:"Today"},{id:"upcoming",label:"Upcoming"},{id:"completed",label:"Completed"},{id:"cancelled",label:"Cancelled"}].map(ue=>e.jsx("button",{onClick:()=>r(ue.id),className:`px-4 py-2 rounded text-sm transition-colors duration-150 ${t===ue.id?"bg-primary text-white":"bg-white text-gray-700 border border-gray-300 shadow-sm"}`,children:ue.label},ue.id))}),c?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"Loading reservations..."})}):e.jsx("div",{className:"overflow-auto",children:P.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No reservations found"}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Table"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Party"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(ue=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 text-sm text-gray-800 font-medium",children:ue.customer_name}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:new Date(ue.reservation_date).toLocaleDateString()}),e.jsxs("td",{className:"px-3 py-2 text-sm text-gray-700",children:[ue.start_time," - ",ue.end_time]}),e.jsxs("td",{className:"px-3 py-2 text-sm text-gray-700",children:[ue.table_no?`Table ${ue.table_no}`:"No table",ue.floor_name&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",ue.floor_name,")"]})]}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:ue.party_size}),e.jsx("td",{className:"px-3 py-2 text-sm",children:ne(ue.status)}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:ue.special_notes?ue.special_notes.length>10?`${ue.special_notes.slice(0,10)}...`:ue.special_notes:"-"}),e.jsx("td",{className:"px-3 py-2 text-sm",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>I(ue),className:"px-3 py-1 rounded bg-gray-200 text-gray-800 text-sm hover:bg-gray-300",children:"View"}),ue.status==="cancelled"||ue.status==="completed"?null:e.jsxs(e.Fragment,{children:[De(ue)&&e.jsx("button",{onClick:()=>E(ue),className:"px-3 py-1 rounded bg-[#007bff] text-white text-sm hover:bg-[#0056b3]",children:"Edit"}),ue.status==="confirmed"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>de(ue.id,"completed"),className:"px-3 py-1 rounded bg-[#28a745] text-white text-sm hover:bg-[#1e7e34]",children:"Complete"}),e.jsx("button",{onClick:()=>de(ue.id,"cancelled"),className:"px-3 py-1 rounded bg-[#dc3545] text-white text-sm hover:bg-[#c82333]",children:"Cancel"})]}):null,e.jsx("button",{onClick:()=>ee(ue),className:"px-3 py-1 rounded bg-[#6c757d] text-white text-sm hover:bg-[#545b62]",children:"Delete"})]})]})})]},ue.id))})]})})]}),m&&e.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:je}),e.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-primary",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Delete Reservation"}),e.jsx("button",{onClick:je,className:"w-8 h-8 flex items-center justify-center rounded hover:bg-white/15",children:e.jsx(Nt,{className:"w-5 h-5 text-white"})})]}),e.jsx("div",{className:"p-4",children:e.jsxs("p",{className:"text-gray-700",children:["Are you sure you want to delete ",w?.customer_name,"'s reservation for table ",w?.table_no||"No table","?"]})}),e.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t",children:[e.jsx("button",{onClick:je,className:"px-4 py-2 rounded bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{onClick:oe,className:"px-4 py-2 rounded bg-red-600 text-white",children:"Delete"})]})]})]}),e.jsx(Ev,{isOpen:g,onClose:()=>y(!1),onCreate:Te}),z&&e.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>I(null)}),e.jsxs("div",{className:"relative w-full max-w-lg bg-white rounded-lg shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-primary",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Reservation Details"}),e.jsx("button",{onClick:()=>I(null),className:"w-8 h-8 flex items-center justify-center rounded hover:bg-white/15",children:e.jsx(Nt,{className:"w-5 h-5 text-white"})})]}),e.jsx("div",{className:"p-4 space-y-2 text-sm text-gray-800",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Customer"}),e.jsx("div",{className:"font-medium",children:z.customer_name||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Date"}),e.jsx("div",{className:"font-medium",children:z.reservation_date?new Date(z.reservation_date).toLocaleDateString():"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Time"}),e.jsxs("div",{className:"font-medium",children:[z.start_time," - ",z.end_time]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Party Size"}),e.jsx("div",{className:"font-medium",children:z.party_size||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-gray-500",children:"Table"}),e.jsxs("div",{className:"font-medium",children:[z.table_no?`Table ${z.table_no}`:"No table",z.floor_name&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",z.floor_name,")"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Status"}),e.jsx("div",{className:"mt-1",children:ne(z.status)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-gray-500",children:"Notes"}),e.jsx("div",{className:"font-medium whitespace-pre-wrap",children:z.special_notes||"-"})]})]})}),e.jsx("div",{className:"flex justify-end gap-2 p-4 border-t",children:e.jsx("button",{onClick:()=>I(null),className:"px-4 py-2 rounded bg-gray-500 text-white",children:"Close"})})]})]}),e.jsx(Ci,{message:U.message,isVisible:U.isVisible,onClose:R,duration:U.duration,type:U.type})]})},K5=({isOpen:s,onClose:t,onConfirm:r,title:n="Confirm Action",message:o="Are you sure you want to proceed?",confirmText:c="Confirm",cancelText:d="Cancel",type:m="warning",isLoading:h=!1})=>{if(!s)return null;const g=()=>{switch(m){case"success":return e.jsx(la,{size:24,className:"text-green-600"});case"danger":return e.jsx(bu,{size:24,className:"text-red-600"});default:return e.jsx(bu,{size:24,className:"text-yellow-600"})}},y=()=>{switch(m){case"success":return"bg-green-600 hover:bg-green-700 text-white";case"danger":return"bg-red-600 hover:bg-red-700 text-white";default:return"bg-primary hover:bg-primaryDark text-white"}};return e.jsx("div",{className:"fixed inset-0 bg-[#00000080] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md transform transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[g(),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-600 leading-relaxed",children:o})}),e.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:t,disabled:h,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:d}),e.jsx("button",{onClick:r,disabled:h,className:`flex-1 px-4 py-2 rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed ${y()}`,children:h?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processing..."]}):c})]})]})})},Y5=()=>{const[s,t]=v.useState("all"),[r,n]=v.useState([]),[o,c]=v.useState([]),[d,m]=v.useState(""),[h,g]=v.useState(""),[y,w]=v.useState(""),[S,_]=v.useState(""),[E,z]=v.useState(null),[I,U]=v.useState([]),[q,O]=v.useState(null),[R,M]=v.useState(!1),[P,ee]=v.useState(!1),[oe,je]=v.useState(!1),[de,re]=v.useState("all"),[Te,De]=v.useState("all"),[ne,ue]=v.useState(!0),[se,Ae]=v.useState(null),[Se,$e]=v.useState(null),[Q,xe]=v.useState(!1),[ve,ae]=v.useState(null),[Ce,pe]=v.useState("New"),[k,L]=v.useState(!1),[f,x]=v.useState(!1),[N,C]=v.useState(null),[A,H]=v.useState(!1),[V,F]=v.useState(!1),[B,J]=v.useState(null),[Y,T]=v.useState({title:"",message:"",type:"warning",onConfirm:null}),[G,ce]=v.useState(!1),[ie,fe]=v.useState(!1),[me,Me]=v.useState({message:"",type:"success"}),[Re,Ie]=v.useState(!1),[st,He]=v.useState("Cash"),[Xe,et]=v.useState(""),[rt,Qe]=v.useState(""),[At,xt]=v.useState(""),[St,Le]=v.useState([]),[Ye,_e]=v.useState(!1),[tt,ct]=v.useState("EUR"),[it,ke]=v.useState(""),[Ke]=v.useState([{code:"EUR",symbol:"€",name:"Euro"},{code:"USD",symbol:"$",name:"US Dollar"},{code:"GBP",symbol:"£",name:"British Pound"}]),[ut,Ct]=v.useState(null),[Et,Bt]=v.useState(""),[ge,Ee]=v.useState([]),[le,Ve]=v.useState(!1),[nt,mt]=v.useState("percentage"),[wt,vt]=v.useState(""),[_t,ye]=v.useState(""),[ze,Z]=v.useState(""),te=ya(),{showKeyboard:Fe,activeInput:Ge,keyboardInput:ot,handleInputBlur:ht,handleAnyInputFocus:jt,handleAnyInputClick:It,hideKeyboard:Vt}=Wn(["searchTerm","customerSearchTerm"]),rs=W=>{const Pe=ls=>String(ls).padStart(2,"0"),Lt=W.getFullYear(),Jt=Pe(W.getMonth()+1),ss=Pe(W.getDate()),lr=Pe(W.getHours()),Vr=Pe(W.getMinutes());return`${Lt}-${Jt}-${ss}T${lr}:${Vr}`};v.useEffect(()=>{const W=new Date,Pe=new Date(W.getFullYear(),W.getMonth(),W.getDate(),0,0,0),Lt=new Date(W.getFullYear(),W.getMonth(),W.getDate(),W.getHours(),W.getMinutes(),0);w(rs(Pe)),_(rs(Lt)),zt(Pe.toISOString(),Lt.toISOString())},[]);const zt=async(W,Pe)=>{try{ue(!0),Ae(null);const Lt=await window.myAPI.getOrdersByDateRange(W,Pe);if(Lt.success){const Jt=await Promise.all(Lt.data.map(async ss=>{let lr=null;if(ss.customer_id)try{const Vr=await window.myAPI.getCustomerById(ss.customer_id);Vr.success&&Vr.data&&(lr=Vr.data)}catch(Vr){console.warn(`Failed to fetch customer data for order ${ss.id}:`,Vr)}return{...ss,customerData:lr,orderDate:new Date(ss.created_at).toLocaleDateString(),orderTime:new Date(ss.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),dueDate:ss.schedule_at?new Date(ss.schedule_at).toLocaleDateString():"N/A",dueTime:ss.schedule_at?new Date(ss.schedule_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A",total:parseFloat(ss.order_amount||0),status:ss.order_status||"new",paymentStatus:ss.payment_status||"pending"}}));n(Jt),c(Jt)}else Ae(Lt.message||"Failed to load orders"),n([]),c([])}catch(Lt){console.error("Error loading orders:",Lt),Ae("Failed to load orders"),n([]),c([])}finally{ue(!1)}};v.useEffect(()=>{let W=r;s==="collection"?W=W.filter(Pe=>Rs(Pe.order_type)==="collection"):s==="delivery"?W=W.filter(Pe=>Rs(Pe.order_type)==="delivery"):s==="online"?W=W.filter(Pe=>Rs(Pe.order_type)==="online"):s==="dinein"?W=W.filter(Pe=>Rs(Pe.order_type)==="dinein"):s==="instore"?W=W.filter(Pe=>Rs(Pe.order_type)==="instore"):s==="paid"?W=W.filter(Pe=>Pe.paymentStatus==="paid"):s==="unpaid"&&(W=W.filter(Pe=>Pe.paymentStatus==="unpaid")),de==="paid"?W=W.filter(Pe=>Pe.paymentStatus==="paid"):de==="unpaid"&&(W=W.filter(Pe=>Pe.paymentStatus==="unpaid")),Te!=="all"&&(W=W.filter(Pe=>Pe.status===Te)),d&&(W=W.filter(Pe=>Pe.id.toString().toLowerCase().includes(d.toLowerCase())||Pe.order_number?.toLowerCase().includes(d.toLowerCase()))),h&&(W=W.filter(Pe=>Pe.customerData?Pe.customerData.name?.toLowerCase().includes(h.toLowerCase())||Pe.customerData.phone?.includes(h):!1)),c(W)},[r,s,de,Te,d,h]),v.useEffect(()=>{if(!(!y||!S))try{const W=new Date(y).toISOString(),Pe=new Date(S).toISOString();zt(W,Pe)}catch{}},[y,S]);const gs=()=>{t("all"),re("all"),De("all"),m(""),g("");const W=new Date,Pe=new Date(W.getFullYear(),W.getMonth(),W.getDate(),0,0,0),Lt=new Date(W.getFullYear(),W.getMonth(),W.getDate(),W.getHours(),W.getMinutes(),0);w(rs(Pe)),_(rs(Lt)),zt(Pe.toISOString(),Lt.toISOString())},ns=async W=>{try{M(!0),z(W),ee(!0),setTimeout(()=>je(!0),10);const[Pe,Lt]=await Promise.all([window.myAPI.getOrderDetailsWithFood(W.id),window.myAPI.calculateOrderTotal(W.id)]);Pe?.success?U(Pe.data||[]):U([]),Lt?.success?O(Lt.data||null):O(null)}finally{M(!1)}},xs=()=>{je(!1),setTimeout(()=>{ee(!1),z(null),U([]),O(null)},300)},js=W=>{ae({id:W.id,orderNumber:W.id,orderType:va(W.order_type),status:W.status,customer:W.customerData});const Lt=(Jt=>{if(!Jt)return"New";const ss={new:"New","in progress":"In Progress",inprogress:"In Progress",ready:"Ready",completed:"Completed",delivered:"Delivered","on the way":"On the way",ontheway:"On the way"},lr=Jt.toLowerCase().replace(/[_\s-]+/g," ");return ss[lr]||Jt.charAt(0).toUpperCase()+Jt.slice(1).toLowerCase()})(W.status);pe(Lt),xe(!0)},Ot=()=>{xe(!1),ae(null),pe("New")},gt=W=>{if(Rs(W.order_type)!=="delivery"){console.log("Rider assignment is only available for delivery orders");return}C({id:W.id,orderNumber:W.id,orderType:va(W.order_type),status:W.status,customer:W.customerData}),x(!0)},Tt=()=>{x(!1),C(null)},qt=async W=>{try{const[Pe,Lt]=await Promise.all([window.myAPI.getOrderDetailsWithFood(W.id),window.myAPI.calculateOrderTotal(W.id)]),Jt=Pe?.success?Pe.data:[],ss=Lt?.success?Lt.data:null,lr={orderNumber:W.id,orderType:va(W.order_type),placedAt:W.created_at,createdAt:W.created_at,customer:W.customerData?{name:W.customerData.name||"Walk-in Customer",phone:W.customerData.phone,email:W.customerData.email,address:W.customerData.address,addresses:W.customerData.address?[W.customerData.address]:[]}:{name:"Walk-in Customer",phone:"N/A",address:"N/A",addresses:[]},table:W.table_details,items:Jt.map(ls=>({id:ls.id,food:{id:ls.food_id,name:ls.food_name,description:ls.food_description},quantity:ls.quantity,totalPrice:Number(ls.price||0)*Number(ls.quantity||1),variations:ls.variation?(()=>{try{return JSON.parse(ls.variation)}catch{return{}}})():{},adons:ls.add_ons?(()=>{try{return JSON.parse(ls.add_ons)}catch{return[]}})():[]})),notes:W.special_instructions||null},Vr={variations:Jt.reduce((ls,Fa)=>{if(Fa.variation)try{const _n=JSON.parse(Fa.variation);Object.keys(_n).forEach(Qa=>{ls[Qa]||(ls[Qa]={id:parseInt(Qa),name:`Variation ${Qa}`,options:[]})})}catch{console.warn("Failed to parse variations for detail:",Fa.id)}return ls},{}),adons:Jt.reduce((ls,Fa)=>{if(Fa.add_ons)try{JSON.parse(Fa.add_ons).forEach(Qa=>{ls.find(Fu=>Fu.id===parseInt(Qa))||ls.push({id:parseInt(Qa),name:`Addon ${Qa}`,price:0})})}catch{console.warn("Failed to parse add-ons for detail:",Fa.id)}return ls},[])};J(lr),U(Jt),F(!0)}catch(Pe){console.error("Error preparing invoice data:",Pe),Os("Failed to load invoice data","error")}},is=()=>{F(!1),J(null)},Zt=async W=>{if(ve){console.log("handleStatusUpdate called with status:",W),console.log("selectedOrderForStatus:",ve),L(!0);try{let Pe=W;switch(W){case"New":Pe="new";break;case"In Progress":Pe="in_progress";break;case"Ready":Pe="ready";break;case"On the way":Pe="on_the_way";break;case"Delivered":Pe="delivered";break;case"Completed":Pe="completed";break;default:Pe=W.toLowerCase().replace(/\s+/g,"_")}console.log("Mapped status for database:",Pe);const Lt=await window.myAPI.updateOrderStatus(ve.id,Pe);console.log("API result:",Lt),Lt.success?(n(Jt=>Jt.map(ss=>ss.id===ve.id?{...ss,status:W}:ss)),console.log("Order status updated successfully"),setTimeout(()=>{Ot()},500)):console.error("Failed to update order status:",Lt.message)}catch(Pe){console.error("Error updating order status:",Pe)}finally{L(!1)}}},Vs=W=>{console.log("handleStatusChange called with status:",W),pe(W)},Xn=async W=>{if(!N)return!1;try{console.log(`Assigning rider ${W.name} to order ${N.id}`);const Pe=await window.myAPI.updateOrderStatus(N.id,"on_the_way");return Pe.success?(n(Lt=>Lt.map(Jt=>Jt.id===N.id?{...Jt,driver:W.name,status:"On the way"}:Jt)),console.log('Order status updated to "On the way" and rider assigned successfully'),Tt(),!0):(console.error("Failed to update order status:",Pe.message),!1)}catch(Pe){return console.error("Error assigning rider:",Pe),!1}},Aa=async W=>{try{if(W.status==="delivered"||W.status==="Delivered"){Os(`Order #${W.id} is already marked as delivered`,"warning");return}Do("Mark Order as Delivered",`Are you sure you want to mark Order #${W.id} as delivered?

This action will change the order status to "delivered" and cannot be undone.`,"warning",async()=>{try{console.log(`Marking order ${W.id} as delivered`);const Pe=await window.myAPI.updateOrderStatus(W.id,"delivered");Pe.success?(n(Lt=>Lt.map(Jt=>Jt.id===W.id?{...Jt,status:"delivered"}:Jt)),console.log("Order marked as delivered successfully"),Os(`Order #${W.id} has been marked as delivered successfully!`,"success"),$e(null)):(console.error("Failed to mark order as delivered:",Pe.message),Os(`Failed to mark order as delivered: ${Pe.message}`,"error"))}catch(Pe){console.error("Error marking order as delivered:",Pe),Os("An error occurred while marking the order as delivered","error")}})}catch(Pe){console.error("Error marking order as delivered:",Pe),alert("An error occurred while marking the order as delivered")}},Do=(W,Pe,Lt="warning",Jt)=>{T({title:W,message:Pe,type:Lt,onConfirm:Jt}),H(!0)},Uc=()=>{H(!1),T({title:"",message:"",type:"warning",onConfirm:null})},Os=(W,Pe="success")=>{Me({message:W,type:Pe}),fe(!0)},Cl=async()=>{try{if(!Se)return;const W=r.find(Pe=>Pe.id===Se);if(!W)return;if(W.status==="completed"||W.status==="Completed"){Os(`Order #${W.id} is already completed`,"warning");return}if(W.status==="delivered"||W.status==="Delivered"||W.status==="canceled"||W.status==="Canceled"){Os(`Order #${W.id} cannot be completed as it is in ${W.status} state`,"warning");return}Do("Complete Order",`Are you sure you want to mark Order #${W.id} as completed?

This action will change the order status to "completed" and cannot be undone.`,"warning",async()=>{try{console.log(`Completing order ${W.id}`);const Pe=await window.myAPI.updateOrderStatus(W.id,"completed");Pe.success?(n(Lt=>Lt.map(Jt=>Jt.id===W.id?{...Jt,status:"completed"}:Jt)),console.log("Order completed successfully"),Os(`Order #${W.id} has been completed successfully!`,"success"),$e(null)):(console.error("Failed to complete order:",Pe.message),Os(`Failed to complete order: ${Pe.message}`,"error"))}catch(Pe){console.error("Error completing order:",Pe),Os("An error occurred while completing the order","error")}})}catch(W){console.error("Error completing order:",W),alert("An error occurred while completing the order")}},_i=W=>{if(Qe(W),et(W),W){const Pe=parseFloat(order?.total||0),Lt=parseFloat(W)-Pe;xt(Lt>0?Lt.toFixed(2):"0.00")}else xt("0.00")},Eo=W=>{if(et(W),Qe(W),W){const Pe=parseFloat(order?.total||0),Lt=parseFloat(W)-Pe;xt(Lt>0?Lt.toFixed(2):"0.00")}else xt("0.00")},zs=(W,Pe,Lt)=>{ye(Pe),Z(Lt||"")},Nn=W=>{Z(W)},kl=W=>{W==="{bksp}"&&Z(Pe=>Pe.slice(0,-1))},Qn=()=>{if(!Xe||parseFloat(Xe)<=0)return;const W={method:st,amount:parseFloat(Xe)};Le(Pe=>[...Pe,W]),et(""),Qe(""),xt(""),ke("")},ba=()=>{!wt||parseFloat(wt)<=0||(Os(`Manual discount of ${wt}${nt==="percentage"?"%":"€"} applied successfully!`,"success"),vt(""))},Sn=()=>{Et.trim()&&(Os(`Coupon code "${Et}" applied successfully!`,"success"),Bt(""))},Zn=()=>{Ct(null),Os("Coupon removed successfully!","success")},Cr=(W,Pe)=>{},$r=()=>parseFloat(E?.total||0),Hr=()=>parseFloat(E?.total||0),on=()=>0,kr=()=>0,ir=()=>{const W=$r(),Pe=St.reduce((Lt,Jt)=>Lt+parseFloat(Jt.amount),0);return Math.max(0,W-Pe)},or=()=>Ke.find(W=>W.code===tt)?.symbol||"€",Cn=()=>{He("Cash"),et(""),Qe(""),xt(""),Le([]),vt(""),_e(!1),ct("EUR"),ke(""),Ct(null),Bt("")},da=()=>{Ie(!1),Cn()},kn=(W,Pe)=>{Pe==="searchTerm"?m(W):Pe==="customerSearchTerm"&&g(W)},qs=(W,Pe)=>{Pe==="searchTerm"?jt(W,"searchTerm",d):Pe==="customerSearchTerm"&&jt(W,"customerSearchTerm",h)},ua=(W,Pe)=>{Pe==="searchTerm"?It(W,"searchTerm",d):Pe==="customerSearchTerm"&&It(W,"customerSearchTerm",h)},Jn=W=>({new:"bg-purple-50 text-purple-700 border-purple-200",pending:"bg-orange-50 text-orange-700 border-orange-200",confirmed:"bg-blue-50 text-blue-700 border-blue-200",processing:"bg-yellow-50 text-yellow-700 border-yellow-200",ready:"bg-green-50 text-green-700 border-green-200",completed:"bg-gray-50 text-gray-700 border-gray-200",delivered:"bg-blue-50 text-blue-700 border-blue-200",canceled:"bg-red-50 text-red-700 border-red-200","In Prepare":"bg-yellow-50 text-yellow-700 border-yellow-200","In Progress":"bg-blue-50 text-blue-700 border-blue-200",Ready:"bg-green-50 text-green-700 border-green-200",Completed:"bg-gray-50 text-gray-700 border-gray-200",Delivered:"bg-blue-50 text-blue-700 border-blue-200"})[W]||"bg-gray-50 text-gray-700 border-gray-200",ei=W=>({new:"New",pending:"Pending",confirmed:"Confirmed",processing:"Processing",ready:"Ready",completed:"Completed",delivered:"Delivered",canceled:"Canceled"})[W]||W,Rs=W=>{if(!W)return"";const Pe=String(W).toLowerCase().replace(/[_\s-]+/g,"");return Pe==="dinein"||Pe==="dine"?"dinein":Pe==="instore"||Pe==="instoreshop"||Pe==="inshop"?"instore":Pe==="collection"||Pe==="pickup"||Pe==="pickuporder"?"collection":Pe==="delivery"?"delivery":Pe==="online"||Pe==="web"||Pe==="app"?"online":Pe},va=W=>{const Pe=Rs(W);return{dinein:"Dine In",delivery:"Delivery",collection:"Collection",online:"Online",instore:"In Store"}[Pe]||W},ma=W=>W.customerData?{name:W.customerData.name||"N/A",phone:W.customerData.phone||"N/A",address:W.customerData.address||"N/A"}:{name:"Walk-in Customer",phone:"N/A",address:"N/A"},ln=W=>{const Pe=Rs(W.order_type);return Pe==="delivery"?W.driver||"N/A":Pe==="dinein"&&W.table_details||"N/A"},Da=W=>{if(!W)return!1;const Pe=W.toLowerCase().replace(/[_\s-]+/g,"");return["completed","ontheway","delivered"].includes(Pe)};return r.length,r.filter(W=>Rs(W.order_type)==="collection").length,r.filter(W=>Rs(W.order_type)==="delivery").length,r.filter(W=>Rs(W.order_type)==="online").length,r.filter(W=>Rs(W.order_type)==="dinein").length,r.filter(W=>Rs(W.order_type)==="instore").length,r.filter(W=>W.paymentStatus==="paid").length,r.filter(W=>W.paymentStatus==="unpaid").length,ne?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading orders..."})]})}):se?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(Nt,{size:48,className:"mx-auto"})}),e.jsx("p",{className:"text-red-600 font-medium mb-2",children:"Error loading orders"}),e.jsx("p",{className:"text-gray-600 text-sm",children:se}),e.jsx("button",{onClick:()=>gs(),className:"mt-4 px-4 py-4 bg-primary text-white rounded-lg hover:bg-primaryDark transition-colors",children:"Retry"})]})}):e.jsxs("div",{className:"h-full flex flex-col px-4 py-4 bg-transparent",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"bg-[#CDCDCD] rounded-lg mb-6",children:[e.jsx("div",{className:"flex-shrink-0 p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-4 ",children:[e.jsxs("div",{className:"flex flex-col items-start gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"w-20 text-center rounded-md px-3 py-4 text-sm font-medium text-white bg-primary",htmlFor:"from-datetime",children:"From:"}),e.jsx("div",{className:"relative flex items-center gap-2",children:e.jsx("input",{id:"from-datetime",type:"datetime-local",className:"px-3 py-4 border bg-white text-black border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primaryLight focus:border-transparent",value:y,onChange:W=>w(W.target.value)})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"w-20 text-center rounded-md px-3 py-4 text-sm font-medium text-white bg-primary",htmlFor:"to-datetime",children:"To:"}),e.jsx("div",{className:"relative flex items-center gap-2",children:e.jsx("input",{id:"to-datetime",type:"datetime-local",className:"px-3 py-4 border bg-white text-black border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primaryLight focus:border-transparent",value:S,onChange:W=>_(W.target.value)})})]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:["In Store","Dine In","Collection","Delivery","Online"].map(W=>{const Pe=W.toLowerCase().replace(/\s+/g,"");return e.jsx("button",{className:`w-28 px-4 py-4 rounded-lg text-sm font-medium transition-colors border-2 ${s===Pe?"bg-white text-black border-primary cursor-pointer":"bg-primary text-white border-primary cursor-pointer"}`,onClick:()=>t(Pe),children:W},W)})}),e.jsxs("div",{className:"flex flex-col items-center gap-2 mb-4",children:[e.jsx("button",{className:`w-24 px-4 py-4 rounded-lg text-sm font-medium transition-colors ${de==="paid"?"bg-[#16A34A] text-white":"bg-[#16A34A] text-white hover:bg-[#16A34A] cursor-pointer"}`,onClick:()=>re(de==="paid"?"all":"paid"),children:"Paid"}),e.jsx("button",{className:`w-24 px-4 py-4 rounded-lg text-sm font-medium transition-colors ${de==="unpaid"?"bg-[#0EA5E9] text-white":"bg-[#0EA5E9] text-white hover:bg-[#0EA5E9] cursor-pointer"}`,onClick:()=>re(de==="unpaid"?"all":"unpaid"),children:"Unpaid"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"w-10 h-10 bg-white border border-gray-300 rounded-md flex items-center justify-center hover:bg-gray-50 transition-colors",onClick:gs,children:e.jsx($h,{size:18,className:"text-gray-600"})}),e.jsx("button",{className:"w-10 h-10 bg-white border cursor-pointer border-gray-300 rounded-md flex items-center justify-center hover:bg-gray-50 transition-colors",children:e.jsx(yu,{size:18,className:"text-gray-600"})})]})]})}),e.jsx("div",{className:"flex-shrink-0 p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{className:"px-3 py-4 border border-gray-300 rounded-lg text-sm bg-white w-38",value:Te,onChange:W=>De(W.target.value),children:[e.jsx("option",{value:"all",children:"Status (All)"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"ready",children:"Ready"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"canceled",children:"Canceled"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",name:"searchTerm",placeholder:"Search by Order ID",value:d,onChange:W=>m(W.target.value),onFocus:W=>qs(W,"searchTerm"),onClick:W=>ua(W,"searchTerm"),onBlur:ht,className:"px-3 py-4 border bg-white border-gray-300 rounded-lg text-sm focus:outline-none"}),e.jsx("input",{type:"text",name:"customerSearchTerm",placeholder:"Search by Customer name or Number",value:h,onChange:W=>g(W.target.value),onFocus:W=>qs(W,"customerSearchTerm"),onClick:W=>ua(W,"customerSearchTerm"),onBlur:ht,className:"px-3 py-4 border bg-white border-gray-300 rounded-lg text-sm focus:outline-none"}),e.jsx("button",{className:"px-4 py-4 bg-orange-500 text-white rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors",children:"Search by Driver"}),e.jsx("button",{className:"px-4 py-4 bg-orange-500 text-white rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors",children:"Advanced Search"})]})]})})]}),e.jsx("div",{className:"flex-shrink-0 px-4 py-4 rounded-lg mb-5 border-b border-gray-200 bg-primary",children:e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx("button",{className:`w-full px-4 py-4 rounded-sm text-sm font-medium transition-colors font-semibold ${(()=>{if(!Se)return"bg-white text-primary cursor-pointer";const W=r.find(Pe=>Pe.id===Se);return!W||Da(W.status)?"bg-white text-primary cursor-pointer":"bg-white text-primary hover:bg-gray-100 cursor-pointer"})()}`,title:(()=>{if(!Se)return"No order selected";const W=r.find(Pe=>Pe.id===Se);return W?Da(W.status)?`Cannot load sales for order with status: ${W.status}`:"Load order into sales screen":"No order selected"})(),onClick:async()=>{if(!Se)return;const W=r.find(Pe=>Pe.id===Se);if(W){if(Da(W.status)){console.log(`Cannot load sales for order with status: ${W.status}`);return}try{const[Pe]=await Promise.all([window.myAPI.getOrderDetailsWithFood(W.id)]),Lt=Pe?.success?Pe.data:[],Jt={orderId:W.id,databaseId:W.id,orderType:va(W.order_type),customer:W.customerData?{id:W.customer_id,name:W.customerData.name,phone:W.customerData.phone,address:W.customerData.address}:null,items:Lt.map(ss=>({id:ss.id,food:{id:ss.food_id,name:ss.food_name,description:ss.food_description},quantity:ss.quantity,totalPrice:Number(ss.price||0)*Number(ss.quantity||1),variations:ss.variation?(()=>{try{return JSON.parse(ss.variation)}catch{return{}}})():{},adons:ss.add_ons?(()=>{try{return JSON.parse(ss.add_ons)}catch{return[]}})():[]})),payment:{method:W.payment_method,status:W.paymentStatus,amount:W.total},table:W.table_details||null,waiter:W.waiter||null};te("/dashboard/sales",{state:{loadOrder:Jt}})}catch(Pe){console.error("Failed to prepare order for sales:",Pe)}}},children:"Load Sales"}),e.jsx("button",{className:"w-full px-4 py-4 bg-white text-primary rounded-sm text-sm font-medium hover:bg-gray-100 transition-colors font-semibold cursor-pointer",onClick:()=>{if(!Se)return;const W=r.find(Pe=>Pe.id===Se);W&&js(W)},children:"Move Order"}),["Pay"].map(W=>e.jsx("button",{className:`w-full px-4 py-4 rounded-sm text-sm font-medium transition-colors font-semibold ${Se?"bg-white text-primary hover:bg-gray-100 cursor-pointer":"bg-white text-primary cursor-not-allowed"}`,disabled:!Se,title:Se?"Process payment for selected order":"No order selected",onClick:()=>{if(!Se)return;const Pe=r.find(Lt=>Lt.id===Se);Pe&&qt(Pe)},children:W},W)),e.jsx("button",{className:"w-full px-4 py-4 bg-white text-primary rounded-sm text-sm font-medium hover:bg-gray-100 transition-colors font-semibold cursor-pointer",onClick:()=>{if(!Se)return;const W=r.find(Pe=>Pe.id===Se);W&&gt(W)},children:"Assign Driver"}),e.jsx("button",{className:`w-full px-4 py-4 rounded-sm text-sm font-medium transition-colors font-semibold ${(()=>{if(!Se)return"bg-white text-primary cursor-pointer";const W=r.find(Pe=>Pe.id===Se);return!W||Rs(W.order_type)!=="delivery"?"bg-white text-primary cursor-pointer":"bg-white text-primary hover:bg-gray-100 cursor-pointer"})()}`,disabled:(()=>{if(!Se)return!0;const W=r.find(Pe=>Pe.id===Se);return!W||Rs(W.order_type)!=="delivery"||W.status==="delivered"||W.status==="Delivered"})(),title:(()=>{if(!Se)return"No order selected";const W=r.find(Pe=>Pe.id===Se);return W?Rs(W.order_type)!=="delivery"?"Mark Delivered is only available for delivery orders":W.status==="delivered"||W.status==="Delivered"?"Order is already marked as delivered":"Mark order as delivered":"No order selected"})(),onClick:()=>{if(!Se)return;const W=r.find(Pe=>Pe.id===Se);if(W){if(Rs(W.order_type)!=="delivery"){console.log("Mark Delivered is only available for delivery orders");return}Aa(W)}},children:"Mark Delivered"}),e.jsx("button",{className:`w-full px-4 py-4 rounded-sm text-sm font-medium transition-colors font-semibold ${(()=>{if(!Se)return"bg-white text-primary cursor-pointer";const W=r.find(Pe=>Pe.id===Se);return!W||W.status==="completed"||W.status==="Completed"||W.status==="delivered"||W.status==="Delivered"||W.status==="canceled"||W.status==="Canceled"?"bg-white text-primary cursor-pointer":"bg-white text-primary hover:bg-gray-100 cursor-pointer"})()}`,disabled:(()=>{if(!Se)return!0;const W=r.find(Pe=>Pe.id===Se);return W?W.status==="completed"||W.status==="Completed"||W.status==="delivered"||W.status==="Delivered"||W.status==="canceled"||W.status==="Canceled":!0})(),title:(()=>{if(!Se)return"No order selected";const W=r.find(Pe=>Pe.id===Se);return W?W.status==="completed"||W.status==="Completed"?"Order is already completed":W.status==="delivered"||W.status==="Delivered"?"Order is delivered and cannot be completed":W.status==="canceled"||W.status==="Canceled"?"Order is canceled and cannot be completed":"Mark order as completed":"No order selected"})(),onClick:()=>{!Se||!r.find(Pe=>Pe.id===Se)||Cl()},children:"Complete All"}),e.jsx("button",{className:`w-full px-4 py-4 rounded-sm text-sm font-medium transition-colors font-semibold ${!Se||!r.find(Pe=>Pe.id===Se)?"bg-white text-primary cursor-pointer":"bg-white text-primary hover:bg-gray-100 cursor-pointer"}`,disabled:!Se,title:Se?"Print invoice for selected order":"No order selected",onClick:()=>{if(!Se)return;const W=r.find(Pe=>Pe.id===Se);W&&qt(W)},children:"Print"})]})}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{className:"sticky top-0 bg-primaryExtraLight z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-primaryLight focus:ring-primaryLight"})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Type"})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Order ID"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Kitchen ID"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Date/Time"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Due At"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Driver/Table"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Customer"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Address"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Amount"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Payment"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Status"})})]})}),e.jsx("tbody",{children:o.map((W,Pe)=>{const Lt=ma(W),Jt=ln(W);return e.jsxs("tr",{className:`border-b border-gray-100 transition-colors ${Pe%2===0?"bg-white hover:bg-blue-50":"bg-gray-50 hover:bg-blue-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 focus:ring-primaryLight text-primaryLight cursor-pointer",checked:Se===W.id,disabled:Da(W.status),title:Da(W.status)?`Cannot select order with status: ${W.status}`:"Select order for sales operations",onChange:ss=>{Da(W.status)||$e(ss.target.checked?W.id:null)}})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:va(W.order_type)})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("button",{className:"text-sm font-medium text-primary underline hover:text-primaryDark",onClick:()=>ns(W),children:["ORD-",W.id]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:W.id})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm text-gray-800",children:W.orderDate}),e.jsx("div",{className:"text-xs text-gray-600",children:W.orderTime})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm text-gray-800",children:W.dueDate}),e.jsx("div",{className:"text-xs text-gray-600",children:W.dueTime})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:Jt})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-800",children:Lt.name}),e.jsxs("div",{className:"text-xs text-gray-600",children:["(",Lt.phone,")"]})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:Lt.address})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:["€",W.total.toFixed(2)]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${W.paymentStatus==="paid"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:W.paymentStatus})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex flex-col gap-1",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Jn(W.status)}`,children:ei(W.status)})})})]},W.id)})})]}),o.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-300 mb-3",children:e.jsx(yu,{size:40,className:"mx-auto"})}),e.jsx("p",{className:"text-gray-600 font-medium text-sm",children:"No orders found"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Orders matching your filter criteria will appear here."})]})]})]}),P&&E&&e.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[e.jsx("div",{className:"absolute inset-0 bg-[#0000000d] bg-opacity-50 transition-opacity",onClick:xs}),e.jsxs("div",{className:`relative w-96 h-full bg-white shadow-2xl transform transition-transform duration-300 ease-in-out flex flex-col ${oe?"translate-x-0":"translate-x-full"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Order Details"}),e.jsx("button",{onClick:xs,className:"text-primaryLight hover:text-primary transition-colors p-2 rounded-full hover:bg-gray-100",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-semibold text-primary",children:["ORD-",E.id]}),e.jsx("span",{className:"text-sm text-gray-600",children:"•"}),e.jsx("span",{className:"text-sm text-gray-600",children:va(E.order_type)})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[E.orderDate,", ",E.orderTime]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Items"}),R?e.jsx("div",{className:"text-sm text-gray-500",children:"Loading items..."}):e.jsxs("div",{className:"space-y-2",children:[I.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"No items found for this order."}),I.map(W=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-700",children:W.food_name||"Item"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Qty: ",W.quantity]})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:["€",(Number(W.price||0)*Number(W.quantity||1)).toFixed(2)]})]},W.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Payment"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Method:"}),e.jsx("span",{className:"text-gray-800",children:E.payment_method||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-gray-800",children:["€",(q?.grand_total??E.total).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${E.paymentStatus==="paid"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:E.paymentStatus})]}),q&&e.jsxs("div",{className:"space-y-1 pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsxs("span",{className:"text-gray-800",children:["€",Number(q.subtotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Add-ons:"}),e.jsxs("span",{className:"text-gray-800",children:["€",Number(q.total_addons||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Taxes:"}),e.jsxs("span",{className:"text-gray-800",children:["€",Number(q.total_taxes||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Discounts:"}),e.jsxs("span",{className:"text-gray-800",children:["-€",Number(q.total_discounts||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{className:"text-gray-800",children:"Grand Total:"}),e.jsxs("span",{className:"text-gray-800",children:["€",Number(q.grand_total||0).toFixed(2)]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Customer"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("div",{className:"text-gray-800 font-medium",children:ma(E).name}),e.jsx("div",{className:"text-gray-600",children:ma(E).phone}),e.jsx("div",{className:"text-gray-400",children:ma(E).address})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Current Status"}),e.jsx("span",{className:`px-3 py-2 rounded-full text-sm font-medium ${Jn(E.status)}`,children:ei(E.status)})]})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"w-full px-4 py-4 border border-primaryLight text-primaryLight rounded-lg hover:bg-primaryLight hover:text-white transition-colors font-medium",onClick:()=>{xs(),js(E)},children:"Update Status"}),e.jsx("button",{className:"w-full px-4 py-4 border border-primaryLight text-primaryLight rounded-lg hover:bg-primaryLight hover:text-white transition-colors font-medium",onClick:()=>{xs(),qt(E)},children:"Print Invoice"}),e.jsx("button",{className:`w-full px-4 py-4 border rounded-lg transition-colors font-medium ${Rs(E.order_type)==="delivery"?"border-primaryLight text-primaryLight hover:bg-primaryLight hover:text-white":"border-gray-300 text-gray-400 cursor-not-allowed"}`,disabled:Rs(E.order_type)!=="delivery",onClick:()=>{Rs(E.order_type)==="delivery"&&(xs(),gt(E))},children:"Assign Driver"})]})})]})]}),Q&&ve&&e.jsx(zv,{isOpen:Q,onClose:Ot,order:ve,onStatusUpdate:Zt,onRiderAssignment:()=>{Ot(),C(ve),x(!0)},selectedStatus:Ce,onStatusChange:Vs,isUpdating:k}),f&&N&&e.jsx(Tx,{isOpen:f,onClose:Tt,onBack:Tt,order:N,onAssignRider:Xn,onStatusUpdate:Zt}),V&&B&&e.jsx(Nh,{order:B,isOpen:V,onClose:is,onPrint:()=>{try{setTimeout(()=>{window.print()},100)}catch(W){console.error("Print failed:",W),Os("Print failed. Please try again.","error")}},foodDetails:I}),e.jsx(K5,{isOpen:A,onClose:Uc,onConfirm:()=>{Y.onConfirm&&(ce(!0),Y.onConfirm().finally(()=>{ce(!1)})),Uc()},title:Y.title,message:Y.message,type:Y.type,confirmText:"Confirm",cancelText:"Cancel",isLoading:G}),e.jsx(Ci,{message:me.message,isVisible:ie,onClose:()=>fe(!1),type:me.type,duration:4e3}),Re&&E&&e.jsx(Qg,{isOpen:Re,onClose:da,selectedPaymentMethod:st,setSelectedPaymentMethod:He,paymentAmount:Xe,setPaymentAmount:et,givenAmount:rt,setGivenAmount:Qe,changeAmount:At,setChangeAmount:xt,currencyAmount:it,setCurrencyAmount:ke,selectedCurrency:tt,setSelectedCurrency:ct,currencyOptions:Ke,addedPayments:St,setAddedPayments:Le,isSinglePayMode:!1,selectedSplitBill:null,selectedPlacedOrder:E,cartItems:[],foodDetails:null,appliedCoupon:ut,removeAppliedCoupon:Zn,couponCode:Et,setCouponCode:Bt,availableCoupons:ge,couponsLoading:le,discountType:nt,setDiscountType:mt,discountAmount:wt,setDiscountAmount:vt,sendSMS:Ye,setSendSMS:_e,handleCashGivenAmountChange:_i,handleCashAmountChange:Eo,handleNumericInputFocus:zs,handleNumericKeyboardChange:Nn,handleNumericKeyboardKeyPress:kl,handleAddPayment:Qn,handleApplyManualDiscount:ba,handleApplyCoupon:Sn,handleAnyInputFocus:jt,handleAnyInputClick:It,handleCustomInputBlur:Cr,calculateSinglePayTotals:()=>({total:$r(),subtotal:Hr(),tax:on(),discount:kr()}),calculateSplitBillTotal:$r,calculateCartTotal:$r,calculateSplitBillSubtotal:Hr,calculateSplitBillTax:on,calculateSplitBillDiscount:kr,calculateSplitBillCharge:()=>0,calculateSplitBillTips:()=>0,calculateCartSubtotal:Hr,calculateCartTax:on,calculateCartDiscount:kr,calculateDueAmount:ir,getCurrencySymbol:or,numericActiveInput:_t,numericKeyboardInput:ze,setNumericActiveInput:ye,setNumericKeyboardInput:Z,setShowCartDetailsModal:()=>{},splitBillToRemove:null,setSplitBills:()=>{},setSplitBillToRemove:()=>{},placedOrders:[],selectedCustomer:E?.customerData||null,selectedOrderType:va(E?.order_type),selectedTable:E?.table_details||null,handlePlaceOrder:async()=>{try{if(St.length===0||ir()>0)return Os("Please complete the payment before submitting","warning"),null;const W={payment_status:"paid",payment_method:st},Pe=await window.myAPI.updateOrder(E.id,W);return Pe.success?(n(Lt=>Lt.map(Jt=>Jt.id===E.id?{...Jt,paymentStatus:"paid"}:Jt)),$e(null),Os(`Payment processed successfully for Order #${E.id}!`,"success"),da(),E.id):(Os(`Failed to process payment: ${Pe.message}`,"error"),null)}catch(W){return console.error("Error processing payment:",W),Os("An error occurred while processing the payment","error"),null}},showError:Os,setIsInvoiceAfterPayment:()=>{},setShowInvoiceModal:()=>{},clearCart:()=>{},resetFinalizeSaleModal:Cn,setIsSinglePayMode:()=>{},setSelectedPlacedOrder:()=>{},setCurrentOrderForInvoice:()=>{}}),e.jsx(Xa,{isVisible:Fe,onClose:Vt,activeInput:Ge,onInputChange:kn,onInputBlur:ht,inputValue:ot})]})},G5=({order:s,onUpdateItemStatus:t,onUpdateOrderStatus:r,onCompleteOrder:n,onCookAll:o,onMarkAllReady:c,formatElapsedTime:d})=>{const m=S=>{switch(S){case"new":return"bg-gray-100 text-gray-700 border-gray-300";case"preparing":return"bg-orange-100 text-orange-700 border-orange-300";case"ready":return"bg-green-100 text-green-700 border-green-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},h=S=>S>1200?"text-red-600":S>900?"text-orange-600":S>600?"text-yellow-600":"text-green-600",g=s.items.every(S=>S.status==="ready"),y=s.items.some(S=>S.status==="preparing"),w=s.items.every(S=>S.status==="new");return e.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"border-b border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("span",{className:"text-lg font-bold text-primary",children:["#",s.id]})}),e.jsxs("div",{className:`text-sm font-bold ${h(s.elapsedTime)}`,children:[e.jsx($s,{size:16,className:"inline mr-1"}),d(s.elapsedTime)]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(ph,{size:14}),e.jsxs("span",{children:["Table ",s.tableNumber]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.orderType==="Dine-In"||s.orderType==="Takeaway","bg-primaryExtraLight text-primary"}`,children:s.orderType})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-600",children:[e.jsx(Lc,{size:14}),e.jsx("span",{children:s.customer})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"space-y-3",children:s.items.map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-medium text-gray-800",children:S.name})}),S.notes&&e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-orange-600",children:[e.jsx(bu,{size:12}),e.jsx("span",{children:S.notes})]}),S.isAddedLate&&e.jsxs("span",{className:"bg-yellow-100 mt-2 text-yellow-800 w-[90px] py-1 rounded-full text-xs font-medium flex items-center justify-center gap-1",children:[e.jsx(Ls,{size:10}),"Added Late"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium border ${m(S.status)}`,children:S.status.charAt(0).toUpperCase()+S.status.slice(1)}),e.jsxs("div",{className:"flex gap-1",children:[S.status==="new"&&e.jsx("button",{onClick:()=>t(s.id,S.id,"preparing"),className:"px-2 py-1 bg-orange-500 text-white rounded text-xs hover:bg-orange-600 transition-colors",children:"Cook"}),S.status==="preparing"&&e.jsx("button",{onClick:()=>t(s.id,S.id,"ready"),className:"px-2 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600 transition-colors",children:"Ready"}),S.status==="ready"&&e.jsx(la,{size:16,className:"text-green-600"})]})]})]},S.id))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex gap-2",children:[w&&e.jsx("button",{onClick:()=>o(s.id),className:"flex-1 bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition-colors text-sm font-medium",children:"Cook All"}),y&&!g&&e.jsx("button",{onClick:()=>c(s.id),className:"flex-1 bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition-colors text-sm font-medium",children:"Mark All Ready"}),g&&e.jsxs("button",{onClick:()=>n(s.id),className:"flex-1 bg-primaryLight text-white py-2 px-4 rounded-lg hover:bg-primary transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(la,{size:16}),"Done"]})]})})]})]})},W5=()=>{const{kdsCurrentView:s="cards",kdsShowNotifications:t=!1,kdsShowRecall:r=!1,kdsNotificationCount:n=0,setKdsCurrentView:o,setKdsShowNotifications:c,setKdsShowRecall:d,setKdsNotificationCount:m}=yS()||{},[h,g]=v.useState("new"),[y,w]=v.useState([]),[S,_]=v.useState([]),[E,z]=v.useState([]);v.useEffect(()=>{const ne=[{id:"KDS001",tableNumber:5,orderType:"Dine-In",elapsedTime:540,placedAt:new Date(Date.now()-54e4),items:[{id:1,name:"Chicken Biryani",status:"new",notes:"Less spicy",isAddedLate:!1},{id:2,name:"Garlic Naan",status:"new",notes:"",isAddedLate:!1},{id:3,name:"Raita",status:"new",notes:"",isAddedLate:!1}],status:"new",customer:"John Doe",phone:"0894632626"},{id:"KDS002",tableNumber:12,orderType:"Dine-In",elapsedTime:1140,placedAt:new Date(Date.now()-114e4),items:[{id:1,name:"Mutton Curry",status:"preparing",notes:"",isAddedLate:!1},{id:2,name:"Steamed Rice",status:"preparing",notes:"",isAddedLate:!1},{id:3,name:"Papad",status:"preparing",notes:"",isAddedLate:!1}],status:"preparing",customer:"Jessica Irving",phone:"0962626267"},{id:"KDS004",tableNumber:8,orderType:"Dine-In",elapsedTime:1440,placedAt:new Date(Date.now()-144e4),items:[{id:1,name:"Fish Curry",status:"ready",notes:"",isAddedLate:!1},{id:2,name:"Rice",status:"ready",notes:"",isAddedLate:!1},{id:3,name:"Pickle",status:"ready",notes:"",isAddedLate:!1}],status:"ready",customer:"Sarah Johnson",phone:"0851234567"},{id:"KDS005",tableNumber:3,orderType:"Dine-In",elapsedTime:360,placedAt:new Date(Date.now()-36e4),items:[{id:1,name:"Chicken Tikka",status:"new",notes:"",isAddedLate:!1},{id:2,name:"Mixed Vegetables",status:"new",notes:"",isAddedLate:!0}],status:"new",customer:"Anna Davis",phone:"082367237"},{id:"KDS003",tableNumber:15,orderType:"Takeaway",elapsedTime:840,placedAt:new Date(Date.now()-84e4),items:[{id:1,name:"Paneer Tikka",status:"preparing",notes:"Extra mint chutney",isAddedLate:!1},{id:2,name:"Butter Naan",status:"preparing",notes:"",isAddedLate:!1}],status:"preparing",customer:"Michael Brown",phone:"23236368238"},{id:"KDS006",tableNumber:7,orderType:"Dine-In",elapsedTime:720,placedAt:new Date(Date.now()-72e4),items:[{id:1,name:"Lamb Korma",status:"ready",notes:"Mild spice",isAddedLate:!1},{id:2,name:"Basmati Rice",status:"ready",notes:"",isAddedLate:!1}],status:"ready",customer:"David Wilson",phone:"0851237890"}];w(ne);const ue=[{id:1,type:"order_placed",message:"New order #KDS001 received for Table 5",time:new Date(Date.now()-54e4),read:!1},{id:2,type:"order_ready",message:"Order #KDS004 is ready for service",time:new Date(Date.now()-3e5),read:!1},{id:3,type:"order_updated",message:"Order #KDS005 updated with additional items",time:new Date(Date.now()-12e4),read:!0},{id:4,type:"order_delayed",message:"Order #KDS002 is taking longer than expected",time:new Date(Date.now()-6e4),read:!1}];_(ue),m&&m(ue.filter(se=>!se.read).length)},[m]),v.useEffect(()=>{m&&m(S.filter(ne=>!ne.read).length)},[S,m]),v.useEffect(()=>{const ne=setInterval(()=>{w(ue=>ue.map(se=>({...se,elapsedTime:Math.floor((Date.now()-se.placedAt.getTime())/1e3)})))},1e3);return()=>clearInterval(ne)},[]);const I=ne=>{const ue=Math.floor(ne/60),se=ne%60;return`${ue}m ${se}s`},U=ne=>y.filter(ue=>ue.status===ne),q=(ne,ue,se)=>{w(Ae=>Ae.map(Se=>{if(Se.id===ne){const $e=Se.items.map(ve=>ve.id===ue?{...ve,status:se}:ve),xe=$e.every(ve=>ve.status==="ready")?"ready":$e.some(ve=>ve.status==="preparing")?"preparing":"new";return{...Se,items:$e,status:xe}}return Se}))},O=(ne,ue)=>{w(se=>se.map(Ae=>Ae.id===ne?{...Ae,status:ue}:Ae))},R=ne=>{const ue=y.find(se=>se.id===ne);if(ue){z(Ae=>[...Ae,{...ue,completedAt:new Date}]),w(Ae=>Ae.filter(Se=>Se.id!==ne));const se={id:Date.now(),type:"order_completed",message:`Order #${ne} completed and ready for service`,time:new Date,read:!1};_(Ae=>[se,...Ae])}},M=ne=>{w(ue=>ue.map(se=>{if(se.id===ne){const Ae=se.items.map(Se=>({...Se,status:"preparing"}));return{...se,items:Ae,status:"preparing"}}return se}))},P=ne=>{w(ue=>ue.map(se=>{if(se.id===ne){const Ae=se.items.map(Se=>({...Se,status:"ready"}));return{...se,items:Ae,status:"ready"}}return se}))},ee=()=>{const ne={};return[...y,...E].forEach(ue=>{ue.items.forEach(se=>{ne[se.name]=(ne[se.name]||0)+1})}),ne},oe=U("new"),je=U("preparing"),de=U("ready"),re=()=>{switch(h){case"new":return oe;case"preparing":return je;case"ready":return de;default:return[]}},Te=[{id:"preparing",label:"In Preparation",count:je.length,icon:e.jsx(z1,{size:16}),color:"bg-orange-50 border-orange-200 text-orange-800",activeColor:"bg-orange-500 text-white",borderColor:"border-orange-500"},{id:"new",label:"New Orders",count:oe.length,icon:e.jsx(Bh,{size:16}),color:"bg-primaryExtraLight border-primaryLight text-primary",activeColor:"bg-primaryLight text-white",borderColor:"border-primary"},{id:"ready",label:"Ready for Service",count:de.length,icon:e.jsx(la,{size:16}),color:"bg-green-50 border-green-200 text-green-800",activeColor:"bg-green-500 text-white",borderColor:"border-green-500"}],De=Te.find(ne=>ne.id===h);return e.jsx("div",{children:e.jsxs("div",{className:"px-4 py-2",children:[t&&c&&e.jsx(X5,{notifications:S,onClose:()=>c(!1),onMarkAsRead:ne=>{_(ue=>ue.map(se=>se.id===ne?{...se,read:!0}:se))}}),s==="allday"&&e.jsx(Q5,{data:ee()}),s==="cards"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:Te.map(ne=>e.jsxs("button",{onClick:()=>g(ne.id),className:`flex items-center gap-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${h===ne.id?`${ne.borderColor} text-${ne.id==="new"?"primary":ne.id==="preparing"?"orange-600":"green-600"}`:"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[ne.icon,ne.label,e.jsx("span",{className:`ml-2 py-1 px-2 rounded-full text-xs font-medium ${h===ne.id?ne.activeColor:ne.color}`,children:ne.count})]},ne.id))})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:[re().map(ne=>e.jsx(G5,{order:ne,onUpdateItemStatus:q,onUpdateOrderStatus:O,onCompleteOrder:R,onCookAll:M,onMarkAllReady:P,formatElapsedTime:I},ne.id)),re().length===0&&e.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[De?.icon&&e.jsx("div",{className:"mb-4 opacity-50",children:Sr.cloneElement(De.icon,{size:48})}),e.jsxs("p",{className:"text-lg font-medium",children:["No ",De?.label.toLowerCase()]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[h==="new"&&"New orders will appear here",h==="preparing"&&"Orders being prepared will appear here",h==="ready"&&"Orders ready for service will appear here"]})]})})]})})]}),r&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Recalled Orders (Last 10 minutes)"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 text-xl font-bold w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100",children:"✕"})]}),e.jsxs("div",{className:"space-y-3",children:[E.map(ne=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-semibold text-primary",children:["#",ne.id]}),e.jsxs("span",{className:"text-gray-600",children:["Table ",ne.tableNumber]}),e.jsx("span",{className:"text-sm text-gray-500",children:ne.customer})]}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:ne.items.map((ue,se)=>e.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",children:ue.name},se))}),e.jsxs("span",{className:"text-xs text-gray-500 block mt-2",children:["Completed: ",ne.completedAt?.toLocaleTimeString()]})]}),e.jsx("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded text-xs font-medium",children:"COMPLETED"})]})},ne.id)),E.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx($h,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No recalled orders"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Completed orders from the last 10 minutes will appear here"})]})]})]})})]})})},X5=({notifications:s,onClose:t,onMarkAsRead:r})=>{const n=o=>{switch(o){case"order_placed":return e.jsx(Ls,{className:"w-4 h-4 text-blue-500"});case"order_ready":return e.jsx(la,{className:"w-4 h-4 text-green-500"});case"order_updated":return e.jsx($s,{className:"w-4 h-4 text-orange-500"});case"order_delayed":return e.jsx(bu,{className:"w-4 h-4 text-red-500"});case"order_completed":return e.jsx(la,{className:"w-4 h-4 text-green-600"});default:return e.jsx(uu,{className:"w-4 h-4 text-gray-500"})}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(uu,{className:"w-5 h-5"}),"Notifications"]}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-xl font-bold w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100",children:"✕"})]}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[s.map(o=>e.jsx("div",{className:`border rounded-lg p-4 transition-colors ${o.read?"bg-gray-50 border-gray-200":"bg-blue-50 border-blue-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n(o.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:o.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.time.toLocaleTimeString()})]}),!o.read&&e.jsx("button",{onClick:()=>r(o.id),className:"text-xs text-blue-600 hover:text-blue-800 font-medium whitespace-nowrap",children:"Mark as read"})]})},o.id)),s.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(uu,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No notifications"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"New notifications will appear here"})]})]})]})})},Q5=({data:s})=>{const t=Object.values(s).reduce((n,o)=>n+o,0),r=Object.entries(s).sort(([,n],[,o])=>o-n);return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Pc,{className:"w-5 h-5"}),"All Day Summary"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Total items: ",e.jsx("span",{className:"font-semibold text-primary",children:t})]})]}),r.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(([n,o])=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-medium text-gray-700 truncate block",children:n}),e.jsx("span",{className:"text-xs text-gray-500",children:"Total orders"})]}),e.jsx("span",{className:"bg-primary text-white px-3 py-1 rounded-full text-sm font-bold ml-2",children:o})]})},n))}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ni,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No items to display"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Item summary will appear here as orders are placed"})]})]})},Pb=({imagePath:s,alt:t,className:r="w-10 h-10 object-cover rounded"})=>{const[n,o]=v.useState(null),[c,d]=v.useState(!0),[m,h]=v.useState(!1);return v.useEffect(()=>{(async()=>{try{if(d(!0),h(!1),s&&s.startsWith("uploads/")){const y=await window.myAPI?.getCategoryImage(s);y&&y.success?o(y.data):h(!0)}else h(!0)}catch(y){console.error("Error loading category image:",y),h(!0)}finally{d(!1)}})()},[s]),c?e.jsx("div",{className:`${r} bg-gray-200 animate-pulse`}):m||!n?e.jsx("div",{className:`${r} bg-gray-200`}):e.jsx("img",{src:n,alt:t,className:r})},Z5=()=>{const[s,t]=v.useState([]),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState({name:"",position:"",image:null,originalFilename:null}),[h,g]=v.useState(""),[y,w]=v.useState(!1),[S,_]=v.useState(null),{showKeyboard:E,activeInput:z,handleAnyInputFocus:I,handleAnyInputClick:U,handleInputBlur:q,hideKeyboard:O}=Wn(["category_name","category_position"]),R=ne=>ne==="category_name"?d.name||"":ne==="category_position"&&d.position?.toString()||"",M=async()=>{try{const ue=await window.myAPI?.getCategoriesByHotel(1);ue&&ue.success?t(ue.data):(console.error("Failed to fetch categories:",ue?.message),t([]))}catch(ne){console.error("Error fetching categories:",ne),t([])}};v.useEffect(()=>{M()});const P=ne=>{c(ne),m({name:ne.name,position:ne.position,image:ne.image||null,originalFilename:null}),g(""),n(!0)},ee=()=>{c(null),m({name:"",position:"",image:null,originalFilename:null}),g(""),n(!0)},oe=ne=>{const{name:ue,value:se}=ne.target;if(m(Ae=>({...Ae,[ue]:se})),ue==="name"){const Ae=se.trim().toLowerCase(),Se=s.find($e=>$e.name.toLowerCase()===Ae&&(!o||$e.id!==o.id));g(Se?"⚠ Category with this name already exists":"")}},je=ne=>{const ue=ne.target.files[0];ue&&m(se=>({...se,image:ue,originalFilename:ue.name}))},de=async ne=>{ne.preventDefault();const ue=d.name.trim().toLowerCase();if(s.find(Se=>Se.name.toLowerCase()===ue&&(!o||Se.id!==o.id))){g("⚠ Category with this name already exists");return}const Ae=1;try{let Se=null;if(d.image&&d.image instanceof File&&(Se=await new Promise(($e,Q)=>{const xe=new FileReader;xe.onload=()=>$e(xe.result),xe.onerror=Q,xe.readAsDataURL(d.image)})),o){const $e={name:d.name,position:parseInt(d.position)};d.image instanceof File&&($e.image=Se);const Q=await window.myAPI?.updateCategory(o.id,$e,d.originalFilename);if(!Q.success){console.error("Failed to update category:",Q.message);return}}else{const $e=await window.myAPI?.createCategory({name:d.name,position:parseInt(d.position),hotel_id:Ae,image:Se,originalFilename:d.originalFilename,status:1});if(!$e.success){console.error("Failed to create category:",$e.message);return}}M(),n(!1),g("")}catch(Se){console.error("Error saving category:",Se)}},re=async ne=>{try{const ue=s.find(Ae=>Ae.id===ne);if(!ue)return;const se=ue.status?0:1;await window.myAPI?.updateCategory(ne,{status:se}),M()}catch(ue){console.error("Error toggling status:",ue)}},Te=ne=>{_(ne),w(!0)},De=async ne=>{try{await window.myAPI?.updateCategory(ne,{isdelete:1}),M(),n(!1),w(!1),_(null)}catch(ue){console.error("Error deleting category:",ue)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"overflow-x-auto bg-white py-5 px-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Category List"}),e.jsxs("button",{onClick:ee,className:"px-4 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add New Category"]})]}),e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Image"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:s.map((ne,ue)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-25 transition-colors ${ue%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:ue+1})}),e.jsx("td",{className:"py-3 px-4",children:ne.image?e.jsx(Pb,{imagePath:ne.image,alt:ne.name}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:ne.name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ne.position})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:"-"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!ne.status,onChange:()=>re(ne.id),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${ne.status?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${ne.status?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>P(ne),className:"text-primary hover:text-primaryDark cursor-pointer transition-colors",children:e.jsx(oa,{size:16})}),e.jsx("button",{onClick:()=>Te(ne),className:"text-red-500 hover:text-red-700 cursor-pointer transition-colors",children:e.jsx(Pa,{size:16})})]})})]},ne.id))})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-[#0000008e] bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:o?"Edit Category":"Add New Category"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(Nt,{size:24})})]}),e.jsxs("form",{onSubmit:de,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name*"}),e.jsx("input",{type:"text",name:"name",value:d.name,onChange:oe,onFocus:ne=>{I(ne,"category_name",d.name||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(d.name||"")},onClick:ne=>{U(ne,"category_name",d.name||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(d.name||"")},onBlur:q,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight ${h?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-primaryLight"}`,placeholder:"e.g., Burgers",required:!0}),h&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),e.jsx("input",{type:"number",name:"position",value:d.position,onChange:oe,onFocus:ne=>{I(ne,"category_position",(d.position||"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((d.position||"").toString())},onClick:ne=>{U(ne,"category_position",(d.position||"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((d.position||"").toString())},onBlur:q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",placeholder:"e.g., 1",min:"1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Image"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsxs("label",{className:"cursor-pointer bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-md border border-gray-300 text-sm font-medium text-gray-700",children:["Choose File",e.jsx("input",{type:"file",onChange:je,className:"sr-only",accept:"image/*"})]}),d.image?d.image instanceof File?e.jsx("img",{src:URL.createObjectURL(d.image),alt:"Selected",className:"w-16 h-16 object-cover rounded mt-2"}):typeof d.image=="string"&&d.image.startsWith("uploads/")?e.jsx(Pb,{imagePath:d.image,alt:"Selected",className:"w-16 h-16 object-cover rounded mt-2"}):typeof d.image=="string"?e.jsx("img",{src:`data:image/png;base64,${d.image}`,alt:"Selected",className:"w-16 h-16 object-cover rounded mt-2"}):null:null]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Recommended: 200x200px, PNG, JPG up to 2MB"})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primaryLight hover:bg-primaryDark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:o?"Update Category":"Add Category"})]})]})]})})}),y&&S&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Category"}),e.jsx("button",{onClick:()=>{w(!1),_(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 mb-4",children:"Do you want to delete this category?"})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{w(!1),_(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>De(S.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]}),e.jsx(Xa,{isVisible:E,onClose:()=>O(),activeInput:z,onInputChange:(ne,ue)=>{if(ue==="category_name"){m(Se=>({...Se,name:ne}));const se=(ne||"").trim().toLowerCase(),Ae=s.find(Se=>Se.name.toLowerCase()===se&&(!o||Se.id!==o.id));g(Ae?"⚠ Category with this name already exists":"")}else ue==="category_position"&&m(se=>({...se,position:ne}))},onInputBlur:q,inputValue:R(z)})]})},J5=()=>{const[s,t]=v.useState([]),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState({category_id:"",name:"",position:""}),[h,g]=v.useState([]),[y,w]=v.useState(!1),[S,_]=v.useState(null),{showKeyboard:E,activeInput:z,handleAnyInputFocus:I,handleAnyInputClick:U,handleInputBlur:q,hideKeyboard:O}=Wn(["subcat_name","subcat_position"]),R=ne=>ne==="subcat_name"?d.name||"":ne==="subcat_position"?(d.position??"").toString():"",M=async()=>{try{const ne=await window.myAPI?.getCategoriesByHotel(1);ne&&ne.success?g(ne.data):(console.error("Failed to fetch main categories:",ne?.message),g([]))}catch(ne){console.error("Error fetching main categories:",ne),g([])}},P=async()=>{try{const ne=await window.myAPI?.getSubcategoriesByHotel(1);ne&&ne.success?t(ne.data):(console.error("Failed to fetch sub categories:",ne?.message),t([]))}catch(ne){console.error("Error fetching sub categories:",ne),t([])}};v.useEffect(()=>{M(),P()},[]);const ee=()=>{c(null),m({category_id:"",name:"",position:""}),n(!0)},oe=ne=>{c(ne),m({category_id:ne.category_id,name:ne.name,position:ne.position}),n(!0)},je=ne=>{const{name:ue,value:se}=ne.target;m(Ae=>({...Ae,[ue]:se}))},de=async ne=>{if(ne.preventDefault(),o)try{await window.myAPI?.updateSubcategory(o.id,{category_id:d.category_id,name:d.name,position:parseInt(d.position)}),P()}catch(ue){console.log(ue,"error updating sub category")}else try{await window.myAPI?.createSubcategory({category_id:d.category_id,name:d.name,position:parseInt(d.position),status:1}),P()}catch(ue){console.log(ue,"error creating sub category")}n(!1)},re=ne=>{_(ne),w(!0)},Te=async ne=>{try{await window.myAPI?.updateSubcategory(ne,{isDelete:1}),P(),n(!1),w(!1),_(null)}catch(ue){console.error("Error deleting sub category:",ue)}},De=async ne=>{try{const ue=s.find(Ae=>Ae.id===ne);if(!ue)return;const se=ue.status?0:1;await window.myAPI?.updateSubcategory(ne,{status:se}),P()}catch(ue){console.error("Error toggling status:",ue)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"overflow-x-auto bg-white py-5 px-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Sub Category List"}),e.jsxs("button",{onClick:ee,className:"px-4 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add New Sub Category"]})]}),s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 font-medium text-sm",children:"No sub categories found"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Create your first sub category to get started"})]}):e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Main Category"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:s.map((ne,ue)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-25 transition-colors ${ue%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:ue+1})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ne.category_name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:ne.name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ne.position})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!ne.status,onChange:()=>De(ne.id),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${ne.status?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${ne.status?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>oe(ne),className:"text-primary hover:text-primaryDark cursor-pointer transition-colors",children:e.jsx(oa,{size:16})}),e.jsx("button",{onClick:()=>re(ne),className:"text-red-500 hover:text-red-700 cursor-pointer transition-colors",children:e.jsx(Pa,{size:16})})]})})]},ne.id))})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-[#0000008e] bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:o?"Edit Sub Category":"Add New Sub Category"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(Nt,{size:24})})]}),e.jsxs("form",{onSubmit:de,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Main Category*"}),e.jsxs("select",{name:"category_id",value:d.category_id,onChange:je,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),h.filter(ne=>ne.status===1).map(ne=>e.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub Category Name*"}),e.jsx("input",{type:"text",name:"name",value:d.name,onChange:je,onFocus:ne=>{I(ne,"subcat_name",d.name||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(d.name||"")},onClick:ne=>{U(ne,"subcat_name",d.name||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(d.name||"")},onBlur:q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",placeholder:"e.g., Chicken Burgers",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),e.jsx("input",{type:"number",name:"position",value:d.position,onChange:je,onFocus:ne=>{I(ne,"subcat_position",(d.position??"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((d.position??"").toString())},onClick:ne=>{U(ne,"subcat_position",(d.position??"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((d.position??"").toString())},onBlur:q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",placeholder:"e.g., 1",min:"1"})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primaryLight hover:bg-primaryDark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:o?"Update Sub Category":"Add Sub Category"})]})]})]})})}),y&&S&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Sub Category"}),e.jsx("button",{onClick:()=>{w(!1),_(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 mb-4",children:"Do you want to delete this sub category?"})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{w(!1),_(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>Te(S.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]}),e.jsx(Xa,{isVisible:E,onClose:()=>O(),activeInput:z,onInputChange:(ne,ue)=>{ue==="subcat_name"?m(se=>({...se,name:ne})):ue==="subcat_position"&&m(se=>({...se,position:ne}))},onInputBlur:q,inputValue:R(z)})]})},e6=()=>{const[s,t]=v.useState([]),[r,n]=v.useState({name:"",price:"",restaurant_id:1,stock_type:"",addon_stock:""});v.useEffect(()=>{o()},[s]);const o=async()=>{try{if(!window.myAPI){console.error("window.myAPI is not available");return}const Te=await window.myAPI?.getAdonsByHotel?.(1);Te&&Te.success?t(Te.data||[]):(console.error("Failed to load adons:",Te?.message),t([]))}catch(re){console.error("Error fetching addons:",re)}},[c,d]=v.useState(!1),[m,h]=v.useState(null),[g,y]=v.useState(!1),[w,S]=v.useState(null),{showKeyboard:_,activeInput:E,handleAnyInputFocus:z,handleAnyInputClick:I,handleInputBlur:U,hideKeyboard:q}=Wn(["addon_name","addon_price","addon_stock"]),O=re=>re==="addon_name"?r.name||"":re==="addon_price"?(r.price??"").toString():re==="addon_stock"?(r.addon_stock??"").toString():"",R=re=>{h(re),n({name:re.name,price:re.price,restaurant_id:1,stock_type:re.stock_type,addon_stock:re.stock_type==="Limited"?re.addon_stock:""}),d(!0)},M=()=>{h(null),n({name:"",price:"",restaurant_id:1,stock_type:"",addon_stock:""}),d(!0)},P=re=>{const{name:Te,value:De}=re.target;n(ne=>({...ne,[Te]:De}))},ee=async re=>{re.preventDefault();const Te={...r,price:parseFloat(r.price),addon_stock:r.stock_type==="Unlimited"?"Unlimited":parseInt(r.addon_stock)};if(m)await window.myAPI?.updateAdon?.(m.id,Te),o();else try{if((await window.myAPI?.createAdon?.(Te))?.success){const ue=await window.myAPI?.getAdonsByHotel?.(1);ue&&ue.success&&t(ue.data||[])}}catch(De){console.error("Error creating addon:",De)}d(!1)},oe=async re=>{try{const Te=s.find(ne=>ne.id===re);if(!Te)return;const De=Te.status===1?0:1;await window.myAPI?.updateAdon?.(re,{status:De}),o()}catch(Te){console.error("Error toggling status:",Te)}},je=re=>{S(re),y(!0)},de=async re=>{try{await window.myAPI?.updateAdon?.(re,{isdeleted:1}),o(),y(!1),S(null)}catch(Te){console.error("Error deleting addon:",Te)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"overflow-x-auto bg-white py-5 px-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Addon List"}),e.jsxs("button",{onClick:M,className:"px-4 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add New Addon"]})]}),e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Stock Type"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:s.map((re,Te)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-25 transition-colors ${Te%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:Te+1})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:re.name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["   ",re.price!=null?re.price.toFixed(2):""," €"]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:re.stock_type})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:re.addon_stock})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:re.status,onChange:()=>oe(re.id),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${re.status?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${re.status?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>R(re),className:"text-primary hover:text-primaryDark cursor-pointer transition-colors",children:e.jsx(oa,{size:16})}),e.jsx("button",{onClick:()=>je(re),className:"text-red-500 hover:text-red-700 cursor-pointer transition-colors",children:e.jsx(Pa,{size:16})})]})})]},re.id))})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-[#0000008e] bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:m?"Edit Addon":"Add New Addon"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(Nt,{size:24})})]}),e.jsxs("form",{onSubmit:ee,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name*"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:P,onFocus:re=>{z(re,"addon_name",r.name||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(r.name||"")},onClick:re=>{I(re,"addon_name",r.name||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(r.name||"")},onBlur:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",placeholder:"Ex: water",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price*"}),e.jsx("input",{type:"number",name:"price",value:r.price,onChange:P,onFocus:re=>{z(re,"addon_price",(r.price??"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((r.price??"").toString())},onClick:re=>{I(re,"addon_price",(r.price??"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((r.price??"").toString())},onBlur:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",placeholder:"100",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Type*"}),e.jsxs("select",{name:"stock_type",value:r.stock_type??"",onChange:P,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select Stock Type"}),e.jsx("option",{value:"Unlimited",children:"Unlimited Stock"}),e.jsx("option",{value:"Limited",children:"Limited Stock"})]})]}),r.stock_type==="Limited"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Quantity*"}),e.jsx("input",{type:"number",name:"addon_stock",value:r.addon_stock??"",onChange:P,onFocus:re=>{z(re,"addon_stock",(r.addon_stock??"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((r.addon_stock??"").toString())},onClick:re=>{I(re,"addon_stock",(r.addon_stock??"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((r.addon_stock??"").toString())},onBlur:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",placeholder:"Enter stock quantity",min:"0",required:!0})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:"Reset"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primaryDark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:m?"Update":"Submit"})]})]})]})})}),g&&w&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Addon"}),e.jsx("button",{onClick:()=>{y(!1),S(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 mb-4",children:"Do you want to delete this addon?"})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{y(!1),S(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>de(w.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]}),e.jsx(Xa,{isVisible:_,onClose:()=>q(),activeInput:E,onInputChange:(re,Te)=>{Te==="addon_name"?n(De=>({...De,name:re})):Te==="addon_price"?n(De=>({...De,price:re})):Te==="addon_stock"&&n(De=>({...De,addon_stock:re}))},onInputBlur:U,inputValue:O(E)})]})},t6=()=>{const{themeColors:s}=Ur(),[t,r]=v.useState([]),[n,o]=v.useState([]),[c,d]=v.useState(!1),[m,h]=v.useState(null),[g,y]=v.useState(""),[w,S]=v.useState(""),[_,E]=v.useState([]),[z,I]=v.useState([]),[U,q]=v.useState(!1),[O,R]=v.useState(!1),[M,P]=v.useState(null),[ee,oe]=v.useState("All categories"),[je,de]=v.useState(!1),[re,Te]=v.useState(-1),[De,ne]=v.useState([]),[ue,se]=v.useState(!1),[Ae,Se]=v.useState(""),[$e,Q]=v.useState(1),[xe,ve]=v.useState(""),[ae,Ce]=v.useState({}),[pe,k]=v.useState([]),[L,f]=v.useState(""),[x,N]=v.useState([]),[C,A]=v.useState({isVisible:!1,message:"",type:"success"});v.useRef(null),v.useRef(null);const{showKeyboard:H,activeInput:V,handleAnyInputFocus:F,handleAnyInputClick:B,handleInputBlur:J,hideKeyboard:Y}=Wn(["custom_ingredient","update_ingredient_name"]),T=ke=>ke==="custom_ingredient"?L||"":ke==="update_ingredient_name"&&Ae||"",G=async()=>{try{q(!0);const ke=await window.myAPI?.getAllIngredientsWithCategories();if(ke.success){r(ke.data);const Ke={};ke.data.forEach(ut=>{ut.category_id&&ut.category_name&&(Ke[ut.id]={category_id:ut.category_id,name:ut.category_name})}),Ce(Ke)}else console.error("Error fetching ingredients:",ke.message),r([]),Ce({})}catch(ke){console.error("Error fetching ingredients:",ke),r([]),Ce({})}finally{q(!1)}},ce=async()=>{try{const ke=await window.myAPI?.getActiveCategories(null);ke.success?o(ke.data):(console.error("Error fetching categories:",ke.message),o([]))}catch(ke){console.error("Error fetching categories:",ke),o([])}},ie=async ke=>{try{const Ke=await window.myAPI?.getIngredientsByCategoryPaginated(ke);Ke.success?ne(Ke.data):ne([])}catch(Ke){console.error("Error fetching ingredients by category:",Ke),ne([])}},fe=async ke=>{if(!ke.trim()){E([]),de(!1);return}try{const Ke=await window.myAPI?.searchIngredientsByName(ke);Ke.success?(E(Ke.data),de(Ke.data.length>0),Te(-1)):(E([]),de(!1))}catch(Ke){console.error("Error searching ingredients:",Ke),E([]),de(!1)}},me=async(ke,Ke)=>{try{const ut=await window.myAPI?.checkCategoryIngredientExists(ke,Ke);return ut.success&&ut.exists}catch(ut){return console.error("Error checking ingredient existence:",ut),!1}},Me=async(ke,Ke)=>{try{const ut=await window.myAPI?.createCategoryIngredient(ke,Ke);return ut.success?!0:(console.error("Failed to add ingredient to category:",ut.message),!1)}catch(ut){return console.error("Error adding ingredient to category:",ut),!1}},Re=async ke=>{try{const Ke=await window.myAPI?.createIngredient({name:ke,status:1});return Ke.success?Ke.id:null}catch(Ke){return console.error("Error creating ingredient:",Ke),null}};v.useEffect(()=>{G(),ce()},[]),v.useEffect(()=>{const ke=setTimeout(()=>{fe(w)},300);return()=>clearTimeout(ke)},[w]),v.useEffect(()=>{if(ee&&ee!=="All categories"){const ke=n.find(Ke=>Ke.name===ee);ke&&ie(ke.id)}else ne([])},[ee,n]);const Ie=()=>{h(null),y(""),S(""),E([]),I([]),f(""),N([]),de(!1),Te(-1),d(!0)},st=ke=>{h(ke),Se(ke.name),Q(ke.status);const Ke=ae[ke.id];ve(Ke?Ke.category_id:""),se(!0)},He=ke=>{y(ke.target.value)},Xe=ke=>{const Ke=ke.target.value;f(Ke),S(Ke)},et=ke=>{ke.key==="Enter"?(ke.preventDefault(),re>=0&&_[re]?xt(_[re]):L.trim()&&Qe()):ke.key==="ArrowDown"?(ke.preventDefault(),Te(Ke=>Ke<_.length-1?Ke+1:Ke)):ke.key==="ArrowUp"?(ke.preventDefault(),Te(Ke=>Ke>0?Ke-1:-1)):ke.key==="Escape"&&(de(!1),Te(-1))},rt=(ke,Ke="success")=>{A({isVisible:!0,message:ke,type:Ke})},Qe=()=>{if(L.trim()){if(x.find(ke=>ke.toLowerCase()===L.trim().toLowerCase())){rt("This custom ingredient already exists!","error");return}N([...x,L.trim()]),f("")}},At=ke=>{N(x.filter((Ke,ut)=>ut!==ke))},xt=ke=>{if(t.find(ut=>ut.id===ke.id&&ae[ut.id]?.category_id===parseInt(g))){rt("This ingredient already exists in the selected category!","error");return}z.find(ut=>ut.id===ke.id)||I([...z,ke]),S(""),f(""),E([]),de(!1),Te(-1)},St=async ke=>{if(ke.preventDefault(),!(!Ae.trim()||!m))try{if(q(!0),(await window.myAPI?.updateIngredient(m.id,{name:Ae.trim(),status:$e})).success){if(xe){const ut=ae[m.id],Ct=ut?ut.category_id:null;Ct!==xe&&(Ct&&await window.myAPI?.removeCategoryIngredient(Ct,m.id),await Me(xe,m.id))}await G(),se(!1),h(null),Se(""),Q(1),ve(""),rt("Ingredient updated successfully!","success")}else rt("Unable to update ingredient","error")}catch(Ke){console.error("Error updating ingredient:",Ke),rt("An error occurred while updating the ingredient","error")}finally{q(!1)}},Le=async ke=>{if(ke.preventDefault(),!(z.length===0&&x.length===0||!g))try{q(!0);let Ke=0,ut=[],Ct=[];for(const Et of z)await me(g,Et.id)?ut.push(Et.name):await Me(g,Et.id)&&Ke++;for(const Et of x){const Bt=await Re(Et);Bt&&await Me(g,Bt)?Ke++:Ct.push(Et)}if(Ke>0&&(await G(),I([]),N([]),rt(`${Ke} ingredient(s) added successfully!`,"success")),ut.length>0){const Et=ut.join(", ");rt(`${ut.length} ingredient(s) were already in this category: ${Et}`,"warning")}if(Ct.length>0){const Et=Ct.join(", ");rt(`Failed to add ${Ct.length} ingredient(s): ${Et}`,"error")}}catch(Ke){console.error("Error adding ingredients to category:",Ke),rt("Error adding ingredients to category","error")}finally{q(!1)}},Ye=ke=>{I(z.filter(Ke=>Ke.id!==ke))},_e=async ke=>{try{const Ke=t.find(Et=>Et.id===ke);if(!Ke)return;const ut=Ke.status?0:1;(await window.myAPI?.updateIngredient(ke,{status:ut})).success&&await G()}catch(Ke){console.error("Error toggling status:",Ke)}},tt=ke=>{P(ke),R(!0)},ct=async ke=>{try{(await window.myAPI?.updateIngredient(ke,{isdeleted:1})).success?(await G(),R(!1),P(null),rt("Ingredient deleted successfully!","success")):rt("Failed to delete ingredient","error")}catch(Ke){console.error("Error deleting ingredient:",Ke),rt("Error deleting ingredient","error")}},it=ee&&ee!=="All categories"?De:t;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"overflow-x-auto bg-white py-5 px-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Ingredients List"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative",children:e.jsxs("select",{value:ee,onChange:ke=>oe(ke.target.value),className:"w-48 px-4 py-1.5 border text-sm rounded-lg focus:outline-none focus:ring-2 focus:border-transparent",style:{borderColor:s.primary},children:[e.jsx("option",{children:"All categories"}),n.map(ke=>e.jsx("option",{children:ke.name},ke.id))]})}),e.jsxs("button",{onClick:Ie,className:"px-4 py-1.5 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors flex items-center gap-2",style:{backgroundColor:s.primary},children:[e.jsx(Ls,{size:16}),"Add New Ingredient"]})]})]}),e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:it.map((ke,Ke)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-25 transition-colors ${Ke%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:Ke+1})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:ke.name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-600",children:ae[ke.id]?ae[ke.id].name:"No Category"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!ke.status,onChange:()=>_e(ke.id),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${ke.status?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${ke.status?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>st(ke),className:"text-primary hover:text-primaryDark cursor-pointer transition-colors",children:e.jsx(oa,{size:16})}),e.jsx("button",{onClick:()=>tt(ke),className:"text-red-500 hover:text-red-700 cursor-pointer transition-colors",children:e.jsx(Pa,{size:16})})]})})]},ke.id))})]}),it.length===0&&!U&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 font-medium text-sm",children:"No ingredients found"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Ingredients will appear here once added."})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-[#0000008e] bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:m?"Edit Ingredient":"Add Ingredients to Category"}),e.jsx("button",{onClick:()=>d(!1),className:"hover:opacity-70",style:{color:s.primary},children:e.jsx(Nt,{size:24})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Category*"}),e.jsxs("select",{value:g,onChange:He,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1",style:{borderColor:g?s.primaryBg:"#d1d5db",boxShadow:g?`0 0 0 2px ${s.primaryBg}`:void 0},required:!0,children:[e.jsx("option",{value:"",children:"Choose a category..."}),n.map(ke=>e.jsx("option",{value:ke.id,children:ke.name},ke.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Custom Ingredient"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"custom_ingredient",type:"text",value:L,onChange:Xe,onKeyDown:et,onFocus:ke=>{F(ke,"custom_ingredient",L||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(L||"")},onClick:ke=>{B(ke,"custom_ingredient",L||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(L||"")},onBlur:J,placeholder:"Type ingredient name to search or add custom ingredient...",className:"w-full px-3 py-2 border rounded-md focus:outline-none",style:{borderColor:g?s.primaryBg:"#d1d5db",boxShadow:g?`0 0 0 2px ${s.primaryBg}`:void 0}}),je&&_.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:_.map((ke,Ke)=>e.jsx("div",{className:`px-3 py-2 cursor-pointer hover:bg-gray-50 ${Ke===re?"bg-gray-100":""}`,onClick:()=>xt(ke),children:e.jsx("span",{className:"text-sm text-gray-800",children:ke.name})},ke.id))})]})]}),(z.length>0||x.length>0)&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ingredients to Add (",z.length+x.length,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[z.map(ke=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm border-2",style:{backgroundColor:"white",color:s.primary,borderColor:s.primary},children:[ke.name,e.jsx("button",{type:"button",onClick:()=>Ye(ke.id),className:"ml-2 hover:opacity-70",style:{color:s.primary},children:e.jsx(Nt,{size:14})})]},ke.id)),x.map((ke,Ke)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm border",style:{backgroundColor:s.primaryExtraLight,color:s.primary,borderColor:s.primary},children:[ke,e.jsx("button",{type:"button",onClick:()=>At(Ke),className:"ml-2 hover:opacity-70",style:{color:s.primary},children:e.jsx(Nt,{size:14})})]},`custom-${Ke}`))]})]}),e.jsx("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:Le,disabled:U||!g||z.length===0&&x.length===0,className:"flex-1 px-4 py-3 text-white text-sm font-medium rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed",style:{backgroundColor:U||!g||z.length===0&&x.length===0?"#9CA3AF":s.primary},children:U?"Adding...":`Add ${z.length+x.length} Ingredient(s)`})})]})]})})}),ue&&m&&e.jsx("div",{className:"fixed inset-0 bg-[#0000008e] bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Update Ingredient"}),e.jsx("button",{onClick:()=>{se(!1),h(null),Se(""),Q(1)},className:"text-gray-500 hover:text-gray-700",children:e.jsx(Nt,{size:24})})]}),e.jsxs("form",{onSubmit:St,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ingredient Name*"}),e.jsx("input",{name:"update_ingredient_name",type:"text",value:Ae,onChange:ke=>Se(ke.target.value),onFocus:ke=>{F(ke,"update_ingredient_name",Ae||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(Ae||"")},onClick:ke=>{B(ke,"update_ingredient_name",Ae||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(Ae||"")},onBlur:J,placeholder:"Enter ingredient name...",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2",style:{borderColor:s.primary},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category*"}),e.jsxs("select",{value:xe,onChange:ke=>ve(ke.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2",style:{borderColor:s.primary},required:!0,children:[e.jsx("option",{value:"",children:"Choose a category..."}),n.map(ke=>e.jsx("option",{value:ke.id,children:ke.name},ke.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!$e,onChange:ke=>Q(ke.target.checked?1:0),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${$e?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${$e?"translate-x-5":"translate-x-0.5"} mt-0.5`})}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:$e?"Active":"Inactive"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{se(!1),h(null),Se(""),Q(1)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:U||!Ae.trim(),className:"flex-1 px-4 py-2 text-white text-sm font-medium rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed",style:{backgroundColor:U||!Ae.trim()?"#9CA3AF":s.primary},children:U?"Updating...":"Update Ingredient"})]})]})]})})}),O&&M&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Ingredient"}),e.jsx("button",{onClick:()=>{R(!1),P(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("p",{className:"text-gray-700 mb-4",children:['Do you want to delete the ingredient "',M.name,'"?']})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{R(!1),P(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>ct(M.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(Ci,{isVisible:C.isVisible,message:C.message,type:C.type,onClose:()=>A({...C,isVisible:!1})})]}),e.jsx(Xa,{isVisible:H,onClose:()=>Y(),activeInput:V,onInputChange:(ke,Ke)=>{Ke==="custom_ingredient"?(f(ke),S(ke)):Ke==="update_ingredient_name"&&Se(ke)},onInputBlur:J,inputValue:T(V)})]})},Uj=({food:s,onSubmit:t})=>{const r=ya(),[n,o]=v.useState({name:"",description:"",image:null,category_id:"",subcategory_id:"",veg:"",isPizza:!1,status:1,restaurant_id:1,position:"",price:"",tax:"",tax_type:"custom",discount:"",discount_type:"percentage",available_time_starts:"",available_time_ends:"",sku:"",barcode:"",stock_type:"",item_stock:"",sell_count:0,addons:[],allowNotes:!0,productNote:"",trackInventory:!1,lowInventory:5,recommended:!1,variations:[]}),[c,d]=v.useState(null),[m,h]=v.useState("custom"),[g,y]=v.useState({}),[w,S]=v.useState(""),[_,E]=v.useState([]),[z,I]=v.useState([]),[U,q]=v.useState([]),[O,R]=v.useState([]),[M,P]=v.useState(""),[ee,oe]=v.useState([]),[je,de]=v.useState(!1),[re,Te]=v.useState(-1),[De,ne]=v.useState([]),[ue,se]=v.useState([]),[Ae,Se]=v.useState(""),[$e,Q]=v.useState([]),[xe,ve]=v.useState(!1),[ae,Ce]=v.useState(-1),[pe,k]=v.useState([]),[L,f]=v.useState([]),[x,N]=v.useState(""),[C,A]=v.useState([]),[H,V]=v.useState(!1),[F,B]=v.useState(-1),[J,Y]=v.useState(!1),[T,G]=v.useState(!1),{showKeyboard:ce,activeInput:ie,handleInputBlur:fe,handleAnyInputFocus:me,handleAnyInputClick:Me,hideKeyboard:Re}=Wn(["name","description","position","price","tax","discount","available_time_starts","available_time_ends","maxPurchaseQty","stock_type","item_stock","sku","barcode","lowInventory","productNote","ingredientInput","allerginInput","adonInput"]),Ie=Z=>{const te=Z.target;if(!te||!te.tagName)return;const Fe=te.tagName.toLowerCase(),Ge=(te.getAttribute("type")||"").toLowerCase();if(Fe==="textarea"||Fe==="input"&&["text","number","time","date"].includes(Ge)){const ht=te.name||"";me(Z,ht,te.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(te.value||"")}},st=Z=>{const te=Z.target;if(!te||!te.tagName)return;const Fe=te.tagName.toLowerCase(),Ge=(te.getAttribute("type")||"").toLowerCase();if(Fe==="textarea"||Fe==="input"&&["text","number","time","date"].includes(Ge)){const ht=te.name||"";Me(Z,ht,te.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(te.value||"")}},He=(Z,te)=>{if(!Z)return;let Fe=Z.match(/^variation_(\d+)_(name|min|max)$/);if(Fe){const Ge=parseInt(Fe[1],10),ot=Fe[2];o(ht=>{const jt=[...ht.variations||[]];return jt[Ge]?(jt[Ge]={...jt[Ge],[ot]:te},{...ht,variations:jt}):ht});return}if(Fe=Z.match(/^variation_(\d+)_option_(\d+)_(option_name|option_price|total_stock)$/),Fe){const Ge=parseInt(Fe[1],10),ot=parseInt(Fe[2],10),ht=Fe[3];o(jt=>{const It=[...jt.variations||[]];if(!It[Ge])return jt;const Vt={...It[Ge]},rs=[...Vt.options||[]];return rs[ot]?(rs[ot]={...rs[ot],[ht]:te},Vt.options=rs,It[Ge]=Vt,{...jt,variations:It}):jt});return}o(Ge=>({...Ge,[Z]:te}))},Xe=Z=>{if(!Z)return"";let te=Z.match(/^variation_(\d+)_(name|min|max)$/);if(te){const Ge=parseInt(te[1],10),ot=te[2];return(n.variations?.[Ge]?.[ot]??"").toString()}if(te=Z.match(/^variation_(\d+)_option_(\d+)_(option_name|option_price|total_stock)$/),te){const Ge=parseInt(te[1],10),ot=parseInt(te[2],10),ht=te[3];return(n.variations?.[Ge]?.options?.[ot]?.[ht]??"").toString()}if(Z==="ingredientInput")return x||"";if(Z==="allerginInput")return M||"";if(Z==="adonInput")return Ae||"";const Fe=n[Z];return Fe!=null?String(Fe):""};v.useEffect(()=>{(async()=>{try{Y(!0),console.log("Loading categories...");const te=await window.myAPI?.getCategoriesByHotel(1);if(console.log("Categories API result:",te),te&&te.success){const Fe=(te.data||[]).filter(Ge=>Ge.status===1);E(Fe),console.log("Active categories loaded:",Fe)}else console.error("Failed to load categories:",te?.message)}catch(te){console.error("Error loading categories:",te)}finally{Y(!1)}})()},[]),v.useEffect(()=>{(async()=>{try{console.log("Loading allergens...");const te=await window.myAPI?.getAllAllergins();console.log("Allergins API result:",te),te&&te.success?(q(te.data||[]),console.log("Allergins loaded:",te.data)):console.error("Failed to load allergens:",te?.message)}catch(te){console.error("Error loading allergens:",te)}})()},[]),v.useEffect(()=>{(async()=>{try{console.log("Loading adons...");const te=await window.myAPI?.getAdonsByHotel(1);if(console.log("Adons API result:",te),te&&te.success){const Fe=(te.data||[]).filter(Ge=>Ge.status===1);ne(Fe),console.log("Active adons loaded:",Fe)}else console.error("Failed to load adons:",te?.message)}catch(te){console.error("Error loading adons:",te)}})()},[]),v.useEffect(()=>{(async()=>{try{console.log("Loading ingredients...");const te=await window.myAPI?.getAllIngredients();if(console.log("Ingredients API result:",te),te&&te.success){const Fe=(te.data||[]).filter(Ge=>Ge.status===1);k(Fe),console.log("Active ingredients loaded:",Fe)}else console.error("Failed to load ingredients:",te?.message)}catch(te){console.error("Error loading ingredients:",te)}})()},[]),v.useEffect(()=>{(async()=>{if(!n.category_id){I([]);return}try{console.log("Loading subcategories for category:",n.category_id);const te=await window.myAPI?.getSubcategoriesByCategory(n.category_id);if(console.log("Subcategories API result:",te),te&&te.success){const Fe=(te.data||[]).filter(Ge=>Ge.status===1);I(Fe),console.log("Active subcategories loaded:",Fe)}else console.error("Failed to load subcategories:",te?.message),I([])}catch(te){console.error("Error loading subcategories:",te),I([])}})()},[n.category_id]),v.useEffect(()=>{s||(f([]),N(""),A([]),V(!1),B(-1))},[n.category_id,s]),v.useEffect(()=>{s&&(o({name:s.name||"",description:s.description||"",image:s.image||null,category_id:s.category_id||"",subcategory_id:s.subcategory_id||"",veg:s.veg||0,isPizza:s.isPizza===1||s.isPizza===!0||!1,status:s.status===1?1:0,restaurant_id:s.restaurant_id||1,position:s.position||"",price:s.price||"",tax:s.tax||"",tax_type:s.tax_type&&["food","standard","custom"].includes(String(s.tax_type))?s.tax_type:"custom",discount:s.discount||"",discount_type:s.discount_type||"percentage",available_time_starts:s.available_time_starts||"",available_time_ends:s.available_time_ends||"",sku:s.sku||"",barcode:s.barcode||"",stock_type:s.stock_type||"unlimited",item_stock:s.item_stock||"",sell_count:s.sell_count||0,maxPurchaseQty:s.maximum_cart_quantity||"",allowNotes:s.product_note_enabled===1||s.product_note_enabled===!0||!1,productNote:s.product_note||"",trackInventory:s.track_inventory===1||s.track_inventory===!0||!1,lowInventory:s.low_inventory_threshold||5,recommended:s.recommended===1||s.recommended===!0||!1,variations:s.variations||[]}),s.tax_type&&["food","standard","custom"].includes(String(s.tax_type))?h(s.tax_type):h("custom"),s.image?s.image.startsWith("uploads/")?window.myAPI.getFoodImage(s.image).then(Z=>{Z.success?d(Z.data):(console.error("Failed to load food image:",Z.message),d(null))}).catch(()=>{d(null)}):s.image.startsWith("data:image")?d(s.image):d(`data:image/png;base64,${s.image}`):d(null),s.allergins&&s.allergins.length>0&&R(s.allergins),s.adons&&s.adons.length>0?se(s.adons):s.id&&(async()=>{try{const te=await window.myAPI?.getFoodAdons(s.id);te&&te.success&&se(te.data||[])}catch(te){console.error("Error loading food adons:",te)}})(),s.ingredients&&s.ingredients.length>0?f(s.ingredients):s.id&&(async()=>{try{const te=await window.myAPI?.getFoodIngredients(s.id);te&&te.success&&f(te.data||[])}catch(te){console.error("Error loading food ingredients:",te)}})())},[s]);const et=Z=>{const{name:te,value:Fe,type:Ge,checked:ot}=Z.target;o(ht=>({...ht,[te]:Ge==="checkbox"?ot:Fe})),g[te]&&y(ht=>({...ht,[te]:""}))},rt=typeof window<"u"?window.appSettings?.current||{}:{},Qe=Number(rt?.food_tax??rt?.foodTax??rt?.food_tax_percentage??rt?.foodTaxPercent??0),At=Number(rt?.standard_tax??rt?.standardTax??rt?.standard_tax_percentage??rt?.standardTaxPercent??0);Number(rt?.delivery_tax??rt?.deliveryTax??rt?.delivery_tax_percentage??rt?.deliveryTaxPercent??0),Number(rt?.service_tax??rt?.serviceTax??rt?.service_tax_percentage??rt?.serviceTaxPercent??0),v.useEffect(()=>{m==="food"?o(Z=>({...Z,tax:isNaN(Qe)?"":Qe})):m==="standard"&&o(Z=>({...Z,tax:isNaN(At)?"":At}))},[m,Qe,At]),v.useEffect(()=>{o(Z=>({...Z,tax_type:m}))},[m]);const xt=Z=>{const te=Z.target.files[0];if(te){o(Ge=>({...Ge,image:te}));const Fe=new FileReader;Fe.onloadend=()=>d(Fe.result),Fe.readAsDataURL(te)}},St=()=>{o(Z=>({...Z,variations:[...Z.variations||[],{name:"",type:"single",min:1,max:"",is_required:!1,options:[{option_name:"",option_price:0,total_stock:"",stock_type:"",sell_count:0}]}]}))},Le=Z=>{const te=[...n.variations||[]];te[Z].options||(te[Z].options=[]),te[Z].options.push({option_name:"",option_price:0,total_stock:"",stock_type:"",sell_count:0}),o(Fe=>({...Fe,variations:te}))},Ye=(Z,te,Fe)=>{const Ge=[...n.variations||[]];Ge[Z]={...Ge[Z],[te]:Fe},o(ot=>({...ot,variations:Ge}))},_e=(Z,te,Fe,Ge)=>{const ot=[...n.variations||[]];ot[Z].options[te]={...ot[Z].options[te],[Fe]:Ge},o(ht=>({...ht,variations:ot}))},tt=Z=>{const te=[...n.variations||[]];te.splice(Z,1),o(Fe=>({...Fe,variations:te}))},ct=(Z,te)=>{const Fe=[...n.variations||[]];Fe[Z].options.splice(te,1),o(Ge=>({...Ge,variations:Fe}))},it=Z=>{const te=Z.target.value;if(P(te),Te(-1),te.trim()){const Fe=U.filter(Ge=>Ge.name.toLowerCase().includes(te.toLowerCase())&&!O.some(ot=>ot.id===Ge.id));oe(Fe),de(!0)}else{const Fe=U.filter(Ge=>!O.some(ot=>ot.id===Ge.id));oe(Fe),de(!0)}},ke=()=>{const Z=U.filter(te=>!O.some(Fe=>Fe.id===te.id));oe(Z),de(!0)},Ke=Z=>{O.some(te=>te.id===Z.id)||R(te=>[...te,Z]),P(""),oe([]),de(!1),Te(-1)},ut=Z=>{R(te=>te.filter(Fe=>Fe.id!==Z))},Ct=async Z=>{if(Z.key==="Enter"){if(Z.preventDefault(),re>=0&&ee[re])Ke(ee[re]);else if(M.trim()){const te=U.find(Fe=>Fe.name.toLowerCase()===M.trim().toLowerCase());if(te)Ke(te);else try{const Fe=await window.myAPI?.createAllergin({name:M.trim()});if(Fe&&Fe.success){const Ge={id:Fe.id,name:M.trim()};q(ot=>[...ot,Ge]),R(ot=>[...ot,Ge]),P(""),oe([]),de(!1),Te(-1)}else console.error("Failed to create allergen:",Fe?.message)}catch(Fe){console.error("Error creating allergen:",Fe)}}}else Z.key==="ArrowDown"?(Z.preventDefault(),Te(te=>te<ee.length-1?te+1:te)):Z.key==="ArrowUp"?(Z.preventDefault(),Te(te=>te>0?te-1:-1)):Z.key==="Escape"&&(de(!1),Te(-1))},Et=Z=>{const te=Z.target.value;if(Se(te),Ce(-1),te.trim()){const Fe=De.filter(Ge=>Ge.name.toLowerCase().includes(te.toLowerCase())&&!ue.some(ot=>ot.id===Ge.id));Q(Fe),ve(!0)}else{const Fe=De.filter(Ge=>!ue.some(ot=>ot.id===Ge.id));Q(Fe),ve(!0)}},Bt=()=>{const Z=De.filter(te=>!ue.some(Fe=>Fe.id===te.id));Q(Z),ve(!0)},ge=Z=>{ue.some(te=>te.id===Z.id)||se(te=>[...te,Z]),Se(""),Q([]),ve(!1),Ce(-1)},Ee=Z=>{se(te=>te.filter(Fe=>Fe.id!==Z))},le=Z=>{Z.key==="Enter"?(Z.preventDefault(),ae>=0&&$e[ae]&&ge($e[ae])):Z.key==="ArrowDown"?(Z.preventDefault(),Ce(te=>te<$e.length-1?te+1:te)):Z.key==="ArrowUp"?(Z.preventDefault(),Ce(te=>te>0?te-1:-1)):Z.key==="Escape"&&(ve(!1),Ce(-1))},Ve=Z=>{if(!n.category_id)return;const te=Z.target.value;if(N(te),B(-1),te.trim()){const Fe=pe.filter(Ge=>Ge.name.toLowerCase().includes(te.toLowerCase())&&!L.some(ot=>ot.id===Ge.id));A(Fe),V(!0)}else{const Fe=pe.filter(Ge=>!L.some(ot=>ot.id===Ge.id));A(Fe),V(!0)}},nt=()=>{if(!n.category_id)return;const Z=pe.filter(te=>!L.some(Fe=>Fe.id===te.id));A(Z),V(!0)},mt=Z=>{console.log("Selecting ingredient:",Z),L.some(te=>te.id===Z.id)?console.log("Ingredient already selected:",Z.name):f(te=>{const Fe=[...te,Z];return console.log("Updated selectedIngredients:",Fe),Fe}),N(""),A([]),V(!1),B(-1)},wt=Z=>{f(te=>te.filter(Fe=>Fe.id!==Z))},vt=async Z=>{if(n.category_id)if(Z.key==="Enter"){if(Z.preventDefault(),F>=0&&C[F])mt(C[F]);else if(x.trim()){const te=pe.find(Fe=>Fe.name.toLowerCase()===x.trim().toLowerCase());if(te)mt(te);else{console.log("Creating new ingredient:",x.trim());try{const Fe=await window.myAPI?.createIngredient({name:x.trim()});if(console.log("createIngredient result:",Fe),Fe&&Fe.success){const Ge={id:Fe.id,name:x.trim()};console.log("Created new ingredient:",Ge),k(ot=>[...ot,Ge]),f(ot=>{const ht=[...ot,Ge];return console.log("Added new ingredient to selectedIngredients:",ht),ht}),N(""),A([]),V(!1),B(-1)}else console.error("Failed to create ingredient:",Fe?.message)}catch(Fe){console.error("Error creating ingredient:",Fe)}}}}else Z.key==="ArrowDown"?(Z.preventDefault(),B(te=>te<C.length-1?te+1:te)):Z.key==="ArrowUp"?(Z.preventDefault(),B(te=>te>0?te-1:-1)):Z.key==="Escape"&&(V(!1),B(-1))},_t=()=>{const Z={};return n.name.trim()||(Z.name="Name is required"),n.category_id||(Z.category_id="Category is required"),n.price<=0&&(Z.price="Price must be greater than 0"),y(Z),Object.keys(Z).length===0},ye=async Z=>{if(Z.preventDefault(),!!_t()){G(!0);try{let te=null,Fe=null;n.image&&n.image instanceof File?(te=await new Promise((jt,It)=>{const Vt=new FileReader;Vt.onload=()=>jt(Vt.result),Vt.onerror=It,Vt.readAsDataURL(n.image)}),Fe=n.image.name):(typeof n.image=="string"&&n.image.startsWith("data:image")||typeof n.image=="string"&&n.image.startsWith("uploads/"))&&(te=n.image);const Ge={name:n.name,description:n.description,image:te,originalFilename:Fe,category_id:parseInt(n.category_id),subcategory_id:n.subcategory_id?parseInt(n.subcategory_id):null,price:parseFloat(n.price),tax:n.tax===""?0:parseFloat(n.tax),tax_type:n.tax_type,discount:n.discount===""?0:parseFloat(n.discount),discount_type:n.discount_type,available_time_starts:n.available_time_starts,available_time_ends:n.available_time_ends,veg:n.veg,isPizza:n.isPizza?1:0,status:n.status,restaurant_id:n.restaurant_id,position:n.position?parseInt(n.position):null,sku:n.sku,barcode:n.barcode,stock_type:n.stock_type||"unlimited",item_stock:n.stock_type==="limited"&&n.item_stock!==""?parseInt(n.item_stock):null,sell_count:parseInt(n.sell_count),maximum_cart_quantity:n.maxPurchaseQty?parseInt(n.maxPurchaseQty):null,track_inventory:n.trackInventory?1:0,low_inventory_threshold:n.lowInventory?parseInt(n.lowInventory):null,product_note_enabled:n.allowNotes?1:0,product_note:n.productNote||null};let ot,ht;if(s?(console.log("Updating food with ID:",s.id),ot=await window.myAPI?.updateFood(s.id,{foodData:Ge,variations:n.variations}),ht=s.id):(console.log("Creating new food"),ot=await window.myAPI?.createFood(Ge),ht=ot?.food_id),ot&&ot.success){if(console.log(s?"Food updated successfully:":"Food created successfully:",ot),O.length>0)try{const jt=O.map(Vt=>Vt.id),It=await window.myAPI?.updateFoodAllergins(ht,jt);It&&It.success?console.log("Food-allergin relationships saved successfully"):console.error("Failed to save food-allergin relationships:",It?.message)}catch(jt){console.error("Error saving food-allergin relationships:",jt)}else try{await window.myAPI?.updateFoodAllergins(ht,[])}catch(jt){console.error("Error clearing food-allergin relationships:",jt)}if(ue.length>0)try{const jt=ue.map(Vt=>Vt.id),It=await window.myAPI?.updateFoodAdons(ht,jt);It&&It.success?console.log("Food-addon relationships saved successfully"):console.error("Failed to save food-addon relationships:",It?.message)}catch(jt){console.error("Error saving food-addon relationships:",jt)}else try{await window.myAPI?.updateFoodAdons(ht,[])}catch(jt){console.error("Error clearing food-addon relationships:",jt)}if(L.length>0&&n.category_id)try{console.log("Processing ingredients for food:",ht),console.log("Selected ingredients:",L),console.log("Category ID:",n.category_id);const jt=L.map(Vt=>Vt.name);console.log("Ingredient names to process:",jt);const It=await window.myAPI?.processFoodIngredients(ht,parseInt(n.category_id),jt);console.log("processFoodIngredients result:",It),It&&It.success?console.log("Food-ingredient relationships processed successfully:",It.data):console.error("Failed to process food-ingredient relationships:",It?.message)}catch(jt){console.error("Error processing food-ingredient relationships:",jt)}else console.log("No ingredients to save or no category selected"),console.log("selectedIngredients.length:",L.length),console.log("formData.category_id:",n.category_id);if(!s&&n.variations&&n.variations.length>0)try{for(const jt of n.variations)if(jt.name&&jt.options&&jt.options.length>0){const It={food_id:ht,name:jt.name,type:jt.type||"single",min:parseInt(jt.min)||1,max:jt.max?parseInt(jt.max):null,is_required:jt.is_required||!1},Vt=await window.myAPI?.createVariation(It);if(Vt){const rs=Vt;console.log("Variation created successfully:",rs);for(const zt of jt.options)if(zt.option_name){const gs={food_id:ht,variation_id:rs,option_name:zt.option_name,option_price:parseFloat(zt.option_price)||0,total_stock:parseInt(zt.total_stock)||0,stock_type:zt.stock_type||"unlimited",sell_count:parseInt(zt.sell_count)||0},ns=await window.myAPI?.createVariationOption(gs);ns?console.log("Variation option created successfully:",ns):console.error("Failed to create variation option")}}else console.error("Failed to create variation")}console.log("All variations and options saved successfully")}catch(jt){console.error("Error saving variations:",jt)}t?t(ot):r("/dashboard/food-management")}else console.error(s?"Failed to update food:":"Failed to create food:",ot?.message),alert(s?"Failed to update food: "+(ot?.message||"Unknown error"):"Failed to create food: "+(ot?.message||"Unknown error"))}catch(te){console.error(s?"Error updating food:":"Error creating food:",te),alert(s?"Error updating food: "+te.message:"Error creating food: "+te.message)}finally{G(!1)}}},ze=(Z,te=!1)=>`w-full px-3 py-2 border rounded-md transition-all duration-200 focus:outline-none focus:ring-2 ${te?"border-red-500 focus:ring-red-500":""} ${w===Z&&!te?"border-primaryLight focus:ring-primaryLight focus:border-primaryLight":""} ${!te&&w!==Z?"border-gray-300 hover:border-primaryLight":""}`;return e.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"flex items-center justify-center text-center text-black font-bold border-2 border-black h-6 w-6 rounded-full hover:text-gray-800 mr-4",children:s?e.jsx(fl,{className:"h-4 w-4 mr-1 pl-1"}):e.jsx(Ls,{className:"h-5 w-5 mr-1 pl-1 font-bold"})}),e.jsx("h1",{className:"text-2xl font-bold",children:s?"Edit Food Item":"Add New Food Item"})]}),e.jsxs("form",{onSubmit:ye,onFocus:Ie,onClick:st,onBlur:fe,className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[e.jsx(Yb,{className:"h-5 w-5 text-primaryLight mr-2"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Basic Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:et,onFocus:()=>S("name"),onBlur:()=>S(""),className:ze("name",g.name),required:!0}),g.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:n.description,onChange:et,onFocus:()=>S("description"),onBlur:()=>S(""),className:ze("description"),rows:3})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Food Image"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-primaryLight transition-colors",children:c?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:c,alt:"Preview",className:"w-32 h-32 object-cover rounded-md mb-2"}),e.jsx("button",{type:"button",onClick:()=>d(null),className:"text-sm text-red-600 hover:text-red-800",children:"Remove Image"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-600 justify-center",children:e.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-primaryLight hover:text-primaryDark",children:[e.jsx("span",{children:"Upload an image"}),e.jsx("input",{type:"file",className:"sr-only",onChange:xt,accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 2MB"})]})})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[e.jsx(Hh,{className:"h-5 w-5 text-primaryLight mr-2"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Category & Position"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"category_id",value:n.category_id,onChange:et,onFocus:()=>S("category_id"),onBlur:()=>S(""),className:`${ze("category_id",g.category_id)} appearance-none pr-8`,required:!0,disabled:J,children:[e.jsx("option",{value:"",children:J?"Loading categories...":"Select Category"}),_.map(Z=>(console.log("Rendering category:",Z),e.jsx("option",{value:Z.id,children:Z.name},Z.id)))]}),e.jsx(hs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),g.category_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.category_id})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub Category"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"subcategory_id",value:n.subcategory_id,onChange:et,onFocus:()=>S("subcategory_id"),onBlur:()=>S(""),className:`${ze("subcategory_id")} appearance-none pr-8`,disabled:!n.category_id,children:[e.jsx("option",{value:"",children:"Select Sub Category"}),z.map(Z=>e.jsx("option",{value:Z.id,children:Z.name},Z.id))]}),e.jsx(hs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Food Type"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"veg",value:n.veg,onChange:et,onFocus:()=>S("veg"),onBlur:()=>S(""),className:`${ze("veg")} appearance-none pr-8`,children:[e.jsx("option",{value:"",children:"Select Food Type"}),e.jsx("option",{value:0,children:"Non-Veg"}),e.jsx("option",{value:1,children:"Veg"})]}),e.jsx(hs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position (in Category)"}),e.jsx("input",{type:"number",name:"position",value:n.position,onChange:et,onFocus:()=>S("position"),onBlur:()=>S(""),className:ze("position"),min:"1",placeholder:"1, 2, 3..."})]})]}),e.jsxs("div",{className:"my-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Is Pizza"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"isPizza",checked:n.isPizza,onChange:et,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primaryLight/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primaryLight"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:n.isPizza?"Yes":"No"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enable if this is a pizza item"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product Notes"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"allowNotes",checked:n.allowNotes,onChange:et,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primaryLight/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primaryLight"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:n.allowNotes?"ON":"OFF"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Allow staff to add custom notes while ordering"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default Product Note"}),e.jsx("input",{type:"text",name:"productNote",value:n.productNote,onChange:et,onFocus:()=>S("productNote"),onBlur:()=>S(""),disabled:!n.allowNotes,className:`${ze("productNote")} ${n.allowNotes?"":"opacity-50 cursor-not-allowed"}`,placeholder:"e.g., No onions, Extra spicy",title:n.allowNotes?"":"Enable Product Notes to add a default note"})]})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ingredients ",!n.category_id&&e.jsx("span",{className:"text-gray-400",children:"(Select category first)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"ingredientInput",type:"text",value:x,onChange:Ve,onKeyDown:vt,onFocus:nt,onBlur:()=>setTimeout(()=>V(!1),200),className:`${ze("ingredientInput")} ${n.category_id?"":"opacity-50 cursor-not-allowed"}`,placeholder:n.category_id?"Click to see all ingredients, type to search":"Select category first to enable ingredients",disabled:!n.category_id}),H&&C.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto",children:C.map((Z,te)=>e.jsx("div",{className:`px-3 py-2 cursor-pointer border-b border-gray-100 last:border-b-0 ${te===F?"bg-primary text-white":"hover:bg-gray-100"}`,onClick:()=>mt(Z),children:Z.name},Z.id))})]}),L.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selected Ingredients:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:L.map(Z=>e.jsxs("div",{className:"flex items-center bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:Z.name}),e.jsx("button",{type:"button",onClick:()=>wt(Z.id),className:"ml-2 text-orange-600 hover:text-orange-800",children:e.jsx(Nt,{className:"h-3 w-3"})})]},Z.id))})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Allergins"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"allerginInput",type:"text",value:M,onChange:it,onKeyDown:Ct,onFocus:ke,onBlur:()=>setTimeout(()=>de(!1),200),className:ze("allerginInput"),placeholder:"Click to see all allergens, type to search"}),je&&ee.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto",children:ee.map((Z,te)=>e.jsx("div",{className:`px-3 py-2 cursor-pointer border-b border-gray-100 last:border-b-0 ${te===re?"bg-primary text-white":"hover:bg-gray-100"}`,onClick:()=>Ke(Z),children:Z.name},Z.id))})]}),O.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selected Allergins:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:O.map(Z=>e.jsxs("div",{className:"flex items-center bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:Z.name}),e.jsx("button",{type:"button",onClick:()=>ut(Z.id),className:"ml-2 text-blue-600 hover:text-blue-800",children:e.jsx(Nt,{className:"h-3 w-3"})})]},Z.id))})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[e.jsx(Fc,{className:"h-5 w-5 text-primaryLight mr-2"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Price & Availability"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Unit Price (€) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"price",value:n.price,onChange:et,onFocus:()=>S("price"),onBlur:()=>S(""),className:ze("price",g.price),step:"0.01",min:"0.01",required:!0}),g.price&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.price})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Source"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:m,onChange:Z=>h(Z.target.value),className:`${ze("tax_source")} appearance-none pr-8`,children:[e.jsx("option",{value:"food",children:`Food Tax ${isNaN(Qe)?"":`(${Qe}%)`}`}),e.jsx("option",{value:"standard",children:`Standard Tax ${isNaN(At)?"":`(${At}%)`}`}),e.jsx("option",{value:"custom",children:"Custom"})]}),e.jsx(hs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax (%)"}),e.jsx("input",{type:"number",name:"tax",value:n.tax,onChange:et,onFocus:()=>S("tax"),onBlur:()=>S(""),className:`${ze("tax")} ${m!=="custom"?"opacity-50 cursor-not-allowed":""}`,step:"0.01",min:"0",disabled:m!=="custom"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Type"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"discount_type",value:n.discount_type,onChange:et,onFocus:()=>S("discount_type"),onBlur:()=>S(""),className:`${ze("discount_type")} appearance-none pr-8`,children:[e.jsx("option",{value:"percentage",children:"Percent (%)"}),e.jsx("option",{value:"amount",children:"Amount (€)"})]}),e.jsx(hs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Value"}),e.jsx("input",{type:"number",name:"discount",value:n.discount,onChange:et,onFocus:()=>S("discount"),onBlur:()=>S(""),className:ze("discount"),min:"0",step:n.discount_type==="percentage"?"1":"0.01"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available From"}),e.jsx("input",{type:"time",name:"available_time_starts",value:n.available_time_starts,onChange:et,onFocus:()=>S("available_time_starts"),onBlur:()=>S(""),className:ze("available_time_starts")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available To"}),e.jsx("input",{type:"time",name:"available_time_ends",value:n.available_time_ends,onChange:et,onFocus:()=>S("available_time_ends"),onBlur:()=>S(""),className:ze("available_time_ends")})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Purchase Quantity"}),e.jsx("input",{type:"number",name:"maxPurchaseQty",value:n.maxPurchaseQty,onChange:et,onFocus:()=>S("maxPurchaseQty"),onBlur:()=>S(""),className:ze("maxPurchaseQty"),min:"1"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Type"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"stock_type",value:n.stock_type,onChange:et,onFocus:()=>S("stock_type"),onBlur:()=>S(""),className:`${ze("stock_type")} appearance-none pr-8`,children:[e.jsx("option",{value:"",children:"Select Stock Type"}),e.jsx("option",{value:"unlimited",children:"Unlimited"}),e.jsx("option",{value:"limited",children:"Limited"})]}),e.jsx(hs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),n.stock_type==="limited"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Type"}),e.jsx("input",{type:"number",name:"item_stock",value:n.item_stock,onChange:et,onFocus:Z=>{S("item_stock"),me(Z,"item_stock",Z.target.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(Z.target.value||"")},onClick:Z=>{Me(Z,"item_stock",Z.target.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(Z.target.value||"")},onBlur:()=>S(""),className:ze("item_stock"),min:"0",placeholder:"Enter stock amount"})]})]})})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[e.jsx(yl,{className:"h-5 w-5 text-primaryLight mr-2"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Adons"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adons"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"adonInput",type:"text",value:Ae,onChange:Et,onKeyDown:le,onFocus:Bt,onBlur:()=>setTimeout(()=>ve(!1),200),className:ze("adonInput"),placeholder:"Click to see all adons, type to search"}),xe&&$e.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto",children:$e.map((Z,te)=>e.jsx("div",{className:`px-3 py-2 cursor-pointer border-b border-gray-100 last:border-b-0 ${te===ae?"bg-primary text-white":"hover:bg-gray-100"}`,onClick:()=>ge(Z),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:Z.name}),e.jsxs("span",{className:"text-sm font-medium",children:["€",Z.price]})]})},Z.id))})]}),ue.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selected Adons:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ue.map(Z=>e.jsxs("div",{className:"flex items-center bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:Z.name}),e.jsxs("span",{className:"ml-2 font-medium",children:["€",Z.price]}),e.jsx("button",{type:"button",onClick:()=>Ee(Z.id),className:"ml-2 text-green-600 hover:text-green-800",children:e.jsx(Nt,{className:"h-3 w-3"})})]},Z.id))})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 pb-2 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(bl,{className:"h-5 w-5 text-primaryLight mr-2"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Variations"})]}),e.jsxs("button",{type:"button",onClick:St,className:"flex items-center px-3 py-1.5 bg-primary text-white text-sm font-medium rounded-lg hover:bg-primaryDark transition-colors",children:[e.jsx(Ls,{className:"h-4 w-4 mr-1"}),"Add Variation"]})]}),e.jsx("div",{className:"space-y-6",children:n.variations?.map((Z,te)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-md font-medium text-gray-800",children:["Variation ",te+1]}),e.jsxs("button",{type:"button",onClick:()=>tt(te),className:"flex items-center text-red-600 hover:text-red-800 text-sm",children:[e.jsx(Pa,{className:"h-4 w-4 mr-1"}),"Remove"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Variation Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{name:`variation_${te}_name`,type:"text",value:Z.name||"",onChange:Fe=>Ye(te,"name",Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primaryLight focus:border-primaryLight",placeholder:"e.g., Size",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selection Type"}),e.jsxs("div",{className:"flex space-x-4 pt-2",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:`type-${te}`,checked:(Z.type||"single")==="single",onChange:()=>Ye(te,"type","single"),className:"h-4 w-4 text-primaryLight focus:ring-primaryLight border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Single Selection"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:`type-${te}`,checked:Z.type==="multiple",onChange:()=>Ye(te,"type","multiple"),className:"h-4 w-4 text-primaryLight focus:ring-primaryLight border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Multiple Selection"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Selections"}),e.jsx("input",{name:`variation_${te}_min`,type:"number",value:Z.min||1,onChange:Fe=>Ye(te,"min",Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primaryLight focus:border-primaryLight",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Selections"}),e.jsx("input",{name:`variation_${te}_max`,type:"number",value:Z.max||"",onChange:Fe=>Ye(te,"max",Fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primaryLight focus:border-primaryLight",min:"1"})]}),e.jsx("div",{className:"flex items-center pt-6",children:e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",checked:Z.is_required||!1,onChange:Fe=>Ye(te,"is_required",Fe.target.checked),className:"h-4 w-4 text-primaryLight focus:ring-primaryLight border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Required"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Options"}),e.jsxs("button",{type:"button",onClick:()=>Le(te),className:"flex items-center text-primaryLight hover:text-primaryDark text-sm",children:[e.jsx(Ls,{className:"h-4 w-4 mr-1"}),"Add Option"]})]}),Z.options?.map((Fe,Ge)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end bg-white p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Option Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{name:`variation_${te}_option_${Ge}_option_name`,type:"text",value:Fe.option_name||"",onChange:ot=>_e(te,Ge,"option_name",ot.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primaryLight focus:border-primaryLight",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Price (€)"}),e.jsx("input",{name:`variation_${te}_option_${Ge}_option_price`,type:"number",value:Fe.option_price||"",onChange:ot=>_e(te,Ge,"option_price",ot.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primaryLight focus:border-primaryLight",step:"0.01",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Type"}),e.jsxs("select",{value:Fe.stock_type||"",onChange:ot=>_e(te,Ge,"stock_type",ot.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primaryLight focus:border-primaryLight",children:[e.jsx("option",{value:"",children:"Select Stock Type"}),e.jsx("option",{value:"unlimited",children:"Unlimited"}),e.jsx("option",{value:"limited",children:"Limited"})]})]}),Fe.stock_type==="limited"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Type"}),e.jsx("input",{name:`variation_${te}_option_${Ge}_total_stock`,type:"number",value:Fe.total_stock!==void 0&&Fe.total_stock!==null?Fe.total_stock:"",onChange:ot=>_e(te,Ge,"total_stock",ot.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primaryLight focus:border-primaryLight",min:"0",placeholder:"Enter stock amount"})]}),e.jsx("div",{children:e.jsxs("button",{type:"button",onClick:()=>ct(te,Ge),className:"flex items-center text-red-600 hover:text-red-800 text-sm",children:[e.jsx(Pa,{className:"h-4 w-4 mr-1"}),"Remove"]})})]},Ge))]})]},te))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[e.jsx(yl,{className:"h-5 w-5 text-primaryLight mr-2"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Inventory"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU (Stock Keeping Unit)"}),e.jsx("input",{type:"text",name:"sku",value:n.sku,onChange:et,className:ze("sku"),placeholder:"e.g., ABC-123"})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode"}),e.jsx("input",{type:"text",name:"barcode",value:n.barcode,onChange:et,className:ze("barcode"),placeholder:"EAN, UPC, GTIN, etc"})]})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Track Inventory"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enable to track stock levels for this item"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"trackInventory",checked:n.trackInventory,onChange:et,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primaryLight/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primaryLight"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:n.trackInventory?"ON":"OFF"})]})]}),n.trackInventory&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Stock"}),e.jsx("input",{type:"number",name:"item_stock",value:n.item_stock,onChange:et,onFocus:Z=>{S("item_stock"),me(Z,"item_stock",Z.target.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(Z.target.value||"")},onClick:Z=>{Me(Z,"item_stock",Z.target.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(Z.target.value||"")},onBlur:()=>S(""),className:ze("item_stock"),min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Low Inventory Threshold"}),e.jsx("input",{type:"number",name:"lowInventory",value:n.lowInventory,onChange:et,onFocus:Z=>{S("lowInventory"),me(Z,"lowInventory",Z.target.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(Z.target.value||"")},onClick:Z=>{Me(Z,"lowInventory",Z.target.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(Z.target.value||"")},onBlur:()=>S(""),className:ze("lowInventory"),min:"1"})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{t?t(null):r("/dashboard/food-management")},className:"px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:T,className:"px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primaryDark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:T?s?"Updating...":"Creating...":s?"Update Food Item":"Add Food Item"})]})]}),e.jsx(Xa,{isVisible:ce,onClose:()=>Re(),activeInput:ie,onInputChange:(Z,te)=>{te==="ingredientInput"?N(Z):te==="allerginInput"?P(Z):te==="adonInput"?Se(Z):He(te,Z)},onInputBlur:fe,inputValue:Xe(ie)})]})},s6=({imagePath:s,alt:t,className:r="w-10 h-10 object-cover rounded"})=>{const[n,o]=v.useState(null),[c,d]=v.useState(!0),[m,h]=v.useState(!1);return v.useEffect(()=>{s?(async()=>{try{if(d(!0),h(!1),s&&typeof s=="string")if(s.startsWith("uploads/")){const y=await window.myAPI?.getFoodImage(s);y&&y.success?o(y.data):h(!0)}else s.startsWith("data:image"),o(s);else h(!0)}catch(y){console.error("Error loading food image:",y),h(!0)}finally{d(!1)}})():(d(!1),h(!0))},[s]),c?e.jsx("div",{className:`${r} bg-gray-200 animate-pulse`}):m||!n?e.jsx("div",{className:`${r} bg-gray-200`}):e.jsx("img",{src:n,alt:t,className:r})},a6=()=>{const[s,t]=v.useState("foodList"),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState(""),[h,g]=v.useState("All categories"),[y,w]=v.useState({key:null,direction:"asc"}),[S,_]=v.useState([]),[E,z]=v.useState(!0),[I,U]=v.useState(!1),[q,O]=v.useState(null),R=["Traditional","Burgers","Pizza","Beverages"],{showKeyboard:M,activeInput:P,handleAnyInputFocus:ee,handleAnyInputClick:oe,handleInputBlur:je,hideKeyboard:de}=Wn(["foodSearch"]),re=ve=>ve==="foodSearch"&&d||"",Te=async()=>{try{z(!0);const ve=await window.myAPI?.getAllFoods();if(ve&&ve.success){const ae=ve.data.map(Ce=>({id:Ce.id,name:Ce.name,image:Ce.image&&typeof Ce.image=="string"&&Ce.image.trim()!==""?Ce.image:null,category:Ce.category_name||"Uncategorized",price:Ce.price||0,type:Ce.veg===1?"Veg":"Non-Veg",recommended:!1,status:Ce.status===1,stock:Ce.stock_type||(Ce.item_stock>0?"limited":"unlimited"),position:Ce.position||0}));_(ae)}else console.error("Failed to fetch food data:",ve?.message),_([])}catch(ve){console.error("Error fetching food data:",ve),_([])}finally{z(!1)}};v.useEffect(()=>{Te()},[]);const De=async ve=>{try{const ae=await window.myAPI?.getFoodById(ve.id);ae&&ae.success?(c(ae.data),n(!0)):(console.error("Failed to fetch food details:",ae?.message),alert("Failed to load food details for editing"))}catch(ae){console.error("Error fetching food details:",ae),alert("Error loading food details for editing")}},ne=ve=>{O(ve),U(!0)},ue=async ve=>{try{console.log("Attempting to delete food with ID:",ve),console.log("window.myAPI available:",!!window.myAPI),console.log("deleteFood available:",!!window.myAPI?.deleteFood);const ae=await window.myAPI?.deleteFood(ve);console.log("Delete result:",ae),ae&&ae.success?(console.log("Food deleted successfully"),Te(),U(!1),O(null)):(console.error("Failed to delete food:",ae?.message),alert("Error deleting food: "+(ae?.message||"Unknown error")))}catch(ae){console.error("Error deleting food:",ae),alert("Error deleting food: "+ae.message)}},se=async ve=>{try{const ae=S.find(k=>k.id===ve);if(!ae)return;const Ce=!ae.recommended,pe=await window.myAPI?.updateFood(ve,{foodData:{recommended:Ce?1:0}});pe&&pe.success?Te():console.error("Failed to update recommended status:",pe?.message)}catch(ae){console.error("Error toggling recommended status:",ae)}},Ae=async ve=>{try{const ae=S.find(k=>k.id===ve);if(!ae)return;const Ce=!ae.status,pe=await window.myAPI?.updateFood(ve,{foodData:{status:Ce?1:0}});pe&&pe.success?Te():console.error("Failed to update status:",pe?.message)}catch(ae){console.error("Error toggling status:",ae)}},Se=ve=>{let ae="asc";y.key===ve&&y.direction==="asc"&&(ae="desc"),w({key:ve,direction:ae})},Q=(y.key?[...S].sort((ve,ae)=>ve[y.key]<ae[y.key]?y.direction==="asc"?-1:1:ve[y.key]>ae[y.key]?y.direction==="asc"?1:-1:0):S).filter(ve=>!(d&&!ve.name.toLowerCase().includes(d.toLowerCase())||h&&h!=="All categories"&&ve.category!==h)),xe=ve=>y.key!==ve?e.jsxs("div",{className:"flex flex-col ml-1",children:[e.jsx($g,{size:12,className:"text-gray-400"}),e.jsx(hs,{size:12,className:"text-gray-400 -mt-1"})]}):y.direction==="asc"?e.jsx($g,{size:12,className:"ml-1 text-primary"}):e.jsx(hs,{size:12,className:"ml-1 text-primary"});return e.jsxs("div",{className:"px-4 py-2",children:[e.jsx("div",{className:"flex items-center justify-end mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>t("foodList"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="foodList"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Ni,{size:16}),"Food List"]}),e.jsxs("button",{onClick:()=>t("categories"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="categories"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(cx,{size:16}),"Categories"]}),e.jsxs("button",{onClick:()=>t("subCategories"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="subCategories"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(jg,{size:16}),"Sub Categories"]}),e.jsxs("button",{onClick:()=>t("addons"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="addons"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(jg,{size:16}),"Addons"]}),e.jsxs("button",{onClick:()=>t("ingredients"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="ingredients"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(jg,{size:16}),"Ingredients"]})]})}),s==="foodList"&&e.jsxs("div",{className:"overflow-x-auto bg-white py-5 px-4 rounded-lg shadow-sm",children:[r&&e.jsx("div",{className:"mb-6",children:e.jsx(Uj,{food:o,onSubmit:ve=>{ve===null?(n(!1),c(null)):o?(_(S.map(ae=>ae.id===ve.id?ve:ae)),n(!1),c(null),Te()):(_([...S,{...ve,id:Math.max(...S.map(ae=>ae.id))+1}]),n(!1),c(null),Te())}})}),e.jsx("div",{className:"mb-6 flex justify-end items-center",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative",children:e.jsxs("select",{value:h,onChange:ve=>g(ve.target.value),className:"w-48 px-4 py-1.5 border text-sm border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primaryLight focus:border-transparent",children:[e.jsx("option",{children:"All categories"}),e.jsx("option",{children:"Out Of Stock Foods"}),R.map(ve=>e.jsx("option",{children:ve},ve))]})}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",placeholder:"Search food items...",name:"foodSearch",value:d,onChange:ve=>m(ve.target.value),onFocus:ve=>{ee(ve,"foodSearch",d||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(d||"")},onClick:ve=>{oe(ve,"foodSearch",d||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(d||"")},onBlur:je,className:"w-64 px-4 py-1.5 border text-sm border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primaryLight focus:border-transparent"})}),e.jsx(Cx,{to:"/dashboard/food-management/add-food",children:e.jsxs("button",{onClick:()=>{c(null),n(!0)},className:"px-4 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add New Food"]})})]})}),e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer",onClick:()=>Se("id"),children:e.jsxs("div",{className:"flex items-center",children:["SI",xe("id")]})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Image"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer",onClick:()=>Se("name"),children:e.jsxs("div",{className:"flex items-center",children:["Name",xe("name")]})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer",onClick:()=>Se("category"),children:e.jsxs("div",{className:"flex items-center",children:["Category",xe("category")]})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer",onClick:()=>Se("price"),children:e.jsxs("div",{className:"flex items-center",children:["Price",xe("price")]})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer",onClick:()=>Se("type"),children:e.jsxs("div",{className:"flex items-center",children:["Type",xe("type")]})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Recommended"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer",onClick:()=>Se("stock"),children:e.jsxs("div",{className:"flex items-center",children:["Stock",xe("stock")]})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:Q.map((ve,ae)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-25 transition-colors ${ae%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:ae+1})}),e.jsx("td",{className:"py-3 px-4",children:ve.image&&typeof ve.image=="string"&&ve.image.trim()!==""?e.jsx(s6,{imagePath:ve.image,alt:ve.name}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-xs",children:"🍽️"})})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:ve.name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ve.category})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:["$",ve.price.toFixed(2)]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ve.type==="Veg"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ve.type})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ve.recommended,onChange:()=>se(ve.id),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:left-[1px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primaryLight"})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ve.status,onChange:()=>Ae(ve.id),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:left-[1px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primaryLight"})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-800",children:ve.stock})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>De(ve),className:"text-primary hover:text-primaryDark cursor-pointer transition-colors",children:e.jsx(oa,{size:16})}),e.jsx("button",{onClick:()=>ne(ve),className:"text-red-500 hover:text-red-700 cursor-pointer transition-colors",children:e.jsx(Pa,{size:16})})]})})]},ve.id))})]}),Q.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 font-medium text-sm",children:"No food items found"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Items matching your filter criteria will appear here."})]})]}),s==="categories"&&e.jsx(Z5,{}),s==="subCategories"&&e.jsx(J5,{}),s==="addons"&&e.jsx(e6,{}),s==="ingredients"&&e.jsx(t6,{}),I&&q&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Food Item"}),e.jsx("button",{onClick:()=>{U(!1),O(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 mb-4",children:"Do you want to delete this food item?"})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{U(!1),O(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>ue(q.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(Xa,{isVisible:M,onClose:()=>de(),activeInput:P,onInputChange:(ve,ae)=>{ae==="foodSearch"&&m(ve)},onInputBlur:je,inputValue:re(P)})]})},Fb=()=>{const s=ya(),{id:t}=vS(),r=!!t,[n,o]=v.useState(null),[c,d]=v.useState(!1);v.useEffect(()=>{r&&t&&(async()=>{try{d(!0),console.log("Fetching food data for ID:",t);const g=await window.myAPI?.getFoodById(parseInt(t));g&&g.success?(console.log("Food data fetched successfully:",g.data),o(g.data)):(console.error("Failed to fetch food data:",g?.message),alert("Failed to load food details for editing"),s("/dashboard/food-management"))}catch(g){console.error("Error fetching food data:",g),alert("Error loading food details for editing"),s("/dashboard/food-management")}finally{d(!1)}})()},[t,r,s]);const m=h=>{console.log("Form submitted:",h),s("/dashboard/food-management")};return c?e.jsx("div",{className:"container mx-auto p-4",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading food details..."})})}):e.jsx("div",{className:"container mx-auto p-4",children:e.jsx(Uj,{food:r?n:null,onSubmit:m})})},r6=()=>{const[s,t]=v.useState([]),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState(!1),[h,g]=v.useState(!1),[y,w]=v.useState(null),[S,_]=v.useState(!1),[E,z]=v.useState(null),[I,U]=v.useState({}),[q,O]=v.useState(!1),[R,M]=v.useState(""),[P,ee]=v.useState({firstName:"",lastName:"",role:"",phone:"",email:"",pin:"",confirmPin:"",salaryPerHour:"",image:null,vehicleNumber:"",vehicleType:"",licenseNumber:"",licenseExpiry:""}),[oe,je]=v.useState(""),[de,re]=v.useState(""),[Te,De]=v.useState(""),[ne,ue]=v.useState({}),[se,Ae]=v.useState({}),Se=async()=>{try{const F=localStorage.getItem("currentEmployee");let B=null;if(F)try{B=JSON.parse(F).id}catch(Y){console.error("Error parsing current employee data:",Y)}const J=await window.myAPI?.getAllEmployees(B);if(J.success){t(J.data);const Y={};for(const T of J.data)if(T.imgurl&&T.imgurl.startsWith("uploads/"))try{const G=await window.myAPI.getEmployeeImage(T.imgurl);G.success&&(Y[T.id]=G.data)}catch(G){console.error("Error loading image for employee:",T.id,G)}U(Y)}else console.error("Error fetching employees:",J.message)}catch(F){console.error("Error fetching employees:",F)}};v.useEffect(()=>{Se()},[]);const $e=F=>{if(c(F),ee({firstName:F.fname||"",lastName:F.lname||"",role:F.roll||"",phone:F.phone||"",email:F.email||"",pin:"",confirmPin:"",salaryPerHour:F.salary_per_hour||"",image:null,vehicleNumber:F.vnumber||"",vehicleType:F.vtype||"",licenseNumber:F.license_number||"",licenseExpiry:F.license_expiry||""}),F.imgurl)if(F.imgurl.startsWith("uploads/")){const B=I[F.id];B?w(B):window.myAPI.getEmployeeImage(F.imgurl).then(J=>{J.success?w(J.data):w(null)}).catch(()=>{w(null)})}else w(`data:image/png;base64,${F.imgurl}`);else w(null);je(""),re(""),De(""),n(!0)},Q=()=>{c(null),ee({firstName:"",lastName:"",role:"",phone:"",email:"",pin:"",confirmPin:"",salaryPerHour:"",image:null,vehicleNumber:"",vehicleType:"",licenseNumber:"",licenseExpiry:""}),w(null),je(""),re(""),De(""),n(!0)},xe=F=>{const{name:B,value:J}=F.target;if(B==="phone"){const Y=J.replace(/\D/g,"");if(Y.length>10||Y.length>0&&Y.length>=2&&!Y.startsWith("08"))return;ee(T=>({...T,[B]:Y})),Te&&De("");return}if(B==="pin"){const Y=J.trim(),T=s.find(G=>G.pin===Y&&(!o||G.id!==o.id));je(T?"⚠ This PIN is already taken by another employee":"")}B==="email"&&de&&re(""),ee(Y=>({...Y,[B]:J}))},ve=F=>{const B=F.target.files[0];if(B){if(console.log("File selected:",B.name,B.size,B.type),B.size>2*1024*1024){alert("Image size must be less than 2MB");return}if(!B.type.startsWith("image/")){alert("Please select an image file");return}const J=new FileReader;J.onload=Y=>{w(Y.target.result)},J.readAsDataURL(B),ee(Y=>({...Y,image:B}))}},ae=async F=>{if(F.preventDefault(),je(""),re(""),De(""),P.pin!==P.confirmPin){alert("PIN and Confirm PIN do not match");return}if(P.phone.length!==10||!P.phone.startsWith("08")){alert("Phone number must be 10 digits and start with 08");return}try{let B=null;P.image?(console.log("Processing image:",P.image.name,P.image.size),B=await new Promise((Y,T)=>{const G=new FileReader;G.onload=()=>{const ce=G.result.split(",")[1];console.log("Image converted to base64, length:",ce.length),console.log("Base64 preview (first 100 chars):",ce.substring(0,100)),Y(ce)},G.onerror=ce=>{console.error("Error reading image:",ce),T(ce)},G.readAsDataURL(P.image)})):console.log("No image selected");const J={fname:P.firstName,lname:P.lastName,roll:P.role,phone:P.phone,email:P.email,pin:P.pin,code:P.pin,address:"",isavailable:1,isActive:1,isDeleted:0,isSyncronized:0};if(P.role==="Delivery Man"){if(J.vnumber=P.vehicleNumber,J.vtype=P.vehicleType,!P.licenseExpiry){alert("License expiry date is required for Delivery Man");return}J.license_number=P.licenseNumber||null,J.license_expiry=P.licenseExpiry}else J.vnumber=null,J.vtype=null,J.license_number=null,J.license_expiry=null;if(P.image&&(J.imgurl=B,J.originalFilename=P.image.name),console.log("Employee data to send:",{...J,imgurl:J.imgurl?`base64_data_${J.imgurl.length}_chars`:"not provided"}),o){const Y=await window.myAPI?.updateEmployee(o.id,J,J.originalFilename||null);if(Y.success)Se();else{Y.message.includes("Email already exists")?re("⚠ Email already exists"):Y.message.includes("Phone number already exists")?De("⚠ Phone number already exists"):Y.message.includes("PIN code already exists")?je("⚠ PIN code already exists"):alert("Error updating employee: "+Y.message);return}}else{const Y=await window.myAPI?.createEmployee(J);if(Y.success)Se();else{Y.message.includes("Email already exists")?re("⚠ Email already exists"):Y.message.includes("Phone number already exists")?De("⚠ Phone number already exists"):Y.message.includes("PIN code already exists")?je("⚠ PIN code already exists"):alert("Error creating employee: "+Y.message);return}}n(!1),w(null)}catch(B){console.error("Error saving employee:",B),alert("Error saving employee")}},Ce=()=>{ee({firstName:"",lastName:"",role:"",phone:"",email:"",pin:"",confirmPin:"",salaryPerHour:"",image:null,vehicleNumber:"",vehicleType:"",licenseNumber:"",licenseExpiry:""}),w(null),je(""),re(""),De("")},pe=F=>{z(F),_(!0)},k=async F=>{try{const B=await window.myAPI?.updateEmployee(F,{isDeleted:1});B.success?(Se(),_(!1),z(null)):alert("Error deleting employee: "+B.message)}catch(B){console.error("Error deleting employee:",B),alert("Error deleting employee")}},L=async F=>{if(!ne[F])try{ue(G=>({...G,[F]:!0}));const B=s.find(G=>G.id===F);if(!B)return;console.log("Current employee data:",B),console.log("Current isActive value:",B.isActive,"Type:",typeof B.isActive);let J;B.isActive===1||B.isActive===!0||B.isActive==="1"?J=!0:J=!1;const Y=J?0:1;console.log("Toggling status for employee:",B.fname,"from",J,"to",Y);const T=await window.myAPI?.updateEmployee(F,{isActive:Y});console.log("API response:",T),T&&T.success?(console.log("Status updated successfully"),t(G=>G.map(ce=>ce.id===F?{...ce,isActive:Y}:ce)),setTimeout(()=>{console.log("Fetching fresh data..."),Se()},200)):(console.error("API returned error:",T),alert("Error toggling status: "+(T?.message||"Unknown error")))}catch(B){console.error("Error toggling status:",B),alert("Error toggling status. Please try again.")}finally{ue(B=>({...B,[F]:!1}))}},f=async F=>{if(!se[F])try{Ae(G=>({...G,[F]:!0}));const B=s.find(G=>G.id===F);if(!B)return;const Y=B.isavailable===1||B.isavailable===!0||B.isavailable==="1"?0:1,T=await window.myAPI?.updateEmployee(F,{isavailable:Y});T&&T.success?(t(G=>G.map(ce=>ce.id===F?{...ce,isavailable:Y}:ce)),setTimeout(()=>{Se()},200)):alert("Error toggling availability: "+(T?.message||"Unknown error"))}catch(B){console.error("Error toggling availability:",B),alert("Error toggling availability. Please try again.")}finally{Ae(B=>({...B,[F]:!1}))}},x=F=>{M(F),O(!0)},N=F=>{F.relatedTarget&&F.relatedTarget.closest(".hg-theme-default")||F.target&&F.target.closest(".hg-theme-default")||F.relatedTarget&&F.relatedTarget.tagName==="INPUT"&&F.relatedTarget.closest("form")||F.relatedTarget&&F.relatedTarget.tagName==="SELECT"&&F.relatedTarget.closest("form")||setTimeout(()=>{O(!1),M("")},100)},C=(F,B)=>{(!q||R!==B)&&x(B)},A=(F,B)=>{x(B)},H=(F,B,J)=>{if(B&&ee(Y=>({...Y,[B]:F})),J==="enter"){const Y=["firstName","lastName","role","phone","salaryPerHour","email","pin","confirmPin"],T=Y.indexOf(B);if(T<Y.length-1){const G=Y[T+1],ce=document.querySelector(`[name="${G}"]`);ce&&ce.focus()}}},V=()=>{O(!1),M("")};return e.jsxs("div",{className:"space-y-6",children:[r&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-primary",children:o?"Edit Employee":"Add New Employee"}),e.jsx("button",{onClick:()=>{n(!1),w(null)},className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100",children:e.jsx(Nt,{size:20})})]}),e.jsxs("form",{onSubmit:ae,children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary mb-4 pb-2 border-b border-gray-200",children:"General Information"}),e.jsxs("div",{className:"flex ",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"firstName",value:P.firstName,onChange:xe,onFocus:()=>C(null,"firstName"),onBlur:N,onClick:()=>A(null,"firstName"),className:"w-[80%] px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Ex: John",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"lastName",value:P.lastName,onChange:xe,onFocus:()=>C(null,"lastName"),onBlur:N,onClick:()=>A(null,"lastName"),className:"w-[80%] px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Ex: Doe",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Role ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"role",value:P.role,onChange:xe,onFocus:()=>C(null,"role"),onBlur:N,onClick:()=>A(null,"role"),className:"w-[80%] px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"Manager",children:"Manager"}),e.jsx("option",{value:"Cashier",children:"Cashier"}),e.jsx("option",{value:"Chef",children:"Chef"}),e.jsx("option",{value:"Waiter",children:"Waiter"}),e.jsx("option",{value:"Sweeper",children:"Sweeper"}),e.jsx("option",{value:"Delivery Man",children:"Delivery Man"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})," ",e.jsx("span",{className:"text-xs text-gray-500",children:"(Must start with 08 and be 10 digits)"})]}),e.jsx("input",{type:"text",name:"phone",value:P.phone,onChange:xe,onFocus:()=>C(null,"phone"),onBlur:N,onClick:()=>A(null,"phone"),className:`w-[80%] px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${Te?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-primary"}`,placeholder:"08xxxxxxxx",maxLength:"10",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:P.phone.length>0&&e.jsxs("span",{className:P.phone.length===10&&P.phone.startsWith("08")?"text-green-600":"text-red-500",children:[P.phone.length,"/10 digits"]})}),Te&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:Te})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Salary per Hour ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"salaryPerHour",value:P.salaryPerHour,onChange:xe,onFocus:()=>C(null,"salaryPerHour"),onBlur:N,onClick:()=>A(null,"salaryPerHour"),className:"w-[80%] px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"0.00",min:"0",step:"0.01",required:!0})]}),P.role==="Delivery Man"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Vehicle Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"vehicleNumber",value:P.vehicleNumber,onChange:xe,onFocus:()=>C(null,"vehicleNumber"),onBlur:N,onClick:()=>A(null,"vehicleNumber"),className:"w-[80%] px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Ex: ABC-123",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Vehicle Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"vehicleType",value:P.vehicleType,onChange:xe,onFocus:()=>C(null,"vehicleType"),onBlur:N,onClick:()=>A(null,"vehicleType"),className:"w-[80%] px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Vehicle Type"}),e.jsx("option",{value:"Bike",children:"Bike"}),e.jsx("option",{value:"Car",children:"Car"}),e.jsx("option",{value:"Truck",children:"Truck"}),e.jsx("option",{value:"Bicycle",children:"Bicycle"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"License Number"}),e.jsx("input",{type:"text",name:"licenseNumber",value:P.licenseNumber,onChange:xe,onFocus:()=>C(null,"licenseNumber"),onBlur:N,onClick:()=>A(null,"licenseNumber"),className:"w-[80%] px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Optional"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["License Expiry Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"licenseExpiry",value:P.licenseExpiry,onChange:xe,onFocus:()=>C(null,"licenseExpiry"),onBlur:N,onClick:()=>A(null,"licenseExpiry"),className:"w-[80%] px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",required:!0})]})]})]})}),e.jsxs("div",{className:"w-48",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Image"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"border-2 border-dashed border-gray-300 rounded-lg p-3 flex flex-col items-center justify-center cursor-pointer hover:border-primary transition-colors w-full h-32 relative overflow-hidden",children:[y?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:y,alt:"Preview",className:"w-full h-full object-cover rounded-md"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"text-white text-xs",children:"Change Image"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(hx,{size:20,className:"text-gray-400 mb-1"}),e.jsx("span",{className:"text-primary font-medium text-xs",children:"Upload Image"})]}),e.jsx("input",{type:"file",onChange:ve,className:"sr-only",accept:"image/*"})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"Image format - jpg png jpeg gif"}),e.jsx("p",{children:"Image Size - maximum size 2 MB"}),e.jsx("p",{children:"Image Ratio - 1:1"}),P.image&&e.jsxs("p",{className:"text-green-600 font-medium",children:["Selected: ",P.image.name]})]})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-lg",children:"👤"}),e.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Account Info"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",name:"email",value:P.email,onChange:xe,onFocus:()=>C(null,"email"),onBlur:N,onClick:()=>A(null,"email"),className:`w-3/4 px-3 py-2.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${de?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-primary"}`,placeholder:"mrsaqibale@gmail.com",required:!0}),de&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:de})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["PIN Code ",e.jsx("span",{className:"text-red-500",children:"*"})," ",e.jsx("span",{className:"text-xs text-gray-500",children:"(4-6 digits)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:d?"text":"password",name:"pin",value:P.pin,onChange:xe,onFocus:()=>C(null,"pin"),onBlur:N,onClick:()=>A(null,"pin"),className:`w-3/4 px-3 py-2.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent pr-6 text-sm ${oe?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-primary"}`,placeholder:"••••••",minLength:"4",maxLength:"6",pattern:"[0-9]{4,6}",required:!0}),e.jsx("button",{type:"button",onClick:()=>m(!d),className:"absolute right-12 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:d?e.jsx(_h,{size:14}):e.jsx(vn,{size:14})})]}),oe&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:oe})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Confirm PIN ",e.jsx("span",{className:"text-red-500",children:"*"})," ",e.jsx("span",{className:"text-xs text-gray-500",children:"(Must match above)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:h?"text":"password",name:"confirmPin",value:P.confirmPin,onChange:xe,onFocus:()=>C(null,"confirmPin"),onBlur:N,onClick:()=>A(null,"confirmPin"),className:"w-3/4 px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent pr-6 text-sm",placeholder:"••••••",minLength:"4",maxLength:"6",pattern:"[0-9]{4,6}",required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!h),className:"absolute right-12 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h?e.jsx(_h,{size:14}):e.jsx(vn,{size:14})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:Ce,className:"px-6 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary",children:"Reset"}),e.jsx("button",{type:"submit",className:`px-6 py-2 bg-primary text-white font-medium rounded-lg \r
                shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
                active:shadow-none active:translate-y-[4px] transition-all`,children:"Submit"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"👥"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Employee List"})]}),e.jsxs("button",{onClick:Q,className:`px-3 py-2 bg-primary text-white text-sm font-medium rounded-lg flex items-center gap-2 \r
            shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
            active:shadow-none active:translate-y-[4px] transition-all`,children:[e.jsx(Ls,{size:16}),"Add New Employee"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse  overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Employee Name"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Available"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primaryuppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:s.filter(F=>F.roll!=="Admin").map((F,B)=>e.jsxs("tr",{className:`border-b border-gray-100 ${B%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:B+1})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[F.imgurl?e.jsx("img",{src:F.imgurl.startsWith("uploads/")?I[F.id]:`data:image/png;base64,${F.imgurl}`,alt:`${F.fname} ${F.lname}`,className:"w-8 h-8 object-cover rounded-full",onError:J=>{J.target.style.display="none",J.target.nextSibling.style.display="flex"}}):e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-xs text-gray-500",children:[F.fname?.charAt(0),F.lname?.charAt(0)]})}),e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",style:{display:"none"},children:e.jsxs("span",{className:"text-xs text-gray-500",children:[F.fname?.charAt(0),F.lname?.charAt(0)]})}),e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:[F.fname," ",F.lname]})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:F.roll})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:F.phone})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:F.email})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:`relative inline-flex items-center ${se[F.id]?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[e.jsx("input",{type:"checkbox",checked:F.isavailable===1,onChange:()=>!se[F.id]&&f(F.id),className:"sr-only",disabled:se[F.id]}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${F.isavailable===1?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${F.isavailable===1?"translate-x-5":"translate-x-0.5"} mt-0.5`})}),se[F.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:`relative inline-flex items-center ${ne[F.id]?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[e.jsx("input",{type:"checkbox",checked:F.isActive===1,onChange:()=>!ne[F.id]&&L(F.id),className:"sr-only",disabled:ne[F.id]}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${F.isActive===1?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${F.isActive===1?"translate-x-5":"translate-x-0.5"} mt-0.5`})}),ne[F.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:F.created_at?new Date(F.created_at).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>$e(F),className:"text-primary hover:text-primary-dark transition-colors p-1 rounded hover:bg-blue-50",children:e.jsx(oa,{size:16})}),e.jsx("button",{onClick:()=>pe(F),className:"text-red-600 hover:text-red-800 transition-colors p-1 rounded hover:bg-red-50",children:e.jsx(Pa,{size:16})})]})})]},F.id))})]})})]}),S&&E&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Employee"}),e.jsx("button",{onClick:()=>{_(!1),z(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete this employee? This action cannot be undone."}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Employee: ",e.jsxs("strong",{children:[E.fname," ",E.lname]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Role: ",e.jsx("strong",{children:E.roll})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{_(!1),z(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>k(E.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(Xa,{isVisible:q,onClose:V,activeInput:R,onInputChange:H,onInputBlur:N,inputValue:P[R]||"",placeholder:"Type here..."})]})},{api:Js}=window,n6=()=>{const[s,t]=v.useState(""),[r,n]=v.useState(""),[o,c]=v.useState(""),[d,m]=v.useState(""),[h,g]=v.useState(""),[y,w]=v.useState(""),[S,_]=v.useState("cash"),[E,z]=v.useState(""),[I,U]=v.useState([]),[q,O]=v.useState([]),[R,M]=v.useState(""),[P,ee]=v.useState(1),[oe]=v.useState(7),[je,de]=v.useState(!1),[re,Te]=v.useState(null),[De,ne]=v.useState(!1),[ue,se]=v.useState(""),[Ae,Se]=v.useState(""),[$e,Q]=v.useState(["Check In","Check Out"]),[xe,ve]=v.useState(!1),[ae,Ce]=v.useState([]),[pe,k]=v.useState(!1),[L,f]=v.useState(""),[x,N]=v.useState(""),[C,A]=v.useState(""),[H,V]=v.useState(""),[F,B]=v.useState(!1),[J,Y]=v.useState(""),[T,G]=v.useState(!1),[ce,ie]=v.useState(""),[fe,me]=v.useState("success"),Me=[{value:"present_today",label:"Present Today"},{value:"absent_today",label:"Absent Today"},{value:"late_today",label:"Late Today"},{value:"most_attendance",label:"Most Attendance"},{value:"least_attendance",label:"Least Attendance"},{value:"highest_salary",label:"Highest Salary"},{value:"lowest_salary",label:"Lowest Salary"},{value:"unpaid_salary",label:"Unpaid Salary"},{value:"recent_joiners",label:"Recent Joiners"}],Re=[{value:"sick",label:"Sick Leave"},{value:"annual",label:"Annual Leave"},{value:"personal",label:"Personal Leave"},{value:"other",label:"Other"}],Ie=[{value:"cash",label:"Cash"},{value:"bank_transfer",label:"Bank Transfer"},{value:"check",label:"Check"},{value:"digital_payment",label:"Digital Payment"}],[st,He]=v.useState([]);v.useEffect(()=>{Xe()},[]);const Xe=async()=>{try{if(Js){const ye=await Js.getAllEmployees(),te=(Array.isArray(ye)?ye:ye?.data||[]).filter(Ge=>{const ot=typeof Ge.isActive=="string"?parseInt(Ge.isActive,10):Ge.isActive,ht=typeof Ge.isDeleted=="string"?parseInt(Ge.isDeleted,10):Ge.isDeleted,jt=ot===1||ot===!0||ot==="1"||ot==null,It=ht===0||ht===!1||ht==="0"||ht==null;return jt&&It}).map(Ge=>({id:Ge.id,employeeId:Ge.code||`EMP${Ge.id.toString().padStart(3,"0")}`,name:`${Ge.fname} ${Ge.lname}`,email:Ge.email||"",phone:Ge.phone||"",role:Ge.roll||"Employee",totalDays:0,presentDays:0,lateDays:0,totalHours:0,salary:Ge.salary||0,joiningDate:Ge.created_at||new Date().toISOString().split("T")[0],isPaid:!1,address:Ge.address||"",salaryHistory:[]})),Fe=await Promise.all(te.map(async Ge=>{try{const ot=await Js.attendanceGetByEmployee(Ge.id),ht=await Js.salaryPaymentGetByEmployee(Ge.id),jt=Array.isArray(ot)?ot:ot?.data||[],It=jt.length,Vt=jt.filter(js=>js.status==="present").length,rs=jt.filter(js=>js.status==="late").length,zt=jt.reduce((js,Ot)=>js+(Ot.total_hours||0),0),gs=Array.isArray(ht)?ht:ht?.data||[],xs=gs.reduce((js,Ot)=>js+(Ot.amount||0),0)>=Ge.salary;return{...Ge,totalDays:It,presentDays:Vt,lateDays:rs,totalHours:zt,isPaid:xs,salaryHistory:gs}}catch(ot){return console.error(`Error loading details for employee ${Ge.id}:`,ot),Ge}}));U(Fe),O(Fe)}}catch(ye){console.error("Error loading employees:",ye),U([]),O([])}};v.useEffect(()=>{let ye=I.filter(ze=>ze.name.toLowerCase().includes(R.toLowerCase())||ze.email.toLowerCase().includes(R.toLowerCase())||ze.phone.includes(R)||ze.role.toLowerCase().includes(R.toLowerCase()));if(d)switch(d){case"highest_salary":ye.sort((ze,Z)=>Z.salary-ze.salary);break;case"lowest_salary":ye.sort((ze,Z)=>ze.salary-Z.salary);break;case"unpaid_salary":ye=ye.filter(ze=>!ze.isPaid);break;case"recent_joiners":ye.sort((ze,Z)=>new Date(Z.joiningDate)-new Date(ze.joiningDate));break;case"most_attendance":ye.sort((ze,Z)=>Z.presentDays/Z.totalDays-ze.presentDays/ze.totalDays);break;case"least_attendance":ye.sort((ze,Z)=>ze.presentDays/ze.totalDays-Z.presentDays/Z.totalDays);break}O(ye),ee(1)},[R,I,d]);const et=P*oe,rt=et-oe,Qe=q.slice(rt,et),At=Math.ceil(q.length/oe),xt=ye=>new Date(ye).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),St=ye=>{ee(ye)},Le=async ye=>{Te(ye),de(!0);try{if(Js){const ze=await Js.attendanceGetByEmployee(ye.id),Z=Array.isArray(ze)?ze:ze?.data||[];Z.sort((te,Fe)=>new Date(`${Fe.date} ${Fe.checkin||"00:00:00"}`)-new Date(`${te.date} ${te.checkin||"00:00:00"}`)),He(Z)}else He([])}catch(ze){console.error("Error loading attendance records:",ze),He([])}},Ye=()=>{de(!1),Te(null),w("")},_e=async()=>{try{await Xe()}catch{}ne(!0),se(""),Se(""),Q(["Check In","Check Out"])},tt=()=>{ne(!1),se(""),Se("")},ct=async()=>{if(!ue||!Ae){ie("Please select both employee and action"),me("error"),G(!0);return}const ye=I.find(te=>te.id.toString()===ue),ze=new Date().toISOString(),Z=new Date().toISOString().split("T")[0];try{if(Js){const te=await Js.attendanceCheckTodayStatus(ue,Z);let Fe="present",Ge=null,ot=null;if(Ae==="Check In"){if(te.success&&te.data&&!te.data.checkout){ie("Already checked in. Please Check Out first."),me("error"),G(!0);return}Ge=ze,Fe="present"}else if(Ae==="Check Out"){if(!te.success||!te.data||te.data.checkout){ie("No open session to check out"),me("error"),G(!0);return}ot=ze;const ht=await Js.attendanceUpdate(te.data.id,{checkout:ot});if(ht?.success&&ht.computedHours!=null){const jt=ht.computedPay!=null?`, Pay: €${Number(ht.computedPay).toLocaleString()}`:"";ie(`Checked out. Hours: ${ht.computedHours}${jt}`),me("success"),G(!0)}}if(Ae==="Check In"){const ht={employee_id:parseInt(ue),date:Z,checkin:Ge,checkout:ot,status:Fe,added_by:1};if((await Js.attendanceCreate(ht)).success){ie(`${Ae} recorded successfully for ${ye?.name} at ${new Date(ze).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})}`),me("success"),G(!0),await Xe();try{if(je&&re&&re.id===ye?.id){const It=await Js.attendanceGetByEmployee(ye.id),Vt=Array.isArray(It)?It:It?.data||[];Vt.sort((rs,zt)=>new Date(`${zt.date} ${zt.checkin||"00:00:00"}`)-new Date(`${rs.date} ${rs.checkin||"00:00:00"}`)),He(Vt)}}catch{}tt()}else ie("Failed to save attendance record"),me("error"),G(!0)}else{ie(`${Ae} recorded successfully for ${ye?.name} at ${new Date(ze).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})}`),me("success"),G(!0),await Xe();try{if(je&&re&&re.id===ye?.id){const ht=await Js.attendanceGetByEmployee(ye.id),jt=Array.isArray(ht)?ht:ht?.data||[];jt.sort((It,Vt)=>new Date(`${Vt.date} ${Vt.checkin||"00:00:00"}`)-new Date(`${It.date} ${It.checkin||"00:00:00"}`)),He(jt)}}catch{}tt()}}else console.log("Attendance record:",{employeeId:ue,employeeName:ye?.name,action:Ae,time:ze,date:Z}),ie(`${Ae} recorded successfully for ${ye?.name} at ${new Date(ze).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})}`),me("success"),G(!0),tt()}catch(te){console.error("Error saving attendance:",te),ie("Error saving attendance record"),me("error"),G(!0)}},it=ye=>{Y(ye),B(!0)},ke=ye=>{ye.relatedTarget&&ye.relatedTarget.closest(".hg-theme-default")||setTimeout(()=>{B(!1),Y("")},300)},Ke=(ye,ze)=>{(!F||J!==ze)&&it(ze)},ut=(ye,ze)=>{ze==="chooseFirst"?g(ye):ze==="paySalary"?w(ye):ze==="searchTerm"?M(ye):ze==="paymentNote"&&z(ye)},Ct=()=>{B(!1),Y("")},Et=(ye,ze)=>(ye/ze*100).toFixed(1),Bt=(ye,ze,Z)=>{const te=Et(ye,ze);return te>=95?{text:"Excellent",color:"bg-green-100 text-green-800"}:te>=85?{text:"Good",color:"bg-blue-100 text-blue-800"}:te>=75?{text:"Fair",color:"bg-yellow-100 text-yellow-800"}:{text:"Poor",color:"bg-red-100 text-red-800"}},ge=async()=>{if(!y||parseFloat(y)<=0){ie("Please enter a valid salary amount"),me("error"),G(!0);return}try{if(Js){const ye={employee_id:re.id,payment_date:new Date().toISOString().split("T")[0],amount:parseFloat(y),payment_method:S,payment_note:E||`Salary payment for ${re?.name}`,paid_by:1};if((await Js.salaryPaymentCreate(ye)).success){await Xe();const Z=I.find(te=>te.id===re.id);Z&&Te(Z);try{const te=await Js.attendanceGetByEmployee(re.id),Fe=Array.isArray(te)?te:te?.data||[];Fe.sort((Ge,ot)=>new Date(`${ot.date} ${ot.checkin||"00:00:00"}`)-new Date(`${Ge.date} ${Ge.checkin||"00:00:00"}`)),He(Fe)}catch(te){console.error("Error refreshing attendance records:",te)}ie(`Salary payment of €${parseFloat(y).toLocaleString()} saved successfully for ${re?.name}!`),me("success"),G(!0),w(""),_("cash"),z("")}else ie("Failed to save salary payment"),me("error"),G(!0)}else{console.log("Paying salary:",y,"for employee:",re?.name);const ye={id:Date.now(),date:new Date().toISOString().split("T")[0],amount:parseFloat(y),method:S,note:E||`Salary payment for ${re?.name}`,paid_by:1};re&&(U(ze=>ze.map(Z=>Z.id===re.id?{...Z,isPaid:!0,salaryHistory:[...Z.salaryHistory||[],ye]}:Z)),Te(ze=>ze?{...ze,isPaid:!0,salaryHistory:[...ze.salaryHistory||[],ye]}:null)),ie(`Salary payment of €${parseFloat(y).toLocaleString()} saved successfully for ${re?.name}!`),me("success"),G(!0),w(""),_("cash"),z("")}}catch(ye){console.error("Error saving salary payment:",ye),ie("Error saving salary payment"),me("error"),G(!0)}},Ee=async ye=>{Te(ye);try{if(Js){const ze=await Js.salaryPaymentGetByEmployee(ye.id);if(ze.success){const Z=ze.data.map(te=>({id:te.id,date:te.payment_date,amount:te.amount,method:te.payment_method,note:te.payment_note}));Ce(Z)}else Ce([])}else Ce(ye.salaryHistory||[])}catch(ze){console.error("Error loading salary history:",ze),Ce(ye.salaryHistory||[])}ve(!0)},le=async()=>{try{await Xe()}catch{}k(!0),f(""),N(""),A(""),V("")},Ve=async()=>{if(!L||!x||!C){ie("Please fill in all required fields"),me("error"),G(!0);return}const ye=new Date(x),ze=new Date(C);if(ye>ze){ie("Start date cannot be after end date"),me("error"),G(!0);return}const Z=Math.ceil((ze-ye)/(1e3*60*60*24))+1;try{if(Js){const te=await Js.leaveRequestCheckOverlapping(re.id,x,C);if(te.success&&te.data.hasOverlapping){ie("Employee has overlapping leave requests for these dates"),me("error"),G(!0);return}const Fe={employee_id:re.id,leave_type:L,start_date:x,end_date:C,total_days:Z,reason:H};(await Js.leaveRequestCreate(Fe)).success?(ie(`Leave request submitted successfully for ${Z} days`),me("success"),G(!0),nt()):(ie("Failed to submit leave request"),me("error"),G(!0))}else console.log("Leave request:",{employeeId:re?.id,leaveType:L,startDate:x,endDate:C,totalDays:Z,reason:H}),ie(`Leave request submitted successfully for ${Z} days`),me("success"),G(!0),nt()}catch(te){console.error("Error submitting leave request:",te),ie("Error submitting leave request"),me("error"),G(!0)}},nt=()=>{k(!1),f(""),N(""),A(""),V("")},mt=ye=>ye.salaryHistory?ye.salaryHistory.reduce((ze,Z)=>ze+Z.amount,0):0,wt=ye=>!st||st.length===0?0:st.reduce((ze,Z)=>ze+(Z.earned_amount||0),0),vt=ye=>{const ze=wt(),Z=mt(ye);return Math.max(0,ze-Z)},_t=(ye,ze)=>Math.max(0,ye-ze);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center gap-3 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sn,{size:24,className:"text-primary"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Employee Attendance"})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:s,onChange:ye=>t(ye.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:r,onChange:ye=>n(ye.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:d,onChange:ye=>m(ye.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm appearance-none cursor-pointer",children:[e.jsx("option",{value:"",children:"Select Attendance Sorting Order"}),Me.map(ye=>e.jsx("option",{value:ye.value,children:ye.label},ye.value))]}),e.jsx(hs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:_e,className:`px-6 py-3 bg-primary text-white font-medium rounded-lg cursor-pointer\r
            hover:translate-y-[2px] \r
             transition-all flex items-center gap-2`,children:"Employee Attendance"}),e.jsx("button",{onClick:le,className:`px-6 py-3 bg-blue-600 text-white font-medium rounded-lg cursor-pointer\r
            hover:translate-y-[2px] \r
             transition-all flex items-center gap-2`,children:"Leave Request"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Employee Attendance List"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",q.length," employees)"]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Ex: Search by name or role",value:R,onChange:ye=>M(ye.target.value),onFocus:()=>it("searchTerm"),onBlur:ke,onClick:()=>Ke(null,"searchTerm"),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm w-64"}),e.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"SI"}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Employee ID",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Employee Name",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Contact Information",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Role",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Hours",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Salary",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Actions"})]})}),e.jsx("tbody",{children:Qe.map((ye,ze)=>(Et(ye.presentDays,ye.totalDays),Bt(ye.presentDays,ye.totalDays,ye.lateDays),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:rt+ze+1}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:ye.employeeId}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:ye.name})})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-gray-800",children:ye.email}),e.jsx("div",{className:"text-gray-500",children:ye.phone})]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:ye.role}),e.jsxs("td",{className:"py-3 px-4 text-sm text-gray-600",children:[ye.totalHours,"h"]}),e.jsxs("td",{className:"py-3 px-4 text-sm text-gray-600",children:["€",ye.salary.toLocaleString()]}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>Le(ye),className:"p-1 text-gray-400 hover:text-primary transition-colors",children:e.jsx(vn,{size:16})})})]},ye.id)))})]})}),At>1&&e.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",rt+1," to ",Math.min(et,q.length)," of ",q.length," employees"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>St(P-1),disabled:P===1,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Tu,{size:16})}),Array.from({length:At},(ye,ze)=>ze+1).map(ye=>e.jsx("button",{onClick:()=>St(ye),className:`px-3 py-2 text-sm rounded-lg transition-colors ${P===ye?"bg-primary text-white":"border border-gray-300 hover:bg-gray-50"}`,children:ye},ye)),e.jsx("button",{onClick:()=>St(P+1),disabled:P===At,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx($b,{size:16})})]})]})]}),je&&re&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Employee Attendance Details"}),e.jsx("button",{onClick:Ye,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 p-6 border-r border-gray-200 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Attendance Records"}),e.jsxs("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full",children:[re.totalDays," days"]})]})}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"sticky top-0 bg-white",children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Date",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Salary",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Check In",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Check Out",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Hours Worked",e.jsx(hs,{className:"inline ml-1",size:12})]})]})}),e.jsx("tbody",{children:st.map(ye=>{const ze=ye.checkin?new Date(ye.checkin).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}):"-",Z=ye.checkout?new Date(ye.checkout).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}):"-",te=ye.total_hours!=null?ye.total_hours:ye.checkin&&ye.checkout?((new Date(ye.checkout)-new Date(ye.checkin))/(1e3*60*60)).toFixed(2):0;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:xt(ye.date)}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:ye.earned_amount?`€${Number(ye.earned_amount).toFixed(2)}`:"-"}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:ze}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:Z}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:te>0?`${te}h`:"-"})]},ye.id)})})]})})]}),e.jsxs("div",{className:"w-80 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(sn,{size:20,className:"text-primary"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:re.name})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center border-2 border-gray-200",children:e.jsx("span",{className:"text-gray-400 text-2xl",children:"👤"})})}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Wb,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-800",children:re.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dx,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-800",children:re.phone})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sn,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-800",children:re.role})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:"Salary Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Amount:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:["€",wt().toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Paid Amount:"}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["€",mt(re).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pending Amount:"}),e.jsxs("span",{className:"text-sm font-medium text-red-600",children:["€",vt(re).toLocaleString()]})]}),_t(parseFloat(y),vt(re))>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Advance Amount:"}),e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:["€",_t(parseFloat(y),vt(re)).toLocaleString()]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>Ee(re),className:"w-full px-4 py-2 bg-blue-50 text-blue-700 font-medium rounded-lg border border-blue-200 hover:bg-blue-100 transition-colors",children:"View Salary History"})}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Pay Salary Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:y,onChange:ye=>w(ye.target.value),onFocus:()=>it("paySalary"),onBlur:ke,onClick:()=>Ke(null,"paySalary"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"0.00",min:"0",step:"0.01",required:!0}),y&&parseFloat(y)>0&&e.jsx("div",{className:"mt-2 text-sm",children:parseFloat(y)>vt(re)?e.jsxs("div",{className:"text-blue-600 bg-blue-50 p-2 rounded border border-blue-200",children:[e.jsx("strong",{children:"Advance Payment:"})," This payment exceeds the pending amount by €",_t(parseFloat(y),vt(re)).toFixed(2)]}):e.jsxs("div",{className:"text-green-600 bg-green-50 p-2 rounded border border-green-200",children:[e.jsx("strong",{children:"Regular Payment:"})," This payment covers €",parseFloat(y).toFixed(2)," of the €",vt(re).toFixed(2)," pending amount"]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),e.jsx("select",{value:S,onChange:ye=>_(ye.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",children:Ie.map(ye=>e.jsx("option",{value:ye.value,children:ye.label},ye.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Note"}),e.jsx("textarea",{value:E,onChange:ye=>z(ye.target.value),onFocus:()=>it("paymentNote"),onBlur:ke,onClick:()=>Ke(null,"paymentNote"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Optional note about this payment",rows:"2"})]}),e.jsx("button",{onClick:ge,disabled:!y||parseFloat(y)<=0,className:`w-full px-4 py-2 bg-primary text-white font-medium rounded-lg \r
                      shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
                      active:shadow-none active:translate-y-[4px] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none disabled:translate-y-0`,children:"Save Payment"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:"Contact info"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Pc,{size:16,className:"text-gray-400 mt-0.5"}),e.jsxs("span",{className:"text-sm text-gray-800",children:["Joined: ",xt(re.joiningDate)]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($s,{size:16,className:"text-gray-400 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-800",children:re.address||"No address available"})]})]})]})]})]})]})}),De&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Employee Attendance"}),e.jsx("button",{onClick:tt,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Employee ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:ue,onChange:async ye=>{const ze=ye.target.value;se(ze);try{if(Js&&ze){const Z=new Date().toISOString().split("T")[0],te=await Js.attendanceCheckTodayStatus(ze,Z);te?.success&&te.data?!!te.data.checkout?(Q(["Check In"]),Se("Check In")):(Q(["Check Out"]),Se("Check Out")):(Q(["Check In"]),Se("Check In"))}else Q(["Check In","Check Out"]),Se("")}catch(Z){console.error("Error checking today status:",Z),Q(["Check In","Check Out"]),Se("")}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm appearance-none cursor-pointer",required:!0,children:[e.jsx("option",{value:"",children:"Choose an employee"}),I.map(ye=>e.jsxs("option",{value:ye.id,children:[ye.employeeId," - ",ye.name," (",ye.role,")"]},ye.id))]}),e.jsx(hs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Action ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:Ae,onChange:ye=>Se(ye.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm appearance-none cursor-pointer",required:!0,children:[e.jsx("option",{value:"",children:"Choose action"}),$e.map(ye=>e.jsx("option",{value:ye,children:ye},ye))]}),e.jsx(hs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:tt,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ct,disabled:!ue||!Ae,className:`flex-1 px-4 py-2 bg-primary text-white font-medium rounded-lg \r
                  shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
                  active:shadow-none active:translate-y-[4px] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none disabled:translate-y-0`,children:"Save"})]})]})]})}),xe&&re&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["Salary History - ",re.name]}),e.jsx("button",{onClick:()=>ve(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:["€",wt().toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Amount"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["€",mt(re).toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Paid Amount"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["€",vt(re).toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending Amount"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["€",_t(mt(re),vt(re)).toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Advance Amount"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Date"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Method"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Type"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Note"})]})}),e.jsx("tbody",{children:ae.length>0?ae.map(ye=>{const ze=ye.amount>vt(re)?"Advance":"Regular",Z=ze==="Advance"?"text-blue-600":"text-green-600";return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:xt(ye.date)}),e.jsxs("td",{className:"py-3 px-4 text-sm font-medium text-green-600",children:["€",ye.amount.toLocaleString()]}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.jsx("span",{className:"capitalize",children:ye.method.replace("_"," ")})}),e.jsx("td",{className:"py-3 px-4 text-sm font-medium",children:e.jsx("span",{className:`${Z} bg-opacity-10 px-2 py-1 rounded-full text-xs`,children:ze})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:ye.note||"-"})]},ye.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"py-8 text-center text-gray-500",children:"No salary payments found"})})})]})})]})]})}),pe&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Leave Request"}),e.jsx("button",{onClick:nt,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Employee ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:re?.id||"",onChange:ye=>{const ze=I.find(Z=>Z.id.toString()===ye.target.value);Te(ze)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm appearance-none cursor-pointer",required:!0,children:[e.jsx("option",{value:"",children:"Choose an employee"}),I.map(ye=>e.jsxs("option",{value:ye.id,children:[ye.employeeId," - ",ye.name," (",ye.role,")"]},ye.id))]}),e.jsx(hs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Leave Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:L,onChange:ye=>f(ye.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm appearance-none cursor-pointer",required:!0,children:[e.jsx("option",{value:"",children:"Choose leave type"}),Re.map(ye=>e.jsx("option",{value:ye.value,children:ye.label},ye.value))]}),e.jsx(hs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:x,onChange:ye=>N(ye.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["End Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:C,onChange:ye=>A(ye.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason"}),e.jsx("textarea",{value:H,onChange:ye=>V(ye.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Reason for leave request",rows:"3"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:nt,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ve,disabled:!re||!L||!x||!C,className:`flex-1 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg \r
                  shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
                  active:shadow-none active:translate-y-[4px] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none disabled:translate-y-0`,children:"Submit Request"})]})]})]})}),e.jsx(Xa,{isVisible:F,onClose:Ct,activeInput:J,onInputChange:ut,onInputBlur:ke,inputValue:J==="paySalary"?y||"":J==="searchTerm"?R||"":J==="paymentNote"?E||"":h||"",placeholder:"Type here..."}),e.jsx(Ci,{message:ce,isVisible:T,onClose:()=>G(!1),type:fe,duration:2e3})]})},i6=()=>{const[s,t]=v.useState("employee");return e.jsxs("div",{className:"px-4 py-2",children:[e.jsx("div",{className:"flex items-center justify-end mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>t("employee"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="employee"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(sn,{size:16}),"Employee Management"]}),e.jsxs("button",{onClick:()=>t("attendance"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="attendance"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Pc,{size:16}),"Attendance"]})]})}),e.jsxs("div",{className:"mt-6",children:[s==="employee"&&e.jsx(r6,{}),s==="attendance"&&e.jsx(n6,{})]})]})},o6=()=>{const[s,t]=v.useState([]),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState({name:"",type:"Indoor"}),[h,g]=v.useState(!1),[y,w]=v.useState(null),[S,_]=v.useState(null),[E,z]=v.useState([]),[I,U]=v.useState(!1),{showKeyboard:q,activeInput:O,keyboardInput:R,handleInputBlur:M,handleAnyInputFocus:P,handleAnyInputClick:ee,resetKeyboardInputs:oe,hideKeyboard:je}=Wn(["name","type"]),de=async()=>{try{const ae=await window.myAPI?.floorGetAll();ae&&ae.success?t(ae.data||[]):(console.error("Failed to fetch floors:",ae?.message||"Unknown error"),t([]))}catch(ae){console.error("Error fetching floors:",ae),t([])}},re=async ae=>{try{const Ce=await window.myAPI?.tableGetByFloor(ae);Ce&&Ce.success?z(Ce.data||[]):(console.error("Failed to fetch floor tables:",Ce?.message||"Unknown error"),z([]))}catch(Ce){console.error("Error fetching floor tables:",Ce),z([])}};v.useEffect(()=>{de()},[]);const Te=async ae=>{_(ae),await re(ae.id),U(!0)},De=()=>{U(!1),_(null),z([])},ne=ae=>{c(ae),m({name:ae.name,type:ae.type}),n(!0),oe()},ue=()=>{c(null),m({name:"",type:"Indoor"}),n(!0),oe()},se=ae=>{const{name:Ce,value:pe}=ae.target;m(k=>({...k,[Ce]:pe}))},Ae=(ae,Ce)=>{Ce==="name"?m(pe=>({...pe,name:ae})):Ce==="type"&&m(pe=>({...pe,type:ae}))},Se=async ae=>{ae.preventDefault();try{if(o){const Ce=await window.myAPI?.floorUpdate(o.id,{name:d.name,type:d.type});if(!Ce||!Ce.success)throw new Error(Ce?.message||"Failed to update floor")}else{const Ce=await window.myAPI?.floorCreate({name:d.name,type:d.type,addedby:1});if(!Ce||!Ce.success)throw new Error(Ce?.message||"Failed to create floor")}de(),n(!1),oe()}catch(Ce){console.error("Error saving floor:",Ce),alert(`Error: ${Ce.message}`)}},$e=ae=>{w(ae),g(!0)},Q=async ae=>{try{const Ce=await window.myAPI?.floorUpdate(ae,{isdeleted:1});if(!Ce||!Ce.success)throw new Error(Ce?.message||"Failed to delete floor");de(),n(!1),g(!1),w(null)}catch(Ce){console.error("Error deleting floor:",Ce),alert(`Error: ${Ce.message}`)}},xe=()=>{const ae=pe=>pe<=2?"w-16 h-16":pe<=4?"w-20 h-20":pe<=6?"w-24 h-24":"w-28 h-28",Ce=pe=>{switch(pe){case"Occupied":return"bg-red-500";case"Reserved":return"bg-yellow-500";default:return"bg-green-500"}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:De,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(zc,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:S?.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[S?.type," Floor"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Total Tables: ",e.jsx("span",{className:"font-semibold text-primary",children:E.length})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Total Seats: ",e.jsx("span",{className:"font-semibold text-primary",children:E.reduce((pe,k)=>pe+(k.seat_capacity||0),0)})]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-6 min-h-[400px]",children:E.length>0?e.jsx("div",{className:"grid grid-cols-6 gap-6",children:E.map(pe=>e.jsxs("div",{className:`${ae(pe.seat_capacity)} ${Ce(pe.status||"Free")} rounded-lg flex flex-col items-center justify-center text-white font-bold shadow-lg hover:shadow-xl transition-all duration-200 cursor-pointer relative group`,title:`Table ${pe.table_no} - ${pe.seat_capacity} seats - ${pe.status||"Free"}`,children:[e.jsxs("span",{className:"text-xs font-bold",children:["T",pe.table_no]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(sn,{size:10}),e.jsx("span",{className:"text-xs",children:pe.seat_capacity})]}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-white text-xs px-1 py-0.5 rounded-full text-gray-700 font-medium shadow-sm",children:pe.status||"Free"}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-10",children:["Table ",pe.table_no," - ",pe.seat_capacity," seats"]})]},pe.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center mb-4",children:e.jsx(sn,{size:24})}),e.jsx("p",{className:"text-lg font-medium",children:"No tables found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Add tables to this floor to see them here"})]})}),e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Available"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Occupied"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Reserved"})]})]})]})},ve=()=>e.jsxs("div",{className:"overflow-x-auto bg-white py-5 px-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Floor List"}),e.jsxs("button",{onClick:ue,className:"px-4 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add New Floor"]})]}),e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Floor Name"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Total Tables"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:s.map((ae,Ce)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-25 transition-colors ${Ce%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:Ce+1})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>Te(ae),className:"text-sm font-medium text-gray-800 hover:text-primary transition-colors text-left",children:ae.name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ae.type})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ae.table_count||0})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ne(ae),className:"text-primary hover:text-primaryDark cursor-pointer transition-colors",children:e.jsx(oa,{size:16})}),e.jsx("button",{onClick:()=>$e(ae),className:"text-red-500 hover:text-red-700 cursor-pointer transition-colors",children:e.jsx(Pa,{size:16})})]})})]},ae.id))})]})]});return e.jsxs(e.Fragment,{children:[I?e.jsx(xe,{}):e.jsx(ve,{}),r&&e.jsx("div",{className:"fixed inset-0 bg-[#0000008e] bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:o?"Edit Floor":"Add New Floor"}),e.jsx("button",{onClick:()=>{n(!1),oe()},className:"text-gray-500 hover:text-gray-700",children:e.jsx(Nt,{size:24})})]}),e.jsxs("form",{onSubmit:Se,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Floor Name*"}),e.jsx("input",{type:"text",name:"name",placeholder:"e.g., Ground Floor, Rooftop",value:d.name,onChange:ae=>{const Ce=ae.target.value;m(pe=>({...pe,name:Ce}))},onFocus:ae=>P(ae,"name",d.name),onClick:ae=>ee(ae,"name",d.name),onBlur:M,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Floor Type*"}),e.jsxs("select",{name:"type",value:d.type,onChange:se,onFocus:ae=>P(ae,"type",d.type),onClick:ae=>ee(ae,"type",d.type),onBlur:M,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",required:!0,children:[e.jsx("option",{value:"Indoor",children:"Indoor"}),e.jsx("option",{value:"Outdoor",children:"Outdoor"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{n(!1),oe()},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primaryLight hover:bg-primaryDark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:o?"Update Floor":"Add Floor"})]})]})]})})}),e.jsx(Xa,{isVisible:q,onClose:je,activeInput:O,onInputChange:Ae,onInputBlur:M,inputValue:R}),h&&y&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Floor"}),e.jsx("button",{onClick:()=>{g(!1),w(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 mb-4",children:"Do you want to delete this floor?"})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{g(!1),w(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>Q(y.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})},l6=()=>{const[s,t]=v.useState([]),[r,n]=v.useState([]),[o,c]=v.useState(!1),[d,m]=v.useState(null),[h,g]=v.useState({table_no:"",floor_id:"",seat_capacity:4}),[y,w]=v.useState(!1),[S,_]=v.useState(null),[E,z]=v.useState(""),[I,U]=v.useState("list"),{showKeyboard:q,activeInput:O,keyboardInput:R,handleInputBlur:M,handleAnyInputFocus:P,handleAnyInputClick:ee,resetKeyboardInputs:oe,hideKeyboard:je}=Wn(["table_no","floor_id","seat_capacity"]),de=async()=>{try{const ae=await window.myAPI?.tableGetAll();ae&&ae.success?t(ae.data||[]):(console.error("Failed to fetch tables:",ae?.message||"Unknown error"),t([]))}catch(ae){console.error("Error fetching tables:",ae),t([])}},re=async()=>{try{const ae=await window.myAPI?.floorGetAll();ae&&ae.success?n(ae.data||[]):(console.error("Failed to fetch floors:",ae?.message||"Unknown error"),n([]))}catch(ae){console.error("Error fetching floors:",ae),n([])}};v.useEffect(()=>{de(),re()},[]);const Te=ae=>{m(ae),g({table_no:ae.table_no,floor_id:ae.floor_id,seat_capacity:ae.seat_capacity||4}),c(!0),oe()},De=()=>{m(null),g({table_no:"",floor_id:r.length>0?r[0].id:"",seat_capacity:4}),c(!0),oe()},ne=ae=>{const{name:Ce,value:pe}=ae.target;g(k=>({...k,[Ce]:pe}))},ue=(ae,Ce)=>{Ce==="table_no"?g(pe=>({...pe,table_no:ae})):Ce==="seat_capacity"?g(pe=>({...pe,seat_capacity:parseInt(ae)||4})):Ce==="floor_id"&&g(pe=>({...pe,floor_id:ae}))},se=async ae=>{ae.preventDefault();try{if(d){const Ce=await window.myAPI?.tableUpdate(d.id,{table_no:h.table_no,floor_id:parseInt(h.floor_id),seat_capacity:parseInt(h.seat_capacity)});if(!Ce||!Ce.success)throw new Error(Ce?.message||"Failed to update table")}else{const Ce=await window.myAPI?.tableCreate({table_no:h.table_no,floor_id:parseInt(h.floor_id),seat_capacity:parseInt(h.seat_capacity),addedby:1});if(!Ce||!Ce.success)throw new Error(Ce?.message||"Failed to create table")}de(),c(!1),oe()}catch(Ce){console.error("Error saving table:",Ce),alert(`Error: ${Ce.message}`)}},Ae=ae=>{_(ae),w(!0)},Se=async ae=>{try{const Ce=await window.myAPI?.tableUpdate(ae,{isdeleted:1});if(!Ce||!Ce.success)throw new Error(Ce?.message||"Failed to delete table");de(),c(!1),w(!1),_(null)}catch(Ce){console.error("Error deleting table:",Ce),alert(`Error: ${Ce.message}`)}},$e=ae=>{switch(ae){case"Free":return"text-green-600 bg-green-100";case"Occupied":return"text-red-600 bg-red-100";case"Reserved":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},Q=E?s.filter(ae=>ae.floor_id==E):s,xe=()=>{const ae=k=>k<=2?"w-16 h-16":k<=4?"w-20 h-20":k<=6?"w-24 h-24":"w-28 h-28",Ce=k=>{switch(k){case"Occupied":return"bg-red-500";case"Reserved":return"bg-yellow-500";default:return"bg-green-500"}},pe=r.find(k=>k.id==E);return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:pe?`${pe.name} - Tables`:"All Tables"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Q.length," tables, ",Q.reduce((k,L)=>k+(L.seat_capacity||0),0)," total seats"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:E,onChange:k=>z(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primaryLight",children:[e.jsx("option",{value:"",children:"All Floors"}),r.map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]}),e.jsx("button",{onClick:()=>U("list"),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"List View"})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-6 min-h-[400px]",children:Q.length>0?e.jsx("div",{className:"grid grid-cols-6 gap-6",children:Q.map(k=>e.jsxs("div",{className:`${ae(k.seat_capacity)} ${Ce(k.status||"Free")} rounded-lg flex flex-col items-center justify-center text-white font-bold shadow-lg hover:shadow-xl transition-all duration-200 cursor-pointer relative group`,title:`Table ${k.table_no} - ${k.seat_capacity} seats - ${k.status||"Free"}`,children:[e.jsxs("span",{className:"text-xs font-bold",children:["T",k.table_no]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(sn,{size:10}),e.jsx("span",{className:"text-xs",children:k.seat_capacity})]}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-white text-xs px-1 py-0.5 rounded-full text-gray-700 font-medium shadow-sm",children:k.status||"Free"}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-10",children:["Table ",k.table_no," - ",k.seat_capacity," seats"]})]},k.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center mb-4",children:e.jsx(sn,{size:24})}),e.jsx("p",{className:"text-lg font-medium",children:"No tables found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:E?"No tables on this floor":"Add tables to see them here"})]})}),e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Available"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Occupied"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Reserved"})]})]})]})},ve=()=>e.jsxs("div",{className:"overflow-x-auto bg-white py-5 px-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Table List"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:E,onChange:ae=>z(ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primaryLight",children:[e.jsx("option",{value:"",children:"All Floors"}),r.map(ae=>e.jsx("option",{value:ae.id,children:ae.name},ae.id))]}),e.jsxs("button",{onClick:()=>U("visual"),className:"px-3 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors flex items-center gap-2",children:[e.jsx($N,{size:16}),"Visual View"]}),e.jsxs("button",{onClick:De,className:"px-4 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add New Table"]})]})]}),e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Table ID"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Table Name"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Floor"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Seats"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:Q.map((ae,Ce)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-25 transition-colors ${Ce%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:ae.id})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:ae.table_no})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ae.floor_name||"N/A"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ae.seat_capacity||4})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${$e(ae.status)}`,children:ae.status||"Free"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Te(ae),className:"text-primary hover:text-primaryDark cursor-pointer transition-colors",children:e.jsx(oa,{size:16})}),e.jsx("button",{onClick:()=>Ae(ae),className:"text-red-500 hover:text-red-700 cursor-pointer transition-colors",children:e.jsx(Pa,{size:16})})]})})]},ae.id))})]})]});return e.jsxs(e.Fragment,{children:[I==="visual"?e.jsx(xe,{}):e.jsx(ve,{}),o&&e.jsx("div",{className:"fixed inset-0 bg-[#0000008e] bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:d?"Edit Table":"Add New Table"}),e.jsx("button",{onClick:()=>{c(!1),oe()},className:"text-gray-500 hover:text-gray-700",children:e.jsx(Nt,{size:24})})]}),e.jsxs("form",{onSubmit:se,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Table Name / Number*"}),e.jsx("input",{type:"text",name:"table_no",placeholder:"e.g., T1, Booth 3",value:h.table_no,onChange:ae=>{const Ce=ae.target.value;g(pe=>({...pe,table_no:Ce}))},onFocus:ae=>P(ae,"table_no",h.table_no),onClick:ae=>ee(ae,"table_no",h.table_no),onBlur:M,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Floor*"}),e.jsxs("select",{name:"floor_id",value:h.floor_id,onChange:ne,onFocus:ae=>P(ae,"floor_id",h.floor_id),onClick:ae=>ee(ae,"floor_id",h.floor_id),onBlur:M,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",required:!0,children:[e.jsx("option",{value:"",children:"Select a floor"}),r.map(ae=>e.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seats Capacity*"}),e.jsx("input",{type:"number",name:"seat_capacity",placeholder:"e.g., 4",value:h.seat_capacity,onChange:ae=>{const Ce=ae.target.value;g(pe=>({...pe,seat_capacity:parseInt(Ce)||4}))},onFocus:ae=>P(ae,"seat_capacity",h.seat_capacity),onClick:ae=>ee(ae,"seat_capacity",h.seat_capacity),onBlur:M,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",min:"1",max:"20",required:!0})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{c(!1),oe()},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primaryLight hover:bg-primaryDark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:d?"Update Table":"Add Table"})]})]})]})})}),e.jsx(Xa,{isVisible:q,onClose:je,activeInput:O,onInputChange:ue,onInputBlur:M,inputValue:R}),y&&S&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Table"}),e.jsx("button",{onClick:()=>{w(!1),_(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 mb-4",children:"Do you want to delete this table?"})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{w(!1),_(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>Se(S.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})},c6=()=>{const[s,t]=v.useState("table");return e.jsxs("div",{className:"px-4 py-2",children:[e.jsx("div",{className:"flex items-center justify-end mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>t("floor"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="floor"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(cx,{size:16}),"Floor Management"]}),e.jsxs("button",{onClick:()=>t("table"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="table"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Kb,{size:16}),"Table Management"]})]})}),e.jsxs("div",{className:"mt-6",children:[s==="floor"&&e.jsx(o6,{}),s==="table"&&e.jsx(l6,{})]})]})},d6=()=>{const[s,t]=v.useState([]),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState(""),[h,g]=v.useState("all"),[y,w]=v.useState(!1),[S,_]=v.useState(!1),[E,z]=v.useState(null),[I,U]=v.useState(!1),[q,O]=v.useState("");v.useEffect(()=>{R()},[]);const R=async()=>{try{w(!0);const f=await window.myAPI.getAllVouchers();if(f.success){const x=f.data.map(N=>({id:N.id,title:N.title||"",name:N.name||"",phoneNo:N.phone_no||"",email:N.email||"",startDate:N.start_date?N.start_date.split("T")[0]:"",endDate:N.end_date?N.end_date.split("T")[0]:"",amount:N.amount||0,voucherCode:N.voucher_code||"",event:N.event||"",status:N.status===1?"active":"inactive"}));t(x)}else console.error("Failed to load voucher:",f.message)}catch(f){console.error("Error loading voucher:",f)}finally{w(!1)}},[M,P]=v.useState({title:"",name:"",phoneNo:"",email:"",startDate:"",endDate:"",amount:"",voucherCode:"",event:""}),[ee,oe]=v.useState({}),[je,de]=v.useState(""),re=()=>{const f=Date.now().toString(36),x=Math.random().toString(36).substring(2,8);return`VOUCHER-${f}-${x}`.toUpperCase()},Te=f=>{O(f),U(!0)},De=f=>{f.relatedTarget&&f.relatedTarget.closest(".hg-theme-default")||f.target&&f.target.closest(".hg-theme-default")||setTimeout(()=>{U(!1),O("")},300)},ne=(f,x)=>{Te(x)},ue=(f,x)=>{(!I||q!==x)&&Te(x)},se=(f,x,N)=>{if(x==="phoneNo"){const C=f.replace(/\D/g,"");if(C.length>10||C.length>0&&C.length>=2&&!C.startsWith("08"))return;P(A=>({...A,[x]:C})),je&&de("");return}if(x==="searchTerm"?m(f):x&&P(C=>({...C,[x]:f})),N==="enter"){const C=["title","name","phoneNo","email","startDate","endDate","amount","event"],A=C.indexOf(x);if(A<C.length-1){const H=C[A+1],V=document.querySelector(`[name="${H}"]`);V&&V.focus()}}},Ae=()=>{U(!1),O("")},Se=f=>{const{name:x,value:N}=f.target;if(x==="phoneNo"){const C=N.replace(/\D/g,"");if(C.length>10||C.length>0&&C.length>=2&&!C.startsWith("08"))return;P(A=>({...A,[x]:C})),je&&de("");return}P(C=>({...C,[x]:N})),ee[x]&&oe(C=>({...C,[x]:""}))},$e=()=>{const f={};return!M.phoneNo||M.phoneNo.length!==10||!M.phoneNo.startsWith("08")?(de("Phone number must be 10 digits and start with 08"),!1):(M.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M.email)&&(f.email="Please enter a valid email address"),M.startDate&&M.endDate&&M.startDate>M.endDate&&(f.endDate="End date must be after start date"),M.amount&&parseFloat(M.amount)<=0&&(f.amount="Amount must be greater than 0"),oe(f),Object.keys(f).length===0)},Q=async f=>{if(f.preventDefault(),!!$e())try{if(w(!0),o){const x={title:M.title,name:M.name,phone_no:M.phoneNo,email:M.email||null,start_date:M.startDate,end_date:M.endDate,amount:parseFloat(M.amount),voucher_code:M.voucherCode,event:M.event||null},N=await window.myAPI.updateVoucher(o.id,x);N.success?(await R(),n(!1),c(null)):console.error("Failed to update voucher:",N.message)}else{const x={title:M.title,name:M.name,phone_no:M.phoneNo,email:M.email||null,start_date:M.startDate,end_date:M.endDate,amount:parseFloat(M.amount),voucher_code:M.voucherCode,event:M.event||null,added_by:1},N=await window.myAPI.createVoucher(x);N.success?(await R(),n(!1)):console.error("Failed to create voucher:",N.message)}}catch(x){console.error("Error saving voucher:",x)}finally{w(!1)}},xe=f=>{c(f),P({title:f.title||"",name:f.name,phoneNo:f.phoneNo,email:f.email,startDate:f.startDate,endDate:f.endDate,amount:f.amount.toString(),voucherCode:f.voucherCode,event:f.event||""}),oe({}),de(""),O(""),U(!1),n(!0)},ve=f=>{z(f),_(!0)},ae=async f=>{try{w(!0);const x=await window.myAPI.deleteVoucher(f);x.success?(await R(),_(!1),z(null)):(console.error("Failed to delete voucher:",x.message),alert("Error deleting voucher: "+x.message))}catch(x){console.error("Error deleting voucher:",x),alert("Error deleting voucher")}finally{w(!1)}},Ce=()=>{const f=re();P({title:"",name:"",phoneNo:"",email:"",startDate:"",endDate:"",amount:"",voucherCode:f,event:""}),oe({}),de(""),O(""),U(!1)},pe=()=>{c(null);const f=re();P({title:"",name:"",phoneNo:"",email:"",startDate:"",endDate:"",amount:"",voucherCode:f,event:""}),oe({}),de(""),O(""),U(!1),n(!0)},k=async f=>{try{const N=s.find(A=>A.id===f).status==="active"?0:1,C=await window.myAPI.updateVoucher(f,{status:N});C.success?await R():console.error("Failed to toggle status:",C.message)}catch(x){console.error("Error toggling status:",x)}},L=()=>{let f=s;return d&&(f=f.filter(x=>x.voucherCode.toLowerCase().includes(d.toLowerCase())||x.title.toLowerCase().includes(d.toLowerCase())||x.name.toLowerCase().includes(d.toLowerCase())||x.phoneNo.toLowerCase().includes(d.toLowerCase()))),h!=="all"&&(f=f.filter(x=>x.status===h)),f};return e.jsxs("div",{className:"space-y-6",children:[r&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-primary",children:o?"Edit Voucher":"Add New Voucher"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>{n(!1),c(null),Ce(),U(!1)},className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100",children:e.jsx(Nt,{size:20})})})]}),e.jsxs("form",{onSubmit:Q,children:[e.jsxs("div",{className:"grid grid-cols-3 gap-5 mb-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"title",value:M.title,onChange:Se,onFocus:f=>ne(f,"title"),onClick:f=>ue(f,"title"),onBlur:De,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${ee.title?"border-red-500":"border-gray-300"}`,placeholder:"Enter voucher title"}),ee.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:ee.title})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:M.name,onChange:Se,onFocus:f=>ne(f,"name"),onClick:f=>ue(f,"name"),onBlur:De,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${ee.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter name"}),ee.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:ee.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})," ",e.jsx("span",{className:"text-xs text-gray-500",children:"(Must start with 08 and be 10 digits)"})]}),e.jsx("input",{type:"text",name:"phoneNo",value:M.phoneNo,onChange:Se,onFocus:f=>ne(f,"phoneNo"),onClick:f=>ue(f,"phoneNo"),onBlur:De,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${je?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-primary"}`,placeholder:"08xxxxxxxx",maxLength:"10",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:M.phoneNo.length>0&&e.jsxs("span",{className:M.phoneNo.length===10&&M.phoneNo.startsWith("08")?"text-green-600":"text-red-500",children:[M.phoneNo.length,"/10 digits"]})}),je&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:je})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-5 mb-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Email (Optional)"}),e.jsx("input",{type:"email",name:"email",value:M.email,onChange:Se,onFocus:f=>ne(f,"email"),onClick:f=>ue(f,"email"),onBlur:De,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${ee.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),ee.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:ee.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"startDate",value:M.startDate,onChange:Se,onFocus:f=>ne(f,"startDate"),onClick:f=>ue(f,"startDate"),onBlur:De,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${ee.startDate?"border-red-500":"border-gray-300"}`}),ee.startDate&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:ee.startDate})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["End Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"endDate",value:M.endDate,onChange:Se,onFocus:f=>ne(f,"endDate"),onClick:f=>ue(f,"endDate"),onBlur:De,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${ee.endDate?"border-red-500":"border-gray-300"}`}),ee.endDate&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:ee.endDate})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 mb-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"amount",value:M.amount,onChange:Se,onFocus:f=>ne(f,"amount"),onClick:f=>ue(f,"amount"),onBlur:De,min:"0",step:"0.01",className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${ee.amount?"border-red-500":"border-gray-300"}`,placeholder:"Enter amount"}),ee.amount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:ee.amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Voucher Code"}),e.jsx("input",{type:"text",name:"voucherCode",value:M.voucherCode,onChange:Se,onFocus:f=>ne(f,"voucherCode"),onClick:f=>ue(f,"voucherCode"),onBlur:De,className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm bg-gray-50",placeholder:"Auto generated code",readOnly:!o}),!o&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Code will be auto-generated"})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Event Description"}),e.jsx("textarea",{name:"event",value:M.event,onChange:Se,onFocus:f=>ne(f,"event"),onClick:f=>ue(f,"event"),onBlur:De,rows:"3",className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Enter event description or additional notes"})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:Ce,className:"px-6 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary",children:"Reset"}),e.jsx("button",{type:"submit",disabled:y,className:`px-6 py-2 bg-primary text-white font-medium rounded-lg \r
                shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
                active:shadow-none active:translate-y-[4px] transition-all disabled:opacity-50 disabled:cursor-not-allowed`,children:y?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):o?"Update Voucher":"Submit"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🏷️"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Voucher List"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:pe,className:`px-3 py-2 bg-primary text-white text-sm font-medium rounded-lg flex items-center gap-2 \r
              shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
              active:shadow-none active:translate-y-[4px] transition-all`,children:[e.jsx(Ls,{size:16}),"Add New Voucher"]})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex justify-end items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search voucher...",value:d,onChange:f=>m(f.target.value),onFocus:f=>ne(f,"searchTerm"),onClick:f=>ue(f,"searchTerm"),onBlur:De,className:"w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("select",{value:h,onChange:f=>g(f.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"overflow-x-auto",children:[y&&e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading voucher..."})]}),!y&&e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Phone Number"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Voucher Code"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Start Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"End Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Event"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:L().map((f,x)=>e.jsxs("tr",{className:`border-b border-gray-100 ${x%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:x+1})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:f.title})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:f.name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:f.phoneNo})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:f.email||"-"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"font-mono font-medium text-primary",children:f.voucherCode})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["€",f.amount]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:f.startDate?new Date(f.startDate).toLocaleDateString():"-"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:f.endDate?new Date(f.endDate).toLocaleDateString():"-"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600 max-w-xs truncate",title:f.event,children:f.event||"-"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.status==="active",onChange:()=>k(f.id),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${f.status==="active"?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${f.status==="active"?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>xe(f),className:"text-primary hover:text-primary-dark transition-colors p-1 rounded hover:bg-blue-50",children:e.jsx(oa,{size:16})}),e.jsx("button",{onClick:()=>ve(f),className:"text-red-600 hover:text-red-800 transition-colors p-1 rounded hover:bg-red-50",children:e.jsx(Pa,{size:16})})]})})]},f.id))})]})]}),!y&&L().length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Hh,{size:48,className:"mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No voucher found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Create your first voucher to get started"})]})]}),S&&E&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Voucher"}),e.jsx("button",{onClick:()=>{_(!1),z(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete this voucher? This action cannot be undone."}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Title: ",e.jsx("strong",{children:E.title})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Name: ",e.jsx("strong",{children:E.name})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Voucher Code: ",e.jsx("strong",{children:E.voucherCode})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Amount: ",e.jsxs("strong",{children:["€",E.amount]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{_(!1),z(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>ae(E.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(Xa,{isVisible:I,onClose:Ae,activeInput:q,onInputChange:se,onInputBlur:De,inputValue:q==="searchTerm"?d:M[q]||"",placeholder:"Type here..."})]})},u6=()=>{const[s,t]=v.useState([]),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState(""),[h,g]=v.useState("all"),[y,w]=v.useState(!1),[S,_]=v.useState(!1),[E,z]=v.useState(null),[I,U]=v.useState(!1),[q,O]=v.useState("");v.useEffect(()=>{R()},[]);const R=async()=>{try{w(!0);const pe=await window.myAPI.getAllCoupons();if(pe.success){const k=pe.data.map(L=>({id:L.id,title:L.title,customerType:L.type||"All Customers",code:L.code,limitForSameUser:L.usage_limit||0,startDate:L.start_date?L.start_date.split("T")[0]:"",expireDate:L.end_date?L.end_date.split("T")[0]:"",discountType:L.discount_type||"percentage",discount:L.amount||0,maxDiscount:L.max_discount||0,minPurchase:L.min_purchase||0,totalUsers:0,status:L.status===1?"active":"inactive"}));t(k)}else console.error("Failed to load coupons:",pe.message)}catch(pe){console.error("Error loading coupons:",pe)}finally{w(!1)}},[M,P]=v.useState({title:"",customerType:"",code:"",limitForSameUser:"",startDate:"",expireDate:"",discountType:"percentage",discount:"",maxDiscount:"",minPurchase:""}),[ee,oe]=v.useState({}),je=pe=>{O(pe),U(!0)},de=pe=>{pe.relatedTarget&&pe.relatedTarget.closest(".hg-theme-default")||pe.target&&pe.target.closest(".hg-theme-default")||setTimeout(()=>{U(!1),O("")},300)},re=(pe,k)=>{je(k)},Te=(pe,k)=>{(!I||q!==k)&&je(k)},De=(pe,k,L)=>{if(k==="searchTerm"?m(pe):k&&P(f=>({...f,[k]:pe})),L==="enter"){const f=["title","customerType","code","limitForSameUser","startDate","expireDate","discount","maxDiscount","minPurchase"],x=f.indexOf(k);if(x<f.length-1){const N=f[x+1],C=document.querySelector(`[name="${N}"]`);C&&C.focus()}}},ne=()=>{U(!1),O("")},ue=pe=>{const{name:k,value:L}=pe.target;P(f=>({...f,[k]:L})),ee[k]&&oe(f=>({...f,[k]:""}))},se=()=>{const pe={};return M.title.trim()||(pe.title="Title is required"),M.customerType.trim()||(pe.customerType="Customer type is required"),M.code.trim()||(pe.code="Code is required"),M.startDate||(pe.startDate="Start date is required"),M.expireDate||(pe.expireDate="Expire date is required"),(!M.discount||M.discount<=0)&&(pe.discount="Discount must be greater than 0"),M.discountType==="percentage"&&M.discount>100&&(pe.discount="Percentage discount cannot exceed 100%"),M.minPurchase&&M.minPurchase<0&&(pe.minPurchase="Minimum purchase cannot be negative"),M.maxDiscount&&M.maxDiscount<0&&(pe.maxDiscount="Maximum discount cannot be negative"),oe(pe),Object.keys(pe).length===0},Ae=async pe=>{if(pe.preventDefault(),!!se())try{if(w(!0),o){const k={title:M.title,type:M.customerType,code:M.code,usage_limit:parseInt(M.limitForSameUser)||0,start_date:M.startDate,end_date:M.expireDate,discount_type:M.discountType,amount:parseFloat(M.discount),max_discount:parseFloat(M.maxDiscount)||0,min_purchase:parseFloat(M.minPurchase)||0},L=await window.myAPI.updateCoupon(o.id,k);L.success?(await R(),n(!1),c(null)):console.error("Failed to update coupon:",L.message)}else{const k={title:M.title,type:M.customerType,code:M.code,usage_limit:parseInt(M.limitForSameUser)||0,start_date:M.startDate,end_date:M.expireDate,discount_type:M.discountType,amount:parseFloat(M.discount),max_discount:parseFloat(M.maxDiscount)||0,min_purchase:parseFloat(M.minPurchase)||0,added_by:1},L=await window.myAPI.createCoupon(k);L.success?(await R(),n(!1)):console.error("Failed to create coupon:",L.message)}}catch(k){console.error("Error saving coupon:",k)}finally{w(!1)}},Se=pe=>{c(pe),P({title:pe.title,customerType:pe.customerType,code:pe.code,limitForSameUser:pe.limitForSameUser.toString(),startDate:pe.startDate,expireDate:pe.expireDate,discountType:pe.discountType,discount:pe.discount.toString(),maxDiscount:pe.maxDiscount.toString(),minPurchase:pe.minPurchase.toString()}),O(""),U(!1),n(!0)},$e=pe=>{z(pe),_(!0)},Q=async pe=>{try{w(!0);const k=await window.myAPI.deleteCoupon(pe);k.success?(await R(),_(!1),z(null)):(console.error("Failed to delete coupon:",k.message),alert("Error deleting coupon: "+k.message))}catch(k){console.error("Error deleting coupon:",k),alert("Error deleting coupon")}finally{w(!1)}},xe=()=>{P({title:"",customerType:"",code:"",limitForSameUser:"",startDate:"",expireDate:"",discountType:"percentage",discount:"",maxDiscount:"",minPurchase:""}),oe({}),O(""),U(!1)},ve=()=>{c(null),P({title:"",customerType:"",code:"",limitForSameUser:"",startDate:"",expireDate:"",discountType:"percentage",discount:"",maxDiscount:"",minPurchase:""}),oe({}),O(""),U(!1),n(!0)},ae=async pe=>{try{const L=s.find(x=>x.id===pe).status==="active"?0:1,f=await window.myAPI.updateCoupon(pe,{status:L});f.success?await R():console.error("Failed to toggle status:",f.message)}catch(k){console.error("Error toggling status:",k)}},Ce=()=>{let pe=s;return d&&(pe=pe.filter(k=>k.code.toLowerCase().includes(d.toLowerCase())||k.title.toLowerCase().includes(d.toLowerCase()))),h!=="all"&&(pe=pe.filter(k=>k.status===h)),pe};return e.jsxs("div",{className:"space-y-6",children:[r&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-primary",children:o?"Edit Coupon":"Add New Coupon"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>{n(!1),c(null),xe(),U(!1)},className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100",children:e.jsx(Nt,{size:20})})})]}),e.jsxs("form",{onSubmit:Ae,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-5 mb-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"title",value:M.title,onChange:ue,onFocus:pe=>re(pe,"title"),onClick:pe=>Te(pe,"title"),onBlur:de,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${ee.title?"border-red-500":"border-gray-300"}`,placeholder:"New Coupon",required:!0}),ee.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:ee.title})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Select Customer ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"customerType",value:M.customerType,onChange:ue,onFocus:pe=>re(pe,"customerType"),onClick:pe=>Te(pe,"customerType"),onBlur:de,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${ee.customerType?"border-red-500":"border-gray-300"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Customer"}),e.jsx("option",{value:"All Customers",children:"All Customers"}),e.jsx("option",{value:"New Customers",children:"New Customers"}),e.jsx("option",{value:"Loyal Customers",children:"Loyal Customers"}),e.jsx("option",{value:"VIP Customer",children:"VIP Customer"}),e.jsx("option",{value:"Delivery Only",children:"Delivery Only"}),e.jsx("option",{value:"Collection Only",children:"Collection Only"})]}),ee.customerType&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:ee.customerType})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"code",value:M.code,onChange:ue,onFocus:pe=>re(pe,"code"),onClick:pe=>Te(pe,"code"),onBlur:de,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${ee.code?"border-red-500":"border-gray-300"}`,placeholder:"e.g., SAVE20",required:!0}),ee.code&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:ee.code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Limit for same user"}),e.jsx("input",{type:"number",name:"limitForSameUser",value:M.limitForSameUser,onChange:ue,onFocus:pe=>re(pe,"limitForSameUser"),onClick:pe=>Te(pe,"limitForSameUser"),onBlur:de,min:"1",className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Ex:10"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"startDate",value:M.startDate,onChange:ue,onFocus:pe=>re(pe,"startDate"),onClick:pe=>Te(pe,"startDate"),onBlur:de,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${ee.startDate?"border-red-500":"border-gray-300"}`,required:!0}),ee.startDate&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:ee.startDate})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Expire Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"expireDate",value:M.expireDate,onChange:ue,onFocus:pe=>re(pe,"expireDate"),onClick:pe=>Te(pe,"expireDate"),onBlur:de,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${ee.expireDate?"border-red-500":"border-gray-300"}`,required:!0}),ee.expireDate&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:ee.expireDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Discount Type"}),e.jsxs("select",{name:"discountType",value:M.discountType,onChange:ue,onFocus:pe=>re(pe,"discountType"),onClick:pe=>Te(pe,"discountType"),onBlur:de,className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",children:[e.jsx("option",{value:"percentage",children:"Percentage (%)"}),e.jsx("option",{value:"fixed",children:"Fixed Amount (€)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Discount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"discount",value:M.discount,onChange:ue,onFocus:pe=>re(pe,"discount"),onClick:pe=>Te(pe,"discount"),onBlur:de,min:"0",step:"0.01",className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${ee.discount?"border-red-500":"border-gray-300"}`,placeholder:M.discountType==="percentage"?"20":"10",required:!0}),ee.discount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:ee.discount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Max Discount"}),e.jsx("input",{type:"number",name:"maxDiscount",value:M.maxDiscount,onChange:ue,onFocus:pe=>re(pe,"maxDiscount"),onClick:pe=>Te(pe,"maxDiscount"),onBlur:de,min:"0",step:"0.01",className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"0 (no limit)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Min Purchase"}),e.jsx("input",{type:"number",name:"minPurchase",value:M.minPurchase,onChange:ue,onFocus:pe=>re(pe,"minPurchase"),onClick:pe=>Te(pe,"minPurchase"),onBlur:de,min:"0",step:"0.01",className:"w-full px-2.5 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"0"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:xe,className:"px-6 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary",children:"Reset"}),e.jsx("button",{type:"submit",disabled:y,className:`px-6 py-2 bg-primary text-white font-medium rounded-lg \r
                shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
                active:shadow-none active:translate-y-[4px] transition-all disabled:opacity-50 disabled:cursor-not-allowed`,children:y?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):o?"Update Coupon":"Submit"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🏷️"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Coupon List"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:ve,className:`px-3 py-2 bg-primary text-white text-sm font-medium rounded-lg flex items-center gap-2 \r
              shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
              active:shadow-none active:translate-y-[4px] transition-all`,children:[e.jsx(Ls,{size:16}),"Add New Coupon"]})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex justify-end items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search coupons...",value:d,onChange:pe=>m(pe.target.value),onFocus:pe=>re(pe,"searchTerm"),onClick:pe=>Te(pe,"searchTerm"),onBlur:de,className:"w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("select",{value:h,onChange:pe=>g(pe.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"overflow-x-auto",children:[y&&e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading coupons..."})]}),!y&&e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Total Users"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Min Purchase"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Max Discount"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Discount"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Discount Type"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Start Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Expire Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Customer Type"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:Ce().map((pe,k)=>e.jsxs("tr",{className:`border-b border-gray-100 ${k%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:k+1})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:pe.title})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"font-mono font-medium text-primary",children:pe.code})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:pe.discountType})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:pe.totalUsers})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["€",pe.minPurchase]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["€",pe.maxDiscount]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:pe.discountType==="percentage"?`${pe.discount}%`:`€${pe.discount}`})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:pe.discountType})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:new Date(pe.startDate).toLocaleDateString()})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:new Date(pe.expireDate).toLocaleDateString()})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:pe.customerType})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:pe.status==="active",onChange:()=>ae(pe.id),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${pe.status==="active"?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${pe.status==="active"?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Se(pe),className:"text-primary hover:text-primary-dark transition-colors p-1 rounded hover:bg-blue-50",children:e.jsx(oa,{size:16})}),e.jsx("button",{onClick:()=>$e(pe),className:"text-red-600 hover:text-red-800 transition-colors p-1 rounded hover:bg-red-50",children:e.jsx(Pa,{size:16})})]})})]},pe.id))})]})]}),!y&&Ce().length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Hh,{size:48,className:"mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No coupons found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Create your first coupon to get started"})]})]}),S&&E&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Coupon"}),e.jsx("button",{onClick:()=>{_(!1),z(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete this coupon? This action cannot be undone."}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Coupon: ",e.jsx("strong",{children:E.title})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Code: ",e.jsx("strong",{children:E.code})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Discount: ",e.jsx("strong",{children:E.discountType==="percentage"?`${E.discount}%`:`€${E.discount}`})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{_(!1),z(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>Q(E.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(Xa,{isVisible:I,onClose:ne,activeInput:q,onInputChange:De,onInputBlur:de,inputValue:q==="searchTerm"?d:M[q]||"",placeholder:"Type here..."})]})},m6=()=>{const[s,t]=v.useState("coupon");return e.jsxs("div",{className:"px-4 py-2",children:[e.jsx("div",{className:"flex items-center justify-end mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>t("voucher"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="voucher"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(cx,{size:16}),"Voucher Management"]}),e.jsxs("button",{onClick:()=>t("coupon"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="coupon"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Kb,{size:16}),"Coupon Management"]})]})}),e.jsxs("div",{className:"mt-6",children:[s==="voucher"&&e.jsx(d6,{}),s==="coupon"&&e.jsx(u6,{})]})]})},h6=()=>{const[s,t]=v.useState(""),[r,n]=v.useState(""),[o,c]=v.useState(""),[d,m]=v.useState(""),[h,g]=v.useState(""),[y,w]=v.useState([]),[S,_]=v.useState([]),[E,z]=v.useState(""),[I,U]=v.useState(1),[q,O]=v.useState(10),[R,M]=v.useState(0),[P,ee]=v.useState(!1),[oe,je]=v.useState([]),[de,re]=v.useState(!1),[Te,De]=v.useState(null),[ne,ue]=v.useState(!1),[se,Ae]=v.useState(""),Se=[{value:"loyal_customers",label:"Loyal Customers"},{value:"impulse_customers",label:"Impulse Customers"},{value:"discount_customer",label:"Discount Customers"}],$e=[10,20,30,50,100],Q=async(Y=1,T=q,G="")=>{ee(!0);try{const ce=(Y-1)*T;let ie;G.trim()?ie=await window.electronAPI.invoke("customer:searchWithOrderStats",G,1,T,ce):ie=await window.electronAPI.invoke("customer:getWithOrderStats",1,T,ce),ie.success?(w(ie.data),_(ie.data)):(console.error("Failed to load customers:",ie.message),w([]),_([]))}catch(ce){console.error("Error loading customers:",ce),w([]),_([])}finally{ee(!1)}},xe=async()=>{try{const Y=await window.electronAPI.invoke("customer:getCount",1);Y.success&&M(Y.count)}catch(Y){console.error("Error loading customer count:",Y)}},ve=async Y=>{try{const T=await window.electronAPI.invoke("customer:getOrders",Y,50,0);T.success?je(T.data):(console.error("Failed to load customer orders:",T.message),je([]))}catch(T){console.error("Error loading customer orders:",T),je([])}};v.useEffect(()=>{Q(),xe()},[]),v.useEffect(()=>{const Y=setTimeout(()=>{E!==""?Q(1,q,E):Q(1,q),U(1)},500);return()=>clearTimeout(Y)},[E,q]),v.useEffect(()=>{Q(I,q,E)},[I,q]);const ae=Math.ceil(R/q),Ce=(I-1)*q+1,pe=Math.min(I*q,R),k=Y=>new Date(Y).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),L=Y=>{U(Y)},f=async Y=>{try{const T=y.find(G=>G.id===Y);if(T){const G=await window.electronAPI.invoke("customer:update",Y,{isloyal:!T.isloyal});G.success?Q(I,q,E):console.error("Failed to update customer status:",G.message)}}catch(T){console.error("Error updating customer status:",T)}},x=async Y=>{console.log("Opening modal for customer:",Y),De(Y),re(!0),await ve(Y.id)},N=()=>{re(!1),De(null)},C=Y=>{Ae(Y),ue(!0)},A=Y=>{Y.relatedTarget&&Y.relatedTarget.closest(".hg-theme-default")||setTimeout(()=>{ue(!1),Ae("")},300)},H=(Y,T)=>{C(T)},V=(Y,T)=>{(!ne||se!==T)&&C(T)},F=(Y,T)=>{T==="chooseFirst"&&g(Y)},B=()=>{ue(!1),Ae("")},J=Y=>{const T=Y.target.value.replace(/\D/g,"");g(T)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center gap-3 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sn,{size:24,className:"text-primary"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Customers"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 ",children:"Start Date"}),e.jsx("input",{type:"date",value:s,onChange:Y=>t(Y.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 ",children:"End Date"}),e.jsx("input",{type:"date",value:r,onChange:Y=>n(Y.target.value)})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Joining Date"}),e.jsx("input",{type:"date",value:o,onChange:Y=>c(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:d,onChange:Y=>m(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm appearance-none cursor-pointer",children:[e.jsx("option",{value:"",children:"Select Customer Sorting Order"}),Se.map(Y=>e.jsx("option",{value:Y.value,children:Y.label},Y.value))]}),e.jsx(hs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose First"}),e.jsx("input",{type:"text",name:"chooseFirst",placeholder:"Ex : 100",value:h,onChange:J,onFocus:()=>H(null,"chooseFirst"),onBlur:A,onClick:()=>V(null,"chooseFirst"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Customer list"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",R," customers)"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Show:"}),e.jsx("select",{value:q,onChange:Y=>{O(parseInt(Y.target.value)),U(1)},className:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:$e.map(Y=>e.jsx("option",{value:Y,children:Y},Y))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Ex: Search by name",value:E,onChange:Y=>z(Y.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm w-64"}),e.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16})]}),e.jsxs("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2 text-sm",children:[e.jsx(qb,{size:16}),"Export",e.jsx(hs,{size:14})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"SI"}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Name",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Contact Information",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Total Order",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Total Order Amount",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Joining Date",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Loyal"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Actions"})]})}),e.jsx("tbody",{children:P?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:"Loading customers..."})}):y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:"No customers found"})}):y.map((Y,T)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:Ce+T}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:Y.name})})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-gray-800",children:Y.email}),e.jsx("div",{className:"text-gray-500",children:Y.phone})]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:Y.totalOrders}),e.jsxs("td",{className:"py-3 px-4 text-sm font-medium text-gray-800",children:[parseFloat(Y.totalAmount||0).toFixed(2)," €"]}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:k(Y.joiningDate)}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>f(Y.id),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${Y.isloyal?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${Y.isloyal?"translate-x-6":"translate-x-1"}`})})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>x(Y),className:"p-1 text-gray-400 hover:text-primary transition-colors",children:e.jsx(vn,{size:16})})})]},Y.id))})]})}),ae>1&&e.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",Ce," to ",pe," of ",R," customers"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>L(I-1),disabled:I===1,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Tu,{size:16})}),Array.from({length:ae},(Y,T)=>T+1).map(Y=>e.jsx("button",{onClick:()=>L(Y),className:`px-3 py-2 text-sm rounded-lg transition-colors ${I===Y?"bg-primary text-white":"border border-gray-300 hover:bg-gray-50"}`,children:Y},Y)),e.jsx("button",{onClick:()=>L(I+1),disabled:I===ae,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx($b,{size:16})})]})]})]}),de&&Te&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Customer Details"}),e.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Nt,{size:20})})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 p-6 border-r border-gray-200 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Order List"}),e.jsx("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full",children:Te.totalOrders})]})}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"sticky top-0 bg-white",children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Sl",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Order Id",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Status",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Total Amount",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Action"})]})}),e.jsx("tbody",{children:oe.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"py-8 text-center text-gray-500",children:"No orders found for this customer"})}):oe.map((Y,T)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:T+1}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-primary font-medium cursor-pointer hover:underline",children:Y.order_number||Y.id})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Y.order_status==="confirmed"?"bg-green-100 text-green-800":Y.order_status==="pending"?"bg-yellow-100 text-yellow-800":Y.order_status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:Y.order_status||"Confirmed"})}),e.jsxs("td",{className:"py-3 px-4 text-sm font-medium text-gray-800",children:[parseFloat(Y.order_amount||0).toFixed(2)," €"]}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"p-1 bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors",children:e.jsx(vn,{size:14})}),e.jsx("button",{className:"p-1 bg-primary text-white rounded hover:bg-primary/90 transition-colors",children:e.jsx(pu,{size:14})})]})})]},Y.id))})]})})]}),e.jsxs("div",{className:"w-80 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(sn,{size:20,className:"text-primary"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:Te.name})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center border-2 border-gray-200",children:e.jsx("span",{className:"text-gray-400 text-2xl",children:"📷"})})}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Wb,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-800",children:Te.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dx,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-800",children:Te.phone})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yu,{size:16,className:"text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-800",children:[Te.totalOrders," Orders"]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:"Contact info"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Hg,{size:16,className:"text-gray-400 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-800",children:Te.address||"No address available"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Hg,{size:16,className:"text-gray-400 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-800",children:Te.address||"No address available"})]})]})]})]})]})]})}),e.jsx(Xa,{isVisible:ne,onClose:B,activeInput:se,onInputChange:F,onInputBlur:A,inputValue:h||"",placeholder:"Type here..."})]})},f6=[{icon:e.jsx(Ni,{size:18,className:"text-primary"}),label:"Menu",path:"/dashboard/food-management"},{icon:e.jsx(mx,{size:18,className:"text-primary"}),label:"Tables",path:"/dashboard/table-management"},{icon:e.jsx(sn,{size:18,className:"text-primary"}),label:"Employee",path:"/dashboard/employee-management"},{icon:e.jsx(mN,{size:18,className:"text-primary"}),label:"Stock Management",path:"/dashboard/food-management"}],g6=[{icon:e.jsx(Gb,{size:18,className:"text-yellow-500"}),label:"Change Password",path:"/dashboard/change-password"},{icon:e.jsx(bl,{size:18,className:"text-sky-500"}),label:"Application Settings",path:"/dashboard/application-settings"},{icon:e.jsx(vl,{size:18,className:"text-amber-600"}),label:"Security Settings"}];function x6(){const s=ya(),t=r=>{s(r)};return e.jsxs("div",{className:"mt-10 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"mb-2 text-center",children:[e.jsx("h2",{className:"text-3xl font-semibold text-primary mb-1",children:"Menu Panel"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Navigation and system access"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[e.jsxs("div",{className:"w-[300px] relative overflow-hidden",style:{background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)",borderRadius:"24px",padding:"32px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.08), 0 8px 16px rgba(0, 0, 0, 0.04), inset 0 1px 0 rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 rounded-t-lg ",style:{background:"linear-gradient(to right, var(--color-primary), var(--color-primaryLight))"}}),e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Hb,{size:22,className:"text-primary mr-2"}),e.jsx("span",{className:"font-bold text-primary text-lg",children:"Administration"})]}),e.jsx("div",{className:"flex flex-col gap-2",children:f6.map(r=>e.jsxs("button",{onClick:()=>t(r.path),className:"flex items-center gap-3 p-3 rounded-lg bg-[#f6fafd] hover:bg-cyan-50 transition border border-transparent focus:outline-none cursor-pointer",style:{boxShadow:"0 1px 2px 0 rgba(0,0,0,0.01)"},children:[r.icon,e.jsx("span",{className:"text-gray-700 font-medium",children:r.label})]},r.label))})]}),e.jsxs("div",{className:"w-[300px] relative overflow-hidden",style:{background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)",borderRadius:"24px",padding:"32px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.08), 0 8px 16px rgba(0, 0, 0, 0.04), inset 0 1px 0 rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 rounded-t-lg",style:{background:"linear-gradient(to right, var(--color-primary), var(--color-primaryLight))"}}),e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(K1,{size:22,className:"text-primary mr-2"}),e.jsx("span",{className:"font-bold text-primary text-lg",children:"Settings & Security"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[g6.map(r=>e.jsxs("button",{onClick:()=>r.path&&t(r.path),className:"flex items-center gap-3 p-3 rounded-lg bg-[#f6fafd] hover:bg-cyan-50 transition border border-transparent focus:outline-none cursor-pointer",style:{boxShadow:"0 1px 2px 0 rgba(0,0,0,0.01)"},children:[r.icon,e.jsx("span",{className:"text-gray-700 font-medium",children:r.label})]},r.label)),e.jsxs("button",{className:"flex items-center gap-3 p-3 rounded-lg bg-red-50 hover:bg-red-100 transition border border-red-200 focus:outline-none mt-1",style:{boxShadow:"0 1px 2px 0 rgba(0,0,0,0.01)"},children:[e.jsx(Uh,{size:18,className:"text-red-500"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Logout"})]})]})]})]})]})}const p6=()=>{const s=ya(),[t,r]=v.useState("finance"),[n,o]=v.useState(!1),c=v.useRef(null),{alertState:d,showSuccess:m,showError:h,hideAlert:g}=Yh(),[y,w]=v.useState({defaultTheme:"Blue Theme",selectKeyboard:"System Keyboard",selectOrderBell:"Bell 1",autoSaveInterval:"5",soundAlert:!1,notifications:!0}),[S,_]=v.useState({currency:"Euro (€)",currencySymbolPosition:"Right (123€)",digitAfterDecimalPoint:"2",taxRate:"23",standardTax:"23",foodTax:"0",deliveryTax:"0",serviceTax:"0",timeZone:"Ireland Dublin",timeFormat:"12 hour"}),[E,z]=v.useState({minimumOrderAmount:"10.00",orderPlaceSetting:"Both",deliveryMinTime:"25",deliveryMaxTime:"45",deliveryUnit:"Minute",dineInTime:"0",dineInUnit:"Minutes",dineInOrders:!0,inStoreOrders:!0,takeawayOrders:!0,deliveryOrders:!0,cashierCanCancelOrder:"No"}),[I,U]=v.useState({freeDeliveryIn:"5",deliveryFeePerKm:"2.50",maximumDeliveryRange:"15",minimumDeliveryOrderAmount:"20.00"}),q=T=>{ee({businessName:T?.business_name||"Restaurant Name",phoneNumber:T?.phone_number||"",country:T?.country||"Ireland",description:T?.description||"Welcome to our restaurant! We serve delicious food with excellent service in a warm and welcoming atmosphere.",logoFile:null,logoPreview:T?.logo_file?`local-file://${T.logo_file}`:T?.logo_preview||"",address:T?.address||"123 Main Street, Dublin, Ireland",latitude:T?.latitude!=null?String(T.latitude):"53.3498",longitude:T?.longitude!=null?String(T.longitude):"-6.2603"}),_({currency:T?.currency||"Euro (€)",currencySymbolPosition:T?.currency_symbol_position||"Right (123€)",digitAfterDecimalPoint:T?.digit_after_decimal_point!=null?String(T.digit_after_decimal_point):"2",taxRate:T?.tax_rate!=null?String(T.tax_rate):"23",standardTax:T?.standard_tax!=null?String(T.standard_tax):"23",foodTax:T?.food_tax!=null?String(T.food_tax):"0",deliveryTax:T?.delivery_tax!=null?String(T.delivery_tax):"0",serviceTax:T?.service_tax!=null?String(T.service_tax):"0",timeZone:T?.time_zone||"Ireland Dublin",timeFormat:T?.time_format||"12 hour"}),z({minimumOrderAmount:T?.minimum_order_amount!=null?String(T.minimum_order_amount):"10.00",orderPlaceSetting:T?.order_place_setting||"Both",deliveryMinTime:T?.delivery_min_time!=null?String(T.delivery_min_time):"25",deliveryMaxTime:T?.delivery_max_time!=null?String(T.delivery_max_time):"45",deliveryUnit:T?.delivery_unit||"Minute",dineInTime:T?.dine_in_time!=null?String(T.dine_in_time):"0",dineInUnit:T?.dine_in_unit||"Minutes",dineInOrders:!!(T?.dine_in_orders??!0),inStoreOrders:!!(T?.in_store_orders??!0),takeawayOrders:!!(T?.takeaway_orders??!0),deliveryOrders:!!(T?.delivery_orders??!0),cashierCanCancelOrder:T?.cashier_can_cancel_order||"No"}),U({freeDeliveryIn:T?.free_delivery_in!=null?String(T.free_delivery_in):"5",deliveryFeePerKm:T?.delivery_fee_per_km!=null?String(T.delivery_fee_per_km):"2.50",maximumDeliveryRange:T?.maximum_delivery_range!=null?String(T.maximum_delivery_range):"15",minimumDeliveryOrderAmount:T?.minimum_delivery_order_amount!=null?String(T.minimum_delivery_order_amount):"20.00"}),M({monday:{open:T?.monday_open||"12:00",close:T?.monday_close||"23:59"},tuesday:{open:T?.tuesday_open||"12:00",close:T?.tuesday_close||"23:59"},wednesday:{open:T?.wednesday_open||"12:00",close:T?.wednesday_close||"23:59"},thursday:{open:T?.thursday_open||"12:00",close:T?.thursday_close||"23:59"},friday:{open:T?.friday_open||"12:00",close:T?.friday_close||"23:59"},saturday:{open:T?.saturday_open||"12:00",close:T?.saturday_close||"23:59"},sunday:{open:T?.sunday_open||"12:00",close:T?.sunday_close||"23:59"}}),w({defaultTheme:T?.default_theme||"Blue Theme",selectKeyboard:T?.select_keyboard||"System Keyboard",selectOrderBell:T?.select_order_bell||"Bell 1",autoSaveInterval:T?.auto_save_interval!=null?String(T.auto_save_interval):"5",soundAlert:!!(T?.sound_alert??!1),notifications:!!(T?.notifications??!0)})},O=async()=>{try{o(!0);const T=await window.settingsAPI.get();T?.success&&(c.current=T.data||null,T.data&&q(T.data))}finally{o(!1)}};v.useEffect(()=>{O()},[t]);const[R,M]=v.useState({monday:{open:"12:00",close:"23:59"},tuesday:{open:"12:00",close:"23:59"},wednesday:{open:"12:00",close:"23:59"},thursday:{open:"12:00",close:"23:59"},friday:{open:"12:00",close:"23:59"},saturday:{open:"12:00",close:"23:59"},sunday:{open:"12:00",close:"23:59"}}),[P,ee]=v.useState({businessName:"Restaurant Name",phoneNumber:"",country:"Ireland",description:"Welcome to our restaurant! We serve delicious food with excellent service in a warm and welcoming atmosphere.",logoFile:null,logoPreview:"",address:"123 Main Street, Dublin, Ireland",latitude:"53.3498",longitude:"-6.2603"}),oe=v.useRef(null),[je,de]=v.useState(!1),[re,Te]=v.useState(null),[De,ne]=v.useState({open:"",close:""}),[ue,se]=v.useState(!1),[Ae,Se]=v.useState(null),$e=[{id:"businessInfo",label:"Business Information",icon:e.jsx(mu,{size:16})},{id:"appearance",label:"Appearance",icon:e.jsx(bl,{size:16})},{id:"finance",label:"Finance & Tax",icon:e.jsx(U0,{size:16})},{id:"order",label:"Order Configuration",icon:e.jsx(V0,{size:16})},{id:"delivery",label:"Delivery Management",icon:e.jsx(So,{size:16})},{id:"schedule",label:"Time Schedule",icon:e.jsx($s,{size:16})}],Q=(T,G)=>{w(ce=>({...ce,[T]:G}))},xe=(T,G)=>{_(ce=>({...ce,[T]:G}))},ve=(T,G)=>{z(ce=>({...ce,[T]:G}))},ae=(T,G)=>{U(ce=>({...ce,[T]:G}))},Ce=(T,G)=>{ee(ce=>({...ce,[T]:G}))},pe=()=>{oe?.current?.click()},k=T=>{const G=T.target.files&&T.target.files[0];if(!G)return;const ce=new FileReader;ce.onload=()=>{const ie=ce.result;ee(fe=>({...fe,logoFile:ie,logoPreview:ie}))},ce.readAsDataURL(G)},L=()=>{if(!navigator.geolocation){console.warn("Geolocation not supported");return}navigator.geolocation.getCurrentPosition(T=>{const{latitude:G,longitude:ce}=T.coords;ee(ie=>({...ie,latitude:String(G.toFixed(6)),longitude:String(ce.toFixed(6))}))},T=>{console.warn("Geolocation error:",T.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},f=()=>{const{latitude:T,longitude:G,address:ce}=P,fe=`https://www.google.com/maps/search/?api=1&query=${ce?encodeURIComponent(ce):`${T},${G}`}`;window.open(fe,"_blank")},x=(T,G,ce)=>{M(ie=>({...ie,[T]:{...ie[T],[G]:ce}}))},N=T=>{Te(T),ne({open:R[T].open,close:R[T].close}),de(!0)},C=()=>{re&&M(T=>({...T,[re]:{...T[re],open:De.open,close:De.close}})),de(!1),Te(null),ne({open:"",close:""})},A=()=>{de(!1),Te(null),ne({open:"",close:""})},H=(T,G)=>{ne(ce=>({...ce,[T]:G}))},V=T=>{Se(T),se(!0)},F=()=>{console.log(`Delete confirmed for ${Ae}`),se(!1),Se(null)},B=()=>{se(!1),Se(null)},J=async()=>{const T={businessName:P.businessName,phoneNumber:P.phoneNumber,country:P.country,description:P.description,logo_preview:P.logoPreview,...P.logoFile?{logoFile:P.logoFile,originalLogoFilename:P.logoFile.name||"logo.png"}:{},address:P.address,latitude:P.latitude,longitude:P.longitude,currency:S.currency,currencySymbolPosition:S.currencySymbolPosition,digitAfterDecimalPoint:S.digitAfterDecimalPoint,taxRate:S.taxRate,standardTax:S.standardTax,foodTax:S.foodTax,deliveryTax:S.deliveryTax,serviceTax:S.serviceTax,timeZone:S.timeZone,timeFormat:S.timeFormat,minimumOrderAmount:E.minimumOrderAmount,orderPlaceSetting:E.orderPlaceSetting,deliveryMinTime:E.deliveryMinTime,deliveryMaxTime:E.deliveryMaxTime,deliveryUnit:E.deliveryUnit,dineInTime:E.dineInTime,dineInUnit:E.dineInUnit,dineInOrders:E.dineInOrders,inStoreOrders:E.inStoreOrders,takeawayOrders:E.takeawayOrders,deliveryOrders:E.deliveryOrders,cashierCanCancelOrder:E.cashierCanCancelOrder,freeDeliveryIn:I.freeDeliveryIn,deliveryFeePerKm:I.deliveryFeePerKm,maximumDeliveryRange:I.maximumDeliveryRange,minimumDeliveryOrderAmount:I.minimumDeliveryOrderAmount,monday_open:R.monday.open,monday_close:R.monday.close,tuesday_open:R.tuesday.open,tuesday_close:R.tuesday.close,wednesday_open:R.wednesday.open,wednesday_close:R.wednesday.close,thursday_open:R.thursday.open,thursday_close:R.thursday.close,friday_open:R.friday.open,friday_close:R.friday.close,saturday_open:R.saturday.open,saturday_close:R.saturday.close,sunday_open:R.sunday.open,sunday_close:R.sunday.close,defaultTheme:y.defaultTheme,selectKeyboard:y.selectKeyboard,selectOrderBell:y.selectOrderBell,autoSaveInterval:y.autoSaveInterval,soundAlert:y.soundAlert,notifications:y.notifications},G=await window.settingsAPI.upsert(T);if(G?.success){m("Settings updated successfully!",{duration:1500});try{window.appSettings&&typeof window.appSettings.reloadSettings=="function"&&await window.appSettings.reloadSettings()}catch(ce){console.warn("Could not reload app settings after save:",ce)}}else h(G?.message||"Failed to update settings");await O()},Y=async()=>{await O()};return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx(Ci,{message:d.message,isVisible:d.isVisible,onClose:g,duration:d.duration,type:d.type}),e.jsx("div",{className:"bg-white flex justify-center rounded-lg shadow-sm mb-6",children:e.jsx("div",{className:"flex items-center p-2 ",children:$e.map(T=>e.jsxs("button",{onClick:()=>r(T.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium transition-colors ${t===T.id?"text-white bg-primary rounded-lg":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx("span",{className:t===T.id?"text-white":"text-gray-500",children:T.icon}),T.label]},T.id))})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 relative overflow-hidden",style:{"--primary":"var(--color-primary)"},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-primary"}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:()=>s("/dashboard/admin-panel"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Tu,{size:20,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:t==="businessInfo"?e.jsxs(e.Fragment,{children:[e.jsx(mu,{size:24,className:"text-primary"}),"Business Information"]}):t==="finance"?e.jsxs(e.Fragment,{children:[e.jsx(U0,{size:24,className:"text-primary"}),"Business Configuration"]}):t==="order"?e.jsxs(e.Fragment,{children:[e.jsx(V0,{size:24,className:"text-primary"}),"Order Configuration"]}):t==="delivery"?e.jsxs(e.Fragment,{children:[e.jsx(So,{size:24,className:"text-primary"}),"Delivery Management"]}):t==="schedule"?e.jsxs(e.Fragment,{children:[e.jsx($s,{size:24,className:"text-primary"}),"Schedule Working Hours"]}):e.jsxs(e.Fragment,{children:[e.jsx(bl,{size:24,className:"text-primary"}),"System Appearance and Preferences"]})}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:t==="businessInfo"?"Configure your business details and location information":t==="finance"?"Set up business-specific settings.":t==="order"?"Configure order processing and delivery settings.":t==="delivery"?"Configure delivery settings and fees.":t==="schedule"?"Set opening and closing times for each day of the week":"Configure system behavior and performance."})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:t==="businessInfo"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 md:col-span-2",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),e.jsx("input",{type:"text",value:P.businessName,onChange:T=>Ce("businessName",T.target.value),placeholder:"Enter business name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"text",value:P.phoneNumber,onChange:T=>Ce("phoneNumber",T.target.value),placeholder:"Enter phone number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),e.jsxs("select",{value:P.country,onChange:T=>Ce("country",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Ireland",children:"Ireland"}),e.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),e.jsx("option",{value:"United States",children:"United States"}),e.jsx("option",{value:"Germany",children:"Germany"})]})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200"}),e.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-4",children:"Address & Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("input",{type:"text",value:P.address,onChange:T=>Ce("address",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Latitude"}),e.jsx("input",{type:"text",value:P.latitude,onChange:T=>Ce("latitude",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Longitude"}),e.jsx("input",{type:"text",value:P.longitude,onChange:T=>Ce("longitude",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4",children:[e.jsxs("button",{onClick:L,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90",children:[e.jsx(ph,{size:16})," Get Current Location"]}),e.jsxs("button",{onClick:f,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:[e.jsx(ph,{size:16})," Open in Maps"]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-5 md:col-span-2",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-5",children:"Description & Logo"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 items-start",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsxs("div",{className:"rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("textarea",{rows:8,value:P.description,onChange:T=>Ce("description",T.target.value),maxLength:600,placeholder:"Tell customers what makes your place special...",className:"w-full min-h-[180px] px-4 py-3 outline-none border-0 focus:ring-2 focus:ring-primary"}),e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-500",children:[e.jsx("span",{children:"Tip: Friendly, clear, and under 600 characters."}),e.jsxs("span",{children:[P.description?.length||0,"/600"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Logo"}),e.jsx("div",{className:"rounded-lg border border-dashed border-gray-300 bg-gray-50 p-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"aspect-square w-32 md:w-36 rounded-lg bg-white border border-gray-200 flex items-center justify-center overflow-hidden shadow-sm",children:P.logoPreview?e.jsx("img",{src:P.logoPreview,alt:"Logo",className:"w-full h-full object-contain"}):e.jsx("span",{className:"text-xs text-gray-400",children:"No logo"})}),e.jsx("p",{className:"text-xs text-gray-500 h-4 truncate w-full text-center",children:P.logoFile?.name||"No file chosen"}),e.jsx("input",{ref:oe,type:"file",accept:"image/*",className:"hidden",onChange:k}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:pe,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90",children:[e.jsx(hx,{size:16})," Upload"]}),P.logoPreview&&e.jsx("button",{onClick:()=>Ce("logoPreview",""),className:"inline-flex items-center gap-2 px-3 py-2 bg-white text-gray-700 border border-gray-200 rounded-md hover:bg-gray-100",children:"Remove"})]}),e.jsx("p",{className:"text-[11px] text-gray-500 text-center",children:"Use a square image (≥ 256×256). PNG with transparent background looks best."})]})})]})]})]})]}):t==="finance"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),e.jsxs("select",{value:S.currency,onChange:T=>xe("currency",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Euro (€)",children:"Euro (€)"}),e.jsx("option",{value:"US Dollar ($)",children:"US Dollar ($)"}),e.jsx("option",{value:"British Pound (£)",children:"British Pound (£)"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency Symbol Position"}),e.jsxs("select",{value:S.currencySymbolPosition,onChange:T=>xe("currencySymbolPosition",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Right (123€)",children:"Right (123€)"}),e.jsx("option",{value:"Left (€123)",children:"Left (€123)"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Digit After Decimal Point"}),e.jsxs("select",{value:S.digitAfterDecimalPoint,onChange:T=>xe("digitAfterDecimalPoint",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"0",children:"0"}),e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Standard Tax (%)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:S.standardTax,onChange:T=>xe("standardTax",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Food Tax (%)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:S.foodTax,onChange:T=>xe("foodTax",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Tax (%)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:S.deliveryTax,onChange:T=>xe("deliveryTax",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Tax (%)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:S.serviceTax,onChange:T=>xe("serviceTax",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Zone"}),e.jsxs("select",{value:S.timeZone,onChange:T=>xe("timeZone",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Ireland Dublin",children:"Ireland Dublin"}),e.jsx("option",{value:"London",children:"London"}),e.jsx("option",{value:"New York",children:"New York"}),e.jsx("option",{value:"Los Angeles",children:"Los Angeles"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Format"}),e.jsxs("select",{value:S.timeFormat,onChange:T=>xe("timeFormat",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"12 hour",children:"12 hour"}),e.jsx("option",{value:"24 hour",children:"24 hour"})]})]})]}):t==="order"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(H0,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Minimum Order Amount"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Set the minimum amount required for orders."}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:E.minimumOrderAmount,onChange:T=>ve("minimumOrderAmount",T.target.value),className:"flex-1 pl-2 w-full py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("span",{className:"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md text-gray-600",children:"€"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(w1,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Order Place Setting"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Choose where orders are sent when placed."}),e.jsxs("select",{value:E.orderPlaceSetting,onChange:T=>ve("orderPlaceSetting",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Kitchen",children:"Kitchen"}),e.jsx("option",{value:"Bar",children:"Bar"}),e.jsx("option",{value:"Both",children:"Both"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($s,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Approximate Delivery Time"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Set the time range for delivery estimates."}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Min Time"}),e.jsx("input",{type:"text",value:E.deliveryMinTime,onChange:T=>ve("deliveryMinTime",T.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Max Time"}),e.jsx("input",{type:"text",value:E.deliveryMaxTime,onChange:T=>ve("deliveryMaxTime",T.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Unit"}),e.jsxs("select",{value:E.deliveryUnit,onChange:T=>ve("deliveryUnit",T.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"Minute",children:"Minute"}),e.jsx("option",{value:"Hour",children:"Hour"})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ni,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Minimum Time For Dine-In"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Set minimum preparation time for dine-in orders."}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Time"}),e.jsx("input",{type:"text",value:E.dineInTime,onChange:T=>ve("dineInTime",T.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Unit"}),e.jsxs("select",{value:E.dineInUnit,onChange:T=>ve("dineInUnit",T.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"Minutes",children:"Minutes"}),e.jsx("option",{value:"Hours",children:"Hours"})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ni,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dine In Orders"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>ve("dineInOrders",!E.dineInOrders),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${E.dineInOrders?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${E.dineInOrders?"translate-x-6":"translate-x-1"}`})})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(mu,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"In-Store Orders"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>ve("inStoreOrders",!E.inStoreOrders),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${E.inStoreOrders?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${E.inStoreOrders?"translate-x-6":"translate-x-1"}`})})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(yl,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Takeaway Orders"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>ve("takeawayOrders",!E.takeawayOrders),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${E.takeawayOrders?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${E.takeawayOrders?"translate-x-6":"translate-x-1"}`})})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(So,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Delivery Orders"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>ve("deliveryOrders",!E.deliveryOrders),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${E.deliveryOrders?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${E.deliveryOrders?"translate-x-6":"translate-x-1"}`})})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:e.jsx(Nt,{size:12,className:"text-white"})}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cashier Can Cancel Order"})]}),e.jsxs("select",{value:E.cashierCanCancelOrder,onChange:T=>ve("cashierCanCancelOrder",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-primary font-medium",children:[e.jsx("option",{value:"No",children:"No"}),e.jsx("option",{value:"Yes",children:"Yes"})]})]})]}):t==="delivery"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(yl,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Free Delivery In (KM)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Distance within which delivery is free"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:I.freeDeliveryIn,onChange:T=>ae("freeDeliveryIn",T.target.value),className:"flex-1 w-full pl-2 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("span",{className:"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md text-gray-600",children:"km"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(H0,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Delivery Fee per KM"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Cost per kilometer for delivery"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:I.deliveryFeePerKm,onChange:T=>ae("deliveryFeePerKm",T.target.value),className:"flex-1 w-full pl-2 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("span",{className:"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md text-gray-600",children:"€"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ph,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Maximum Delivery Range"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Maximum distance for delivery service"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:I.maximumDeliveryRange,onChange:T=>ae("maximumDeliveryRange",T.target.value),className:"flex-1 w-full pl-2 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("span",{className:"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md text-gray-600",children:"km"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ko,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Minimum Delivery Order Amount"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Minimum order value for delivery"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:I.minimumDeliveryOrderAmount,onChange:T=>ae("minimumDeliveryOrderAmount",T.target.value),className:"flex-1 w-full pl-2 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("span",{className:"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md text-gray-600",children:"€"})]})]})]}):t==="schedule"?e.jsx("div",{className:"col-span-full",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 2xl:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Monday"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),e.jsx("input",{type:"time",value:R.monday.open,onChange:T=>x("monday","open",T.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),e.jsx("input",{type:"time",value:R.monday.close,onChange:T=>x("monday","close",T.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>V("monday"),className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(ol,{size:12})}),e.jsx("button",{onClick:()=>N("monday"),className:"w-6 h-6 bg-primary text-white rounded flex items-center justify-center hover:bg-primary/80 transition-colors",children:e.jsx(oa,{size:12})})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Tuesday"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),e.jsx("input",{type:"time",value:R.tuesday.open,onChange:T=>x("tuesday","open",T.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),e.jsx("input",{type:"time",value:R.tuesday.close,onChange:T=>x("tuesday","close",T.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>V("tuesday"),className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(ol,{size:12})}),e.jsx("button",{onClick:()=>N("tuesday"),className:"w-6 h-6 bg-primary text-white rounded flex items-center justify-center hover:bg-primary/80 transition-colors",children:e.jsx(oa,{size:12})})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Wednesday"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),e.jsx("input",{type:"time",value:R.wednesday.open,onChange:T=>x("wednesday","open",T.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),e.jsx("input",{type:"time",value:R.wednesday.close,onChange:T=>x("wednesday","close",T.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>V("wednesday"),className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(ol,{size:12})}),e.jsx("button",{onClick:()=>N("wednesday"),className:"w-6 h-6 bg-primary text-white rounded flex items-center justify-center hover:bg-primary/80 transition-colors",children:e.jsx(oa,{size:12})})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Thursday"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),e.jsx("input",{type:"time",value:R.thursday.open,onChange:T=>x("thursday","open",T.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),e.jsx("input",{type:"time",value:R.thursday.close,onChange:T=>x("thursday","close",T.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>V("thursday"),className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(ol,{size:12})}),e.jsx("button",{onClick:()=>N("thursday"),className:"w-6 h-6 bg-primary text-white rounded flex items-center justify-center hover:bg-primary/80 transition-colors",children:e.jsx(oa,{size:12})})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Friday"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),e.jsx("input",{type:"time",value:R.friday.open,onChange:T=>x("friday","open",T.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),e.jsx("input",{type:"time",value:R.friday.close,onChange:T=>x("friday","close",T.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>V("friday"),className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(ol,{size:12})}),e.jsx("button",{onClick:()=>N("friday"),className:"w-6 h-6 bg-primary text-white rounded flex items-center justify-center hover:bg-primary/80 transition-colors",children:e.jsx(oa,{size:12})})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Saturday"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),e.jsx("input",{type:"time",value:R.saturday.open,onChange:T=>x("saturday","open",T.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),e.jsx("input",{type:"time",value:R.saturday.close,onChange:T=>x("saturday","close",T.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>V("saturday"),className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(ol,{size:12})}),e.jsx("button",{onClick:()=>N("saturday"),className:"w-6 h-6 bg-primary text-white rounded flex items-center justify-center hover:bg-primary/80 transition-colors",children:e.jsx(oa,{size:12})})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Sunday"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),e.jsx("input",{type:"time",value:R.sunday.open,onChange:T=>x("sunday","open",T.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),e.jsx("input",{type:"time",value:R.sunday.close,onChange:T=>x("sunday","close",T.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>V("sunday"),className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(ol,{size:12})}),e.jsx("button",{onClick:()=>N("sunday"),className:"w-6 h-6 bg-primary text-white rounded flex items-center justify-center hover:bg-primary/80 transition-colors",children:e.jsx(oa,{size:12})})]})]})]})})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Theme"}),e.jsxs("select",{value:y.defaultTheme,onChange:T=>Q("defaultTheme",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Blue Theme",children:"Blue Theme"}),e.jsx("option",{value:"Dark Blue Theme",children:"Dark Blue Theme"}),e.jsx("option",{value:"Green Theme",children:"Green Theme"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Keyboard"}),e.jsxs("select",{value:y.selectKeyboard,onChange:T=>Q("selectKeyboard",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"System Keyboard",children:"System Keyboard"}),e.jsx("option",{value:"GBoard",children:"GBoard"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Order Bell"}),e.jsxs("select",{value:y.selectOrderBell,onChange:T=>Q("selectOrderBell",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Bell 1",children:"Bell 1"}),e.jsx("option",{value:"Bell 2",children:"Bell 2"}),e.jsx("option",{value:"Bell 3",children:"Bell 3"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Auto Save Interval"}),e.jsxs("select",{value:y.autoSaveInterval,onChange:T=>Q("autoSaveInterval",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"1",children:"1 minute"}),e.jsx("option",{value:"3",children:"3 minutes"}),e.jsx("option",{value:"5",children:"5 minutes"}),e.jsx("option",{value:"10",children:"10 minutes"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sound Alert"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>Q("soundAlert",!y.soundAlert),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${y.soundAlert?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${y.soundAlert?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:"ml-3 text-sm text-gray-600",children:y.soundAlert?"On":"Off"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notifications"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>Q("notifications",!y.notifications),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${y.notifications?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${y.notifications?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:"ml-3 text-sm text-gray-600",children:y.notifications?"On":"Off"})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:Y,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Reset to Default"}),e.jsx("button",{onClick:J,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"Save Changes"})]})]})}),je&&e.jsx("div",{className:"fixed inset-0  bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center bg-primary text-white p-4",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Create Schedule For ",re?re.charAt(0).toUpperCase()+re.slice(1):""]}),e.jsx("button",{onClick:A,className:" text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Nt,{size:20})})]}),e.jsx("div",{className:"p-6 relative",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start time :"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"time",value:De.open,onChange:T=>H("open",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-2",children:[e.jsx($s,{size:16,className:"text-gray-400"}),e.jsx("button",{onClick:()=>{const G=new Date().toTimeString().slice(0,5);H("open",G)},className:"text-gray-400 hover:text-gray-600",children:"▶"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End time :"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"time",value:De.close,onChange:T=>H("close",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-2",children:[e.jsx($s,{size:16,className:"text-gray-400"}),e.jsx("button",{onClick:()=>{const G=new Date().toTimeString().slice(0,5);H("close",G)},className:"text-gray-400 hover:text-gray-600",children:"▶"})]})]})]})]})}),e.jsx("div",{className:"p-6 border-t border-gray-200 flex justify-end",children:e.jsx("button",{onClick:C,className:"px-6 py-2 bg-primary text-white font-medium rounded-lg hover:bg-primary/90 transition-colors shadow-sm",children:"Submit"})})]})}),ue&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[e.jsx("div",{className:"flex justify-center pt-6 pb-4",children:e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-2xl font-bold",children:"!"})})})}),e.jsxs("div",{className:"px-6 pb-6 text-center",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"Want to delete this schedule"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"If you select Yes the time schedule will be deleted"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:B,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"No"}),e.jsx("button",{onClick:F,className:"px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Yes"})]})]})]})})]})},xh=({label:s,onClick:t,className:r=""})=>e.jsx("button",{type:"button",onClick:()=>t(s),className:`flex items-center justify-center rounded-lg h-14 text-lg font-semibold border border-gray-200 bg-white hover:bg-gray-50 active:translate-y-[1px] transition ${r}`,children:s});function y6(){const s=ya(),{themeColors:t}=Ur(),[r,n]=v.useState(""),[o,c]=v.useState(""),[d,m]=v.useState(""),[h,g]=v.useState("old"),[y,w]=v.useState(!1),[S,_]=v.useState(""),[E,z]=v.useState(""),[I,U]=v.useState(!1),[q,O]=v.useState(!1),[R,M]=v.useState(!1),P=v.useMemo(()=>!(!r||!o||!d||o!==d||o.length<4||o===r),[r,o,d]),ee=de=>{_(""),z("");const re=/^(\d)$/.test(String(de)),Te=(De,ne)=>{de==="bksp"?De(ne.slice(0,-1)):de==="clear"?De(""):re&&ne.length<4&&De(ne+String(de))};h==="old"&&Te(n,r),h==="new"&&Te(c,o),h==="confirm"&&Te(m,d),console.log("activeField:",h,"old:",r,"new:",o,"confirm:",d)},oe=async de=>{if(de.preventDefault(),_(""),z(""),!!P)try{w(!0);const re=localStorage.getItem("currentEmployee");if(!re){_("No logged-in user found");return}let Te=null;try{Te=JSON.parse(re)?.id}catch{}if(!Te){_("Invalid user session");return}console.log("Submitting change password with:",{employeeId:Te,oldPassword:r,newPassword:o});const De=await window.myAPI?.changeEmployeePassword(Te,r,o);console.log("Change password result:",De),De?.success?(z("Password changed successfully"),n(""),c(""),m(""),g("old")):_(De?.message||"Failed to change password")}catch{_("Failed to change password")}finally{w(!1)}},je=({value:de,onFocus:re,label:Te,isActive:De,visible:ne,onToggleVisible:ue})=>{const se=Math.min(4,de.length);ne?de.padEnd(4," "):"".padStart(se,"•");const Ae=new Array(4).fill(null).map((Se,$e)=>{const Q=$e<se,xe=ne?de[$e]||"":Q?"•":"";return e.jsx("div",{className:`h-12 rounded-lg border flex items-center justify-center text-xl font-semibold ${Q?"border-primary bg-primaryExtraLight text-primary":"border-gray-200 bg-white text-gray-500"}`,children:xe},$e)});return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:Te}),e.jsx("div",{className:`w-full rounded-xl ${De?"ring-2":""}`,style:{ringColor:De?t.primaryLight:void 0},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:re,className:"flex-1",children:e.jsx("div",{className:`grid grid-cols-4 gap-3 p-1 rounded-lg ${De?"bg-primaryExtraLight":""}`,children:Ae})}),e.jsx("button",{type:"button",onClick:ue,className:"p-2 text-gray-600 hover:text-gray-800",children:ne?e.jsx(_h,{size:18}):e.jsx(vn,{size:18})})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"4-digit numeric PIN"})]})};return e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 w-full",children:e.jsxs("div",{className:"max-w-4xl mx-auto mt-8",children:[e.jsxs("button",{type:"button",onClick:()=>s(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-4",children:[e.jsx(Tu,{size:18})," Back"]}),e.jsxs("div",{className:"rounded-2xl p-5 md:p-6",style:{background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.08), 0 8px 16px rgba(0, 0, 0, 0.04)",border:"1px solid rgba(0,0,0,0.04)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ZN,{size:22,className:"text-primary"}),e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Change Password"})]}),e.jsxs("form",{onSubmit:oe,className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(je,{label:"Old Password",value:r,onFocus:()=>g("old"),isActive:h==="old",visible:I,onToggleVisible:()=>U(de=>!de)}),e.jsx(je,{label:"New Password",value:o,onFocus:()=>g("new"),isActive:h==="new",visible:q,onToggleVisible:()=>O(de=>!de)}),e.jsx(je,{label:"Confirm Password",value:d,onFocus:()=>g("confirm"),isActive:h==="confirm",visible:R,onToggleVisible:()=>M(de=>!de)}),S&&e.jsx("div",{className:"text-sm text-red-600",children:S}),E&&e.jsx("div",{className:"text-sm text-green-600",children:E}),e.jsxs("div",{className:"flex gap-3 pt-1",children:[e.jsx("button",{type:"submit",disabled:!P||y,className:`px-4 py-2 rounded-lg text-white font-semibold btn-lifted ${P&&!y?"bg-primary hover:bg-primary/90":"bg-gray-400 cursor-not-allowed"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(kh,{size:16}),y?"Saving...":"Change Password"]})}),e.jsx("button",{type:"button",onClick:()=>{n(""),c(""),m(""),g("old"),_(""),z("")},className:"px-4 py-2 rounded-lg font-semibold border border-gray-200 bg-white hover:bg-gray-50",children:"Reset"})]})]}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 select-none",children:[["1","2","3","4","5","6","7","8","9"].map(de=>e.jsx(xh,{label:de,onClick:ee},de)),e.jsx(xh,{label:"bksp",onClick:()=>ee("bksp"),className:"col-span-1"}),e.jsx(xh,{label:"0",onClick:ee}),e.jsx(xh,{label:"clear",onClick:()=>ee("clear"),className:"col-span-1"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Tap a field, then use the keypad to enter 4 digits."})]})]})]})]})})}const b6=()=>{const[s,t]=v.useState("2025-09-12"),[r,n]=v.useState("09:00"),[o,c]=v.useState("2025-09-12"),[d,m]=v.useState("12:47"),h={payments:[{type:"Cash",amount:1250.5},{type:"Card",amount:890.25},{type:"Digital",amount:340.75},{type:"Contactless",amount:156.8},{type:"Mobile Pay",amount:89.45},{type:"Gift Card",amount:45.2},{type:"Store Credit",amount:23.1},{type:"Split Payment",amount:78.9}],taxes:[{category:"VAT 21%",taxes:420.15,net:2e3},{category:"VAT 9%",taxes:45.3,net:503.33},{category:"VAT 13.5%",taxes:67.85,net:502.59},{category:"VAT 23%",taxes:89.45,net:388.91},{category:"Zero Rate",taxes:0,net:125},{category:"Exempt",taxes:0,net:89.5}],transactions:{sales:{count:45,gross:2480.5,taxes:465.45,net:2015.05},refund:{count:2,gross:-45,taxes:-9.45,net:-35.55},void:{count:1,gross:-25,taxes:-5.25,net:-19.75},tip:{count:12,gross:120,taxes:0,net:120}}},g=h.transactions.sales.count+h.transactions.refund.count+h.transactions.void.count+h.transactions.tip.count,y=h.transactions.sales.gross+h.transactions.refund.gross+h.transactions.void.gross+h.transactions.tip.gross,w=h.transactions.sales.taxes+h.transactions.refund.taxes+h.transactions.void.taxes+h.transactions.tip.taxes,S=h.transactions.sales.net+h.transactions.refund.net+h.transactions.void.net+h.transactions.tip.net,_=[{type:"Sales",count:h.transactions.sales.count,gross:h.transactions.sales.gross,taxes:h.transactions.sales.taxes,net:h.transactions.sales.net,bgColor:"bg-green-50",icon:e.jsx(ko,{className:"w-4 h-4 text-yellow-600"})},{type:"Refund",count:h.transactions.refund.count,gross:h.transactions.refund.gross,taxes:h.transactions.refund.taxes,net:h.transactions.refund.net,bgColor:"bg-yellow-50",icon:e.jsx($h,{className:"w-4 h-4 text-blue-600"})},{type:"Void",count:h.transactions.void.count,gross:h.transactions.void.gross,taxes:h.transactions.void.taxes,net:h.transactions.void.net,bgColor:"bg-red-50",icon:e.jsx(Nt,{className:"w-4 h-4 text-red-600"})},{type:"Tip",count:h.transactions.tip.count,gross:h.transactions.tip.gross,taxes:h.transactions.tip.taxes,net:h.transactions.tip.net,bgColor:"bg-yellow-50",icon:e.jsx(Zb,{className:"w-4 h-4 text-yellow-600"})},{type:"Total",count:g,gross:y,taxes:w,net:S,bgColor:"bg-blue-50",icon:e.jsx(ox,{className:"w-4 h-4 text-blue-600"})}],E=()=>{window.print()},z=()=>{console.log("Close cash clicked")};return e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"bg-white p-6 mb-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pc,{size:24,className:"text-primary"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Daily Report (Z-Report)"})]}),e.jsxs("p",{className:"text-gray-600 mt-1 text-sm bg-[#F3F4F6] rounded-lg p-2",children:["Register: ",e.jsx("span",{className:"font-bold text-primary",children:"001"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-[#F8F9FA] border border-gray-300 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Start:"}),e.jsxs("span",{className:"text-sm text-gray-800",children:[s," ",r]})]}),e.jsx("span",{className:"text-gray-400",children:"/"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"End:"}),e.jsxs("span",{className:"text-sm text-gray-800",children:[o," ",d]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-96 flex flex-col gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center bg-primary",children:e.jsx(Fc,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Payment Summary"})]}),e.jsx("div",{className:"flex-1 max-h-48 overflow-y-auto pr-2 mt-3",children:e.jsx("div",{className:"space-y-2",children:h.payments.map((I,U)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-700",children:[I.type,":"]}),e.jsxs("span",{className:"font-medium text-gray-800",children:["€",I.amount.toFixed(2)]})]},U))})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center bg-primary",children:e.jsx(Oc,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Tax Breakdown"})]}),e.jsx("div",{className:"flex-1 max-h-48 overflow-y-auto pr-2 mt-3",children:e.jsx("div",{className:"space-y-2",children:h.taxes.map((I,U)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-700",children:[I.category,":"]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium text-gray-800",children:["€",I.taxes.toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["€",I.net.toFixed(2)]})]})]},U))})})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-primary",children:e.jsx(Oc,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-black",children:"Transaction Summary"})]}),e.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs font-medium",children:g})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-5 gap-4 text-xs font-semibold text-gray-600 uppercase tracking-wide",children:[e.jsx("div",{children:"TYPE"}),e.jsx("div",{children:"COUNT"}),e.jsx("div",{children:"GROSS"}),e.jsx("div",{children:"TAXES"}),e.jsx("div",{children:"NET"})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:_.map((I,U)=>e.jsx("div",{className:`px-4 py-3 ${I.bgColor}`,children:e.jsxs("div",{className:"grid grid-cols-5 gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[I.icon,e.jsx("span",{className:"text-sm font-medium text-gray-800",children:I.type})]}),e.jsx("div",{className:"text-sm text-gray-600",children:I.count}),e.jsxs("div",{className:"text-sm text-gray-600",children:["€",I.gross.toFixed(2)]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["€",I.taxes.toFixed(2)]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["€",I.net.toFixed(2)]})]})},U))})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6",children:[e.jsxs("button",{onClick:E,className:"bg-primary text-white px-4 py-3 rounded-lg text-sm font-medium flex items-center gap-2",children:[e.jsx(pu,{className:"w-4 h-4"}),"Print Report"]}),e.jsxs("button",{onClick:z,className:"bg-primary text-white px-4 py-3 rounded-lg text-sm font-medium flex items-center gap-2",children:[e.jsx(la,{className:"w-4 h-4"}),"Close Cash"]})]})]})},v6=({isOpen:s,onClose:t,onSave:r})=>{const{addRider:n}=Ex(),[o,c]=v.useState({fullName:"",mobile:"",address:"",status:"",vehicleType:"",regNo:"",licenceExpiry:"",insuranceExpiry:"",blockOnExpiry:!1,payPreset:"hourly",perDrop:"",perKm:"",basePerShift:"",hourlyRate:"",deliveryFeeKeptBy:"restaurant",riderShare:"",cashTipsKeptByRider:"yes",cardTipsPayout:"no",payoutMethod:"cash",ibanBic:""}),[d,m]=v.useState(!1),[h,g]=v.useState(!1),[y,w]=v.useState(!1),S=O=>{const{name:R,value:M,type:P,checked:ee}=O.target;c(oe=>({...oe,[R]:P==="checkbox"?ee:M}))},_=O=>{m(O==="car"),g(O==="car")},E=O=>{w(O==="split")},z=O=>{c(R=>({...R,payPreset:O,perDrop:O==="mileage"?"2.50":"",perKm:O==="mileage"?"0.50":"",hourlyRate:O==="hourly"?"12.00":"",basePerShift:O==="custom"?"50.00":""}))},I=()=>{const R=["fullName","mobile","status","vehicleType"].filter(M=>!o[M]||o[M].trim()==="");return R.length>0?(alert(`Please fill in all required fields: ${R.join(", ")}`),!1):!0},U=()=>{if(!I())return;const O=n(o);r(O),t()},q=()=>{if(!I())return;const O=n(o);r(O),c({fullName:"",mobile:"",address:"",status:"",vehicleType:"",regNo:"",licenceExpiry:"",insuranceExpiry:"",blockOnExpiry:!1,payPreset:"hourly",perDrop:"",perKm:"",basePerShift:"",hourlyRate:"",deliveryFeeKeptBy:"restaurant",riderShare:"",cashTipsKeptByRider:"yes",cardTipsPayout:"no",payoutMethod:"cash",ibanBic:""})};return s?e.jsxs("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:O=>{O.target===O.currentTarget&&t()},children:[e.jsx("style",{jsx:!0,children:`
        input[type="date"] {
          position: relative;
          z-index: 1;
        }
        input[type="date"]::-webkit-calendar-picker-indicator {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          width: auto;
          height: auto;
          color: transparent;
          background: transparent;
          cursor: pointer;
          z-index: 2;
        }
        input[type="date"]::-webkit-inner-spin-button,
        input[type="date"]::-webkit-clear-button {
          display: none;
          -webkit-appearance: none;
        }
        .modal-content {
          pointer-events: auto;
          position: relative;
          z-index: 1;
        }
        .modal-content input[type="date"]:focus {
          z-index: 10;
          position: relative;
        }
        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 40;
        }
      `}),e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-xl max-h-[90vh] overflow-hidden modal-content",onClick:O=>O.stopPropagation(),children:[e.jsxs("div",{className:"flex bg-primary items-center justify-between px-6 py-3 border-b border-gray-200",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Add Rider"})}),e.jsx("button",{onClick:t,className:"p-2 rounded-lg transition-colors",children:e.jsx(Nt,{className:"w-5 h-5 text-white"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:e.jsxs("form",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h4",{className:"text-lg font-medium text-gray-800",children:"Identity & Contact"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Full name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"fullName",value:o.fullName,onChange:S,placeholder:"e.g., Ahsan Ali",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Mobile ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"mobile",value:o.mobile,onChange:S,placeholder:"+353...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("input",{type:"text",name:"address",value:o.address,onChange:S,placeholder:"street, city, Eircode",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"status",value:o.status,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:!0,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"on-leave",children:"On Leave"})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Mobile required, Eircode helpful for zones."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h4",{className:"text-lg font-medium text-gray-800",children:"Vehicle & Compliance"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Vehicle type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"vehicleType",value:o.vehicleType,onChange:O=>{S(O),_(O.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:!0,children:[e.jsx("option",{value:"",children:"Select Vehicle"}),e.jsx("option",{value:"bike",children:"Bike"}),e.jsx("option",{value:"car",children:"Car"}),e.jsx("option",{value:"e-bike",children:"E-bike"})]})]}),d&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Reg no."}),e.jsx("input",{type:"text",name:"regNo",value:o.regNo,onChange:S,placeholder:"if Car",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Licence expiry"}),e.jsx("input",{type:"date",name:"licenceExpiry",value:o.licenceExpiry,onChange:S,onClick:O=>O.stopPropagation(),onFocus:O=>O.stopPropagation(),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),h&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Insurance expiry"}),e.jsx("input",{type:"date",name:"insuranceExpiry",value:o.insuranceExpiry,onChange:S,onClick:O=>O.stopPropagation(),onFocus:O=>O.stopPropagation(),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"blockOnExpiry",name:"blockOnExpiry",checked:o.blockOnExpiry,onChange:S,className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary/20"}),e.jsx("label",{htmlFor:"blockOnExpiry",className:"text-sm font-medium text-gray-700",children:"Block on expiry"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h4",{className:"text-lg font-medium text-gray-800",children:"Pay Rules"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Preset"}),e.jsxs("select",{name:"payPreset",value:o.payPreset,onChange:O=>{S(O),z(O.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[e.jsx("option",{value:"mileage",children:"Mileage"}),e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Per-drop"}),e.jsx("input",{type:"number",name:"perDrop",value:o.perDrop,onChange:S,placeholder:"€ per delivery",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Per-km"}),e.jsx("input",{type:"number",name:"perKm",value:o.perKm,onChange:S,placeholder:"€ per km",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Base per shift"}),e.jsx("input",{type:"number",name:"basePerShift",value:o.basePerShift,onChange:S,placeholder:"€ (optional)",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hourly rate"}),e.jsx("input",{type:"number",name:"hourlyRate",value:o.hourlyRate,onChange:S,placeholder:"€ (optional)",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Per-drop + Per-km payment structure."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h4",{className:"text-lg font-medium text-gray-800",children:"Tips & Delivery-Fee Policy"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Delivery fee kept by ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"deliveryFeeKeptBy",value:o.deliveryFeeKeptBy,onChange:O=>{S(O),E(O.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[e.jsx("option",{value:"restaurant",children:"Restaurant"}),e.jsx("option",{value:"rider",children:"Rider"}),e.jsx("option",{value:"split",children:"Split %"})]})]}),y&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rider share %"}),e.jsx("input",{type:"number",name:"riderShare",value:o.riderShare,onChange:S,step:"0.1",min:"0",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Cash tips kept by rider ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"cashTipsKeptByRider",value:o.cashTipsKeptByRider,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Card tips payout ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"cardTipsPayout",value:o.cardTipsPayout,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[e.jsx("option",{value:"no",children:"No"}),e.jsx("option",{value:"weekly",children:"Yes (weekly)"}),e.jsx("option",{value:"share",children:"Yes (% share)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payout method"}),e.jsxs("select",{name:"payoutMethod",value:o.payoutMethod,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank",children:"Bank"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"IBAN/BIC"}),e.jsx("input",{type:"text",name:"ibanBic",value:o.ibanBic,onChange:S,placeholder:"if Bank",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-2 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"button",onClick:U,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"Save"}),e.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save & New"})]})]})]}):null},j6=({isOpen:s,onClose:t,rider:r,onManageOrders:n,onProcessCashout:o})=>{const c=ya();if(!s)return null;const d={rider:r?.name||"N/A",settledOrders:2,unsettledOrders:0,totalDrops:{count:3,rate:3,total:9},totalDistance:{km:6.7,rate:.75,total:5.03},totalDeliveryFees:14.03,totalTips:8.5,totalPayout:16.91};return e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex bg-primary rounded-t-lg items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Cashout Summary"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nt,{className:"w-5 h-5 text-white"})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("p",{className:"text-lg font-medium text-gray-800",children:["Rider: ",d.rider]})}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 bg-[#FFC824] p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800 mb-2",children:"SETTLED ORDERS"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-900",children:d.settledOrders})]}),e.jsxs("div",{className:"flex-1 bg-[#3395FF] p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-sm font-medium text-white mb-2",children:"UNSETTLED ORDERS"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:d.unsettledOrders})]})]})}),e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Payment Breakdown:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yl,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-gray-700",children:"Total Drops"})]}),e.jsxs("span",{className:"font-medium text-gray-800",children:[d.totalDrops.count," x €",d.totalDrops.rate," = €",d.totalDrops.total.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($s,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-gray-700",children:"Total Distance"})]}),e.jsxs("span",{className:"font-medium text-gray-800",children:[d.totalDistance.km," km x €",d.totalDistance.rate," = €",d.totalDistance.total.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(GN,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-gray-700",children:"Total Delivery Fees"})]}),e.jsxs("span",{className:"font-medium text-gray-800",children:["€",d.totalDeliveryFees.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fc,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-gray-700",children:"Total Tips"})]}),e.jsxs("span",{className:"font-medium text-gray-800",children:["€",d.totalTips.toFixed(2)]})]})]})]}),e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("div",{className:"bg-[#28A745] p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-semibold text-white",children:"Total Payout"}),e.jsxs("span",{className:"text-2xl font-bold text-white",children:["€",d.totalPayout.toFixed(2)]})]})})}),e.jsxs("div",{className:"p-6 flex gap-3",children:[e.jsx("button",{onClick:()=>{t(),c("/dashboard/manage-orders")},className:"flex-1 bg-primary text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"MANAGE ORDERS"}),e.jsx("button",{onClick:o,className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"PROCESS CASHOUT"})]})]})})},w6=({isOpen:s,onClose:t,rider:r,onManageOrders:n,onProcessCashout:o})=>e.jsx(j6,{isOpen:s,onClose:t,rider:r,onManageOrders:n,onProcessCashout:o}),N6=({isOpen:s,onClose:t,rider:r,reportData:n})=>{if(!s)return null;const o=n||{rider:r?.name||"N/A",orders:2,amount:54.75,distance:6.7},c=()=>{const d=window.open("","_blank");d.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Delivery Report - ${o.rider}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              background: white;
              color: #333;
            }
            .report-header {
              text-align: center;
              margin-bottom: 30px;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
            }
            .report-content {
              line-height: 1.8;
              font-size: 16px;
            }
            .report-item {
              margin-bottom: 10px;
            }
            @media print {
              body { margin: 0; }
            }
          </style>
        </head>
        <body>
          <div class="report-header">
            <h1>Delivery Report</h1>
            <p>Generated on ${new Date().toLocaleDateString()}</p>
          </div>
          <div class="report-content">
            <div class="report-item">Delivery report generated for ${o.rider}</div>
            <div class="report-item">Orders: ${o.orders}</div>
            <div class="report-item">Amount: €${o.amount.toFixed(2)}</div>
            <div class="report-item">Distance: ${o.distance} km</div>
          </div>
        </body>
      </html>
    `),d.document.close(),d.print(),d.close()};return e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex bg-primary rounded-t-lg items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Print Delivery Report"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nt,{className:"w-5 h-5 text-white"})})]}),e.jsx("div",{className:"px-6 py-6 border-b border-gray-200",children:e.jsx("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-3 text-gray-800",children:[e.jsxs("div",{className:"text-base leading-relaxed",children:["Delivery report generated for ",e.jsx("span",{className:"font-semibold",children:o.rider})]}),e.jsxs("div",{className:"text-base leading-relaxed",children:["Orders: ",e.jsx("span",{className:"font-semibold",children:o.orders})]}),e.jsxs("div",{className:"text-base leading-relaxed",children:["Amount: ",e.jsxs("span",{className:"font-semibold",children:["€",o.amount.toFixed(2)]})]}),e.jsxs("div",{className:"text-base leading-relaxed",children:["Distance: ",e.jsxs("span",{className:"font-semibold",children:[o.distance," km"]})]})]})})}),e.jsxs("button",{onClick:c,className:"flex-1 mx-6 my-2 bg-primary hover:bg-primary/90 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(pu,{className:"w-4 h-4"}),"Print"]})]})})},S6=({isOpen:s,onClose:t,rider:r,reportData:n})=>e.jsx(N6,{isOpen:s,onClose:t,rider:r,reportData:n});zu.register(Ij,zj,Sj,Pu,Mj,Rj,Ej,Aj);const C6=()=>{const{selectedRider:s,setSelectedRider:t}=Ex(),[r,n]=v.useState("2025-09-12"),[o,c]=v.useState("16:30"),[d,m]=v.useState("2025-09-12"),[h,g]=v.useState("23:59"),[y,w]=v.useState(!1),[S,_]=v.useState(!1),[E,z]=v.useState(!1),[I,U]=v.useState(!1),q=De=>{console.log("New rider added:",De),w(!1)},O=async De=>(console.log("Rider assigned:",De),_(!1),!0),R=()=>{_(!1)},M=()=>{console.log("Opening AddRider modal, closing AssignRider if open"),_(!1),w(!0)},P=()=>{console.log("Opening AssignRider modal, closing AddRider if open"),w(!1),_(!0)},ee=()=>{if(!s){alert("Please select a rider first");return}z(!0)},oe=()=>{console.log("Managing orders for rider:",s),z(!1)},je=()=>{console.log("Processing cashout for rider:",s),z(!1)},de=()=>{if(!s){alert("Please select a rider first");return}U(!0)},re={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Deliveries",data:[12,20,15,24,18,18,23],borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,fill:!0,tension:.4,pointBackgroundColor:"#3B82F6",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]},Te={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:"Delivery Performance Over Time",font:{size:16,weight:"bold"},padding:{bottom:20}}},scales:{y:{beginAtZero:!0,max:25,ticks:{stepSize:5,font:{size:11}},grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{ticks:{font:{size:11}},grid:{display:!1}}},elements:{point:{hoverBackgroundColor:"#3B82F6"}}};return e.jsxs("div",{className:"min-h-screen",children:[e.jsx("style",{jsx:!0,children:`
        input[type="date"], input[type="time"] {
          color-scheme: light;
          position: relative;
          z-index: 1;
        }
        input[type="date"]::-webkit-calendar-picker-indicator,
        input[type="time"]::-webkit-calendar-picker-indicator {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          width: auto;
          height: auto;
          color: transparent;
          background: transparent;
          cursor: pointer;
          z-index: 2;
        }
        input[type="date"]::-webkit-inner-spin-button,
        input[type="date"]::-webkit-clear-button,
        input[type="time"]::-webkit-inner-spin-button,
        input[type="time"]::-webkit-clear-button {
          display: none;
          -webkit-appearance: none;
        }
        input[type="date"]:focus,
        input[type="time"]:focus {
          outline: none;
          z-index: 10;
          position: relative;
        }
        input[type="date"]:focus::-webkit-calendar-picker-indicator,
        input[type="time"]:focus::-webkit-calendar-picker-indicator {
          z-index: 11;
        }
      `}),e.jsxs("div",{className:"bg-white p-6 mb-6 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yu,{size:24,className:"text-primary"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Delivery Report"})]}),e.jsxs("p",{className:"text-gray-600 mt-1 text-sm bg-[#F3F4F6] rounded-lg p-2",children:["Register: ",e.jsx("span",{className:"font-bold text-primary",children:"001"})]})]}),e.jsxs("div",{className:"flex items-end gap-2 bg-[#F8F9FA] border border-gray-300 rounded-lg p-2",children:[e.jsxs("div",{className:"flex flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Start Date:"}),e.jsxs("div",{className:"flex items-center gap-1 bg-white border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("input",{type:"date",value:r,onChange:De=>n(De.target.value),onClick:De=>De.stopPropagation(),onFocus:De=>De.stopPropagation(),onBlur:De=>De.stopPropagation(),className:"text-sm border-none outline-none bg-transparent w-20"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("input",{type:"time",value:o,onChange:De=>c(De.target.value),onClick:De=>De.stopPropagation(),onFocus:De=>De.stopPropagation(),onBlur:De=>De.stopPropagation(),className:"text-sm border-none outline-none bg-transparent w-16"})]})]}),e.jsxs("div",{className:"flex flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"End Date:"}),e.jsxs("div",{className:"flex items-center gap-1 bg-white border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("input",{type:"date",value:d,onChange:De=>m(De.target.value),onClick:De=>De.stopPropagation(),onFocus:De=>De.stopPropagation(),onBlur:De=>De.stopPropagation(),className:"text-sm border-none outline-none bg-transparent w-20"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("input",{type:"time",value:h,onChange:De=>g(De.target.value),onClick:De=>De.stopPropagation(),onFocus:De=>De.stopPropagation(),onBlur:De=>De.stopPropagation(),className:"text-sm border-none outline-none bg-transparent w-16"})]})]}),e.jsx("button",{className:"bg-primary text-white px-4 py-3 rounded-lg text-sm font-medium flex items-center gap-2 whitespace-nowrap",children:"Print Delivery Summary"})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsx("button",{onClick:P,className:"bg-gray-600 hover:bg-gray-700 text-white p-4 rounded-lg text-sm font-medium",children:"Select Rider"}),e.jsx("button",{onClick:M,className:"bg-primary/80 text-white p-4 rounded-lg text-sm font-medium flex items-center gap-2",children:"Add Rider"}),e.jsx("div",{className:"bg-gray-200 text-gray-600 p-4 rounded-lg text-sm",children:s?s.name:"No rider selected"}),e.jsx("button",{onClick:de,className:"bg-primary text-white p-4 rounded-lg text-sm font-medium flex items-center gap-2",children:"Print Report"}),e.jsx("button",{onClick:ee,className:"bg-red-600 hover:bg-red-700 text-white p-4 rounded-lg text-sm font-medium flex items-center gap-2",children:"Print Report & Cash Out"})]})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-60 space-y-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(kh,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Total Deliveries"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:"0"})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Yb,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Delivery Revenue"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:"€0.00"})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Lc,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Active Riders"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:"0"})]})]})})]}),e.jsx("div",{className:"flex-1 bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsx("div",{className:"h-80",children:e.jsx(Bj,{data:re,options:Te})})})]}),y&&!S&&e.jsx(v6,{isOpen:y,onClose:()=>w(!1),onSave:q}),S&&!y&&!E&&e.jsx(Tx,{isOpen:S,onClose:()=>_(!1),onBack:R,order:{orderNumber:"001"},onAssignRider:O,onStatusUpdate:()=>{}}),E&&!y&&!S&&!I&&e.jsx(w6,{isOpen:E,onClose:()=>z(!1),rider:s,onManageOrders:oe,onProcessCashout:je}),I&&!y&&!S&&!E&&e.jsx(S6,{isOpen:I,onClose:()=>U(!1),rider:s,reportData:{rider:s?.name||"Sarah O'Connor",orders:2,amount:54.75,distance:6.7}})]})},k6=()=>{const[s,t]=v.useState("delivery"),r=[{id:"delivery",name:"Delivery Reports",icon:e.jsx(So,{size:18}),component:e.jsx(C6,{})},{id:"daily",name:"Daily Reports",icon:e.jsx(Pc,{size:18}),component:e.jsx(b6,{})}];return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:r.map(n=>e.jsxs("button",{onClick:()=>t(n.id),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${s===n.id?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.icon,n.name]},n.id))})})}),e.jsx("div",{children:r.find(n=>n.id===s)?.component})]})},_6=v.createContext(),A6=({children:s})=>{const[t,r]=v.useState(()=>{const m=localStorage.getItem("posZoomLevel");return m?parseFloat(m):1});v.useEffect(()=>{localStorage.setItem("posZoomLevel",t.toString())},[t]),v.useEffect(()=>{const m=document.documentElement;if(m.style.setProperty("--zoom-level",t),m.style.zoom=t,m.style.zoom===""){m.style.transform=`scale(${t})`,m.style.transformOrigin="center top";const g=document.body,y=document.documentElement,w=1/t;g.style.width=`${window.innerWidth*w}px`,g.style.height=`${window.innerHeight*w}px`,g.style.overflow="hidden",y.style.width="100vw",y.style.height="100vh",y.style.overflow="hidden"}const h=()=>{if(m.style.zoom===""){const g=document.body,y=1/t;g.style.width=`${window.innerWidth*y}px`,g.style.height=`${window.innerHeight*y}px`}};return window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h),m.style.zoom="",m.style.transform="",m.style.transformOrigin="",m.style.width="",m.style.height="",m.style.overflow="";const g=document.body;g.style.width="",g.style.height="",g.style.overflow=""}},[t]);const d={zoomLevel:t,zoomIn:()=>{r(m=>Math.min(m+.1,2))},zoomOut:()=>{r(m=>Math.max(m-.1,.5))},resetZoom:()=>{r(1)},setZoomLevel:r};return e.jsx(_6.Provider,{value:d,children:s})};console.log("main.jsx loading...");const sa=({children:s})=>{try{return s}catch(t){return console.error("Error in component:",t),e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h1",{children:"Something went wrong"}),e.jsx("p",{children:t.message})]})}},D6=lC([{path:"/",element:e.jsx(sa,{children:e.jsx(jC,{children:e.jsx(A6,{children:e.jsx(GC,{children:e.jsx(_C,{children:e.jsx($C,{children:e.jsx(AC,{children:e.jsx(JC,{})})})})})})})}),children:[{index:!0,element:e.jsx(sa,{children:e.jsx(t3,{})})},{path:"login",element:e.jsx(sa,{children:e.jsx(wC,{})})},{path:"license",element:e.jsx(sa,{children:e.jsx(s3,{})})},{path:"dashboard",element:e.jsx(sa,{children:e.jsx(TC,{})}),children:[{index:!0,element:e.jsx(sa,{children:e.jsx(V5,{})})},{path:"manage-orders",element:e.jsx(sa,{children:e.jsx(Y5,{})})},{path:"reservations",element:e.jsx(sa,{children:e.jsx(q5,{})})},{path:"kds",element:e.jsx(sa,{children:e.jsx(W5,{})})},{path:"food-management",element:e.jsx(sa,{children:e.jsx(a6,{})})},{path:"food-management/add-food",element:e.jsx(sa,{children:e.jsx(Fb,{})})},{path:"food-management/edit-food/:id",element:e.jsx(sa,{children:e.jsx(Fb,{})})},{path:"employee-management",element:e.jsx(sa,{children:e.jsx(i6,{})})},{path:"customer-management",element:e.jsx(sa,{children:e.jsx(h6,{})})},{path:"table-management",element:e.jsx(sa,{children:e.jsx(c6,{})})},{path:"coupons",element:e.jsx(sa,{children:e.jsx(m6,{})})},{path:"sales",element:e.jsx(sa,{children:e.jsx(QC,{})})},{path:"reports",element:e.jsx(sa,{children:e.jsx(k6,{})})},{path:"admin-panel",element:e.jsx(sa,{children:e.jsx(x6,{})})},{path:"application-settings",element:e.jsx(sa,{children:e.jsx(p6,{})})},{path:"change-password",element:e.jsx(sa,{children:e.jsx(y6,{})})}]},{path:"*",element:e.jsx("div",{children:e.jsx("h1",{children:"404 - Page not found"})})}]}]);console.log("Router created, attempting to render...");const ix=document.getElementById("root");console.log("Root element:",ix);ix?(Qw.createRoot(ix).render(e.jsx(v.StrictMode,{children:e.jsx(vC,{router:D6})})),console.log("App rendered successfully")):console.error("Root element not found!");
