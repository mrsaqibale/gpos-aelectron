(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();function Lb(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var xx={exports:{}},Wd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0;function $w(){if(E0)return Wd;E0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:s,type:n,key:d,ref:o!==void 0?o:null,props:c}}return Wd.Fragment=t,Wd.jsx=r,Wd.jsxs=r,Wd}var T0;function Hw(){return T0||(T0=1,xx.exports=$w()),xx.exports}var e=Hw(),gx={exports:{}},ns={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function Vw(){if(M0)return ns;M0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),w=Symbol.iterator;function N(Y){return Y===null||typeof Y!="object"?null:(Y=w&&Y[w]||Y["@@iterator"],typeof Y=="function"?Y:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,L={};function B(Y,be,ye){this.props=Y,this.context=be,this.refs=L,this.updater=ye||_}B.prototype.isReactComponent={},B.prototype.setState=function(Y,be){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,be,"setState")},B.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function z(){}z.prototype=B.prototype;function q(Y,be,ye){this.props=Y,this.context=be,this.refs=L,this.updater=ye||_}var R=q.prototype=new z;R.constructor=q,D(R,B.prototype),R.isPureReactComponent=!0;var F=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function se(Y,be,ye,ae,Ne,ge){return ye=ge.ref,{$$typeof:s,type:Y,key:be,ref:ye!==void 0?ye:null,props:ge}}function oe(Y,be){return se(Y.type,be,void 0,void 0,void 0,Y.props)}function _e(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===s}function he(Y){var be={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(ye){return be[ye]})}var ie=/\/+/g;function Ee(Y,be){return typeof Y=="object"&&Y!==null&&Y.key!=null?he(""+Y.key):be.toString(36)}function Ae(){}function re(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(Ae,Ae):(Y.status="pending",Y.then(function(be){Y.status==="pending"&&(Y.status="fulfilled",Y.value=be)},function(be){Y.status==="pending"&&(Y.status="rejected",Y.reason=be)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function le(Y,be,ye,ae,Ne){var ge=typeof Y;(ge==="undefined"||ge==="boolean")&&(Y=null);var A=!1;if(Y===null)A=!0;else switch(ge){case"bigint":case"string":case"number":A=!0;break;case"object":switch(Y.$$typeof){case s:case t:A=!0;break;case p:return A=Y._init,le(A(Y._payload),be,ye,ae,Ne)}}if(A)return Ne=Ne(Y),A=ae===""?"."+Ee(Y,0):ae,F(Ne)?(ye="",A!=null&&(ye=A.replace(ie,"$&/")+"/"),le(Ne,be,ye,"",function(g){return g})):Ne!=null&&(_e(Ne)&&(Ne=oe(Ne,ye+(Ne.key==null||Y&&Y.key===Ne.key?"":(""+Ne.key).replace(ie,"$&/")+"/")+A)),be.push(Ne)),1;A=0;var P=ae===""?".":ae+":";if(F(Y))for(var f=0;f<Y.length;f++)ae=Y[f],ge=P+Ee(ae,f),A+=le(ae,be,ye,ge,Ne);else if(f=N(Y),typeof f=="function")for(Y=f.call(Y),f=0;!(ae=Y.next()).done;)ae=ae.value,ge=P+Ee(ae,f++),A+=le(ae,be,ye,ge,Ne);else if(ge==="object"){if(typeof Y.then=="function")return le(re(Y),be,ye,ae,Ne);throw be=String(Y),Error("Objects are not valid as a React child (found: "+(be==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":be)+"). If you meant to render a collection of children, use an array instead.")}return A}function J(Y,be,ye){if(Y==null)return Y;var ae=[],Ne=0;return le(Y,ae,"","",function(ge){return be.call(ye,ge,Ne++)}),ae}function Ce(Y){if(Y._status===-1){var be=Y._result;be=be(),be.then(function(ye){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=ye)},function(ye){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=ye)}),Y._status===-1&&(Y._status=0,Y._result=be)}if(Y._status===1)return Y._result.default;throw Y._result}var Se=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var be=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(be))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function He(){}return ns.Children={map:J,forEach:function(Y,be,ye){J(Y,function(){be.apply(this,arguments)},ye)},count:function(Y){var be=0;return J(Y,function(){be++}),be},toArray:function(Y){return J(Y,function(be){return be})||[]},only:function(Y){if(!_e(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},ns.Component=B,ns.Fragment=r,ns.Profiler=o,ns.PureComponent=q,ns.StrictMode=n,ns.Suspense=h,ns.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,ns.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return T.H.useMemoCache(Y)}},ns.cache=function(Y){return function(){return Y.apply(null,arguments)}},ns.cloneElement=function(Y,be,ye){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var ae=D({},Y.props),Ne=Y.key,ge=void 0;if(be!=null)for(A in be.ref!==void 0&&(ge=void 0),be.key!==void 0&&(Ne=""+be.key),be)!I.call(be,A)||A==="key"||A==="__self"||A==="__source"||A==="ref"&&be.ref===void 0||(ae[A]=be[A]);var A=arguments.length-2;if(A===1)ae.children=ye;else if(1<A){for(var P=Array(A),f=0;f<A;f++)P[f]=arguments[f+2];ae.children=P}return se(Y.type,Ne,void 0,void 0,ge,ae)},ns.createContext=function(Y){return Y={$$typeof:d,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:c,_context:Y},Y},ns.createElement=function(Y,be,ye){var ae,Ne={},ge=null;if(be!=null)for(ae in be.key!==void 0&&(ge=""+be.key),be)I.call(be,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(Ne[ae]=be[ae]);var A=arguments.length-2;if(A===1)Ne.children=ye;else if(1<A){for(var P=Array(A),f=0;f<A;f++)P[f]=arguments[f+2];Ne.children=P}if(Y&&Y.defaultProps)for(ae in A=Y.defaultProps,A)Ne[ae]===void 0&&(Ne[ae]=A[ae]);return se(Y,ge,void 0,void 0,null,Ne)},ns.createRef=function(){return{current:null}},ns.forwardRef=function(Y){return{$$typeof:m,render:Y}},ns.isValidElement=_e,ns.lazy=function(Y){return{$$typeof:p,_payload:{_status:-1,_result:Y},_init:Ce}},ns.memo=function(Y,be){return{$$typeof:x,type:Y,compare:be===void 0?null:be}},ns.startTransition=function(Y){var be=T.T,ye={};T.T=ye;try{var ae=Y(),Ne=T.S;Ne!==null&&Ne(ye,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(He,Se)}catch(ge){Se(ge)}finally{T.T=be}},ns.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},ns.use=function(Y){return T.H.use(Y)},ns.useActionState=function(Y,be,ye){return T.H.useActionState(Y,be,ye)},ns.useCallback=function(Y,be){return T.H.useCallback(Y,be)},ns.useContext=function(Y){return T.H.useContext(Y)},ns.useDebugValue=function(){},ns.useDeferredValue=function(Y,be){return T.H.useDeferredValue(Y,be)},ns.useEffect=function(Y,be,ye){var ae=T.H;if(typeof ye=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(Y,be)},ns.useId=function(){return T.H.useId()},ns.useImperativeHandle=function(Y,be,ye){return T.H.useImperativeHandle(Y,be,ye)},ns.useInsertionEffect=function(Y,be){return T.H.useInsertionEffect(Y,be)},ns.useLayoutEffect=function(Y,be){return T.H.useLayoutEffect(Y,be)},ns.useMemo=function(Y,be){return T.H.useMemo(Y,be)},ns.useOptimistic=function(Y,be){return T.H.useOptimistic(Y,be)},ns.useReducer=function(Y,be,ye){return T.H.useReducer(Y,be,ye)},ns.useRef=function(Y){return T.H.useRef(Y)},ns.useState=function(Y){return T.H.useState(Y)},ns.useSyncExternalStore=function(Y,be,ye){return T.H.useSyncExternalStore(Y,be,ye)},ns.useTransition=function(){return T.H.useTransition()},ns.version="19.1.1",ns}var O0;function Lh(){return O0||(O0=1,gx.exports=Vw()),gx.exports}var v=Lh();const Sr=Lb(v);var px={exports:{}},Xd={},yx={exports:{}},bx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function qw(){return R0||(R0=1,(function(s){function t(J,Ce){var Se=J.length;J.push(Ce);e:for(;0<Se;){var He=Se-1>>>1,Y=J[He];if(0<o(Y,Ce))J[He]=Ce,J[Se]=Y,Se=He;else break e}}function r(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var Ce=J[0],Se=J.pop();if(Se!==Ce){J[0]=Se;e:for(var He=0,Y=J.length,be=Y>>>1;He<be;){var ye=2*(He+1)-1,ae=J[ye],Ne=ye+1,ge=J[Ne];if(0>o(ae,Se))Ne<Y&&0>o(ge,ae)?(J[He]=ge,J[Ne]=Se,He=Ne):(J[He]=ae,J[ye]=Se,He=ye);else if(Ne<Y&&0>o(ge,Se))J[He]=ge,J[Ne]=Se,He=Ne;else break e}}return Ce}function o(J,Ce){var Se=J.sortIndex-Ce.sortIndex;return Se!==0?Se:J.id-Ce.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var h=[],x=[],p=1,w=null,N=3,_=!1,D=!1,L=!1,B=!1,z=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function F(J){for(var Ce=r(x);Ce!==null;){if(Ce.callback===null)n(x);else if(Ce.startTime<=J)n(x),Ce.sortIndex=Ce.expirationTime,t(h,Ce);else break;Ce=r(x)}}function T(J){if(L=!1,F(J),!D)if(r(h)!==null)D=!0,I||(I=!0,Ee());else{var Ce=r(x);Ce!==null&&le(T,Ce.startTime-J)}}var I=!1,se=-1,oe=5,_e=-1;function he(){return B?!0:!(s.unstable_now()-_e<oe)}function ie(){if(B=!1,I){var J=s.unstable_now();_e=J;var Ce=!0;try{e:{D=!1,L&&(L=!1,q(se),se=-1),_=!0;var Se=N;try{t:{for(F(J),w=r(h);w!==null&&!(w.expirationTime>J&&he());){var He=w.callback;if(typeof He=="function"){w.callback=null,N=w.priorityLevel;var Y=He(w.expirationTime<=J);if(J=s.unstable_now(),typeof Y=="function"){w.callback=Y,F(J),Ce=!0;break t}w===r(h)&&n(h),F(J)}else n(h);w=r(h)}if(w!==null)Ce=!0;else{var be=r(x);be!==null&&le(T,be.startTime-J),Ce=!1}}break e}finally{w=null,N=Se,_=!1}Ce=void 0}}finally{Ce?Ee():I=!1}}}var Ee;if(typeof R=="function")Ee=function(){R(ie)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,re=Ae.port2;Ae.port1.onmessage=ie,Ee=function(){re.postMessage(null)}}else Ee=function(){z(ie,0)};function le(J,Ce){se=z(function(){J(s.unstable_now())},Ce)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(J){J.callback=null},s.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<J?Math.floor(1e3/J):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(J){switch(N){case 1:case 2:case 3:var Ce=3;break;default:Ce=N}var Se=N;N=Ce;try{return J()}finally{N=Se}},s.unstable_requestPaint=function(){B=!0},s.unstable_runWithPriority=function(J,Ce){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Se=N;N=J;try{return Ce()}finally{N=Se}},s.unstable_scheduleCallback=function(J,Ce,Se){var He=s.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?He+Se:He):Se=He,J){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=Se+Y,J={id:p++,callback:Ce,priorityLevel:J,startTime:Se,expirationTime:Y,sortIndex:-1},Se>He?(J.sortIndex=Se,t(x,J),r(h)===null&&J===r(x)&&(L?(q(se),se=-1):L=!0,le(T,Se-He))):(J.sortIndex=Y,t(h,J),D||_||(D=!0,I||(I=!0,Ee()))),J},s.unstable_shouldYield=he,s.unstable_wrapCallback=function(J){var Ce=N;return function(){var Se=N;N=Ce;try{return J.apply(this,arguments)}finally{N=Se}}}})(bx)),bx}var I0;function Kw(){return I0||(I0=1,yx.exports=qw()),yx.exports}var vx={exports:{}},Va={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function Yw(){if(z0)return Va;z0=1;var s=Lh();function t(h){var x="https://react.dev/errors/"+h;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)x+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(h,x,p){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:h,containerInfo:x,implementation:p}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(h,x){if(h==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Va.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Va.createPortal=function(h,x){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(t(299));return c(h,x,null,p)},Va.flushSync=function(h){var x=d.T,p=n.p;try{if(d.T=null,n.p=2,h)return h()}finally{d.T=x,n.p=p,n.d.f()}},Va.preconnect=function(h,x){typeof h=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,n.d.C(h,x))},Va.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},Va.preinit=function(h,x){if(typeof h=="string"&&x&&typeof x.as=="string"){var p=x.as,w=m(p,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,_=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;p==="style"?n.d.S(h,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:N,fetchPriority:_}):p==="script"&&n.d.X(h,{crossOrigin:w,integrity:N,fetchPriority:_,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Va.preinitModule=function(h,x){if(typeof h=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var p=m(x.as,x.crossOrigin);n.d.M(h,{crossOrigin:p,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&n.d.M(h)},Va.preload=function(h,x){if(typeof h=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var p=x.as,w=m(p,x.crossOrigin);n.d.L(h,p,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Va.preloadModule=function(h,x){if(typeof h=="string")if(x){var p=m(x.as,x.crossOrigin);n.d.m(h,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:p,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else n.d.m(h)},Va.requestFormReset=function(h){n.d.r(h)},Va.unstable_batchedUpdates=function(h,x){return h(x)},Va.useFormState=function(h,x,p){return d.H.useFormState(h,x,p)},Va.useFormStatus=function(){return d.H.useHostTransitionStatus()},Va.version="19.1.1",Va}var P0;function Bb(){if(P0)return vx.exports;P0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),vx.exports=Yw(),vx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function Gw(){if(F0)return Xd;F0=1;var s=Kw(),t=Lh(),r=Bb();function n(a){var i="https://react.dev/errors/"+a;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function c(a){var i=a,l=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(l=i.return),a=i.return;while(a)}return i.tag===3?l:null}function d(a){if(a.tag===13){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function m(a){if(c(a)!==a)throw Error(n(188))}function h(a){var i=a.alternate;if(!i){if(i=c(a),i===null)throw Error(n(188));return i!==a?null:a}for(var l=a,u=i;;){var y=l.return;if(y===null)break;var j=y.alternate;if(j===null){if(u=y.return,u!==null){l=u;continue}break}if(y.child===j.child){for(j=y.child;j;){if(j===l)return m(y),a;if(j===u)return m(y),i;j=j.sibling}throw Error(n(188))}if(l.return!==u.return)l=y,u=j;else{for(var $=!1,W=y.child;W;){if(W===l){$=!0,l=y,u=j;break}if(W===u){$=!0,u=y,l=j;break}W=W.sibling}if(!$){for(W=j.child;W;){if(W===l){$=!0,l=j,u=y;break}if(W===u){$=!0,u=j,l=y;break}W=W.sibling}if(!$)throw Error(n(189))}}if(l.alternate!==u)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?a:i}function x(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(i=x(a),i!==null)return i;a=a.sibling}return null}var p=Object.assign,w=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),R=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),_e=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function Ee(a){return a===null||typeof a!="object"?null:(a=ie&&a[ie]||a["@@iterator"],typeof a=="function"?a:null)}var Ae=Symbol.for("react.client.reference");function re(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Ae?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case D:return"Fragment";case B:return"Profiler";case L:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList";case _e:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case _:return"Portal";case R:return(a.displayName||"Context")+".Provider";case q:return(a._context.displayName||"Context")+".Consumer";case F:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case se:return i=a.displayName||null,i!==null?i:re(a.type)||"Memo";case oe:i=a._payload,a=a._init;try{return re(a(i))}catch{}}return null}var le=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},He=[],Y=-1;function be(a){return{current:a}}function ye(a){0>Y||(a.current=He[Y],He[Y]=null,Y--)}function ae(a,i){Y++,He[Y]=a.current,a.current=i}var Ne=be(null),ge=be(null),A=be(null),P=be(null);function f(a,i){switch(ae(A,i),ae(ge,a),ae(Ne,null),i.nodeType){case 9:case 11:a=(a=i.documentElement)&&(a=a.namespaceURI)?r0(a):0;break;default:if(a=i.tagName,i=i.namespaceURI)i=r0(i),a=n0(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ye(Ne),ae(Ne,a)}function g(){ye(Ne),ye(ge),ye(A)}function S(a){a.memoizedState!==null&&ae(P,a);var i=Ne.current,l=n0(i,a.type);i!==l&&(ae(ge,a),ae(Ne,l))}function k(a){ge.current===a&&(ye(Ne),ye(ge)),P.current===a&&(ye(P),Vd._currentValue=Se)}var C=Object.prototype.hasOwnProperty,O=s.unstable_scheduleCallback,U=s.unstable_cancelCallback,H=s.unstable_shouldYield,V=s.unstable_requestPaint,ee=s.unstable_now,X=s.unstable_getCurrentPriorityLevel,M=s.unstable_ImmediatePriority,Q=s.unstable_UserBlockingPriority,ue=s.unstable_NormalPriority,ne=s.unstable_LowPriority,fe=s.unstable_IdlePriority,ce=s.log,Me=s.unstable_setDisableYieldValue,Re=null,ze=null;function rt(a){if(typeof ce=="function"&&Me(a),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(Re,a)}catch{}}var Ve=Math.clz32?Math.clz32:it,Je=Math.log,We=Math.LN2;function it(a){return a>>>=0,a===0?32:31-(Je(a)/We|0)|0}var Qe=256,At=4194304;function xt(a){var i=a&42;if(i!==0)return i;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Te(a,i,l){var u=a.pendingLanes;if(u===0)return 0;var y=0,j=a.suspendedLanes,$=a.pingedLanes;a=a.warmLanes;var W=u&134217727;return W!==0?(u=W&~j,u!==0?y=xt(u):($&=W,$!==0?y=xt($):l||(l=W&~a,l!==0&&(y=xt(l))))):(W=u&~j,W!==0?y=xt(W):$!==0?y=xt($):l||(l=u&~a,l!==0&&(y=xt(l)))),y===0?0:i!==0&&i!==y&&(i&j)===0&&(j=y&-y,l=i&-i,j>=l||j===32&&(l&4194048)!==0)?i:y}function Ke(a,i){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&i)===0}function Pe(a,i){switch(a){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qe(){var a=Qe;return Qe<<=1,(Qe&4194048)===0&&(Qe=256),a}function ft(){var a=At;return At<<=1,(At&62914560)===0&&(At=4194304),a}function ot(a){for(var i=[],l=0;31>l;l++)i.push(a);return i}function pt(a,i){a.pendingLanes|=i,i!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ke(a,i,l,u,y,j){var $=a.pendingLanes;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=l,a.entangledLanes&=l,a.errorRecoveryDisabledLanes&=l,a.shellSuspendCounter=0;var W=a.entanglements,we=a.expirationTimes,Ge=a.hiddenUpdates;for(l=$&~l;0<l;){var lt=31-Ve(l),ht=1<<lt;W[lt]=0,we[lt]=-1;var et=Ge[lt];if(et!==null)for(Ge[lt]=null,lt=0;lt<et.length;lt++){var at=et[lt];at!==null&&(at.lane&=-536870913)}l&=~ht}u!==0&&st(a,u,0),j!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=j&~($&~i))}function st(a,i,l){a.pendingLanes|=i,a.suspendedLanes&=~i;var u=31-Ve(i);a.entangledLanes|=i,a.entanglements[u]=a.entanglements[u]|1073741824|l&4194090}function gt(a,i){var l=a.entangledLanes|=i;for(a=a.entanglements;l;){var u=31-Ve(l),y=1<<u;y&i|a[u]&i&&(a[u]|=i),l&=~y}}function kt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Mt(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function de(){var a=Ce.p;return a!==0?a:(a=window.event,a===void 0?32:S0(a.type))}function De(a,i){var l=Ce.p;try{return Ce.p=a,i()}finally{Ce.p=l}}var Le=Math.random().toString(36).slice(2),ve="__reactFiber$"+Le,Ze="__reactProps$"+Le,mt="__reactContainer$"+Le,dt="__reactEvents$"+Le,jt="__reactListeners$"+Le,wt="__reactHandles$"+Le,Tt="__reactResources$"+Le,me="__reactMarker$"+Le;function Ie(a){delete a[ve],delete a[Ze],delete a[dt],delete a[jt],delete a[wt]}function te(a){var i=a[ve];if(i)return i;for(var l=a.parentNode;l;){if(i=l[mt]||l[ve]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(a=c0(a);a!==null;){if(l=a[ve])return l;a=c0(a)}return i}a=l,l=a.parentNode}return null}function Z(a){if(a=a[ve]||a[mt]){var i=a.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return a}return null}function Be(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a.stateNode;throw Error(n(33))}function Xe(a){var i=a[Tt];return i||(i=a[Tt]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function nt(a){a[me]=!0}var ut=new Set,Et={};function Rt(a,i){Ht(a,i),Ht(a+"Capture",i)}function Ht(a,i){for(Et[a]=i,a=0;a<i.length;a++)ut.add(i[a])}var ss=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pt={},ms={};function as(a){return C.call(ms,a)?!0:C.call(Pt,a)?!1:ss.test(a)?ms[a]=!0:(Pt[a]=!0,!1)}function ys(a,i,l){if(as(i))if(l===null)a.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":a.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){a.removeAttribute(i);return}}a.setAttribute(i,""+l)}}function vs(a,i,l){if(l===null)a.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(i);return}a.setAttribute(i,""+l)}}function Nt(a,i,l,u){if(u===null)a.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttributeNS(i,l,""+u)}}var Ct,zt;function qt(a){if(Ct===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Ct=i&&i[1]||"",zt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ct+a+zt}var Kt=!1;function js(a,i){if(!a||Kt)return"";Kt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(at){var et=at}Reflect.construct(a,[],ht)}else{try{ht.call()}catch(at){et=at}a.call(ht.prototype)}}else{try{throw Error()}catch(at){et=at}(ht=a())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(at){if(at&&et&&typeof at.stack=="string")return[at.stack,et.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=u.DetermineComponentFrameRoot(),$=j[0],W=j[1];if($&&W){var we=$.split(`
`),Ge=W.split(`
`);for(y=u=0;u<we.length&&!we[u].includes("DetermineComponentFrameRoot");)u++;for(;y<Ge.length&&!Ge[y].includes("DetermineComponentFrameRoot");)y++;if(u===we.length||y===Ge.length)for(u=we.length-1,y=Ge.length-1;1<=u&&0<=y&&we[u]!==Ge[y];)y--;for(;1<=u&&0<=y;u--,y--)if(we[u]!==Ge[y]){if(u!==1||y!==1)do if(u--,y--,0>y||we[u]!==Ge[y]){var lt=`
`+we[u].replace(" at new "," at ");return a.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",a.displayName)),lt}while(1<=u&&0<=y);break}}}finally{Kt=!1,Error.prepareStackTrace=l}return(l=a?a.displayName||a.name:"")?qt(l):""}function aa(a){switch(a.tag){case 26:case 27:case 5:return qt(a.type);case 16:return qt("Lazy");case 13:return qt("Suspense");case 19:return qt("SuspenseList");case 0:case 15:return js(a.type,!1);case 11:return js(a.type.render,!1);case 1:return js(a.type,!0);case 31:return qt("Activity");default:return""}}function Ci(a){try{var i="";do i+=aa(a),a=a.return;while(a);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Xa(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Do(a){var i=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Uc(a){var i=Do(a)?"checked":"value",l=Object.getOwnPropertyDescriptor(a.constructor.prototype,i),u=""+a[i];if(!a.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var y=l.get,j=l.set;return Object.defineProperty(a,i,{configurable:!0,get:function(){return y.call(this)},set:function($){u=""+$,j.call(this,$)}}),Object.defineProperty(a,i,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function($){u=""+$},stopTracking:function(){a._valueTracker=null,delete a[i]}}}}function Os(a){a._valueTracker||(a._valueTracker=Uc(a))}function Cl(a){if(!a)return!1;var i=a._valueTracker;if(!i)return!0;var l=i.getValue(),u="";return a&&(u=Do(a)?a.checked?"true":"false":a.value),a=u,a!==l?(i.setValue(a),!0):!1}function ki(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Eo=/[\n"\\]/g;function zs(a){return a.replace(Eo,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Nn(a,i,l,u,y,j,$,W){a.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?a.type=$:a.removeAttribute("type"),i!=null?$==="number"?(i===0&&a.value===""||a.value!=i)&&(a.value=""+Xa(i)):a.value!==""+Xa(i)&&(a.value=""+Xa(i)):$!=="submit"&&$!=="reset"||a.removeAttribute("value"),i!=null?Xn(a,$,Xa(i)):l!=null?Xn(a,$,Xa(l)):u!=null&&a.removeAttribute("value"),y==null&&j!=null&&(a.defaultChecked=!!j),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?a.name=""+Xa(W):a.removeAttribute("name")}function kl(a,i,l,u,y,j,$,W){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(a.type=j),i!=null||l!=null){if(!(j!=="submit"&&j!=="reset"||i!=null))return;l=l!=null?""+Xa(l):"",i=i!=null?""+Xa(i):l,W||i===a.value||(a.value=i),a.defaultValue=i}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,a.checked=W?a.checked:!!u,a.defaultChecked=!!u,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(a.name=$)}function Xn(a,i,l){i==="number"&&ki(a.ownerDocument)===a||a.defaultValue===""+l||(a.defaultValue=""+l)}function pa(a,i,l,u){if(a=a.options,i){i={};for(var y=0;y<l.length;y++)i["$"+l[y]]=!0;for(l=0;l<a.length;l++)y=i.hasOwnProperty("$"+a[l].value),a[l].selected!==y&&(a[l].selected=y),y&&u&&(a[l].defaultSelected=!0)}else{for(l=""+Xa(l),i=null,y=0;y<a.length;y++){if(a[y].value===l){a[y].selected=!0,u&&(a[y].defaultSelected=!0);return}i!==null||a[y].disabled||(i=a[y])}i!==null&&(i.selected=!0)}}function Sn(a,i,l){if(i!=null&&(i=""+Xa(i),i!==a.value&&(a.value=i),l==null)){a.defaultValue!==i&&(a.defaultValue=i);return}a.defaultValue=l!=null?""+Xa(l):""}function Qn(a,i,l,u){if(i==null){if(u!=null){if(l!=null)throw Error(n(92));if(le(u)){if(1<u.length)throw Error(n(93));u=u[0]}l=u}l==null&&(l=""),i=l}l=Xa(i),a.defaultValue=l,u=a.textContent,u===l&&u!==""&&u!==null&&(a.value=u)}function Cr(a,i){if(i){var l=a.firstChild;if(l&&l===a.lastChild&&l.nodeType===3){l.nodeValue=i;return}}a.textContent=i}var $r=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hr(a,i,l){var u=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?a.setProperty(i,""):i==="float"?a.cssFloat="":a[i]="":u?a.setProperty(i,l):typeof l!="number"||l===0||$r.has(i)?i==="float"?a.cssFloat=l:a[i]=(""+l).trim():a[i]=l+"px"}function on(a,i,l){if(i!=null&&typeof i!="object")throw Error(n(62));if(a=a.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="");for(var y in i)u=i[y],i.hasOwnProperty(y)&&l[y]!==u&&Hr(a,y,u)}else for(var j in i)i.hasOwnProperty(j)&&Hr(a,j,i[j])}function kr(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ir=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),or=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cn(a){return or.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var la=null;function kn(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Vs=null,ca=null;function Zn(a){var i=Z(a);if(i&&(a=i.stateNode)){var l=a[Ze]||null;e:switch(a=i.stateNode,i.type){case"input":if(Nn(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=a;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+zs(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var u=l[i];if(u!==a&&u.form===a.form){var y=u[Ze]||null;if(!y)throw Error(n(90));Nn(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(i=0;i<l.length;i++)u=l[i],u.form===a.form&&Cl(u)}break e;case"textarea":Sn(a,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&pa(a,!!l.multiple,i,!1)}}}var Jn=!1;function Rs(a,i,l){if(Jn)return a(i,l);Jn=!0;try{var u=a(i);return u}finally{if(Jn=!1,(Vs!==null||ca!==null)&&(Tm(),Vs&&(i=Vs,a=ca,ca=Vs=null,Zn(i),a)))for(i=0;i<a.length;i++)Zn(a[i])}}function ya(a,i){var l=a.stateNode;if(l===null)return null;var u=l[Ze]||null;if(u===null)return null;l=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(a=a.type,u=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!u;break e;default:a=!1}if(a)return null;if(l&&typeof l!="function")throw Error(n(231,i,typeof l));return l}var da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ln=!1;if(da)try{var _a={};Object.defineProperty(_a,"passive",{get:function(){ln=!0}}),window.addEventListener("test",_a,_a),window.removeEventListener("test",_a,_a)}catch{ln=!1}var G=null,Fe=null,Lt=null;function Jt(){if(Lt)return Lt;var a,i=Fe,l=i.length,u,y="value"in G?G.value:G.textContent,j=y.length;for(a=0;a<l&&i[a]===y[a];a++);var $=l-a;for(u=1;u<=$&&i[l-u]===y[j-u];u++);return Lt=y.slice(a,1<u?1-u:void 0)}function rs(a){var i=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&i===13&&(a=13)):a=i,a===10&&(a=13),32<=a||a===13?a:0}function lr(){return!0}function Vr(){return!1}function os(a){function i(l,u,y,j,$){this._reactName=l,this._targetInst=y,this.type=u,this.nativeEvent=j,this.target=$,this.currentTarget=null;for(var W in a)a.hasOwnProperty(W)&&(l=a[W],this[W]=l?l(j):j[W]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?lr:Vr,this.isPropagationStopped=Vr,this}return p(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),i}var Pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_n=os(Pa),Qa=p({},Pa,{view:0,detail:0}),Pu=os(Qa),Fu,Lu,_l,$c=p({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mo,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==_l&&(_l&&a.type==="mousemove"?(Fu=a.screenX-_l.screenX,Lu=a.screenY-_l.screenY):Lu=Fu=0,_l=a),Fu)},movementY:function(a){return"movementY"in a?a.movementY:Lu}}),tf=os($c),Bu=p({},$c,{dataTransfer:0}),Hc=os(Bu),cn=p({},Qa,{relatedTarget:0}),cr=os(cn),Al=p({},Pa,{animationName:0,elapsedTime:0,pseudoElement:0}),sf=os(Al),Dl=p({},Pa,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ws=os(Dl),El=p({},Pa,{data:0}),Uu=os(El),Tl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$u={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},To={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ml(a){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(a):(a=To[a])?!!i[a]:!1}function Mo(){return Ml}var Ol=p({},Qa,{key:function(a){if(a.key){var i=Tl[a.key]||a.key;if(i!=="Unidentified")return i}return a.type==="keypress"?(a=rs(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?$u[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mo,charCode:function(a){return a.type==="keypress"?rs(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?rs(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),_i=os(Ol),af=p({},$c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hu=os(af),Ai=p({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mo}),rf=os(Ai),Di=p({},Pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rl=os(Di),Vc=p({},$c,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Il=os(Vc),nf=p({},Pa,{newState:0,oldState:0}),qc=os(nf),Za=[9,13,27,32],Oo=da&&"CompositionEvent"in window,ei=null;da&&"documentMode"in document&&(ei=document.documentMode);var Kc=da&&"TextEvent"in window&&!ei,zl=da&&(!Oo||ei&&8<ei&&11>=ei),Ei=" ",Vu=!1;function qu(a,i){switch(a){case"keyup":return Za.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fa(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var An=!1;function Gg(a,i){switch(a){case"compositionend":return Fa(i);case"keypress":return i.which!==32?null:(Vu=!0,Ei);case"textInput":return a=i.data,a===Ei&&Vu?null:a;default:return null}}function Ku(a,i){if(An)return a==="compositionend"||!Oo&&qu(a,i)?(a=Jt(),Lt=Fe=G=null,An=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return zl&&i.locale!=="ko"?null:i.data;default:return null}}var Wg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yc(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i==="input"?!!Wg[a.type]:i==="textarea"}function of(a,i,l,u){Vs?ca?ca.push(u):ca=[u]:Vs=u,i=Pm(i,"onChange"),0<i.length&&(l=new _n("onChange","change",null,l,u),a.push({event:l,listeners:i}))}var Ti=null,dr=null;function Ja(a){Jp(a,0)}function Wt(a){var i=Be(a);if(Cl(i))return a}function _r(a,i){if(a==="change")return i}var ti=!1;if(da){var Mi;if(da){var dn="oninput"in document;if(!dn){var Oi=document.createElement("div");Oi.setAttribute("oninput","return;"),dn=typeof Oi.oninput=="function"}Mi=dn}else Mi=!1;ti=Mi&&(!document.documentMode||9<document.documentMode)}function Dn(){Ti&&(Ti.detachEvent("onpropertychange",_t),dr=Ti=null)}function _t(a){if(a.propertyName==="value"&&Wt(dr)){var i=[];of(i,dr,a,kn(a)),Rs(Ja,i)}}function En(a,i,l){a==="focusin"?(Dn(),Ti=i,dr=l,Ti.attachEvent("onpropertychange",_t)):a==="focusout"&&Dn()}function Pl(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Wt(dr)}function Fl(a,i){if(a==="click")return Wt(i)}function Gc(a,i){if(a==="input"||a==="change")return Wt(i)}function lf(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}var er=typeof Object.is=="function"?Object.is:lf;function ur(a,i){if(er(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var l=Object.keys(a),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var y=l[u];if(!C.call(i,y)||!er(a[y],i[y]))return!1}return!0}function ua(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ro(a,i){var l=ua(a);a=0;for(var u;l;){if(l.nodeType===3){if(u=a+l.textContent.length,a<=i&&u>=i)return{node:l,offset:i-a};a=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ua(l)}}function Bs(a,i){return a&&i?a===i?!0:a&&a.nodeType===3?!1:i&&i.nodeType===3?Bs(a,i.parentNode):"contains"in a?a.contains(i):a.compareDocumentPosition?!!(a.compareDocumentPosition(i)&16):!1:!1}function si(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var i=ki(a.document);i instanceof a.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)a=i.contentWindow;else break;i=ki(a.document)}return i}function Wc(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i&&(i==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||i==="textarea"||a.contentEditable==="true")}var Ri=da&&"documentMode"in document&&11>=document.documentMode,Ii=null,Io=null,zo=null,Po=!1;function Xc(a,i,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Po||Ii==null||Ii!==ki(u)||(u=Ii,"selectionStart"in u&&Wc(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),zo&&ur(zo,u)||(zo=u,u=Pm(Io,"onSelect"),0<u.length&&(i=new _n("onSelect","select",null,i,l),a.push({event:i,listeners:u}),i.target=Ii)))}function un(a,i){var l={};return l[a.toLowerCase()]=i.toLowerCase(),l["Webkit"+a]="webkit"+i,l["Moz"+a]="moz"+i,l}var zi={animationend:un("Animation","AnimationEnd"),animationiteration:un("Animation","AnimationIteration"),animationstart:un("Animation","AnimationStart"),transitionrun:un("Transition","TransitionRun"),transitionstart:un("Transition","TransitionStart"),transitioncancel:un("Transition","TransitionCancel"),transitionend:un("Transition","TransitionEnd")},Pi={},Fo={};da&&(Fo=document.createElement("div").style,"AnimationEvent"in window||(delete zi.animationend.animation,delete zi.animationiteration.animation,delete zi.animationstart.animation),"TransitionEvent"in window||delete zi.transitionend.transition);function Ar(a){if(Pi[a])return Pi[a];if(!zi[a])return a;var i=zi[a],l;for(l in i)if(i.hasOwnProperty(l)&&l in Fo)return Pi[a]=i[l];return a}var Fi=Ar("animationend"),Li=Ar("animationiteration"),Bi=Ar("animationstart"),mr=Ar("transitionrun"),Yu=Ar("transitionstart"),hr=Ar("transitioncancel"),Qc=Ar("transitionend"),Zs=new Map,Lo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lo.push("scrollEnd");function ba(a,i){Zs.set(a,i),Rt(i,[a])}var Zc=new WeakMap;function La(a,i){if(typeof a=="object"&&a!==null){var l=Zc.get(a);return l!==void 0?l:(i={value:a,source:i,stack:Ci(i)},Zc.set(a,i),i)}return{value:a,source:i,stack:Ci(i)}}var tr=[],qr=0,Bo=0;function Tn(){for(var a=qr,i=Bo=qr=0;i<a;){var l=tr[i];tr[i++]=null;var u=tr[i];tr[i++]=null;var y=tr[i];tr[i++]=null;var j=tr[i];if(tr[i++]=null,u!==null&&y!==null){var $=u.pending;$===null?y.next=y:(y.next=$.next,$.next=y),u.pending=y}j!==0&&$o(l,y,j)}}function Uo(a,i,l,u){tr[qr++]=a,tr[qr++]=i,tr[qr++]=l,tr[qr++]=u,Bo|=u,a.lanes|=u,a=a.alternate,a!==null&&(a.lanes|=u)}function ai(a,i,l,u){return Uo(a,i,l,u),Ll(a)}function Ui(a,i){return Uo(a,null,null,i),Ll(a)}function $o(a,i,l){a.lanes|=l;var u=a.alternate;u!==null&&(u.lanes|=l);for(var y=!1,j=a.return;j!==null;)j.childLanes|=l,u=j.alternate,u!==null&&(u.childLanes|=l),j.tag===22&&(a=j.stateNode,a===null||a._visibility&1||(y=!0)),a=j,j=j.return;return a.tag===3?(j=a.stateNode,y&&i!==null&&(y=31-Ve(l),a=j.hiddenUpdates,u=a[y],u===null?a[y]=[i]:u.push(i),i.lane=l|536870912),j):null}function Ll(a){if(50<zd)throw zd=0,Lf=null,Error(n(185));for(var i=a.return;i!==null;)a=i,i=a.return;return a.tag===3?a.stateNode:null}var Mn={};function cf(a,i,l,u){this.tag=a,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ba(a,i,l,u){return new cf(a,i,l,u)}function Jc(a){return a=a.prototype,!(!a||!a.isReactComponent)}function fr(a,i){var l=a.alternate;return l===null?(l=Ba(a.tag,i,a.key,a.mode),l.elementType=a.elementType,l.type=a.type,l.stateNode=a.stateNode,l.alternate=a,a.alternate=l):(l.pendingProps=i,l.type=a.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=a.flags&65011712,l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,i=a.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=a.sibling,l.index=a.index,l.ref=a.ref,l.refCleanup=a.refCleanup,l}function $i(a,i){a.flags&=65011714;var l=a.alternate;return l===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,i=l.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a}function On(a,i,l,u,y,j){var $=0;if(u=a,typeof a=="function")Jc(a)&&($=1);else if(typeof a=="string")$=Dw(a,l,Ne.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case _e:return a=Ba(31,l,i,y),a.elementType=_e,a.lanes=j,a;case D:return ri(l.children,y,j,i);case L:$=8,y|=24;break;case B:return a=Ba(12,l,i,y|2),a.elementType=B,a.lanes=j,a;case T:return a=Ba(13,l,i,y),a.elementType=T,a.lanes=j,a;case I:return a=Ba(19,l,i,y),a.elementType=I,a.lanes=j,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case z:case R:$=10;break e;case q:$=9;break e;case F:$=11;break e;case se:$=14;break e;case oe:$=16,u=null;break e}$=29,l=Error(n(130,a===null?"null":typeof a,"")),u=null}return i=Ba($,l,i,y),i.elementType=a,i.type=u,i.lanes=j,i}function ri(a,i,l,u){return a=Ba(7,a,u,i),a.lanes=l,a}function Hi(a,i,l){return a=Ba(6,a,null,i),a.lanes=l,a}function mn(a,i,l){return i=Ba(4,a.children!==null?a.children:[],a.key,i),i.lanes=l,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}var hn=[],ma=0,ni=null,Aa=0,va=[],ra=0,Kr=null,ha=1,xr="";function Vt(a,i){hn[ma++]=Aa,hn[ma++]=ni,ni=a,Aa=i}function Da(a,i,l){va[ra++]=ha,va[ra++]=xr,va[ra++]=Kr,Kr=a;var u=ha;a=xr;var y=32-Ve(u)-1;u&=~(1<<y),l+=1;var j=32-Ve(i)+y;if(30<j){var $=y-y%5;j=(u&(1<<$)-1).toString(32),u>>=$,y-=$,ha=1<<32-Ve(i)+y|l<<y|u,xr=j+a}else ha=1<<j|l<<y|u,xr=a}function qs(a){a.return!==null&&(Vt(a,1),Da(a,1,0))}function Rn(a){for(;a===ni;)ni=hn[--ma],hn[ma]=null,Aa=hn[--ma],hn[ma]=null;for(;a===Kr;)Kr=va[--ra],va[ra]=null,xr=va[--ra],va[ra]=null,ha=va[--ra],va[ra]=null}var Ut=null,Es=null,Xt=!1,Yr=null,Ua=!1,Bl=Error(n(519));function In(a){var i=Error(n(418,""));throw Ho(La(i,a)),Bl}function Vi(a){var i=a.stateNode,l=a.type,u=a.memoizedProps;switch(i[ve]=a,i[Ze]=u,l){case"dialog":ds("cancel",i),ds("close",i);break;case"iframe":case"object":case"embed":ds("load",i);break;case"video":case"audio":for(l=0;l<Fd.length;l++)ds(Fd[l],i);break;case"source":ds("error",i);break;case"img":case"image":case"link":ds("error",i),ds("load",i);break;case"details":ds("toggle",i);break;case"input":ds("invalid",i),kl(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Os(i);break;case"select":ds("invalid",i);break;case"textarea":ds("invalid",i),Qn(i,u.value,u.defaultValue,u.children),Os(i)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||u.suppressHydrationWarning===!0||a0(i.textContent,l)?(u.popover!=null&&(ds("beforetoggle",i),ds("toggle",i)),u.onScroll!=null&&ds("scroll",i),u.onScrollEnd!=null&&ds("scrollend",i),u.onClick!=null&&(i.onclick=Fm),i=!0):i=!1,i||In(a)}function Ul(a){for(Ut=a.return;Ut;)switch(Ut.tag){case 5:case 13:Ua=!1;return;case 27:case 3:Ua=!0;return;default:Ut=Ut.return}}function fn(a){if(a!==Ut)return!1;if(!Xt)return Ul(a),Xt=!0,!1;var i=a.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=a.type,l=!(l!=="form"&&l!=="button")||tx(a.type,a.memoizedProps)),l=!l),l&&Es&&In(a),Ul(a),i===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,i=0;a;){if(a.nodeType===8)if(l=a.data,l==="/$"){if(i===0){Es=bn(a.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++;a=a.nextSibling}Es=null}}else i===27?(i=Es,uo(a.type)?(a=nx,nx=null,Es=a):Es=i):Es=Ut?bn(a.stateNode.nextSibling):null;return!0}function xn(){Es=Ut=null,Xt=!1}function Gu(){var a=Yr;return a!==null&&(vr===null?vr=a:vr.push.apply(vr,a),Yr=null),a}function Ho(a){Yr===null?Yr=[a]:Yr.push(a)}var Gr=be(null),sr=null,ar=null;function fa(a,i,l){ae(Gr,i._currentValue),i._currentValue=l}function na(a){a._currentValue=Gr.current,ye(Gr)}function ed(a,i,l){for(;a!==null;){var u=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),a===l)break;a=a.return}}function ja(a,i,l,u){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var j=y.dependencies;if(j!==null){var $=y.child;j=j.firstContext;e:for(;j!==null;){var W=j;j=y;for(var we=0;we<i.length;we++)if(W.context===i[we]){j.lanes|=l,W=j.alternate,W!==null&&(W.lanes|=l),ed(j.return,l,a),u||($=null);break e}j=W.next}}else if(y.tag===18){if($=y.return,$===null)throw Error(n(341));$.lanes|=l,j=$.alternate,j!==null&&(j.lanes|=l),ed($,l,a),$=null}else $=y.child;if($!==null)$.return=y;else for($=y;$!==null;){if($===a){$=null;break}if(y=$.sibling,y!==null){y.return=$.return,$=y;break}$=$.return}y=$}}function Wr(a,i,l,u){a=null;for(var y=i,j=!1;y!==null;){if(!j){if((y.flags&524288)!==0)j=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var $=y.alternate;if($===null)throw Error(n(387));if($=$.memoizedProps,$!==null){var W=y.type;er(y.pendingProps.value,$.value)||(a!==null?a.push(W):a=[W])}}else if(y===P.current){if($=y.alternate,$===null)throw Error(n(387));$.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(Vd):a=[Vd])}y=y.return}a!==null&&ja(i,a,l,u),i.flags|=262144}function Dr(a){for(a=a.firstContext;a!==null;){if(!er(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ea(a){sr=a,ar=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function wa(a){return td(sr,a)}function Vo(a,i){return sr===null&&Ea(a),td(a,i)}function td(a,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},ar===null){if(a===null)throw Error(n(308));ar=i,a.dependencies={lanes:0,firstContext:i},a.flags|=524288}else ar=ar.next=i;return l}var df=typeof AbortController<"u"?AbortController:function(){var a=[],i=this.signal={aborted:!1,addEventListener:function(l,u){a.push(u)}};this.abort=function(){i.aborted=!0,a.forEach(function(l){return l()})}},uf=s.unstable_scheduleCallback,Wu=s.unstable_NormalPriority,Ks={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $l(){return{controller:new df,data:new Map,refCount:0}}function qi(a){a.refCount--,a.refCount===0&&uf(Wu,function(){a.controller.abort()})}var qo=null,sd=0,gn=0,Ki=null;function mf(a,i){if(qo===null){var l=qo=[];sd=0,gn=Kf(),Ki={status:"pending",value:void 0,then:function(u){l.push(u)}}}return sd++,i.then(Xu,Xu),i}function Xu(){if(--sd===0&&qo!==null){Ki!==null&&(Ki.status="fulfilled");var a=qo;qo=null,gn=0,Ki=null;for(var i=0;i<a.length;i++)(0,a[i])()}}function hf(a,i){var l=[],u={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return a.then(function(){u.status="fulfilled",u.value=i;for(var y=0;y<l.length;y++)(0,l[y])(i)},function(y){for(u.status="rejected",u.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),u}var Qu=J.S;J.S=function(a,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&mf(a,i),Qu!==null&&Qu(a,i)};var ii=be(null);function ad(){var a=ii.current;return a!==null?a:Is.pooledCache}function zn(a,i){i===null?ae(ii,ii.current):ae(ii,i.pool)}function rd(){var a=ad();return a===null?null:{parent:Ks._currentValue,pool:a}}var Ko=Error(n(460)),Zu=Error(n(474)),Hl=Error(n(542)),nd={then:function(){}};function Ju(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Vl(){}function em(a,i,l){switch(l=a[l],l===void 0?a.push(i):l!==i&&(i.then(Vl,Vl),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,sm(a),a;default:if(typeof i.status=="string")i.then(Vl,Vl);else{if(a=Is,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=i,a.status="pending",a.then(function(u){if(i.status==="pending"){var y=i;y.status="fulfilled",y.value=u}},function(u){if(i.status==="pending"){var y=i;y.status="rejected",y.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,sm(a),a}throw Yo=i,Ko}}var Yo=null;function tm(){if(Yo===null)throw Error(n(459));var a=Yo;return Yo=null,a}function sm(a){if(a===Ko||a===Hl)throw Error(n(483))}var Pn=!1;function ql(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function id(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Fn(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function pn(a,i,l){var u=a.updateQueue;if(u===null)return null;if(u=u.shared,(Ss&2)!==0){var y=u.pending;return y===null?i.next=i:(i.next=y.next,y.next=i),u.pending=i,i=Ll(a),$o(a,null,l),i}return Uo(a,u,i,l),Ll(a)}function Go(a,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var u=i.lanes;u&=a.pendingLanes,l|=u,i.lanes=l,gt(a,l)}}function Yi(a,i){var l=a.updateQueue,u=a.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var y=null,j=null;if(l=l.firstBaseUpdate,l!==null){do{var $={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};j===null?y=j=$:j=j.next=$,l=l.next}while(l!==null);j===null?y=j=i:j=j.next=i}else y=j=i;l={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:j,shared:u.shared,callbacks:u.callbacks},a.updateQueue=l;return}a=l.lastBaseUpdate,a===null?l.firstBaseUpdate=i:a.next=i,l.lastBaseUpdate=i}var Gi=!1;function Wo(){if(Gi){var a=Ki;if(a!==null)throw a}}function Xo(a,i,l,u){Gi=!1;var y=a.updateQueue;Pn=!1;var j=y.firstBaseUpdate,$=y.lastBaseUpdate,W=y.shared.pending;if(W!==null){y.shared.pending=null;var we=W,Ge=we.next;we.next=null,$===null?j=Ge:$.next=Ge,$=we;var lt=a.alternate;lt!==null&&(lt=lt.updateQueue,W=lt.lastBaseUpdate,W!==$&&(W===null?lt.firstBaseUpdate=Ge:W.next=Ge,lt.lastBaseUpdate=we))}if(j!==null){var ht=y.baseState;$=0,lt=Ge=we=null,W=j;do{var et=W.lane&-536870913,at=et!==W.lane;if(at?(xs&et)===et:(u&et)===et){et!==0&&et===gn&&(Gi=!0),lt!==null&&(lt=lt.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var Zt=a,Yt=W;et=i;var Ds=l;switch(Yt.tag){case 1:if(Zt=Yt.payload,typeof Zt=="function"){ht=Zt.call(Ds,ht,et);break e}ht=Zt;break e;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=Yt.payload,et=typeof Zt=="function"?Zt.call(Ds,ht,et):Zt,et==null)break e;ht=p({},ht,et);break e;case 2:Pn=!0}}et=W.callback,et!==null&&(a.flags|=64,at&&(a.flags|=8192),at=y.callbacks,at===null?y.callbacks=[et]:at.push(et))}else at={lane:et,tag:W.tag,payload:W.payload,callback:W.callback,next:null},lt===null?(Ge=lt=at,we=ht):lt=lt.next=at,$|=et;if(W=W.next,W===null){if(W=y.shared.pending,W===null)break;at=W,W=at.next,at.next=null,y.lastBaseUpdate=at,y.shared.pending=null}}while(!0);lt===null&&(we=ht),y.baseState=we,y.firstBaseUpdate=Ge,y.lastBaseUpdate=lt,j===null&&(y.shared.lanes=0),io|=$,a.lanes=$,a.memoizedState=ht}}function Kl(a,i){if(typeof a!="function")throw Error(n(191,a));a.call(i)}function Yl(a,i){var l=a.callbacks;if(l!==null)for(a.callbacks=null,a=0;a<l.length;a++)Kl(l[a],i)}var Wi=be(null),Gl=be(0);function Ln(a,i){a=hi,ae(Gl,a),ae(Wi,i),hi=a|i.baseLanes}function Xi(){ae(Gl,hi),ae(Wi,Wi.current)}function Qo(){hi=Gl.current,ye(Wi),ye(Gl)}var Xr=0,es=null,bs=null,Ys=null,Wl=!1,gr=!1,Ta=!1,pr=0,Er=0,rr=null,Tr=0;function Ts(){throw Error(n(321))}function od(a,i){if(i===null)return!1;for(var l=0;l<i.length&&l<a.length;l++)if(!er(a[l],i[l]))return!1;return!0}function ld(a,i,l,u,y,j){return Xr=j,es=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,J.H=a===null||a.memoizedState===null?bm:vm,Ta=!1,j=l(u,y),Ta=!1,gr&&(j=am(i,l,u,y)),Xl(a),j}function Xl(a){J.H=uc;var i=bs!==null&&bs.next!==null;if(Xr=0,Ys=bs=es=null,Wl=!1,Er=0,rr=null,i)throw Error(n(300));a===null||Na||(a=a.dependencies,a!==null&&Dr(a)&&(Na=!0))}function am(a,i,l,u){es=a;var y=0;do{if(gr&&(rr=null),Er=0,gr=!1,25<=y)throw Error(n(301));if(y+=1,Ys=bs=null,a.updateQueue!=null){var j=a.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}J.H=pf,j=i(l,u)}while(gr);return j}function ff(){var a=J.H,i=a.useState()[0];return i=typeof i.then=="function"?Zo(i):i,a=a.useState()[0],(bs!==null?bs.memoizedState:null)!==a&&(es.flags|=1024),i}function Ql(){var a=pr!==0;return pr=0,a}function cd(a,i,l){i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~l}function dd(a){if(Wl){for(a=a.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Wl=!1}Xr=0,Ys=bs=es=null,gr=!1,Er=pr=0,rr=null}function $a(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ys===null?es.memoizedState=Ys=a:Ys=Ys.next=a,Ys}function Gs(){if(bs===null){var a=es.alternate;a=a!==null?a.memoizedState:null}else a=bs.next;var i=Ys===null?es.memoizedState:Ys.next;if(i!==null)Ys=i,bs=a;else{if(a===null)throw es.alternate===null?Error(n(467)):Error(n(310));bs=a,a={memoizedState:bs.memoizedState,baseState:bs.baseState,baseQueue:bs.baseQueue,queue:bs.queue,next:null},Ys===null?es.memoizedState=Ys=a:Ys=Ys.next=a}return Ys}function ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zo(a){var i=Er;return Er+=1,rr===null&&(rr=[]),a=em(rr,a,i),i=es,(Ys===null?i.memoizedState:Ys.next)===null&&(i=i.alternate,J.H=i===null||i.memoizedState===null?bm:vm),a}function Zl(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Zo(a);if(a.$$typeof===R)return wa(a)}throw Error(n(438,String(a)))}function md(a){var i=null,l=es.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var u=es.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(y){return y.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=ud(),es.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(a),u=0;u<a;u++)l[u]=he;return i.index++,l}function Mr(a,i){return typeof i=="function"?i(a):i}function Jl(a){var i=Gs();return Jo(i,bs,a)}function Jo(a,i,l){var u=a.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=l;var y=a.baseQueue,j=u.pending;if(j!==null){if(y!==null){var $=y.next;y.next=j.next,j.next=$}i.baseQueue=y=j,u.pending=null}if(j=a.baseState,y===null)a.memoizedState=j;else{i=y.next;var W=$=null,we=null,Ge=i,lt=!1;do{var ht=Ge.lane&-536870913;if(ht!==Ge.lane?(xs&ht)===ht:(Xr&ht)===ht){var et=Ge.revertLane;if(et===0)we!==null&&(we=we.next={lane:0,revertLane:0,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null}),ht===gn&&(lt=!0);else if((Xr&et)===et){Ge=Ge.next,et===gn&&(lt=!0);continue}else ht={lane:0,revertLane:Ge.revertLane,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null},we===null?(W=we=ht,$=j):we=we.next=ht,es.lanes|=et,io|=et;ht=Ge.action,Ta&&l(j,ht),j=Ge.hasEagerState?Ge.eagerState:l(j,ht)}else et={lane:ht,revertLane:Ge.revertLane,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null},we===null?(W=we=et,$=j):we=we.next=et,es.lanes|=ht,io|=ht;Ge=Ge.next}while(Ge!==null&&Ge!==i);if(we===null?$=j:we.next=W,!er(j,a.memoizedState)&&(Na=!0,lt&&(l=Ki,l!==null)))throw l;a.memoizedState=j,a.baseState=$,a.baseQueue=we,u.lastRenderedState=j}return y===null&&(u.lanes=0),[a.memoizedState,u.dispatch]}function rm(a){var i=Gs(),l=i.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=a;var u=l.dispatch,y=l.pending,j=i.memoizedState;if(y!==null){l.pending=null;var $=y=y.next;do j=a(j,$.action),$=$.next;while($!==y);er(j,i.memoizedState)||(Na=!0),i.memoizedState=j,i.baseQueue===null&&(i.baseState=j),l.lastRenderedState=j}return[j,u]}function hd(a,i,l){var u=es,y=Gs(),j=Xt;if(j){if(l===void 0)throw Error(n(407));l=l()}else l=i();var $=!er((bs||y).memoizedState,l);$&&(y.memoizedState=l,Na=!0),y=y.queue;var W=fd.bind(null,u,y,a);if(tl(2048,8,W,[a]),y.getSnapshot!==i||$||Ys!==null&&Ys.memoizedState.tag&1){if(u.flags|=2048,oi(9,sc(),ec.bind(null,u,y,l,i),null),Is===null)throw Error(n(349));j||(Xr&124)!==0||nm(u,i,l)}return l}function nm(a,i,l){a.flags|=16384,a={getSnapshot:i,value:l},i=es.updateQueue,i===null?(i=ud(),es.updateQueue=i,i.stores=[a]):(l=i.stores,l===null?i.stores=[a]:l.push(a))}function ec(a,i,l,u){i.value=l,i.getSnapshot=u,im(i)&&xd(a)}function fd(a,i,l){return l(function(){im(i)&&xd(a)})}function im(a){var i=a.getSnapshot;a=a.value;try{var l=i();return!er(a,l)}catch{return!0}}function xd(a){var i=Ui(a,2);i!==null&&Fr(i,a,2)}function el(a){var i=$a();if(typeof a=="function"){var l=a;if(a=l(),Ta){rt(!0);try{l()}finally{rt(!1)}}}return i.memoizedState=i.baseState=a,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:a},i}function om(a,i,l,u){return a.baseState=l,Jo(a,bs,typeof u=="function"?u:Mr)}function lm(a,i,l,u,y){if(dc(a))throw Error(n(485));if(a=i.action,a!==null){var j={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){j.listeners.push($)}};J.T!==null?l(!0):j.isTransition=!1,u(j),l=i.pending,l===null?(j.next=i.pending=j,cm(i,j)):(j.next=l.next,i.pending=l.next=j)}}function cm(a,i){var l=i.action,u=i.payload,y=a.state;if(i.isTransition){var j=J.T,$={};J.T=$;try{var W=l(y,u),we=J.S;we!==null&&we($,W),dm(a,i,W)}catch(Ge){gd(a,i,Ge)}finally{J.T=j}}else try{j=l(y,u),dm(a,i,j)}catch(Ge){gd(a,i,Ge)}}function dm(a,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){um(a,i,u)},function(u){return gd(a,i,u)}):um(a,i,l)}function um(a,i,l){i.status="fulfilled",i.value=l,mm(i),a.state=l,i=a.pending,i!==null&&(l=i.next,l===i?a.pending=null:(l=l.next,i.next=l,cm(a,l)))}function gd(a,i,l){var u=a.pending;if(a.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=l,mm(i),i=i.next;while(i!==u)}a.action=null}function mm(a){a=a.listeners;for(var i=0;i<a.length;i++)(0,a[i])()}function hm(a,i){return i}function pd(a,i){if(Xt){var l=Is.formState;if(l!==null){e:{var u=es;if(Xt){if(Es){t:{for(var y=Es,j=Ua;y.nodeType!==8;){if(!j){y=null;break t}if(y=bn(y.nextSibling),y===null){y=null;break t}}j=y.data,y=j==="F!"||j==="F"?y:null}if(y){Es=bn(y.nextSibling),u=y.data==="F!";break e}}In(u)}u=!1}u&&(i=l[0])}}return l=$a(),l.memoizedState=l.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hm,lastRenderedState:i},l.queue=u,l=cc.bind(null,es,u),u.dispatch=l,u=el(!1),j=_d.bind(null,es,!1,u.queue),u=$a(),y={state:i,dispatch:null,action:a,pending:null},u.queue=y,l=lm.bind(null,es,y,j,l),y.dispatch=l,u.memoizedState=a,[i,l,!1]}function fm(a){var i=Gs();return xm(i,bs,a)}function xm(a,i,l){if(i=Jo(a,i,hm)[0],a=Jl(Mr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Zo(i)}catch($){throw $===Ko?Hl:$}else u=i;i=Gs();var y=i.queue,j=y.dispatch;return l!==i.memoizedState&&(es.flags|=2048,oi(9,sc(),xf.bind(null,y,l),null)),[u,j,a]}function xf(a,i){a.action=i}function tc(a){var i=Gs(),l=bs;if(l!==null)return xm(i,l,a);Gs(),i=i.memoizedState,l=Gs();var u=l.queue.dispatch;return l.memoizedState=a,[i,u,!1]}function oi(a,i,l,u){return a={tag:a,create:l,deps:u,inst:i,next:null},i=es.updateQueue,i===null&&(i=ud(),es.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=a.next=a:(u=l.next,l.next=a,a.next=u,i.lastEffect=a),a}function sc(){return{destroy:void 0,resource:void 0}}function yd(){return Gs().memoizedState}function ac(a,i,l,u){var y=$a();u=u===void 0?null:u,es.flags|=a,y.memoizedState=oi(1|i,sc(),l,u)}function tl(a,i,l,u){var y=Gs();u=u===void 0?null:u;var j=y.memoizedState.inst;bs!==null&&u!==null&&od(u,bs.memoizedState.deps)?y.memoizedState=oi(i,j,l,u):(es.flags|=a,y.memoizedState=oi(1|i,j,l,u))}function bd(a,i){ac(8390656,8,a,i)}function Qi(a,i){tl(2048,8,a,i)}function li(a,i){return tl(4,2,a,i)}function vd(a,i){return tl(4,4,a,i)}function gm(a,i){if(typeof i=="function"){a=a();var l=i(a);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function pm(a,i,l){l=l!=null?l.concat([a]):null,tl(4,4,gm.bind(null,i,a),l)}function jd(){}function wd(a,i){var l=Gs();i=i===void 0?null:i;var u=l.memoizedState;return i!==null&&od(i,u[1])?u[0]:(l.memoizedState=[a,i],a)}function Nd(a,i){var l=Gs();i=i===void 0?null:i;var u=l.memoizedState;if(i!==null&&od(i,u[1]))return u[0];if(u=a(),Ta){rt(!0);try{a()}finally{rt(!1)}}return l.memoizedState=[u,i],u}function rc(a,i,l){return l===void 0||(Xr&1073741824)!==0?a.memoizedState=i:(a.memoizedState=l,a=Ep(),es.lanes|=a,io|=a,l)}function Sd(a,i,l,u){return er(l,i)?l:Wi.current!==null?(a=rc(a,l,u),er(a,i)||(Na=!0),a):(Xr&42)===0?(Na=!0,a.memoizedState=l):(a=Ep(),es.lanes|=a,io|=a,i)}function Cd(a,i,l,u,y){var j=Ce.p;Ce.p=j!==0&&8>j?j:8;var $=J.T,W={};J.T=W,_d(a,!1,i,l);try{var we=y(),Ge=J.S;if(Ge!==null&&Ge(W,we),we!==null&&typeof we=="object"&&typeof we.then=="function"){var lt=hf(we,u);Ha(a,i,lt,Pr(a))}else Ha(a,i,u,Pr(a))}catch(ht){Ha(a,i,{then:function(){},status:"rejected",reason:ht},Pr())}finally{Ce.p=j,J.T=$}}function gf(){}function nc(a,i,l,u){if(a.tag!==5)throw Error(n(476));var y=yr(a).queue;Cd(a,y,i,Se,l===null?gf:function(){return ic(a),l(u)})}function yr(a){var i=a.memoizedState;if(i!==null)return i;i={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:Se},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:l},next:null},a.memoizedState=i,a=a.alternate,a!==null&&(a.memoizedState=i),i}function ic(a){var i=yr(a).next.queue;Ha(a,i,{},Pr())}function Or(){return wa(Vd)}function oc(){return Gs().memoizedState}function lc(){return Gs().memoizedState}function sl(a){for(var i=a.return;i!==null;){switch(i.tag){case 24:case 3:var l=Pr();a=Fn(l);var u=pn(i,a,l);u!==null&&(Fr(u,i,l),Go(u,i,l)),i={cache:$l()},a.payload=i;return}i=i.return}}function kd(a,i,l){var u=Pr();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},dc(a)?ym(i,l):(l=ai(a,i,l,u),l!==null&&(Fr(l,a,u),Ad(l,i,u)))}function cc(a,i,l){var u=Pr();Ha(a,i,l,u)}function Ha(a,i,l,u){var y={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(dc(a))ym(i,y);else{var j=a.alternate;if(a.lanes===0&&(j===null||j.lanes===0)&&(j=i.lastRenderedReducer,j!==null))try{var $=i.lastRenderedState,W=j($,l);if(y.hasEagerState=!0,y.eagerState=W,er(W,$))return Uo(a,i,y,0),Is===null&&Tn(),!1}catch{}finally{}if(l=ai(a,i,y,u),l!==null)return Fr(l,a,u),Ad(l,i,u),!0}return!1}function _d(a,i,l,u){if(u={lane:2,revertLane:Kf(),action:u,hasEagerState:!1,eagerState:null,next:null},dc(a)){if(i)throw Error(n(479))}else i=ai(a,l,u,2),i!==null&&Fr(i,a,2)}function dc(a){var i=a.alternate;return a===es||i!==null&&i===es}function ym(a,i){gr=Wl=!0;var l=a.pending;l===null?i.next=i:(i.next=l.next,l.next=i),a.pending=i}function Ad(a,i,l){if((l&4194048)!==0){var u=i.lanes;u&=a.pendingLanes,l|=u,i.lanes=l,gt(a,l)}}var uc={readContext:wa,use:Zl,useCallback:Ts,useContext:Ts,useEffect:Ts,useImperativeHandle:Ts,useLayoutEffect:Ts,useInsertionEffect:Ts,useMemo:Ts,useReducer:Ts,useRef:Ts,useState:Ts,useDebugValue:Ts,useDeferredValue:Ts,useTransition:Ts,useSyncExternalStore:Ts,useId:Ts,useHostTransitionStatus:Ts,useFormState:Ts,useActionState:Ts,useOptimistic:Ts,useMemoCache:Ts,useCacheRefresh:Ts},bm={readContext:wa,use:Zl,useCallback:function(a,i){return $a().memoizedState=[a,i===void 0?null:i],a},useContext:wa,useEffect:bd,useImperativeHandle:function(a,i,l){l=l!=null?l.concat([a]):null,ac(4194308,4,gm.bind(null,i,a),l)},useLayoutEffect:function(a,i){return ac(4194308,4,a,i)},useInsertionEffect:function(a,i){ac(4,2,a,i)},useMemo:function(a,i){var l=$a();i=i===void 0?null:i;var u=a();if(Ta){rt(!0);try{a()}finally{rt(!1)}}return l.memoizedState=[u,i],u},useReducer:function(a,i,l){var u=$a();if(l!==void 0){var y=l(i);if(Ta){rt(!0);try{l(i)}finally{rt(!1)}}}else y=i;return u.memoizedState=u.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},u.queue=a,a=a.dispatch=kd.bind(null,es,a),[u.memoizedState,a]},useRef:function(a){var i=$a();return a={current:a},i.memoizedState=a},useState:function(a){a=el(a);var i=a.queue,l=cc.bind(null,es,i);return i.dispatch=l,[a.memoizedState,l]},useDebugValue:jd,useDeferredValue:function(a,i){var l=$a();return rc(l,a,i)},useTransition:function(){var a=el(!1);return a=Cd.bind(null,es,a.queue,!0,!1),$a().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,i,l){var u=es,y=$a();if(Xt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=i(),Is===null)throw Error(n(349));(xs&124)!==0||nm(u,i,l)}y.memoizedState=l;var j={value:l,getSnapshot:i};return y.queue=j,bd(fd.bind(null,u,j,a),[a]),u.flags|=2048,oi(9,sc(),ec.bind(null,u,j,l,i),null),l},useId:function(){var a=$a(),i=Is.identifierPrefix;if(Xt){var l=xr,u=ha;l=(u&~(1<<32-Ve(u)-1)).toString(32)+l,i="«"+i+"R"+l,l=pr++,0<l&&(i+="H"+l.toString(32)),i+="»"}else l=Tr++,i="«"+i+"r"+l.toString(32)+"»";return a.memoizedState=i},useHostTransitionStatus:Or,useFormState:pd,useActionState:pd,useOptimistic:function(a){var i=$a();i.memoizedState=i.baseState=a;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=_d.bind(null,es,!0,l),l.dispatch=i,[a,i]},useMemoCache:md,useCacheRefresh:function(){return $a().memoizedState=sl.bind(null,es)}},vm={readContext:wa,use:Zl,useCallback:wd,useContext:wa,useEffect:Qi,useImperativeHandle:pm,useInsertionEffect:li,useLayoutEffect:vd,useMemo:Nd,useReducer:Jl,useRef:yd,useState:function(){return Jl(Mr)},useDebugValue:jd,useDeferredValue:function(a,i){var l=Gs();return Sd(l,bs.memoizedState,a,i)},useTransition:function(){var a=Jl(Mr)[0],i=Gs().memoizedState;return[typeof a=="boolean"?a:Zo(a),i]},useSyncExternalStore:hd,useId:oc,useHostTransitionStatus:Or,useFormState:fm,useActionState:fm,useOptimistic:function(a,i){var l=Gs();return om(l,bs,a,i)},useMemoCache:md,useCacheRefresh:lc},pf={readContext:wa,use:Zl,useCallback:wd,useContext:wa,useEffect:Qi,useImperativeHandle:pm,useInsertionEffect:li,useLayoutEffect:vd,useMemo:Nd,useReducer:rm,useRef:yd,useState:function(){return rm(Mr)},useDebugValue:jd,useDeferredValue:function(a,i){var l=Gs();return bs===null?rc(l,a,i):Sd(l,bs.memoizedState,a,i)},useTransition:function(){var a=rm(Mr)[0],i=Gs().memoizedState;return[typeof a=="boolean"?a:Zo(a),i]},useSyncExternalStore:hd,useId:oc,useHostTransitionStatus:Or,useFormState:tc,useActionState:tc,useOptimistic:function(a,i){var l=Gs();return bs!==null?om(l,bs,a,i):(l.baseState=a,[a,l.queue.dispatch])},useMemoCache:md,useCacheRefresh:lc},Zi=null,al=0;function Ji(a){var i=al;return al+=1,Zi===null&&(Zi=[]),em(Zi,a,i)}function eo(a,i){i=i.props.ref,a.ref=i!==void 0?i:null}function mc(a,i){throw i.$$typeof===w?Error(n(525)):(a=Object.prototype.toString.call(i),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)))}function jm(a){var i=a._init;return i(a._payload)}function wm(a){function i($e,Oe){if(a){var Ye=$e.deletions;Ye===null?($e.deletions=[Oe],$e.flags|=16):Ye.push(Oe)}}function l($e,Oe){if(!a)return null;for(;Oe!==null;)i($e,Oe),Oe=Oe.sibling;return null}function u($e){for(var Oe=new Map;$e!==null;)$e.key!==null?Oe.set($e.key,$e):Oe.set($e.index,$e),$e=$e.sibling;return Oe}function y($e,Oe){return $e=fr($e,Oe),$e.index=0,$e.sibling=null,$e}function j($e,Oe,Ye){return $e.index=Ye,a?(Ye=$e.alternate,Ye!==null?(Ye=Ye.index,Ye<Oe?($e.flags|=67108866,Oe):Ye):($e.flags|=67108866,Oe)):($e.flags|=1048576,Oe)}function $($e){return a&&$e.alternate===null&&($e.flags|=67108866),$e}function W($e,Oe,Ye,ct){return Oe===null||Oe.tag!==6?(Oe=Hi(Ye,$e.mode,ct),Oe.return=$e,Oe):(Oe=y(Oe,Ye),Oe.return=$e,Oe)}function we($e,Oe,Ye,ct){var Ft=Ye.type;return Ft===D?lt($e,Oe,Ye.props.children,ct,Ye.key):Oe!==null&&(Oe.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===oe&&jm(Ft)===Oe.type)?(Oe=y(Oe,Ye.props),eo(Oe,Ye),Oe.return=$e,Oe):(Oe=On(Ye.type,Ye.key,Ye.props,null,$e.mode,ct),eo(Oe,Ye),Oe.return=$e,Oe)}function Ge($e,Oe,Ye,ct){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==Ye.containerInfo||Oe.stateNode.implementation!==Ye.implementation?(Oe=mn(Ye,$e.mode,ct),Oe.return=$e,Oe):(Oe=y(Oe,Ye.children||[]),Oe.return=$e,Oe)}function lt($e,Oe,Ye,ct,Ft){return Oe===null||Oe.tag!==7?(Oe=ri(Ye,$e.mode,ct,Ft),Oe.return=$e,Oe):(Oe=y(Oe,Ye),Oe.return=$e,Oe)}function ht($e,Oe,Ye){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=Hi(""+Oe,$e.mode,Ye),Oe.return=$e,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case N:return Ye=On(Oe.type,Oe.key,Oe.props,null,$e.mode,Ye),eo(Ye,Oe),Ye.return=$e,Ye;case _:return Oe=mn(Oe,$e.mode,Ye),Oe.return=$e,Oe;case oe:var ct=Oe._init;return Oe=ct(Oe._payload),ht($e,Oe,Ye)}if(le(Oe)||Ee(Oe))return Oe=ri(Oe,$e.mode,Ye,null),Oe.return=$e,Oe;if(typeof Oe.then=="function")return ht($e,Ji(Oe),Ye);if(Oe.$$typeof===R)return ht($e,Vo($e,Oe),Ye);mc($e,Oe)}return null}function et($e,Oe,Ye,ct){var Ft=Oe!==null?Oe.key:null;if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ft!==null?null:W($e,Oe,""+Ye,ct);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case N:return Ye.key===Ft?we($e,Oe,Ye,ct):null;case _:return Ye.key===Ft?Ge($e,Oe,Ye,ct):null;case oe:return Ft=Ye._init,Ye=Ft(Ye._payload),et($e,Oe,Ye,ct)}if(le(Ye)||Ee(Ye))return Ft!==null?null:lt($e,Oe,Ye,ct,null);if(typeof Ye.then=="function")return et($e,Oe,Ji(Ye),ct);if(Ye.$$typeof===R)return et($e,Oe,Vo($e,Ye),ct);mc($e,Ye)}return null}function at($e,Oe,Ye,ct,Ft){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return $e=$e.get(Ye)||null,W(Oe,$e,""+ct,Ft);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case N:return $e=$e.get(ct.key===null?Ye:ct.key)||null,we(Oe,$e,ct,Ft);case _:return $e=$e.get(ct.key===null?Ye:ct.key)||null,Ge(Oe,$e,ct,Ft);case oe:var ls=ct._init;return ct=ls(ct._payload),at($e,Oe,Ye,ct,Ft)}if(le(ct)||Ee(ct))return $e=$e.get(Ye)||null,lt(Oe,$e,ct,Ft,null);if(typeof ct.then=="function")return at($e,Oe,Ye,Ji(ct),Ft);if(ct.$$typeof===R)return at($e,Oe,Ye,Vo(Oe,ct),Ft);mc(Oe,ct)}return null}function Zt($e,Oe,Ye,ct){for(var Ft=null,ls=null,$t=Oe,Gt=Oe=0,Ca=null;$t!==null&&Gt<Ye.length;Gt++){$t.index>Gt?(Ca=$t,$t=null):Ca=$t.sibling;var ps=et($e,$t,Ye[Gt],ct);if(ps===null){$t===null&&($t=Ca);break}a&&$t&&ps.alternate===null&&i($e,$t),Oe=j(ps,Oe,Gt),ls===null?Ft=ps:ls.sibling=ps,ls=ps,$t=Ca}if(Gt===Ye.length)return l($e,$t),Xt&&Vt($e,Gt),Ft;if($t===null){for(;Gt<Ye.length;Gt++)$t=ht($e,Ye[Gt],ct),$t!==null&&(Oe=j($t,Oe,Gt),ls===null?Ft=$t:ls.sibling=$t,ls=$t);return Xt&&Vt($e,Gt),Ft}for($t=u($t);Gt<Ye.length;Gt++)Ca=at($t,$e,Gt,Ye[Gt],ct),Ca!==null&&(a&&Ca.alternate!==null&&$t.delete(Ca.key===null?Gt:Ca.key),Oe=j(Ca,Oe,Gt),ls===null?Ft=Ca:ls.sibling=Ca,ls=Ca);return a&&$t.forEach(function(go){return i($e,go)}),Xt&&Vt($e,Gt),Ft}function Yt($e,Oe,Ye,ct){if(Ye==null)throw Error(n(151));for(var Ft=null,ls=null,$t=Oe,Gt=Oe=0,Ca=null,ps=Ye.next();$t!==null&&!ps.done;Gt++,ps=Ye.next()){$t.index>Gt?(Ca=$t,$t=null):Ca=$t.sibling;var go=et($e,$t,ps.value,ct);if(go===null){$t===null&&($t=Ca);break}a&&$t&&go.alternate===null&&i($e,$t),Oe=j(go,Oe,Gt),ls===null?Ft=go:ls.sibling=go,ls=go,$t=Ca}if(ps.done)return l($e,$t),Xt&&Vt($e,Gt),Ft;if($t===null){for(;!ps.done;Gt++,ps=Ye.next())ps=ht($e,ps.value,ct),ps!==null&&(Oe=j(ps,Oe,Gt),ls===null?Ft=ps:ls.sibling=ps,ls=ps);return Xt&&Vt($e,Gt),Ft}for($t=u($t);!ps.done;Gt++,ps=Ye.next())ps=at($t,$e,Gt,ps.value,ct),ps!==null&&(a&&ps.alternate!==null&&$t.delete(ps.key===null?Gt:ps.key),Oe=j(ps,Oe,Gt),ls===null?Ft=ps:ls.sibling=ps,ls=ps);return a&&$t.forEach(function(Uw){return i($e,Uw)}),Xt&&Vt($e,Gt),Ft}function Ds($e,Oe,Ye,ct){if(typeof Ye=="object"&&Ye!==null&&Ye.type===D&&Ye.key===null&&(Ye=Ye.props.children),typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case N:e:{for(var Ft=Ye.key;Oe!==null;){if(Oe.key===Ft){if(Ft=Ye.type,Ft===D){if(Oe.tag===7){l($e,Oe.sibling),ct=y(Oe,Ye.props.children),ct.return=$e,$e=ct;break e}}else if(Oe.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===oe&&jm(Ft)===Oe.type){l($e,Oe.sibling),ct=y(Oe,Ye.props),eo(ct,Ye),ct.return=$e,$e=ct;break e}l($e,Oe);break}else i($e,Oe);Oe=Oe.sibling}Ye.type===D?(ct=ri(Ye.props.children,$e.mode,ct,Ye.key),ct.return=$e,$e=ct):(ct=On(Ye.type,Ye.key,Ye.props,null,$e.mode,ct),eo(ct,Ye),ct.return=$e,$e=ct)}return $($e);case _:e:{for(Ft=Ye.key;Oe!==null;){if(Oe.key===Ft)if(Oe.tag===4&&Oe.stateNode.containerInfo===Ye.containerInfo&&Oe.stateNode.implementation===Ye.implementation){l($e,Oe.sibling),ct=y(Oe,Ye.children||[]),ct.return=$e,$e=ct;break e}else{l($e,Oe);break}else i($e,Oe);Oe=Oe.sibling}ct=mn(Ye,$e.mode,ct),ct.return=$e,$e=ct}return $($e);case oe:return Ft=Ye._init,Ye=Ft(Ye._payload),Ds($e,Oe,Ye,ct)}if(le(Ye))return Zt($e,Oe,Ye,ct);if(Ee(Ye)){if(Ft=Ee(Ye),typeof Ft!="function")throw Error(n(150));return Ye=Ft.call(Ye),Yt($e,Oe,Ye,ct)}if(typeof Ye.then=="function")return Ds($e,Oe,Ji(Ye),ct);if(Ye.$$typeof===R)return Ds($e,Oe,Vo($e,Ye),ct);mc($e,Ye)}return typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint"?(Ye=""+Ye,Oe!==null&&Oe.tag===6?(l($e,Oe.sibling),ct=y(Oe,Ye),ct.return=$e,$e=ct):(l($e,Oe),ct=Hi(Ye,$e.mode,ct),ct.return=$e,$e=ct),$($e)):l($e,Oe)}return function($e,Oe,Ye,ct){try{al=0;var Ft=Ds($e,Oe,Ye,ct);return Zi=null,Ft}catch($t){if($t===Ko||$t===Hl)throw $t;var ls=Ba(29,$t,null,$e.mode);return ls.lanes=ct,ls.return=$e,ls}finally{}}}var to=wm(!0),Nm=wm(!1),b=be(null),E=null;function K(a){var i=a.alternate;ae(Ue,Ue.current&1),ae(b,a),E===null&&(i===null||Wi.current!==null||i.memoizedState!==null)&&(E=a)}function xe(a){if(a.tag===22){if(ae(Ue,Ue.current),ae(b,a),E===null){var i=a.alternate;i!==null&&i.memoizedState!==null&&(E=a)}}else je()}function je(){ae(Ue,Ue.current),ae(b,b.current)}function pe(a){ye(b),E===a&&(E=null),ye(Ue)}var Ue=be(0);function tt(a){for(var i=a;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||rx(l)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function yt(a,i,l,u){i=a.memoizedState,l=l(u,i),l=l==null?i:p({},i,l),a.memoizedState=l,a.lanes===0&&(a.updateQueue.baseState=l)}var Ot={enqueueSetState:function(a,i,l){a=a._reactInternals;var u=Pr(),y=Fn(u);y.payload=i,l!=null&&(y.callback=l),i=pn(a,y,u),i!==null&&(Fr(i,a,u),Go(i,a,u))},enqueueReplaceState:function(a,i,l){a=a._reactInternals;var u=Pr(),y=Fn(u);y.tag=1,y.payload=i,l!=null&&(y.callback=l),i=pn(a,y,u),i!==null&&(Fr(i,a,u),Go(i,a,u))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var l=Pr(),u=Fn(l);u.tag=2,i!=null&&(u.callback=i),i=pn(a,u,l),i!==null&&(Fr(i,a,l),Go(i,a,l))}};function It(a,i,l,u,y,j,$){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(u,j,$):i.prototype&&i.prototype.isPureReactComponent?!ur(l,u)||!ur(y,j):!0}function ts(a,i,l,u){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==a&&Ot.enqueueReplaceState(i,i.state,null)}function vt(a,i){var l=i;if("ref"in i){l={};for(var u in i)u!=="ref"&&(l[u]=i[u])}if(a=a.defaultProps){l===i&&(l=p({},l));for(var y in a)l[y]===void 0&&(l[y]=a[y])}return l}var bt=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function Bt(a){bt(a)}function Qt(a){console.error(a)}function Ma(a){bt(a)}function gs(a,i){try{var l=a.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Ws(a,i,l){try{var u=a.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function nr(a,i,l){return l=Fn(l),l.tag=3,l.payload={element:null},l.callback=function(){gs(a,i)},l}function hc(a){return a=Fn(a),a.tag=3,a}function Xg(a,i,l,u){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var j=u.value;a.payload=function(){return y(j)},a.callback=function(){Ws(i,l,u)}}var $=l.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(a.callback=function(){Ws(i,l,u),typeof y!="function"&&(oo===null?oo=new Set([this]):oo.add(this));var W=u.stack;this.componentDidCatch(u.value,{componentStack:W!==null?W:""})})}function Uj(a,i,l,u,y){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=l.alternate,i!==null&&Wr(i,l,y,!0),l=b.current,l!==null){switch(l.tag){case 13:return E===null?Uf():l.alternate===null&&Xs===0&&(Xs=3),l.flags&=-257,l.flags|=65536,l.lanes=y,u===nd?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([u]):i.add(u),Hf(a,u,y)),!1;case 22:return l.flags|=65536,u===nd?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([u]):l.add(u)),Hf(a,u,y)),!1}throw Error(n(435,l.tag))}return Hf(a,u,y),Uf(),!1}if(Xt)return i=b.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=y,u!==Bl&&(a=Error(n(422),{cause:u}),Ho(La(a,l)))):(u!==Bl&&(i=Error(n(423),{cause:u}),Ho(La(i,l))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,u=La(u,l),y=nr(a.stateNode,u,y),Yi(a,y),Xs!==4&&(Xs=2)),!1;var j=Error(n(520),{cause:u});if(j=La(j,l),Id===null?Id=[j]:Id.push(j),Xs!==4&&(Xs=2),i===null)return!0;u=La(u,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,a=y&-y,l.lanes|=a,a=nr(l.stateNode,u,a),Yi(l,a),!1;case 1:if(i=l.type,j=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(oo===null||!oo.has(j))))return l.flags|=65536,y&=-y,l.lanes|=y,y=hc(y),Xg(y,a,l,u),Yi(l,y),!1}l=l.return}while(l!==null);return!1}var Qg=Error(n(461)),Na=!1;function Oa(a,i,l,u){i.child=a===null?Nm(i,null,l,u):to(i,a.child,l,u)}function Zg(a,i,l,u,y){l=l.render;var j=i.ref;if("ref"in u){var $={};for(var W in u)W!=="ref"&&($[W]=u[W])}else $=u;return Ea(i),u=ld(a,i,l,$,j,y),W=Ql(),a!==null&&!Na?(cd(a,i,y),ci(a,i,y)):(Xt&&W&&qs(i),i.flags|=1,Oa(a,i,u,y),i.child)}function Jg(a,i,l,u,y){if(a===null){var j=l.type;return typeof j=="function"&&!Jc(j)&&j.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=j,ep(a,i,j,u,y)):(a=On(l.type,null,u,i,i.mode,y),a.ref=i.ref,a.return=i,i.child=a)}if(j=a.child,!Cf(a,y)){var $=j.memoizedProps;if(l=l.compare,l=l!==null?l:ur,l($,u)&&a.ref===i.ref)return ci(a,i,y)}return i.flags|=1,a=fr(j,u),a.ref=i.ref,a.return=i,i.child=a}function ep(a,i,l,u,y){if(a!==null){var j=a.memoizedProps;if(ur(j,u)&&a.ref===i.ref)if(Na=!1,i.pendingProps=u=j,Cf(a,y))(a.flags&131072)!==0&&(Na=!0);else return i.lanes=a.lanes,ci(a,i,y)}return yf(a,i,l,u,y)}function tp(a,i,l){var u=i.pendingProps,y=u.children,j=a!==null?a.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=j!==null?j.baseLanes|l:l,a!==null){for(y=i.child=a.child,j=0;y!==null;)j=j|y.lanes|y.childLanes,y=y.sibling;i.childLanes=j&~u}else i.childLanes=0,i.child=null;return sp(a,i,u,l)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},a!==null&&zn(i,j!==null?j.cachePool:null),j!==null?Ln(i,j):Xi(),xe(i);else return i.lanes=i.childLanes=536870912,sp(a,i,j!==null?j.baseLanes|l:l,l)}else j!==null?(zn(i,j.cachePool),Ln(i,j),je(),i.memoizedState=null):(a!==null&&zn(i,null),Xi(),je());return Oa(a,i,y,l),i.child}function sp(a,i,l,u){var y=ad();return y=y===null?null:{parent:Ks._currentValue,pool:y},i.memoizedState={baseLanes:l,cachePool:y},a!==null&&zn(i,null),Xi(),xe(i),a!==null&&Wr(a,i,u,!0),null}function Sm(a,i){var l=i.ref;if(l===null)a!==null&&a.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(a===null||a.ref!==l)&&(i.flags|=4194816)}}function yf(a,i,l,u,y){return Ea(i),l=ld(a,i,l,u,void 0,y),u=Ql(),a!==null&&!Na?(cd(a,i,y),ci(a,i,y)):(Xt&&u&&qs(i),i.flags|=1,Oa(a,i,l,y),i.child)}function ap(a,i,l,u,y,j){return Ea(i),i.updateQueue=null,l=am(i,u,l,y),Xl(a),u=Ql(),a!==null&&!Na?(cd(a,i,j),ci(a,i,j)):(Xt&&u&&qs(i),i.flags|=1,Oa(a,i,l,j),i.child)}function rp(a,i,l,u,y){if(Ea(i),i.stateNode===null){var j=Mn,$=l.contextType;typeof $=="object"&&$!==null&&(j=wa($)),j=new l(u,j),i.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=Ot,i.stateNode=j,j._reactInternals=i,j=i.stateNode,j.props=u,j.state=i.memoizedState,j.refs={},ql(i),$=l.contextType,j.context=typeof $=="object"&&$!==null?wa($):Mn,j.state=i.memoizedState,$=l.getDerivedStateFromProps,typeof $=="function"&&(yt(i,l,$,u),j.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||($=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),$!==j.state&&Ot.enqueueReplaceState(j,j.state,null),Xo(i,u,j,y),Wo(),j.state=i.memoizedState),typeof j.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(a===null){j=i.stateNode;var W=i.memoizedProps,we=vt(l,W);j.props=we;var Ge=j.context,lt=l.contextType;$=Mn,typeof lt=="object"&&lt!==null&&($=wa(lt));var ht=l.getDerivedStateFromProps;lt=typeof ht=="function"||typeof j.getSnapshotBeforeUpdate=="function",W=i.pendingProps!==W,lt||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(W||Ge!==$)&&ts(i,j,u,$),Pn=!1;var et=i.memoizedState;j.state=et,Xo(i,u,j,y),Wo(),Ge=i.memoizedState,W||et!==Ge||Pn?(typeof ht=="function"&&(yt(i,l,ht,u),Ge=i.memoizedState),(we=Pn||It(i,l,we,u,et,Ge,$))?(lt||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(i.flags|=4194308)):(typeof j.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Ge),j.props=u,j.state=Ge,j.context=$,u=we):(typeof j.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{j=i.stateNode,id(a,i),$=i.memoizedProps,lt=vt(l,$),j.props=lt,ht=i.pendingProps,et=j.context,Ge=l.contextType,we=Mn,typeof Ge=="object"&&Ge!==null&&(we=wa(Ge)),W=l.getDerivedStateFromProps,(Ge=typeof W=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||($!==ht||et!==we)&&ts(i,j,u,we),Pn=!1,et=i.memoizedState,j.state=et,Xo(i,u,j,y),Wo();var at=i.memoizedState;$!==ht||et!==at||Pn||a!==null&&a.dependencies!==null&&Dr(a.dependencies)?(typeof W=="function"&&(yt(i,l,W,u),at=i.memoizedState),(lt=Pn||It(i,l,lt,u,et,at,we)||a!==null&&a.dependencies!==null&&Dr(a.dependencies))?(Ge||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(u,at,we),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(u,at,we)),typeof j.componentDidUpdate=="function"&&(i.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof j.componentDidUpdate!="function"||$===a.memoizedProps&&et===a.memoizedState||(i.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&et===a.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=at),j.props=u,j.state=at,j.context=we,u=lt):(typeof j.componentDidUpdate!="function"||$===a.memoizedProps&&et===a.memoizedState||(i.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&et===a.memoizedState||(i.flags|=1024),u=!1)}return j=u,Sm(a,i),u=(i.flags&128)!==0,j||u?(j=i.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:j.render(),i.flags|=1,a!==null&&u?(i.child=to(i,a.child,null,y),i.child=to(i,null,l,y)):Oa(a,i,l,y),i.memoizedState=j.state,a=i.child):a=ci(a,i,y),a}function np(a,i,l,u){return xn(),i.flags|=256,Oa(a,i,l,u),i.child}var bf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vf(a){return{baseLanes:a,cachePool:rd()}}function jf(a,i,l){return a=a!==null?a.childLanes&~l:0,i&&(a|=Qr),a}function ip(a,i,l){var u=i.pendingProps,y=!1,j=(i.flags&128)!==0,$;if(($=j)||($=a!==null&&a.memoizedState===null?!1:(Ue.current&2)!==0),$&&(y=!0,i.flags&=-129),$=(i.flags&32)!==0,i.flags&=-33,a===null){if(Xt){if(y?K(i):je(),Xt){var W=Es,we;if(we=W){e:{for(we=W,W=Ua;we.nodeType!==8;){if(!W){W=null;break e}if(we=bn(we.nextSibling),we===null){W=null;break e}}W=we}W!==null?(i.memoizedState={dehydrated:W,treeContext:Kr!==null?{id:ha,overflow:xr}:null,retryLane:536870912,hydrationErrors:null},we=Ba(18,null,null,0),we.stateNode=W,we.return=i,i.child=we,Ut=i,Es=null,we=!0):we=!1}we||In(i)}if(W=i.memoizedState,W!==null&&(W=W.dehydrated,W!==null))return rx(W)?i.lanes=32:i.lanes=536870912,null;pe(i)}return W=u.children,u=u.fallback,y?(je(),y=i.mode,W=Cm({mode:"hidden",children:W},y),u=ri(u,y,l,null),W.return=i,u.return=i,W.sibling=u,i.child=W,y=i.child,y.memoizedState=vf(l),y.childLanes=jf(a,$,l),i.memoizedState=bf,u):(K(i),wf(i,W))}if(we=a.memoizedState,we!==null&&(W=we.dehydrated,W!==null)){if(j)i.flags&256?(K(i),i.flags&=-257,i=Nf(a,i,l)):i.memoizedState!==null?(je(),i.child=a.child,i.flags|=128,i=null):(je(),y=u.fallback,W=i.mode,u=Cm({mode:"visible",children:u.children},W),y=ri(y,W,l,null),y.flags|=2,u.return=i,y.return=i,u.sibling=y,i.child=u,to(i,a.child,null,l),u=i.child,u.memoizedState=vf(l),u.childLanes=jf(a,$,l),i.memoizedState=bf,i=y);else if(K(i),rx(W)){if($=W.nextSibling&&W.nextSibling.dataset,$)var Ge=$.dgst;$=Ge,u=Error(n(419)),u.stack="",u.digest=$,Ho({value:u,source:null,stack:null}),i=Nf(a,i,l)}else if(Na||Wr(a,i,l,!1),$=(l&a.childLanes)!==0,Na||$){if($=Is,$!==null&&(u=l&-l,u=(u&42)!==0?1:kt(u),u=(u&($.suspendedLanes|l))!==0?0:u,u!==0&&u!==we.retryLane))throw we.retryLane=u,Ui(a,u),Fr($,a,u),Qg;W.data==="$?"||Uf(),i=Nf(a,i,l)}else W.data==="$?"?(i.flags|=192,i.child=a.child,i=null):(a=we.treeContext,Es=bn(W.nextSibling),Ut=i,Xt=!0,Yr=null,Ua=!1,a!==null&&(va[ra++]=ha,va[ra++]=xr,va[ra++]=Kr,ha=a.id,xr=a.overflow,Kr=i),i=wf(i,u.children),i.flags|=4096);return i}return y?(je(),y=u.fallback,W=i.mode,we=a.child,Ge=we.sibling,u=fr(we,{mode:"hidden",children:u.children}),u.subtreeFlags=we.subtreeFlags&65011712,Ge!==null?y=fr(Ge,y):(y=ri(y,W,l,null),y.flags|=2),y.return=i,u.return=i,u.sibling=y,i.child=u,u=y,y=i.child,W=a.child.memoizedState,W===null?W=vf(l):(we=W.cachePool,we!==null?(Ge=Ks._currentValue,we=we.parent!==Ge?{parent:Ge,pool:Ge}:we):we=rd(),W={baseLanes:W.baseLanes|l,cachePool:we}),y.memoizedState=W,y.childLanes=jf(a,$,l),i.memoizedState=bf,u):(K(i),l=a.child,a=l.sibling,l=fr(l,{mode:"visible",children:u.children}),l.return=i,l.sibling=null,a!==null&&($=i.deletions,$===null?(i.deletions=[a],i.flags|=16):$.push(a)),i.child=l,i.memoizedState=null,l)}function wf(a,i){return i=Cm({mode:"visible",children:i},a.mode),i.return=a,a.child=i}function Cm(a,i){return a=Ba(22,a,null,i),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Nf(a,i,l){return to(i,a.child,null,l),a=wf(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function op(a,i,l){a.lanes|=i;var u=a.alternate;u!==null&&(u.lanes|=i),ed(a.return,i,l)}function Sf(a,i,l,u,y){var j=a.memoizedState;j===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:y}:(j.isBackwards=i,j.rendering=null,j.renderingStartTime=0,j.last=u,j.tail=l,j.tailMode=y)}function lp(a,i,l){var u=i.pendingProps,y=u.revealOrder,j=u.tail;if(Oa(a,i,u.children,l),u=Ue.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&op(a,l,i);else if(a.tag===19)op(a,l,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}u&=1}switch(ae(Ue,u),y){case"forwards":for(l=i.child,y=null;l!==null;)a=l.alternate,a!==null&&tt(a)===null&&(y=l),l=l.sibling;l=y,l===null?(y=i.child,i.child=null):(y=l.sibling,l.sibling=null),Sf(i,!1,y,l,j);break;case"backwards":for(l=null,y=i.child,i.child=null;y!==null;){if(a=y.alternate,a!==null&&tt(a)===null){i.child=y;break}a=y.sibling,y.sibling=l,l=y,y=a}Sf(i,!0,l,null,j);break;case"together":Sf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ci(a,i,l){if(a!==null&&(i.dependencies=a.dependencies),io|=i.lanes,(l&i.childLanes)===0)if(a!==null){if(Wr(a,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(a!==null&&i.child!==a.child)throw Error(n(153));if(i.child!==null){for(a=i.child,l=fr(a,a.pendingProps),i.child=l,l.return=i;a.sibling!==null;)a=a.sibling,l=l.sibling=fr(a,a.pendingProps),l.return=i;l.sibling=null}return i.child}function Cf(a,i){return(a.lanes&i)!==0?!0:(a=a.dependencies,!!(a!==null&&Dr(a)))}function $j(a,i,l){switch(i.tag){case 3:f(i,i.stateNode.containerInfo),fa(i,Ks,a.memoizedState.cache),xn();break;case 27:case 5:S(i);break;case 4:f(i,i.stateNode.containerInfo);break;case 10:fa(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(K(i),i.flags|=128,null):(l&i.child.childLanes)!==0?ip(a,i,l):(K(i),a=ci(a,i,l),a!==null?a.sibling:null);K(i);break;case 19:var y=(a.flags&128)!==0;if(u=(l&i.childLanes)!==0,u||(Wr(a,i,l,!1),u=(l&i.childLanes)!==0),y){if(u)return lp(a,i,l);i.flags|=128}if(y=i.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ae(Ue,Ue.current),u)break;return null;case 22:case 23:return i.lanes=0,tp(a,i,l);case 24:fa(i,Ks,a.memoizedState.cache)}return ci(a,i,l)}function cp(a,i,l){if(a!==null)if(a.memoizedProps!==i.pendingProps)Na=!0;else{if(!Cf(a,l)&&(i.flags&128)===0)return Na=!1,$j(a,i,l);Na=(a.flags&131072)!==0}else Na=!1,Xt&&(i.flags&1048576)!==0&&Da(i,Aa,i.index);switch(i.lanes=0,i.tag){case 16:e:{a=i.pendingProps;var u=i.elementType,y=u._init;if(u=y(u._payload),i.type=u,typeof u=="function")Jc(u)?(a=vt(u,a),i.tag=1,i=rp(null,i,u,a,l)):(i.tag=0,i=yf(null,i,u,a,l));else{if(u!=null){if(y=u.$$typeof,y===F){i.tag=11,i=Zg(null,i,u,a,l);break e}else if(y===se){i.tag=14,i=Jg(null,i,u,a,l);break e}}throw i=re(u)||u,Error(n(306,i,""))}}return i;case 0:return yf(a,i,i.type,i.pendingProps,l);case 1:return u=i.type,y=vt(u,i.pendingProps),rp(a,i,u,y,l);case 3:e:{if(f(i,i.stateNode.containerInfo),a===null)throw Error(n(387));u=i.pendingProps;var j=i.memoizedState;y=j.element,id(a,i),Xo(i,u,null,l);var $=i.memoizedState;if(u=$.cache,fa(i,Ks,u),u!==j.cache&&ja(i,[Ks],l,!0),Wo(),u=$.element,j.isDehydrated)if(j={element:u,isDehydrated:!1,cache:$.cache},i.updateQueue.baseState=j,i.memoizedState=j,i.flags&256){i=np(a,i,u,l);break e}else if(u!==y){y=La(Error(n(424)),i),Ho(y),i=np(a,i,u,l);break e}else{switch(a=i.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Es=bn(a.firstChild),Ut=i,Xt=!0,Yr=null,Ua=!0,l=Nm(i,null,u,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(xn(),u===y){i=ci(a,i,l);break e}Oa(a,i,u,l)}i=i.child}return i;case 26:return Sm(a,i),a===null?(l=h0(i.type,null,i.pendingProps,null))?i.memoizedState=l:Xt||(l=i.type,a=i.pendingProps,u=Lm(A.current).createElement(l),u[ve]=i,u[Ze]=a,Ia(u,l,a),nt(u),i.stateNode=u):i.memoizedState=h0(i.type,a.memoizedProps,i.pendingProps,a.memoizedState),null;case 27:return S(i),a===null&&Xt&&(u=i.stateNode=d0(i.type,i.pendingProps,A.current),Ut=i,Ua=!0,y=Es,uo(i.type)?(nx=y,Es=bn(u.firstChild)):Es=y),Oa(a,i,i.pendingProps.children,l),Sm(a,i),a===null&&(i.flags|=4194304),i.child;case 5:return a===null&&Xt&&((y=u=Es)&&(u=gw(u,i.type,i.pendingProps,Ua),u!==null?(i.stateNode=u,Ut=i,Es=bn(u.firstChild),Ua=!1,y=!0):y=!1),y||In(i)),S(i),y=i.type,j=i.pendingProps,$=a!==null?a.memoizedProps:null,u=j.children,tx(y,j)?u=null:$!==null&&tx(y,$)&&(i.flags|=32),i.memoizedState!==null&&(y=ld(a,i,ff,null,null,l),Vd._currentValue=y),Sm(a,i),Oa(a,i,u,l),i.child;case 6:return a===null&&Xt&&((a=l=Es)&&(l=pw(l,i.pendingProps,Ua),l!==null?(i.stateNode=l,Ut=i,Es=null,a=!0):a=!1),a||In(i)),null;case 13:return ip(a,i,l);case 4:return f(i,i.stateNode.containerInfo),u=i.pendingProps,a===null?i.child=to(i,null,u,l):Oa(a,i,u,l),i.child;case 11:return Zg(a,i,i.type,i.pendingProps,l);case 7:return Oa(a,i,i.pendingProps,l),i.child;case 8:return Oa(a,i,i.pendingProps.children,l),i.child;case 12:return Oa(a,i,i.pendingProps.children,l),i.child;case 10:return u=i.pendingProps,fa(i,i.type,u.value),Oa(a,i,u.children,l),i.child;case 9:return y=i.type._context,u=i.pendingProps.children,Ea(i),y=wa(y),u=u(y),i.flags|=1,Oa(a,i,u,l),i.child;case 14:return Jg(a,i,i.type,i.pendingProps,l);case 15:return ep(a,i,i.type,i.pendingProps,l);case 19:return lp(a,i,l);case 31:return u=i.pendingProps,l=i.mode,u={mode:u.mode,children:u.children},a===null?(l=Cm(u,l),l.ref=i.ref,i.child=l,l.return=i,i=l):(l=fr(a.child,u),l.ref=i.ref,i.child=l,l.return=i,i=l),i;case 22:return tp(a,i,l);case 24:return Ea(i),u=wa(Ks),a===null?(y=ad(),y===null&&(y=Is,j=$l(),y.pooledCache=j,j.refCount++,j!==null&&(y.pooledCacheLanes|=l),y=j),i.memoizedState={parent:u,cache:y},ql(i),fa(i,Ks,y)):((a.lanes&l)!==0&&(id(a,i),Xo(i,null,null,l),Wo()),y=a.memoizedState,j=i.memoizedState,y.parent!==u?(y={parent:u,cache:u},i.memoizedState=y,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=y),fa(i,Ks,u)):(u=j.cache,fa(i,Ks,u),u!==y.cache&&ja(i,[Ks],l,!0))),Oa(a,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(n(156,i.tag))}function di(a){a.flags|=4}function dp(a,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!y0(i)){if(i=b.current,i!==null&&((xs&4194048)===xs?E!==null:(xs&62914560)!==xs&&(xs&536870912)===0||i!==E))throw Yo=nd,Zu;a.flags|=8192}}function km(a,i){i!==null&&(a.flags|=4),a.flags&16384&&(i=a.tag!==22?ft():536870912,a.lanes|=i,pc|=i)}function Dd(a,i){if(!Xt)switch(a.tailMode){case"hidden":i=a.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?a.tail=null:l.sibling=null;break;case"collapsed":l=a.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:u.sibling=null}}function Us(a){var i=a.alternate!==null&&a.alternate.child===a.child,l=0,u=0;if(i)for(var y=a.child;y!==null;)l|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)l|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=u,a.childLanes=l,i}function Hj(a,i,l){var u=i.pendingProps;switch(Rn(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Us(i),null;case 1:return Us(i),null;case 3:return l=i.stateNode,u=null,a!==null&&(u=a.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),na(Ks),g(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(a===null||a.child===null)&&(fn(i)?di(i):a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Gu())),Us(i),null;case 26:return l=i.memoizedState,a===null?(di(i),l!==null?(Us(i),dp(i,l)):(Us(i),i.flags&=-16777217)):l?l!==a.memoizedState?(di(i),Us(i),dp(i,l)):(Us(i),i.flags&=-16777217):(a.memoizedProps!==u&&di(i),Us(i),i.flags&=-16777217),null;case 27:k(i),l=A.current;var y=i.type;if(a!==null&&i.stateNode!=null)a.memoizedProps!==u&&di(i);else{if(!u){if(i.stateNode===null)throw Error(n(166));return Us(i),null}a=Ne.current,fn(i)?Vi(i):(a=d0(y,u,l),i.stateNode=a,di(i))}return Us(i),null;case 5:if(k(i),l=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==u&&di(i);else{if(!u){if(i.stateNode===null)throw Error(n(166));return Us(i),null}if(a=Ne.current,fn(i))Vi(i);else{switch(y=Lm(A.current),a){case 1:a=y.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:a=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":a=y.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":a=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":a=y.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof u.is=="string"?y.createElement("select",{is:u.is}):y.createElement("select"),u.multiple?a.multiple=!0:u.size&&(a.size=u.size);break;default:a=typeof u.is=="string"?y.createElement(l,{is:u.is}):y.createElement(l)}}a[ve]=i,a[Ze]=u;e:for(y=i.child;y!==null;){if(y.tag===5||y.tag===6)a.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===i)break e;for(;y.sibling===null;){if(y.return===null||y.return===i)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}i.stateNode=a;e:switch(Ia(a,l,u),l){case"button":case"input":case"select":case"textarea":a=!!u.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&di(i)}}return Us(i),i.flags&=-16777217,null;case 6:if(a&&i.stateNode!=null)a.memoizedProps!==u&&di(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(n(166));if(a=A.current,fn(i)){if(a=i.stateNode,l=i.memoizedProps,u=null,y=Ut,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}a[ve]=i,a=!!(a.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||a0(a.nodeValue,l)),a||In(i)}else a=Lm(a).createTextNode(u),a[ve]=i,i.stateNode=a}return Us(i),null;case 13:if(u=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=fn(i),u!==null&&u.dehydrated!==null){if(a===null){if(!y)throw Error(n(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[ve]=i}else xn(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Us(i),y=!1}else y=Gu(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return i.flags&256?(pe(i),i):(pe(i),null)}if(pe(i),(i.flags&128)!==0)return i.lanes=l,i;if(l=u!==null,a=a!==null&&a.memoizedState!==null,l){u=i.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool);var j=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(j=u.memoizedState.cachePool.pool),j!==y&&(u.flags|=2048)}return l!==a&&l&&(i.child.flags|=8192),km(i,i.updateQueue),Us(i),null;case 4:return g(),a===null&&Xf(i.stateNode.containerInfo),Us(i),null;case 10:return na(i.type),Us(i),null;case 19:if(ye(Ue),y=i.memoizedState,y===null)return Us(i),null;if(u=(i.flags&128)!==0,j=y.rendering,j===null)if(u)Dd(y,!1);else{if(Xs!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(j=tt(a),j!==null){for(i.flags|=128,Dd(y,!1),a=j.updateQueue,i.updateQueue=a,km(i,a),i.subtreeFlags=0,a=l,l=i.child;l!==null;)$i(l,a),l=l.sibling;return ae(Ue,Ue.current&1|2),i.child}a=a.sibling}y.tail!==null&&ee()>Dm&&(i.flags|=128,u=!0,Dd(y,!1),i.lanes=4194304)}else{if(!u)if(a=tt(j),a!==null){if(i.flags|=128,u=!0,a=a.updateQueue,i.updateQueue=a,km(i,a),Dd(y,!0),y.tail===null&&y.tailMode==="hidden"&&!j.alternate&&!Xt)return Us(i),null}else 2*ee()-y.renderingStartTime>Dm&&l!==536870912&&(i.flags|=128,u=!0,Dd(y,!1),i.lanes=4194304);y.isBackwards?(j.sibling=i.child,i.child=j):(a=y.last,a!==null?a.sibling=j:i.child=j,y.last=j)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=ee(),i.sibling=null,a=Ue.current,ae(Ue,u?a&1|2:a&1),i):(Us(i),null);case 22:case 23:return pe(i),Qo(),u=i.memoizedState!==null,a!==null?a.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(l&536870912)!==0&&(i.flags&128)===0&&(Us(i),i.subtreeFlags&6&&(i.flags|=8192)):Us(i),l=i.updateQueue,l!==null&&km(i,l.retryQueue),l=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==l&&(i.flags|=2048),a!==null&&ye(ii),null;case 24:return l=null,a!==null&&(l=a.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),na(Ks),Us(i),null;case 25:return null;case 30:return null}throw Error(n(156,i.tag))}function Vj(a,i){switch(Rn(i),i.tag){case 1:return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return na(Ks),g(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 26:case 27:case 5:return k(i),null;case 13:if(pe(i),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(n(340));xn()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return ye(Ue),null;case 4:return g(),null;case 10:return na(i.type),null;case 22:case 23:return pe(i),Qo(),a!==null&&ye(ii),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 24:return na(Ks),null;case 25:return null;default:return null}}function up(a,i){switch(Rn(i),i.tag){case 3:na(Ks),g();break;case 26:case 27:case 5:k(i);break;case 4:g();break;case 13:pe(i);break;case 19:ye(Ue);break;case 10:na(i.type);break;case 22:case 23:pe(i),Qo(),a!==null&&ye(ii);break;case 24:na(Ks)}}function Ed(a,i){try{var l=i.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var y=u.next;l=y;do{if((l.tag&a)===a){u=void 0;var j=l.create,$=l.inst;u=j(),$.destroy=u}l=l.next}while(l!==y)}}catch(W){Ms(i,i.return,W)}}function so(a,i,l){try{var u=i.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var j=y.next;u=j;do{if((u.tag&a)===a){var $=u.inst,W=$.destroy;if(W!==void 0){$.destroy=void 0,y=i;var we=l,Ge=W;try{Ge()}catch(lt){Ms(y,we,lt)}}}u=u.next}while(u!==j)}}catch(lt){Ms(i,i.return,lt)}}function mp(a){var i=a.updateQueue;if(i!==null){var l=a.stateNode;try{Yl(i,l)}catch(u){Ms(a,a.return,u)}}}function hp(a,i,l){l.props=vt(a.type,a.memoizedProps),l.state=a.memoizedState;try{l.componentWillUnmount()}catch(u){Ms(a,i,u)}}function Td(a,i){try{var l=a.ref;if(l!==null){switch(a.tag){case 26:case 27:case 5:var u=a.stateNode;break;case 30:u=a.stateNode;break;default:u=a.stateNode}typeof l=="function"?a.refCleanup=l(u):l.current=u}}catch(y){Ms(a,i,y)}}function Bn(a,i){var l=a.ref,u=a.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(y){Ms(a,i,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){Ms(a,i,y)}else l.current=null}function fp(a){var i=a.type,l=a.memoizedProps,u=a.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(y){Ms(a,a.return,y)}}function kf(a,i,l){try{var u=a.stateNode;uw(u,a.type,l,i),u[Ze]=i}catch(y){Ms(a,a.return,y)}}function xp(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&uo(a.type)||a.tag===4}function _f(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||xp(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&uo(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Af(a,i,l){var u=a.tag;if(u===5||u===6)a=a.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(a,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(a),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Fm));else if(u!==4&&(u===27&&uo(a.type)&&(l=a.stateNode,i=null),a=a.child,a!==null))for(Af(a,i,l),a=a.sibling;a!==null;)Af(a,i,l),a=a.sibling}function _m(a,i,l){var u=a.tag;if(u===5||u===6)a=a.stateNode,i?l.insertBefore(a,i):l.appendChild(a);else if(u!==4&&(u===27&&uo(a.type)&&(l=a.stateNode),a=a.child,a!==null))for(_m(a,i,l),a=a.sibling;a!==null;)_m(a,i,l),a=a.sibling}function gp(a){var i=a.stateNode,l=a.memoizedProps;try{for(var u=a.type,y=i.attributes;y.length;)i.removeAttributeNode(y[0]);Ia(i,u,l),i[ve]=a,i[Ze]=l}catch(j){Ms(a,a.return,j)}}var ui=!1,Js=!1,Df=!1,pp=typeof WeakSet=="function"?WeakSet:Set,Sa=null;function qj(a,i){if(a=a.containerInfo,Jf=qm,a=si(a),Wc(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{l=(l=a.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var y=u.anchorOffset,j=u.focusNode;u=u.focusOffset;try{l.nodeType,j.nodeType}catch{l=null;break e}var $=0,W=-1,we=-1,Ge=0,lt=0,ht=a,et=null;t:for(;;){for(var at;ht!==l||y!==0&&ht.nodeType!==3||(W=$+y),ht!==j||u!==0&&ht.nodeType!==3||(we=$+u),ht.nodeType===3&&($+=ht.nodeValue.length),(at=ht.firstChild)!==null;)et=ht,ht=at;for(;;){if(ht===a)break t;if(et===l&&++Ge===y&&(W=$),et===j&&++lt===u&&(we=$),(at=ht.nextSibling)!==null)break;ht=et,et=ht.parentNode}ht=at}l=W===-1||we===-1?null:{start:W,end:we}}else l=null}l=l||{start:0,end:0}}else l=null;for(ex={focusedElem:a,selectionRange:l},qm=!1,Sa=i;Sa!==null;)if(i=Sa,a=i.child,(i.subtreeFlags&1024)!==0&&a!==null)a.return=i,Sa=a;else for(;Sa!==null;){switch(i=Sa,j=i.alternate,a=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&j!==null){a=void 0,l=i,y=j.memoizedProps,j=j.memoizedState,u=l.stateNode;try{var Zt=vt(l.type,y,l.elementType===l.type);a=u.getSnapshotBeforeUpdate(Zt,j),u.__reactInternalSnapshotBeforeUpdate=a}catch(Yt){Ms(l,l.return,Yt)}}break;case 3:if((a&1024)!==0){if(a=i.stateNode.containerInfo,l=a.nodeType,l===9)ax(a);else if(l===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":ax(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=i.sibling,a!==null){a.return=i.return,Sa=a;break}Sa=i.return}}function yp(a,i,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:ao(a,l),u&4&&Ed(5,l);break;case 1:if(ao(a,l),u&4)if(a=l.stateNode,i===null)try{a.componentDidMount()}catch($){Ms(l,l.return,$)}else{var y=vt(l.type,i.memoizedProps);i=i.memoizedState;try{a.componentDidUpdate(y,i,a.__reactInternalSnapshotBeforeUpdate)}catch($){Ms(l,l.return,$)}}u&64&&mp(l),u&512&&Td(l,l.return);break;case 3:if(ao(a,l),u&64&&(a=l.updateQueue,a!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Yl(a,i)}catch($){Ms(l,l.return,$)}}break;case 27:i===null&&u&4&&gp(l);case 26:case 5:ao(a,l),i===null&&u&4&&fp(l),u&512&&Td(l,l.return);break;case 12:ao(a,l);break;case 13:ao(a,l),u&4&&jp(a,l),u&64&&(a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(l=ew.bind(null,l),yw(a,l))));break;case 22:if(u=l.memoizedState!==null||ui,!u){i=i!==null&&i.memoizedState!==null||Js,y=ui;var j=Js;ui=u,(Js=i)&&!j?ro(a,l,(l.subtreeFlags&8772)!==0):ao(a,l),ui=y,Js=j}break;case 30:break;default:ao(a,l)}}function bp(a){var i=a.alternate;i!==null&&(a.alternate=null,bp(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&Ie(i)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Fs=null,br=!1;function mi(a,i,l){for(l=l.child;l!==null;)vp(a,i,l),l=l.sibling}function vp(a,i,l){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(Re,l)}catch{}switch(l.tag){case 26:Js||Bn(l,i),mi(a,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Js||Bn(l,i);var u=Fs,y=br;uo(l.type)&&(Fs=l.stateNode,br=!1),mi(a,i,l),Bd(l.stateNode),Fs=u,br=y;break;case 5:Js||Bn(l,i);case 6:if(u=Fs,y=br,Fs=null,mi(a,i,l),Fs=u,br=y,Fs!==null)if(br)try{(Fs.nodeType===9?Fs.body:Fs.nodeName==="HTML"?Fs.ownerDocument.body:Fs).removeChild(l.stateNode)}catch(j){Ms(l,i,j)}else try{Fs.removeChild(l.stateNode)}catch(j){Ms(l,i,j)}break;case 18:Fs!==null&&(br?(a=Fs,l0(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,l.stateNode),Gd(a)):l0(Fs,l.stateNode));break;case 4:u=Fs,y=br,Fs=l.stateNode.containerInfo,br=!0,mi(a,i,l),Fs=u,br=y;break;case 0:case 11:case 14:case 15:Js||so(2,l,i),Js||so(4,l,i),mi(a,i,l);break;case 1:Js||(Bn(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"&&hp(l,i,u)),mi(a,i,l);break;case 21:mi(a,i,l);break;case 22:Js=(u=Js)||l.memoizedState!==null,mi(a,i,l),Js=u;break;default:mi(a,i,l)}}function jp(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Gd(a)}catch(l){Ms(i,i.return,l)}}function Kj(a){switch(a.tag){case 13:case 19:var i=a.stateNode;return i===null&&(i=a.stateNode=new pp),i;case 22:return a=a.stateNode,i=a._retryCache,i===null&&(i=a._retryCache=new pp),i;default:throw Error(n(435,a.tag))}}function Ef(a,i){var l=Kj(a);i.forEach(function(u){var y=tw.bind(null,a,u);l.has(u)||(l.add(u),u.then(y,y))})}function Rr(a,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var y=l[u],j=a,$=i,W=$;e:for(;W!==null;){switch(W.tag){case 27:if(uo(W.type)){Fs=W.stateNode,br=!1;break e}break;case 5:Fs=W.stateNode,br=!1;break e;case 3:case 4:Fs=W.stateNode.containerInfo,br=!0;break e}W=W.return}if(Fs===null)throw Error(n(160));vp(j,$,y),Fs=null,br=!1,j=y.alternate,j!==null&&(j.return=null),y.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)wp(i,a),i=i.sibling}var yn=null;function wp(a,i){var l=a.alternate,u=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Rr(i,a),Ir(a),u&4&&(so(3,a,a.return),Ed(3,a),so(5,a,a.return));break;case 1:Rr(i,a),Ir(a),u&512&&(Js||l===null||Bn(l,l.return)),u&64&&ui&&(a=a.updateQueue,a!==null&&(u=a.callbacks,u!==null&&(l=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var y=yn;if(Rr(i,a),Ir(a),u&512&&(Js||l===null||Bn(l,l.return)),u&4){var j=l!==null?l.memoizedState:null;if(u=a.memoizedState,l===null)if(u===null)if(a.stateNode===null){e:{u=a.type,l=a.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":j=y.getElementsByTagName("title")[0],(!j||j[me]||j[ve]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=y.createElement(u),y.head.insertBefore(j,y.querySelector("head > title"))),Ia(j,u,l),j[ve]=a,nt(j),u=j;break e;case"link":var $=g0("link","href",y).get(u+(l.href||""));if($){for(var W=0;W<$.length;W++)if(j=$[W],j.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&j.getAttribute("rel")===(l.rel==null?null:l.rel)&&j.getAttribute("title")===(l.title==null?null:l.title)&&j.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){$.splice(W,1);break t}}j=y.createElement(u),Ia(j,u,l),y.head.appendChild(j);break;case"meta":if($=g0("meta","content",y).get(u+(l.content||""))){for(W=0;W<$.length;W++)if(j=$[W],j.getAttribute("content")===(l.content==null?null:""+l.content)&&j.getAttribute("name")===(l.name==null?null:l.name)&&j.getAttribute("property")===(l.property==null?null:l.property)&&j.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&j.getAttribute("charset")===(l.charSet==null?null:l.charSet)){$.splice(W,1);break t}}j=y.createElement(u),Ia(j,u,l),y.head.appendChild(j);break;default:throw Error(n(468,u))}j[ve]=a,nt(j),u=j}a.stateNode=u}else p0(y,a.type,a.stateNode);else a.stateNode=x0(y,u,a.memoizedProps);else j!==u?(j===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):j.count--,u===null?p0(y,a.type,a.stateNode):x0(y,u,a.memoizedProps)):u===null&&a.stateNode!==null&&kf(a,a.memoizedProps,l.memoizedProps)}break;case 27:Rr(i,a),Ir(a),u&512&&(Js||l===null||Bn(l,l.return)),l!==null&&u&4&&kf(a,a.memoizedProps,l.memoizedProps);break;case 5:if(Rr(i,a),Ir(a),u&512&&(Js||l===null||Bn(l,l.return)),a.flags&32){y=a.stateNode;try{Cr(y,"")}catch(at){Ms(a,a.return,at)}}u&4&&a.stateNode!=null&&(y=a.memoizedProps,kf(a,y,l!==null?l.memoizedProps:y)),u&1024&&(Df=!0);break;case 6:if(Rr(i,a),Ir(a),u&4){if(a.stateNode===null)throw Error(n(162));u=a.memoizedProps,l=a.stateNode;try{l.nodeValue=u}catch(at){Ms(a,a.return,at)}}break;case 3:if($m=null,y=yn,yn=Bm(i.containerInfo),Rr(i,a),yn=y,Ir(a),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Gd(i.containerInfo)}catch(at){Ms(a,a.return,at)}Df&&(Df=!1,Np(a));break;case 4:u=yn,yn=Bm(a.stateNode.containerInfo),Rr(i,a),Ir(a),yn=u;break;case 12:Rr(i,a),Ir(a);break;case 13:Rr(i,a),Ir(a),a.child.flags&8192&&a.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(zf=ee()),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,Ef(a,u)));break;case 22:y=a.memoizedState!==null;var we=l!==null&&l.memoizedState!==null,Ge=ui,lt=Js;if(ui=Ge||y,Js=lt||we,Rr(i,a),Js=lt,ui=Ge,Ir(a),u&8192)e:for(i=a.stateNode,i._visibility=y?i._visibility&-2:i._visibility|1,y&&(l===null||we||ui||Js||rl(a)),l=null,i=a;;){if(i.tag===5||i.tag===26){if(l===null){we=l=i;try{if(j=we.stateNode,y)$=j.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{W=we.stateNode;var ht=we.memoizedProps.style,et=ht!=null&&ht.hasOwnProperty("display")?ht.display:null;W.style.display=et==null||typeof et=="boolean"?"":(""+et).trim()}}catch(at){Ms(we,we.return,at)}}}else if(i.tag===6){if(l===null){we=i;try{we.stateNode.nodeValue=y?"":we.memoizedProps}catch(at){Ms(we,we.return,at)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===a)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=a.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Ef(a,l))));break;case 19:Rr(i,a),Ir(a),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,Ef(a,u)));break;case 30:break;case 21:break;default:Rr(i,a),Ir(a)}}function Ir(a){var i=a.flags;if(i&2){try{for(var l,u=a.return;u!==null;){if(xp(u)){l=u;break}u=u.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var y=l.stateNode,j=_f(a);_m(a,j,y);break;case 5:var $=l.stateNode;l.flags&32&&(Cr($,""),l.flags&=-33);var W=_f(a);_m(a,W,$);break;case 3:case 4:var we=l.stateNode.containerInfo,Ge=_f(a);Af(a,Ge,we);break;default:throw Error(n(161))}}catch(lt){Ms(a,a.return,lt)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function Np(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var i=a;Np(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),a=a.sibling}}function ao(a,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)yp(a,i.alternate,i),i=i.sibling}function rl(a){for(a=a.child;a!==null;){var i=a;switch(i.tag){case 0:case 11:case 14:case 15:so(4,i,i.return),rl(i);break;case 1:Bn(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&hp(i,i.return,l),rl(i);break;case 27:Bd(i.stateNode);case 26:case 5:Bn(i,i.return),rl(i);break;case 22:i.memoizedState===null&&rl(i);break;case 30:rl(i);break;default:rl(i)}a=a.sibling}}function ro(a,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,y=a,j=i,$=j.flags;switch(j.tag){case 0:case 11:case 15:ro(y,j,l),Ed(4,j);break;case 1:if(ro(y,j,l),u=j,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Ge){Ms(u,u.return,Ge)}if(u=j,y=u.updateQueue,y!==null){var W=u.stateNode;try{var we=y.shared.hiddenCallbacks;if(we!==null)for(y.shared.hiddenCallbacks=null,y=0;y<we.length;y++)Kl(we[y],W)}catch(Ge){Ms(u,u.return,Ge)}}l&&$&64&&mp(j),Td(j,j.return);break;case 27:gp(j);case 26:case 5:ro(y,j,l),l&&u===null&&$&4&&fp(j),Td(j,j.return);break;case 12:ro(y,j,l);break;case 13:ro(y,j,l),l&&$&4&&jp(y,j);break;case 22:j.memoizedState===null&&ro(y,j,l),Td(j,j.return);break;case 30:break;default:ro(y,j,l)}i=i.sibling}}function Tf(a,i){var l=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==l&&(a!=null&&a.refCount++,l!=null&&qi(l))}function Mf(a,i){a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&qi(a))}function Un(a,i,l,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Sp(a,i,l,u),i=i.sibling}function Sp(a,i,l,u){var y=i.flags;switch(i.tag){case 0:case 11:case 15:Un(a,i,l,u),y&2048&&Ed(9,i);break;case 1:Un(a,i,l,u);break;case 3:Un(a,i,l,u),y&2048&&(a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&qi(a)));break;case 12:if(y&2048){Un(a,i,l,u),a=i.stateNode;try{var j=i.memoizedProps,$=j.id,W=j.onPostCommit;typeof W=="function"&&W($,i.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(we){Ms(i,i.return,we)}}else Un(a,i,l,u);break;case 13:Un(a,i,l,u);break;case 23:break;case 22:j=i.stateNode,$=i.alternate,i.memoizedState!==null?j._visibility&2?Un(a,i,l,u):Md(a,i):j._visibility&2?Un(a,i,l,u):(j._visibility|=2,fc(a,i,l,u,(i.subtreeFlags&10256)!==0)),y&2048&&Tf($,i);break;case 24:Un(a,i,l,u),y&2048&&Mf(i.alternate,i);break;default:Un(a,i,l,u)}}function fc(a,i,l,u,y){for(y=y&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var j=a,$=i,W=l,we=u,Ge=$.flags;switch($.tag){case 0:case 11:case 15:fc(j,$,W,we,y),Ed(8,$);break;case 23:break;case 22:var lt=$.stateNode;$.memoizedState!==null?lt._visibility&2?fc(j,$,W,we,y):Md(j,$):(lt._visibility|=2,fc(j,$,W,we,y)),y&&Ge&2048&&Tf($.alternate,$);break;case 24:fc(j,$,W,we,y),y&&Ge&2048&&Mf($.alternate,$);break;default:fc(j,$,W,we,y)}i=i.sibling}}function Md(a,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=a,u=i,y=u.flags;switch(u.tag){case 22:Md(l,u),y&2048&&Tf(u.alternate,u);break;case 24:Md(l,u),y&2048&&Mf(u.alternate,u);break;default:Md(l,u)}i=i.sibling}}var Od=8192;function xc(a){if(a.subtreeFlags&Od)for(a=a.child;a!==null;)Cp(a),a=a.sibling}function Cp(a){switch(a.tag){case 26:xc(a),a.flags&Od&&a.memoizedState!==null&&Tw(yn,a.memoizedState,a.memoizedProps);break;case 5:xc(a);break;case 3:case 4:var i=yn;yn=Bm(a.stateNode.containerInfo),xc(a),yn=i;break;case 22:a.memoizedState===null&&(i=a.alternate,i!==null&&i.memoizedState!==null?(i=Od,Od=16777216,xc(a),Od=i):xc(a));break;default:xc(a)}}function kp(a){var i=a.alternate;if(i!==null&&(a=i.child,a!==null)){i.child=null;do i=a.sibling,a.sibling=null,a=i;while(a!==null)}}function Rd(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];Sa=u,Ap(u,a)}kp(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)_p(a),a=a.sibling}function _p(a){switch(a.tag){case 0:case 11:case 15:Rd(a),a.flags&2048&&so(9,a,a.return);break;case 3:Rd(a);break;case 12:Rd(a);break;case 22:var i=a.stateNode;a.memoizedState!==null&&i._visibility&2&&(a.return===null||a.return.tag!==13)?(i._visibility&=-3,Am(a)):Rd(a);break;default:Rd(a)}}function Am(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];Sa=u,Ap(u,a)}kp(a)}for(a=a.child;a!==null;){switch(i=a,i.tag){case 0:case 11:case 15:so(8,i,i.return),Am(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Am(i));break;default:Am(i)}a=a.sibling}}function Ap(a,i){for(;Sa!==null;){var l=Sa;switch(l.tag){case 0:case 11:case 15:so(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:qi(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Sa=u;else e:for(l=a;Sa!==null;){u=Sa;var y=u.sibling,j=u.return;if(bp(u),u===l){Sa=null;break e}if(y!==null){y.return=j,Sa=y;break e}Sa=j}}}var Yj={getCacheForType:function(a){var i=wa(Ks),l=i.data.get(a);return l===void 0&&(l=a(),i.data.set(a,l)),l}},Gj=typeof WeakMap=="function"?WeakMap:Map,Ss=0,Is=null,cs=null,xs=0,Cs=0,zr=null,no=!1,gc=!1,Of=!1,hi=0,Xs=0,io=0,nl=0,Rf=0,Qr=0,pc=0,Id=null,vr=null,If=!1,zf=0,Dm=1/0,Em=null,oo=null,Ra=0,lo=null,yc=null,bc=0,Pf=0,Ff=null,Dp=null,zd=0,Lf=null;function Pr(){if((Ss&2)!==0&&xs!==0)return xs&-xs;if(J.T!==null){var a=gn;return a!==0?a:Kf()}return de()}function Ep(){Qr===0&&(Qr=(xs&536870912)===0||Xt?qe():536870912);var a=b.current;return a!==null&&(a.flags|=32),Qr}function Fr(a,i,l){(a===Is&&(Cs===2||Cs===9)||a.cancelPendingCommit!==null)&&(vc(a,0),co(a,xs,Qr,!1)),pt(a,l),((Ss&2)===0||a!==Is)&&(a===Is&&((Ss&2)===0&&(nl|=l),Xs===4&&co(a,xs,Qr,!1)),$n(a))}function Tp(a,i,l){if((Ss&6)!==0)throw Error(n(327));var u=!l&&(i&124)===0&&(i&a.expiredLanes)===0||Ke(a,i),y=u?Qj(a,i):$f(a,i,!0),j=u;do{if(y===0){gc&&!u&&co(a,i,0,!1);break}else{if(l=a.current.alternate,j&&!Wj(l)){y=$f(a,i,!1),j=!1;continue}if(y===2){if(j=i,a.errorRecoveryDisabledLanes&j)var $=0;else $=a.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){i=$;e:{var W=a;y=Id;var we=W.current.memoizedState.isDehydrated;if(we&&(vc(W,$).flags|=256),$=$f(W,$,!1),$!==2){if(Of&&!we){W.errorRecoveryDisabledLanes|=j,nl|=j,y=4;break e}j=vr,vr=y,j!==null&&(vr===null?vr=j:vr.push.apply(vr,j))}y=$}if(j=!1,y!==2)continue}}if(y===1){vc(a,0),co(a,i,0,!0);break}e:{switch(u=a,j=y,j){case 0:case 1:throw Error(n(345));case 4:if((i&4194048)!==i)break;case 6:co(u,i,Qr,!no);break e;case 2:vr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((i&62914560)===i&&(y=zf+300-ee(),10<y)){if(co(u,i,Qr,!no),Te(u,0,!0)!==0)break e;u.timeoutHandle=i0(Mp.bind(null,u,l,vr,Em,If,i,Qr,nl,pc,no,j,2,-0,0),y);break e}Mp(u,l,vr,Em,If,i,Qr,nl,pc,no,j,0,-0,0)}}break}while(!0);$n(a)}function Mp(a,i,l,u,y,j,$,W,we,Ge,lt,ht,et,at){if(a.timeoutHandle=-1,ht=i.subtreeFlags,(ht&8192||(ht&16785408)===16785408)&&(Hd={stylesheets:null,count:0,unsuspend:Ew},Cp(i),ht=Mw(),ht!==null)){a.cancelPendingCommit=ht(Lp.bind(null,a,i,j,l,u,y,$,W,we,lt,1,et,at)),co(a,j,$,!Ge);return}Lp(a,i,j,l,u,y,$,W,we)}function Wj(a){for(var i=a;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var y=l[u],j=y.getSnapshot;y=y.value;try{if(!er(j(),y))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function co(a,i,l,u){i&=~Rf,i&=~nl,a.suspendedLanes|=i,a.pingedLanes&=~i,u&&(a.warmLanes|=i),u=a.expirationTimes;for(var y=i;0<y;){var j=31-Ve(y),$=1<<j;u[j]=-1,y&=~$}l!==0&&st(a,l,i)}function Tm(){return(Ss&6)===0?(Pd(0),!1):!0}function Bf(){if(cs!==null){if(Cs===0)var a=cs.return;else a=cs,ar=sr=null,dd(a),Zi=null,al=0,a=cs;for(;a!==null;)up(a.alternate,a),a=a.return;cs=null}}function vc(a,i){var l=a.timeoutHandle;l!==-1&&(a.timeoutHandle=-1,hw(l)),l=a.cancelPendingCommit,l!==null&&(a.cancelPendingCommit=null,l()),Bf(),Is=a,cs=l=fr(a.current,null),xs=i,Cs=0,zr=null,no=!1,gc=Ke(a,i),Of=!1,pc=Qr=Rf=nl=io=Xs=0,vr=Id=null,If=!1,(i&8)!==0&&(i|=i&32);var u=a.entangledLanes;if(u!==0)for(a=a.entanglements,u&=i;0<u;){var y=31-Ve(u),j=1<<y;i|=a[y],u&=~j}return hi=i,Tn(),l}function Op(a,i){es=null,J.H=uc,i===Ko||i===Hl?(i=tm(),Cs=3):i===Zu?(i=tm(),Cs=4):Cs=i===Qg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,zr=i,cs===null&&(Xs=1,gs(a,La(i,a.current)))}function Rp(){var a=J.H;return J.H=uc,a===null?uc:a}function Ip(){var a=J.A;return J.A=Yj,a}function Uf(){Xs=4,no||(xs&4194048)!==xs&&b.current!==null||(gc=!0),(io&134217727)===0&&(nl&134217727)===0||Is===null||co(Is,xs,Qr,!1)}function $f(a,i,l){var u=Ss;Ss|=2;var y=Rp(),j=Ip();(Is!==a||xs!==i)&&(Em=null,vc(a,i)),i=!1;var $=Xs;e:do try{if(Cs!==0&&cs!==null){var W=cs,we=zr;switch(Cs){case 8:Bf(),$=6;break e;case 3:case 2:case 9:case 6:b.current===null&&(i=!0);var Ge=Cs;if(Cs=0,zr=null,jc(a,W,we,Ge),l&&gc){$=0;break e}break;default:Ge=Cs,Cs=0,zr=null,jc(a,W,we,Ge)}}Xj(),$=Xs;break}catch(lt){Op(a,lt)}while(!0);return i&&a.shellSuspendCounter++,ar=sr=null,Ss=u,J.H=y,J.A=j,cs===null&&(Is=null,xs=0,Tn()),$}function Xj(){for(;cs!==null;)zp(cs)}function Qj(a,i){var l=Ss;Ss|=2;var u=Rp(),y=Ip();Is!==a||xs!==i?(Em=null,Dm=ee()+500,vc(a,i)):gc=Ke(a,i);e:do try{if(Cs!==0&&cs!==null){i=cs;var j=zr;t:switch(Cs){case 1:Cs=0,zr=null,jc(a,i,j,1);break;case 2:case 9:if(Ju(j)){Cs=0,zr=null,Pp(i);break}i=function(){Cs!==2&&Cs!==9||Is!==a||(Cs=7),$n(a)},j.then(i,i);break e;case 3:Cs=7;break e;case 4:Cs=5;break e;case 7:Ju(j)?(Cs=0,zr=null,Pp(i)):(Cs=0,zr=null,jc(a,i,j,7));break;case 5:var $=null;switch(cs.tag){case 26:$=cs.memoizedState;case 5:case 27:var W=cs;if(!$||y0($)){Cs=0,zr=null;var we=W.sibling;if(we!==null)cs=we;else{var Ge=W.return;Ge!==null?(cs=Ge,Mm(Ge)):cs=null}break t}}Cs=0,zr=null,jc(a,i,j,5);break;case 6:Cs=0,zr=null,jc(a,i,j,6);break;case 8:Bf(),Xs=6;break e;default:throw Error(n(462))}}Zj();break}catch(lt){Op(a,lt)}while(!0);return ar=sr=null,J.H=u,J.A=y,Ss=l,cs!==null?0:(Is=null,xs=0,Tn(),Xs)}function Zj(){for(;cs!==null&&!H();)zp(cs)}function zp(a){var i=cp(a.alternate,a,hi);a.memoizedProps=a.pendingProps,i===null?Mm(a):cs=i}function Pp(a){var i=a,l=i.alternate;switch(i.tag){case 15:case 0:i=ap(l,i,i.pendingProps,i.type,void 0,xs);break;case 11:i=ap(l,i,i.pendingProps,i.type.render,i.ref,xs);break;case 5:dd(i);default:up(l,i),i=cs=$i(i,hi),i=cp(l,i,hi)}a.memoizedProps=a.pendingProps,i===null?Mm(a):cs=i}function jc(a,i,l,u){ar=sr=null,dd(i),Zi=null,al=0;var y=i.return;try{if(Uj(a,y,i,l,xs)){Xs=1,gs(a,La(l,a.current)),cs=null;return}}catch(j){if(y!==null)throw cs=y,j;Xs=1,gs(a,La(l,a.current)),cs=null;return}i.flags&32768?(Xt||u===1?a=!0:gc||(xs&536870912)!==0?a=!1:(no=a=!0,(u===2||u===9||u===3||u===6)&&(u=b.current,u!==null&&u.tag===13&&(u.flags|=16384))),Fp(i,a)):Mm(i)}function Mm(a){var i=a;do{if((i.flags&32768)!==0){Fp(i,no);return}a=i.return;var l=Hj(i.alternate,i,hi);if(l!==null){cs=l;return}if(i=i.sibling,i!==null){cs=i;return}cs=i=a}while(i!==null);Xs===0&&(Xs=5)}function Fp(a,i){do{var l=Vj(a.alternate,a);if(l!==null){l.flags&=32767,cs=l;return}if(l=a.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(a=a.sibling,a!==null)){cs=a;return}cs=a=l}while(a!==null);Xs=6,cs=null}function Lp(a,i,l,u,y,j,$,W,we){a.cancelPendingCommit=null;do Om();while(Ra!==0);if((Ss&6)!==0)throw Error(n(327));if(i!==null){if(i===a.current)throw Error(n(177));if(j=i.lanes|i.childLanes,j|=Bo,ke(a,l,j,$,W,we),a===Is&&(cs=Is=null,xs=0),yc=i,lo=a,bc=l,Pf=j,Ff=y,Dp=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,sw(ue,function(){return Vp(),null})):(a.callbackNode=null,a.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,y=Ce.p,Ce.p=2,$=Ss,Ss|=4;try{qj(a,i,l)}finally{Ss=$,Ce.p=y,J.T=u}}Ra=1,Bp(),Up(),$p()}}function Bp(){if(Ra===1){Ra=0;var a=lo,i=yc,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=J.T,J.T=null;var u=Ce.p;Ce.p=2;var y=Ss;Ss|=4;try{wp(i,a);var j=ex,$=si(a.containerInfo),W=j.focusedElem,we=j.selectionRange;if($!==W&&W&&W.ownerDocument&&Bs(W.ownerDocument.documentElement,W)){if(we!==null&&Wc(W)){var Ge=we.start,lt=we.end;if(lt===void 0&&(lt=Ge),"selectionStart"in W)W.selectionStart=Ge,W.selectionEnd=Math.min(lt,W.value.length);else{var ht=W.ownerDocument||document,et=ht&&ht.defaultView||window;if(et.getSelection){var at=et.getSelection(),Zt=W.textContent.length,Yt=Math.min(we.start,Zt),Ds=we.end===void 0?Yt:Math.min(we.end,Zt);!at.extend&&Yt>Ds&&($=Ds,Ds=Yt,Yt=$);var $e=Ro(W,Yt),Oe=Ro(W,Ds);if($e&&Oe&&(at.rangeCount!==1||at.anchorNode!==$e.node||at.anchorOffset!==$e.offset||at.focusNode!==Oe.node||at.focusOffset!==Oe.offset)){var Ye=ht.createRange();Ye.setStart($e.node,$e.offset),at.removeAllRanges(),Yt>Ds?(at.addRange(Ye),at.extend(Oe.node,Oe.offset)):(Ye.setEnd(Oe.node,Oe.offset),at.addRange(Ye))}}}}for(ht=[],at=W;at=at.parentNode;)at.nodeType===1&&ht.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<ht.length;W++){var ct=ht[W];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}qm=!!Jf,ex=Jf=null}finally{Ss=y,Ce.p=u,J.T=l}}a.current=i,Ra=2}}function Up(){if(Ra===2){Ra=0;var a=lo,i=yc,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=J.T,J.T=null;var u=Ce.p;Ce.p=2;var y=Ss;Ss|=4;try{yp(a,i.alternate,i)}finally{Ss=y,Ce.p=u,J.T=l}}Ra=3}}function $p(){if(Ra===4||Ra===3){Ra=0,V();var a=lo,i=yc,l=bc,u=Dp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ra=5:(Ra=0,yc=lo=null,Hp(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(oo=null),Mt(l),i=i.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(Re,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=J.T,y=Ce.p,Ce.p=2,J.T=null;try{for(var j=a.onRecoverableError,$=0;$<u.length;$++){var W=u[$];j(W.value,{componentStack:W.stack})}}finally{J.T=i,Ce.p=y}}(bc&3)!==0&&Om(),$n(a),y=a.pendingLanes,(l&4194090)!==0&&(y&42)!==0?a===Lf?zd++:(zd=0,Lf=a):zd=0,Pd(0)}}function Hp(a,i){(a.pooledCacheLanes&=i)===0&&(i=a.pooledCache,i!=null&&(a.pooledCache=null,qi(i)))}function Om(a){return Bp(),Up(),$p(),Vp()}function Vp(){if(Ra!==5)return!1;var a=lo,i=Pf;Pf=0;var l=Mt(bc),u=J.T,y=Ce.p;try{Ce.p=32>l?32:l,J.T=null,l=Ff,Ff=null;var j=lo,$=bc;if(Ra=0,yc=lo=null,bc=0,(Ss&6)!==0)throw Error(n(331));var W=Ss;if(Ss|=4,_p(j.current),Sp(j,j.current,$,l),Ss=W,Pd(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(Re,j)}catch{}return!0}finally{Ce.p=y,J.T=u,Hp(a,i)}}function qp(a,i,l){i=La(l,i),i=nr(a.stateNode,i,2),a=pn(a,i,2),a!==null&&(pt(a,2),$n(a))}function Ms(a,i,l){if(a.tag===3)qp(a,a,l);else for(;i!==null;){if(i.tag===3){qp(i,a,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(oo===null||!oo.has(u))){a=La(l,a),l=hc(2),u=pn(i,l,2),u!==null&&(Xg(l,u,i,a),pt(u,2),$n(u));break}}i=i.return}}function Hf(a,i,l){var u=a.pingCache;if(u===null){u=a.pingCache=new Gj;var y=new Set;u.set(i,y)}else y=u.get(i),y===void 0&&(y=new Set,u.set(i,y));y.has(l)||(Of=!0,y.add(l),a=Jj.bind(null,a,i,l),i.then(a,a))}function Jj(a,i,l){var u=a.pingCache;u!==null&&u.delete(i),a.pingedLanes|=a.suspendedLanes&l,a.warmLanes&=~l,Is===a&&(xs&l)===l&&(Xs===4||Xs===3&&(xs&62914560)===xs&&300>ee()-zf?(Ss&2)===0&&vc(a,0):Rf|=l,pc===xs&&(pc=0)),$n(a)}function Kp(a,i){i===0&&(i=ft()),a=Ui(a,i),a!==null&&(pt(a,i),$n(a))}function ew(a){var i=a.memoizedState,l=0;i!==null&&(l=i.retryLane),Kp(a,l)}function tw(a,i){var l=0;switch(a.tag){case 13:var u=a.stateNode,y=a.memoizedState;y!==null&&(l=y.retryLane);break;case 19:u=a.stateNode;break;case 22:u=a.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(i),Kp(a,l)}function sw(a,i){return O(a,i)}var Rm=null,wc=null,Vf=!1,Im=!1,qf=!1,il=0;function $n(a){a!==wc&&a.next===null&&(wc===null?Rm=wc=a:wc=wc.next=a),Im=!0,Vf||(Vf=!0,rw())}function Pd(a,i){if(!qf&&Im){qf=!0;do for(var l=!1,u=Rm;u!==null;){if(a!==0){var y=u.pendingLanes;if(y===0)var j=0;else{var $=u.suspendedLanes,W=u.pingedLanes;j=(1<<31-Ve(42|a)+1)-1,j&=y&~($&~W),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(l=!0,Xp(u,j))}else j=xs,j=Te(u,u===Is?j:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(j&3)===0||Ke(u,j)||(l=!0,Xp(u,j));u=u.next}while(l);qf=!1}}function aw(){Yp()}function Yp(){Im=Vf=!1;var a=0;il!==0&&(mw()&&(a=il),il=0);for(var i=ee(),l=null,u=Rm;u!==null;){var y=u.next,j=Gp(u,i);j===0?(u.next=null,l===null?Rm=y:l.next=y,y===null&&(wc=l)):(l=u,(a!==0||(j&3)!==0)&&(Im=!0)),u=y}Pd(a)}function Gp(a,i){for(var l=a.suspendedLanes,u=a.pingedLanes,y=a.expirationTimes,j=a.pendingLanes&-62914561;0<j;){var $=31-Ve(j),W=1<<$,we=y[$];we===-1?((W&l)===0||(W&u)!==0)&&(y[$]=Pe(W,i)):we<=i&&(a.expiredLanes|=W),j&=~W}if(i=Is,l=xs,l=Te(a,a===i?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),u=a.callbackNode,l===0||a===i&&(Cs===2||Cs===9)||a.cancelPendingCommit!==null)return u!==null&&u!==null&&U(u),a.callbackNode=null,a.callbackPriority=0;if((l&3)===0||Ke(a,l)){if(i=l&-l,i===a.callbackPriority)return i;switch(u!==null&&U(u),Mt(l)){case 2:case 8:l=Q;break;case 32:l=ue;break;case 268435456:l=fe;break;default:l=ue}return u=Wp.bind(null,a),l=O(l,u),a.callbackPriority=i,a.callbackNode=l,i}return u!==null&&u!==null&&U(u),a.callbackPriority=2,a.callbackNode=null,2}function Wp(a,i){if(Ra!==0&&Ra!==5)return a.callbackNode=null,a.callbackPriority=0,null;var l=a.callbackNode;if(Om()&&a.callbackNode!==l)return null;var u=xs;return u=Te(a,a===Is?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),u===0?null:(Tp(a,u,i),Gp(a,ee()),a.callbackNode!=null&&a.callbackNode===l?Wp.bind(null,a):null)}function Xp(a,i){if(Om())return null;Tp(a,i,!0)}function rw(){fw(function(){(Ss&6)!==0?O(M,aw):Yp()})}function Kf(){return il===0&&(il=qe()),il}function Qp(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Cn(""+a)}function Zp(a,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,a.id&&l.setAttribute("form",a.id),i.parentNode.insertBefore(l,i),a=new FormData(a),l.parentNode.removeChild(l),a}function nw(a,i,l,u,y){if(i==="submit"&&l&&l.stateNode===y){var j=Qp((y[Ze]||null).action),$=u.submitter;$&&(i=(i=$[Ze]||null)?Qp(i.formAction):$.getAttribute("formAction"),i!==null&&(j=i,$=null));var W=new _n("action","action",null,u,y);a.push({event:W,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(il!==0){var we=$?Zp(y,$):new FormData(y);nc(l,{pending:!0,data:we,method:y.method,action:j},null,we)}}else typeof j=="function"&&(W.preventDefault(),we=$?Zp(y,$):new FormData(y),nc(l,{pending:!0,data:we,method:y.method,action:j},j,we))},currentTarget:y}]})}}for(var Yf=0;Yf<Lo.length;Yf++){var Gf=Lo[Yf],iw=Gf.toLowerCase(),ow=Gf[0].toUpperCase()+Gf.slice(1);ba(iw,"on"+ow)}ba(Fi,"onAnimationEnd"),ba(Li,"onAnimationIteration"),ba(Bi,"onAnimationStart"),ba("dblclick","onDoubleClick"),ba("focusin","onFocus"),ba("focusout","onBlur"),ba(mr,"onTransitionRun"),ba(Yu,"onTransitionStart"),ba(hr,"onTransitionCancel"),ba(Qc,"onTransitionEnd"),Ht("onMouseEnter",["mouseout","mouseover"]),Ht("onMouseLeave",["mouseout","mouseover"]),Ht("onPointerEnter",["pointerout","pointerover"]),Ht("onPointerLeave",["pointerout","pointerover"]),Rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fd));function Jp(a,i){i=(i&4)!==0;for(var l=0;l<a.length;l++){var u=a[l],y=u.event;u=u.listeners;e:{var j=void 0;if(i)for(var $=u.length-1;0<=$;$--){var W=u[$],we=W.instance,Ge=W.currentTarget;if(W=W.listener,we!==j&&y.isPropagationStopped())break e;j=W,y.currentTarget=Ge;try{j(y)}catch(lt){bt(lt)}y.currentTarget=null,j=we}else for($=0;$<u.length;$++){if(W=u[$],we=W.instance,Ge=W.currentTarget,W=W.listener,we!==j&&y.isPropagationStopped())break e;j=W,y.currentTarget=Ge;try{j(y)}catch(lt){bt(lt)}y.currentTarget=null,j=we}}}}function ds(a,i){var l=i[dt];l===void 0&&(l=i[dt]=new Set);var u=a+"__bubble";l.has(u)||(e0(i,a,2,!1),l.add(u))}function Wf(a,i,l){var u=0;i&&(u|=4),e0(l,a,u,i)}var zm="_reactListening"+Math.random().toString(36).slice(2);function Xf(a){if(!a[zm]){a[zm]=!0,ut.forEach(function(l){l!=="selectionchange"&&(lw.has(l)||Wf(l,!1,a),Wf(l,!0,a))});var i=a.nodeType===9?a:a.ownerDocument;i===null||i[zm]||(i[zm]=!0,Wf("selectionchange",!1,i))}}function e0(a,i,l,u){switch(S0(i)){case 2:var y=Iw;break;case 8:y=zw;break;default:y=dx}l=y.bind(null,i,l,a),y=void 0,!ln||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(y=!0),u?y!==void 0?a.addEventListener(i,l,{capture:!0,passive:y}):a.addEventListener(i,l,!0):y!==void 0?a.addEventListener(i,l,{passive:y}):a.addEventListener(i,l,!1)}function Qf(a,i,l,u,y){var j=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var $=u.tag;if($===3||$===4){var W=u.stateNode.containerInfo;if(W===y)break;if($===4)for($=u.return;$!==null;){var we=$.tag;if((we===3||we===4)&&$.stateNode.containerInfo===y)return;$=$.return}for(;W!==null;){if($=te(W),$===null)return;if(we=$.tag,we===5||we===6||we===26||we===27){u=j=$;continue e}W=W.parentNode}}u=u.return}Rs(function(){var Ge=j,lt=kn(l),ht=[];e:{var et=Zs.get(a);if(et!==void 0){var at=_n,Zt=a;switch(a){case"keypress":if(rs(l)===0)break e;case"keydown":case"keyup":at=_i;break;case"focusin":Zt="focus",at=cr;break;case"focusout":Zt="blur",at=cr;break;case"beforeblur":case"afterblur":at=cr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=tf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=Hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=rf;break;case Fi:case Li:case Bi:at=sf;break;case Qc:at=Rl;break;case"scroll":case"scrollend":at=Pu;break;case"wheel":at=Il;break;case"copy":case"cut":case"paste":at=ws;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Hu;break;case"toggle":case"beforetoggle":at=qc}var Yt=(i&4)!==0,Ds=!Yt&&(a==="scroll"||a==="scrollend"),$e=Yt?et!==null?et+"Capture":null:et;Yt=[];for(var Oe=Ge,Ye;Oe!==null;){var ct=Oe;if(Ye=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Ye===null||$e===null||(ct=ya(Oe,$e),ct!=null&&Yt.push(Ld(Oe,ct,Ye))),Ds)break;Oe=Oe.return}0<Yt.length&&(et=new at(et,Zt,null,l,lt),ht.push({event:et,listeners:Yt}))}}if((i&7)===0){e:{if(et=a==="mouseover"||a==="pointerover",at=a==="mouseout"||a==="pointerout",et&&l!==la&&(Zt=l.relatedTarget||l.fromElement)&&(te(Zt)||Zt[mt]))break e;if((at||et)&&(et=lt.window===lt?lt:(et=lt.ownerDocument)?et.defaultView||et.parentWindow:window,at?(Zt=l.relatedTarget||l.toElement,at=Ge,Zt=Zt?te(Zt):null,Zt!==null&&(Ds=c(Zt),Yt=Zt.tag,Zt!==Ds||Yt!==5&&Yt!==27&&Yt!==6)&&(Zt=null)):(at=null,Zt=Ge),at!==Zt)){if(Yt=tf,ct="onMouseLeave",$e="onMouseEnter",Oe="mouse",(a==="pointerout"||a==="pointerover")&&(Yt=Hu,ct="onPointerLeave",$e="onPointerEnter",Oe="pointer"),Ds=at==null?et:Be(at),Ye=Zt==null?et:Be(Zt),et=new Yt(ct,Oe+"leave",at,l,lt),et.target=Ds,et.relatedTarget=Ye,ct=null,te(lt)===Ge&&(Yt=new Yt($e,Oe+"enter",Zt,l,lt),Yt.target=Ye,Yt.relatedTarget=Ds,ct=Yt),Ds=ct,at&&Zt)t:{for(Yt=at,$e=Zt,Oe=0,Ye=Yt;Ye;Ye=Nc(Ye))Oe++;for(Ye=0,ct=$e;ct;ct=Nc(ct))Ye++;for(;0<Oe-Ye;)Yt=Nc(Yt),Oe--;for(;0<Ye-Oe;)$e=Nc($e),Ye--;for(;Oe--;){if(Yt===$e||$e!==null&&Yt===$e.alternate)break t;Yt=Nc(Yt),$e=Nc($e)}Yt=null}else Yt=null;at!==null&&t0(ht,et,at,Yt,!1),Zt!==null&&Ds!==null&&t0(ht,Ds,Zt,Yt,!0)}}e:{if(et=Ge?Be(Ge):window,at=et.nodeName&&et.nodeName.toLowerCase(),at==="select"||at==="input"&&et.type==="file")var Ft=_r;else if(Yc(et))if(ti)Ft=Gc;else{Ft=Pl;var ls=En}else at=et.nodeName,!at||at.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?Ge&&kr(Ge.elementType)&&(Ft=_r):Ft=Fl;if(Ft&&(Ft=Ft(a,Ge))){of(ht,Ft,l,lt);break e}ls&&ls(a,et,Ge),a==="focusout"&&Ge&&et.type==="number"&&Ge.memoizedProps.value!=null&&Xn(et,"number",et.value)}switch(ls=Ge?Be(Ge):window,a){case"focusin":(Yc(ls)||ls.contentEditable==="true")&&(Ii=ls,Io=Ge,zo=null);break;case"focusout":zo=Io=Ii=null;break;case"mousedown":Po=!0;break;case"contextmenu":case"mouseup":case"dragend":Po=!1,Xc(ht,l,lt);break;case"selectionchange":if(Ri)break;case"keydown":case"keyup":Xc(ht,l,lt)}var $t;if(Oo)e:{switch(a){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else An?qu(a,l)&&(Gt="onCompositionEnd"):a==="keydown"&&l.keyCode===229&&(Gt="onCompositionStart");Gt&&(zl&&l.locale!=="ko"&&(An||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&An&&($t=Jt()):(G=lt,Fe="value"in G?G.value:G.textContent,An=!0)),ls=Pm(Ge,Gt),0<ls.length&&(Gt=new Uu(Gt,a,null,l,lt),ht.push({event:Gt,listeners:ls}),$t?Gt.data=$t:($t=Fa(l),$t!==null&&(Gt.data=$t)))),($t=Kc?Gg(a,l):Ku(a,l))&&(Gt=Pm(Ge,"onBeforeInput"),0<Gt.length&&(ls=new Uu("onBeforeInput","beforeinput",null,l,lt),ht.push({event:ls,listeners:Gt}),ls.data=$t)),nw(ht,a,Ge,l,lt)}Jp(ht,i)})}function Ld(a,i,l){return{instance:a,listener:i,currentTarget:l}}function Pm(a,i){for(var l=i+"Capture",u=[];a!==null;){var y=a,j=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||j===null||(y=ya(a,l),y!=null&&u.unshift(Ld(a,y,j)),y=ya(a,i),y!=null&&u.push(Ld(a,y,j))),a.tag===3)return u;a=a.return}return[]}function Nc(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function t0(a,i,l,u,y){for(var j=i._reactName,$=[];l!==null&&l!==u;){var W=l,we=W.alternate,Ge=W.stateNode;if(W=W.tag,we!==null&&we===u)break;W!==5&&W!==26&&W!==27||Ge===null||(we=Ge,y?(Ge=ya(l,j),Ge!=null&&$.unshift(Ld(l,Ge,we))):y||(Ge=ya(l,j),Ge!=null&&$.push(Ld(l,Ge,we)))),l=l.return}$.length!==0&&a.push({event:i,listeners:$})}var cw=/\r\n?/g,dw=/\u0000|\uFFFD/g;function s0(a){return(typeof a=="string"?a:""+a).replace(cw,`
`).replace(dw,"")}function a0(a,i){return i=s0(i),s0(a)===i}function Fm(){}function As(a,i,l,u,y,j){switch(l){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Cr(a,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Cr(a,""+u);break;case"className":vs(a,"class",u);break;case"tabIndex":vs(a,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":vs(a,l,u);break;case"style":on(a,u,j);break;case"data":if(i!=="object"){vs(a,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||l!=="href")){a.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){a.removeAttribute(l);break}u=Cn(""+u),a.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){a.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(l==="formAction"?(i!=="input"&&As(a,i,"name",y.name,y,null),As(a,i,"formEncType",y.formEncType,y,null),As(a,i,"formMethod",y.formMethod,y,null),As(a,i,"formTarget",y.formTarget,y,null)):(As(a,i,"encType",y.encType,y,null),As(a,i,"method",y.method,y,null),As(a,i,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){a.removeAttribute(l);break}u=Cn(""+u),a.setAttribute(l,u);break;case"onClick":u!=null&&(a.onclick=Fm);break;case"onScroll":u!=null&&ds("scroll",a);break;case"onScrollEnd":u!=null&&ds("scrollend",a);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(l=u.__html,l!=null){if(y.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"multiple":a.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":a.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){a.removeAttribute("xlink:href");break}l=Cn(""+u),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(l,""+u):a.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(l,""):a.removeAttribute(l);break;case"capture":case"download":u===!0?a.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(l,u):a.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?a.setAttribute(l,u):a.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?a.removeAttribute(l):a.setAttribute(l,u);break;case"popover":ds("beforetoggle",a),ds("toggle",a),ys(a,"popover",u);break;case"xlinkActuate":Nt(a,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Nt(a,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Nt(a,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Nt(a,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Nt(a,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Nt(a,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Nt(a,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Nt(a,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Nt(a,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ys(a,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ir.get(l)||l,ys(a,l,u))}}function Zf(a,i,l,u,y,j){switch(l){case"style":on(a,u,j);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(l=u.__html,l!=null){if(y.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"children":typeof u=="string"?Cr(a,u):(typeof u=="number"||typeof u=="bigint")&&Cr(a,""+u);break;case"onScroll":u!=null&&ds("scroll",a);break;case"onScrollEnd":u!=null&&ds("scrollend",a);break;case"onClick":u!=null&&(a.onclick=Fm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Et.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),i=l.slice(2,y?l.length-7:void 0),j=a[Ze]||null,j=j!=null?j[l]:null,typeof j=="function"&&a.removeEventListener(i,j,y),typeof u=="function")){typeof j!="function"&&j!==null&&(l in a?a[l]=null:a.hasAttribute(l)&&a.removeAttribute(l)),a.addEventListener(i,u,y);break e}l in a?a[l]=u:u===!0?a.setAttribute(l,""):ys(a,l,u)}}}function Ia(a,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ds("error",a),ds("load",a);var u=!1,y=!1,j;for(j in l)if(l.hasOwnProperty(j)){var $=l[j];if($!=null)switch(j){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:As(a,i,j,$,l,null)}}y&&As(a,i,"srcSet",l.srcSet,l,null),u&&As(a,i,"src",l.src,l,null);return;case"input":ds("invalid",a);var W=j=$=y=null,we=null,Ge=null;for(u in l)if(l.hasOwnProperty(u)){var lt=l[u];if(lt!=null)switch(u){case"name":y=lt;break;case"type":$=lt;break;case"checked":we=lt;break;case"defaultChecked":Ge=lt;break;case"value":j=lt;break;case"defaultValue":W=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(n(137,i));break;default:As(a,i,u,lt,l,null)}}kl(a,j,W,we,Ge,$,y,!1),Os(a);return;case"select":ds("invalid",a),u=$=j=null;for(y in l)if(l.hasOwnProperty(y)&&(W=l[y],W!=null))switch(y){case"value":j=W;break;case"defaultValue":$=W;break;case"multiple":u=W;default:As(a,i,y,W,l,null)}i=j,l=$,a.multiple=!!u,i!=null?pa(a,!!u,i,!1):l!=null&&pa(a,!!u,l,!0);return;case"textarea":ds("invalid",a),j=y=u=null;for($ in l)if(l.hasOwnProperty($)&&(W=l[$],W!=null))switch($){case"value":u=W;break;case"defaultValue":y=W;break;case"children":j=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(91));break;default:As(a,i,$,W,l,null)}Qn(a,u,y,j),Os(a);return;case"option":for(we in l)if(l.hasOwnProperty(we)&&(u=l[we],u!=null))switch(we){case"selected":a.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:As(a,i,we,u,l,null)}return;case"dialog":ds("beforetoggle",a),ds("toggle",a),ds("cancel",a),ds("close",a);break;case"iframe":case"object":ds("load",a);break;case"video":case"audio":for(u=0;u<Fd.length;u++)ds(Fd[u],a);break;case"image":ds("error",a),ds("load",a);break;case"details":ds("toggle",a);break;case"embed":case"source":case"link":ds("error",a),ds("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ge in l)if(l.hasOwnProperty(Ge)&&(u=l[Ge],u!=null))switch(Ge){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:As(a,i,Ge,u,l,null)}return;default:if(kr(i)){for(lt in l)l.hasOwnProperty(lt)&&(u=l[lt],u!==void 0&&Zf(a,i,lt,u,l,void 0));return}}for(W in l)l.hasOwnProperty(W)&&(u=l[W],u!=null&&As(a,i,W,u,l,null))}function uw(a,i,l,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,j=null,$=null,W=null,we=null,Ge=null,lt=null;for(at in l){var ht=l[at];if(l.hasOwnProperty(at)&&ht!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":we=ht;default:u.hasOwnProperty(at)||As(a,i,at,null,u,ht)}}for(var et in u){var at=u[et];if(ht=l[et],u.hasOwnProperty(et)&&(at!=null||ht!=null))switch(et){case"type":j=at;break;case"name":y=at;break;case"checked":Ge=at;break;case"defaultChecked":lt=at;break;case"value":$=at;break;case"defaultValue":W=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,i));break;default:at!==ht&&As(a,i,et,at,u,ht)}}Nn(a,$,W,we,Ge,lt,j,y);return;case"select":at=$=W=et=null;for(j in l)if(we=l[j],l.hasOwnProperty(j)&&we!=null)switch(j){case"value":break;case"multiple":at=we;default:u.hasOwnProperty(j)||As(a,i,j,null,u,we)}for(y in u)if(j=u[y],we=l[y],u.hasOwnProperty(y)&&(j!=null||we!=null))switch(y){case"value":et=j;break;case"defaultValue":W=j;break;case"multiple":$=j;default:j!==we&&As(a,i,y,j,u,we)}i=W,l=$,u=at,et!=null?pa(a,!!l,et,!1):!!u!=!!l&&(i!=null?pa(a,!!l,i,!0):pa(a,!!l,l?[]:"",!1));return;case"textarea":at=et=null;for(W in l)if(y=l[W],l.hasOwnProperty(W)&&y!=null&&!u.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:As(a,i,W,null,u,y)}for($ in u)if(y=u[$],j=l[$],u.hasOwnProperty($)&&(y!=null||j!=null))switch($){case"value":et=y;break;case"defaultValue":at=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(n(91));break;default:y!==j&&As(a,i,$,y,u,j)}Sn(a,et,at);return;case"option":for(var Zt in l)if(et=l[Zt],l.hasOwnProperty(Zt)&&et!=null&&!u.hasOwnProperty(Zt))switch(Zt){case"selected":a.selected=!1;break;default:As(a,i,Zt,null,u,et)}for(we in u)if(et=u[we],at=l[we],u.hasOwnProperty(we)&&et!==at&&(et!=null||at!=null))switch(we){case"selected":a.selected=et&&typeof et!="function"&&typeof et!="symbol";break;default:As(a,i,we,et,u,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Yt in l)et=l[Yt],l.hasOwnProperty(Yt)&&et!=null&&!u.hasOwnProperty(Yt)&&As(a,i,Yt,null,u,et);for(Ge in u)if(et=u[Ge],at=l[Ge],u.hasOwnProperty(Ge)&&et!==at&&(et!=null||at!=null))switch(Ge){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(n(137,i));break;default:As(a,i,Ge,et,u,at)}return;default:if(kr(i)){for(var Ds in l)et=l[Ds],l.hasOwnProperty(Ds)&&et!==void 0&&!u.hasOwnProperty(Ds)&&Zf(a,i,Ds,void 0,u,et);for(lt in u)et=u[lt],at=l[lt],!u.hasOwnProperty(lt)||et===at||et===void 0&&at===void 0||Zf(a,i,lt,et,u,at);return}}for(var $e in l)et=l[$e],l.hasOwnProperty($e)&&et!=null&&!u.hasOwnProperty($e)&&As(a,i,$e,null,u,et);for(ht in u)et=u[ht],at=l[ht],!u.hasOwnProperty(ht)||et===at||et==null&&at==null||As(a,i,ht,et,u,at)}var Jf=null,ex=null;function Lm(a){return a.nodeType===9?a:a.ownerDocument}function r0(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function n0(a,i){if(a===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&i==="foreignObject"?0:a}function tx(a,i){return a==="textarea"||a==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var sx=null;function mw(){var a=window.event;return a&&a.type==="popstate"?a===sx?!1:(sx=a,!0):(sx=null,!1)}var i0=typeof setTimeout=="function"?setTimeout:void 0,hw=typeof clearTimeout=="function"?clearTimeout:void 0,o0=typeof Promise=="function"?Promise:void 0,fw=typeof queueMicrotask=="function"?queueMicrotask:typeof o0<"u"?function(a){return o0.resolve(null).then(a).catch(xw)}:i0;function xw(a){setTimeout(function(){throw a})}function uo(a){return a==="head"}function l0(a,i){var l=i,u=0,y=0;do{var j=l.nextSibling;if(a.removeChild(l),j&&j.nodeType===8)if(l=j.data,l==="/$"){if(0<u&&8>u){l=u;var $=a.ownerDocument;if(l&1&&Bd($.documentElement),l&2&&Bd($.body),l&4)for(l=$.head,Bd(l),$=l.firstChild;$;){var W=$.nextSibling,we=$.nodeName;$[me]||we==="SCRIPT"||we==="STYLE"||we==="LINK"&&$.rel.toLowerCase()==="stylesheet"||l.removeChild($),$=W}}if(y===0){a.removeChild(j),Gd(i);return}y--}else l==="$"||l==="$?"||l==="$!"?y++:u=l.charCodeAt(0)-48;else u=0;l=j}while(l);Gd(i)}function ax(a){var i=a.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ax(l),Ie(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}a.removeChild(l)}}function gw(a,i,l,u){for(;a.nodeType===1;){var y=l;if(a.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(u){if(!a[me])switch(i){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(j=a.getAttribute("rel"),j==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(j!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(j=a.getAttribute("src"),(j!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&j&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(i==="input"&&a.type==="hidden"){var j=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===j)return a}else return a;if(a=bn(a.nextSibling),a===null)break}return null}function pw(a,i,l){if(i==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=bn(a.nextSibling),a===null))return null;return a}function rx(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function yw(a,i){var l=a.ownerDocument;if(a.data!=="$?"||l.readyState==="complete")i();else{var u=function(){i(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),a._reactRetry=u}}function bn(a){for(;a!=null;a=a.nextSibling){var i=a.nodeType;if(i===1||i===3)break;if(i===8){if(i=a.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return a}var nx=null;function c0(a){a=a.previousSibling;for(var i=0;a;){if(a.nodeType===8){var l=a.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return a;i--}else l==="/$"&&i++}a=a.previousSibling}return null}function d0(a,i,l){switch(i=Lm(l),a){case"html":if(a=i.documentElement,!a)throw Error(n(452));return a;case"head":if(a=i.head,!a)throw Error(n(453));return a;case"body":if(a=i.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Bd(a){for(var i=a.attributes;i.length;)a.removeAttributeNode(i[0]);Ie(a)}var Zr=new Map,u0=new Set;function Bm(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var fi=Ce.d;Ce.d={f:bw,r:vw,D:jw,C:ww,L:Nw,m:Sw,X:kw,S:Cw,M:_w};function bw(){var a=fi.f(),i=Tm();return a||i}function vw(a){var i=Z(a);i!==null&&i.tag===5&&i.type==="form"?ic(i):fi.r(a)}var Sc=typeof document>"u"?null:document;function m0(a,i,l){var u=Sc;if(u&&typeof i=="string"&&i){var y=zs(i);y='link[rel="'+a+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),u0.has(y)||(u0.add(y),a={rel:a,crossOrigin:l,href:i},u.querySelector(y)===null&&(i=u.createElement("link"),Ia(i,"link",a),nt(i),u.head.appendChild(i)))}}function jw(a){fi.D(a),m0("dns-prefetch",a,null)}function ww(a,i){fi.C(a,i),m0("preconnect",a,i)}function Nw(a,i,l){fi.L(a,i,l);var u=Sc;if(u&&a&&i){var y='link[rel="preload"][as="'+zs(i)+'"]';i==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+zs(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+zs(l.imageSizes)+'"]')):y+='[href="'+zs(a)+'"]';var j=y;switch(i){case"style":j=Cc(a);break;case"script":j=kc(a)}Zr.has(j)||(a=p({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:a,as:i},l),Zr.set(j,a),u.querySelector(y)!==null||i==="style"&&u.querySelector(Ud(j))||i==="script"&&u.querySelector($d(j))||(i=u.createElement("link"),Ia(i,"link",a),nt(i),u.head.appendChild(i)))}}function Sw(a,i){fi.m(a,i);var l=Sc;if(l&&a){var u=i&&typeof i.as=="string"?i.as:"script",y='link[rel="modulepreload"][as="'+zs(u)+'"][href="'+zs(a)+'"]',j=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=kc(a)}if(!Zr.has(j)&&(a=p({rel:"modulepreload",href:a},i),Zr.set(j,a),l.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector($d(j)))return}u=l.createElement("link"),Ia(u,"link",a),nt(u),l.head.appendChild(u)}}}function Cw(a,i,l){fi.S(a,i,l);var u=Sc;if(u&&a){var y=Xe(u).hoistableStyles,j=Cc(a);i=i||"default";var $=y.get(j);if(!$){var W={loading:0,preload:null};if($=u.querySelector(Ud(j)))W.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":i},l),(l=Zr.get(j))&&ix(a,l);var we=$=u.createElement("link");nt(we),Ia(we,"link",a),we._p=new Promise(function(Ge,lt){we.onload=Ge,we.onerror=lt}),we.addEventListener("load",function(){W.loading|=1}),we.addEventListener("error",function(){W.loading|=2}),W.loading|=4,Um($,i,u)}$={type:"stylesheet",instance:$,count:1,state:W},y.set(j,$)}}}function kw(a,i){fi.X(a,i);var l=Sc;if(l&&a){var u=Xe(l).hoistableScripts,y=kc(a),j=u.get(y);j||(j=l.querySelector($d(y)),j||(a=p({src:a,async:!0},i),(i=Zr.get(y))&&ox(a,i),j=l.createElement("script"),nt(j),Ia(j,"link",a),l.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},u.set(y,j))}}function _w(a,i){fi.M(a,i);var l=Sc;if(l&&a){var u=Xe(l).hoistableScripts,y=kc(a),j=u.get(y);j||(j=l.querySelector($d(y)),j||(a=p({src:a,async:!0,type:"module"},i),(i=Zr.get(y))&&ox(a,i),j=l.createElement("script"),nt(j),Ia(j,"link",a),l.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},u.set(y,j))}}function h0(a,i,l,u){var y=(y=A.current)?Bm(y):null;if(!y)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Cc(l.href),l=Xe(y).hoistableStyles,u=l.get(i),u||(u={type:"style",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){a=Cc(l.href);var j=Xe(y).hoistableStyles,$=j.get(a);if($||(y=y.ownerDocument||y,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(a,$),(j=y.querySelector(Ud(a)))&&!j._p&&($.instance=j,$.state.loading=5),Zr.has(a)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Zr.set(a,l),j||Aw(y,a,l,$.state))),i&&u===null)throw Error(n(528,""));return $}if(i&&u!==null)throw Error(n(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=kc(l),l=Xe(y).hoistableScripts,u=l.get(i),u||(u={type:"script",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Cc(a){return'href="'+zs(a)+'"'}function Ud(a){return'link[rel="stylesheet"]['+a+"]"}function f0(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function Aw(a,i,l,u){a.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=a.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Ia(i,"link",l),nt(i),a.head.appendChild(i))}function kc(a){return'[src="'+zs(a)+'"]'}function $d(a){return"script[async]"+a}function x0(a,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var u=a.querySelector('style[data-href~="'+zs(l.href)+'"]');if(u)return i.instance=u,nt(u),u;var y=p({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(a.ownerDocument||a).createElement("style"),nt(u),Ia(u,"style",y),Um(u,l.precedence,a),i.instance=u;case"stylesheet":y=Cc(l.href);var j=a.querySelector(Ud(y));if(j)return i.state.loading|=4,i.instance=j,nt(j),j;u=f0(l),(y=Zr.get(y))&&ix(u,y),j=(a.ownerDocument||a).createElement("link"),nt(j);var $=j;return $._p=new Promise(function(W,we){$.onload=W,$.onerror=we}),Ia(j,"link",u),i.state.loading|=4,Um(j,l.precedence,a),i.instance=j;case"script":return j=kc(l.src),(y=a.querySelector($d(j)))?(i.instance=y,nt(y),y):(u=l,(y=Zr.get(j))&&(u=p({},l),ox(u,y)),a=a.ownerDocument||a,y=a.createElement("script"),nt(y),Ia(y,"link",u),a.head.appendChild(y),i.instance=y);case"void":return null;default:throw Error(n(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Um(u,l.precedence,a));return i.instance}function Um(a,i,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,j=y,$=0;$<u.length;$++){var W=u[$];if(W.dataset.precedence===i)j=W;else if(j!==y)break}j?j.parentNode.insertBefore(a,j.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(a,i.firstChild))}function ix(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.title==null&&(a.title=i.title)}function ox(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.integrity==null&&(a.integrity=i.integrity)}var $m=null;function g0(a,i,l){if($m===null){var u=new Map,y=$m=new Map;y.set(l,u)}else y=$m,u=y.get(l),u||(u=new Map,y.set(l,u));if(u.has(a))return u;for(u.set(a,null),l=l.getElementsByTagName(a),y=0;y<l.length;y++){var j=l[y];if(!(j[me]||j[ve]||a==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var $=j.getAttribute(i)||"";$=a+$;var W=u.get($);W?W.push(j):u.set($,[j])}}return u}function p0(a,i,l){a=a.ownerDocument||a,a.head.insertBefore(l,i==="title"?a.querySelector("head > title"):null)}function Dw(a,i,l){if(l===1||i.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return a=i.disabled,typeof i.precedence=="string"&&a==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function y0(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Hd=null;function Ew(){}function Tw(a,i,l){if(Hd===null)throw Error(n(475));var u=Hd;if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var y=Cc(l.href),j=a.querySelector(Ud(y));if(j){a=j._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(u.count++,u=Hm.bind(u),a.then(u,u)),i.state.loading|=4,i.instance=j,nt(j);return}j=a.ownerDocument||a,l=f0(l),(y=Zr.get(y))&&ix(l,y),j=j.createElement("link"),nt(j);var $=j;$._p=new Promise(function(W,we){$.onload=W,$.onerror=we}),Ia(j,"link",l),i.instance=j}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Hm.bind(u),a.addEventListener("load",i),a.addEventListener("error",i))}}function Mw(){if(Hd===null)throw Error(n(475));var a=Hd;return a.stylesheets&&a.count===0&&lx(a,a.stylesheets),0<a.count?function(i){var l=setTimeout(function(){if(a.stylesheets&&lx(a,a.stylesheets),a.unsuspend){var u=a.unsuspend;a.unsuspend=null,u()}},6e4);return a.unsuspend=i,function(){a.unsuspend=null,clearTimeout(l)}}:null}function Hm(){if(this.count--,this.count===0){if(this.stylesheets)lx(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Vm=null;function lx(a,i){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Vm=new Map,i.forEach(Ow,a),Vm=null,Hm.call(a))}function Ow(a,i){if(!(i.state.loading&4)){var l=Vm.get(a);if(l)var u=l.get(null);else{l=new Map,Vm.set(a,l);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<y.length;j++){var $=y[j];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(l.set($.dataset.precedence,$),u=$)}u&&l.set(null,u)}y=i.instance,$=y.getAttribute("data-precedence"),j=l.get($)||u,j===u&&l.set(null,y),l.set($,y),this.count++,u=Hm.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),j?j.parentNode.insertBefore(y,j.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),i.state.loading|=4}}var Vd={$$typeof:R,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function Rw(a,i,l,u,y,j,$,W){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ot(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ot(0),this.hiddenUpdates=ot(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=j,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function b0(a,i,l,u,y,j,$,W,we,Ge,lt,ht){return a=new Rw(a,i,l,$,W,we,Ge,ht),i=1,j===!0&&(i|=24),j=Ba(3,null,null,i),a.current=j,j.stateNode=a,i=$l(),i.refCount++,a.pooledCache=i,i.refCount++,j.memoizedState={element:u,isDehydrated:l,cache:i},ql(j),a}function v0(a){return a?(a=Mn,a):Mn}function j0(a,i,l,u,y,j){y=v0(y),u.context===null?u.context=y:u.pendingContext=y,u=Fn(i),u.payload={element:l},j=j===void 0?null:j,j!==null&&(u.callback=j),l=pn(a,u,i),l!==null&&(Fr(l,a,i),Go(l,a,i))}function w0(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var l=a.retryLane;a.retryLane=l!==0&&l<i?l:i}}function cx(a,i){w0(a,i),(a=a.alternate)&&w0(a,i)}function N0(a){if(a.tag===13){var i=Ui(a,67108864);i!==null&&Fr(i,a,67108864),cx(a,67108864)}}var qm=!0;function Iw(a,i,l,u){var y=J.T;J.T=null;var j=Ce.p;try{Ce.p=2,dx(a,i,l,u)}finally{Ce.p=j,J.T=y}}function zw(a,i,l,u){var y=J.T;J.T=null;var j=Ce.p;try{Ce.p=8,dx(a,i,l,u)}finally{Ce.p=j,J.T=y}}function dx(a,i,l,u){if(qm){var y=ux(u);if(y===null)Qf(a,i,u,Km,l),C0(a,u);else if(Fw(y,a,i,l,u))u.stopPropagation();else if(C0(a,u),i&4&&-1<Pw.indexOf(a)){for(;y!==null;){var j=Z(y);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var $=xt(j.pendingLanes);if($!==0){var W=j;for(W.pendingLanes|=2,W.entangledLanes|=2;$;){var we=1<<31-Ve($);W.entanglements[1]|=we,$&=~we}$n(j),(Ss&6)===0&&(Dm=ee()+500,Pd(0))}}break;case 13:W=Ui(j,2),W!==null&&Fr(W,j,2),Tm(),cx(j,2)}if(j=ux(u),j===null&&Qf(a,i,u,Km,l),j===y)break;y=j}y!==null&&u.stopPropagation()}else Qf(a,i,u,null,l)}}function ux(a){return a=kn(a),mx(a)}var Km=null;function mx(a){if(Km=null,a=te(a),a!==null){var i=c(a);if(i===null)a=null;else{var l=i.tag;if(l===13){if(a=d(i),a!==null)return a;a=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Km=a,null}function S0(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(X()){case M:return 2;case Q:return 8;case ue:case ne:return 32;case fe:return 268435456;default:return 32}default:return 32}}var hx=!1,mo=null,ho=null,fo=null,qd=new Map,Kd=new Map,xo=[],Pw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function C0(a,i){switch(a){case"focusin":case"focusout":mo=null;break;case"dragenter":case"dragleave":ho=null;break;case"mouseover":case"mouseout":fo=null;break;case"pointerover":case"pointerout":qd.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kd.delete(i.pointerId)}}function Yd(a,i,l,u,y,j){return a===null||a.nativeEvent!==j?(a={blockedOn:i,domEventName:l,eventSystemFlags:u,nativeEvent:j,targetContainers:[y]},i!==null&&(i=Z(i),i!==null&&N0(i)),a):(a.eventSystemFlags|=u,i=a.targetContainers,y!==null&&i.indexOf(y)===-1&&i.push(y),a)}function Fw(a,i,l,u,y){switch(i){case"focusin":return mo=Yd(mo,a,i,l,u,y),!0;case"dragenter":return ho=Yd(ho,a,i,l,u,y),!0;case"mouseover":return fo=Yd(fo,a,i,l,u,y),!0;case"pointerover":var j=y.pointerId;return qd.set(j,Yd(qd.get(j)||null,a,i,l,u,y)),!0;case"gotpointercapture":return j=y.pointerId,Kd.set(j,Yd(Kd.get(j)||null,a,i,l,u,y)),!0}return!1}function k0(a){var i=te(a.target);if(i!==null){var l=c(i);if(l!==null){if(i=l.tag,i===13){if(i=d(l),i!==null){a.blockedOn=i,De(a.priority,function(){if(l.tag===13){var u=Pr();u=kt(u);var y=Ui(l,u);y!==null&&Fr(y,l,u),cx(l,u)}});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){a.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ym(a){if(a.blockedOn!==null)return!1;for(var i=a.targetContainers;0<i.length;){var l=ux(a.nativeEvent);if(l===null){l=a.nativeEvent;var u=new l.constructor(l.type,l);la=u,l.target.dispatchEvent(u),la=null}else return i=Z(l),i!==null&&N0(i),a.blockedOn=l,!1;i.shift()}return!0}function _0(a,i,l){Ym(a)&&l.delete(i)}function Lw(){hx=!1,mo!==null&&Ym(mo)&&(mo=null),ho!==null&&Ym(ho)&&(ho=null),fo!==null&&Ym(fo)&&(fo=null),qd.forEach(_0),Kd.forEach(_0)}function Gm(a,i){a.blockedOn===i&&(a.blockedOn=null,hx||(hx=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Lw)))}var Wm=null;function A0(a){Wm!==a&&(Wm=a,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Wm===a&&(Wm=null);for(var i=0;i<a.length;i+=3){var l=a[i],u=a[i+1],y=a[i+2];if(typeof u!="function"){if(mx(u||l)===null)continue;break}var j=Z(l);j!==null&&(a.splice(i,3),i-=3,nc(j,{pending:!0,data:y,method:l.method,action:u},u,y))}}))}function Gd(a){function i(we){return Gm(we,a)}mo!==null&&Gm(mo,a),ho!==null&&Gm(ho,a),fo!==null&&Gm(fo,a),qd.forEach(i),Kd.forEach(i);for(var l=0;l<xo.length;l++){var u=xo[l];u.blockedOn===a&&(u.blockedOn=null)}for(;0<xo.length&&(l=xo[0],l.blockedOn===null);)k0(l),l.blockedOn===null&&xo.shift();if(l=(a.ownerDocument||a).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var y=l[u],j=l[u+1],$=y[Ze]||null;if(typeof j=="function")$||A0(l);else if($){var W=null;if(j&&j.hasAttribute("formAction")){if(y=j,$=j[Ze]||null)W=$.formAction;else if(mx(y)!==null)continue}else W=$.action;typeof W=="function"?l[u+1]=W:(l.splice(u,3),u-=3),A0(l)}}}function fx(a){this._internalRoot=a}Xm.prototype.render=fx.prototype.render=function(a){var i=this._internalRoot;if(i===null)throw Error(n(409));var l=i.current,u=Pr();j0(l,u,a,i,null,null)},Xm.prototype.unmount=fx.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var i=a.containerInfo;j0(a.current,2,null,a,null,null),Tm(),i[mt]=null}};function Xm(a){this._internalRoot=a}Xm.prototype.unstable_scheduleHydration=function(a){if(a){var i=de();a={blockedOn:null,target:a,priority:i};for(var l=0;l<xo.length&&i!==0&&i<xo[l].priority;l++);xo.splice(l,0,a),l===0&&k0(a)}};var D0=t.version;if(D0!=="19.1.1")throw Error(n(527,D0,"19.1.1"));Ce.findDOMNode=function(a){var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=h(i),a=a!==null?x(a):null,a=a===null?null:a.stateNode,a};var Bw={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qm.isDisabled&&Qm.supportsFiber)try{Re=Qm.inject(Bw),ze=Qm}catch{}}return Xd.createRoot=function(a,i){if(!o(a))throw Error(n(299));var l=!1,u="",y=Bt,j=Qt,$=Ma,W=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(y=i.onUncaughtError),i.onCaughtError!==void 0&&(j=i.onCaughtError),i.onRecoverableError!==void 0&&($=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(W=i.unstable_transitionCallbacks)),i=b0(a,1,!1,null,null,l,u,y,j,$,W,null),a[mt]=i.current,Xf(a),new fx(i)},Xd.hydrateRoot=function(a,i,l){if(!o(a))throw Error(n(299));var u=!1,y="",j=Bt,$=Qt,W=Ma,we=null,Ge=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(j=l.onUncaughtError),l.onCaughtError!==void 0&&($=l.onCaughtError),l.onRecoverableError!==void 0&&(W=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(we=l.unstable_transitionCallbacks),l.formState!==void 0&&(Ge=l.formState)),i=b0(a,1,!0,i,l??null,u,y,j,$,W,we,Ge),i.context=v0(null),l=i.current,u=Pr(),u=kt(u),y=Fn(u),y.callback=null,pn(l,y,u),l=u,i.current.lanes=l,pt(i,l),$n(i),a[mt]=i.current,Xf(a),new Xm(i)},Xd.version="19.1.1",Xd}var L0;function Ww(){if(L0)return px.exports;L0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),px.exports=Gw(),px.exports}var Xw=Ww();/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zw=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),B0=s=>{const t=Zw(s);return t.charAt(0).toUpperCase()+t.slice(1)},Ub=(...s)=>s.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Jw=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=v.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:c,iconNode:d,...m},h)=>v.createElement("svg",{ref:h,...eN,width:t,height:t,stroke:s,strokeWidth:n?Number(r)*24/Number(t):r,className:Ub("lucide",o),...!c&&!Jw(m)&&{"aria-hidden":"true"},...m},[...d.map(([x,p])=>v.createElement(x,p)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=(s,t)=>{const r=v.forwardRef(({className:n,...o},c)=>v.createElement(tN,{ref:c,iconNode:t,className:Ub(`lucide-${Qw(B0(s))}`,`lucide-${s}`,n),...o}));return r.displayName=B0(s),r};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],aN=Dt("archive",sN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],zc=Dt("arrow-left",rN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],$b=Dt("arrow-right",nN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],oN=Dt("banknote",iN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],uu=Dt("bell",lN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],dN=Dt("box",cN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],U0=Dt("building",uN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],hN=Dt("calendar-days",mN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Pc=Dt("calendar",fN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],og=Dt("chart-column",xN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],pN=Dt("check-check",gN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ch=Dt("check",yN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],Bh=Dt("chef-hat",bN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],hs=Dt("chevron-down",vN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Eu=Dt("chevron-left",jN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Hb=Dt("chevron-right",wN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],$x=Dt("chevron-up",NN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],lg=Dt("circle-alert",SN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xa=Dt("circle-check-big",CN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Vb=Dt("clipboard-list",kN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$s=Dt("clock",_N);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],DN=Dt("coffee",AN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],$0=Dt("credit-card",EN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],qb=Dt("crown",TN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Fc=Dt("dollar-sign",MN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Kb=Dt("download",ON);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]],H0=Dt("euro",RN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],kh=Dt("eye-off",IN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vn=Dt("eye",zN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Oc=Dt("file-text",PN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],V0=Dt("folder",FN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],BN=Dt("funnel",LN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],_h=Dt("gift",UN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],HN=Dt("globe",$N);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Yb=Dt("grid-3x3",VN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],KN=Dt("heart",qN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Hx=Dt("house",YN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Gb=Dt("info",GN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],XN=Dt("key-round",WN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Wb=Dt("key",QN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],jx=Dt("layers",ZN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],e1=Dt("layout-dashboard",JN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],cg=Dt("list",t1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Uh=Dt("log-out",s1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Xb=Dt("mail",a1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],gh=Dt("map-pin",r1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Qb=Dt("menu",n1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=[["path",{d:"M5 12h14",key:"1ays0h"}]],Vx=Dt("minus",i1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],yl=Dt("package",o1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],fl=Dt("pen",l1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],dg=Dt("phone",c1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ls=Dt("plus",d1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Ah=Dt("printer",u1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],q0=Dt("receipt",m1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ug=Dt("refresh-cw",h1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],$h=Dt("rotate-ccw",f1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],mg=Dt("save",x1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],p1=Dt("scissors",g1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],jn=Dt("search",y1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],v1=Dt("send",b1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bl=Dt("settings",j1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],vl=Dt("shield",w1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],pu=Dt("shopping-bag",N1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],ko=Dt("shopping-cart",S1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],k1=Dt("smartphone",C1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],jo=Dt("sparkles",_1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ia=Dt("square-pen",A1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],iu=Dt("star",D1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],mu=Dt("store",E1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],hg=Dt("table",T1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Hh=Dt("tag",M1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],R1=Dt("timer",O1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],za=Dt("trash-2",I1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],ol=Dt("trash",z1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Zb=Dt("trending-up",P1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yu=Dt("triangle-alert",F1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],So=Dt("truck",L1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],fg=Dt("upload",B1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$1=Dt("user-check",U1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],V1=Dt("user-cog",H1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Lc=Dt("user",q1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],Y1=Dt("users-round",K1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],sn=Dt("users",G1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],ji=Dt("utensils",W1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],qx=Dt("wallet",X1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Z1=Dt("wifi-off",Q1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],e2=Dt("wifi",J1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],St=Dt("x",t2),Vh=`
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    background: #032D3A;
    border-radius: 10px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #4a7ca3;
    border-radius: 10px;
    border: 1px solid #2d5a87;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #2d5a87;
  }
  
  .custom-scrollbar::-webkit-scrollbar-corner {
    background: #032D3A;
  }
`,s2=({isOpen:s,onClose:t,onNext:r,resetFields:n})=>{const[o,c]=v.useState(""),d=[{id:"admin",name:"Admin",icon:qb},{id:"manager",name:"Manager",icon:bl},{id:"cashier",name:"Cashier",icon:Fc,subtitle:"Multiple Users"},{id:"waiter",name:"Waiter",icon:p1,subtitle:"Multiple Users"},{id:"chef",name:"Chef",icon:Bh}];Sr.useEffect(()=>{n&&c("")},[n]);const m=h=>{c(h),setTimeout(()=>{r({role:h})},300)};return s?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:Vh}),e.jsx("div",{className:"fixed inset-0 bg-[#00000094] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-[#032D3A] rounded-xl w-full max-w-md mx-auto relative border border-[#4a7ca3]",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-300 hover:text-white transition-colors z-10 border border-[#4a7ca3] rounded-lg w-7 h-7 flex items-center justify-center hover:bg-[#2d5a87]",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#2d5a87] rounded-lg flex items-center justify-center mx-auto mb-3 border border-[#4a7ca3]",children:e.jsx(vl,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"Reset PIN"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Step 1 of 4"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-md font-semibold text-white mb-3 text-center",children:"Select Your Role"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:d.map(h=>{const x=h.icon,p=o===h.id;return e.jsxs("button",{onClick:()=>m(h.id),className:`
                        ${p?"border-2 border-[#4a7ca3] bg-[#2d5a87] text-white":"border-[#1e3a5f] text-white"}
                        p-3 rounded-lg transition-all duration-200
                        flex flex-col items-center justify-center h-20 hover:cursor-pointer 
                        bg-[#032D3A] hover:bg-[#2d5a87] border
                      `,children:[e.jsx(x,{className:"w-5 h-5 mb-1"}),e.jsx("span",{className:"text-sm font-bold",children:h.name}),h.subtitle&&e.jsx("span",{className:"text-xs opacity-70",children:h.subtitle})]},h.id)})})]})]})})})]}):null},a2=({isOpen:s,onClose:t,onNext:r,userInfo:n,resetFields:o})=>{const[c,d]=v.useState("");Sr.useEffect(()=>{o&&d("")},[o]);const m=_=>{c.length<11&&d(D=>D+_)},h=()=>{d("")},x=()=>{d(_=>_.slice(0,-1))},p=()=>{c.length>=10&&r({...n,phoneNumber:c})},w=({number:_,onClick:D,className:L=""})=>e.jsx("button",{onClick:()=>D(_),className:`h-9 bg-[#032D3A] border-[#2d5a87] rounded-lg text-sm font-bold transition-all duration-200 border cursor-pointer text-white hover:bg-[#2d5a87] hover:border-[#4a7ca3] ${L}`,children:_}),N=({onClick:_,className:D="",children:L,variant:B="default"})=>{const z="h-9 rounded-lg text-xs font-semibold transition-all duration-200 border flex items-center justify-center",q={clear:"bg-red-900/40 hover:bg-red-800/50 border-[#4a7ca3] cursor-pointer text-red-300 hover:border-red-500",backspace:"bg-[#032D3A] hover:bg-[#2d5a87] border-[#4a7ca3] cursor-pointer text-white hover:border-[#4a7ca3]",default:z};return e.jsx("button",{onClick:_,className:`${z} ${q[B]} ${D}`,children:L})};return s?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:Vh}),e.jsx("div",{className:"fixed inset-0 bg-[#00000094] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-[#032D3A] rounded-xl w-full max-w-md mx-auto relative border border-[#4a7ca3]",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-300 hover:text-white transition-colors z-10 border border-[#4a7ca3] rounded-lg w-7 h-7 flex items-center justify-center hover:bg-[#2d5a87]",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#2d5a87] rounded-lg flex items-center justify-center mx-auto mb-3 border border-[#4a7ca3]",children:e.jsx(vl,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"Reset PIN"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Step 2 of 4"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-md font-semibold text-white mb-3 text-center",children:"Enter Phone Number"}),e.jsxs("p",{className:"text-xs text-gray-300 mb-3 text-center",children:["Role: ",e.jsx("span",{className:"text-white font-semibold",children:n?.role})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex justify-center items-center gap-2 mb-1",children:e.jsxs("div",{className:"flex items-center bg-[#1e3a5f] border border-[#2d5a87] rounded-lg px-3 py-2 min-w-[180px]",children:[e.jsx(dg,{className:"w-4 h-4 text-gray-300 mr-2"}),e.jsx("span",{className:"text-white font-mono text-sm",children:c||"Enter phone number"})]})}),e.jsxs("p",{className:"text-center text-xs text-gray-400",children:[c.length,"/11 digits"]})]}),e.jsxs("div",{className:"max-w-xs mx-auto mb-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[1,2,3,4,5,6,7,8,9].map(_=>e.jsx(w,{number:_,onClick:m},_))}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(N,{onClick:h,variant:"clear",children:"Clear"}),e.jsx(w,{number:0,onClick:m}),e.jsx(N,{onClick:x,variant:"backspace",children:e.jsx(St,{className:"w-3 h-3"})})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:p,disabled:c.length<10,className:`px-6 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 border ${c.length>=10?"bg-[#2d5a87] border-[#4a7ca3] text-white hover:bg-[#4a7ca3] cursor-pointer":"bg-[#1e3a5f] border-[#4a7ca3] text-gray-400 cursor-not-allowed"}`,children:"Send OTP"})})]})]})})})]}):null},r2=({isOpen:s,onClose:t,onNext:r,userInfo:n,resetFields:o})=>{const[c,d]=v.useState("");Sr.useEffect(()=>{o&&d("")},[o]);const m=D=>{c.length<6&&d(L=>L+D)},h=()=>{d("")},x=()=>{d(D=>D.slice(0,-1))},p=()=>{c.length===6&&r()},w=({number:D,onClick:L,className:B=""})=>e.jsx("button",{onClick:()=>L(D),className:`h-9 bg-[#032D3A] border-[#2d5a87] rounded-lg text-sm font-bold transition-all duration-200 border cursor-pointer text-white hover:bg-[#2d5a87] hover:border-[#4a7ca3] ${B}`,children:D}),N=({onClick:D,className:L="",children:B,variant:z="default"})=>{const q="h-9 rounded-lg text-xs font-semibold transition-all duration-200 border flex items-center justify-center",R={clear:"bg-red-900/40 hover:bg-red-800/50 border-[#4a7ca3] cursor-pointer text-red-300 hover:border-red-500",backspace:"bg-[#032D3A] hover:bg-[#2d5a87] border-[#4a7ca3] cursor-pointer text-white hover:border-[#4a7ca3]",default:q};return e.jsx("button",{onClick:D,className:`${q} ${R[z]} ${L}`,children:B})},_=()=>{const D=Array.from({length:6},(L,B)=>{const z=B<c.length,q=c[B]||"",R=!z;return e.jsx("div",{className:`w-8 h-8 border rounded-lg flex items-center justify-center text-sm font-semibold transition-all duration-200 ${R?"border-[#1e3a5f] bg-[#0f2a44]":"border-[#2d5a87] bg-[#032D3A] text-white"}`,children:z?q:""},B)});return e.jsx("div",{className:"flex justify-center items-center gap-2",children:D})};return s?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:Vh}),e.jsx("div",{className:"fixed inset-0 bg-[#00000094] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-[#032D3A] rounded-xl w-full max-w-md mx-auto relative border border-[#4a7ca3]",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-300 hover:text-white transition-colors z-10 border border-[#4a7ca3] rounded-lg w-7 h-7 flex items-center justify-center hover:bg-[#2d5a87]",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#2d5a87] rounded-lg flex items-center justify-center mx-auto mb-3 border border-[#4a7ca3]",children:e.jsx(vl,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"Reset PIN"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Step 3 of 4"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-md font-semibold text-white mb-3 text-center",children:"Enter OTP"}),e.jsxs("p",{className:"text-xs text-gray-300 mb-3 text-center",children:["OTP sent to: ",e.jsx("span",{className:"text-white font-semibold",children:n?.phoneNumber})]}),e.jsxs("div",{className:"mb-3",children:[_(),e.jsxs("p",{className:"text-center text-xs text-gray-400 mt-1",children:[c.length,"/6 digits"]})]}),e.jsxs("div",{className:"max-w-xs mx-auto mb-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[1,2,3,4,5,6,7,8,9].map(D=>e.jsx(w,{number:D,onClick:m},D))}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(N,{onClick:h,variant:"clear",children:"Clear"}),e.jsx(w,{number:0,onClick:m}),e.jsx(N,{onClick:x,variant:"backspace",children:e.jsx(St,{className:"w-3 h-3"})})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:p,disabled:c.length!==6,className:`px-6 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 border ${c.length===6?"bg-[#2d5a87] border-[#4a7ca3] text-white hover:bg-[#4a7ca3] cursor-pointer":"bg-[#1e3a5f] border-[#4a7ca3] text-gray-400 cursor-not-allowed"}`,children:"Verify OTP"})})]})]})})})]}):null},n2=({isOpen:s,onClose:t,onComplete:r,resetFields:n})=>{const[o,c]=v.useState(""),[d,m]=v.useState(""),[h,x]=v.useState(!1),[p,w]=v.useState("");Sr.useEffect(()=>{n&&(c(""),m(""),x(!1),w(""))},[n]);const N=R=>{h?d.length<6&&(m(F=>F+R),w("")):o.length<6&&c(F=>F+R)},_=()=>{h?(m(""),w("")):c("")},D=()=>{h?(m(R=>R.slice(0,-1)),w("")):c(R=>R.slice(0,-1))},L=()=>{if(h){if(d.length<4){w("PIN must be at least 4 digits");return}if(o!==d){w("PINs do not match");return}r()}else{if(o.length<4){w("PIN must be at least 4 digits");return}x(!0),w("")}},B=({number:R,onClick:F,className:T=""})=>e.jsx("button",{onClick:()=>F(R),className:`h-9 bg-[#032D3A] border-[#2d5a87] rounded-lg text-sm font-bold transition-all duration-200 border cursor-pointer text-white hover:bg-[#2d5a87] hover:border-[#4a7ca3] ${T}`,children:R}),z=({onClick:R,className:F="",children:T,variant:I="default"})=>{const se="h-9 rounded-lg text-xs font-semibold transition-all duration-200 border flex items-center justify-center",oe={clear:"bg-red-900/40 hover:bg-red-800/50 border-[#4a7ca3] cursor-pointer text-red-300 hover:border-red-500",backspace:"bg-[#032D3A] hover:bg-[#2d5a87] border-[#4a7ca3] cursor-pointer text-white hover:border-[#4a7ca3]",default:se};return e.jsx("button",{onClick:R,className:`${se} ${oe[I]} ${F}`,children:T})},q=(R,F)=>{const T=Array.from({length:6},(I,se)=>{const oe=se<R.length,_e=!oe;return e.jsx("div",{className:`w-8 h-8 border rounded-lg flex items-center justify-center text-sm font-semibold transition-all duration-200 ${_e?"border-[#1e3a5f] bg-[#0f2a44]":"border-[#2d5a87] bg-[#032D3A] text-white"}`,children:oe?"●":""},se)});return e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-center text-xs text-gray-300 mb-1",children:F}),e.jsx("div",{className:"flex justify-center items-center gap-2",children:T}),e.jsxs("p",{className:"text-center text-xs text-gray-400 mt-1",children:[R.length,"/6 digits"]})]})};return s?e.jsxs(e.Fragment,{children:[e.jsx("style",{children:Vh}),e.jsx("div",{className:"fixed inset-0 bg-[#00000094] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-[#032D3A] rounded-xl w-full max-w-md mx-auto relative border border-[#4a7ca3]",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-300 hover:text-white transition-colors z-10 border border-[#4a7ca3] rounded-lg w-7 h-7 flex items-center justify-center hover:bg-[#2d5a87]",children:e.jsx(St,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#2d5a87] rounded-lg flex items-center justify-center mx-auto mb-3 border border-[#4a7ca3]",children:e.jsx(vl,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"Reset PIN"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Step 4 of 4"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-md font-semibold text-white mb-3 text-center",children:h?"Confirm New PIN":"Set New PIN"}),h?q(d,"Confirm New PIN"):q(o,"Enter New PIN (4-6 digits)"),p&&e.jsxs("div",{className:"mb-3 flex items-center justify-center gap-1 bg-red-900/40 text-red-300 p-1 rounded border border-red-600/30",children:[e.jsx(lg,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-medium",children:p})]}),e.jsxs("div",{className:"max-w-xs mx-auto mb-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[1,2,3,4,5,6,7,8,9].map(R=>e.jsx(B,{number:R,onClick:N},R))}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(z,{onClick:_,variant:"clear",children:"Clear"}),e.jsx(B,{number:0,onClick:N}),e.jsx(z,{onClick:D,variant:"backspace",children:e.jsx(St,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"flex justify-center gap-3",children:[h&&e.jsx("button",{onClick:()=>{x(!1),m(""),w("")},className:"px-4 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 text-gray-300 hover:text-white bg-transparent border border-[#4a7ca3] hover:bg-[#1e3a5f]",children:"Back to New PIN"}),e.jsx("button",{onClick:L,disabled:!h&&o.length<4||h&&d.length<4,className:`px-4 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 border ${!h&&o.length>=4||h&&d.length>=4?"bg-[#2d5a87] border-[#4a7ca3] text-white hover:bg-[#4a7ca3] cursor-pointer":"bg-[#1e3a5f] border-[#4a7ca3] text-gray-400 cursor-not-allowed"}`,children:h?"Reset PIN":"Continue"})]})]})]})})})]}):null},i2=({isOpen:s,onClose:t})=>{const[r,n]=v.useState(1),[o,c]=v.useState(null),[d,m]=v.useState(!1);Sr.useEffect(()=>{s||(n(1),c(null),m(_=>!_))},[s]);const h=_=>{c(_),n(2)},x=_=>{c(_),n(3)},p=()=>{n(4)},w=()=>{n(1),c(null),m(_=>!_),alert("PIN reset successfully! You can now login with your new PIN."),t()},N=()=>{n(1),c(null),m(_=>!_),t()};return e.jsxs(e.Fragment,{children:[e.jsx(s2,{isOpen:s&&r===1,onClose:N,onNext:h,resetFields:d}),e.jsx(a2,{isOpen:s&&r===2,onClose:N,onNext:x,userInfo:o,resetFields:d}),e.jsx(r2,{isOpen:s&&r===3,onClose:N,onNext:p,userInfo:o,resetFields:d}),e.jsx(n2,{isOpen:s&&r===4,onClose:N,onComplete:w,resetFields:d})]})};/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Jb=s=>{throw TypeError(s)},o2=(s,t,r)=>t.has(s)||Jb("Cannot "+r),wx=(s,t,r)=>(o2(s,t,"read from private field"),r?r.call(s):t.get(s)),l2=(s,t,r)=>t.has(s)?Jb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,r),K0="popstate";function c2(s={}){function t(o,c){let{pathname:d="/",search:m="",hash:h=""}=wi(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),bu("",{pathname:d,search:m,hash:h},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function r(o,c){let d=o.document.querySelector("base"),m="";if(d&&d.getAttribute("href")){let h=o.location.href,x=h.indexOf("#");m=x===-1?h:h.slice(0,x)}return m+"#"+(typeof c=="string"?c:_o(c))}function n(o,c){sa(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return u2(t,r,n,s)}function us(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function sa(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function d2(){return Math.random().toString(36).substring(2,10)}function Y0(s,t){return{usr:s.state,key:s.key,idx:t}}function bu(s,t,r=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?wi(t):t,state:r,key:t&&t.key||n||d2()}}function _o({pathname:s="/",search:t="",hash:r=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function wi(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substring(r),s=s.substring(0,r));let n=s.indexOf("?");n>=0&&(t.search=s.substring(n),s=s.substring(0,n)),s&&(t.pathname=s)}return t}function u2(s,t,r,n={}){let{window:o=document.defaultView,v5Compat:c=!1}=n,d=o.history,m="POP",h=null,x=p();x==null&&(x=0,d.replaceState({...d.state,idx:x},""));function p(){return(d.state||{idx:null}).idx}function w(){m="POP";let B=p(),z=B==null?null:B-x;x=B,h&&h({action:m,location:L.location,delta:z})}function N(B,z){m="PUSH";let q=bu(L.location,B,z);r&&r(q,B),x=p()+1;let R=Y0(q,x),F=L.createHref(q);try{d.pushState(R,"",F)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;o.location.assign(F)}c&&h&&h({action:m,location:L.location,delta:1})}function _(B,z){m="REPLACE";let q=bu(L.location,B,z);r&&r(q,B),x=p();let R=Y0(q,x),F=L.createHref(q);d.replaceState(R,"",F),c&&h&&h({action:m,location:L.location,delta:0})}function D(B){return ev(B)}let L={get action(){return m},get location(){return s(o,d)},listen(B){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(K0,w),h=B,()=>{o.removeEventListener(K0,w),h=null}},createHref(B){return t(o,B)},createURL:D,encodeLocation(B){let z=D(B);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:N,replace:_,go(B){return d.go(B)}};return L}function ev(s,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),us(r,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:_o(s);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}var ou,G0=class{constructor(s){if(l2(this,ou,new Map),s)for(let[t,r]of s)this.set(t,r)}get(s){if(wx(this,ou).has(s))return wx(this,ou).get(s);if(s.defaultValue!==void 0)return s.defaultValue;throw new Error("No value found for context")}set(s,t){wx(this,ou).set(s,t)}};ou=new WeakMap;var m2=new Set(["lazy","caseSensitive","path","id","index","children"]);function h2(s){return m2.has(s)}var f2=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function x2(s){return f2.has(s)}function g2(s){return s.index===!0}function vu(s,t,r=[],n={},o=!1){return s.map((c,d)=>{let m=[...r,String(d)],h=typeof c.id=="string"?c.id:m.join("-");if(us(c.index!==!0||!c.children,"Cannot specify children on an index route"),us(o||!n[h],`Found a route id collision on id "${h}".  Route id's must be globally unique within Data Router usages`),g2(c)){let x={...c,...t(c),id:h};return n[h]=x,x}else{let x={...c,...t(c),id:h,children:void 0};return n[h]=x,c.children&&(x.children=vu(c.children,t,m,n,o)),x}})}function bo(s,t,r="/"){return ph(s,t,r,!1)}function ph(s,t,r,n){let o=typeof t=="string"?wi(t):t,c=an(o.pathname||"/",r);if(c==null)return null;let d=tv(s);y2(d);let m=null;for(let h=0;m==null&&h<d.length;++h){let x=D2(c);m=_2(d[h],x,n)}return m}function p2(s,t){let{route:r,pathname:n,params:o}=s;return{id:r.id,pathname:n,params:o,data:t[r.id],loaderData:t[r.id],handle:r.handle}}function tv(s,t=[],r=[],n="",o=!1){let c=(d,m,h=o,x)=>{let p={relativePath:x===void 0?d.path||"":x,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&h)return;us(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let w=Kn([n,p.relativePath]),N=r.concat(p);d.children&&d.children.length>0&&(us(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),tv(d.children,t,N,w,h)),!(d.path==null&&!d.index)&&t.push({path:w,score:C2(w,d.index),routesMeta:N})};return s.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))c(d,m);else for(let h of sv(d.path))c(d,m,!0,h)}),t}function sv(s){let t=s.split("/");if(t.length===0)return[];let[r,...n]=t,o=r.endsWith("?"),c=r.replace(/\?$/,"");if(n.length===0)return o?[c,""]:[c];let d=sv(n.join("/")),m=[];return m.push(...d.map(h=>h===""?c:[c,h].join("/"))),o&&m.push(...d),m.map(h=>s.startsWith("/")&&h===""?"/":h)}function y2(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:k2(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var b2=/^:[\w-]+$/,v2=3,j2=2,w2=1,N2=10,S2=-2,W0=s=>s==="*";function C2(s,t){let r=s.split("/"),n=r.length;return r.some(W0)&&(n+=S2),t&&(n+=j2),r.filter(o=>!W0(o)).reduce((o,c)=>o+(b2.test(c)?v2:c===""?w2:N2),n)}function k2(s,t){return s.length===t.length&&s.slice(0,-1).every((n,o)=>n===t[o])?s[s.length-1]-t[t.length-1]:0}function _2(s,t,r=!1){let{routesMeta:n}=s,o={},c="/",d=[];for(let m=0;m<n.length;++m){let h=n[m],x=m===n.length-1,p=c==="/"?t:t.slice(c.length)||"/",w=Dh({path:h.relativePath,caseSensitive:h.caseSensitive,end:x},p),N=h.route;if(!w&&x&&r&&!n[n.length-1].route.index&&(w=Dh({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:Kn([c,w.pathname]),pathnameBase:O2(Kn([c,w.pathnameBase])),route:N}),w.pathnameBase!=="/"&&(c=Kn([c,w.pathnameBase]))}return d}function Dh(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,n]=A2(s.path,s.caseSensitive,s.end),o=t.match(r);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:n.reduce((x,{paramName:p,isOptional:w},N)=>{if(p==="*"){let D=m[N]||"";d=c.slice(0,c.length-D.length).replace(/(.)\/+$/,"$1")}const _=m[N];return w&&!_?x[p]=void 0:x[p]=(_||"").replace(/%2F/g,"/"),x},{}),pathname:c,pathnameBase:d,pattern:s}}function A2(s,t=!1,r=!0){sa(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,h)=>(n.push({paramName:m,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),n]}function D2(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return sa(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function an(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=s.charAt(r);return n&&n!=="/"?null:s.slice(r)||"/"}function E2({basename:s,pathname:t}){return t==="/"?s:Kn([s,t])}function T2(s,t="/"){let{pathname:r,search:n="",hash:o=""}=typeof s=="string"?wi(s):s;return{pathname:r?r.startsWith("/")?r:M2(r,t):t,search:R2(n),hash:I2(o)}}function M2(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function Nx(s,t,r,n){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function av(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function xg(s){let t=av(s);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function gg(s,t,r,n=!1){let o;typeof s=="string"?o=wi(s):(o={...s},us(!o.pathname||!o.pathname.includes("?"),Nx("?","pathname","search",o)),us(!o.pathname||!o.pathname.includes("#"),Nx("#","pathname","hash",o)),us(!o.search||!o.search.includes("#"),Nx("#","search","hash",o)));let c=s===""||o.pathname==="",d=c?"/":o.pathname,m;if(d==null)m=r;else{let w=t.length-1;if(!n&&d.startsWith("..")){let N=d.split("/");for(;N[0]==="..";)N.shift(),w-=1;o.pathname=N.join("/")}m=w>=0?t[w]:"/"}let h=T2(o,m),x=d&&d!=="/"&&d.endsWith("/"),p=(c||d===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(x||p)&&(h.pathname+="/"),h}var Kn=s=>s.join("/").replace(/\/\/+/g,"/"),O2=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),R2=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,I2=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,Eh=class{constructor(s,t,r,n=!1){this.status=s,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function ju(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var rv=["POST","PUT","PATCH","DELETE"],z2=new Set(rv),P2=["GET",...rv],F2=new Set(P2),L2=new Set([301,302,303,307,308]),B2=new Set([307,308]),Sx={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},U2={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Qd={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},$2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pg=s=>$2.test(s),H2=s=>({hasErrorBoundary:!!s.hasErrorBoundary}),nv="remix-router-transitions",iv=Symbol("ResetLoaderData");function V2(s){const t=s.window?s.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";us(s.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=s.hydrationRouteProperties||[],o=s.mapRouteProperties||H2,c={},d=vu(s.routes,o,void 0,c),m,h=s.basename||"/";h.startsWith("/")||(h=`/${h}`);let x=s.dataStrategy||W2,p={...s.future},w=null,N=new Set,_=null,D=null,L=null,B=s.hydrationData!=null,z=bo(d,s.history.location,h),q=!1,R=null,F;if(z==null&&!s.patchRoutesOnNavigation){let de=en(404,{pathname:s.history.location.pathname}),{matches:De,route:Le}=Zm(d);F=!0,z=De,R={[Le.id]:de}}else if(z&&!s.hydrationData&&st(z,d,s.history.location.pathname).active&&(z=null),z)if(z.some(de=>de.route.lazy))F=!1;else if(!z.some(de=>de.route.loader))F=!0;else{let de=s.hydrationData?s.hydrationData.loaderData:null,De=s.hydrationData?s.hydrationData.errors:null;if(De){let Le=z.findIndex(ve=>De[ve.route.id]!==void 0);F=z.slice(0,Le+1).every(ve=>!Yx(ve.route,de,De))}else F=z.every(Le=>!Yx(Le.route,de,De))}else{F=!1,z=[];let de=st(null,d,s.history.location.pathname);de.active&&de.matches&&(q=!0,z=de.matches)}let T,I={historyAction:s.history.action,location:s.history.location,matches:z,initialized:F,navigation:Sx,restoreScrollPosition:s.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:s.hydrationData&&s.hydrationData.loaderData||{},actionData:s.hydrationData&&s.hydrationData.actionData||null,errors:s.hydrationData&&s.hydrationData.errors||R,fetchers:new Map,blockers:new Map},se="POP",oe=!1,_e,he=!1,ie=new Map,Ee=null,Ae=!1,re=!1,le=new Set,J=new Map,Ce=0,Se=-1,He=new Map,Y=new Set,be=new Map,ye=new Map,ae=new Set,Ne=new Map,ge,A=null;function P(){if(w=s.history.listen(({action:de,location:De,delta:Le})=>{if(ge){ge(),ge=void 0;return}sa(Ne.size===0||Le!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ve=Pe({currentLocation:I.location,nextLocation:De,historyAction:de});if(ve&&Le!=null){let Ze=new Promise(mt=>{ge=mt});s.history.go(Le*-1),Ke(ve,{state:"blocked",location:De,proceed(){Ke(ve,{state:"proceeding",proceed:void 0,reset:void 0,location:De}),Ze.then(()=>s.history.go(Le))},reset(){let mt=new Map(I.blockers);mt.set(ve,Qd),S({blockers:mt})}});return}return U(de,De)}),r){dS(t,ie);let de=()=>uS(t,ie);t.addEventListener("pagehide",de),Ee=()=>t.removeEventListener("pagehide",de)}return I.initialized||U("POP",I.location,{initialHydration:!0}),T}function f(){w&&w(),Ee&&Ee(),N.clear(),_e&&_e.abort(),I.fetchers.forEach((de,De)=>Ve(De)),I.blockers.forEach((de,De)=>Te(De))}function g(de){return N.add(de),()=>N.delete(de)}function S(de,De={}){de.matches&&(de.matches=de.matches.map(Ze=>{let mt=c[Ze.route.id],dt=Ze.route;return dt.element!==mt.element||dt.errorElement!==mt.errorElement||dt.hydrateFallbackElement!==mt.hydrateFallbackElement?{...Ze,route:mt}:Ze})),I={...I,...de};let Le=[],ve=[];I.fetchers.forEach((Ze,mt)=>{Ze.state==="idle"&&(ae.has(mt)?Le.push(mt):ve.push(mt))}),ae.forEach(Ze=>{!I.fetchers.has(Ze)&&!J.has(Ze)&&Le.push(Ze)}),[...N].forEach(Ze=>Ze(I,{deletedFetchers:Le,viewTransitionOpts:De.viewTransitionOpts,flushSync:De.flushSync===!0})),Le.forEach(Ze=>Ve(Ze)),ve.forEach(Ze=>I.fetchers.delete(Ze))}function k(de,De,{flushSync:Le}={}){let ve=I.actionData!=null&&I.navigation.formMethod!=null&&wr(I.navigation.formMethod)&&I.navigation.state==="loading"&&de.state?._isRedirect!==!0,Ze;De.actionData?Object.keys(De.actionData).length>0?Ze=De.actionData:Ze=null:ve?Ze=I.actionData:Ze=null;let mt=De.loaderData?ny(I.loaderData,De.loaderData,De.matches||[],De.errors):I.loaderData,dt=I.blockers;dt.size>0&&(dt=new Map(dt),dt.forEach((me,Ie)=>dt.set(Ie,Qd)));let jt=Ae?!1:ke(de,De.matches||I.matches),wt=oe===!0||I.navigation.formMethod!=null&&wr(I.navigation.formMethod)&&de.state?._isRedirect!==!0;m&&(d=m,m=void 0),Ae||se==="POP"||(se==="PUSH"?s.history.push(de,de.state):se==="REPLACE"&&s.history.replace(de,de.state));let Tt;if(se==="POP"){let me=ie.get(I.location.pathname);me&&me.has(de.pathname)?Tt={currentLocation:I.location,nextLocation:de}:ie.has(de.pathname)&&(Tt={currentLocation:de,nextLocation:I.location})}else if(he){let me=ie.get(I.location.pathname);me?me.add(de.pathname):(me=new Set([de.pathname]),ie.set(I.location.pathname,me)),Tt={currentLocation:I.location,nextLocation:de}}S({...De,actionData:Ze,loaderData:mt,historyAction:se,location:de,initialized:!0,navigation:Sx,revalidation:"idle",restoreScrollPosition:jt,preventScrollReset:wt,blockers:dt},{viewTransitionOpts:Tt,flushSync:Le===!0}),se="POP",oe=!1,he=!1,Ae=!1,re=!1,A?.resolve(),A=null}async function C(de,De){if(typeof de=="number"){s.history.go(de);return}let Le=Kx(I.location,I.matches,h,de,De?.fromRouteId,De?.relative),{path:ve,submission:Ze,error:mt}=X0(!1,Le,De),dt=I.location,jt=bu(I.location,ve,De&&De.state);jt={...jt,...s.history.encodeLocation(jt)};let wt=De&&De.replace!=null?De.replace:void 0,Tt="PUSH";wt===!0?Tt="REPLACE":wt===!1||Ze!=null&&wr(Ze.formMethod)&&Ze.formAction===I.location.pathname+I.location.search&&(Tt="REPLACE");let me=De&&"preventScrollReset"in De?De.preventScrollReset===!0:void 0,Ie=(De&&De.flushSync)===!0,te=Pe({currentLocation:dt,nextLocation:jt,historyAction:Tt});if(te){Ke(te,{state:"blocked",location:jt,proceed(){Ke(te,{state:"proceeding",proceed:void 0,reset:void 0,location:jt}),C(de,De)},reset(){let Z=new Map(I.blockers);Z.set(te,Qd),S({blockers:Z})}});return}await U(Tt,jt,{submission:Ze,pendingError:mt,preventScrollReset:me,replace:De&&De.replace,enableViewTransition:De&&De.viewTransition,flushSync:Ie})}function O(){A||(A=mS()),Me(),S({revalidation:"loading"});let de=A.promise;return I.navigation.state==="submitting"?de:I.navigation.state==="idle"?(U(I.historyAction,I.location,{startUninterruptedRevalidation:!0}),de):(U(se||I.historyAction,I.navigation.location,{overrideNavigation:I.navigation,enableViewTransition:he===!0}),de)}async function U(de,De,Le){_e&&_e.abort(),_e=null,se=de,Ae=(Le&&Le.startUninterruptedRevalidation)===!0,pt(I.location,I.matches),oe=(Le&&Le.preventScrollReset)===!0,he=(Le&&Le.enableViewTransition)===!0;let ve=m||d,Ze=Le&&Le.overrideNavigation,mt=Le?.initialHydration&&I.matches&&I.matches.length>0&&!q?I.matches:bo(ve,De,h),dt=(Le&&Le.flushSync)===!0;if(mt&&I.initialized&&!re&&aS(I.location,De)&&!(Le&&Le.submission&&wr(Le.submission.formMethod))){k(De,{matches:mt},{flushSync:dt});return}let jt=st(mt,ve,De.pathname);if(jt.active&&jt.matches&&(mt=jt.matches),!mt){let{error:Xe,notFoundMatches:nt,route:ut}=qe(De.pathname);k(De,{matches:nt,loaderData:{},errors:{[ut.id]:Xe}},{flushSync:dt});return}_e=new AbortController;let wt=Dc(s.history,De,_e.signal,Le&&Le.submission),Tt=s.getContext?await s.getContext():new G0,me;if(Le&&Le.pendingError)me=[vo(mt).route.id,{type:"error",error:Le.pendingError}];else if(Le&&Le.submission&&wr(Le.submission.formMethod)){let Xe=await H(wt,De,Le.submission,mt,Tt,jt.active,Le&&Le.initialHydration===!0,{replace:Le.replace,flushSync:dt});if(Xe.shortCircuited)return;if(Xe.pendingActionResult){let[nt,ut]=Xe.pendingActionResult;if(Lr(ut)&&ju(ut.error)&&ut.error.status===404){_e=null,k(De,{matches:Xe.matches,loaderData:{},errors:{[nt]:ut.error}});return}}mt=Xe.matches||mt,me=Xe.pendingActionResult,Ze=Cx(De,Le.submission),dt=!1,jt.active=!1,wt=Dc(s.history,wt.url,wt.signal)}let{shortCircuited:Ie,matches:te,loaderData:Z,errors:Be}=await V(wt,De,mt,Tt,jt.active,Ze,Le&&Le.submission,Le&&Le.fetcherSubmission,Le&&Le.replace,Le&&Le.initialHydration===!0,dt,me);Ie||(_e=null,k(De,{matches:te||mt,...iy(me),loaderData:Z,errors:Be}))}async function H(de,De,Le,ve,Ze,mt,dt,jt={}){Me();let wt=lS(De,Le);if(S({navigation:wt},{flushSync:jt.flushSync===!0}),mt){let Ie=await gt(ve,De.pathname,de.signal);if(Ie.type==="aborted")return{shortCircuited:!0};if(Ie.type==="error"){if(Ie.partialMatches.length===0){let{matches:Z,route:Be}=Zm(d);return{matches:Z,pendingActionResult:[Be.id,{type:"error",error:Ie.error}]}}let te=vo(Ie.partialMatches).route.id;return{matches:Ie.partialMatches,pendingActionResult:[te,{type:"error",error:Ie.error}]}}else if(Ie.matches)ve=Ie.matches;else{let{notFoundMatches:te,error:Z,route:Be}=qe(De.pathname);return{matches:te,pendingActionResult:[Be.id,{type:"error",error:Z}]}}}let Tt,me=yh(ve,De);if(!me.route.action&&!me.route.lazy)Tt={type:"error",error:en(405,{method:de.method,pathname:De.pathname,routeId:me.route.id})};else{let Ie=Ec(o,c,de,ve,me,dt?[]:n,Ze),te=await fe(de,Ie,Ze,null);if(Tt=te[me.route.id],!Tt){for(let Z of ve)if(te[Z.route.id]){Tt=te[Z.route.id];break}}if(de.signal.aborted)return{shortCircuited:!0}}if(xl(Tt)){let Ie;return jt&&jt.replace!=null?Ie=jt.replace:Ie=sy(Tt.response.headers.get("Location"),new URL(de.url),h)===I.location.pathname+I.location.search,await ne(de,Tt,!0,{submission:Le,replace:Ie}),{shortCircuited:!0}}if(Lr(Tt)){let Ie=vo(ve,me.route.id);return(jt&&jt.replace)!==!0&&(se="PUSH"),{matches:ve,pendingActionResult:[Ie.route.id,Tt,me.route.id]}}return{matches:ve,pendingActionResult:[me.route.id,Tt]}}async function V(de,De,Le,ve,Ze,mt,dt,jt,wt,Tt,me,Ie){let te=mt||Cx(De,dt),Z=dt||jt||ly(te),Be=!Ae&&!Tt;if(Ze){if(Be){let Ct=ee(Ie);S({navigation:te,...Ct!==void 0?{actionData:Ct}:{}},{flushSync:me})}let Nt=await gt(Le,De.pathname,de.signal);if(Nt.type==="aborted")return{shortCircuited:!0};if(Nt.type==="error"){if(Nt.partialMatches.length===0){let{matches:zt,route:qt}=Zm(d);return{matches:zt,loaderData:{},errors:{[qt.id]:Nt.error}}}let Ct=vo(Nt.partialMatches).route.id;return{matches:Nt.partialMatches,loaderData:{},errors:{[Ct]:Nt.error}}}else if(Nt.matches)Le=Nt.matches;else{let{error:Ct,notFoundMatches:zt,route:qt}=qe(De.pathname);return{matches:zt,loaderData:{},errors:{[qt.id]:Ct}}}}let Xe=m||d,{dsMatches:nt,revalidatingFetchers:ut}=Q0(de,ve,o,c,s.history,I,Le,Z,De,Tt?[]:n,Tt===!0,re,le,ae,be,Y,Xe,h,s.patchRoutesOnNavigation!=null,Ie);if(Se=++Ce,!s.dataStrategy&&!nt.some(Nt=>Nt.shouldLoad)&&!nt.some(Nt=>Nt.route.middleware)&&ut.length===0){let Nt=Qe();return k(De,{matches:Le,loaderData:{},errors:Ie&&Lr(Ie[1])?{[Ie[0]]:Ie[1].error}:null,...iy(Ie),...Nt?{fetchers:new Map(I.fetchers)}:{}},{flushSync:me}),{shortCircuited:!0}}if(Be){let Nt={};if(!Ze){Nt.navigation=te;let Ct=ee(Ie);Ct!==void 0&&(Nt.actionData=Ct)}ut.length>0&&(Nt.fetchers=X(ut)),S(Nt,{flushSync:me})}ut.forEach(Nt=>{We(Nt.key),Nt.controller&&J.set(Nt.key,Nt.controller)});let Et=()=>ut.forEach(Nt=>We(Nt.key));_e&&_e.signal.addEventListener("abort",Et);let{loaderResults:Rt,fetcherResults:Ht}=await ce(nt,ut,de,ve);if(de.signal.aborted)return{shortCircuited:!0};_e&&_e.signal.removeEventListener("abort",Et),ut.forEach(Nt=>J.delete(Nt.key));let ss=Jm(Rt);if(ss)return await ne(de,ss.result,!0,{replace:wt}),{shortCircuited:!0};if(ss=Jm(Ht),ss)return Y.add(ss.key),await ne(de,ss.result,!0,{replace:wt}),{shortCircuited:!0};let{loaderData:Pt,errors:ms}=ry(I,Le,Rt,Ie,ut,Ht);Tt&&I.errors&&(ms={...I.errors,...ms});let as=Qe(),ys=At(Se),vs=as||ys||ut.length>0;return{matches:Le,loaderData:Pt,errors:ms,...vs?{fetchers:new Map(I.fetchers)}:{}}}function ee(de){if(de&&!Lr(de[1]))return{[de[0]]:de[1].data};if(I.actionData)return Object.keys(I.actionData).length===0?null:I.actionData}function X(de){return de.forEach(De=>{let Le=I.fetchers.get(De.key),ve=Zd(void 0,Le?Le.data:void 0);I.fetchers.set(De.key,ve)}),new Map(I.fetchers)}async function M(de,De,Le,ve){We(de);let Ze=(ve&&ve.flushSync)===!0,mt=m||d,dt=Kx(I.location,I.matches,h,Le,De,ve?.relative),jt=bo(mt,dt,h),wt=st(jt,mt,dt);if(wt.active&&wt.matches&&(jt=wt.matches),!jt){ze(de,De,en(404,{pathname:dt}),{flushSync:Ze});return}let{path:Tt,submission:me,error:Ie}=X0(!0,dt,ve);if(Ie){ze(de,De,Ie,{flushSync:Ze});return}let te=s.getContext?await s.getContext():new G0,Z=(ve&&ve.preventScrollReset)===!0;if(me&&wr(me.formMethod)){await Q(de,De,Tt,jt,te,wt.active,Ze,Z,me);return}be.set(de,{routeId:De,path:Tt}),await ue(de,De,Tt,jt,te,wt.active,Ze,Z,me)}async function Q(de,De,Le,ve,Ze,mt,dt,jt,wt){Me(),be.delete(de);let Tt=I.fetchers.get(de);Re(de,cS(wt,Tt),{flushSync:dt});let me=new AbortController,Ie=Dc(s.history,Le,me.signal,wt);if(mt){let Kt=await gt(ve,new URL(Ie.url).pathname,Ie.signal,de);if(Kt.type==="aborted")return;if(Kt.type==="error"){ze(de,De,Kt.error,{flushSync:dt});return}else if(Kt.matches)ve=Kt.matches;else{ze(de,De,en(404,{pathname:Le}),{flushSync:dt});return}}let te=yh(ve,Le);if(!te.route.action&&!te.route.lazy){let Kt=en(405,{method:wt.formMethod,pathname:Le,routeId:De});ze(de,De,Kt,{flushSync:dt});return}J.set(de,me);let Z=Ce,Be=Ec(o,c,Ie,ve,te,n,Ze),nt=(await fe(Ie,Be,Ze,de))[te.route.id];if(Ie.signal.aborted){J.get(de)===me&&J.delete(de);return}if(ae.has(de)){if(xl(nt)||Lr(nt)){Re(de,yo(void 0));return}}else{if(xl(nt))if(J.delete(de),Se>Z){Re(de,yo(void 0));return}else return Y.add(de),Re(de,Zd(wt)),ne(Ie,nt,!1,{fetcherSubmission:wt,preventScrollReset:jt});if(Lr(nt)){ze(de,De,nt.error);return}}let ut=I.navigation.location||I.location,Et=Dc(s.history,ut,me.signal),Rt=m||d,Ht=I.navigation.state!=="idle"?bo(Rt,I.navigation.location,h):I.matches;us(Ht,"Didn't find any matches after fetcher action");let ss=++Ce;He.set(de,ss);let Pt=Zd(wt,nt.data);I.fetchers.set(de,Pt);let{dsMatches:ms,revalidatingFetchers:as}=Q0(Et,Ze,o,c,s.history,I,Ht,wt,ut,n,!1,re,le,ae,be,Y,Rt,h,s.patchRoutesOnNavigation!=null,[te.route.id,nt]);as.filter(Kt=>Kt.key!==de).forEach(Kt=>{let js=Kt.key,aa=I.fetchers.get(js),Ci=Zd(void 0,aa?aa.data:void 0);I.fetchers.set(js,Ci),We(js),Kt.controller&&J.set(js,Kt.controller)}),S({fetchers:new Map(I.fetchers)});let ys=()=>as.forEach(Kt=>We(Kt.key));me.signal.addEventListener("abort",ys);let{loaderResults:vs,fetcherResults:Nt}=await ce(ms,as,Et,Ze);if(me.signal.aborted)return;if(me.signal.removeEventListener("abort",ys),He.delete(de),J.delete(de),as.forEach(Kt=>J.delete(Kt.key)),I.fetchers.has(de)){let Kt=yo(nt.data);I.fetchers.set(de,Kt)}let Ct=Jm(vs);if(Ct)return ne(Et,Ct.result,!1,{preventScrollReset:jt});if(Ct=Jm(Nt),Ct)return Y.add(Ct.key),ne(Et,Ct.result,!1,{preventScrollReset:jt});let{loaderData:zt,errors:qt}=ry(I,Ht,vs,void 0,as,Nt);At(ss),I.navigation.state==="loading"&&ss>Se?(us(se,"Expected pending action"),_e&&_e.abort(),k(I.navigation.location,{matches:Ht,loaderData:zt,errors:qt,fetchers:new Map(I.fetchers)})):(S({errors:qt,loaderData:ny(I.loaderData,zt,Ht,qt),fetchers:new Map(I.fetchers)}),re=!1)}async function ue(de,De,Le,ve,Ze,mt,dt,jt,wt){let Tt=I.fetchers.get(de);Re(de,Zd(wt,Tt?Tt.data:void 0),{flushSync:dt});let me=new AbortController,Ie=Dc(s.history,Le,me.signal);if(mt){let ut=await gt(ve,new URL(Ie.url).pathname,Ie.signal,de);if(ut.type==="aborted")return;if(ut.type==="error"){ze(de,De,ut.error,{flushSync:dt});return}else if(ut.matches)ve=ut.matches;else{ze(de,De,en(404,{pathname:Le}),{flushSync:dt});return}}let te=yh(ve,Le);J.set(de,me);let Z=Ce,Be=Ec(o,c,Ie,ve,te,n,Ze),nt=(await fe(Ie,Be,Ze,de))[te.route.id];if(J.get(de)===me&&J.delete(de),!Ie.signal.aborted){if(ae.has(de)){Re(de,yo(void 0));return}if(xl(nt))if(Se>Z){Re(de,yo(void 0));return}else{Y.add(de),await ne(Ie,nt,!1,{preventScrollReset:jt});return}if(Lr(nt)){ze(de,De,nt.error);return}Re(de,yo(nt.data))}}async function ne(de,De,Le,{submission:ve,fetcherSubmission:Ze,preventScrollReset:mt,replace:dt}={}){De.response.headers.has("X-Remix-Revalidate")&&(re=!0);let jt=De.response.headers.get("Location");us(jt,"Expected a Location header on the redirect Response"),jt=sy(jt,new URL(de.url),h);let wt=bu(I.location,jt,{_isRedirect:!0});if(r){let Be=!1;if(De.response.headers.has("X-Remix-Reload-Document"))Be=!0;else if(pg(jt)){const Xe=ev(jt,!0);Be=Xe.origin!==t.location.origin||an(Xe.pathname,h)==null}if(Be){dt?t.location.replace(jt):t.location.assign(jt);return}}_e=null;let Tt=dt===!0||De.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:me,formAction:Ie,formEncType:te}=I.navigation;!ve&&!Ze&&me&&Ie&&te&&(ve=ly(I.navigation));let Z=ve||Ze;if(B2.has(De.response.status)&&Z&&wr(Z.formMethod))await U(Tt,wt,{submission:{...Z,formAction:jt},preventScrollReset:mt||oe,enableViewTransition:Le?he:void 0});else{let Be=Cx(wt,ve);await U(Tt,wt,{overrideNavigation:Be,fetcherSubmission:Ze,preventScrollReset:mt||oe,enableViewTransition:Le?he:void 0})}}async function fe(de,De,Le,ve){let Ze,mt={};try{Ze=await Q2(x,de,De,ve,Le,!1)}catch(dt){return De.filter(jt=>jt.shouldLoad).forEach(jt=>{mt[jt.route.id]={type:"error",error:dt}}),mt}if(de.signal.aborted)return mt;for(let[dt,jt]of Object.entries(Ze))if(iS(jt)){let wt=jt.result;mt[dt]={type:"redirect",response:tS(wt,de,dt,De,h)}}else mt[dt]=await eS(jt);return mt}async function ce(de,De,Le,ve){let Ze=fe(Le,de,ve,null),mt=Promise.all(De.map(async wt=>{if(wt.matches&&wt.match&&wt.request&&wt.controller){let me=(await fe(wt.request,wt.matches,ve,wt.key))[wt.match.route.id];return{[wt.key]:me}}else return Promise.resolve({[wt.key]:{type:"error",error:en(404,{pathname:wt.path})}})})),dt=await Ze,jt=(await mt).reduce((wt,Tt)=>Object.assign(wt,Tt),{});return{loaderResults:dt,fetcherResults:jt}}function Me(){re=!0,be.forEach((de,De)=>{J.has(De)&&le.add(De),We(De)})}function Re(de,De,Le={}){I.fetchers.set(de,De),S({fetchers:new Map(I.fetchers)},{flushSync:(Le&&Le.flushSync)===!0})}function ze(de,De,Le,ve={}){let Ze=vo(I.matches,De);Ve(de),S({errors:{[Ze.route.id]:Le},fetchers:new Map(I.fetchers)},{flushSync:(ve&&ve.flushSync)===!0})}function rt(de){return ye.set(de,(ye.get(de)||0)+1),ae.has(de)&&ae.delete(de),I.fetchers.get(de)||U2}function Ve(de){let De=I.fetchers.get(de);J.has(de)&&!(De&&De.state==="loading"&&He.has(de))&&We(de),be.delete(de),He.delete(de),Y.delete(de),ae.delete(de),le.delete(de),I.fetchers.delete(de)}function Je(de){let De=(ye.get(de)||0)-1;De<=0?(ye.delete(de),ae.add(de)):ye.set(de,De),S({fetchers:new Map(I.fetchers)})}function We(de){let De=J.get(de);De&&(De.abort(),J.delete(de))}function it(de){for(let De of de){let Le=rt(De),ve=yo(Le.data);I.fetchers.set(De,ve)}}function Qe(){let de=[],De=!1;for(let Le of Y){let ve=I.fetchers.get(Le);us(ve,`Expected fetcher: ${Le}`),ve.state==="loading"&&(Y.delete(Le),de.push(Le),De=!0)}return it(de),De}function At(de){let De=[];for(let[Le,ve]of He)if(ve<de){let Ze=I.fetchers.get(Le);us(Ze,`Expected fetcher: ${Le}`),Ze.state==="loading"&&(We(Le),He.delete(Le),De.push(Le))}return it(De),De.length>0}function xt(de,De){let Le=I.blockers.get(de)||Qd;return Ne.get(de)!==De&&Ne.set(de,De),Le}function Te(de){I.blockers.delete(de),Ne.delete(de)}function Ke(de,De){let Le=I.blockers.get(de)||Qd;us(Le.state==="unblocked"&&De.state==="blocked"||Le.state==="blocked"&&De.state==="blocked"||Le.state==="blocked"&&De.state==="proceeding"||Le.state==="blocked"&&De.state==="unblocked"||Le.state==="proceeding"&&De.state==="unblocked",`Invalid blocker state transition: ${Le.state} -> ${De.state}`);let ve=new Map(I.blockers);ve.set(de,De),S({blockers:ve})}function Pe({currentLocation:de,nextLocation:De,historyAction:Le}){if(Ne.size===0)return;Ne.size>1&&sa(!1,"A router only supports one blocker at a time");let ve=Array.from(Ne.entries()),[Ze,mt]=ve[ve.length-1],dt=I.blockers.get(Ze);if(!(dt&&dt.state==="proceeding")&&mt({currentLocation:de,nextLocation:De,historyAction:Le}))return Ze}function qe(de){let De=en(404,{pathname:de}),Le=m||d,{matches:ve,route:Ze}=Zm(Le);return{notFoundMatches:ve,route:Ze,error:De}}function ft(de,De,Le){if(_=de,L=De,D=Le||null,!B&&I.navigation===Sx){B=!0;let ve=ke(I.location,I.matches);ve!=null&&S({restoreScrollPosition:ve})}return()=>{_=null,L=null,D=null}}function ot(de,De){return D&&D(de,De.map(ve=>p2(ve,I.loaderData)))||de.key}function pt(de,De){if(_&&L){let Le=ot(de,De);_[Le]=L()}}function ke(de,De){if(_){let Le=ot(de,De),ve=_[Le];if(typeof ve=="number")return ve}return null}function st(de,De,Le){if(s.patchRoutesOnNavigation)if(de){if(Object.keys(de[0].params).length>0)return{active:!0,matches:ph(De,Le,h,!0)}}else return{active:!0,matches:ph(De,Le,h,!0)||[]};return{active:!1,matches:null}}async function gt(de,De,Le,ve){if(!s.patchRoutesOnNavigation)return{type:"success",matches:de};let Ze=de;for(;;){let mt=m==null,dt=m||d,jt=c;try{await s.patchRoutesOnNavigation({signal:Le,path:De,matches:Ze,fetcherKey:ve,patch:(me,Ie)=>{Le.aborted||Z0(me,Ie,dt,jt,o,!1)}})}catch(me){return{type:"error",error:me,partialMatches:Ze}}finally{mt&&!Le.aborted&&(d=[...d])}if(Le.aborted)return{type:"aborted"};let wt=bo(dt,De,h);if(wt)return{type:"success",matches:wt};let Tt=ph(dt,De,h,!0);if(!Tt||Ze.length===Tt.length&&Ze.every((me,Ie)=>me.route.id===Tt[Ie].route.id))return{type:"success",matches:null};Ze=Tt}}function kt(de){c={},m=vu(de,o,void 0,c)}function Mt(de,De,Le=!1){let ve=m==null;Z0(de,De,m||d,c,o,Le),ve&&(d=[...d],S({}))}return T={get basename(){return h},get future(){return p},get state(){return I},get routes(){return d},get window(){return t},initialize:P,subscribe:g,enableScrollRestoration:ft,navigate:C,fetch:M,revalidate:O,createHref:de=>s.history.createHref(de),encodeLocation:de=>s.history.encodeLocation(de),getFetcher:rt,deleteFetcher:Je,dispose:f,getBlocker:xt,deleteBlocker:Te,patchRoutes:Mt,_internalFetchControllers:J,_internalSetRoutes:kt,_internalSetStateDoNotUseOrYouWillBreakYourApp(de){S(de)}},T}function q2(s){return s!=null&&("formData"in s&&s.formData!=null||"body"in s&&s.body!==void 0)}function Kx(s,t,r,n,o,c){let d,m;if(o){d=[];for(let x of t)if(d.push(x),x.route.id===o){m=x;break}}else d=t,m=t[t.length-1];let h=gg(n||".",xg(d),an(s.pathname,r)||s.pathname,c==="path");if(n==null&&(h.search=s.search,h.hash=s.hash),(n==null||n===""||n===".")&&m){let x=yg(h.search);if(m.route.index&&!x)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!m.route.index&&x){let p=new URLSearchParams(h.search),w=p.getAll("index");p.delete("index"),w.filter(_=>_).forEach(_=>p.append("index",_));let N=p.toString();h.search=N?`?${N}`:""}}return r!=="/"&&(h.pathname=E2({basename:r,pathname:h.pathname})),_o(h)}function X0(s,t,r){if(!r||!q2(r))return{path:t};if(r.formMethod&&!oS(r.formMethod))return{path:t,error:en(405,{method:r.formMethod})};let n=()=>({path:t,error:en(400,{type:"invalid-body"})}),c=(r.formMethod||"get").toUpperCase(),d=mv(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!wr(c))return n();let w=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((N,[_,D])=>`${N}${_}=${D}
`,""):String(r.body);return{path:t,submission:{formMethod:c,formAction:d,formEncType:r.formEncType,formData:void 0,json:void 0,text:w}}}else if(r.formEncType==="application/json"){if(!wr(c))return n();try{let w=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:c,formAction:d,formEncType:r.formEncType,formData:void 0,json:w,text:void 0}}}catch{return n()}}}us(typeof FormData=="function","FormData is not available in this environment");let m,h;if(r.formData)m=Wx(r.formData),h=r.formData;else if(r.body instanceof FormData)m=Wx(r.body),h=r.body;else if(r.body instanceof URLSearchParams)m=r.body,h=ay(m);else if(r.body==null)m=new URLSearchParams,h=new FormData;else try{m=new URLSearchParams(r.body),h=ay(m)}catch{return n()}let x={formMethod:c,formAction:d,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(wr(x.formMethod))return{path:t,submission:x};let p=wi(t);return s&&p.search&&yg(p.search)&&m.append("index",""),p.search=`?${m}`,{path:_o(p),submission:x}}function Q0(s,t,r,n,o,c,d,m,h,x,p,w,N,_,D,L,B,z,q,R){let F=R?Lr(R[1])?R[1].error:R[1].data:void 0,T=o.createURL(c.location),I=o.createURL(h),se;if(p&&c.errors){let Ae=Object.keys(c.errors)[0];se=d.findIndex(re=>re.route.id===Ae)}else if(R&&Lr(R[1])){let Ae=R[0];se=d.findIndex(re=>re.route.id===Ae)-1}let oe=R?R[1].statusCode:void 0,_e=oe&&oe>=400,he={currentUrl:T,currentParams:c.matches[0]?.params||{},nextUrl:I,nextParams:d[0].params,...m,actionResult:F,actionStatus:oe},ie=d.map((Ae,re)=>{let{route:le}=Ae,J=null;if(se!=null&&re>se?J=!1:le.lazy?J=!0:le.loader==null?J=!1:p?J=Yx(le,c.loaderData,c.errors):K2(c.loaderData,c.matches[re],Ae)&&(J=!0),J!==null)return Gx(r,n,s,Ae,x,t,J);let Ce=_e?!1:w||T.pathname+T.search===I.pathname+I.search||T.search!==I.search||Y2(c.matches[re],Ae),Se={...he,defaultShouldRevalidate:Ce},He=Th(Ae,Se);return Gx(r,n,s,Ae,x,t,He,Se)}),Ee=[];return D.forEach((Ae,re)=>{if(p||!d.some(ye=>ye.route.id===Ae.routeId)||_.has(re))return;let le=c.fetchers.get(re),J=le&&le.state!=="idle"&&le.data===void 0,Ce=bo(B,Ae.path,z);if(!Ce){if(q&&J)return;Ee.push({key:re,routeId:Ae.routeId,path:Ae.path,matches:null,match:null,request:null,controller:null});return}if(L.has(re))return;let Se=yh(Ce,Ae.path),He=new AbortController,Y=Dc(o,Ae.path,He.signal),be=null;if(N.has(re))N.delete(re),be=Ec(r,n,Y,Ce,Se,x,t);else if(J)w&&(be=Ec(r,n,Y,Ce,Se,x,t));else{let ye={...he,defaultShouldRevalidate:_e?!1:w};Th(Se,ye)&&(be=Ec(r,n,Y,Ce,Se,x,t,ye))}be&&Ee.push({key:re,routeId:Ae.routeId,path:Ae.path,matches:be,match:Se,request:Y,controller:He})}),{dsMatches:ie,revalidatingFetchers:Ee}}function Yx(s,t,r){if(s.lazy)return!0;if(!s.loader)return!1;let n=t!=null&&s.id in t,o=r!=null&&r[s.id]!==void 0;return!n&&o?!1:typeof s.loader=="function"&&s.loader.hydrate===!0?!0:!n&&!o}function K2(s,t,r){let n=!t||r.route.id!==t.route.id,o=!s.hasOwnProperty(r.route.id);return n||o}function Y2(s,t){let r=s.route.path;return s.pathname!==t.pathname||r!=null&&r.endsWith("*")&&s.params["*"]!==t.params["*"]}function Th(s,t){if(s.route.shouldRevalidate){let r=s.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function Z0(s,t,r,n,o,c){let d;if(s){let x=n[s];us(x,`No route found to patch children into: routeId = ${s}`),x.children||(x.children=[]),d=x.children}else d=r;let m=[],h=[];if(t.forEach(x=>{let p=d.find(w=>ov(x,w));p?h.push({existingRoute:p,newRoute:x}):m.push(x)}),m.length>0){let x=vu(m,o,[s||"_","patch",String(d?.length||"0")],n);d.push(...x)}if(c&&h.length>0)for(let x=0;x<h.length;x++){let{existingRoute:p,newRoute:w}=h[x],N=p,[_]=vu([w],o,[],{},!0);Object.assign(N,{element:_.element?_.element:N.element,errorElement:_.errorElement?_.errorElement:N.errorElement,hydrateFallbackElement:_.hydrateFallbackElement?_.hydrateFallbackElement:N.hydrateFallbackElement})}}function ov(s,t){return"id"in s&&"id"in t&&s.id===t.id?!0:s.index===t.index&&s.path===t.path&&s.caseSensitive===t.caseSensitive?(!s.children||s.children.length===0)&&(!t.children||t.children.length===0)?!0:s.children.every((r,n)=>t.children?.some(o=>ov(r,o))):!1}var J0=new WeakMap,lv=({key:s,route:t,manifest:r,mapRouteProperties:n})=>{let o=r[t.id];if(us(o,"No route found in manifest"),!o.lazy||typeof o.lazy!="object")return;let c=o.lazy[s];if(!c)return;let d=J0.get(o);d||(d={},J0.set(o,d));let m=d[s];if(m)return m;let h=(async()=>{let x=h2(s),w=o[s]!==void 0&&s!=="hasErrorBoundary";if(x)sa(!x,"Route property "+s+" is not a supported lazy route property. This property will be ignored."),d[s]=Promise.resolve();else if(w)sa(!1,`Route "${o.id}" has a static property "${s}" defined. The lazy property will be ignored.`);else{let N=await c();N!=null&&(Object.assign(o,{[s]:N}),Object.assign(o,n(o)))}typeof o.lazy=="object"&&(o.lazy[s]=void 0,Object.values(o.lazy).every(N=>N===void 0)&&(o.lazy=void 0))})();return d[s]=h,h},ey=new WeakMap;function G2(s,t,r,n,o){let c=r[s.id];if(us(c,"No route found in manifest"),!s.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof s.lazy=="function"){let p=ey.get(c);if(p)return{lazyRoutePromise:p,lazyHandlerPromise:p};let w=(async()=>{us(typeof s.lazy=="function","No lazy route function found");let N=await s.lazy(),_={};for(let D in N){let L=N[D];if(L===void 0)continue;let B=x2(D),q=c[D]!==void 0&&D!=="hasErrorBoundary";B?sa(!B,"Route property "+D+" is not a supported property to be returned from a lazy route function. This property will be ignored."):q?sa(!q,`Route "${c.id}" has a static property "${D}" defined but its lazy function is also returning a value for this property. The lazy route property "${D}" will be ignored.`):_[D]=L}Object.assign(c,_),Object.assign(c,{...n(c),lazy:void 0})})();return ey.set(c,w),w.catch(()=>{}),{lazyRoutePromise:w,lazyHandlerPromise:w}}let d=Object.keys(s.lazy),m=[],h;for(let p of d){if(o&&o.includes(p))continue;let w=lv({key:p,route:s,manifest:r,mapRouteProperties:n});w&&(m.push(w),p===t&&(h=w))}let x=m.length>0?Promise.all(m).then(()=>{}):void 0;return x?.catch(()=>{}),h?.catch(()=>{}),{lazyRoutePromise:x,lazyHandlerPromise:h}}async function ty(s){let t=s.matches.filter(o=>o.shouldLoad),r={};return(await Promise.all(t.map(o=>o.resolve()))).forEach((o,c)=>{r[t[c].route.id]=o}),r}async function W2(s){return s.matches.some(t=>t.route.middleware)?cv(s,()=>ty(s)):ty(s)}function cv(s,t){return X2(s,t,n=>n,rS,r);function r(n,o,c){if(c)return Promise.resolve(Object.assign(c.value,{[o]:{type:"error",result:n}}));{let{matches:d}=s,m=Math.min(d.findIndex(x=>x.route.id===o)||0,d.findIndex(x=>x.unstable_shouldCallHandler())||0),h=vo(d,d[m].route.id).route.id;return Promise.resolve({[h]:{type:"error",result:n}})}}}async function X2(s,t,r,n,o){let{matches:c,request:d,params:m,context:h}=s,x=c.flatMap(w=>w.route.middleware?w.route.middleware.map(N=>[w.route.id,N]):[]);return await dv({request:d,params:m,context:h},x,t,r,n,o)}async function dv(s,t,r,n,o,c,d=0){let{request:m}=s;if(m.signal.aborted)throw m.signal.reason??new Error(`Request aborted: ${m.method} ${m.url}`);let h=t[d];if(!h)return await r();let[x,p]=h,w,N=async()=>{if(w)throw new Error("You may only call `next()` once per middleware");try{return w={value:await dv(s,t,r,n,o,c,d+1)},w.value}catch(_){return w={value:await c(_,x,w)},w.value}};try{let _=await p(s,N),D=_!=null?n(_):void 0;return o(D)?D:w?D??w.value:(w={value:await N()},w.value)}catch(_){return await c(_,x,w)}}function uv(s,t,r,n,o){let c=lv({key:"middleware",route:n.route,manifest:t,mapRouteProperties:s}),d=G2(n.route,wr(r.method)?"action":"loader",t,s,o);return{middleware:c,route:d.lazyRoutePromise,handler:d.lazyHandlerPromise}}function Gx(s,t,r,n,o,c,d,m=null){let h=!1,x=uv(s,t,r,n,o);return{...n,_lazyPromises:x,shouldLoad:d,unstable_shouldRevalidateArgs:m,unstable_shouldCallHandler(p){return h=!0,m?typeof p=="boolean"?Th(n,{...m,defaultShouldRevalidate:p}):Th(n,m):d},resolve(p){return h||d||p&&!wr(r.method)&&(n.route.lazy||n.route.loader)?Z2({request:r,match:n,lazyHandlerPromise:x?.handler,lazyRoutePromise:x?.route,handlerOverride:p,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function Ec(s,t,r,n,o,c,d,m=null){return n.map(h=>h.route.id!==o.route.id?{...h,shouldLoad:!1,unstable_shouldRevalidateArgs:m,unstable_shouldCallHandler:()=>!1,_lazyPromises:uv(s,t,r,h,c),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Gx(s,t,r,h,c,d,!0,m))}async function Q2(s,t,r,n,o,c){r.some(x=>x._lazyPromises?.middleware)&&await Promise.all(r.map(x=>x._lazyPromises?.middleware));let d={request:t,params:r[0].params,context:o,matches:r},h=await s({...d,fetcherKey:n,runClientMiddleware:x=>{let p=d;return cv(p,()=>x({...p,fetcherKey:n,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(r.flatMap(x=>[x._lazyPromises?.handler,x._lazyPromises?.route]))}catch{}return h}async function Z2({request:s,match:t,lazyHandlerPromise:r,lazyRoutePromise:n,handlerOverride:o,scopedContext:c}){let d,m,h=wr(s.method),x=h?"action":"loader",p=w=>{let N,_=new Promise((B,z)=>N=z);m=()=>N(),s.signal.addEventListener("abort",m);let D=B=>typeof w!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${x}" [routeId: ${t.route.id}]`)):w({request:s,params:t.params,context:c},...B!==void 0?[B]:[]),L=(async()=>{try{return{type:"data",result:await(o?o(z=>D(z)):D())}}catch(B){return{type:"error",result:B}}})();return Promise.race([L,_])};try{let w=h?t.route.action:t.route.loader;if(r||n)if(w){let N,[_]=await Promise.all([p(w).catch(D=>{N=D}),r,n]);if(N!==void 0)throw N;d=_}else{await r;let N=h?t.route.action:t.route.loader;if(N)[d]=await Promise.all([p(N),n]);else if(x==="action"){let _=new URL(s.url),D=_.pathname+_.search;throw en(405,{method:s.method,pathname:D,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(w)d=await p(w);else{let N=new URL(s.url),_=N.pathname+N.search;throw en(404,{pathname:_})}}catch(w){return{type:"error",result:w}}finally{m&&s.signal.removeEventListener("abort",m)}return d}async function J2(s){let t=s.headers.get("Content-Type");return t&&/\bapplication\/json\b/.test(t)?s.body==null?null:s.json():s.text()}async function eS(s){let{result:t,type:r}=s;if(hv(t)){let n;try{n=await J2(t)}catch(o){return{type:"error",error:o}}return r==="error"?{type:"error",error:new Eh(t.status,t.statusText,n),statusCode:t.status,headers:t.headers}:{type:"data",data:n,statusCode:t.status,headers:t.headers}}return r==="error"?oy(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new Eh(t.init?.status||500,void 0,t.data),statusCode:ju(t)?t.status:void 0,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:ju(t)?t.status:void 0}:oy(t)?{type:"data",data:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function tS(s,t,r,n,o){let c=s.headers.get("Location");if(us(c,"Redirects returned/thrown from loaders/actions must have a Location header"),!pg(c)){let d=n.slice(0,n.findIndex(m=>m.route.id===r)+1);c=Kx(new URL(t.url),d,o,c),s.headers.set("Location",c)}return s}function sy(s,t,r){if(pg(s)){let n=s,o=n.startsWith("//")?new URL(t.protocol+n):new URL(n),c=an(o.pathname,r)!=null;if(o.origin===t.origin&&c)return o.pathname+o.search+o.hash}return s}function Dc(s,t,r,n){let o=s.createURL(mv(t)).toString(),c={signal:r};if(n&&wr(n.formMethod)){let{formMethod:d,formEncType:m}=n;c.method=d.toUpperCase(),m==="application/json"?(c.headers=new Headers({"Content-Type":m}),c.body=JSON.stringify(n.json)):m==="text/plain"?c.body=n.text:m==="application/x-www-form-urlencoded"&&n.formData?c.body=Wx(n.formData):c.body=n.formData}return new Request(o,c)}function Wx(s){let t=new URLSearchParams;for(let[r,n]of s.entries())t.append(r,typeof n=="string"?n:n.name);return t}function ay(s){let t=new FormData;for(let[r,n]of s.entries())t.append(r,n);return t}function sS(s,t,r,n=!1,o=!1){let c={},d=null,m,h=!1,x={},p=r&&Lr(r[1])?r[1].error:void 0;return s.forEach(w=>{if(!(w.route.id in t))return;let N=w.route.id,_=t[N];if(us(!xl(_),"Cannot handle redirect results in processLoaderData"),Lr(_)){let D=_.error;if(p!==void 0&&(D=p,p=void 0),d=d||{},o)d[N]=D;else{let L=vo(s,N);d[L.route.id]==null&&(d[L.route.id]=D)}n||(c[N]=iv),h||(h=!0,m=ju(_.error)?_.error.status:500),_.headers&&(x[N]=_.headers)}else c[N]=_.data,_.statusCode&&_.statusCode!==200&&!h&&(m=_.statusCode),_.headers&&(x[N]=_.headers)}),p!==void 0&&r&&(d={[r[0]]:p},r[2]&&(c[r[2]]=void 0)),{loaderData:c,errors:d,statusCode:m||200,loaderHeaders:x}}function ry(s,t,r,n,o,c){let{loaderData:d,errors:m}=sS(t,r,n);return o.filter(h=>!h.matches||h.matches.some(x=>x.shouldLoad)).forEach(h=>{let{key:x,match:p,controller:w}=h;if(w&&w.signal.aborted)return;let N=c[x];if(us(N,"Did not find corresponding fetcher result"),Lr(N)){let _=vo(s.matches,p?.route.id);m&&m[_.route.id]||(m={...m,[_.route.id]:N.error}),s.fetchers.delete(x)}else if(xl(N))us(!1,"Unhandled fetcher revalidation redirect");else{let _=yo(N.data);s.fetchers.set(x,_)}}),{loaderData:d,errors:m}}function ny(s,t,r,n){let o=Object.entries(t).filter(([,c])=>c!==iv).reduce((c,[d,m])=>(c[d]=m,c),{});for(let c of r){let d=c.route.id;if(!t.hasOwnProperty(d)&&s.hasOwnProperty(d)&&c.route.loader&&(o[d]=s[d]),n&&n.hasOwnProperty(d))break}return o}function iy(s){return s?Lr(s[1])?{actionData:{}}:{actionData:{[s[0]]:s[1].data}}:{}}function vo(s,t){return(t?s.slice(0,s.findIndex(n=>n.route.id===t)+1):[...s]).reverse().find(n=>n.route.hasErrorBoundary===!0)||s[0]}function Zm(s){let t=s.length===1?s[0]:s.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function en(s,{pathname:t,routeId:r,method:n,type:o,message:c}={}){let d="Unknown Server Error",m="Unknown @remix-run/router error";return s===400?(d="Bad Request",n&&t&&r?m=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:o==="invalid-body"&&(m="Unable to encode submission body")):s===403?(d="Forbidden",m=`Route "${r}" does not match URL "${t}"`):s===404?(d="Not Found",m=`No route matches URL "${t}"`):s===405&&(d="Method Not Allowed",n&&t&&r?m=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(m=`Invalid request method "${n.toUpperCase()}"`)),new Eh(s||500,d,new Error(m),!0)}function Jm(s){let t=Object.entries(s);for(let r=t.length-1;r>=0;r--){let[n,o]=t[r];if(xl(o))return{key:n,result:o}}}function mv(s){let t=typeof s=="string"?wi(s):s;return _o({...t,hash:""})}function aS(s,t){return s.pathname!==t.pathname||s.search!==t.search?!1:s.hash===""?t.hash!=="":s.hash===t.hash?!0:t.hash!==""}function rS(s){return s!=null&&typeof s=="object"&&Object.entries(s).every(([t,r])=>typeof t=="string"&&nS(r))}function nS(s){return s!=null&&typeof s=="object"&&"type"in s&&"result"in s&&(s.type==="data"||s.type==="error")}function iS(s){return hv(s.result)&&L2.has(s.result.status)}function Lr(s){return s.type==="error"}function xl(s){return(s&&s.type)==="redirect"}function oy(s){return typeof s=="object"&&s!=null&&"type"in s&&"data"in s&&"init"in s&&s.type==="DataWithResponseInit"}function hv(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.headers=="object"&&typeof s.body<"u"}function oS(s){return F2.has(s.toUpperCase())}function wr(s){return z2.has(s.toUpperCase())}function yg(s){return new URLSearchParams(s).getAll("index").some(t=>t==="")}function yh(s,t){let r=typeof t=="string"?wi(t).search:t.search;if(s[s.length-1].route.index&&yg(r||""))return s[s.length-1];let n=av(s);return n[n.length-1]}function ly(s){let{formMethod:t,formAction:r,formEncType:n,text:o,formData:c,json:d}=s;if(!(!t||!r||!n)){if(o!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:o};if(c!=null)return{formMethod:t,formAction:r,formEncType:n,formData:c,json:void 0,text:void 0};if(d!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:d,text:void 0}}}function Cx(s,t){return t?{state:"loading",location:s,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:s,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function lS(s,t){return{state:"submitting",location:s,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Zd(s,t){return s?{state:"loading",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function cS(s,t){return{state:"submitting",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:t?t.data:void 0}}function yo(s){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}function dS(s,t){try{let r=s.sessionStorage.getItem(nv);if(r){let n=JSON.parse(r);for(let[o,c]of Object.entries(n||{}))c&&Array.isArray(c)&&t.set(o,new Set(c||[]))}}catch{}}function uS(s,t){if(t.size>0){let r={};for(let[n,o]of t)r[n]=[...o];try{s.sessionStorage.setItem(nv,JSON.stringify(r))}catch(n){sa(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function mS(){let s,t,r=new Promise((n,o)=>{s=async c=>{n(c);try{await r}catch{}},t=async c=>{o(c);try{await r}catch{}}});return{promise:r,resolve:s,reject:t}}var Nl=v.createContext(null);Nl.displayName="DataRouter";var Tu=v.createContext(null);Tu.displayName="DataRouterState";v.createContext(!1);var bg=v.createContext({isTransitioning:!1});bg.displayName="ViewTransition";var fv=v.createContext(new Map);fv.displayName="Fetchers";var hS=v.createContext(null);hS.displayName="Await";var Gn=v.createContext(null);Gn.displayName="Navigation";var qh=v.createContext(null);qh.displayName="Location";var wn=v.createContext({outlet:null,matches:[],isDataRoute:!1});wn.displayName="Route";var vg=v.createContext(null);vg.displayName="RouteError";function fS(s,{relative:t}={}){us(Mu(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(Gn),{hash:o,pathname:c,search:d}=Ou(s,{relative:t}),m=c;return r!=="/"&&(m=c==="/"?r:Kn([r,c])),n.createHref({pathname:m,search:d,hash:o})}function Mu(){return v.useContext(qh)!=null}function nn(){return us(Mu(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(qh).location}var xv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gv(s){v.useContext(Gn).static||v.useLayoutEffect(s)}function ka(){let{isDataRoute:s}=v.useContext(wn);return s?ES():xS()}function xS(){us(Mu(),"useNavigate() may be used only in the context of a <Router> component.");let s=v.useContext(Nl),{basename:t,navigator:r}=v.useContext(Gn),{matches:n}=v.useContext(wn),{pathname:o}=nn(),c=JSON.stringify(xg(n)),d=v.useRef(!1);return gv(()=>{d.current=!0}),v.useCallback((h,x={})=>{if(sa(d.current,xv),!d.current)return;if(typeof h=="number"){r.go(h);return}let p=gg(h,JSON.parse(c),o,x.relative==="path");s==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Kn([t,p.pathname])),(x.replace?r.replace:r.push)(p,x.state,x)},[t,r,c,o,s])}var pv=v.createContext(null);function gS(){return v.useContext(pv)}function pS(s){let t=v.useContext(wn).outlet;return t&&v.createElement(pv.Provider,{value:s},t)}function yS(){let{matches:s}=v.useContext(wn),t=s[s.length-1];return t?t.params:{}}function Ou(s,{relative:t}={}){let{matches:r}=v.useContext(wn),{pathname:n}=nn(),o=JSON.stringify(xg(r));return v.useMemo(()=>gg(s,JSON.parse(o),n,t==="path"),[s,o,n,t])}function bS(s,t,r,n,o){us(Mu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=v.useContext(Gn),{matches:d}=v.useContext(wn),m=d[d.length-1],h=m?m.params:{},x=m?m.pathname:"/",p=m?m.pathnameBase:"/",w=m&&m.route;{let q=w&&w.path||"";yv(x,!w||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let N=nn(),_;_=N;let D=_.pathname||"/",L=D;if(p!=="/"){let q=p.replace(/^\//,"").split("/");L="/"+D.replace(/^\//,"").split("/").slice(q.length).join("/")}let B=bo(s,{pathname:L});return sa(w||B!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),sa(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),SS(B&&B.map(q=>Object.assign({},q,{params:Object.assign({},h,q.params),pathname:Kn([p,c.encodeLocation?c.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?p:Kn([p,c.encodeLocation?c.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),d,r,n,o)}function vS(){let s=DS(),t=ju(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n},c={padding:"2px 4px",backgroundColor:n},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:c},"ErrorBoundary")," or"," ",v.createElement("code",{style:c},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:o},r):null,d)}var jS=v.createElement(vS,null),wS=class extends v.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){this.props.unstable_onError?this.props.unstable_onError(s,t):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?v.createElement(wn.Provider,{value:this.props.routeContext},v.createElement(vg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function NS({routeContext:s,match:t,children:r}){let n=v.useContext(Nl);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(wn.Provider,{value:s},r)}function SS(s,t=[],r=null,n=null,o=null){if(s==null){if(!r)return null;if(r.errors)s=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let c=s,d=r?.errors;if(d!=null){let x=c.findIndex(p=>p.route.id&&d?.[p.route.id]!==void 0);us(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,x+1))}let m=!1,h=-1;if(r)for(let x=0;x<c.length;x++){let p=c[x];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=x),p.route.id){let{loaderData:w,errors:N}=r,_=p.route.loader&&!w.hasOwnProperty(p.route.id)&&(!N||N[p.route.id]===void 0);if(p.route.lazy||_){m=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((x,p,w)=>{let N,_=!1,D=null,L=null;r&&(N=d&&p.route.id?d[p.route.id]:void 0,D=p.route.errorElement||jS,m&&(h<0&&w===0?(yv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,L=null):h===w&&(_=!0,L=p.route.hydrateFallbackElement||null)));let B=t.concat(c.slice(0,w+1)),z=()=>{let q;return N?q=D:_?q=L:p.route.Component?q=v.createElement(p.route.Component,null):p.route.element?q=p.route.element:q=x,v.createElement(NS,{match:p,routeContext:{outlet:x,matches:B,isDataRoute:r!=null},children:q})};return r&&(p.route.ErrorBoundary||p.route.errorElement||w===0)?v.createElement(wS,{location:r.location,revalidation:r.revalidation,component:D,error:N,children:z(),routeContext:{outlet:null,matches:B,isDataRoute:!0},unstable_onError:n}):z()},null)}function jg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CS(s){let t=v.useContext(Nl);return us(t,jg(s)),t}function kS(s){let t=v.useContext(Tu);return us(t,jg(s)),t}function _S(s){let t=v.useContext(wn);return us(t,jg(s)),t}function wg(s){let t=_S(s),r=t.matches[t.matches.length-1];return us(r.route.id,`${s} can only be used on routes that contain a unique "id"`),r.route.id}function AS(){return wg("useRouteId")}function DS(){let s=v.useContext(vg),t=kS("useRouteError"),r=wg("useRouteError");return s!==void 0?s:t.errors?.[r]}function ES(){let{router:s}=CS("useNavigate"),t=wg("useNavigate"),r=v.useRef(!1);return gv(()=>{r.current=!0}),v.useCallback(async(o,c={})=>{sa(r.current,xv),r.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:t,...c}))},[s,t])}var cy={};function yv(s,t,r){!t&&!cy[s]&&(cy[s]=!0,sa(!1,r))}var dy={};function uy(s,t){!s&&!dy[t]&&(dy[t]=!0,console.warn(t))}function TS(s){let t={hasErrorBoundary:s.hasErrorBoundary||s.ErrorBoundary!=null||s.errorElement!=null};return s.Component&&(s.element&&sa(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:v.createElement(s.Component),Component:void 0})),s.HydrateFallback&&(s.hydrateFallbackElement&&sa(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:v.createElement(s.HydrateFallback),HydrateFallback:void 0})),s.ErrorBoundary&&(s.errorElement&&sa(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:v.createElement(s.ErrorBoundary),ErrorBoundary:void 0})),t}var MS=["HydrateFallback","hydrateFallbackElement"],OS=class{constructor(){this.status="pending",this.promise=new Promise((s,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",s(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function RS({router:s,flushSync:t,unstable_onError:r}){let[n,o]=v.useState(s.state),[c,d]=v.useState(),[m,h]=v.useState({isTransitioning:!1}),[x,p]=v.useState(),[w,N]=v.useState(),[_,D]=v.useState(),L=v.useRef(new Map),B=v.useCallback(T=>{o(I=>(T.errors&&r&&Object.entries(T.errors).forEach(([se,oe])=>{I.errors?.[se]!==oe&&r(oe)}),T))},[r]),z=v.useCallback((T,{deletedFetchers:I,flushSync:se,viewTransitionOpts:oe})=>{T.fetchers.forEach((he,ie)=>{he.data!==void 0&&L.current.set(ie,he.data)}),I.forEach(he=>L.current.delete(he)),uy(se===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let _e=s.window!=null&&s.window.document!=null&&typeof s.window.document.startViewTransition=="function";if(uy(oe==null||_e,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!oe||!_e){t&&se?t(()=>B(T)):v.startTransition(()=>B(T));return}if(t&&se){t(()=>{w&&(x&&x.resolve(),w.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:oe.currentLocation,nextLocation:oe.nextLocation})});let he=s.window.document.startViewTransition(()=>{t(()=>B(T))});he.finished.finally(()=>{t(()=>{p(void 0),N(void 0),d(void 0),h({isTransitioning:!1})})}),t(()=>N(he));return}w?(x&&x.resolve(),w.skipTransition(),D({state:T,currentLocation:oe.currentLocation,nextLocation:oe.nextLocation})):(d(T),h({isTransitioning:!0,flushSync:!1,currentLocation:oe.currentLocation,nextLocation:oe.nextLocation}))},[s.window,t,w,x,B]);v.useLayoutEffect(()=>s.subscribe(z),[s,z]),v.useEffect(()=>{m.isTransitioning&&!m.flushSync&&p(new OS)},[m]),v.useEffect(()=>{if(x&&c&&s.window){let T=c,I=x.promise,se=s.window.document.startViewTransition(async()=>{v.startTransition(()=>B(T)),await I});se.finished.finally(()=>{p(void 0),N(void 0),d(void 0),h({isTransitioning:!1})}),N(se)}},[c,x,s.window,B]),v.useEffect(()=>{x&&c&&n.location.key===c.location.key&&x.resolve()},[x,w,n.location,c]),v.useEffect(()=>{!m.isTransitioning&&_&&(d(_.state),h({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}),D(void 0))},[m.isTransitioning,_]);let q=v.useMemo(()=>({createHref:s.createHref,encodeLocation:s.encodeLocation,go:T=>s.navigate(T),push:(T,I,se)=>s.navigate(T,{state:I,preventScrollReset:se?.preventScrollReset}),replace:(T,I,se)=>s.navigate(T,{replace:!0,state:I,preventScrollReset:se?.preventScrollReset})}),[s]),R=s.basename||"/",F=v.useMemo(()=>({router:s,navigator:q,static:!1,basename:R,unstable_onError:r}),[s,q,R,r]);return v.createElement(v.Fragment,null,v.createElement(Nl.Provider,{value:F},v.createElement(Tu.Provider,{value:n},v.createElement(fv.Provider,{value:L.current},v.createElement(bg.Provider,{value:m},v.createElement(PS,{basename:R,location:n.location,navigationType:n.historyAction,navigator:q},v.createElement(IS,{routes:s.routes,future:s.future,state:n,unstable_onError:r})))))),null)}var IS=v.memo(zS);function zS({routes:s,future:t,state:r,unstable_onError:n}){return bS(s,void 0,r,n,t)}function bv(s){return pS(s.context)}function PS({basename:s="/",children:t=null,location:r,navigationType:n="POP",navigator:o,static:c=!1}){us(!Mu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),m=v.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof r=="string"&&(r=wi(r));let{pathname:h="/",search:x="",hash:p="",state:w=null,key:N="default"}=r,_=v.useMemo(()=>{let D=an(h,d);return D==null?null:{location:{pathname:D,search:x,hash:p,state:w,key:N},navigationType:n}},[d,h,x,p,w,N,n]);return sa(_!=null,`<Router basename="${d}"> is not able to match the URL "${h}${x}${p}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:v.createElement(Gn.Provider,{value:m},v.createElement(qh.Provider,{children:t,value:_}))}var bh="get",vh="application/x-www-form-urlencoded";function Kh(s){return s!=null&&typeof s.tagName=="string"}function FS(s){return Kh(s)&&s.tagName.toLowerCase()==="button"}function LS(s){return Kh(s)&&s.tagName.toLowerCase()==="form"}function BS(s){return Kh(s)&&s.tagName.toLowerCase()==="input"}function US(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function $S(s,t){return s.button===0&&(!t||t==="_self")&&!US(s)}var eh=null;function HS(){if(eh===null)try{new FormData(document.createElement("form"),0),eh=!1}catch{eh=!0}return eh}var VS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kx(s){return s!=null&&!VS.has(s)?(sa(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vh}"`),null):s}function qS(s,t){let r,n,o,c,d;if(LS(s)){let m=s.getAttribute("action");n=m?an(m,t):null,r=s.getAttribute("method")||bh,o=kx(s.getAttribute("enctype"))||vh,c=new FormData(s)}else if(FS(s)||BS(s)&&(s.type==="submit"||s.type==="image")){let m=s.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=s.getAttribute("formaction")||m.getAttribute("action");if(n=h?an(h,t):null,r=s.getAttribute("formmethod")||m.getAttribute("method")||bh,o=kx(s.getAttribute("formenctype"))||kx(m.getAttribute("enctype"))||vh,c=new FormData(m,s),!HS()){let{name:x,type:p,value:w}=s;if(p==="image"){let N=x?`${x}.`:"";c.append(`${N}x`,"0"),c.append(`${N}y`,"0")}else x&&c.append(x,w)}}else{if(Kh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=bh,n=null,o=vh,d=s}return c&&o==="text/plain"&&(d=c,c=void 0),{action:n,method:r.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ng(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function KS(s,t,r){let n=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&an(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function YS(s,t){if(s.id in t)return t[s.id];try{let r=await import(s.module);return t[s.id]=r,r}catch(r){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function WS(s,t,r){let n=await Promise.all(s.map(async o=>{let c=t.routes[o.route.id];if(c){let d=await YS(c,r);return d.links?d.links():[]}return[]}));return JS(n.flat(1).filter(GS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function my(s,t,r,n,o,c){let d=(h,x)=>r[x]?h.route.id!==r[x].route.id:!0,m=(h,x)=>r[x].pathname!==h.pathname||r[x].route.path?.endsWith("*")&&r[x].params["*"]!==h.params["*"];return c==="assets"?t.filter((h,x)=>d(h,x)||m(h,x)):c==="data"?t.filter((h,x)=>{let p=n.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(d(h,x)||m(h,x))return!0;if(h.route.shouldRevalidate){let w=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function XS(s,t,{includeHydrateFallback:r}={}){return QS(s.map(n=>{let o=t.routes[n.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function QS(s){return[...new Set(s)]}function ZS(s){let t={},r=Object.keys(s).sort();for(let n of r)t[n]=s[n];return t}function JS(s,t){let r=new Set;return new Set(t),s.reduce((n,o)=>{let c=JSON.stringify(ZS(o));return r.has(c)||(r.add(c),n.push({key:c,link:o})),n},[])}function vv(){let s=v.useContext(Nl);return Ng(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function eC(){let s=v.useContext(Tu);return Ng(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Sg=v.createContext(void 0);Sg.displayName="FrameworkContext";function jv(){let s=v.useContext(Sg);return Ng(s,"You must render this element inside a <HydratedRouter> element"),s}function tC(s,t){let r=v.useContext(Sg),[n,o]=v.useState(!1),[c,d]=v.useState(!1),{onFocus:m,onBlur:h,onMouseEnter:x,onMouseLeave:p,onTouchStart:w}=t,N=v.useRef(null);v.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let L=z=>{z.forEach(q=>{d(q.isIntersecting)})},B=new IntersectionObserver(L,{threshold:.5});return N.current&&B.observe(N.current),()=>{B.disconnect()}}},[s]),v.useEffect(()=>{if(n){let L=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(L)}}},[n]);let _=()=>{o(!0)},D=()=>{o(!1),d(!1)};return r?s!=="intent"?[c,N,{}]:[c,N,{onFocus:Jd(m,_),onBlur:Jd(h,D),onMouseEnter:Jd(x,_),onMouseLeave:Jd(p,D),onTouchStart:Jd(w,_)}]:[!1,N,{}]}function Jd(s,t){return r=>{s&&s(r),r.defaultPrevented||t(r)}}function sC({page:s,...t}){let{router:r}=vv(),n=v.useMemo(()=>bo(r.routes,s,r.basename),[r.routes,s,r.basename]);return n?v.createElement(rC,{page:s,matches:n,...t}):null}function aC(s){let{manifest:t,routeModules:r}=jv(),[n,o]=v.useState([]);return v.useEffect(()=>{let c=!1;return WS(s,t,r).then(d=>{c||o(d)}),()=>{c=!0}},[s,t,r]),n}function rC({page:s,matches:t,...r}){let n=nn(),{manifest:o,routeModules:c}=jv(),{basename:d}=vv(),{loaderData:m,matches:h}=eC(),x=v.useMemo(()=>my(s,t,h,o,n,"data"),[s,t,h,o,n]),p=v.useMemo(()=>my(s,t,h,o,n,"assets"),[s,t,h,o,n]),w=v.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let D=new Set,L=!1;if(t.forEach(z=>{let q=o.routes[z.route.id];!q||!q.hasLoader||(!x.some(R=>R.route.id===z.route.id)&&z.route.id in m&&c[z.route.id]?.shouldRevalidate||q.hasClientLoader?L=!0:D.add(z.route.id))}),D.size===0)return[];let B=KS(s,d,"data");return L&&D.size>0&&B.searchParams.set("_routes",t.filter(z=>D.has(z.route.id)).map(z=>z.route.id).join(",")),[B.pathname+B.search]},[d,m,n,o,x,t,s,c]),N=v.useMemo(()=>XS(p,o),[p,o]),_=aC(p);return v.createElement(v.Fragment,null,w.map(D=>v.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...r})),N.map(D=>v.createElement("link",{key:D,rel:"modulepreload",href:D,...r})),_.map(({key:D,link:L})=>v.createElement("link",{key:D,nonce:r.nonce,...L})))}function nC(...s){return t=>{s.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var wv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wv&&(window.__reactRouterVersion="7.9.1")}catch{}function iC(s,t){return V2({basename:t?.basename,getContext:t?.getContext,future:t?.future,history:c2({window:t?.window}),hydrationData:oC(),routes:s,mapRouteProperties:TS,hydrationRouteProperties:MS,dataStrategy:t?.dataStrategy,patchRoutesOnNavigation:t?.patchRoutesOnNavigation,window:t?.window}).initialize()}function oC(){let s=window?.__staticRouterHydrationData;return s&&s.errors&&(s={...s,errors:lC(s.errors)}),s}function lC(s){if(!s)return null;let t=Object.entries(s),r={};for(let[n,o]of t)if(o&&o.__type==="RouteErrorResponse")r[n]=new Eh(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let c=window[o.__subType];if(typeof c=="function")try{let d=new c(o.message);d.stack="",r[n]=d}catch{}}if(r[n]==null){let c=new Error(o.message);c.stack="",r[n]=c}}else r[n]=o;return r}var Nv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cg=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:o,reloadDocument:c,replace:d,state:m,target:h,to:x,preventScrollReset:p,viewTransition:w,...N},_){let{basename:D}=v.useContext(Gn),L=typeof x=="string"&&Nv.test(x),B,z=!1;if(typeof x=="string"&&L&&(B=x,wv))try{let _e=new URL(window.location.href),he=x.startsWith("//")?new URL(_e.protocol+x):new URL(x),ie=an(he.pathname,D);he.origin===_e.origin&&ie!=null?x=ie+he.search+he.hash:z=!0}catch{sa(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=fS(x,{relative:o}),[R,F,T]=tC(n,N),I=uC(x,{replace:d,state:m,target:h,preventScrollReset:p,relative:o,viewTransition:w});function se(_e){t&&t(_e),_e.defaultPrevented||I(_e)}let oe=v.createElement("a",{...N,...T,href:B||q,onClick:z||c?t:se,ref:nC(_,F),target:h,"data-discover":!L&&r==="render"?"true":void 0});return R&&!L?v.createElement(v.Fragment,null,oe,v.createElement(sC,{page:q})):oe});Cg.displayName="Link";var Sv=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:o=!1,style:c,to:d,viewTransition:m,children:h,...x},p){let w=Ou(d,{relative:x.relative}),N=nn(),_=v.useContext(Tu),{navigator:D,basename:L}=v.useContext(Gn),B=_!=null&&gC(w)&&m===!0,z=D.encodeLocation?D.encodeLocation(w).pathname:w.pathname,q=N.pathname,R=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;r||(q=q.toLowerCase(),R=R?R.toLowerCase():null,z=z.toLowerCase()),R&&L&&(R=an(R,L)||R);const F=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let T=q===z||!o&&q.startsWith(z)&&q.charAt(F)==="/",I=R!=null&&(R===z||!o&&R.startsWith(z)&&R.charAt(z.length)==="/"),se={isActive:T,isPending:I,isTransitioning:B},oe=T?t:void 0,_e;typeof n=="function"?_e=n(se):_e=[n,T?"active":null,I?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let he=typeof c=="function"?c(se):c;return v.createElement(Cg,{...x,"aria-current":oe,className:_e,ref:p,style:he,to:d,viewTransition:m},typeof h=="function"?h(se):h)});Sv.displayName="NavLink";var cC=v.forwardRef(({discover:s="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:o,state:c,method:d=bh,action:m,onSubmit:h,relative:x,preventScrollReset:p,viewTransition:w,...N},_)=>{let D=fC(),L=xC(m,{relative:x}),B=d.toLowerCase()==="get"?"get":"post",z=typeof m=="string"&&Nv.test(m),q=R=>{if(h&&h(R),R.defaultPrevented)return;R.preventDefault();let F=R.nativeEvent.submitter,T=F?.getAttribute("formmethod")||d;D(F||R.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:o,state:c,relative:x,preventScrollReset:p,viewTransition:w})};return v.createElement("form",{ref:_,method:B,action:L,onSubmit:n?h:q,...N,"data-discover":!z&&s==="render"?"true":void 0})});cC.displayName="Form";function dC(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cv(s){let t=v.useContext(Nl);return us(t,dC(s)),t}function uC(s,{target:t,replace:r,state:n,preventScrollReset:o,relative:c,viewTransition:d}={}){let m=ka(),h=nn(),x=Ou(s,{relative:c});return v.useCallback(p=>{if($S(p,t)){p.preventDefault();let w=r!==void 0?r:_o(h)===_o(x);m(s,{replace:w,state:n,preventScrollReset:o,relative:c,viewTransition:d})}},[h,m,x,r,n,t,s,o,c,d])}var mC=0,hC=()=>`__${String(++mC)}__`;function fC(){let{router:s}=Cv("useSubmit"),{basename:t}=v.useContext(Gn),r=AS();return v.useCallback(async(n,o={})=>{let{action:c,method:d,encType:m,formData:h,body:x}=qS(n,t);if(o.navigate===!1){let p=o.fetcherKey||hC();await s.fetch(p,r,o.action||c,{preventScrollReset:o.preventScrollReset,formData:h,body:x,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await s.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:h,body:x,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,t,r])}function xC(s,{relative:t}={}){let{basename:r}=v.useContext(Gn),n=v.useContext(wn);us(n,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),c={...Ou(s||".",{relative:t})},d=nn();if(s==null){c.search=d.search;let m=new URLSearchParams(c.search),h=m.getAll("index");if(h.some(p=>p==="")){m.delete("index"),h.filter(w=>w).forEach(w=>m.append("index",w));let p=m.toString();c.search=p?`?${p}`:""}}return(!s||s===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:Kn([r,c.pathname])),_o(c)}function gC(s,{relative:t}={}){let r=v.useContext(bg);us(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Cv("useViewTransitionState"),o=Ou(s,{relative:t});if(!r.isTransitioning)return!1;let c=an(r.currentLocation.pathname,n)||r.currentLocation.pathname,d=an(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Dh(o.pathname,d)!=null||Dh(o.pathname,c)!=null}var pC=Bb();function yC(s){return v.createElement(RS,{flushSync:pC.flushSync,...s})}const kv=v.createContext(),po={default:{background:"#003C58",logo:"#003C58",logo_border:"#002a3f",keypad:"#003C58",keypad_end:"#005a9c",keypadBorder:"#005a9c",buttonHover:"#005a9c",loginBg:"#005a9c",primary:"#003C58",primaryLight:"#005a9c",primaryExtraLight:"#005a9c1b",dashboardBackground:"#f0f8ff"},blue:{background:"#032D81",logo:"#032D81",logo_border:"#022a6b",keypad:"#032D81",keypad_end:"#4f8cff",keypadBorder:"#4f8cff",buttonHover:"#4f8cff",loginBg:"#4f8cff",primary:"#032D81",primaryLight:"#4f8cff",primaryExtraLight:"#4f8cff1b",dashboardBackground:"#f0f4ff"},green:{background:"#136F63",logo:"#136F63",logo_border:"#0f5a4f",keypad:"#136F63",keypad_end:"#1a8a7a",keypadBorder:"#1a8a7a",buttonHover:"#1a8a7a",loginBg:"#1a8a7a",primary:"#136F63",primaryLight:"#1a8a7a",primaryExtraLight:"#1a8a7a1b",dashboardBackground:"#f0fff4"},black:{background:"#1a1a1a",logo:"#1a1a1a",logo_border:"#0d0d0d",keypad:"#1a1a1a",keypad_end:"#333333",keypadBorder:"#333333",buttonHover:"#333333",loginBg:"#333333",primary:"#1a1a1a",primaryLight:"#333333",primaryExtraLight:"#3333331b",dashboardBackground:"#f5f5f5"}},bC=({children:s})=>{const t=()=>{const h=localStorage.getItem("posTheme");return h&&po[h]?h:"default"},[r,n]=v.useState(t),[o,c]=v.useState(po[t()]);v.useEffect(()=>{const h=localStorage.getItem("posTheme");h&&po[h]&&h!==r&&(n(h),c(po[h]))},[]),v.useEffect(()=>{const h=document.documentElement;h.style.setProperty("--color-primary",o.primary),h.style.setProperty("--color-primaryLight",o.primaryLight),h.style.setProperty("--color-primaryExtraLight",o.primaryExtraLight),h.style.setProperty("--color-dashboardBackground",o.dashboardBackground)},[o]),v.useEffect(()=>{const h=document.documentElement,x=po[t()];h.style.setProperty("--color-primary",x.primary),h.style.setProperty("--color-primaryLight",x.primaryLight),h.style.setProperty("--color-primaryExtraLight",x.primaryExtraLight),h.style.setProperty("--color-dashboardBackground",x.dashboardBackground)},[]);const m={currentTheme:r,themeColors:o,changeTheme:h=>{po[h]&&(n(h),c(po[h]),localStorage.setItem("posTheme",h),window.dispatchEvent(new CustomEvent("themeChanged",{detail:h})))},themes:po};return e.jsx(kv.Provider,{value:m,children:s})},Ur=()=>{const s=v.useContext(kv);if(!s)throw new Error("useTheme must be used within a ThemeProvider");return s},vC=()=>{console.log("POSLogin component rendering...");const[s,t]=v.useState(""),[r,n]=v.useState(""),[o,c]=v.useState(!1),[d,m]=v.useState(""),[h,x]=v.useState(new Date),[p,w]=v.useState(!1),N=ka(),[_,D]=v.useState(!1),{themeColors:L,changeTheme:B,currentTheme:z}=Ur(),R=(()=>{switch(z){case"default":return{screenBg:"#003C58",logoBg:"#176B87",logoText:"white",logoSubText:"white",mainContentShadow:"0 8px 32px rgba(0,0,0,0.10), 0 0 10px rgba(0, 188, 212, 0.6)",mainContentBorder:"2px solid var(--primary-light, #00bcd4)",leftSectionBg:"#176B87",rightActionButtonsBg:"#176B87",roleButtonBg:"#003C58",roleButtonText:"white",roleButtonBorder:"2px solid rgba(255, 255, 255, 0.3)",roleButtonSelectedBg:"white",roleButtonSelectedText:"#003C58"};case"blue":return{screenBg:"white",logoBg:"#032C7E",logoText:"white",logoSubText:"black",mainContentShadow:"0 8px 32px rgba(0,0,0,0.10), 0 0 20px rgba(3, 45, 129, 0.3)",mainContentBorder:"2px solid #032d81",leftSectionBg:"#032C7E",rightActionButtonsBg:"#032C7E",roleButtonBg:"white",roleButtonText:"#032D81",roleButtonBorder:"var(--primary-light, #00bcd4)",roleButtonSelectedBg:"#032D81",roleButtonSelectedText:"white"};case"green":return{screenBg:"#136F63",logoBg:"#34A0A4",logoText:"white",logoSubText:"white",mainContentShadow:"0 8px 32px rgba(0,0,0,0.10), 0 0 10px rgba(0, 188, 212, 0.6)",mainContentBorder:"2px solid var(--primary-light, #00bcd4)",leftSectionBg:"#34A0A4",rightActionButtonsBg:"#136F63",roleButtonBg:"#136F63",roleButtonText:"white",roleButtonBorder:"var(--logo-box-bg, #176B87)",roleButtonSelectedBg:"white",roleButtonSelectedText:"#34A0A4"};case"black":return{screenBg:"white",logoBg:"#000000",logoText:"white",logoSubText:"black",mainContentShadow:"0 8px 32px rgba(0,0,0,0.10), 0 0 20px rgba(0, 0, 0, 0.3)",mainContentBorder:"2.5px solid #e0e0e0",leftSectionBg:"#000000",rightActionButtonsBg:"#000000",roleButtonBg:"white",roleButtonText:"#000000",roleButtonBorder:"1px solid #e0e0e0",roleButtonSelectedBg:"#000000",roleButtonSelectedText:"white"};default:return{screenBg:"#003C58",logoBg:"#176B87",logoText:"white",logoSubText:"white",mainContentShadow:"0 8px 32px rgba(0,0,0,0.10), 0 0 10px rgba(0, 188, 212, 0.6)",mainContentBorder:"2px solid var(--primary-light, #00bcd4)",leftSectionBg:"#176B87",rightActionButtonsBg:"#176B87",roleButtonBg:"#003C58",roleButtonText:"white",roleButtonBorder:"2px solid rgba(255, 255, 255, 0.3)",roleButtonSelectedBg:"white",roleButtonSelectedText:"#003C58"}}})(),F=[{id:"Admin",name:"Admin",icon:qb},{id:"Manager",name:"Manager",icon:bl},{id:"Cashier",name:"Cashier",icon:Fc,subtitle:"Multiple Users"},{id:"Chef",name:"Chef",icon:Bh},{id:"Waiter",name:"Waiter",icon:Lc}];v.useEffect(()=>{const He=Y=>{_||(Y.key>="0"&&Y.key<="9"?I(Y.key):Y.key==="Backspace"?oe():Y.key==="Delete"?se():Y.key==="Enter"&&_e())};return window.addEventListener("keydown",He),()=>window.removeEventListener("keydown",He)},[r,s,_]),v.useEffect(()=>{const He=()=>{x(new Date)};He();const Y=setInterval(He,6e4);return()=>clearInterval(Y)},[]);const T=He=>{t(He),m("")},I=He=>{if(!s){m("⚠ Please select a role first.");return}r.length<4&&(n(Y=>Y+He),m(""))},se=()=>{n("")},oe=()=>{n(He=>He.slice(0,-1))},_e=async()=>{if(!s){m("⚠ Please select a role first.");return}if(r.length<4){m("⚠ PIN must be 4 digits.");return}if(s&&r.length>=4){w(!0);const He=new Promise(Y=>setTimeout(Y,1e3));try{console.log("Login attempt:",{role:s,pin:r});const Y=window.myAPI?.loginEmployee(r,s),[be]=await Promise.all([Y,He]);if(be.success){console.log("Login successful:",be.data);try{const ye=await window.myAPI?.createEmployeeLogin(be.data.id);ye.success?(console.log("Employee login session created:",ye),localStorage.setItem("currentEmployee",JSON.stringify({...be.data,loginSessionId:ye.login_id,loginTime:ye.login_time}))):(console.warn("Failed to create login session:",ye.message),localStorage.setItem("currentEmployee",JSON.stringify(be.data)))}catch(ye){console.error("Error creating login session:",ye),localStorage.setItem("currentEmployee",JSON.stringify(be.data))}try{window.appSettings&&typeof window.appSettings.reloadSettings=="function"&&await window.appSettings.reloadSettings()}catch(ye){console.warn("Could not reload app settings on login:",ye)}sessionStorage.setItem("triggerCheckIn","true"),N("/dashboard")}else m("⚠ Invalid PIN or role. Please try again."),n("")}catch(Y){console.error("Login error:",Y),m("⚠ Login failed. Please try again."),n("")}finally{w(!1)}}},he=()=>{c(!o)},ie=()=>{const He=F.find(Y=>Y.id===s);return He?He.name:""},Ee=He=>He.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),Ae=()=>{D(!0)},re=()=>{D(!1)},le=async He=>{try{if(He){const Y=await window.myAPI?.updateEmployeeLogout(He);Y.success?console.log("Employee logout session updated:",Y):console.warn("Failed to update logout session:",Y.message)}}catch(Y){console.error("Error updating logout session:",Y)}};Sr.useEffect(()=>(window.handleEmployeeLogout=le,()=>{delete window.handleEmployeeLogout}),[]);const J=()=>{const He=Array.from({length:4},(Y,be)=>{const ye=be<r.length,ae=r[be]||"",Ne=!ye;return e.jsx("div",{className:`w-10 h-10 border-[1px] rounded-lg flex items-center justify-center text-lg font-semibold transition-all duration-200 ${Ne?"border-primary bg-[#E0F7FA]":"border-primary bg-[#E0F7FA] text-black"} shadow-[inset_0_2px_4px_rgba(0,0,0,0.1)]`,style:{boxShadow:"0 0 10px rgba(0, 188, 212, 0.6)"},children:ye?o?ae:"●":""},be)});return e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[He,e.jsx("button",{onClick:he,disabled:!s,className:`ml-1 w-10 h-10 flex items-center justify-center rounded-lg transition-all duration-200 bg-primary hover:shadow-lg ${s?"text-[#032D3A] hover:text-white hover:bg-[#032D3A] cursor-pointer":"text-[#032D3A] cursor-not-allowed"}`,children:o?e.jsx(kh,{className:"w-6 h-6 text-white"}):e.jsx(vn,{className:"w-6 h-6 text-white"})})]})},Ce=({number:He,onClick:Y,style:be})=>e.jsx("button",{onClick:()=>Y(He),disabled:!s,className:"rounded-xl py-1 px-0 shadow-lg cursor-pointer hover:shadow-xl font-bold text-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",style:{backgroundColor:"white",color:R.rightActionButtonsBg,border:`2px solid ${R.rightActionButtonsBg}`},children:He}),Se=({onClick:He,className:Y="",children:be,variant:ye="default",disabled:ae=!1})=>{const Ne="py-1 px-0 rounded-lg text-sm font-semibold transition-all duration-200 border-[1.5px] flex items-center justify-center shadow-md hover:shadow-lg active:shadow-inner active:translate-y-0.5",ge={backgroundColor:R.rightActionButtonsBg,color:"white",border:s?"none":`2px solid ${R.rightActionButtonsBg}`};return e.jsx("button",{onClick:He,disabled:ae,className:`${Ne} ${Y}`,style:ge,children:be})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full h-screen relative flex flex-col items-center justify-center px-6 py-3 transition-colors duration-300",style:{backgroundColor:R.screenBg},children:[e.jsx("button",{onClick:()=>window.loginWindowControls?.close(),className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center text-gray-600 hover:text-red-600 hover:bg-red-50 transition-colors duration-200 rounded-full border border-gray-300 hover:border-red-300",title:"Close Application",children:e.jsx(St,{className:"w-5 h-5"})}),e.jsx("div",{className:"py-4 rounded-t-xl",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center mt-4",children:[e.jsxs("div",{className:"w-24 h-20 rounded-2xl border-2 flex flex-col items-center justify-center mb-3 shadow-md shadow-black",style:{backgroundColor:R.logoBg,borderColor:R.logoBg},children:[e.jsx("span",{className:"font-bold text-5xl",style:{color:R.logoText},children:"G"}),e.jsx("span",{className:"font-medium text-base",style:{color:R.logoText},children:"POS"})]}),e.jsx("p",{className:"text-lg font-bold",style:{color:R.logoSubText},children:"Welcome to GPOS – Smart & Simplified Point of Sale"})]})}),e.jsxs("div",{className:"w-full h-[500px] max-w-4xl flex transform perspective-1000 rounded-3xl overflow-hidden",style:{boxShadow:R.mainContentShadow,border:R.mainContentBorder},children:[e.jsxs("div",{className:"w-1/2 p-6",style:{backgroundColor:R.leftSectionBg},children:[e.jsx("h2",{className:"text-2xl mt-2 font-bold text-white mb-6 text-center",children:"Select Your Role"}),e.jsx("div",{className:"grid h-[380px] grid-cols-2 gap-4",children:F.map(He=>{const Y=He.icon,be=s===He.id;return e.jsxs("button",{onClick:()=>T(He.id),className:`
                        ${be?"scale-[1.04] z-[1]":"hover:bg-transparent hover:border-white"}
                         rounded-xl transition-all duration-300 
                        flex flex-col items-center justify-center
                        hover:cursor-pointer transform hover:-translate-y-1 hover:scale-105 active:translate-y-0 
                        border-[2.5px]
                      `,style:{transformStyle:"preserve-3d",background:be?R.roleButtonSelectedBg:R.roleButtonBg,border:R.roleButtonBorder,boxShadow:be?`0 0 16px 2px ${R.roleButtonBorder}, 0 0 0 4px rgba(52, 160, 164, 0.12)`:"0 4px 6px -1px rgba(0,0,0,0.2), 0 2px 4px -1px rgba(0,0,0,0.1)"},children:[e.jsx(Y,{className:"w-8 h-8 mb-1",style:{color:be?R.roleButtonSelectedText:R.roleButtonText}}),e.jsx("span",{className:"text-xl font-bold",style:{color:be?R.roleButtonSelectedText:R.roleButtonText},children:He.name}),He.subtitle&&e.jsx("span",{className:"text-xs opacity-70",style:{color:be?R.roleButtonSelectedText:R.roleButtonText},children:He.subtitle})]},He.id)})})]}),e.jsxs("div",{className:"w-1/2 bg-[#ffffff] text-black p-6",style:{boxShadow:"0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04)"},children:[s&&e.jsx("div",{className:"mb-2 p-2] rounded-md border border-[#4a7ca3] shadow-inner max-w-xs mx-auto",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 text-black",children:[e.jsx(og,{className:"w-3 h-3"}),e.jsxs("span",{className:"text-sm font-medium",children:["Logging in as: ",ie()]})]})}),e.jsx("h2",{className:"text-2xl mt-0 font-semibold text-black mb-2 text-center transform transition-transform hover:scale-105",children:"Enter PIN To Continue"}),e.jsxs("div",{className:"mb-4",children:[J(),e.jsxs("p",{className:"text-center text-xs text-gray-400 mt-2",children:[r.length,"/4 digits"]})]}),d&&e.jsxs("div",{className:"mb-6 mx-10 flex items-center justify-center gap-2 bg-white text-red-500 p-2 rounded-lg border border-red-500",children:[e.jsx(lg,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:d})]}),e.jsxs("div",{className:"max-w-xs mx-auto mb-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-3 text-white cursor-pointer",children:[1,2,3,4,5,6,7,8,9].map(He=>e.jsx(Ce,{number:He,onClick:I,style:{start:L.keypad,end:L.keypad_end}},He))}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(Se,{onClick:se,variant:"clear",disabled:!s,children:"Clear"}),e.jsx(Ce,{number:0,onClick:I,style:{start:L.keypad,end:L.keypad_end}}),e.jsx(Se,{onClick:oe,variant:"backspace",disabled:!s,children:e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 20 20",fill:"none",children:e.jsx("path",{d:"M7.5 10H15M5.5 5L2 10L5.5 15M15 5V15",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),e.jsx("div",{className:"mb-2 flex justify-center",children:e.jsx("button",{onClick:_e,disabled:!s||r.length<4||p,className:"w-[80%] cursor-pointer text-white py-3 rounded-lg text-base font-semibold transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl hover:-translate-y-1 active:translate-y-0 active:shadow-inner",style:{backgroundColor:R.rightActionButtonsBg,borderColor:R.rightActionButtonsBg},children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Logging in..."]}):"Login"})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:Ae,className:" underline font-semibold cursor-pointer text-sm transition-colors hover:-translate-y-0.5",style:{color:R.rightActionButtonsBg},children:"Forgot PIN?"})}),e.jsx("div",{className:"text-center mt-1",children:e.jsxs("div",{className:"text-lg flex items-start justify-start ml-10 font-semibold text-gray-600",children:[e.jsx("span",{className:"inline-flex items-center justify-center rounded-full mr-2",style:{backgroundColor:R.rightActionButtonsBg,width:24,height:24},children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 10.5L9 14.5L15 7.5",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("p",{className:"text-[16px]",children:["Time In logged at ",Ee(h)]})]})})]})]})]}),e.jsx(i2,{isOpen:_,onClose:re})]})},ul=s=>{try{const t=window.location.protocol==="file:"||window.location.href.includes("app.asar")||process?.resourcesPath;if(console.log(`[soundUtils] Getting audio path for: ${s}`),console.log(`[soundUtils] isBuiltApp: ${t}`),console.log(`[soundUtils] window.location.protocol: ${window.location.protocol}`),console.log(`[soundUtils] window.location.href: ${window.location.href}`),t){const r=`./assets/${s}`;return console.log(`✅ [soundUtils] Using built app path: ${r}`),r}else{const r=`./src/assets/${s}`;return console.log(`✅ [soundUtils] Using dev path: ${r}`),r}}catch(t){return console.error(`[soundUtils] Failed to resolve audio path: ${s}`,t),`./src/assets/${s}`}},jC=(s,t={})=>{try{const r=ul(s),n=new Audio(r);return t.volume!==void 0&&(n.volume=t.volume),n.play().catch(o=>{console.log(`Audio play failed for ${s}:`,o)})}catch(r){console.log(`Audio creation failed for ${s}:`,r)}},_v=(s={})=>jC("buttonPressBeep.mp3",s),kg=()=>({playButtonSound:v.useCallback(()=>{try{const t=window.appSettings?.current;if(!(t?.sound_alert===1||t?.sound_alert===!0))return;_v()}catch(t){console.log("Button sound creation failed:",t)}},[])}),wC=({navigationItems:s})=>{const[t,r]=v.useState(!1),{isOpen:n,toggleSidebar:o,isMobileMenuOpen:c,toggleMobileMenu:d,windowWidth:m}=v.useContext(Ag),{themeColors:h}=Ur(),{playButtonSound:x}=kg(),p=async()=>{r(!0),setTimeout(()=>{r(!1),console.log("User logged out")},1e3)};if(t)return e.jsx("div",{className:"fixed inset-0 bg-[#0000008d] z-50 flex justify-center items-center",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center",children:[e.jsx("div",{className:"w-7 h-7 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Logging out..."})]})});const w=()=>e.jsxs("nav",{className:"mt-3 flex flex-col h-full",children:[e.jsx("div",{className:"flex-1",children:s.map(N=>e.jsx("div",{children:e.jsxs(Sv,{to:N.path,className:({isActive:_})=>`flex items-center px-4 py-3 text-sm text-gray-100 ${_?"border-l-2 border-white":""}`,style:({isActive:_})=>({backgroundColor:_?"rgba(255, 255, 255, 0.055)":"transparent",":hover":{backgroundColor:"rgba(255, 255, 255, 0.055)"}}),onMouseEnter:_=>{_.target.style.backgroundColor="rgba(255, 255, 255, 0.055)"},onMouseLeave:_=>{const D=_.target.classList.contains("bg-[#ffffff0e]")||_.target.closest("a").classList.contains("bg-[#ffffff0e]");_.target.style.backgroundColor=D?"rgba(255, 255, 255, 0.055)":"transparent"},onClick:()=>{x(),m<1024&&d()},children:[e.jsx("span",{className:"text-gray-100",children:N.icon}),e.jsx("span",{className:"ml-2 font-medium whitespace-nowrap",style:{opacity:n?1:0,transition:"opacity 300ms ease"},children:N.name})]})},N.name))}),e.jsx("div",{className:"px-4 mb-6 cursor-pointer",children:e.jsxs("button",{onClick:()=>{x(),p()},className:"w-full flex items-center cursor-pointer gap-2 py-3 text-gray-100",children:[e.jsx(Uh,{size:20}),e.jsx("span",{className:"font-medium",style:{opacity:n?1:0,transition:"opacity 300ms ease"},children:"Logout"})]})})]});return e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"fixed inset-0 bg-[#0000002a] bg-opacity-50 z-40",onClick:d}),e.jsxs("div",{className:`lg:hidden fixed inset-y-0 left-0 z-40 w-64 transform transition-transform duration-300 ease-in-out ${c?"translate-x-0":"-translate-x-full"} shadow-xl`,style:{backgroundColor:h.primary},children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",style:{borderColor:h.primaryLight},children:[e.jsx("div",{className:"cursor-pointer",children:e.jsxs("h1",{className:"font-bold text-white text-xl",children:["G",e.jsx("span",{className:"text-secondary",children:"POS"})]})}),e.jsx("button",{onClick:d,className:"p-2 rounded-full text-white",style:{backgroundColor:"rgba(255, 255, 255, 0.23)"},children:e.jsx(St,{size:24})})]}),e.jsx(w,{})]}),e.jsx("div",{className:"hidden lg:block h-full overflow-hidden flex-shrink-0",style:{width:n?"200px":"60px",transition:"width 300ms cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:h.primary},children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"p-3 flex items-center justify-between border-b cursor-pointer",style:{borderColor:"rgba(255, 255, 255, 0.23)"},children:[e.jsxs("h1",{className:"font-bold text-white text-xl transition-opacity duration-300",style:{opacity:n?1:0,width:n?"auto":0},children:["G",e.jsx("span",{className:"text-secondary",children:"POS"}),"System"]}),e.jsx("button",{onClick:N=>{N.stopPropagation(),o()},className:"p-1 cursor-pointer rounded-full text-white",style:{backgroundColor:"rgba(255, 255, 255, 0.39)"},children:e.jsx(Eu,{size:20,className:`transform transition-transform duration-300 ${n?"":"rotate-180"}`})})]}),e.jsx(w,{})]})})]})},hy=({onRecallClick:s,onNotificationsClick:t,onViewToggle:r,currentView:n,notificationCount:o=0})=>{const{toggleMobileMenu:c,windowWidth:d}=v.useContext(Ag),m=ka(),h=nn(),{playButtonSound:x}=kg(),[p,w]=v.useState({name:"Loading...",role:"Loading...",image:null});v.useEffect(()=>{const R=localStorage.getItem("currentEmployee");if(R)try{const F=JSON.parse(R);let T=null;F.imgurl&&(F.imgurl.startsWith("uploads/")?window.myAPI.getEmployeeImage(F.imgurl).then(I=>{I.success&&w(se=>({...se,image:I.data}))}).catch(()=>{}):T=`data:image/png;base64,${F.imgurl}`),w({name:`${F.fname||""} ${F.lname||""}`.trim()||"Unknown User",role:F.roll||"Unknown Role",image:T})}catch(F){console.error("Error parsing employee data:",F),w({name:"Unknown User",role:"Unknown Role",image:null})}else m("/login")},[m]);const N=[{icon:e.jsx(ko,{size:14}),onClick:()=>console.log("Sale clicked"),label:"Sale"},{icon:e.jsx(Kb,{size:14}),onClick:()=>console.log("Download clicked"),label:"Report"},{icon:e.jsx(Vb,{size:14}),onClick:()=>console.log("Manage Orders clicked"),label:" manage Orders"}],_=[{icon:e.jsx($h,{size:14}),onClick:s,label:"Recall"},{icon:e.jsx(uu,{size:14}),onClick:t,label:"Notifications",hasNotification:o>0},{icon:n==="cards"?e.jsx(Pc,{size:14}):e.jsx(vn,{size:14}),onClick:r,label:n==="cards"?"Card View":"All Day View"}],D=()=>{m(-1)},L=async()=>{try{const R=localStorage.getItem("currentEmployee");let F=null;if(R)try{F=JSON.parse(R).id}catch(T){console.error("Error parsing employee data for logout:",T)}if(F)try{const T=await window.myAPI?.updateEmployeeLogout(F);T.success?console.log("Employee logout session updated successfully:",T):console.warn("Failed to update logout session:",T.message)}catch(T){console.error("Error updating logout session:",T)}localStorage.removeItem("currentEmployee"),sessionStorage.removeItem("hasCheckedIn"),m("/login")}catch(R){console.error("Error during logout:",R),localStorage.removeItem("currentEmployee"),sessionStorage.removeItem("hasCheckedIn"),m("/login")}},B=h.pathname!=="/dashboard",z=h.pathname.includes("/kds"),q=z?_:N;return e.jsxs("header",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between w-full px-4 py-1.5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[d<1024&&e.jsx("button",{onClick:()=>{x(),c()},className:"p-1 hover:bg-gray-100 rounded-lg",children:e.jsx(Qb,{size:24,className:"text-gray-600"})}),e.jsx("div",{className:"hidden md:flex items-center gap-2 ml-2",children:q.map((R,F)=>e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{onClick:()=>{x(),R.onClick()},className:"p-2 bg-primary cursor-pointer text-white hover:bg-primary/90 rounded-lg flex items-center justify-center relative",children:[R.icon,R.hasNotification&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:o})]}),e.jsxs("div",{className:`absolute ${z?"left-1/2 -translate-x-1/2 top-full mt-2":"top-full left-1/2 transform -translate-x-1/2 mt-2"} px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-10`,children:[R.label,e.jsx("div",{className:`absolute ${z?"bottom-full left-1/2 transform -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800":"bottom-full left-1/2 transform -translate-x-1/2 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-800"}`})]})]},F))})]}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[p.image?e.jsx("img",{src:p.image,alt:p.name,className:"w-9 h-9 object-cover rounded-full shadow-sm",onError:R=>{R.target.style.display="none",R.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-9 h-9 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium shadow-sm ${p.image?"hidden":""}`,children:p.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"text-left hidden sm:block",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:p.name}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:p.role})]}),e.jsx("button",{onClick:()=>{x(),L()},className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",title:"Logout",children:e.jsx(Uh,{size:16})})]}),B&&e.jsxs("button",{onClick:()=>{x(),D()},className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-primary text-white cursor-pointer rounded-lg transition-colors duration-200 border border-gray-200",children:[e.jsx(zc,{size:16}),e.jsx("span",{children:"Back"})]})]})]}),d<1024&&e.jsx("div",{className:"px-4 pb-3 flex gap-2",children:q.map((R,F)=>e.jsxs("button",{onClick:R.onClick,className:"p-2 bg-primary text-white hover:bg-primary/90 rounded-lg flex items-center gap-1 relative",title:R.label,children:[R.icon,e.jsx("span",{className:"text-xs ml-1",children:R.label}),R.hasNotification&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:o})]},F))})]})},Av=({open:s,onBack:t,onClose:r,floors:n,floorsLoading:o,selectedFloor:c,onSelectFloor:d,addSampleData:m,tables:h,tablesLoading:x,mergeTableSelections:p,onSelectionChange:w,onRemoveSelection:N,onAddMoreSelection:_,isAddMoreDisabled:D,getAvailableTablesForSelection:L,isTableReserved:B,onSave:z})=>{if(!s)return null;const q=p.filter(F=>F.tableId).length>=2,R=()=>{if(!q)return;const F=p.filter(T=>T.tableId).map(T=>{const I=h.find(se=>se.id.toString()===T.tableId);return{id:T.tableId,tableNo:I?.table_no,floor:c}});z?.(F)};return e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex items-center rounded-t-xl relative flex-shrink-0",children:[e.jsx("button",{onClick:t,className:"text-white cursor-pointer p-1 rounded-full flex items-center gap-1",children:e.jsx(zc,{size:16})}),e.jsx("h2",{className:"text-xl font-bold absolute left-1/2 transform -translate-x-1/2",children:"Merge Tables"}),e.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20 ml-auto",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Select Floor"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-60 overflow-y-auto",children:o?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading floors..."})}):n.length>0?n.map(F=>e.jsxs("button",{onClick:()=>d(F),className:`px-4 py-3 text-left rounded-lg transition-colors border ${c===F.name?"bg-primary text-white border-primary":"bg-white text-gray-700 hover:bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:"font-medium",children:F.name}),e.jsx("div",{className:"text-sm opacity-75",children:F.type})]},F.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No floors found"}),e.jsx("div",{className:"text-gray-400 text-xs mt-2 mb-4",children:"Please add floors to the database"}),e.jsx("button",{onClick:m,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors text-sm",children:"Add Sample Data"})]})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Select Tables to Merge"}),e.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:p.map((F,T)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${c?"text-gray-700":"text-gray-400"}`,children:["Select Table ",T+1]}),e.jsxs("select",{value:F.tableId,onChange:I=>w(F.id,I.target.value),disabled:!c,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary ${c?"border-gray-300 bg-white":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsxs("option",{value:"",children:["Choose table ",T+1,"..."]}),x?e.jsx("option",{value:"",disabled:!0,children:"Loading tables..."}):h.length>0?L(F.id).map(I=>e.jsxs("option",{value:I.id,disabled:B(I.id.toString()),children:["Table ",I.table_no," (",I.seat_capacity||4," seats) ",B(I.id.toString())?"- RESERVED":""]},I.id)):c?e.jsx("option",{value:"",disabled:!0,children:"No available tables"}):e.jsx("option",{value:"",disabled:!0,children:"Select a floor first"})]})]}),p.length>2&&e.jsx("button",{onClick:()=>N(F.id),className:"mt-6 p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Remove table selection",children:e.jsx(St,{size:16})})]},F.id))}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs("button",{onClick:_,disabled:D(),className:`w-fit px-4 py-2 font-medium rounded-lg transition-colors flex items-center justify-center gap-2 ${D()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-primary/90"}`,children:[e.jsx(Ls,{size:16}),"Add More"]})})]})]}),e.jsxs("div",{className:"flex gap-4 justify-end pt-4 border-t border-gray-200 flex-shrink-0",children:[e.jsx("button",{onClick:r,className:"px-6 py-2 font-medium rounded-lg transition-colors flex items-center gap-2 border border-gray-300 text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{disabled:!q,onClick:R,className:`px-6 py-2 font-medium rounded-lg transition-colors flex items-center gap-2 ${q?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17,21 17,13 7,13 7,21"}),e.jsx("polyline",{points:"7,3 7,8 15,8"})]}),"Save"]})]})]})]})})},NC=({open:s,onClose:t,floors:r=[],floorsLoading:n=!1,selectedFloor:o="",onSelectFloor:c,addSampleData:d,tables:m=[],tablesLoading:h=!1,selectedTable:x="",onSelectTable:p,reservedTables:w=[],onRemoveReservedTable:N,isTableReserved:_=()=>!1,selectedPersons:D="",onSelectPersons:L,getSeatCapacityOptions:B=()=>[],onMergeTable:z,onSave:q})=>s?e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Table Selection"}),e.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Select Floor"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-60 overflow-y-auto",children:n?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading floors..."})}):r&&r.length>0?r.map(R=>e.jsxs("button",{onClick:()=>c?.(R),className:`px-4 py-3 text-left rounded-lg transition-colors border ${o===R.name?"bg-primary text-white border-primary":"bg-white text-gray-700 hover:bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:"font-medium",children:R.name}),e.jsx("div",{className:"text-sm opacity-75",children:R.type})]},R.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No floors found"}),e.jsx("div",{className:"text-gray-400 text-xs mt-2 mb-4",children:"Please add floors to the database"}),e.jsx("button",{onClick:d,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors text-sm",children:"Add Sample Data"})]})})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${o?"text-gray-700":"text-gray-400"}`,children:"Select Table"}),e.jsxs("select",{value:x,onChange:R=>p?.(R.target.value),disabled:!o,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary ${o?"border-gray-300 bg-white":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Choose a table..."}),h?e.jsx("option",{value:"",disabled:!0,children:"Loading tables..."}):m.length>0?m.map(R=>e.jsxs("option",{value:R.id,disabled:_(R.id.toString()),children:["Table ",R.table_no," (",R.seat_capacity||4," seats) ",_(R.id.toString())?"- RESERVED":""]},R.id)):o?e.jsx("option",{value:"",disabled:!0,children:"No available tables"}):e.jsx("option",{value:"",disabled:!0,children:"Select a floor first"})]}),w.length>0&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Reserved Tables:"}),e.jsx("div",{className:`space-y-2 ${w.length>3?"max-h-32 overflow-y-auto pr-2":""}`,children:w.map(R=>e.jsx("div",{className:"p-2 bg-orange-50 border border-orange-200 rounded-lg flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-orange-700 font-medium",children:["Table ",R.tableNo," (",R.persons," persons) - ",R.floor]})]}),e.jsx("button",{onClick:()=>N?.(R.id),className:"text-red-500 hover:text-red-700 p-1",title:"Remove reservation",children:e.jsx(St,{size:14})})]})},R.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${x?"text-gray-700":"text-gray-400"}`,children:"Persons"}),e.jsxs("select",{value:D,onChange:R=>L?.(R.target.value),disabled:!x,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary ${x?"border-gray-300 bg-white":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select number of persons..."}),B().map(R=>e.jsxs("option",{value:R,children:[R," ",R===1?"Person":"Persons"]},R))]})]})]})]}),e.jsxs("div",{className:"flex gap-4 justify-end pt-4 border-t border-gray-200 flex-shrink-0",children:[e.jsxs("button",{disabled:!o,onClick:z,className:`px-6 py-2 font-medium rounded-lg transition-colors flex items-center gap-2 ${o?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}),e.jsx("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}),e.jsx("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}),e.jsx("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]}),"Merge Table"]}),e.jsxs("button",{disabled:!D,onClick:q,className:`px-6 py-2 font-medium rounded-lg transition-colors flex items-center gap-2 ${D?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17,21 17,13 7,13 7,21"}),e.jsx("polyline",{points:"7,3 7,8 15,8"})]}),"Save"]})]})]})]})}):null,Yh=()=>{const[s,t]=v.useState({isVisible:!1,message:"",type:"success",position:"top-right",duration:1e3}),r=v.useRef(!1),n=v.useRef(null),o=v.useCallback((p,w={})=>{n.current&&clearTimeout(n.current),t({isVisible:!0,message:p,type:w.type||"success",position:w.position||"top-right",duration:w.duration||1e3}),r.current=!0,n.current=setTimeout(()=>{t(N=>({...N,isVisible:!1})),r.current=!1,n.current=null},w.duration||1e3)},[]),c=v.useCallback(()=>{n.current&&(clearTimeout(n.current),n.current=null),t(p=>({...p,isVisible:!1})),r.current=!1},[]),d=v.useCallback((p,w={})=>{o(p,{...w,type:"success"})},[o]),m=v.useCallback((p,w={})=>{o(p,{...w,type:"error"})},[o]),h=v.useCallback((p,w={})=>{o(p,{...w,type:"warning"})},[o]),x=v.useCallback((p,w={})=>{o(p,{...w,type:"info"})},[o]);return{alertState:s,showAlert:o,hideAlert:c,showSuccess:d,showError:m,showWarning:h,showInfo:x}},Ni=({message:s,isVisible:t,onClose:r,duration:n=2e3,type:o="success"})=>{const[c,d]=v.useState(!1);if(v.useEffect(()=>{if(t){d(!0);const w=setTimeout(()=>{r&&r()},n);return()=>clearTimeout(w)}else d(!1)},[t,n,r]),!t)return null;const m=()=>{const w="w-[350px] fixed bottom-10 left-1/2 transform -translate-x-1/2 z-50 bg-white rounded-xl shadow-2xl transition-all duration-300 ease-out",N={success:"border-2 border-primary",error:"border-2 border-red-500",warning:"border-2 border-yellow-500",info:"border-2 border-blue-500"},_=c?"opacity-100 translate-y-0":"opacity-0 translate-y-8";return`${w} ${N[o]} ${_}`},h=()=>{const w={success:"bg-primary",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"},N={success:"text-white",error:"text-white",warning:"text-white",info:"text-white"};switch(o){case"success":return e.jsx("div",{className:`w-6 h-6 rounded-full ${w[o]} flex items-center justify-center`,children:e.jsx(Ch,{size:16,className:N[o]})});case"error":return e.jsx("div",{className:`w-6 h-6 rounded-full ${w[o]} flex items-center justify-center`,children:e.jsx(St,{size:16,className:N[o]})});case"warning":return e.jsx("div",{className:`w-6 h-6 rounded-full ${w[o]} flex items-center justify-center`,children:e.jsx("span",{className:`text-2xl ${N[o]}`,children:"⚠"})});case"info":return e.jsx("div",{className:`w-6 h-6 rounded-full ${w[o]} flex items-center justify-center`,children:e.jsx("span",{className:`text-2xl ${N[o]}`,children:"ℹ"})});default:return e.jsx("div",{className:`w-6 h-6 rounded-full ${w.success} flex items-center justify-center`,children:e.jsx(Ch,{size:16,className:"text-white"})})}},x=()=>{switch(o){case"success":return"Success!";case"error":return"Error!";case"warning":return"Warning!";case"info":return"Info!";default:return"Success!"}},p=()=>{switch(o){case"success":return"text-primary";case"error":return"text-red-600";case"warning":return"text-yellow-600";case"info":return"text-blue-600";default:return"text-primary"}};return e.jsx("div",{className:m(),children:e.jsxs("div",{className:"p-4 text-center flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h(),e.jsx("h3",{className:`text-xl font-semibold mb-2 ${p()}`,children:x()})]}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:s})]})})},Dv=({isOpen:s,onClose:t,onCreate:r})=>{const{themeColors:n}=Ur(),[o,c]=v.useState(!1),[d,m]=v.useState(!1),[h,x]=v.useState([]),[p,w]=v.useState(!1),[N,_]=v.useState(""),[D,L]=v.useState([]),[B,z]=v.useState(!1),[q,R]=v.useState(""),[F,T]=v.useState(""),[I,se]=v.useState([{id:1,tableId:""},{id:2,tableId:""}]),[oe,_e]=v.useState({customerName:"",phoneNumber:"",date:"",startTime:"",duration:"2",partySize:"2",tablePreference:"any",notes:""}),[he,ie]=v.useState([]),[Ee,Ae]=v.useState(!1),[re,le]=v.useState(null),[J,Ce]=v.useState(null),[Se,He]=v.useState(!1),{alertState:Y,showError:be,showSuccess:ye,hideAlert:ae}=Yh(),Ne=fe=>{const{name:ce,value:Me}=fe.target;_e(Re=>({...Re,[ce]:Me})),ce==="customerName"&&Me.length>=2?ge(Me):ce==="customerName"&&Me.length<2&&(ie([]),Ae(!1))},ge=async fe=>{try{if(!window.myAPI)return;const ce=await window.myAPI.searchCustomerByName(fe);ce&&ce.success&&(ie(ce.data||[]),Ae(!0))}catch(ce){console.error("Error searching customers:",ce)}},A=fe=>{le(fe),_e(ce=>({...ce,customerName:fe.name,phoneNumber:fe.phone||""})),Ae(!1),ie([])},P=async()=>{try{if(!window.myAPI)return;const fe=await window.myAPI.getHotelInfo();fe&&fe.success&&Ce(fe.data)}catch(fe){console.error("Error loading hotel info:",fe)}},f=async(fe,ce,Me,Re)=>{try{if(!window.myAPI||!fe)return!0;const ze=await window.myAPI.getReservationsByDateRange(ce,ce,1);if(ze&&ze.success){const rt=ze.data||[],Ve=g(Me),Je=Ve+parseFloat(Re)*60;return!rt.some(We=>{if(We.table_id!==fe)return!1;const it=g(We.start_time),Qe=it+parseFloat(We.duration||2)*60;return Ve<Qe&&Je>it})}return!0}catch(ze){return console.error("Error checking table availability:",ze),!0}},g=fe=>{const[ce,Me]=fe.split(":").map(Number);return ce*60+Me},S=(fe,ce)=>{if(!J||!J.opening_time||!J.closeing_time)return!0;const Me=g(fe),Re=parseFloat(ce)*60,ze=Me+Re,rt=g(J.opening_time),Ve=g(J.closeing_time);if(Me<rt)return be(`Reservation time must be after opening time (${J.opening_time})`),!1;if(ze>Ve){const Je=Math.floor((Ve-Me)/60*10)/10;return be(`Maximum duration is ${Je} hours (restaurant closes at ${J.closeing_time})`),!1}return!0},k=async fe=>{fe.preventDefault(),He(!0);try{if(["customerName","phoneNumber","date","startTime","partySize"].filter(Qe=>!String(oe[Qe]||"").trim()).length){be("Fill in the required fields");return}if(!S(oe.startTime,oe.duration))return;if(q&&!await f(q,oe.date,oe.startTime,oe.duration)){be("Selected table is not available at the chosen time");return}let Re=re?.id,ze={name:oe.customerName,phone:oe.phoneNumber,email:"",address:"",isloyal:!1,addedBy:1,hotel_id:1};if(!Re){const Qe=await window.myAPI.createCustomer(ze);if(Qe&&Qe.success)Re=Qe.id;else{be("Failed to create customer");return}}const Ve=g(oe.startTime)+parseFloat(oe.duration)*60,Je=`${Math.floor(Ve/60).toString().padStart(2,"0")}:${(Ve%60).toString().padStart(2,"0")}`,We={customer_id:Re,customer_name:oe.customerName,customer_phone:oe.phoneNumber,customer_email:re?.email||"",reservation_date:oe.date,start_time:oe.startTime,end_time:Je,duration:parseFloat(oe.duration),party_size:parseInt(oe.partySize),table_id:q||null,table_preference:oe.tablePreference,is_table_preferred:oe.tablePreference==="customerrequired",status:"confirmed",special_notes:oe.notes,hotel_id:1,added_by:1},it=await window.myAPI.createReservation(We);it&&it.success?(ye("Reservation created successfully!"),r&&r(it.data),_e({customerName:"",phoneNumber:"",date:"",startTime:"",duration:"2",partySize:"2",tablePreference:"any",notes:""}),le(null),R(""),t()):be("Failed to create reservation")}catch(ce){console.error("Error creating reservation:",ce),be("An error occurred while creating the reservation")}finally{He(!1)}};v.useEffect(()=>{s&&P()},[s]),Sr.useEffect(()=>{if(!d)return;(async()=>{try{if(w(!0),!window.myAPI){x([]);return}const ce=await window.myAPI.floorGetAll();ce&&ce.success?x(ce.data):x([])}catch{x([])}finally{w(!1)}})()},[d]);const C=async fe=>{try{if(z(!0),!window.myAPI){L([]);return}const ce=await window.myAPI.tableGetByFloorWithStatus(fe,"Free");ce&&ce.success?L(ce.data):L([])}catch{L([])}finally{z(!1)}},O=fe=>{_(fe?.name||""),fe?.id!=null&&C(fe.id)},U=(fe,ce)=>{se(Me=>Me.map(Re=>Re.id===fe?{...Re,tableId:ce}:Re))},H=fe=>{se(ce=>ce.length>2?ce.filter(Me=>Me.id!==fe):ce)},V=()=>{se(fe=>[...fe,{id:fe.length?Math.max(...fe.map(ce=>Number(ce.id)))+1:1,tableId:""}])},ee=()=>I.length>=6,X=()=>D,[M]=v.useState([]),Q=()=>!1,ue=()=>{},ne=()=>Array.from({length:12}).map((fe,ce)=>ce+1);return s?e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:t}),e.jsxs("div",{className:"relative w-full max-w-3xl bg-white rounded-lg shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-4",style:{backgroundColor:n.primary},children:[e.jsx("h2",{className:"text-white font-semibold",children:"New Reservation"}),e.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded hover:bg-white/15",children:e.jsx(St,{className:"w-5 h-5 text-white"})})]}),e.jsxs("form",{onSubmit:k,className:"px-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Customer Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"customerName",required:!0,value:oe.customerName,onChange:Ne,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200",placeholder:"Enter customer name",autoComplete:"off"}),e.jsx(jn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})]}),Ee&&he.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:he.map(fe=>e.jsxs("div",{onClick:()=>A(fe),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:fe.name}),e.jsx("div",{className:"text-sm text-gray-600",children:fe.phone})]},fe.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{name:"phoneNumber",required:!0,value:oe.phoneNumber,onChange:Ne,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"date",required:!0,value:oe.date,onChange:Ne,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Start Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"time",name:"startTime",required:!0,value:oe.startTime,onChange:Ne,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Duration"}),e.jsxs("select",{name:"duration",value:oe.duration,onChange:Ne,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 bg-white",children:[e.jsx("option",{value:"1",children:"1 hour"}),e.jsx("option",{value:"1.5",children:"1.5 hours"}),e.jsx("option",{value:"2",children:"2 hours"}),e.jsx("option",{value:"3",children:"3 hours"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Party Size ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{name:"partySize",required:!0,value:oe.partySize,onChange:Ne,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 bg-white",children:Array.from({length:20}).map((fe,ce)=>e.jsx("option",{value:ce+1,children:ce+1},ce+1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Table Preference"}),e.jsxs("select",{name:"tablePreference",value:oe.tablePreference,onChange:Ne,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 bg-white",children:[e.jsx("option",{value:"any",children:"Any Available Table"}),e.jsx("option",{value:"customerrequired",children:"Customer Required"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:()=>m(!0),className:"py-2.5 px-4 rounded bg-primary text-white text-sm font-medium",children:"Choose Table"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Special Requests"}),e.jsx("textarea",{name:"notes",value:oe.notes,onChange:Ne,rows:4,className:"mt-1 w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200",placeholder:"Any special requests or notes"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-500 text-white",disabled:Se,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-primary text-white",disabled:Se,children:Se?"Creating...":"Create Reservation"})]})]})]}),e.jsx(Ni,{message:Y.message,isVisible:Y.isVisible,onClose:ae,duration:Y.duration,type:Y.type}),e.jsx(NC,{open:d,onClose:()=>m(!1),floors:h,floorsLoading:p,selectedFloor:N,onSelectFloor:O,addSampleData:()=>{},tables:D,tablesLoading:B,selectedTable:q,onSelectTable:fe=>R(fe),reservedTables:M,onRemoveReservedTable:ue,isTableReserved:Q,selectedPersons:F,onSelectPersons:fe=>T(fe),getSeatCapacityOptions:ne,onMergeTable:()=>c(!0),onSave:()=>m(!1)}),e.jsx(Av,{open:o,onBack:()=>c(!1),onClose:()=>{c(!1),se([{id:1,tableId:""},{id:2,tableId:""}])},floors:h,floorsLoading:p,selectedFloor:N,onSelectFloor:O,addSampleData:()=>{},tables:D,tablesLoading:B,mergeTableSelections:I,onSelectionChange:U,onRemoveSelection:H,onAddMoreSelection:V,isAddMoreDisabled:ee,getAvailableTablesForSelection:X,isTableReserved:Q,onSave:()=>{c(!1),se([{id:1,tableId:""},{id:2,tableId:""}])}})]}):null},SC=()=>{ka();const[s,t]=v.useState(!1);return e.jsx("div",{children:e.jsx(Dv,{isOpen:s,onClose:()=>t(!1),onCreate:()=>t(!1)})})},Ev=v.createContext(),Tv=()=>{const s=v.useContext(Ev);if(!s)throw new Error("useDraftCount must be used within a DraftProvider");return s},CC=({children:s})=>{const[t,r]=v.useState(0),n=o=>{r(o)};return e.jsx(Ev.Provider,{value:{draftCount:t,updateDraftCount:n},children:s})},Mv=v.createContext(),_g=()=>{const s=v.useContext(Mv);if(!s)throw new Error("useNotifications must be used within a NotificationProvider");return s},kC=({children:s})=>{const[t,r]=v.useState([]),n=v.useCallback(p=>{const w={id:Date.now()+Math.random(),timestamp:new Date().toISOString(),isRead:!1,...p};r(N=>[w,...N]),setTimeout(()=>{r(N=>N.filter(_=>_.id!==w.id))},1440*60*1e3)},[]),o=v.useCallback(p=>{r(w=>w.map(N=>N.id===p?{...N,isRead:!0}:N))},[]),c=v.useCallback(()=>{r(p=>p.map(w=>({...w,isRead:!0})))},[]),d=v.useCallback(()=>{r([])},[]),m=v.useCallback(p=>{r(w=>w.filter(N=>N.id!==p))},[]),h=v.useCallback(()=>t.filter(p=>!p.isRead).length,[t]),x={notifications:t,addNotification:n,markAsRead:o,markAllAsRead:c,clearAll:d,clearNotification:m,getUnreadCount:h};return e.jsx(Mv.Provider,{value:x,children:s})},_C=({isOpen:s,onClose:t})=>{const{notifications:r,markAllAsRead:n,clearAll:o}=_g(),c=x=>{switch(x){case"shopping-cart":return e.jsx(ko,{size:16,className:"text-white"});case"table":return e.jsx(hg,{size:16,className:"text-white"});case"utensils":return e.jsx(ji,{size:16,className:"text-white"});case"store":return e.jsx(mu,{size:16,className:"text-white"});case"package":return e.jsx(yl,{size:16,className:"text-white"});case"truck":return e.jsx(So,{size:16,className:"text-white"});default:return e.jsx(ko,{size:16,className:"text-white"})}},d=x=>{const p=new Date,w=new Date(x),N=Math.floor((p-w)/(1e3*60));if(N<1)return"Just now";if(N<60)return`${N}m ago`;const _=Math.floor(N/60);return _<24?`${_}h ago`:`${Math.floor(_/24)}d ago`},m=()=>{o()},h=()=>{n()};return s?e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-100 rounded-lg shadow-lg w-96 max-h-[500px] flex flex-col",children:[e.jsxs("div",{className:"flex rounded-t-lg bg-primary items-center justify-between p-4 border-b border-gray-300",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Notifications"}),e.jsx("button",{onClick:t,className:"text-white transition-colors",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:r.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(uu,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-semibold",children:"No notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"You are all caught up!"})]}):r.map(x=>e.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-lg bg-white border ${x.isRead?"opacity-60":"shadow-sm"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${x.iconColor}`,children:c(x.icon)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:x.title}),e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:x.description}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:d(x.timestamp)})]})]},x.id))}),r.length>0&&e.jsxs("div",{className:"flex space-x-2 p-4 border-t border-gray-300",children:[e.jsxs("button",{onClick:m,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded text-sm font-medium transition-colors",children:[e.jsx(za,{size:14,className:"inline mr-2"}),"Clear All"]}),e.jsxs("button",{onClick:h,className:"flex-1 bg-teal-600 hover:bg-teal-700 text-white py-2 px-4 rounded text-sm font-medium transition-colors",children:[e.jsx(pN,{size:14,className:"inline mr-2"}),"Mark All Read"]})]})]})}):null},AC=({onMenuClick:s,onDraftsClick:t,showMenuButton:r=!0})=>{const o=nn().pathname==="/dashboard/sales",c=ka(),{themeColors:d}=Ur(),{draftCount:m}=Tv(),{getUnreadCount:h}=_g(),[x,p]=v.useState(!1),w=h();if(!o)return null;const N=[{style:{backgroundColor:d.primary},textColor:"text-white",label:"Manage Orders",path:"/dashboard/manage-orders"},{style:{backgroundColor:d.primary},textColor:"text-white",label:"Online Orders"},{style:{backgroundColor:d.primary},textColor:"text-white",label:`Drafts${m>0?` (${m})`:""}`,onClick:t},{style:{backgroundColor:d.primary},textColor:"text-white",label:`Notifications${w>0?` (${w})`:""}`,onClick:()=>p(!0)},{style:{backgroundColor:d.primary},textColor:"text-white",label:"Reservations",path:"/dashboard/reservations"},{label:"Customer Display",style:{backgroundColor:d.primary},textColor:"text-white",path:"/dashboard/customer-management"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white border-b border-gray-300 p-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center justify-center space-x-2 ",children:N.map((_,D)=>e.jsxs("div",{onClick:()=>{if(_.onClick){_.onClick();return}if(_.path){c(_.path);return}D===0&&c("/dashboard")},className:`${_.textColor} ${_.textMargin} btn-lifted rounded-md px-4 py-3 font-semibold flex items-center justify-center cursor-pointer hover:opacity-80 transition-opacity`,style:_.style||(_.bgColor?{backgroundColor:_.bgColor}:{}),children:[_.icon,e.jsx("span",{className:"text-xs font-semibold",children:_.label})]},D))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("headerSaveClicked"))},title:"Save",className:"flex justify-center items-center gap-2 py-3 w-[100px] rounded-md text-white text-sm font-semibold btn-lifted bg-[#16A34A] flex items-center gap-2",children:[e.jsx(mg,{size:14}),"Save"]}),e.jsxs("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("openStatusModal"))},title:"Update order status",className:"flex justify-center items-center gap-2 py-3 w-[100px] rounded-md text-white text-sm font-semibold btn-lifted bg-[#1976D2] flex items-center gap-2",children:[e.jsx(Zb,{size:14}),"Status"]})]})]})}),e.jsx(_C,{isOpen:x,onClose:()=>p(!1)})]})},DC=({onComplete:s})=>{const[t,r]=v.useState(""),[n,o]=v.useState(!0),[c,d]=v.useState(!1),[m,h]=v.useState(""),[x,p]=v.useState(new Date().toLocaleTimeString()),[w,N]=v.useState(!1),[_,D]=v.useState("");v.useEffect(()=>{const F=localStorage.getItem("currentEmployee");if(F)try{const T=JSON.parse(F),I=`${T.fname||""} ${T.lname||""}`.trim();r(I||"User")}catch(T){console.error("Error parsing employee data:",T),r("User")}else r("User")},[]),v.useEffect(()=>{const F=setInterval(()=>{p(new Date().toLocaleTimeString())},6e4);return()=>clearInterval(F)},[]);const L=F=>{h(T=>F==="."&&T.includes(".")?T:T+F)},B=()=>{h(F=>F.slice(0,-1))};v.useEffect(()=>{if(n){const F=setTimeout(()=>{},2e3);return()=>clearTimeout(F)}},[n]);const z=()=>{d(!0)},q=async()=>{if(m===""||m===null||m===void 0){D("Please enter opening cash amount");return}const F=parseFloat(m);if(isNaN(F)||F<0){D("Please enter a valid opening cash amount (0 or greater)");return}N(!0),D("");try{const T=JSON.parse(localStorage.getItem("currentEmployee"));if(!T||!T.id){D("No employee data found. Please login again."),N(!1);return}const I={startamount:parseFloat(m)||0,employee_id:T.id};console.log("Creating register with data:",I);const se=await window.myAPI?.createRegister(I);se&&se.success?(console.log("Register created successfully:",se.data),localStorage.setItem("currentRegister",JSON.stringify(se.data)),s()):(D(se?.message||"Failed to create register"),N(!1))}catch(T){console.error("Error creating register:",T),D("Network error. Please try again."),N(!1)}},R=()=>{s()};return e.jsx("div",{className:"fixed inset-0 bg-[#0000009a] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-xl w-full max-w-md transform transition-all duration-300",children:[e.jsx("div",{className:"bg-[#032D3A] p-4 flex justify-center items-center",children:e.jsx("h3",{className:"text-white font-bold text-lg",children:c?"Register Cash Drawer":"Check-In Successful"})}),e.jsx("div",{className:"p-6",children:c?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Enter Opening Cash Amount"}),e.jsx("div",{className:"bg-gray-100 p-4 rounded-lg text-2xl font-mono text-right",children:m||"0.00"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[[1,2,3,4,5,6,7,8,9,".",0].map(F=>e.jsx("button",{onClick:()=>L(F.toString()),className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-3 rounded-lg transition-colors",children:F},F)),e.jsx("button",{onClick:B,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-3 rounded-lg transition-colors",children:"⌫"})]}),_&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg text-sm",children:_}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:R,disabled:w,className:"flex-1 bg-red-500 hover:bg-red-600 text-white font-medium py-2 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:q,disabled:m===""||m===null||m===void 0||w,className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg font-medium transition-colors ${m!==""&&m!==null&&m!==void 0&&!w?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mg,{size:18}),"Save"]})})]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(xa,{className:"w-16 h-16 text-green-500 animate-bounce"})}),e.jsxs("h4",{className:"text-xl font-semibold text-gray-800 mb-2",children:[t," is now checked in"]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["at ",x]}),e.jsxs("button",{onClick:z,className:"bg-[#032D3A] hover:bg-[#2d5a87] text-white font-medium py-2 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2 mx-auto",children:["Start Register ",e.jsx($b,{size:18})]})]})})]})})},Ag=v.createContext(),EC=()=>{const[s,t]=v.useState(!0),[r,n]=v.useState(!1),[o,c]=v.useState(window.innerWidth),[d,m]=v.useState(!1),[h,x]=v.useState(!1),[p,w]=v.useState(!1),N=nn(),_=ka(),{themeColors:D}=Ur(),L={role:"admin"},B=L?.role?.toLowerCase();v.useEffect(()=>{const _e=()=>c(window.innerWidth);window.addEventListener("resize",_e);const he=()=>w(!0);return window.addEventListener("openDashboardMenu",he),()=>window.removeEventListener("resize",_e)},[]),v.useEffect(()=>{const _e=async()=>{try{const he=localStorage.getItem("currentEmployee");if(he){const ie=JSON.parse(he);ie.id&&(window.handleEmployeeLogout?await window.handleEmployeeLogout(ie.id):await window.myAPI?.updateEmployeeLogout(ie.id))}}catch(he){console.error("Error handling beforeunload logout:",he)}};return window.addEventListener("beforeunload",_e),()=>window.removeEventListener("beforeunload",_e)},[]),v.useEffect(()=>{const _e=sessionStorage.getItem("hasCheckedIn"),he=sessionStorage.getItem("triggerCheckIn"),ie=localStorage.getItem("currentEmployee"),Ee=N.pathname==="/dashboard",Ae=he==="true";Ee&&(Ae||B!=="admin"&&!_e&&ie)&&(x(!0),sessionStorage.setItem("hasCheckedIn","true"),Ae&&sessionStorage.removeItem("triggerCheckIn"))},[N,B]);const R={isOpen:s,isMobileMenuOpen:r,toggleMobileMenu:()=>{n(!r)},toggleSidebar:()=>{t(!s)},windowWidth:o},F=Sr.useMemo(()=>[{name:"Dashboard",icon:e.jsx(Hx,{size:18}),path:"/dashboard",allowedRoles:["admin","cashier","manager","chef","waiter"]},{name:"Manage-Orders",icon:e.jsx(e1,{size:18}),path:"/dashboard/manage-orders",allowedRoles:["admin","cashier"]},{name:"Reservations",icon:e.jsx($s,{size:18}),path:"/dashboard/reservations",allowedRoles:["admin","cashier"]},{name:"KDS",icon:e.jsx(jn,{size:18}),path:"/dashboard/kds",allowedRoles:["admin","bde","cashier"]},{name:"Customer Management",icon:e.jsx(Lc,{size:18}),path:"/dashboard/customer-management",allowedRoles:["admin","cashier"]},{name:"Coupons",icon:e.jsx(Hh,{size:18}),path:"/dashboard/coupons",allowedRoles:["admin","manager","cashier"]},{name:"sales",icon:e.jsx(Y1,{size:18}),path:"/dashboard/sales",allowedRoles:["admin","cashier"]},{name:"Reports",icon:e.jsx(og,{size:18}),path:"/dashboard/reports",allowedRoles:["admin","manager","cashier"]},{name:"Admin Panel",icon:e.jsx(bl,{size:18}),path:"/dashboard/admin-panel",allowedRoles:["admin"]}].filter(he=>he.allowedRoles.includes(B)),[B]),T=N.pathname==="/dashboard/kds",I=N.pathname==="/dashboard/sales",se=N.pathname==="/dashboard/reservations",oe=I;return d||!L?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading..."})]})}):e.jsxs(Ag.Provider,{value:R,children:[p&&e.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[e.jsxs("div",{className:"w-64 h-full shadow-2xl transform transition-transform duration-300 ease-in-out rounded-r-xl",style:{backgroundColor:D.primary},children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",style:{borderColor:"rgba(255, 255, 255, 0.23)"},children:[e.jsx("div",{className:"cursor-pointer",children:e.jsxs("h1",{className:"font-bold text-white text-xl",children:["G",e.jsx("span",{className:"text-secondary",children:"POS"}),"System"]})}),e.jsx("button",{onClick:()=>w(!1),className:"p-2 rounded-full text-white transition-colors",style:{backgroundColor:"rgba(255, 255, 255, 0.23)",":hover":{backgroundColor:"rgba(255, 255, 255, 0.39)"}},children:e.jsx(St,{size:20})})]}),e.jsxs("nav",{className:"mt-3 flex flex-col h-full",children:[e.jsx("div",{className:"flex-1",children:F.map(_e=>e.jsx("div",{children:e.jsxs("button",{onClick:()=>{w(!1),_(_e.path)},className:"w-full flex items-center px-4 py-3 text-sm text-gray-100 transition-colors",style:{":hover":{backgroundColor:"rgba(255, 255, 255, 0.055)"}},onMouseEnter:he=>{he.target.style.backgroundColor="rgba(255, 255, 255, 0.055)"},onMouseLeave:he=>{he.target.style.backgroundColor="transparent"},children:[e.jsx("span",{className:"text-gray-100",children:_e.icon}),e.jsx("span",{className:"ml-2 font-medium whitespace-nowrap",children:_e.name})]})},_e.name))}),e.jsx("div",{className:"px-4 mb-6 cursor-pointer",children:e.jsxs("button",{onClick:()=>{w(!1),console.log("Logout clicked")},className:"w-full flex items-center cursor-pointer gap-2 py-3 text-gray-100",children:[e.jsx(Uh,{size:20}),e.jsx("span",{className:"font-medium",children:"Logout"})]})})]})]}),e.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>w(!1)})]}),e.jsxs("div",{className:"dashboard-container",children:[h&&e.jsx(DC,{onComplete:()=>x(!1)}),e.jsx("div",{className:"dashboard-content",children:e.jsxs("div",{className:"flex h-full overflow-hidden",children:[!oe&&e.jsx(wC,{navigationItems:F}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[I?e.jsx(AC,{isOrdersRoute:I,onMenuClick:()=>w(!0),showMenuButton:!1,onDraftsClick:()=>{window.dispatchEvent(new CustomEvent("openDraftsModal"))}}):T?e.jsx("div",{className:oe?"":"md:pl-5",children:e.jsx(hy,{onRecallClick:()=>console.log("Recall clicked"),onNotificationsClick:()=>console.log("Notifications clicked"),onViewToggle:()=>console.log("View toggle clicked"),currentView:"cards",notificationCount:3})}):se?e.jsx("div",{className:oe?"":"md:pl-5",children:e.jsx(SC,{})}):e.jsx("div",{className:oe?"":"md:pl-5",children:e.jsx(hy,{})}),e.jsx("main",{className:"dashboard-main",children:e.jsx("div",{className:`dashboard-scrollable rounded-br-xl ${oe?"p-0":"p-2"} ${oe?"":"md:ml-2"} ${T?"":"mt-6 md:mt-3"}`,style:{transition:"margin 300ms cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:oe?"transparent":D.dashboardBackground},children:e.jsx(bv,{})})})]})]})})]})]})};var jh={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.122
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */var TC=jh.exports,fy;function MC(){return fy||(fy=1,(function(s,t){(function(r,n){s.exports=n(Lh())})(TC,(function(r){return(function(){var n={442:function(m){m.exports=r},548:function(m){m.exports=(function(){var h={34:function(A,P,f){var g=f(4901);A.exports=function(S){return typeof S=="object"?S!==null:g(S)}},81:function(A,P,f){var g=f(9565),S=f(9306),k=f(8551),C=f(6823),O=f(851),U=TypeError;A.exports=function(H,V){var ee=arguments.length<2?O(H):V;if(S(ee))return k(g(ee,H));throw new U(C(H)+" is not iterable")}},235:function(A,P,f){var g=f(9213).forEach,S=f(4598)("forEach");A.exports=S?[].forEach:function(k){return g(this,k,arguments.length>1?arguments[1]:void 0)}},283:function(A,P,f){var g=f(9504),S=f(9039),k=f(4901),C=f(9297),O=f(3724),U=f(350).CONFIGURABLE,H=f(3706),V=f(1181),ee=V.enforce,X=V.get,M=String,Q=Object.defineProperty,ue=g("".slice),ne=g("".replace),fe=g([].join),ce=O&&!S((function(){return Q((function(){}),"length",{value:8}).length!==8})),Me=String(String).split("String"),Re=A.exports=function(ze,rt,Ve){ue(M(rt),0,7)==="Symbol("&&(rt="["+ne(M(rt),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),Ve&&Ve.getter&&(rt="get "+rt),Ve&&Ve.setter&&(rt="set "+rt),(!C(ze,"name")||U&&ze.name!==rt)&&(O?Q(ze,"name",{value:rt,configurable:!0}):ze.name=rt),ce&&Ve&&C(Ve,"arity")&&ze.length!==Ve.arity&&Q(ze,"length",{value:Ve.arity});try{Ve&&C(Ve,"constructor")&&Ve.constructor?O&&Q(ze,"prototype",{writable:!1}):ze.prototype&&(ze.prototype=void 0)}catch{}var Je=ee(ze);return C(Je,"source")||(Je.source=fe(Me,typeof rt=="string"?rt:"")),ze};Function.prototype.toString=Re((function(){return k(this)&&X(this).source||H(this)}),"toString")},298:function(A,P,f){var g=f(2195),S=f(5397),k=f(8480).f,C=f(7680),O=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];A.exports.f=function(U){return O&&g(U)==="Window"?(function(H){try{return k(H)}catch{return C(O)}})(U):k(S(U))}},350:function(A,P,f){var g=f(3724),S=f(9297),k=Function.prototype,C=g&&Object.getOwnPropertyDescriptor,O=S(k,"name"),U=O&&(function(){}).name==="something",H=O&&(!g||g&&C(k,"name").configurable);A.exports={EXISTS:O,PROPER:U,CONFIGURABLE:H}},397:function(A,P,f){var g=f(7751);A.exports=g("document","documentElement")},421:function(A){A.exports={}},511:function(A,P,f){var g=f(9167),S=f(9297),k=f(1951),C=f(4913).f;A.exports=function(O){var U=g.Symbol||(g.Symbol={});S(U,O)||C(U,O,{value:k.f(O)})}},566:function(A,P,f){var g=f(9504),S=f(9306),k=f(34),C=f(9297),O=f(7680),U=f(616),H=Function,V=g([].concat),ee=g([].join),X={};A.exports=U?H.bind:function(M){var Q=S(this),ue=Q.prototype,ne=O(arguments,1),fe=function(){var ce=V(ne,O(arguments));return this instanceof fe?(function(Me,Re,ze){if(!C(X,Re)){for(var rt=[],Ve=0;Ve<Re;Ve++)rt[Ve]="a["+Ve+"]";X[Re]=H("C,a","return new C("+ee(rt,",")+")")}return X[Re](Me,ze)})(Q,ce.length,ce):Q.apply(M,ce)};return k(ue)&&(fe.prototype=ue),fe}},597:function(A,P,f){var g=f(9039),S=f(8227),k=f(9519),C=S("species");A.exports=function(O){return k>=51||!g((function(){var U=[];return(U.constructor={})[C]=function(){return{foo:1}},U[O](Boolean).foo!==1}))}},616:function(A,P,f){var g=f(9039);A.exports=!g((function(){var S=(function(){}).bind();return typeof S!="function"||S.hasOwnProperty("prototype")}))},655:function(A,P,f){var g=f(6955),S=String;A.exports=function(k){if(g(k)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return S(k)}},687:function(A,P,f){var g=f(4913).f,S=f(9297),k=f(8227)("toStringTag");A.exports=function(C,O,U){C&&!U&&(C=C.prototype),C&&!S(C,k)&&g(C,k,{configurable:!0,value:O})}},706:function(A,P,f){var g=f(350).PROPER,S=f(9039),k=f(7452);A.exports=function(C){return S((function(){return!!k[C]()||"​᠎"[C]()!=="​᠎"||g&&k[C].name!==C}))}},739:function(A,P,f){var g=f(6518),S=f(9039),k=f(8981),C=f(2777);g({target:"Date",proto:!0,arity:1,forced:S((function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}))},{toJSON:function(O){var U=k(this),H=C(U,"number");return typeof H!="number"||isFinite(H)?U.toISOString():null}})},741:function(A){var P=Math.ceil,f=Math.floor;A.exports=Math.trunc||function(g){var S=+g;return(S>0?f:P)(S)}},744:function(A,P,f){var g=f(9565),S=f(9504),k=f(9228),C=f(8551),O=f(34),U=f(7750),H=f(2293),V=f(7829),ee=f(8014),X=f(655),M=f(5966),Q=f(6682),ue=f(8429),ne=f(9039),fe=ue.UNSUPPORTED_Y,ce=Math.min,Me=S([].push),Re=S("".slice),ze=!ne((function(){var Ve=/(?:)/,Je=Ve.exec;Ve.exec=function(){return Je.apply(this,arguments)};var We="ab".split(Ve);return We.length!==2||We[0]!=="a"||We[1]!=="b"})),rt="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;k("split",(function(Ve,Je,We){var it="0".split(void 0,0).length?function(Qe,At){return Qe===void 0&&At===0?[]:g(Je,this,Qe,At)}:Je;return[function(Qe,At){var xt=U(this),Te=O(Qe)?M(Qe,Ve):void 0;return Te?g(Te,Qe,xt,At):g(it,X(xt),Qe,At)},function(Qe,At){var xt=C(this),Te=X(Qe);if(!rt){var Ke=We(it,xt,Te,At,it!==Je);if(Ke.done)return Ke.value}var Pe=H(xt,RegExp),qe=xt.unicode,ft=(xt.ignoreCase?"i":"")+(xt.multiline?"m":"")+(xt.unicode?"u":"")+(fe?"g":"y"),ot=new Pe(fe?"^(?:"+xt.source+")":xt,ft),pt=At===void 0?4294967295:At>>>0;if(pt===0)return[];if(Te.length===0)return Q(ot,Te)===null?[Te]:[];for(var ke=0,st=0,gt=[];st<Te.length;){ot.lastIndex=fe?0:st;var kt,Mt=Q(ot,fe?Re(Te,st):Te);if(Mt===null||(kt=ce(ee(ot.lastIndex+(fe?st:0)),Te.length))===ke)st=V(Te,st,qe);else{if(Me(gt,Re(Te,ke,st)),gt.length===pt)return gt;for(var de=1;de<=Mt.length-1;de++)if(Me(gt,Mt[de]),gt.length===pt)return gt;st=ke=kt}}return Me(gt,Re(Te,ke)),gt}]}),rt||!ze,fe)},757:function(A,P,f){var g=f(7751),S=f(4901),k=f(1625),C=f(7040),O=Object;A.exports=C?function(U){return typeof U=="symbol"}:function(U){var H=g("Symbol");return S(H)&&k(H.prototype,O(U))}},788:function(A,P,f){var g=f(34),S=f(2195),k=f(8227)("match");A.exports=function(C){var O;return g(C)&&((O=C[k])!==void 0?!!O:S(C)==="RegExp")}},825:function(A,P,f){var g=f(6518),S=f(7751),k=f(8745),C=f(566),O=f(5548),U=f(8551),H=f(34),V=f(2360),ee=f(9039),X=S("Reflect","construct"),M=Object.prototype,Q=[].push,ue=ee((function(){function ce(){}return!(X((function(){}),[],ce)instanceof ce)})),ne=!ee((function(){X((function(){}))})),fe=ue||ne;g({target:"Reflect",stat:!0,forced:fe,sham:fe},{construct:function(ce,Me){O(ce),U(Me);var Re=arguments.length<3?ce:O(arguments[2]);if(ne&&!ue)return X(ce,Me,Re);if(ce===Re){switch(Me.length){case 0:return new ce;case 1:return new ce(Me[0]);case 2:return new ce(Me[0],Me[1]);case 3:return new ce(Me[0],Me[1],Me[2]);case 4:return new ce(Me[0],Me[1],Me[2],Me[3])}var ze=[null];return k(Q,ze,Me),new(k(C,ce,ze))}var rt=Re.prototype,Ve=V(H(rt)?rt:M),Je=k(ce,Ve,Me);return H(Je)?Je:Ve}})},851:function(A,P,f){var g=f(6955),S=f(5966),k=f(4117),C=f(6269),O=f(8227)("iterator");A.exports=function(U){if(!k(U))return S(U,O)||S(U,"@@iterator")||C[g(U)]}},926:function(A,P,f){var g=f(9306),S=f(8981),k=f(7055),C=f(6198),O=TypeError,U="Reduce of empty array with no initial value",H=function(V){return function(ee,X,M,Q){var ue=S(ee),ne=k(ue),fe=C(ue);if(g(X),fe===0&&M<2)throw new O(U);var ce=V?fe-1:0,Me=V?-1:1;if(M<2)for(;;){if(ce in ne){Q=ne[ce],ce+=Me;break}if(ce+=Me,V?ce<0:fe<=ce)throw new O(U)}for(;V?ce>=0:fe>ce;ce+=Me)ce in ne&&(Q=X(Q,ne[ce],ce,ue));return Q}};A.exports={left:H(!1),right:H(!0)}},1034:function(A,P,f){var g=f(9565),S=f(9297),k=f(1625),C=f(5213),O=f(7979),U=RegExp.prototype;A.exports=C.correct?function(H){return H.flags}:function(H){return C.correct||!k(U,H)||S(H,"flags")?H.flags:g(O,H)}},1056:function(A,P,f){var g=f(4913).f;A.exports=function(S,k,C){C in S||g(S,C,{configurable:!0,get:function(){return k[C]},set:function(O){k[C]=O}})}},1072:function(A,P,f){var g=f(1828),S=f(8727);A.exports=Object.keys||function(k){return g(k,S)}},1088:function(A,P,f){var g=f(6518),S=f(9565),k=f(6395),C=f(350),O=f(4901),U=f(3994),H=f(2787),V=f(2967),ee=f(687),X=f(6699),M=f(6840),Q=f(8227),ue=f(6269),ne=f(7657),fe=C.PROPER,ce=C.CONFIGURABLE,Me=ne.IteratorPrototype,Re=ne.BUGGY_SAFARI_ITERATORS,ze=Q("iterator"),rt="keys",Ve="values",Je="entries",We=function(){return this};A.exports=function(it,Qe,At,xt,Te,Ke,Pe){U(At,Qe,xt);var qe,ft,ot,pt=function(De){if(De===Te&&Mt)return Mt;if(!Re&&De&&De in gt)return gt[De];switch(De){case rt:case Ve:case Je:return function(){return new At(this,De)}}return function(){return new At(this)}},ke=Qe+" Iterator",st=!1,gt=it.prototype,kt=gt[ze]||gt["@@iterator"]||Te&&gt[Te],Mt=!Re&&kt||pt(Te),de=Qe==="Array"&&gt.entries||kt;if(de&&(qe=H(de.call(new it)))!==Object.prototype&&qe.next&&(k||H(qe)===Me||(V?V(qe,Me):O(qe[ze])||M(qe,ze,We)),ee(qe,ke,!0,!0),k&&(ue[ke]=We)),fe&&Te===Ve&&kt&&kt.name!==Ve&&(!k&&ce?X(gt,"name",Ve):(st=!0,Mt=function(){return S(kt,this)})),Te)if(ft={values:pt(Ve),keys:Ke?Mt:pt(rt),entries:pt(Je)},Pe)for(ot in ft)(Re||st||!(ot in gt))&&M(gt,ot,ft[ot]);else g({target:Qe,proto:!0,forced:Re||st},ft);return k&&!Pe||gt[ze]===Mt||M(gt,ze,Mt,{name:Te}),ue[Qe]=Mt,ft}},1181:function(A,P,f){var g,S,k,C=f(8622),O=f(4576),U=f(34),H=f(6699),V=f(9297),ee=f(7629),X=f(6119),M=f(421),Q="Object already initialized",ue=O.TypeError,ne=O.WeakMap;if(C||ee.state){var fe=ee.state||(ee.state=new ne);fe.get=fe.get,fe.has=fe.has,fe.set=fe.set,g=function(Me,Re){if(fe.has(Me))throw new ue(Q);return Re.facade=Me,fe.set(Me,Re),Re},S=function(Me){return fe.get(Me)||{}},k=function(Me){return fe.has(Me)}}else{var ce=X("state");M[ce]=!0,g=function(Me,Re){if(V(Me,ce))throw new ue(Q);return Re.facade=Me,H(Me,ce,Re),Re},S=function(Me){return V(Me,ce)?Me[ce]:{}},k=function(Me){return V(Me,ce)}}A.exports={set:g,get:S,has:k,enforce:function(Me){return k(Me)?S(Me):g(Me,{})},getterFor:function(Me){return function(Re){var ze;if(!U(Re)||(ze=S(Re)).type!==Me)throw new ue("Incompatible receiver, "+Me+" required");return ze}}}},1240:function(A,P,f){var g=f(9504);A.exports=g(1.1.valueOf)},1278:function(A,P,f){var g=f(6518),S=f(3724),k=f(5031),C=f(5397),O=f(7347),U=f(4659);g({target:"Object",stat:!0,sham:!S},{getOwnPropertyDescriptors:function(H){for(var V,ee,X=C(H),M=O.f,Q=k(X),ue={},ne=0;Q.length>ne;)(ee=M(X,V=Q[ne++]))!==void 0&&U(ue,V,ee);return ue}})},1291:function(A,P,f){var g=f(741);A.exports=function(S){var k=+S;return k!=k||k===0?0:g(k)}},1296:function(A,P,f){var g=f(4495);A.exports=g&&!!Symbol.for&&!!Symbol.keyFor},1436:function(A,P,f){var g=f(8227)("match");A.exports=function(S){var k=/./;try{"/./"[S](k)}catch{try{return k[g]=!1,"/./"[S](k)}catch{}}return!1}},1469:function(A,P,f){var g=f(7433);A.exports=function(S,k){return new(g(S))(k===0?0:k)}},1480:function(A,P,f){var g=f(6518),S=f(9039),k=f(298).f;g({target:"Object",stat:!0,forced:S((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:k})},1510:function(A,P,f){var g=f(6518),S=f(7751),k=f(9297),C=f(655),O=f(5745),U=f(1296),H=O("string-to-symbol-registry"),V=O("symbol-to-string-registry");g({target:"Symbol",stat:!0,forced:!U},{for:function(ee){var X=C(ee);if(k(H,X))return H[X];var M=S("Symbol")(X);return H[X]=M,V[M]=X,M}})},1625:function(A,P,f){var g=f(9504);A.exports=g({}.isPrototypeOf)},1699:function(A,P,f){var g=f(6518),S=f(9504),k=f(5749),C=f(7750),O=f(655),U=f(1436),H=S("".indexOf);g({target:"String",proto:!0,forced:!U("includes")},{includes:function(V){return!!~H(O(C(this)),O(k(V)),arguments.length>1?arguments[1]:void 0)}})},1761:function(A,P,f){var g=f(9565),S=f(9504),k=f(9228),C=f(8551),O=f(34),U=f(8014),H=f(655),V=f(7750),ee=f(5966),X=f(7829),M=f(1034),Q=f(6682),ue=S("".indexOf);k("match",(function(ne,fe,ce){return[function(Me){var Re=V(this),ze=O(Me)?ee(Me,ne):void 0;return ze?g(ze,Me,Re):new RegExp(Me)[ne](H(Re))},function(Me){var Re=C(this),ze=H(Me),rt=ce(fe,Re,ze);if(rt.done)return rt.value;var Ve=H(M(Re));if(ue(Ve,"g")===-1)return Q(Re,ze);var Je=ue(Ve,"u")!==-1;Re.lastIndex=0;for(var We,it=[],Qe=0;(We=Q(Re,ze))!==null;){var At=H(We[0]);it[Qe]=At,At===""&&(Re.lastIndex=X(ze,U(Re.lastIndex),Je)),Qe++}return Qe===0?null:it}]}))},1828:function(A,P,f){var g=f(9504),S=f(9297),k=f(5397),C=f(9617).indexOf,O=f(421),U=g([].push);A.exports=function(H,V){var ee,X=k(H),M=0,Q=[];for(ee in X)!S(O,ee)&&S(X,ee)&&U(Q,ee);for(;V.length>M;)S(X,ee=V[M++])&&(~C(Q,ee)||U(Q,ee));return Q}},1951:function(A,P,f){var g=f(8227);P.f=g},2008:function(A,P,f){var g=f(6518),S=f(9213).filter;g({target:"Array",proto:!0,forced:!f(597)("filter")},{filter:function(k){return S(this,k,arguments.length>1?arguments[1]:void 0)}})},2010:function(A,P,f){var g=f(3724),S=f(350).EXISTS,k=f(9504),C=f(2106),O=Function.prototype,U=k(O.toString),H=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,V=k(H.exec);g&&!S&&C(O,"name",{configurable:!0,get:function(){try{return V(H,U(this))[1]}catch{return""}}})},2062:function(A,P,f){var g=f(6518),S=f(9213).map;g({target:"Array",proto:!0,forced:!f(597)("map")},{map:function(k){return S(this,k,arguments.length>1?arguments[1]:void 0)}})},2087:function(A,P,f){var g=f(34),S=Math.floor;A.exports=Number.isInteger||function(k){return!g(k)&&isFinite(k)&&S(k)===k}},2106:function(A,P,f){var g=f(283),S=f(4913);A.exports=function(k,C,O){return O.get&&g(O.get,C,{getter:!0}),O.set&&g(O.set,C,{setter:!0}),S.f(k,C,O)}},2140:function(A,P,f){var g={};g[f(8227)("toStringTag")]="z",A.exports=String(g)==="[object z]"},2195:function(A,P,f){var g=f(9504),S=g({}.toString),k=g("".slice);A.exports=function(C){return k(S(C),8,-1)}},2211:function(A,P,f){var g=f(9039);A.exports=!g((function(){function S(){}return S.prototype.constructor=null,Object.getPrototypeOf(new S)!==S.prototype}))},2259:function(A,P,f){f(511)("iterator")},2293:function(A,P,f){var g=f(8551),S=f(5548),k=f(4117),C=f(8227)("species");A.exports=function(O,U){var H,V=g(O).constructor;return V===void 0||k(H=g(V)[C])?U:S(H)}},2360:function(A,P,f){var g,S=f(8551),k=f(6801),C=f(8727),O=f(421),U=f(397),H=f(4055),V=f(6119),ee="prototype",X="script",M=V("IE_PROTO"),Q=function(){},ue=function(ce){return"<"+X+">"+ce+"</"+X+">"},ne=function(ce){ce.write(ue("")),ce.close();var Me=ce.parentWindow.Object;return ce=null,Me},fe=function(){try{g=new ActiveXObject("htmlfile")}catch{}var ce,Me,Re;fe=typeof document<"u"?document.domain&&g?ne(g):(Me=H("iframe"),Re="java"+X+":",Me.style.display="none",U.appendChild(Me),Me.src=String(Re),(ce=Me.contentWindow.document).open(),ce.write(ue("document.F=Object")),ce.close(),ce.F):ne(g);for(var ze=C.length;ze--;)delete fe[ee][C[ze]];return fe()};O[M]=!0,A.exports=Object.create||function(ce,Me){var Re;return ce!==null?(Q[ee]=S(ce),Re=new Q,Q[ee]=null,Re[M]=ce):Re=fe(),Me===void 0?Re:k.f(Re,Me)}},2478:function(A,P,f){var g=f(9504),S=f(8981),k=Math.floor,C=g("".charAt),O=g("".replace),U=g("".slice),H=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,V=/\$([$&'`]|\d{1,2})/g;A.exports=function(ee,X,M,Q,ue,ne){var fe=M+ee.length,ce=Q.length,Me=V;return ue!==void 0&&(ue=S(ue),Me=H),O(ne,Me,(function(Re,ze){var rt;switch(C(ze,0)){case"$":return"$";case"&":return ee;case"`":return U(X,0,M);case"'":return U(X,fe);case"<":rt=ue[U(ze,1,-1)];break;default:var Ve=+ze;if(Ve===0)return Re;if(Ve>ce){var Je=k(Ve/10);return Je===0?Re:Je<=ce?Q[Je-1]===void 0?C(ze,1):Q[Je-1]+C(ze,1):Re}rt=Q[Ve-1]}return rt===void 0?"":rt}))}},2529:function(A){A.exports=function(P,f){return{value:P,done:f}}},2551:function(A,P,f){var g=f(6395),S=f(4576),k=f(9039),C=f(3607);A.exports=g||!k((function(){if(!(C&&C<535)){var O=Math.random();__defineSetter__.call(null,O,(function(){})),delete S[O]}}))},2637:function(A,P,f){f(6518)({target:"Number",stat:!0},{isInteger:f(2087)})},2675:function(A,P,f){f(6761),f(1510),f(7812),f(3110),f(9773)},2712:function(A,P,f){var g=f(6518),S=f(926).left,k=f(4598),C=f(9519);g({target:"Array",proto:!0,forced:!f(6193)&&C>79&&C<83||!k("reduce")},{reduce:function(O){var U=arguments.length;return S(this,O,U,U>1?arguments[1]:void 0)}})},2762:function(A,P,f){var g=f(6518),S=f(3802).trim;g({target:"String",proto:!0,forced:f(706)("trim")},{trim:function(){return S(this)}})},2777:function(A,P,f){var g=f(9565),S=f(34),k=f(757),C=f(5966),O=f(4270),U=f(8227),H=TypeError,V=U("toPrimitive");A.exports=function(ee,X){if(!S(ee)||k(ee))return ee;var M,Q=C(ee,V);if(Q){if(X===void 0&&(X="default"),M=g(Q,ee,X),!S(M)||k(M))return M;throw new H("Can't convert object to primitive value")}return X===void 0&&(X="number"),O(ee,X)}},2787:function(A,P,f){var g=f(9297),S=f(4901),k=f(8981),C=f(6119),O=f(2211),U=C("IE_PROTO"),H=Object,V=H.prototype;A.exports=O?H.getPrototypeOf:function(ee){var X=k(ee);if(g(X,U))return X[U];var M=X.constructor;return S(M)&&X instanceof M?M.prototype:X instanceof H?V:null}},2796:function(A,P,f){var g=f(9039),S=f(4901),k=/#|\.prototype\./,C=function(ee,X){var M=U[O(ee)];return M===V||M!==H&&(S(X)?g(X):!!X)},O=C.normalize=function(ee){return String(ee).replace(k,".").toLowerCase()},U=C.data={},H=C.NATIVE="N",V=C.POLYFILL="P";A.exports=C},2839:function(A,P,f){var g=f(4576).navigator,S=g&&g.userAgent;A.exports=S?String(S):""},2892:function(A,P,f){var g=f(6518),S=f(6395),k=f(3724),C=f(4576),O=f(9167),U=f(9504),H=f(2796),V=f(9297),ee=f(3167),X=f(1625),M=f(757),Q=f(2777),ue=f(9039),ne=f(8480).f,fe=f(7347).f,ce=f(4913).f,Me=f(1240),Re=f(3802).trim,ze="Number",rt=C[ze],Ve=O[ze],Je=rt.prototype,We=C.TypeError,it=U("".slice),Qe=U("".charCodeAt),At=function(Pe){var qe,ft,ot,pt,ke,st,gt,kt,Mt=Q(Pe,"number");if(M(Mt))throw new We("Cannot convert a Symbol value to a number");if(typeof Mt=="string"&&Mt.length>2){if(Mt=Re(Mt),(qe=Qe(Mt,0))===43||qe===45){if((ft=Qe(Mt,2))===88||ft===120)return NaN}else if(qe===48){switch(Qe(Mt,1)){case 66:case 98:ot=2,pt=49;break;case 79:case 111:ot=8,pt=55;break;default:return+Mt}for(st=(ke=it(Mt,2)).length,gt=0;gt<st;gt++)if((kt=Qe(ke,gt))<48||kt>pt)return NaN;return parseInt(ke,ot)}}return+Mt},xt=H(ze,!rt(" 0o1")||!rt("0b1")||rt("+0x1")),Te=function(Pe){var qe,ft=arguments.length<1?0:rt((function(ot){var pt=Q(ot,"number");return typeof pt=="bigint"?pt:At(pt)})(Pe));return X(Je,qe=this)&&ue((function(){Me(qe)}))?ee(Object(ft),this,Te):ft};Te.prototype=Je,xt&&!S&&(Je.constructor=Te),g({global:!0,constructor:!0,wrap:!0,forced:xt},{Number:Te});var Ke=function(Pe,qe){for(var ft,ot=k?ne(qe):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),pt=0;ot.length>pt;pt++)V(qe,ft=ot[pt])&&!V(Pe,ft)&&ce(Pe,ft,fe(qe,ft))};S&&Ve&&Ke(O[ze],Ve),(xt||S)&&Ke(O[ze],rt)},2953:function(A,P,f){var g=f(4576),S=f(7400),k=f(9296),C=f(3792),O=f(6699),U=f(687),H=f(8227)("iterator"),V=C.values,ee=function(M,Q){if(M){if(M[H]!==V)try{O(M,H,V)}catch{M[H]=V}if(U(M,Q,!0),S[Q]){for(var ue in C)if(M[ue]!==C[ue])try{O(M,ue,C[ue])}catch{M[ue]=C[ue]}}}};for(var X in S)ee(g[X]&&g[X].prototype,X);ee(k,"DOMTokenList")},2967:function(A,P,f){var g=f(6706),S=f(34),k=f(7750),C=f(3506);A.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var O,U=!1,H={};try{(O=g(Object.prototype,"__proto__","set"))(H,[]),U=H instanceof Array}catch{}return function(V,ee){return k(V),C(ee),S(V)&&(U?O(V,ee):V.__proto__=ee),V}})():void 0)},3110:function(A,P,f){var g=f(6518),S=f(7751),k=f(8745),C=f(9565),O=f(9504),U=f(9039),H=f(4901),V=f(757),ee=f(7680),X=f(6933),M=f(4495),Q=String,ue=S("JSON","stringify"),ne=O(/./.exec),fe=O("".charAt),ce=O("".charCodeAt),Me=O("".replace),Re=O(1.1.toString),ze=/[\uD800-\uDFFF]/g,rt=/^[\uD800-\uDBFF]$/,Ve=/^[\uDC00-\uDFFF]$/,Je=!M||U((function(){var At=S("Symbol")("stringify detection");return ue([At])!=="[null]"||ue({a:At})!=="{}"||ue(Object(At))!=="{}"})),We=U((function(){return ue("\uDF06\uD834")!=='"\\udf06\\ud834"'||ue("\uDEAD")!=='"\\udead"'})),it=function(At,xt){var Te=ee(arguments),Ke=X(xt);if(H(Ke)||At!==void 0&&!V(At))return Te[1]=function(Pe,qe){if(H(Ke)&&(qe=C(Ke,this,Q(Pe),qe)),!V(qe))return qe},k(ue,null,Te)},Qe=function(At,xt,Te){var Ke=fe(Te,xt-1),Pe=fe(Te,xt+1);return ne(rt,At)&&!ne(Ve,Pe)||ne(Ve,At)&&!ne(rt,Ke)?"\\u"+Re(ce(At,0),16):At};ue&&g({target:"JSON",stat:!0,arity:3,forced:Je||We},{stringify:function(At,xt,Te){var Ke=ee(arguments),Pe=k(Je?it:ue,null,Ke);return We&&typeof Pe=="string"?Me(Pe,ze,Qe):Pe}})},3167:function(A,P,f){var g=f(4901),S=f(34),k=f(2967);A.exports=function(C,O,U){var H,V;return k&&g(H=O.constructor)&&H!==U&&S(V=H.prototype)&&V!==U.prototype&&k(C,V),C}},3179:function(A,P,f){var g=f(2140),S=f(6955);A.exports=g?{}.toString:function(){return"[object "+S(this)+"]"}},3392:function(A,P,f){var g=f(9504),S=0,k=Math.random(),C=g(1.1.toString);A.exports=function(O){return"Symbol("+(O===void 0?"":O)+")_"+C(++S+k,36)}},3418:function(A,P,f){var g=f(6518),S=f(7916);g({target:"Array",stat:!0,forced:!f(4428)((function(k){Array.from(k)}))},{from:S})},3500:function(A,P,f){var g=f(4576),S=f(7400),k=f(9296),C=f(235),O=f(6699),U=function(V){if(V&&V.forEach!==C)try{O(V,"forEach",C)}catch{V.forEach=C}};for(var H in S)S[H]&&U(g[H]&&g[H].prototype);U(k)},3506:function(A,P,f){var g=f(3925),S=String,k=TypeError;A.exports=function(C){if(g(C))return C;throw new k("Can't set "+S(C)+" as a prototype")}},3517:function(A,P,f){var g=f(9504),S=f(9039),k=f(4901),C=f(6955),O=f(7751),U=f(3706),H=function(){},V=O("Reflect","construct"),ee=/^\s*(?:class|function)\b/,X=g(ee.exec),M=!ee.test(H),Q=function(ne){if(!k(ne))return!1;try{return V(H,[],ne),!0}catch{return!1}},ue=function(ne){if(!k(ne))return!1;switch(C(ne)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return M||!!X(ee,U(ne))}catch{return!0}};ue.sham=!0,A.exports=!V||S((function(){var ne;return Q(Q.call)||!Q(Object)||!Q((function(){ne=!0}))||ne}))?ue:Q},3607:function(A,P,f){var g=f(2839).match(/AppleWebKit\/(\d+)\./);A.exports=!!g&&+g[1]},3635:function(A,P,f){var g=f(9039),S=f(4576).RegExp;A.exports=g((function(){var k=S(".","s");return!(k.dotAll&&k.test(`
`)&&k.flags==="s")}))},3640:function(A,P,f){var g=f(8551),S=f(4270),k=TypeError;A.exports=function(C){if(g(this),C==="string"||C==="default")C="string";else if(C!=="number")throw new k("Incorrect hint");return S(this,C)}},3706:function(A,P,f){var g=f(9504),S=f(4901),k=f(7629),C=g(Function.toString);S(k.inspectSource)||(k.inspectSource=function(O){return C(O)}),A.exports=k.inspectSource},3709:function(A,P,f){var g=f(2839).match(/firefox\/(\d+)/i);A.exports=!!g&&+g[1]},3717:function(A,P){P.f=Object.getOwnPropertySymbols},3724:function(A,P,f){var g=f(9039);A.exports=!g((function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}))},3763:function(A,P,f){var g=f(2839);A.exports=/MSIE|Trident/.test(g)},3792:function(A,P,f){var g=f(5397),S=f(6469),k=f(6269),C=f(1181),O=f(4913).f,U=f(1088),H=f(2529),V=f(6395),ee=f(3724),X="Array Iterator",M=C.set,Q=C.getterFor(X);A.exports=U(Array,"Array",(function(ne,fe){M(this,{type:X,target:g(ne),index:0,kind:fe})}),(function(){var ne=Q(this),fe=ne.target,ce=ne.index++;if(!fe||ce>=fe.length)return ne.target=null,H(void 0,!0);switch(ne.kind){case"keys":return H(ce,!1);case"values":return H(fe[ce],!1)}return H([ce,fe[ce]],!1)}),"values");var ue=k.Arguments=k.Array;if(S("keys"),S("values"),S("entries"),!V&&ee&&ue.name!=="values")try{O(ue,"name",{value:"values"})}catch{}},3802:function(A,P,f){var g=f(9504),S=f(7750),k=f(655),C=f(7452),O=g("".replace),U=RegExp("^["+C+"]+"),H=RegExp("(^|[^"+C+"])["+C+"]+$"),V=function(ee){return function(X){var M=k(S(X));return 1&ee&&(M=O(M,U,"")),2&ee&&(M=O(M,H,"$1")),M}};A.exports={start:V(1),end:V(2),trim:V(3)}},3851:function(A,P,f){var g=f(6518),S=f(9039),k=f(5397),C=f(7347).f,O=f(3724);g({target:"Object",stat:!0,forced:!O||S((function(){C(1)})),sham:!O},{getOwnPropertyDescriptor:function(U,H){return C(k(U),H)}})},3925:function(A,P,f){var g=f(34);A.exports=function(S){return g(S)||S===null}},3994:function(A,P,f){var g=f(7657).IteratorPrototype,S=f(2360),k=f(6980),C=f(687),O=f(6269),U=function(){return this};A.exports=function(H,V,ee,X){var M=V+" Iterator";return H.prototype=S(g,{next:k(+!X,ee)}),C(H,M,!1,!0),O[M]=U,H}},4055:function(A,P,f){var g=f(4576),S=f(34),k=g.document,C=S(k)&&S(k.createElement);A.exports=function(O){return C?k.createElement(O):{}}},4117:function(A){A.exports=function(P){return P==null}},4209:function(A,P,f){var g=f(8227),S=f(6269),k=g("iterator"),C=Array.prototype;A.exports=function(O){return O!==void 0&&(S.Array===O||C[k]===O)}},4213:function(A,P,f){var g=f(3724),S=f(9504),k=f(9565),C=f(9039),O=f(1072),U=f(3717),H=f(8773),V=f(8981),ee=f(7055),X=Object.assign,M=Object.defineProperty,Q=S([].concat);A.exports=!X||C((function(){if(g&&X({b:1},X(M({},"a",{enumerable:!0,get:function(){M(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var ue={},ne={},fe=Symbol("assign detection"),ce="abcdefghijklmnopqrst";return ue[fe]=7,ce.split("").forEach((function(Me){ne[Me]=Me})),X({},ue)[fe]!==7||O(X({},ne)).join("")!==ce}))?function(ue,ne){for(var fe=V(ue),ce=arguments.length,Me=1,Re=U.f,ze=H.f;ce>Me;)for(var rt,Ve=ee(arguments[Me++]),Je=Re?Q(O(Ve),Re(Ve)):O(Ve),We=Je.length,it=0;We>it;)rt=Je[it++],g&&!k(ze,Ve,rt)||(fe[rt]=Ve[rt]);return fe}:X},4215:function(A,P,f){var g=f(4576),S=f(2839),k=f(2195),C=function(O){return S.slice(0,O.length)===O};A.exports=C("Bun/")?"BUN":C("Cloudflare-Workers")?"CLOUDFLARE":C("Deno/")?"DENO":C("Node.js/")?"NODE":g.Bun&&typeof Bun.version=="string"?"BUN":g.Deno&&typeof Deno.version=="object"?"DENO":k(g.process)==="process"?"NODE":g.window&&g.document?"BROWSER":"REST"},4270:function(A,P,f){var g=f(9565),S=f(4901),k=f(34),C=TypeError;A.exports=function(O,U){var H,V;if(U==="string"&&S(H=O.toString)&&!k(V=g(H,O))||S(H=O.valueOf)&&!k(V=g(H,O))||U!=="string"&&S(H=O.toString)&&!k(V=g(H,O)))return V;throw new C("Can't convert object to primitive value")}},4376:function(A,P,f){var g=f(2195);A.exports=Array.isArray||function(S){return g(S)==="Array"}},4423:function(A,P,f){var g=f(6518),S=f(9617).includes,k=f(9039),C=f(6469);g({target:"Array",proto:!0,forced:k((function(){return!Array(1).includes()}))},{includes:function(O){return S(this,O,arguments.length>1?arguments[1]:void 0)}}),C("includes")},4428:function(A,P,f){var g=f(8227)("iterator"),S=!1;try{var k=0,C={next:function(){return{done:!!k++}},return:function(){S=!0}};C[g]=function(){return this},Array.from(C,(function(){throw 2}))}catch{}A.exports=function(O,U){try{if(!U&&!S)return!1}catch{return!1}var H=!1;try{var V={};V[g]=function(){return{next:function(){return{done:H=!0}}}},O(V)}catch{}return H}},4488:function(A,P,f){var g=f(7680),S=Math.floor,k=function(C,O){var U=C.length;if(U<8)for(var H,V,ee=1;ee<U;){for(V=ee,H=C[ee];V&&O(C[V-1],H)>0;)C[V]=C[--V];V!==ee++&&(C[V]=H)}else for(var X=S(U/2),M=k(g(C,0,X),O),Q=k(g(C,X),O),ue=M.length,ne=Q.length,fe=0,ce=0;fe<ue||ce<ne;)C[fe+ce]=fe<ue&&ce<ne?O(M[fe],Q[ce])<=0?M[fe++]:Q[ce++]:fe<ue?M[fe++]:Q[ce++];return C};A.exports=k},4495:function(A,P,f){var g=f(9519),S=f(9039),k=f(4576).String;A.exports=!!Object.getOwnPropertySymbols&&!S((function(){var C=Symbol("symbol detection");return!k(C)||!(Object(C)instanceof Symbol)||!Symbol.sham&&g&&g<41}))},4527:function(A,P,f){var g=f(3724),S=f(4376),k=TypeError,C=Object.getOwnPropertyDescriptor,O=g&&!(function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(U){return U instanceof TypeError}})();A.exports=O?function(U,H){if(S(U)&&!C(U,"length").writable)throw new k("Cannot set read only .length");return U.length=H}:function(U,H){return U.length=H}},4554:function(A,P,f){var g=f(6518),S=f(8981),k=f(5610),C=f(1291),O=f(6198),U=f(4527),H=f(6837),V=f(1469),ee=f(4659),X=f(4606),M=f(597)("splice"),Q=Math.max,ue=Math.min;g({target:"Array",proto:!0,forced:!M},{splice:function(ne,fe){var ce,Me,Re,ze,rt,Ve,Je=S(this),We=O(Je),it=k(ne,We),Qe=arguments.length;for(Qe===0?ce=Me=0:Qe===1?(ce=0,Me=We-it):(ce=Qe-2,Me=ue(Q(C(fe),0),We-it)),H(We+ce-Me),Re=V(Je,Me),ze=0;ze<Me;ze++)(rt=it+ze)in Je&&ee(Re,ze,Je[rt]);if(Re.length=Me,ce<Me){for(ze=it;ze<We-Me;ze++)Ve=ze+ce,(rt=ze+Me)in Je?Je[Ve]=Je[rt]:X(Je,Ve);for(ze=We;ze>We-Me+ce;ze--)X(Je,ze-1)}else if(ce>Me)for(ze=We-Me;ze>it;ze--)Ve=ze+ce-1,(rt=ze+Me-1)in Je?Je[Ve]=Je[rt]:X(Je,Ve);for(ze=0;ze<ce;ze++)Je[ze+it]=arguments[ze+2];return U(Je,We-Me+ce),Re}})},4576:function(A,P,f){var g=function(S){return S&&S.Math===Math&&S};A.exports=g(typeof globalThis=="object"&&globalThis)||g(typeof window=="object"&&window)||g(typeof self=="object"&&self)||g(typeof f.g=="object"&&f.g)||g(typeof this=="object"&&this)||(function(){return this})()||Function("return this")()},4598:function(A,P,f){var g=f(9039);A.exports=function(S,k){var C=[][S];return!!C&&g((function(){C.call(null,k||function(){return 1},1)}))}},4606:function(A,P,f){var g=f(6823),S=TypeError;A.exports=function(k,C){if(!delete k[C])throw new S("Cannot delete property "+g(C)+" of "+g(k))}},4659:function(A,P,f){var g=f(3724),S=f(4913),k=f(6980);A.exports=function(C,O,U){g?S.f(C,O,k(0,U)):C[O]=U}},4782:function(A,P,f){var g=f(6518),S=f(4376),k=f(3517),C=f(34),O=f(5610),U=f(6198),H=f(5397),V=f(4659),ee=f(8227),X=f(597),M=f(7680),Q=X("slice"),ue=ee("species"),ne=Array,fe=Math.max;g({target:"Array",proto:!0,forced:!Q},{slice:function(ce,Me){var Re,ze,rt,Ve=H(this),Je=U(Ve),We=O(ce,Je),it=O(Me===void 0?Je:Me,Je);if(S(Ve)&&(Re=Ve.constructor,(k(Re)&&(Re===ne||S(Re.prototype))||C(Re)&&(Re=Re[ue])===null)&&(Re=void 0),Re===ne||Re===void 0))return M(Ve,We,it);for(ze=new(Re===void 0?ne:Re)(fe(it-We,0)),rt=0;We<it;We++,rt++)We in Ve&&V(ze,rt,Ve[We]);return ze.length=rt,ze}})},4864:function(A,P,f){var g=f(3724),S=f(4576),k=f(9504),C=f(2796),O=f(3167),U=f(6699),H=f(2360),V=f(8480).f,ee=f(1625),X=f(788),M=f(655),Q=f(1034),ue=f(8429),ne=f(1056),fe=f(6840),ce=f(9039),Me=f(9297),Re=f(1181).enforce,ze=f(7633),rt=f(8227),Ve=f(3635),Je=f(8814),We=rt("match"),it=S.RegExp,Qe=it.prototype,At=S.SyntaxError,xt=k(Qe.exec),Te=k("".charAt),Ke=k("".replace),Pe=k("".indexOf),qe=k("".slice),ft=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,ot=/a/g,pt=/a/g,ke=new it(ot)!==ot,st=ue.MISSED_STICKY,gt=ue.UNSUPPORTED_Y;if(C("RegExp",g&&(!ke||st||Ve||Je||ce((function(){return pt[We]=!1,it(ot)!==ot||it(pt)===pt||String(it(ot,"i"))!=="/a/i"}))))){for(var kt=function(De,Le){var ve,Ze,mt,dt,jt,wt,Tt=ee(Qe,this),me=X(De),Ie=Le===void 0,te=[],Z=De;if(!Tt&&me&&Ie&&De.constructor===kt)return De;if((me||ee(Qe,De))&&(De=De.source,Ie&&(Le=Q(Z))),De=De===void 0?"":M(De),Le=Le===void 0?"":M(Le),Z=De,Ve&&"dotAll"in ot&&(Ze=!!Le&&Pe(Le,"s")>-1)&&(Le=Ke(Le,/s/g,"")),ve=Le,st&&"sticky"in ot&&(mt=!!Le&&Pe(Le,"y")>-1)&&gt&&(Le=Ke(Le,/y/g,"")),Je&&(dt=(function(Be){for(var Xe,nt=Be.length,ut=0,Et="",Rt=[],Ht=H(null),ss=!1,Pt=!1,ms=0,as="";ut<=nt;ut++){if((Xe=Te(Be,ut))==="\\")Xe+=Te(Be,++ut);else if(Xe==="]")ss=!1;else if(!ss)switch(!0){case Xe==="[":ss=!0;break;case Xe==="(":if(Et+=Xe,qe(Be,ut+1,ut+3)==="?:")continue;xt(ft,qe(Be,ut+1))&&(ut+=2,Pt=!0),ms++;continue;case(Xe===">"&&Pt):if(as===""||Me(Ht,as))throw new At("Invalid capture group name");Ht[as]=!0,Rt[Rt.length]=[as,ms],Pt=!1,as="";continue}Pt?as+=Xe:Et+=Xe}return[Et,Rt]})(De),De=dt[0],te=dt[1]),jt=O(it(De,Le),Tt?this:Qe,kt),(Ze||mt||te.length)&&(wt=Re(jt),Ze&&(wt.dotAll=!0,wt.raw=kt((function(Be){for(var Xe,nt=Be.length,ut=0,Et="",Rt=!1;ut<=nt;ut++)(Xe=Te(Be,ut))!=="\\"?Rt||Xe!=="."?(Xe==="["?Rt=!0:Xe==="]"&&(Rt=!1),Et+=Xe):Et+="[\\s\\S]":Et+=Xe+Te(Be,++ut);return Et})(De),ve)),mt&&(wt.sticky=!0),te.length&&(wt.groups=te)),De!==Z)try{U(jt,"source",Z===""?"(?:)":Z)}catch{}return jt},Mt=V(it),de=0;Mt.length>de;)ne(kt,it,Mt[de++]);Qe.constructor=kt,kt.prototype=Qe,fe(S,"RegExp",kt,{constructor:!0})}ze("RegExp")},4901:function(A){var P=typeof document=="object"&&document.all;A.exports=P===void 0&&P!==void 0?function(f){return typeof f=="function"||f===P}:function(f){return typeof f=="function"}},4913:function(A,P,f){var g=f(3724),S=f(5917),k=f(8686),C=f(8551),O=f(6969),U=TypeError,H=Object.defineProperty,V=Object.getOwnPropertyDescriptor,ee="enumerable",X="configurable",M="writable";P.f=g?k?function(Q,ue,ne){if(C(Q),ue=O(ue),C(ne),typeof Q=="function"&&ue==="prototype"&&"value"in ne&&M in ne&&!ne[M]){var fe=V(Q,ue);fe&&fe[M]&&(Q[ue]=ne.value,ne={configurable:X in ne?ne[X]:fe[X],enumerable:ee in ne?ne[ee]:fe[ee],writable:!1})}return H(Q,ue,ne)}:H:function(Q,ue,ne){if(C(Q),ue=O(ue),C(ne),S)try{return H(Q,ue,ne)}catch{}if("get"in ne||"set"in ne)throw new U("Accessors not supported");return"value"in ne&&(Q[ue]=ne.value),Q}},5031:function(A,P,f){var g=f(7751),S=f(9504),k=f(8480),C=f(3717),O=f(8551),U=S([].concat);A.exports=g("Reflect","ownKeys")||function(H){var V=k.f(O(H)),ee=C.f;return ee?U(V,ee(H)):V}},5213:function(A,P,f){var g=f(4576),S=f(9039),k=g.RegExp,C=!S((function(){var O=!0;try{k(".","d")}catch{O=!1}var U={},H="",V=O?"dgimsy":"gimsy",ee=function(Q,ue){Object.defineProperty(U,Q,{get:function(){return H+=ue,!0}})},X={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var M in O&&(X.hasIndices="d"),X)ee(M,X[M]);return Object.getOwnPropertyDescriptor(k.prototype,"flags").get.call(U)!==V||H!==V}));A.exports={correct:C}},5276:function(A,P,f){var g=f(6518),S=f(7476),k=f(9617).indexOf,C=f(4598),O=S([].indexOf),U=!!O&&1/O([1],1,-0)<0;g({target:"Array",proto:!0,forced:U||!C("indexOf")},{indexOf:function(H){var V=arguments.length>1?arguments[1]:void 0;return U?O(this,H,V)||0:k(this,H,V)}})},5397:function(A,P,f){var g=f(7055),S=f(7750);A.exports=function(k){return g(S(k))}},5440:function(A,P,f){var g=f(8745),S=f(9565),k=f(9504),C=f(9228),O=f(9039),U=f(8551),H=f(4901),V=f(34),ee=f(1291),X=f(8014),M=f(655),Q=f(7750),ue=f(7829),ne=f(5966),fe=f(2478),ce=f(1034),Me=f(6682),Re=f(8227)("replace"),ze=Math.max,rt=Math.min,Ve=k([].concat),Je=k([].push),We=k("".indexOf),it=k("".slice),Qe="a".replace(/./,"$0")==="$0",At=!!/./[Re]&&/./[Re]("a","$0")==="";C("replace",(function(xt,Te,Ke){var Pe=At?"$":"$0";return[function(qe,ft){var ot=Q(this),pt=V(qe)?ne(qe,Re):void 0;return pt?S(pt,qe,ot,ft):S(Te,M(ot),qe,ft)},function(qe,ft){var ot=U(this),pt=M(qe);if(typeof ft=="string"&&We(ft,Pe)===-1&&We(ft,"$<")===-1){var ke=Ke(Te,ot,pt,ft);if(ke.done)return ke.value}var st=H(ft);st||(ft=M(ft));var gt,kt=M(ce(ot)),Mt=We(kt,"g")!==-1;Mt&&(gt=We(kt,"u")!==-1,ot.lastIndex=0);for(var de,De=[];(de=Me(ot,pt))!==null&&(Je(De,de),Mt);)M(de[0])===""&&(ot.lastIndex=ue(pt,X(ot.lastIndex),gt));for(var Le,ve="",Ze=0,mt=0;mt<De.length;mt++){for(var dt,jt=M((de=De[mt])[0]),wt=ze(rt(ee(de.index),pt.length),0),Tt=[],me=1;me<de.length;me++)Je(Tt,(Le=de[me])===void 0?Le:String(Le));var Ie=de.groups;if(st){var te=Ve([jt],Tt,wt,pt);Ie!==void 0&&Je(te,Ie),dt=M(g(ft,void 0,te))}else dt=fe(jt,pt,wt,Tt,Ie,ft);wt>=Ze&&(ve+=it(pt,Ze,wt)+dt,Ze=wt+jt.length)}return ve+it(pt,Ze)}]}),!!O((function(){var xt=/./;return xt.exec=function(){var Te=[];return Te.groups={a:"7"},Te},"".replace(xt,"$<a>")!=="7"}))||!Qe||At)},5548:function(A,P,f){var g=f(3517),S=f(6823),k=TypeError;A.exports=function(C){if(g(C))return C;throw new k(S(C)+" is not a constructor")}},5610:function(A,P,f){var g=f(1291),S=Math.max,k=Math.min;A.exports=function(C,O){var U=g(C);return U<0?S(U+O,0):k(U,O)}},5700:function(A,P,f){var g=f(511),S=f(8242);g("toPrimitive"),S()},5745:function(A,P,f){var g=f(7629);A.exports=function(S,k){return g[S]||(g[S]=k||{})}},5749:function(A,P,f){var g=f(788),S=TypeError;A.exports=function(k){if(g(k))throw new S("The method doesn't accept regular expressions");return k}},5917:function(A,P,f){var g=f(3724),S=f(9039),k=f(4055);A.exports=!g&&!S((function(){return Object.defineProperty(k("div"),"a",{get:function(){return 7}}).a!==7}))},5966:function(A,P,f){var g=f(9306),S=f(4117);A.exports=function(k,C){var O=k[C];return S(O)?void 0:g(O)}},6080:function(A,P,f){var g=f(7476),S=f(9306),k=f(616),C=g(g.bind);A.exports=function(O,U){return S(O),U===void 0?O:k?C(O,U):function(){return O.apply(U,arguments)}}},6099:function(A,P,f){var g=f(2140),S=f(6840),k=f(3179);g||S(Object.prototype,"toString",k,{unsafe:!0})},6119:function(A,P,f){var g=f(5745),S=f(3392),k=g("keys");A.exports=function(C){return k[C]||(k[C]=S(C))}},6193:function(A,P,f){var g=f(4215);A.exports=g==="NODE"},6198:function(A,P,f){var g=f(8014);A.exports=function(S){return g(S.length)}},6269:function(A){A.exports={}},6319:function(A,P,f){var g=f(8551),S=f(9539);A.exports=function(k,C,O,U){try{return U?C(g(O)[0],O[1]):C(O)}catch(H){S(k,"throw",H)}}},6395:function(A){A.exports=!1},6469:function(A,P,f){var g=f(8227),S=f(2360),k=f(4913).f,C=g("unscopables"),O=Array.prototype;O[C]===void 0&&k(O,C,{configurable:!0,value:S(null)}),A.exports=function(U){O[C][U]=!0}},6518:function(A,P,f){var g=f(4576),S=f(7347).f,k=f(6699),C=f(6840),O=f(9433),U=f(7740),H=f(2796);A.exports=function(V,ee){var X,M,Q,ue,ne,fe=V.target,ce=V.global,Me=V.stat;if(X=ce?g:Me?g[fe]||O(fe,{}):g[fe]&&g[fe].prototype)for(M in ee){if(ue=ee[M],Q=V.dontCallGetSet?(ne=S(X,M))&&ne.value:X[M],!H(ce?M:fe+(Me?".":"#")+M,V.forced)&&Q!==void 0){if(typeof ue==typeof Q)continue;U(ue,Q)}(V.sham||Q&&Q.sham)&&k(ue,"sham",!0),C(X,M,ue,V)}}},6682:function(A,P,f){var g=f(9565),S=f(8551),k=f(4901),C=f(2195),O=f(7323),U=TypeError;A.exports=function(H,V){var ee=H.exec;if(k(ee)){var X=g(ee,H,V);return X!==null&&S(X),X}if(C(H)==="RegExp")return g(O,H,V);throw new U("RegExp#exec called on incompatible receiver")}},6699:function(A,P,f){var g=f(3724),S=f(4913),k=f(6980);A.exports=g?function(C,O,U){return S.f(C,O,k(1,U))}:function(C,O,U){return C[O]=U,C}},6706:function(A,P,f){var g=f(9504),S=f(9306);A.exports=function(k,C,O){try{return g(S(Object.getOwnPropertyDescriptor(k,C)[O]))}catch{}}},6761:function(A,P,f){var g=f(6518),S=f(4576),k=f(9565),C=f(9504),O=f(6395),U=f(3724),H=f(4495),V=f(9039),ee=f(9297),X=f(1625),M=f(8551),Q=f(5397),ue=f(6969),ne=f(655),fe=f(6980),ce=f(2360),Me=f(1072),Re=f(8480),ze=f(298),rt=f(3717),Ve=f(7347),Je=f(4913),We=f(6801),it=f(8773),Qe=f(6840),At=f(2106),xt=f(5745),Te=f(6119),Ke=f(421),Pe=f(3392),qe=f(8227),ft=f(1951),ot=f(511),pt=f(8242),ke=f(687),st=f(1181),gt=f(9213).forEach,kt=Te("hidden"),Mt="Symbol",de="prototype",De=st.set,Le=st.getterFor(Mt),ve=Object[de],Ze=S.Symbol,mt=Ze&&Ze[de],dt=S.RangeError,jt=S.TypeError,wt=S.QObject,Tt=Ve.f,me=Je.f,Ie=ze.f,te=it.f,Z=C([].push),Be=xt("symbols"),Xe=xt("op-symbols"),nt=xt("wks"),ut=!wt||!wt[de]||!wt[de].findChild,Et=function(Nt,Ct,zt){var qt=Tt(ve,Ct);qt&&delete ve[Ct],me(Nt,Ct,zt),qt&&Nt!==ve&&me(ve,Ct,qt)},Rt=U&&V((function(){return ce(me({},"a",{get:function(){return me(this,"a",{value:7}).a}})).a!==7}))?Et:me,Ht=function(Nt,Ct){var zt=Be[Nt]=ce(mt);return De(zt,{type:Mt,tag:Nt,description:Ct}),U||(zt.description=Ct),zt},ss=function(Nt,Ct,zt){Nt===ve&&ss(Xe,Ct,zt),M(Nt);var qt=ue(Ct);return M(zt),ee(Be,qt)?(zt.enumerable?(ee(Nt,kt)&&Nt[kt][qt]&&(Nt[kt][qt]=!1),zt=ce(zt,{enumerable:fe(0,!1)})):(ee(Nt,kt)||me(Nt,kt,fe(1,ce(null))),Nt[kt][qt]=!0),Rt(Nt,qt,zt)):me(Nt,qt,zt)},Pt=function(Nt,Ct){M(Nt);var zt=Q(Ct),qt=Me(zt).concat(vs(zt));return gt(qt,(function(Kt){U&&!k(ms,zt,Kt)||ss(Nt,Kt,zt[Kt])})),Nt},ms=function(Nt){var Ct=ue(Nt),zt=k(te,this,Ct);return!(this===ve&&ee(Be,Ct)&&!ee(Xe,Ct))&&(!(zt||!ee(this,Ct)||!ee(Be,Ct)||ee(this,kt)&&this[kt][Ct])||zt)},as=function(Nt,Ct){var zt=Q(Nt),qt=ue(Ct);if(zt!==ve||!ee(Be,qt)||ee(Xe,qt)){var Kt=Tt(zt,qt);return!Kt||!ee(Be,qt)||ee(zt,kt)&&zt[kt][qt]||(Kt.enumerable=!0),Kt}},ys=function(Nt){var Ct=Ie(Q(Nt)),zt=[];return gt(Ct,(function(qt){ee(Be,qt)||ee(Ke,qt)||Z(zt,qt)})),zt},vs=function(Nt){var Ct=Nt===ve,zt=Ie(Ct?Xe:Q(Nt)),qt=[];return gt(zt,(function(Kt){!ee(Be,Kt)||Ct&&!ee(ve,Kt)||Z(qt,Be[Kt])})),qt};H||(Ze=function(){if(X(mt,this))throw new jt("Symbol is not a constructor");var Nt=arguments.length&&arguments[0]!==void 0?ne(arguments[0]):void 0,Ct=Pe(Nt),zt=function(qt){var Kt=this===void 0?S:this;Kt===ve&&k(zt,Xe,qt),ee(Kt,kt)&&ee(Kt[kt],Ct)&&(Kt[kt][Ct]=!1);var js=fe(1,qt);try{Rt(Kt,Ct,js)}catch(aa){if(!(aa instanceof dt))throw aa;Et(Kt,Ct,js)}};return U&&ut&&Rt(ve,Ct,{configurable:!0,set:zt}),Ht(Ct,Nt)},Qe(mt=Ze[de],"toString",(function(){return Le(this).tag})),Qe(Ze,"withoutSetter",(function(Nt){return Ht(Pe(Nt),Nt)})),it.f=ms,Je.f=ss,We.f=Pt,Ve.f=as,Re.f=ze.f=ys,rt.f=vs,ft.f=function(Nt){return Ht(qe(Nt),Nt)},U&&(At(mt,"description",{configurable:!0,get:function(){return Le(this).description}}),O||Qe(ve,"propertyIsEnumerable",ms,{unsafe:!0}))),g({global:!0,constructor:!0,wrap:!0,forced:!H,sham:!H},{Symbol:Ze}),gt(Me(nt),(function(Nt){ot(Nt)})),g({target:Mt,stat:!0,forced:!H},{useSetter:function(){ut=!0},useSimple:function(){ut=!1}}),g({target:"Object",stat:!0,forced:!H,sham:!U},{create:function(Nt,Ct){return Ct===void 0?ce(Nt):Pt(ce(Nt),Ct)},defineProperty:ss,defineProperties:Pt,getOwnPropertyDescriptor:as}),g({target:"Object",stat:!0,forced:!H},{getOwnPropertyNames:ys}),pt(),ke(Ze,Mt),Ke[kt]=!0},6801:function(A,P,f){var g=f(3724),S=f(8686),k=f(4913),C=f(8551),O=f(5397),U=f(1072);P.f=g&&!S?Object.defineProperties:function(H,V){C(H);for(var ee,X=O(V),M=U(V),Q=M.length,ue=0;Q>ue;)k.f(H,ee=M[ue++],X[ee]);return H}},6823:function(A){var P=String;A.exports=function(f){try{return P(f)}catch{return"Object"}}},6837:function(A){var P=TypeError;A.exports=function(f){if(f>9007199254740991)throw P("Maximum allowed index exceeded");return f}},6840:function(A,P,f){var g=f(4901),S=f(4913),k=f(283),C=f(9433);A.exports=function(O,U,H,V){V||(V={});var ee=V.enumerable,X=V.name!==void 0?V.name:U;if(g(H)&&k(H,X,V),V.global)ee?O[U]=H:C(U,H);else{try{V.unsafe?O[U]&&(ee=!0):delete O[U]}catch{}ee?O[U]=H:S.f(O,U,{value:H,enumerable:!1,configurable:!V.nonConfigurable,writable:!V.nonWritable})}return O}},6910:function(A,P,f){var g=f(6518),S=f(9504),k=f(9306),C=f(8981),O=f(6198),U=f(4606),H=f(655),V=f(9039),ee=f(4488),X=f(4598),M=f(3709),Q=f(3763),ue=f(9519),ne=f(3607),fe=[],ce=S(fe.sort),Me=S(fe.push),Re=V((function(){fe.sort(void 0)})),ze=V((function(){fe.sort(null)})),rt=X("sort"),Ve=!V((function(){if(ue)return ue<70;if(!(M&&M>3)){if(Q)return!0;if(ne)return ne<603;var Je,We,it,Qe,At="";for(Je=65;Je<76;Je++){switch(We=String.fromCharCode(Je),Je){case 66:case 69:case 70:case 72:it=3;break;case 68:case 71:it=4;break;default:it=2}for(Qe=0;Qe<47;Qe++)fe.push({k:We+Qe,v:it})}for(fe.sort((function(xt,Te){return Te.v-xt.v})),Qe=0;Qe<fe.length;Qe++)We=fe[Qe].k.charAt(0),At.charAt(At.length-1)!==We&&(At+=We);return At!=="DGBEFHACIJK"}}));g({target:"Array",proto:!0,forced:Re||!ze||!rt||!Ve},{sort:function(Je){Je!==void 0&&k(Je);var We=C(this);if(Ve)return Je===void 0?ce(We):ce(We,Je);var it,Qe,At=[],xt=O(We);for(Qe=0;Qe<xt;Qe++)Qe in We&&Me(At,We[Qe]);for(ee(At,(function(Te){return function(Ke,Pe){return Pe===void 0?-1:Ke===void 0?1:Te!==void 0?+Te(Ke,Pe)||0:H(Ke)>H(Pe)?1:-1}})(Je)),it=O(At),Qe=0;Qe<it;)We[Qe]=At[Qe++];for(;Qe<xt;)U(We,Qe++);return We}})},6933:function(A,P,f){var g=f(9504),S=f(4376),k=f(4901),C=f(2195),O=f(655),U=g([].push);A.exports=function(H){if(k(H))return H;if(S(H)){for(var V=H.length,ee=[],X=0;X<V;X++){var M=H[X];typeof M=="string"?U(ee,M):typeof M!="number"&&C(M)!=="Number"&&C(M)!=="String"||U(ee,O(M))}var Q=ee.length,ue=!0;return function(ne,fe){if(ue)return ue=!1,fe;if(S(this))return fe;for(var ce=0;ce<Q;ce++)if(ee[ce]===ne)return fe}}}},6955:function(A,P,f){var g=f(2140),S=f(4901),k=f(2195),C=f(8227)("toStringTag"),O=Object,U=k((function(){return arguments})())==="Arguments";A.exports=g?k:function(H){var V,ee,X;return H===void 0?"Undefined":H===null?"Null":typeof(ee=(function(M,Q){try{return M[Q]}catch{}})(V=O(H),C))=="string"?ee:U?k(V):(X=k(V))==="Object"&&S(V.callee)?"Arguments":X}},6969:function(A,P,f){var g=f(2777),S=f(757);A.exports=function(k){var C=g(k,"string");return S(C)?C:C+""}},6980:function(A){A.exports=function(P,f){return{enumerable:!(1&P),configurable:!(2&P),writable:!(4&P),value:f}}},7040:function(A,P,f){var g=f(4495);A.exports=g&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},7055:function(A,P,f){var g=f(9504),S=f(9039),k=f(2195),C=Object,O=g("".split);A.exports=S((function(){return!C("z").propertyIsEnumerable(0)}))?function(U){return k(U)==="String"?O(U,""):C(U)}:C},7323:function(A,P,f){var g,S,k=f(9565),C=f(9504),O=f(655),U=f(7979),H=f(8429),V=f(5745),ee=f(2360),X=f(1181).get,M=f(3635),Q=f(8814),ue=V("native-string-replace",String.prototype.replace),ne=RegExp.prototype.exec,fe=ne,ce=C("".charAt),Me=C("".indexOf),Re=C("".replace),ze=C("".slice),rt=(S=/b*/g,k(ne,g=/a/,"a"),k(ne,S,"a"),g.lastIndex!==0||S.lastIndex!==0),Ve=H.BROKEN_CARET,Je=/()??/.exec("")[1]!==void 0;(rt||Je||Ve||M||Q)&&(fe=function(We){var it,Qe,At,xt,Te,Ke,Pe,qe=this,ft=X(qe),ot=O(We),pt=ft.raw;if(pt)return pt.lastIndex=qe.lastIndex,it=k(fe,pt,ot),qe.lastIndex=pt.lastIndex,it;var ke=ft.groups,st=Ve&&qe.sticky,gt=k(U,qe),kt=qe.source,Mt=0,de=ot;if(st&&(gt=Re(gt,"y",""),Me(gt,"g")===-1&&(gt+="g"),de=ze(ot,qe.lastIndex),qe.lastIndex>0&&(!qe.multiline||qe.multiline&&ce(ot,qe.lastIndex-1)!==`
`)&&(kt="(?: "+kt+")",de=" "+de,Mt++),Qe=new RegExp("^(?:"+kt+")",gt)),Je&&(Qe=new RegExp("^"+kt+"$(?!\\s)",gt)),rt&&(At=qe.lastIndex),xt=k(ne,st?Qe:qe,de),st?xt?(xt.input=ze(xt.input,Mt),xt[0]=ze(xt[0],Mt),xt.index=qe.lastIndex,qe.lastIndex+=xt[0].length):qe.lastIndex=0:rt&&xt&&(qe.lastIndex=qe.global?xt.index+xt[0].length:At),Je&&xt&&xt.length>1&&k(ue,xt[0],Qe,(function(){for(Te=1;Te<arguments.length-2;Te++)arguments[Te]===void 0&&(xt[Te]=void 0)})),xt&&ke)for(xt.groups=Ke=ee(null),Te=0;Te<ke.length;Te++)Ke[(Pe=ke[Te])[0]]=xt[Pe[1]];return xt}),A.exports=fe},7347:function(A,P,f){var g=f(3724),S=f(9565),k=f(8773),C=f(6980),O=f(5397),U=f(6969),H=f(9297),V=f(5917),ee=Object.getOwnPropertyDescriptor;P.f=g?ee:function(X,M){if(X=O(X),M=U(M),V)try{return ee(X,M)}catch{}if(H(X,M))return C(!S(k.f,X,M),X[M])}},7400:function(A){A.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},7427:function(A,P,f){var g=f(6518),S=f(3724),k=f(2551),C=f(9306),O=f(8981),U=f(4913);S&&g({target:"Object",proto:!0,forced:k},{__defineGetter__:function(H,V){U.f(O(this),H,{get:C(V),enumerable:!0,configurable:!0})}})},7433:function(A,P,f){var g=f(4376),S=f(3517),k=f(34),C=f(8227)("species"),O=Array;A.exports=function(U){var H;return g(U)&&(H=U.constructor,(S(H)&&(H===O||g(H.prototype))||k(H)&&(H=H[C])===null)&&(H=void 0)),H===void 0?O:H}},7452:function(A){A.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},7476:function(A,P,f){var g=f(2195),S=f(9504);A.exports=function(k){if(g(k)==="Function")return S(k)}},7495:function(A,P,f){var g=f(6518),S=f(7323);g({target:"RegExp",proto:!0,forced:/./.exec!==S},{exec:S})},7629:function(A,P,f){var g=f(6395),S=f(4576),k=f(9433),C="__core-js_shared__",O=A.exports=S[C]||k(C,{});(O.versions||(O.versions=[])).push({version:"3.45.1",mode:g?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"})},7633:function(A,P,f){var g=f(7751),S=f(2106),k=f(8227),C=f(3724),O=k("species");A.exports=function(U){var H=g(U);C&&H&&!H[O]&&S(H,O,{configurable:!0,get:function(){return this}})}},7657:function(A,P,f){var g,S,k,C=f(9039),O=f(4901),U=f(34),H=f(2360),V=f(2787),ee=f(6840),X=f(8227),M=f(6395),Q=X("iterator"),ue=!1;[].keys&&("next"in(k=[].keys())?(S=V(V(k)))!==Object.prototype&&(g=S):ue=!0),!U(g)||C((function(){var ne={};return g[Q].call(ne)!==ne}))?g={}:M&&(g=H(g)),O(g[Q])||ee(g,Q,(function(){return this})),A.exports={IteratorPrototype:g,BUGGY_SAFARI_ITERATORS:ue}},7680:function(A,P,f){var g=f(9504);A.exports=g([].slice)},7740:function(A,P,f){var g=f(9297),S=f(5031),k=f(7347),C=f(4913);A.exports=function(O,U,H){for(var V=S(U),ee=C.f,X=k.f,M=0;M<V.length;M++){var Q=V[M];g(O,Q)||H&&g(H,Q)||ee(O,Q,X(U,Q))}}},7750:function(A,P,f){var g=f(4117),S=TypeError;A.exports=function(k){if(g(k))throw new S("Can't call method on "+k);return k}},7751:function(A,P,f){var g=f(4576),S=f(4901);A.exports=function(k,C){return arguments.length<2?(O=g[k],S(O)?O:void 0):g[k]&&g[k][C];var O}},7764:function(A,P,f){var g=f(8183).charAt,S=f(655),k=f(1181),C=f(1088),O=f(2529),U="String Iterator",H=k.set,V=k.getterFor(U);C(String,"String",(function(ee){H(this,{type:U,string:S(ee),index:0})}),(function(){var ee,X=V(this),M=X.string,Q=X.index;return Q>=M.length?O(void 0,!0):(ee=g(M,Q),X.index+=ee.length,O(ee,!1))}))},7812:function(A,P,f){var g=f(6518),S=f(9297),k=f(757),C=f(6823),O=f(5745),U=f(1296),H=O("symbol-to-string-registry");g({target:"Symbol",stat:!0,forced:!U},{keyFor:function(V){if(!k(V))throw new TypeError(C(V)+" is not a symbol");if(S(H,V))return H[V]}})},7829:function(A,P,f){var g=f(8183).charAt;A.exports=function(S,k,C){return k+(C?g(S,k).length:1)}},7916:function(A,P,f){var g=f(6080),S=f(9565),k=f(8981),C=f(6319),O=f(4209),U=f(3517),H=f(6198),V=f(4659),ee=f(81),X=f(851),M=Array;A.exports=function(Q){var ue=k(Q),ne=U(this),fe=arguments.length,ce=fe>1?arguments[1]:void 0,Me=ce!==void 0;Me&&(ce=g(ce,fe>2?arguments[2]:void 0));var Re,ze,rt,Ve,Je,We,it=X(ue),Qe=0;if(!it||this===M&&O(it))for(Re=H(ue),ze=ne?new this(Re):M(Re);Re>Qe;Qe++)We=Me?ce(ue[Qe],Qe):ue[Qe],V(ze,Qe,We);else for(ze=ne?new this:[],Je=(Ve=ee(ue,it)).next;!(rt=S(Je,Ve)).done;Qe++)We=Me?C(Ve,ce,[rt.value,Qe],!0):rt.value,V(ze,Qe,We);return ze.length=Qe,ze}},7979:function(A,P,f){var g=f(8551);A.exports=function(){var S=g(this),k="";return S.hasIndices&&(k+="d"),S.global&&(k+="g"),S.ignoreCase&&(k+="i"),S.multiline&&(k+="m"),S.dotAll&&(k+="s"),S.unicode&&(k+="u"),S.unicodeSets&&(k+="v"),S.sticky&&(k+="y"),k}},8014:function(A,P,f){var g=f(1291),S=Math.min;A.exports=function(k){var C=g(k);return C>0?S(C,9007199254740991):0}},8183:function(A,P,f){var g=f(9504),S=f(1291),k=f(655),C=f(7750),O=g("".charAt),U=g("".charCodeAt),H=g("".slice),V=function(ee){return function(X,M){var Q,ue,ne=k(C(X)),fe=S(M),ce=ne.length;return fe<0||fe>=ce?ee?"":void 0:(Q=U(ne,fe))<55296||Q>56319||fe+1===ce||(ue=U(ne,fe+1))<56320||ue>57343?ee?O(ne,fe):Q:ee?H(ne,fe,fe+2):ue-56320+(Q-55296<<10)+65536}};A.exports={codeAt:V(!1),charAt:V(!0)}},8227:function(A,P,f){var g=f(4576),S=f(5745),k=f(9297),C=f(3392),O=f(4495),U=f(7040),H=g.Symbol,V=S("wks"),ee=U?H.for||H:H&&H.withoutSetter||C;A.exports=function(X){return k(V,X)||(V[X]=O&&k(H,X)?H[X]:ee("Symbol."+X)),V[X]}},8242:function(A,P,f){var g=f(9565),S=f(7751),k=f(8227),C=f(6840);A.exports=function(){var O=S("Symbol"),U=O&&O.prototype,H=U&&U.valueOf,V=k("toPrimitive");U&&!U[V]&&C(U,V,(function(ee){return g(H,this)}),{arity:1})}},8344:function(A,P,f){f(8543)},8429:function(A,P,f){var g=f(9039),S=f(4576).RegExp,k=g((function(){var U=S("a","y");return U.lastIndex=2,U.exec("abcd")!==null})),C=k||g((function(){return!S("a","y").sticky})),O=k||g((function(){var U=S("^r","gy");return U.lastIndex=2,U.exec("str")!==null}));A.exports={BROKEN_CARET:O,MISSED_STICKY:C,UNSUPPORTED_Y:k}},8480:function(A,P,f){var g=f(1828),S=f(8727).concat("length","prototype");P.f=Object.getOwnPropertyNames||function(k){return g(k,S)}},8543:function(A,P,f){var g=f(6518),S=f(9565),k=f(7476),C=f(3994),O=f(2529),U=f(7750),H=f(8014),V=f(655),ee=f(8551),X=f(34),M=f(2195),Q=f(788),ue=f(1034),ne=f(5966),fe=f(6840),ce=f(9039),Me=f(8227),Re=f(2293),ze=f(7829),rt=f(6682),Ve=f(1181),Je=f(6395),We=Me("matchAll"),it="RegExp String",Qe=it+" Iterator",At=Ve.set,xt=Ve.getterFor(Qe),Te=RegExp.prototype,Ke=TypeError,Pe=k("".indexOf),qe=k("".matchAll),ft=!!qe&&!ce((function(){qe("a",/./)})),ot=C((function(ke,st,gt,kt){At(this,{type:Qe,regexp:ke,string:st,global:gt,unicode:kt,done:!1})}),it,(function(){var ke=xt(this);if(ke.done)return O(void 0,!0);var st=ke.regexp,gt=ke.string,kt=rt(st,gt);return kt===null?(ke.done=!0,O(void 0,!0)):ke.global?(V(kt[0])===""&&(st.lastIndex=ze(gt,H(st.lastIndex),ke.unicode)),O(kt,!1)):(ke.done=!0,O(kt,!1))})),pt=function(ke){var st,gt,kt,Mt=ee(this),de=V(ke),De=Re(Mt,RegExp),Le=V(ue(Mt));return st=new De(De===RegExp?Mt.source:Mt,Le),gt=!!~Pe(Le,"g"),kt=!!~Pe(Le,"u"),st.lastIndex=H(Mt.lastIndex),new ot(st,de,gt,kt)};g({target:"String",proto:!0,forced:ft},{matchAll:function(ke){var st,gt,kt,Mt,de=U(this);if(X(ke)){if(Q(ke)&&(st=V(U(ue(ke))),!~Pe(st,"g")))throw new Ke("`.matchAll` does not allow non-global regexes");if(ft)return qe(de,ke);if((kt=ne(ke,We))===void 0&&Je&&M(ke)==="RegExp"&&(kt=pt),kt)return S(kt,ke,de)}else if(ft)return qe(de,ke);return gt=V(de),Mt=new RegExp(ke,"g"),Je?S(pt,Mt,gt):Mt[We](gt)}}),Je||We in Te||fe(Te,We,pt)},8551:function(A,P,f){var g=f(34),S=String,k=TypeError;A.exports=function(C){if(g(C))return C;throw new k(S(C)+" is not an object")}},8598:function(A,P,f){var g=f(6518),S=f(9504),k=f(7055),C=f(5397),O=f(4598),U=S([].join);g({target:"Array",proto:!0,forced:k!==Object||!O("join",",")},{join:function(H){return U(C(this),H===void 0?",":H)}})},8622:function(A,P,f){var g=f(4576),S=f(4901),k=g.WeakMap;A.exports=S(k)&&/native code/.test(String(k))},8686:function(A,P,f){var g=f(3724),S=f(9039);A.exports=g&&S((function(){return Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype!==42}))},8706:function(A,P,f){var g=f(6518),S=f(9039),k=f(4376),C=f(34),O=f(8981),U=f(6198),H=f(6837),V=f(4659),ee=f(1469),X=f(597),M=f(8227),Q=f(9519),ue=M("isConcatSpreadable"),ne=Q>=51||!S((function(){var ce=[];return ce[ue]=!1,ce.concat()[0]!==ce})),fe=function(ce){if(!C(ce))return!1;var Me=ce[ue];return Me!==void 0?!!Me:k(ce)};g({target:"Array",proto:!0,arity:1,forced:!ne||!X("concat")},{concat:function(ce){var Me,Re,ze,rt,Ve,Je=O(this),We=ee(Je,0),it=0;for(Me=-1,ze=arguments.length;Me<ze;Me++)if(fe(Ve=Me===-1?Je:arguments[Me]))for(rt=U(Ve),H(it+rt),Re=0;Re<rt;Re++,it++)Re in Ve&&V(We,it,Ve[Re]);else H(it+1),V(We,it++,Ve);return We.length=it,We}})},8727:function(A){A.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:function(A,P,f){var g=f(616),S=Function.prototype,k=S.apply,C=S.call;A.exports=typeof Reflect=="object"&&Reflect.apply||(g?C.bind(k):function(){return C.apply(k,arguments)})},8773:function(A,P){var f={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,S=g&&!f.call({1:2},1);P.f=S?function(k){var C=g(this,k);return!!C&&C.enumerable}:f},8781:function(A,P,f){var g=f(350).PROPER,S=f(6840),k=f(8551),C=f(655),O=f(9039),U=f(1034),H="toString",V=RegExp.prototype,ee=V[H],X=O((function(){return ee.call({source:"a",flags:"b"})!=="/a/b"})),M=g&&ee.name!==H;(X||M)&&S(V,H,(function(){var Q=k(this);return"/"+C(Q.source)+"/"+C(U(Q))}),{unsafe:!0})},8814:function(A,P,f){var g=f(9039),S=f(4576).RegExp;A.exports=g((function(){var k=S("(?<a>b)","g");return k.exec("b").groups.a!=="b"||"b".replace(k,"$<a>c")!=="bc"}))},8981:function(A,P,f){var g=f(7750),S=Object;A.exports=function(k){return S(g(k))}},9039:function(A){A.exports=function(P){try{return!!P()}catch{return!0}}},9085:function(A,P,f){var g=f(6518),S=f(4213);g({target:"Object",stat:!0,arity:2,forced:Object.assign!==S},{assign:S})},9167:function(A,P,f){var g=f(4576);A.exports=g},9213:function(A,P,f){var g=f(6080),S=f(9504),k=f(7055),C=f(8981),O=f(6198),U=f(1469),H=S([].push),V=function(ee){var X=ee===1,M=ee===2,Q=ee===3,ue=ee===4,ne=ee===6,fe=ee===7,ce=ee===5||ne;return function(Me,Re,ze,rt){for(var Ve,Je,We=C(Me),it=k(We),Qe=O(it),At=g(Re,ze),xt=0,Te=rt||U,Ke=X?Te(Me,Qe):M||fe?Te(Me,0):void 0;Qe>xt;xt++)if((ce||xt in it)&&(Je=At(Ve=it[xt],xt,We),ee))if(X)Ke[xt]=Je;else if(Je)switch(ee){case 3:return!0;case 5:return Ve;case 6:return xt;case 2:H(Ke,Ve)}else switch(ee){case 4:return!1;case 7:H(Ke,Ve)}return ne?-1:Q||ue?ue:Ke}};A.exports={forEach:V(0),map:V(1),filter:V(2),some:V(3),every:V(4),find:V(5),findIndex:V(6),filterReject:V(7)}},9228:function(A,P,f){f(7495);var g=f(9565),S=f(6840),k=f(7323),C=f(9039),O=f(8227),U=f(6699),H=O("species"),V=RegExp.prototype;A.exports=function(ee,X,M,Q){var ue=O(ee),ne=!C((function(){var Re={};return Re[ue]=function(){return 7},""[ee](Re)!==7})),fe=ne&&!C((function(){var Re=!1,ze=/a/;return ee==="split"&&((ze={}).constructor={},ze.constructor[H]=function(){return ze},ze.flags="",ze[ue]=/./[ue]),ze.exec=function(){return Re=!0,null},ze[ue](""),!Re}));if(!ne||!fe||M){var ce=/./[ue],Me=X(ue,""[ee],(function(Re,ze,rt,Ve,Je){var We=ze.exec;return We===k||We===V.exec?ne&&!Je?{done:!0,value:g(ce,ze,rt,Ve)}:{done:!0,value:g(Re,rt,ze,Ve)}:{done:!1}}));S(String.prototype,ee,Me[0]),S(V,ue,Me[1])}Q&&U(V[ue],"sham",!0)}},9296:function(A,P,f){var g=f(4055)("span").classList,S=g&&g.constructor&&g.constructor.prototype;A.exports=S===Object.prototype?void 0:S},9297:function(A,P,f){var g=f(9504),S=f(8981),k=g({}.hasOwnProperty);A.exports=Object.hasOwn||function(C,O){return k(S(C),O)}},9306:function(A,P,f){var g=f(4901),S=f(6823),k=TypeError;A.exports=function(C){if(g(C))return C;throw new k(S(C)+" is not a function")}},9432:function(A,P,f){var g=f(6518),S=f(8981),k=f(1072);g({target:"Object",stat:!0,forced:f(9039)((function(){k(1)}))},{keys:function(C){return k(S(C))}})},9433:function(A,P,f){var g=f(4576),S=Object.defineProperty;A.exports=function(k,C){try{S(g,k,{value:C,configurable:!0,writable:!0})}catch{g[k]=C}return C}},9463:function(A,P,f){var g=f(6518),S=f(3724),k=f(4576),C=f(9504),O=f(9297),U=f(4901),H=f(1625),V=f(655),ee=f(2106),X=f(7740),M=k.Symbol,Q=M&&M.prototype;if(S&&U(M)&&(!("description"in Q)||M().description!==void 0)){var ue={},ne=function(){var Ve=arguments.length<1||arguments[0]===void 0?void 0:V(arguments[0]),Je=H(Q,this)?new M(Ve):Ve===void 0?M():M(Ve);return Ve===""&&(ue[Je]=!0),Je};X(ne,M),ne.prototype=Q,Q.constructor=ne;var fe=String(M("description detection"))==="Symbol(description detection)",ce=C(Q.valueOf),Me=C(Q.toString),Re=/^Symbol\((.*)\)[^)]+$/,ze=C("".replace),rt=C("".slice);ee(Q,"description",{configurable:!0,get:function(){var Ve=ce(this);if(O(ue,Ve))return"";var Je=Me(Ve),We=fe?rt(Je,7,-1):ze(Je,Re,"$1");return We===""?void 0:We}}),g({global:!0,constructor:!0,forced:!0},{Symbol:ne})}},9504:function(A,P,f){var g=f(616),S=Function.prototype,k=S.call,C=g&&S.bind.bind(k,k);A.exports=g?C:function(O){return function(){return k.apply(O,arguments)}}},9519:function(A,P,f){var g,S,k=f(4576),C=f(2839),O=k.process,U=k.Deno,H=O&&O.versions||U&&U.version,V=H&&H.v8;V&&(S=(g=V.split("."))[0]>0&&g[0]<4?1:+(g[0]+g[1])),!S&&C&&(!(g=C.match(/Edge\/(\d+)/))||g[1]>=74)&&(g=C.match(/Chrome\/(\d+)/))&&(S=+g[1]),A.exports=S},9539:function(A,P,f){var g=f(9565),S=f(8551),k=f(5966);A.exports=function(C,O,U){var H,V;S(C);try{if(!(H=k(C,"return"))){if(O==="throw")throw U;return U}H=g(H,C)}catch(ee){V=!0,H=ee}if(O==="throw")throw U;if(V)throw H;return S(H),U}},9565:function(A,P,f){var g=f(616),S=Function.prototype.call;A.exports=g?S.bind(S):function(){return S.apply(S,arguments)}},9572:function(A,P,f){var g=f(9297),S=f(6840),k=f(3640),C=f(8227)("toPrimitive"),O=Date.prototype;g(O,C)||S(O,C,k)},9617:function(A,P,f){var g=f(5397),S=f(5610),k=f(6198),C=function(O){return function(U,H,V){var ee=g(U),X=k(ee);if(X===0)return!O&&-1;var M,Q=S(V,X);if(O&&H!=H){for(;X>Q;)if((M=ee[Q++])!=M)return!0}else for(;X>Q;Q++)if((O||Q in ee)&&ee[Q]===H)return O||Q||0;return!O&&-1}};A.exports={includes:C(!0),indexOf:C(!1)}},9773:function(A,P,f){var g=f(6518),S=f(4495),k=f(9039),C=f(3717),O=f(8981);g({target:"Object",stat:!0,forced:!S||k((function(){C.f(1)}))},{getOwnPropertySymbols:function(U){var H=C.f;return H?H(O(U)):[]}})}},x={};function p(A){var P=x[A];if(P!==void 0)return P.exports;var f=x[A]={exports:{}};return h[A].call(f.exports,f,f.exports,p),f.exports}p.d=function(A,P){for(var f in P)p.o(P,f)&&!p.o(A,f)&&Object.defineProperty(A,f,{enumerable:!0,get:P[f]})},p.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),p.o=function(A,P){return Object.prototype.hasOwnProperty.call(A,P)},p.r=function(A){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})};var w={};function N(A){return(function(P){if(Array.isArray(P))return D(P)})(A)||(function(P){if(typeof Symbol<"u"&&P[Symbol.iterator]!=null||P["@@iterator"]!=null)return Array.from(P)})(A)||_(A)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function _(A,P){if(A){if(typeof A=="string")return D(A,P);var f={}.toString.call(A).slice(8,-1);return f==="Object"&&A.constructor&&(f=A.constructor.name),f==="Map"||f==="Set"?Array.from(A):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?D(A,P):void 0}}function D(A,P){(P==null||P>A.length)&&(P=A.length);for(var f=0,g=Array(P);f<P;f++)g[f]=A[f];return g}function L(A){return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},L(A)}function B(A,P){for(var f=0;f<P.length;f++){var g=P[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(A,q(g.key),g)}}function z(A,P,f){return(P=q(P))in A?Object.defineProperty(A,P,{value:f,enumerable:!0,configurable:!0,writable:!0}):A[P]=f,A}function q(A){var P=(function(f,g){if(L(f)!="object"||!f)return f;var S=f[Symbol.toPrimitive];if(S!==void 0){var k=S.call(f,g);if(L(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(f)})(A,"string");return L(P)=="symbol"?P:P+""}p.r(w),p.d(w,{SimpleKeyboard:function(){return Ne},default:function(){return ge}}),p(5276),p(8598),p(4782),p(4554),p(2010),p(7427),p(6099),p(7495),p(8781),p(5440),p(744),p(2762),typeof Element>"u"||"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof self<"u"&&"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&(function(A){if("Element"in A){var P="classList",f="prototype",g=A.Element[f],S=Object,k=String[f].trim||function(){return this.replace(/^\s+|\s+$/g,"")},C=Array[f].indexOf||function(M){for(var Q=0,ue=this.length;Q<ue;Q++)if(Q in this&&this[Q]===M)return Q;return-1},O=function(M,Q){this.name=M,this.code=DOMException[M],this.message=Q},U=function(M,Q){if(Q==="")throw new O("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(Q))throw new O("INVALID_CHARACTER_ERR","The token must not contain space characters.");return C.call(M,Q)},H=function(M){for(var Q=k.call(M.getAttribute("class")||""),ue=Q?Q.split(/\s+/):[],ne=0,fe=ue.length;ne<fe;ne++)this.push(ue[ne]);this._updateClassName=function(){M.setAttribute("class",this.toString())}},V=H[f]=[],ee=function(){return new H(this)};if(O[f]=Error[f],V.item=function(M){return this[M]||null},V.contains=function(M){return~U(this,M+"")},V.add=function(){var M,Q=arguments,ue=0,ne=Q.length,fe=!1;do~U(this,M=Q[ue]+"")||(this.push(M),fe=!0);while(++ue<ne);fe&&this._updateClassName()},V.remove=function(){var M,Q,ue=arguments,ne=0,fe=ue.length,ce=!1;do for(Q=U(this,M=ue[ne]+"");~Q;)this.splice(Q,1),ce=!0,Q=U(this,M);while(++ne<fe);ce&&this._updateClassName()},V.toggle=function(M,Q){var ue=this.contains(M),ne=ue?Q!==!0&&"remove":Q!==!1&&"add";return ne&&this[ne](M),Q===!0||Q===!1?Q:!ue},V.replace=function(M,Q){var ue=U(M+"");~ue&&(this.splice(ue,1,Q),this._updateClassName())},V.toString=function(){return this.join(" ")},S.defineProperty){var X={get:ee,enumerable:!0,configurable:!0};try{S.defineProperty(g,P,X)}catch(M){M.number!==void 0&&M.number!==-2146823252||(X.enumerable=!1,S.defineProperty(g,P,X))}}else S[f].__defineGetter__&&g.__defineGetter__(P,ee)}})(self),(function(){var A=document.createElement("_");if(A.classList.add("c1","c2"),!A.classList.contains("c2")){var P=function(g){var S=DOMTokenList.prototype[g];DOMTokenList.prototype[g]=function(k){var C,O=arguments.length;for(C=0;C<O;C++)k=arguments[C],S.call(this,k)}};P("add"),P("remove")}if(A.classList.toggle("c3",!1),A.classList.contains("c3")){var f=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(g,S){return 1 in arguments&&!this.contains(g)==!S?S:f.call(this,g)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(g,S){var k=this.toString().split(" "),C=k.indexOf(g+"");~C&&(k=k.slice(C),this.remove.apply(this,k),this.add(S),this.add.apply(this,k.slice(1)))}),A=null})()),p(2675),p(9463),p(2259),p(5700),p(8706),p(2008),p(3418),p(4423),p(3792),p(2062),p(6910),p(739),p(9572),p(2892),p(9085),p(3851),p(1278),p(9432),p(4864),p(1699),p(7764),p(8344),p(3500),p(2953),p(2712),p(2637),p(1480),p(825),p(1761);var R=(function(){return A=function g(S){var k=S.getOptions,C=S.getCaretPosition,O=S.getCaretPositionEnd,U=S.dispatch;(function(H,V){if(!(H instanceof V))throw new TypeError("Cannot call a class as a function")})(this,g),z(this,"getOptions",void 0),z(this,"getCaretPosition",void 0),z(this,"getCaretPositionEnd",void 0),z(this,"dispatch",void 0),z(this,"maxLengthReached",void 0),z(this,"isStandardButton",(function(H){return H&&!(H[0]==="{"&&H[H.length-1]==="}")})),this.getOptions=k,this.getCaretPosition=C,this.getCaretPositionEnd=O,this.dispatch=U,g.bindMethods(g,this)},P=[{key:"getButtonType",value:function(g){return g.includes("{")&&g.includes("}")&&g!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(g){var S=this.getButtonType(g),k=g.replace("{","").replace("}",""),C="";return S!=="standardBtn"&&(C=" hg-button-".concat(k)),"hg-".concat(S).concat(C)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(g,S){return(S=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),S):S||this.getDefaultDiplay())[g]||g}},{key:"getUpdatedInput",value:function(g,S,k){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k,O=arguments.length>4&&arguments[4]!==void 0&&arguments[4],U=this.getOptions(),H=[k,C,O],V=S;return(g==="{bksp}"||g==="{backspace}")&&V.length>0?V=this.removeAt.apply(this,[V].concat(H)):(g==="{delete}"||g==="{forwarddelete}")&&V.length>0?V=this.removeForwardsAt.apply(this,[V].concat(H)):g==="{space}"?V=this.addStringAt.apply(this,[V," "].concat(H)):g!=="{tab}"||typeof U.tabCharOnTab=="boolean"&&U.tabCharOnTab===!1?g!=="{enter}"&&g!=="{numpadenter}"||!U.newLineOnEnter?g.includes("numpad")&&Number.isInteger(Number(g[g.length-2]))?V=this.addStringAt.apply(this,[V,g[g.length-2]].concat(H)):g==="{numpaddivide}"?V=this.addStringAt.apply(this,[V,"/"].concat(H)):g==="{numpadmultiply}"?V=this.addStringAt.apply(this,[V,"*"].concat(H)):g==="{numpadsubtract}"?V=this.addStringAt.apply(this,[V,"-"].concat(H)):g==="{numpadadd}"?V=this.addStringAt.apply(this,[V,"+"].concat(H)):g==="{numpaddecimal}"?V=this.addStringAt.apply(this,[V,"."].concat(H)):g==="{"||g==="}"?V=this.addStringAt.apply(this,[V,g].concat(H)):g.includes("{")||g.includes("}")||(V=this.addStringAt.apply(this,[V,g].concat(H))):V=this.addStringAt.apply(this,[V,`
`].concat(H)):V=this.addStringAt.apply(this,[V,"	"].concat(H)),U.debug&&console.log("Input will be: "+V),V}},{key:"updateCaretPos",value:function(g){var S=arguments.length>1&&arguments[1]!==void 0&&arguments[1],k=this.updateCaretPosAction(g,S);this.dispatch((function(C){C.setCaretPosition(k)}))}},{key:"updateCaretPosAction",value:function(g){var S=arguments.length>1&&arguments[1]!==void 0&&arguments[1],k=this.getOptions(),C=this.getCaretPosition();return C!=null&&(S?C>0&&(C-=g):C+=g),k.debug&&console.log("Caret at:",C),C}},{key:"addStringAt",value:function(g,S){var k,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.length,O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:g.length,U=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return C||C===0?(k=[g.slice(0,C),S,g.slice(O)].join(""),this.isMaxLengthReached()||U&&this.updateCaretPos(S.length)):k=g+S,k}},{key:"removeAt",value:function(g){var S,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.length,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.length,O=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(k===0&&C===0)return g;if(k===C){var U=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;k&&k>=0?g.substring(k-2,k).match(U)?(S=g.substr(0,k-2)+g.substr(k),O&&this.updateCaretPos(2,!0)):(S=g.substr(0,k-1)+g.substr(k),O&&this.updateCaretPos(1,!0)):g.slice(-2).match(U)?(S=g.slice(0,-2),O&&this.updateCaretPos(2,!0)):(S=g.slice(0,-1),O&&this.updateCaretPos(1,!0))}else S=g.slice(0,k)+g.slice(C),O&&this.dispatch((function(H){H.setCaretPosition(k)}));return S}},{key:"removeForwardsAt",value:function(g){var S,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.length,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.length,O=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return g!=null&&g.length&&k!==null?(k===C?S=g.substring(k,k+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?g.substr(0,k)+g.substr(k+2):g.substr(0,k)+g.substr(k+1):(S=g.slice(0,k)+g.slice(C),O&&this.dispatch((function(U){U.setCaretPosition(k)}))),S):g}},{key:"handleMaxLength",value:function(g,S){var k=this.getOptions(),C=k.maxLength,O=g[k.inputName||"default"],U=S.length-1>=C;if(S.length<=O.length)return!1;if(Number.isInteger(C))return k.debug&&console.log("maxLength (num) reached:",U),U?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(L(C)==="object"){var H=S.length-1>=C[k.inputName||"default"];return k.debug&&console.log("maxLength (obj) reached:",H),H?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(g){return g?g.toLowerCase().trim().split(/[.\-_\s]/g).reduce((function(S,k){return k.length?S+k[0].toUpperCase()+k.slice(1):S})):""}},{key:"chunkArray",value:function(g,S){return N(Array(Math.ceil(g.length/S))).map((function(k,C){return g.slice(S*C,S+S*C)}))}},{key:"escapeRegex",value:function(g){return g.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(g,S){var k=g,C=S.indexOf("‫");return C<g&&C!=-1&&k--,S.indexOf("‬")<g&&C!=-1&&k--,k<0?0:k}},{key:"isConstructor",value:function(g){try{Reflect.construct(String,[],g)}catch{return!1}return!0}}],f=[{key:"bindMethods",value:function(g,S){var k,C=(function(U,H){var V=typeof Symbol<"u"&&U[Symbol.iterator]||U["@@iterator"];if(!V){if(Array.isArray(U)||(V=_(U))||H){V&&(U=V);var ee=0,X=function(){};return{s:X,n:function(){return ee>=U.length?{done:!0}:{done:!1,value:U[ee++]}},e:function(ne){throw ne},f:X}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var M,Q=!0,ue=!1;return{s:function(){V=V.call(U)},n:function(){var ne=V.next();return Q=ne.done,ne},e:function(ne){ue=!0,M=ne},f:function(){try{Q||V.return==null||V.return()}finally{if(ue)throw M}}}})(Object.getOwnPropertyNames(g.prototype));try{for(C.s();!(k=C.n()).done;){var O=k.value;O==="constructor"||O==="bindMethods"||(S[O]=S[O].bind(S))}}catch(U){C.e(U)}finally{C.f()}}}],P&&B(A.prototype,P),f&&B(A,f),Object.defineProperty(A,"prototype",{writable:!1}),A;var A,P,f})();z(R,"noop",(function(){}));var F=R;function T(A){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},T(A)}function I(A,P){for(var f=0;f<P.length;f++){var g=P[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(A,oe(g.key),g)}}function se(A,P,f){return(P=oe(P))in A?Object.defineProperty(A,P,{value:f,enumerable:!0,configurable:!0,writable:!0}):A[P]=f,A}function oe(A){var P=(function(f,g){if(T(f)!="object"||!f)return f;var S=f[Symbol.toPrimitive];if(S!==void 0){var k=S.call(f,g);if(T(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(f)})(A,"string");return T(P)=="symbol"?P:P+""}var _e=(function(){return A=function g(S){var k=this,C=S.dispatch,O=S.getOptions;(function(U,H){if(!(U instanceof H))throw new TypeError("Cannot call a class as a function")})(this,g),se(this,"getOptions",void 0),se(this,"dispatch",void 0),se(this,"isModifierKey",(function(U){return U.altKey||U.ctrlKey||U.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(U.code||U.key||k.keyCodeToKey(U?.keyCode))})),this.dispatch=C,this.getOptions=O,F.bindMethods(g,this)},P=[{key:"handleHighlightKeyDown",value:function(g){var S=this.getOptions();S.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(g)&&(g.preventDefault(),g.stopImmediatePropagation());var k=this.getSimpleKeyboardLayoutKey(g);this.dispatch((function(C){var O,U,H=C.getButtonElement(k),V=C.getButtonElement("{".concat(k,"}"));if(H)O=H,U=k;else{if(!V)return;O=V,U="{".concat(k,"}")}var ee,X,M,Q,ue=function(fe){fe.style.background=S.physicalKeyboardHighlightBgColor||"#dadce4",fe.style.color=S.physicalKeyboardHighlightTextColor||"black"};if(O)if(Array.isArray(O)){if(O.forEach((function(fe){return ue(fe)})),S.physicalKeyboardHighlightPress)if(S.physicalKeyboardHighlightPressUsePointerEvents)(ee=O[0])===null||ee===void 0||(X=ee.onpointerdown)===null||X===void 0||X.call(ee,g);else if(S.physicalKeyboardHighlightPressUseClick){var ne;(ne=O[0])===null||ne===void 0||ne.click()}else C.handleButtonClicked(U,g)}else ue(O),S.physicalKeyboardHighlightPress&&(S.physicalKeyboardHighlightPressUsePointerEvents?(M=O)===null||M===void 0||(Q=M.onpointerdown)===null||Q===void 0||Q.call(M,g):S.physicalKeyboardHighlightPressUseClick?O.click():C.handleButtonClicked(U,g))}))}},{key:"handleHighlightKeyUp",value:function(g){var S=this.getOptions();S.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(g)&&(g.preventDefault(),g.stopImmediatePropagation());var k=this.getSimpleKeyboardLayoutKey(g);this.dispatch((function(C){var O,U,H,V=C.getButtonElement(k)||C.getButtonElement("{".concat(k,"}")),ee=function(X){X.removeAttribute&&X.removeAttribute("style")};V&&(Array.isArray(V)?(V.forEach((function(X){return ee(X)})),S.physicalKeyboardHighlightPressUsePointerEvents&&((O=V[0])===null||O===void 0||(U=O.onpointerup)===null||U===void 0||U.call(O,g))):(ee(V),S.physicalKeyboardHighlightPressUsePointerEvents&&(V==null||(H=V.onpointerup)===null||H===void 0||H.call(V,g))))}))}},{key:"getSimpleKeyboardLayoutKey",value:function(g){var S,k="",C=g.code||g.key||this.keyCodeToKey(g?.keyCode);return(k=C!=null&&C.includes("Numpad")||C!=null&&C.includes("Shift")||C!=null&&C.includes("Space")||C!=null&&C.includes("Backspace")||C!=null&&C.includes("Control")||C!=null&&C.includes("Alt")||C!=null&&C.includes("Meta")?g.code||"":g.key||this.keyCodeToKey(g?.keyCode)||"").length>1?(S=k)===null||S===void 0?void 0:S.toLowerCase():k}},{key:"keyCodeToKey",value:function(g){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[g]||""}}],P&&I(A.prototype,P),f&&I(A,f),Object.defineProperty(A,"prototype",{writable:!1}),A;var A,P,f})();function he(A){return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},he(A)}function ie(A,P){for(var f=0;f<P.length;f++){var g=P[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(A,Ae(g.key),g)}}function Ee(A,P,f){return(P=Ae(P))in A?Object.defineProperty(A,P,{value:f,enumerable:!0,configurable:!0,writable:!0}):A[P]=f,A}function Ae(A){var P=(function(f,g){if(he(f)!="object"||!f)return f;var S=f[Symbol.toPrimitive];if(S!==void 0){var k=S.call(f,g);if(he(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(f)})(A,"string");return he(P)=="symbol"?P:P+""}var re=(function(){return A=function g(S){var k=S.utilities,C=S.options;(function(O,U){if(!(O instanceof U))throw new TypeError("Cannot call a class as a function")})(this,g),Ee(this,"utilities",void 0),Ee(this,"options",void 0),Ee(this,"candidateBoxElement",void 0),Ee(this,"pageIndex",0),Ee(this,"pageSize",void 0),this.utilities=k,this.options=C,F.bindMethods(g,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},P=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(g){var S=this,k=g.candidateValue,C=g.targetElement,O=g.onSelect;if(k&&k.length){var U=this.utilities.chunkArray(k.split(" "),this.pageSize);this.renderPage({candidateListPages:U,targetElement:C,pageIndex:this.pageIndex,nbPages:U.length,onItemSelected:function(H,V){O(H,V),S.destroy()}})}}},{key:"renderPage",value:function(g){var S,k=this,C=g.candidateListPages,O=g.targetElement,U=g.pageIndex,H=g.nbPages,V=g.onItemSelected;(S=this.candidateBoxElement)===null||S===void 0||S.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var ee=document.createElement("ul");ee.className="hg-candidate-box-list",C[U].forEach((function(ce){var Me,Re=document.createElement("li"),ze=function(){var rt=new(k.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(rt,"target",{value:Re}),rt};Re.className="hg-candidate-box-list-item",Re.innerHTML=((Me=k.options.display)===null||Me===void 0?void 0:Me[ce])||ce,k.options.useTouchEvents?Re.ontouchstart=function(rt){return V(ce,rt||ze())}:Re.onclick=function(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ze();return V(ce,rt)},ee.appendChild(Re)}));var X=U>0,M=document.createElement("div");M.classList.add("hg-candidate-box-prev"),X&&M.classList.add("hg-candidate-box-btn-active");var Q=function(){X&&k.renderPage({candidateListPages:C,targetElement:O,pageIndex:U-1,nbPages:H,onItemSelected:V})};this.options.useTouchEvents?M.ontouchstart=Q:M.onclick=Q,this.candidateBoxElement.appendChild(M),this.candidateBoxElement.appendChild(ee);var ue=U<H-1,ne=document.createElement("div");ne.classList.add("hg-candidate-box-next"),ue&&ne.classList.add("hg-candidate-box-btn-active");var fe=function(){ue&&k.renderPage({candidateListPages:C,targetElement:O,pageIndex:U+1,nbPages:H,onItemSelected:V})};this.options.useTouchEvents?ne.ontouchstart=fe:ne.onclick=fe,this.candidateBoxElement.appendChild(ne),O.prepend(this.candidateBoxElement)}}],P&&ie(A.prototype,P),f&&ie(A,f),Object.defineProperty(A,"prototype",{writable:!1}),A;var A,P,f})(),le=re;function J(A){return(function(P){if(Array.isArray(P))return Ce(P)})(A)||(function(P){if(typeof Symbol<"u"&&P[Symbol.iterator]!=null||P["@@iterator"]!=null)return Array.from(P)})(A)||(function(P,f){if(P){if(typeof P=="string")return Ce(P,f);var g={}.toString.call(P).slice(8,-1);return g==="Object"&&P.constructor&&(g=P.constructor.name),g==="Map"||g==="Set"?Array.from(P):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?Ce(P,f):void 0}})(A)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Ce(A,P){(P==null||P>A.length)&&(P=A.length);for(var f=0,g=Array(P);f<P;f++)g[f]=A[f];return g}function Se(A){return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Se(A)}function He(A,P){var f=Object.keys(A);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(A);P&&(g=g.filter((function(S){return Object.getOwnPropertyDescriptor(A,S).enumerable}))),f.push.apply(f,g)}return f}function Y(A,P){for(var f=0;f<P.length;f++){var g=P[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(A,ye(g.key),g)}}function be(A,P,f){return(P=ye(P))in A?Object.defineProperty(A,P,{value:f,enumerable:!0,configurable:!0,writable:!0}):A[P]=f,A}function ye(A){var P=(function(f,g){if(Se(f)!="object"||!f)return f;var S=f[Symbol.toPrimitive];if(S!==void 0){var k=S.call(f,g);if(Se(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(f)})(A,"string");return Se(P)=="symbol"?P:P+""}var ae=(function(){return A=function g(S,k){var C=this;if((function(Q,ue){if(!(Q instanceof ue))throw new TypeError("Cannot call a class as a function")})(this,g),be(this,"input",void 0),be(this,"options",void 0),be(this,"utilities",void 0),be(this,"caretPosition",void 0),be(this,"caretPositionEnd",void 0),be(this,"keyboardDOM",void 0),be(this,"keyboardPluginClasses",void 0),be(this,"keyboardDOMClass",void 0),be(this,"buttonElements",void 0),be(this,"currentInstanceName",void 0),be(this,"allKeyboardInstances",void 0),be(this,"keyboardInstanceNames",void 0),be(this,"isFirstKeyboardInstance",void 0),be(this,"physicalKeyboard",void 0),be(this,"modules",void 0),be(this,"activeButtonClass",void 0),be(this,"holdInteractionTimeout",void 0),be(this,"holdTimeout",void 0),be(this,"isMouseHold",void 0),be(this,"initialized",void 0),be(this,"candidateBox",void 0),be(this,"keyboardRowsDOM",void 0),be(this,"defaultName","default"),be(this,"activeInputElement",null),be(this,"handleParams",(function(Q,ue){var ne,fe,ce;if(typeof Q=="string")ne=Q.split(".").join(""),fe=document.querySelector(".".concat(ne)),ce=ue;else if(Q instanceof HTMLDivElement){if(!Q.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");ne=Q.className.split(" ")[0],fe=Q,ce=ue}else ne="simple-keyboard",fe=document.querySelector(".".concat(ne)),ce=Q;return{keyboardDOMClass:ne,keyboardDOM:fe,options:ce}})),be(this,"getOptions",(function(){return C.options})),be(this,"getCaretPosition",(function(){return C.caretPosition})),be(this,"getCaretPositionEnd",(function(){return C.caretPositionEnd})),be(this,"registerModule",(function(Q,ue){C.modules[Q]||(C.modules[Q]={}),ue(C.modules[Q])})),be(this,"getKeyboardClassString",(function(){for(var Q=arguments.length,ue=new Array(Q),ne=0;ne<Q;ne++)ue[ne]=arguments[ne];return[C.keyboardDOMClass].concat(ue).filter((function(fe){return!!fe})).join(" ")})),typeof window<"u"){var O=this.handleParams(S,k),U=O.keyboardDOMClass,H=O.keyboardDOM,V=O.options,ee=V===void 0?{}:V;this.utilities=new F({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=H,this.options=(function(Q){for(var ue=1;ue<arguments.length;ue++){var ne=arguments[ue]!=null?arguments[ue]:{};ue%2?He(Object(ne),!0).forEach((function(fe){be(Q,fe,ne[fe])})):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(ne)):He(Object(ne)).forEach((function(fe){Object.defineProperty(Q,fe,Object.getOwnPropertyDescriptor(ne,fe))}))}return Q})({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},ee),this.keyboardPluginClasses="",F.bindMethods(g,this);var X=this.options.inputName,M=X===void 0?this.defaultName:X;if(this.input={},this.input[M]="",this.keyboardDOMClass=U,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new _e({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new le({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(U,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},P=[{key:"setCaretPosition",value:function(g){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g;this.caretPosition=g,this.caretPositionEnd=S}},{key:"getInputCandidates",value:function(g){var S=this,k=this.options,C=k.layoutCandidates,O=k.layoutCandidatesCaseSensitiveMatch;if(!C||Se(C)!=="object")return{};var U=Object.keys(C).filter((function(ee){var X=g.substring(0,S.getCaretPositionEnd()||0)||g,M=new RegExp("".concat(S.utilities.escapeRegex(ee),"$"),O?"g":"gi");return!!J(X.matchAll(M)).length}));if(U.length>1){var H=U.sort((function(ee,X){return X.length-ee.length}))[0];return{candidateKey:H,candidateValue:C[H]}}if(U.length){var V=U[0];return{candidateKey:V,candidateValue:C[V]}}return{}}},{key:"showCandidatesBox",value:function(g,S,k){var C=this;this.candidateBox&&this.candidateBox.show({candidateValue:S,targetElement:k,onSelect:function(O,U){var H=C.options,V=H.layoutCandidatesCaseSensitiveMatch,ee=H.disableCandidateNormalization,X=H.enableLayoutCandidatesKeyPress,M=O;ee||(M=O.normalize("NFD")),typeof C.options.beforeInputUpdate=="function"&&C.options.beforeInputUpdate(C);var Q=C.getInput(C.options.inputName,!0),ue=C.getCaretPositionEnd()||0,ne=Q.substring(0,ue||0)||Q,fe=new RegExp("".concat(C.utilities.escapeRegex(g),"$"),V?"g":"gi"),ce=ne.replace(fe,M),Me=Q.replace(ne,ce),Re=ce.length-ne.length,ze=(ue||Q.length)+Re;ze<0&&(ze=0),C.setInput(Me,C.options.inputName,!0),C.setCaretPosition(ze),X&&typeof C.options.onKeyPress=="function"&&C.options.onKeyPress(O,U),typeof C.options.onChange=="function"&&C.options.onChange(C.getInput(C.options.inputName,!0),U),typeof C.options.onChangeAll=="function"&&C.options.onChangeAll(C.getAllInputs(),U)}})}},{key:"handleButtonClicked",value:function(g,S){var k=this.options,C=k.inputName,O=C===void 0?this.defaultName:C,U=k.debug;if(g!=="{//}"){this.input[O]||(this.input[O]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var H=this.utilities.getUpdatedInput(g,this.input[O],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(g)&&this.activeInputElement&&this.input[O]&&this.input[O]===H&&this.caretPosition===0&&this.caretPositionEnd===H.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(g,S);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(g,S),this.input[O]!==H&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(H))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,H))return;var V=this.utilities.getUpdatedInput(g,this.input[O],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(V,this.options.inputName,!0),U&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),S?.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),S),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),S),S!=null&&S.target&&this.options.enableLayoutCandidates){var ee,X=this.getInputCandidates(H),M=X.candidateKey,Q=X.candidateValue;M&&Q?this.showCandidatesBox(M,Q,this.keyboardDOM):(ee=this.candidateBox)===null||ee===void 0||ee.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),U&&console.log("Key pressed:",g)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(g){this.options.syncInstanceInputs?this.dispatch((function(S){S.isMouseHold=g})):this.isMouseHold=g}},{key:"handleButtonMouseDown",value:function(g,S){var k=this;S&&(this.options.preventMouseDownDefault&&S.preventDefault(),this.options.stopMouseDownPropagation&&S.stopPropagation(),S.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout((function(){(k.getMouseHold()&&(!g.includes("{")&&!g.includes("}")||g==="{delete}"||g==="{backspace}"||g==="{bksp}"||g==="{space}"||g==="{tab}")||g==="{arrowright}"||g==="{arrowleft}"||g==="{arrowup}"||g==="{arrowdown}")&&(k.options.debug&&console.log("Button held:",g),k.handleButtonHold(g)),clearTimeout(k.holdTimeout)}),500))}},{key:"handleButtonMouseUp",value:function(g,S){var k=this;S&&(this.options.preventMouseUpDefault&&S.preventDefault&&S.preventDefault(),this.options.stopMouseUpPropagation&&S.stopPropagation&&S.stopPropagation(),!(S.target===this.keyboardDOM||S.target&&this.keyboardDOM.contains(S.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(S.target===this.candidateBox.candidateBoxElement||S.target&&this.candidateBox.candidateBoxElement.contains(S.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons((function(C){C.classList.remove(k.activeButtonClass)})),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),g&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(g,S)}},{key:"handleKeyboardContainerMouseDown",value:function(g){this.options.preventMouseDownDefault&&g.preventDefault()}},{key:"handleButtonHold",value:function(g){var S=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout((function(){S.getMouseHold()?(S.handleButtonClicked(g),S.handleButtonHold(g)):clearTimeout(S.holdInteractionTimeout)}),100)}},{key:"syncInstanceInputs",value:function(){var g=this;this.dispatch((function(S){S.replaceInput(g.input),S.setCaretPosition(g.caretPosition,g.caretPositionEnd)}))}},{key:"clearInput",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[g]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,S=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!S&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[g].replace("‫","").replace("‬","")+"‬":this.input[g]}},{key:"getAllInputs",value:function(){var g=this,S={};return Object.keys(this.input).forEach((function(k){S[k]=g.getInput(k,!0)})),S}},{key:"setInput",value:function(g){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,k=arguments.length>2?arguments[2]:void 0;this.input[S]=g,!k&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(g){this.input=g}},{key:"setOptions",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=this.changedOptions(g);this.options=Object.assign(this.options,g),S.length&&(this.options.debug&&console.log("changedOptions",S),this.onSetOptions(S),this.render())}},{key:"changedOptions",value:function(g){var S=this;return Object.keys(g).filter((function(k){return JSON.stringify(g[k])!==JSON.stringify(S.options[k])}))}},{key:"onSetOptions",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];g.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(g.includes("layoutCandidatesPageSize")||g.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new le({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(g){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach((function(S){g(window.SimpleKeyboardInstances[S],S)}))}},{key:"addButtonTheme",value:function(g,S){var k=this;S&&g&&(g.split(" ").forEach((function(C){S.split(" ").forEach((function(O){k.options.buttonTheme||(k.options.buttonTheme=[]);var U=!1;k.options.buttonTheme.map((function(H){if(H!=null&&H.class.split(" ").includes(O)){U=!0;var V=H.buttons.split(" ");V.includes(C)||(U=!0,V.push(C),H.buttons=V.join(" "))}return H})),U||k.options.buttonTheme.push({class:O,buttons:g})}))})),this.render())}},{key:"removeButtonTheme",value:function(g,S){var k=this;if(!g&&!S)return this.options.buttonTheme=[],void this.render();g&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(g.split(" ").forEach((function(C){var O;(O=k.options)===null||O===void 0||(O=O.buttonTheme)===null||O===void 0||O.map((function(U,H){if(U&&S&&S.includes(U.class)||!S){var V,ee,X=(V=U)===null||V===void 0?void 0:V.buttons.split(" ").filter((function(M){return M!==C}));U&&X!=null&&X.length?U.buttons=X.join(" "):((ee=k.options.buttonTheme)===null||ee===void 0||ee.splice(H,1),U=null)}return U}))})),this.render())}},{key:"getButtonElement",value:function(g){var S,k=this.buttonElements[g];return k&&(S=k.length>1?k:k[0]),S}},{key:"inputPatternIsValid",value:function(g){var S,k=this.options.inputPattern;if((S=k instanceof RegExp?k:k[this.options.inputName||this.defaultName])&&g){var C=S.test(g);return this.options.debug&&console.log('inputPattern ("'.concat(S,'"): ').concat(C?"passed":"did not pass!")),C}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var g=this.options.physicalKeyboardHighlightPreventDefault,S=g!==void 0&&g;document.addEventListener("keyup",this.handleKeyUp,S),document.addEventListener("keydown",this.handleKeyDown,S),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(g){this.caretEventHandler(g),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(g)}},{key:"handleKeyDown",value:function(g){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(g)}},{key:"handleMouseUp",value:function(g){this.caretEventHandler(g)}},{key:"handleTouchEnd",value:function(g){this.caretEventHandler(g)}},{key:"handleSelect",value:function(g){this.caretEventHandler(g)}},{key:"handleSelectionChange",value:function(g){navigator.userAgent.includes("Firefox")||this.caretEventHandler(g)}},{key:"caretEventHandler",value:function(g){var S,k=this;g.target.tagName&&(S=g.target.tagName.toLowerCase()),this.dispatch((function(C){var O=g.target===C.keyboardDOM||g.target&&C.keyboardDOM.contains(g.target);if(k.options.syncInstanceInputs&&Array.isArray(g.path)&&(O=g.path.some((function(V){var ee;return V==null||(ee=V.hasAttribute)===null||ee===void 0?void 0:ee.call(V,"data-skInstance")}))),(S==="textarea"||S==="input"&&["text","search","url","tel","password"].includes(g.target.type))&&!C.options.disableCaretPositioning){var U=g.target.selectionStart,H=g.target.selectionEnd;C.options.rtl&&(U=C.utilities.getRtlOffset(U,C.getInput()),H=C.utilities.getRtlOffset(H,C.getInput())),C.setCaretPosition(U,H),C.activeInputElement=g.target,C.options.debug&&console.log("Caret at: ",C.getCaretPosition(),C.getCaretPositionEnd(),g&&g.target.tagName.toLowerCase(),"(".concat(C.keyboardDOMClass,")"),g?.type)}else!C.options.disableCaretPositioning&&O||g?.type==="selectionchange"||(C.setCaretPosition(null),C.activeInputElement=null,C.options.debug&&console.log('Caret position reset due to "'.concat(g?.type,'" event'),g))}))}},{key:"recurseButtons",value:function(g){var S=this;g&&Object.keys(this.buttonElements).forEach((function(k){return S.buttonElements[k].forEach(g)}))}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var g=this.options.physicalKeyboardHighlightPreventDefault,S=g!==void 0&&g;document.removeEventListener("keyup",this.handleKeyUp,S),document.removeEventListener("keydown",this.handleKeyDown,S),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons((function(k){k&&(k.onpointerdown=null,k.onpointerup=null,k.onpointercancel=null,k.ontouchstart=null,k.ontouchend=null,k.ontouchcancel=null,k.onclick=null,k.onmousedown=null,k.onmouseup=null,k.remove(),k=null)})),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(g){var S=this.options.buttonTheme,k=[];return Array.isArray(S)&&S.forEach((function(C){if(C&&C.class&&typeof C.class=="string"&&C.buttons&&typeof C.buttons=="string"){var O=C.class.split(" ");C.buttons.split(" ").includes(g)&&(k=[].concat(J(k),J(O)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',C)})),k}},{key:"setDOMButtonAttributes",value:function(g,S){var k=this.options.buttonAttributes;Array.isArray(k)&&k.forEach((function(C){C.attribute&&typeof C.attribute=="string"&&C.value&&typeof C.value=="string"?C.buttons&&typeof C.buttons=="string"?C.buttons.split(" ").includes(g)&&S(C.attribute,C.value):S(C.attribute,C.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',C)}))}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(g){var S;if((S=g.target.classList)!==null&&S!==void 0&&S.contains("hg-button"))return g.preventDefault(),g.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var g=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach((function(S){var k=g.utilities.isConstructor(S)?new S(g):S(g);k.init&&k.init(g)})),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(g,S){return!!this.modules[g]&&this.modules[g][S]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(g,S,k,C){var O=this,U=Array.from(g.children),H=0;return U.length&&k.forEach((function(V,ee){var X=C[ee];if(!(X&&X>V))return!1;var M=V-H,Q=X-H,ue=document.createElement("div");ue.className+="hg-button-container";var ne="".concat(O.options.layoutName,"-r").concat(S,"c").concat(ee);ue.setAttribute("data-skUID",ne);var fe=U.splice(M,Q-M+1);H+=Q-M,fe.forEach((function(ce){return ue.appendChild(ce)})),U.splice(M,0,ue),g.innerHTML="",U.forEach((function(ce){return g.appendChild(ce)})),O.options.debug&&console.log("rowDOMContainer",fe,M,Q,H+1)})),g}},{key:"render",value:function(){var g=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var S="hg-layout-".concat(this.options.layoutName),k=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},C=this.options.useTouchEvents||!1,O=C?"hg-touch-events":"",U=this.options.useMouseEvents||!1,H=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,S,this.keyboardPluginClasses,O),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",k[this.options.layoutName||this.defaultName].forEach((function(V,ee){var X=V.split(" ");g.options.excludeFromLayout&&g.options.excludeFromLayout[g.options.layoutName||g.defaultName]&&(X=X.filter((function(ne){return g.options.excludeFromLayout&&!g.options.excludeFromLayout[g.options.layoutName||g.defaultName].includes(ne)})));var M=document.createElement("div");M.className+="hg-row";var Q=[],ue=[];X.forEach((function(ne,fe){var ce,Me=!H&&typeof ne=="string"&&ne.length>1&&ne.indexOf("[")===0,Re=!H&&typeof ne=="string"&&ne.length>1&&ne.indexOf("]")===ne.length-1;Me&&(Q.push(fe),ne=ne.replace(/\[/g,"")),Re&&(ue.push(fe),ne=ne.replace(/\]/g,""));var ze=g.utilities.getButtonClass(ne),rt=g.utilities.getButtonDisplayName(ne,g.options.display,g.options.mergeDisplay),Ve=g.options.useButtonTag?"button":"div",Je=document.createElement(Ve);Je.className+="hg-button ".concat(ze),(ce=Je.classList).add.apply(ce,J(g.getButtonThemeClasses(ne))),g.setDOMButtonAttributes(ne,(function(Qe,At){Je.setAttribute(Qe,At)})),g.activeButtonClass="hg-activeButton",!g.utilities.pointerEventsSupported()||C||U?C?(Je.ontouchstart=function(Qe){g.handleButtonClicked(ne,Qe),g.handleButtonMouseDown(ne,Qe)},Je.ontouchend=function(Qe){g.handleButtonMouseUp(ne,Qe)},Je.ontouchcancel=function(Qe){g.handleButtonMouseUp(ne,Qe)}):(Je.onclick=function(Qe){g.setMouseHold(!1),typeof g.options.onKeyReleased=="function"||g.options.useMouseEvents&&g.options.clickOnMouseDown||g.handleButtonClicked(ne,Qe)},Je.onmousedown=function(Qe){(typeof g.options.onKeyReleased=="function"||g.options.useMouseEvents&&g.options.clickOnMouseDown)&&!g.isMouseHold&&g.handleButtonClicked(ne,Qe),g.handleButtonMouseDown(ne,Qe)},Je.onmouseup=function(Qe){g.handleButtonMouseUp(ne,Qe)}):(Je.onpointerdown=function(Qe){g.handleButtonClicked(ne,Qe),g.handleButtonMouseDown(ne,Qe)},Je.onpointerup=function(Qe){g.handleButtonMouseUp(ne,Qe)},Je.onpointercancel=function(Qe){g.handleButtonMouseUp(ne,Qe)}),Je.setAttribute("data-skBtn",ne);var We="".concat(g.options.layoutName,"-r").concat(ee,"b").concat(fe);Je.setAttribute("data-skBtnUID",We);var it=document.createElement("span");it.innerHTML=rt,Je.appendChild(it),g.buttonElements[ne]||(g.buttonElements[ne]=[]),g.buttonElements[ne].push(Je),M.appendChild(Je)})),M=g.parseRowDOMContainers(M,ee,Q,ue),g.keyboardRowsDOM.appendChild(M)})),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||C||U?C?(document.ontouchend=function(V){return g.handleButtonMouseUp(void 0,V)},document.ontouchcancel=function(V){return g.handleButtonMouseUp(void 0,V)},this.keyboardDOM.ontouchstart=function(V){return g.handleKeyboardContainerMouseDown(V)}):C||(document.onmouseup=function(V){return g.handleButtonMouseUp(void 0,V)},this.keyboardDOM.onmousedown=function(V){return g.handleKeyboardContainerMouseDown(V)}):(document.onpointerup=function(V){return g.handleButtonMouseUp(void 0,V)},this.keyboardDOM.onpointerdown=function(V){return g.handleKeyboardContainerMouseDown(V)}),this.onInit())}}],P&&Y(A.prototype,P),f&&Y(A,f),Object.defineProperty(A,"prototype",{writable:!1}),A;var A,P,f})(),Ne=ae,ge=Ne;return w})()},981:function(){typeof Element>"u"||"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof self<"u"&&"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&(function(m){if("Element"in m){var h="classList",x="prototype",p=m.Element[x],w=Object,N=String[x].trim||function(){return this.replace(/^\s+|\s+$/g,"")},_=Array[x].indexOf||function(F){for(var T=0,I=this.length;T<I;T++)if(T in this&&this[T]===F)return T;return-1},D=function(F,T){this.name=F,this.code=DOMException[F],this.message=T},L=function(F,T){if(T==="")throw new D("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(T))throw new D("INVALID_CHARACTER_ERR","The token must not contain space characters.");return _.call(F,T)},B=function(F){for(var T=N.call(F.getAttribute("class")||""),I=T?T.split(/\s+/):[],se=0,oe=I.length;se<oe;se++)this.push(I[se]);this._updateClassName=function(){F.setAttribute("class",this.toString())}},z=B[x]=[],q=function(){return new B(this)};if(D[x]=Error[x],z.item=function(F){return this[F]||null},z.contains=function(F){return~L(this,F+"")},z.add=function(){var F,T=arguments,I=0,se=T.length,oe=!1;do~L(this,F=T[I]+"")||(this.push(F),oe=!0);while(++I<se);oe&&this._updateClassName()},z.remove=function(){var F,T,I=arguments,se=0,oe=I.length,_e=!1;do for(T=L(this,F=I[se]+"");~T;)this.splice(T,1),_e=!0,T=L(this,F);while(++se<oe);_e&&this._updateClassName()},z.toggle=function(F,T){var I=this.contains(F),se=I?T!==!0&&"remove":T!==!1&&"add";return se&&this[se](F),T===!0||T===!1?T:!I},z.replace=function(F,T){var I=L(F+"");~I&&(this.splice(I,1,T),this._updateClassName())},z.toString=function(){return this.join(" ")},w.defineProperty){var R={get:q,enumerable:!0,configurable:!0};try{w.defineProperty(p,h,R)}catch(F){F.number!==void 0&&F.number!==-2146823252||(R.enumerable=!1,w.defineProperty(p,h,R))}}else w[x].__defineGetter__&&p.__defineGetter__(h,q)}})(self),(function(){var m=document.createElement("_");if(m.classList.add("c1","c2"),!m.classList.contains("c2")){var h=function(p){var w=DOMTokenList.prototype[p];DOMTokenList.prototype[p]=function(N){var _,D=arguments.length;for(_=0;_<D;_++)N=arguments[_],w.call(this,N)}};h("add"),h("remove")}if(m.classList.toggle("c3",!1),m.classList.contains("c3")){var x=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(p,w){return 1 in arguments&&!this.contains(p)==!w?w:x.call(this,p)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(p,w){var N=this.toString().split(" "),_=N.indexOf(p+"");~_&&(N=N.slice(_),this.remove.apply(this,N),this.add(w),this.add.apply(this,N.slice(1)))}),m=null})())}},o={};function c(m){var h=o[m];if(h!==void 0)return h.exports;var x=o[m]={exports:{}};return n[m].call(x.exports,x,x.exports,c),x.exports}c.n=function(m){var h=m&&m.__esModule?function(){return m.default}:function(){return m};return c.d(h,{a:h}),h},c.d=function(m,h){for(var x in h)c.o(h,x)&&!c.o(m,x)&&Object.defineProperty(m,x,{enumerable:!0,get:h[x]})},c.o=function(m,h){return Object.prototype.hasOwnProperty.call(m,h)},c.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var d={};return(function(){c.r(d),c.d(d,{KeyboardReact:function(){return L},default:function(){return B}}),c(981);var m=c(442),h=c(548),x=c.n(h);function p(z){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},p(z)}function w(z,q){var R=Object.keys(z);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(z);q&&(F=F.filter((function(T){return Object.getOwnPropertyDescriptor(z,T).enumerable}))),R.push.apply(R,F)}return R}function N(z){for(var q=1;q<arguments.length;q++){var R=arguments[q]!=null?arguments[q]:{};q%2?w(Object(R),!0).forEach((function(F){_(z,F,R[F])})):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(R)):w(Object(R)).forEach((function(F){Object.defineProperty(z,F,Object.getOwnPropertyDescriptor(R,F))}))}return z}function _(z,q,R){return(q=(function(F){var T=(function(I,se){if(p(I)!="object"||!I)return I;var oe=I[Symbol.toPrimitive];if(oe!==void 0){var _e=oe.call(I,se);if(p(_e)!="object")return _e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(se==="string"?String:Number)(I)})(F,"string");return p(T)=="symbol"?T:T+""})(q))in z?Object.defineProperty(z,q,{value:R,enumerable:!0,configurable:!0,writable:!0}):z[q]=R,z}var D=function(z){return N(N({},z),{},{keyboardRef:null})},L=function(z){var q=z.baseClass||"react-simple-keyboard",R=m.useRef(null),F=m.useRef(null),T=m.useRef(null),I=m.useRef(z);return m.useEffect((function(){return function(){T.current&&T.current.destroy(),R.current=!1}}),[]),m.useEffect((function(){var se=(function(Ee){return N(N({},Ee),{},{theme:"simple-keyboard ".concat(Ee.theme||"hg-theme-default")})})(z);if(!R.current){R.current=!0,se.debug&&console.log("ReactSimpleKeyboard: Init");var oe=F.current,_e=".".concat(q);T.current=new(x())(oe||_e,se),se.keyboardRef&&se.keyboardRef(T.current)}var he=(function(Ee,Ae){var re=D(Ae),le=D(Ee);return Object.keys(re).filter((function(J){return re[J]!==le[J]}))})(I.current,se);if(he.length){var ie=T.current;I.current=se,ie?.setOptions(se),se.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",he)}}),[R,q,I,z]),m.createElement("div",{className:q,ref:F})},B=L})(),d})()}))})(jh)),jh.exports}var OC=MC();const Dg=Lb(OC),Ov=()=>{const s=v.useCallback(()=>{try{return window.appSettings?.current?.select_keyboard||"System Keyboard"}catch(r){return console.log("Failed to get keyboard setting:",r),"System Keyboard"}},[]),t=v.useCallback(()=>s()==="GBoard",[s]);return{getKeyboardSetting:s,shouldShowVirtualKeyboard:t,isGBoardSelected:t()}},Wa=({isVisible:s,onClose:t,activeInput:r,onInputChange:n,onInputBlur:o,inputValue:c="",placeholder:d="Type here...",onKeyPress:m})=>{const[h,x]=v.useState(""),[p,w]=v.useState(!1),{shouldShowVirtualKeyboard:N}=Ov();v.useEffect(()=>{r&&c!==void 0&&x(c)},[r,c]),v.useEffect(()=>{},[p]);const _=q=>{x(q),n&&n(q,r)},D=q=>{x(q[r]||"")},L=q=>{if(r){if(q==="{bksp}"){const F=(h||"").slice(0,-1);x(F),n&&n(F,r)}else if(q==="{enter}")m?m({action:"enter",nextField:r}):n&&n(h,r,"enter");else if(q==="{lock}")w(!p);else if(q!=="{shift}"){if(q==="{tab}")m?m({action:"tab",nextField:r}):n&&n(h,r,"tab");else if(q==="{space}"){const F=(h||"")+" ";x(F),n&&n(F,r)}}}},B=()=>{x(""),w(!1)},z=()=>{n&&r&&h!==void 0&&n(h,r),B(),t&&t()};return!s||!N()?null:e.jsx("div",{className:"fixed bottom-0 left-[15%] right-[15%] z-50 bg-white border-t border-gray-200 shadow-lg",children:e.jsxs("div",{className:"p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Virtual Keyboard"}),p&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:"CAPS LOCK"}),r&&e.jsx("span",{className:"px-2 py-1 bg-primaryExtraLight text-primary font-medium rounded-full text-xs",children:r})]}),e.jsx("button",{onClick:z,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"keyboard-container w-full",onClick:q=>q.stopPropagation(),onMouseDown:q=>q.preventDefault(),children:e.jsx(Dg,{keyboardRef:q=>window.keyboard=q,input:h,onChange:_,onChangeAll:D,onKeyPress:L,theme:"hg-theme-default",layoutName:p?"shift":"default",layout:{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","z x c v b n m , . /","{space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"Z X C V B N M < > ?","{space}"]},physicalKeyboardHighlight:!0,physicalKeyboardHighlightTextColor:"#000000",physicalKeyboardHighlightBgColor:"#fff475"},r)})]})})},Wn=(s=[])=>{const[t,r]=v.useState(!1),[n,o]=v.useState(""),[c,d]=v.useState(""),[m,h]=v.useState(!1),{shouldShowVirtualKeyboard:x}=Ov();v.useEffect(()=>{},[m]);const p=(R,F="")=>{o(R),d(F||""),r(x())},w=R=>{const{name:F,value:T}=R.target;F===n&&d(T)},N=(R,F,T="")=>{n!==F&&d(T||""),o(F),r(x()),d(T||""),R&&R.target&&(R.target.value=T||"")};return{showKeyboard:t,activeInput:n,keyboardInput:c,capsLock:m,handleInputFocus:p,handleInputBlur:w,handleAnyInputFocus:N,handleAnyInputClick:(R,F,T="")=>{(!t||n!==F)&&N(R,F,T)},onKeyboardChange:R=>(d(R),{input:R,activeInput:n}),onKeyboardChangeAll:R=>{d(R[n]||"")},onKeyboardKeyPress:R=>{if(n)if(R==="{bksp}"){const T=(c||"").slice(0,-1);return d(T),{action:"backspace",value:T,activeInput:n}}else if(R==="{enter}"){const F=s.indexOf(n);return F<s.length-1?{action:"enter",nextField:s[F+1],activeInput:n}:{action:"enter",submit:!0,activeInput:n}}else{if(R==="{lock}")return h(!m),{action:"capslock",capsLock:!m};if(R==="{shift}")return{action:"shift",activeInput:n};if(R==="{tab}"){const F=s.indexOf(n);return F<s.length-1?{action:"tab",nextField:s[F+1],activeInput:n}:{action:"tab",nextField:s[0],activeInput:n}}else if(R==="{space}"){const T=(c||"")+" ";return d(T),{action:"space",value:T,activeInput:n}}}return null},resetKeyboardInputs:()=>{d(""),o(""),r(!1),h(!1)},hideKeyboard:R=>{R&&n&&c!==void 0&&R(n,c),r(!1)},setActiveInput:o,setKeyboardInput:d}},xy=({isOpen:s,onClose:t,onCustomerSelect:r,editingCustomer:n,orderType:o})=>{const[c,d]=v.useState({name:"",phone:"",email:"",isloyal:!1}),[m,h]=v.useState([{address:"",eircode:""}]),[x,p]=v.useState([]),[w,N]=v.useState(0),[_,D]=v.useState({}),[L,B]=v.useState(!1),[z,q]=v.useState(""),[R,F]=v.useState(""),[T,I]=v.useState([]),[se,oe]=v.useState(!1),[_e,he]=v.useState(-1),[ie,Ee]=v.useState(!1),[Ae,re]=v.useState({addressIndex:-1,value:""}),[le,J]=v.useState(null),[Ce,Se]=v.useState([]),[He,Y]=v.useState(!1),[be,ye]=v.useState(-1),[ae,Ne]=v.useState(!1),[ge,A]=v.useState({addressIndex:-1,value:""}),[P,f]=v.useState(null),g="PCWK5-XD39R-HSZW6-SK54F",S="https://ws.postcoder.com/pcw",k={H91TK33:{summaryline:"National University of Ireland Galway",locationsummary:"Galway",addressline1:"National University of Ireland Galway",addressline2:"University Road",addressline3:"Galway",addressline4:"H91 TK33"},D01F5P2:{summaryline:"O'Connell Bridge",locationsummary:"Dublin",addressline1:"O'Connell Bridge",addressline2:"Dublin 1",addressline3:"Dublin",addressline4:"D01 F5P2"},D02PK15:{summaryline:"Trinity College Dublin",locationsummary:"Dublin",addressline1:"Trinity College Dublin",addressline2:"College Green",addressline3:"Dublin 2",addressline4:"D02 PK15"}};v.useEffect(()=>{if(s){if(n)if(d({name:n.name||"",phone:n.phone||"",email:n.email||"",isloyal:n.isloyal||!1}),n.addresses&&n.addresses.length>0){const Te=n.addresses.map(qe=>({id:qe.id,address:qe.address||"",eircode:qe.code||""}));h(Te);const Ke=n.selectedAddressIndex||0,Pe=Math.min(Ke,Te.length-1);p([Pe]),N(Pe)}else h([{address:"",eircode:""}]),p([0]);else d({name:"",phone:"",email:"",isloyal:!1}),h([{address:"",eircode:""}]),p([0]),N(0);D({}),B(!1),q(""),I([]),oe(!1),he(-1),Se([]),Y(!1),ye(-1)}},[s,n]),v.useEffect(()=>()=>{le&&clearTimeout(le),P&&clearTimeout(P)},[le,P]),v.useEffect(()=>{console.log("Selected addresses state updated:",x)},[x]),v.useEffect(()=>{console.log("Selected address index updated:",w)},[w]);const C=async(Te,Ke)=>{if(console.log("Searching address:",Te,"for address index:",Ke),!Te||Te.length<3){console.log("Address too short, clearing suggestions"),Se([]),Y(!1),ye(-1);return}Ne(!0),A({addressIndex:Ke,value:Te}),Se([]),Y(!1),ye(-1);try{const Pe=`${S}/${g}/address/IE/${encodeURIComponent(Te)}`;console.log("Making address API request to:",Pe);const qe=await fetch(Pe);if(console.log("Address API response status:",qe.status),!qe.ok)throw new Error(`HTTP error! status: ${qe.status}`);const ft=await qe.json();if(console.log("Address API response data:",ft),Array.isArray(ft)&&ft.length>0){console.log("Setting address suggestions:",ft.length,"items");const ot=ft.map((pt,ke)=>({id:ke.toString(),summaryline:pt.summaryline||`${pt.addressline1||""} ${pt.addressline2||""}`.trim(),locationsummary:pt.posttown||"",addressline1:pt.addressline1||"",addressline2:pt.addressline2||"",addressline3:pt.addressline3||"",addressline4:pt.addressline4||""}));Se(ot),Y(!0),ye(-1)}else console.log("No address suggestions found"),Se([]),Y(!1)}catch(Pe){console.error("Error fetching address suggestions:",Pe),console.log("Address API failed, suggesting manual entry");const qe=[{id:"0",summaryline:`Address search for "${Te}" - API temporarily unavailable`,locationsummary:"Please enter address manually",addressline1:"",addressline2:"",addressline3:"",addressline4:"",isFallback:!0}];Se(qe),Y(!0),ye(-1)}finally{Ne(!1)}},O=async(Te,Ke)=>{if(console.log("Retrieving address from suggestion:",Te,"address index:",Ke),!ge.value||!Ce[Te]){console.log("No current input or suggestion not found");return}try{const Pe=Ce[Te];if(console.log("Selected address suggestion:",Pe),Pe.isFallback){console.log("Fallback message clicked - not populating address"),Y(!1),Se([]),ye(-1);return}const qe=[];if(Pe.addressline1&&qe.push(Pe.addressline1),Pe.addressline2&&qe.push(Pe.addressline2),Pe.addressline3&&qe.push(Pe.addressline3),Pe.addressline4&&qe.push(Pe.addressline4),qe.length>0){const ft=qe.join(", ");console.log("Full address from suggestion:",ft),h(ot=>{const pt=ot.map((ke,st)=>st===Ke?{...ke,address:ft}:ke);return console.log("Updated addresses:",pt),pt})}else Pe.summaryline?(console.log("Using summaryline as address:",Pe.summaryline),h(ft=>{const ot=ft.map((pt,ke)=>ke===Ke?{...pt,address:Pe.summaryline}:pt);return console.log("Updated addresses with summaryline:",ot),ot})):console.log("No address data available in suggestion");console.log("Address updated successfully")}catch(Pe){console.error("Error retrieving address:",Pe)}finally{Y(!1),Se([]),ye(-1)}},U=(Te,Ke)=>{if(console.log("Address input changed:",Ke,"for index:",Te),rt(Te,"address",Ke),P&&clearTimeout(P),!Ke||Ke.length<3){Se([]),Y(!1),ye(-1);return}const Pe=setTimeout(()=>{console.log("Executing debounced address search for:",Ke),C(Ke,Te)},300);f(Pe)},H=(Te,Ke)=>{if(He)switch(Te.key){case"ArrowDown":Te.preventDefault(),ye(Pe=>Pe<Ce.length-1?Pe+1:0);break;case"ArrowUp":Te.preventDefault(),ye(Pe=>Pe>0?Pe-1:Ce.length-1);break;case"Enter":Te.preventDefault(),be>=0&&Ce[be]&&O(be,Ke);break;case"Escape":Y(!1),Se([]),ye(-1);break}},V=(Te,Ke)=>{console.log("Address suggestion clicked:",Te,"for address index:",Ke),console.log("Available address suggestions:",Ce);const Pe=Ce.findIndex(qe=>qe.summaryline===Te.summaryline&&qe.locationsummary===Te.locationsummary);if(console.log("Found address suggestion index:",Pe),Pe>=0)console.log("Calling retrieveAddressFromSuggestion with index:",Pe),O(Pe,Ke);else{console.log("Address suggestion not found in list");const qe=Ce.findIndex(ft=>ft.id===Te.id);qe>=0?(console.log("Found by ID fallback, index:",qe),O(qe,Ke)):console.log("Address suggestion not found by any method")}},ee=async(Te,Ke)=>{if(console.log("Searching eircode:",Te,"for address index:",Ke),!Te||Te.length<3){console.log("Eircode too short, clearing suggestions"),I([]),oe(!1),he(-1);return}Ee(!0),re({addressIndex:Ke,value:Te}),I([]),oe(!1),he(-1);const Pe=Te.toUpperCase().replace(/\s/g,"");if(k[Pe]){console.log("Found in local database:",Pe);const qe=k[Pe],ft={id:"0",summaryline:qe.summaryline,locationsummary:qe.locationsummary,addressline1:qe.addressline1,addressline2:qe.addressline2,addressline3:qe.addressline3,addressline4:qe.addressline4};I([ft]),oe(!0),he(-1),Ee(!1);return}try{const qe=`${S}/${g}/address/IE/${encodeURIComponent(Te)}`;console.log("Making API request to:",qe);const ft=await fetch(qe);if(console.log("API response status:",ft.status),!ft.ok)throw new Error(`HTTP error! status: ${ft.status}`);const ot=await ft.json();if(console.log("API response data:",ot),Array.isArray(ot)&&ot.length>0){console.log("Setting suggestions:",ot.length,"items");const pt=ot.map((ke,st)=>({id:st.toString(),summaryline:ke.summaryline||`${ke.addressline1||""} ${ke.addressline2||""}`.trim(),locationsummary:ke.posttown||"",addressline1:ke.addressline1||"",addressline2:ke.addressline2||"",addressline3:ke.addressline3||"",addressline4:ke.addressline4||""}));I(pt),oe(!0),he(-1)}else console.log("No suggestions found"),I([]),oe(!1)}catch(qe){console.error("Error fetching eircode suggestions:",qe),console.log("API failed, suggesting manual entry");const ft=[{id:"0",summaryline:`Eircode ${Te} - API temporarily unavailable`,locationsummary:"Please enter address manually",addressline1:"",addressline2:"",addressline3:"",addressline4:"",isFallback:!0}];I(ft),oe(!0),he(-1)}finally{Ee(!1)}},X=async(Te,Ke)=>{if(console.log("Retrieving address for suggestion:",Te,"address index:",Ke),!Ae.value||!T[Te]){console.log("No current input or suggestion not found");return}try{const Pe=T[Te];if(console.log("Selected suggestion:",Pe),Pe.isFallback){console.log("Fallback message clicked - not populating address"),oe(!1),I([]),he(-1);return}const qe=[];if(Pe.addressline1&&qe.push(Pe.addressline1),Pe.addressline2&&qe.push(Pe.addressline2),Pe.addressline3&&qe.push(Pe.addressline3),Pe.addressline4&&qe.push(Pe.addressline4),qe.length>0){const ft=qe.join(", ");console.log("Full address from suggestion:",ft),h(ot=>{const pt=ot.map((ke,st)=>st===Ke?{...ke,address:ft,eircode:Ae.value.toUpperCase()}:ke);return console.log("Updated addresses:",pt),pt})}else Pe.summaryline?(console.log("Using summaryline as address:",Pe.summaryline),h(ft=>{const ot=ft.map((pt,ke)=>ke===Ke?{...pt,address:Pe.summaryline,eircode:Ae.value.toUpperCase()}:pt);return console.log("Updated addresses with summaryline:",ot),ot})):console.log("No address data available in suggestion");console.log("Address updated successfully")}catch(Pe){console.error("Error retrieving address:",Pe)}finally{oe(!1),I([]),he(-1)}},M=(Te,Ke)=>{if(console.log("Eircode input changed:",Ke,"for index:",Te),rt(Te,"eircode",Ke),le&&clearTimeout(le),!Ke||Ke.length<3){I([]),oe(!1),he(-1);return}const Pe=setTimeout(()=>{console.log("Executing debounced search for:",Ke),ee(Ke,Te)},300);J(Pe)},Q=(Te,Ke)=>{if(se)switch(Te.key){case"ArrowDown":Te.preventDefault(),he(Pe=>Pe<T.length-1?Pe+1:0);break;case"ArrowUp":Te.preventDefault(),he(Pe=>Pe>0?Pe-1:T.length-1);break;case"Enter":Te.preventDefault(),_e>=0&&T[_e]&&X(_e,Ke);break;case"Escape":oe(!1),I([]),he(-1);break}},ue=(Te,Ke)=>{console.log("Suggestion clicked:",Te,"for address index:",Ke),console.log("Available suggestions:",T);const Pe=T.findIndex(qe=>qe.summaryline===Te.summaryline&&qe.locationsummary===Te.locationsummary);if(console.log("Found suggestion index:",Pe),Pe>=0)console.log("Calling retrieveAddress with index:",Pe),X(Pe,Ke);else{console.log("Suggestion not found in list");const qe=T.findIndex(ft=>ft.id===Te.id);qe>=0?(console.log("Found by ID fallback, index:",qe),X(qe,Ke)):console.log("Suggestion not found by any method")}},ne=Te=>{Te.target.closest(".eircode-input-container")||(oe(!1),I([]),he(-1)),Te.target.closest(".address-input-container")||(Y(!1),Se([]),ye(-1))};v.useEffect(()=>{if(se||He)return document.addEventListener("click",ne),()=>document.removeEventListener("click",ne)},[se,He]);const fe=Te=>{if(q(Te),Te.startsWith("address_")){const[Ke,Pe,qe]=Te.split("_"),ft=parseInt(Pe),ot=m[ft];ot&&qe&&F(ot[qe]||"")}else F(c[Te]||"");B(!0)},ce=Te=>{setTimeout(()=>{B(!1),q("")},300)},Me=(Te,Ke)=>{fe(Ke)},Re=(Te,Ke)=>{(!L||z!==Ke)&&fe(Ke)},ze=Te=>{const{name:Ke,value:Pe,type:qe,checked:ft}=Te.target;d(ot=>({...ot,[Ke]:qe==="checkbox"?ft:Pe})),z===Ke&&F(Pe),_[Ke]&&D(ot=>({...ot,[Ke]:""}))},rt=(Te,Ke,Pe)=>{h(qe=>qe.map((ft,ot)=>ot===Te?{...ft,[Ke]:Pe}:ft)),z===`address_${Te}_${Ke}`&&F(Pe)},Ve=()=>{h(Ke=>[...Ke,{address:"",eircode:""}]);const Te=m.length;p([Te]),N(Te)},Je=Te=>{m.length>1&&(h(Ke=>Ke.filter((Pe,qe)=>qe!==Te)),p(Ke=>{const Pe=Ke.filter(qe=>qe!==Te);if(Pe.length===0){const qe=Math.min(w,m.length-2);return N(qe),[qe]}return Pe}))},We=Te=>{console.log("Address selection changed for index:",Te),p(Ke=>{if(Ke.includes(Te)){const Pe=Ke.filter(qe=>qe!==Te);return console.log("Removed index",Te,"from selection"),console.log("New selection:",Pe),Pe}else{const Pe=[Te];return console.log("Selected only index",Te,"for single selection"),console.log("New selection:",Pe),N(Te),Pe}})},it=async Te=>{if(Te)try{const Ke=await window.myAPI?.deleteAddress(Te);Ke&&Ke.success?(h(Pe=>Pe.filter(qe=>qe.id!==Te)),p(Pe=>{const qe=m.findIndex(ot=>ot.id===Te),ft=Pe.filter(ot=>ot!==qe);if(ft.length===0){const ot=Math.min(w,m.length-2);return N(ot),[ot]}return ft})):alert("Error deleting address")}catch(Ke){console.error("Error deleting address:",Ke),alert("Error deleting address")}},Qe=()=>{const Te={};return c.name.trim()||(Te.name="Full name is required"),(o==="Collection"||o==="Delivery")&&!c.phone.trim()&&(Te.phone="Phone number is required for "+o+" orders"),c.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)&&(Te.email="Please enter a valid email address"),D(Te),Object.keys(Te).length===0},At=async Te=>{if(Te.preventDefault(),!!Qe()){console.log("Form submission - addresses:",m),console.log("Form submission - selectedAddresses:",x),console.log("Form submission - editingCustomer:",n);try{if(n){const Ke={name:c.name.trim(),phone:c.phone.trim()||null,email:c.email.trim()||null,isloyal:c.isloyal?1:0,addedBy:1,hotel_id:1},Pe=await window.myAPI?.updateCustomer(n.id,Ke);if(Pe.success){const qe=m.filter((ot,pt)=>ot.id&&x.includes(pt)).map(ot=>({id:ot.id,address:ot.address.trim(),code:ot.eircode.trim()||null}));console.log("Addresses to update:",qe);for(const ot of qe){const pt=await window.myAPI?.updateAddress(ot.id,{address:ot.address,code:ot.code});console.log("Update result for address",ot.id,":",pt)}const ft=m.filter((ot,pt)=>ot.address.trim()&&!ot.id&&x.includes(pt)).map(ot=>({address:ot.address.trim(),code:ot.eircode.trim()||null,addedby:1}));console.log("New addresses to create:",ft);for(const ot of ft){const pt=await window.myAPI?.createAddress({customer_id:n.id,...ot});console.log("Create result for new address:",pt)}r&&r({id:n.id,...Ke,isloyal:c.isloyal,selectedAddressIndex:w}),t()}else alert("Error updating customer: "+Pe.message)}else{const Ke=m.filter((ft,ot)=>ft.address.trim()&&x.includes(ot)).map(ft=>({address:ft.address.trim(),code:ft.eircode.trim()||null,addedby:1})),Pe={name:c.name.trim(),phone:c.phone.trim()||null,email:c.email.trim()||null,address:null,isloyal:c.isloyal?1:0,addedBy:1,hotel_id:1},qe=await window.myAPI?.createCustomerWithAddresses({customer:Pe,addresses:Ke});qe.success?(r&&r({id:qe.customerId,name:Pe.name,phone:Pe.phone,email:Pe.email,isloyal:c.isloyal,addresses:Ke,selectedAddressIndex:w}),t()):alert("Error creating customer: "+qe.message)}}catch(Ke){console.error("Error saving customer:",Ke),alert("Error saving customer")}}},xt=()=>{d({name:"",phone:"",email:"",eircode:"",address:"",isloyal:!1}),D({}),t()};return s?e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:n?"Edit Customer":"Add New Customer"}),e.jsx("button",{onClick:t,className:"text-white hover:text-primary p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[80vh]",children:e.jsxs("form",{onSubmit:At,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:c.name,onChange:ze,onFocus:Te=>Me(Te,"name"),onClick:Te=>Re(Te,"name"),onBlur:ce,className:`w-full px-3 py-2.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${_.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter full name"}),_.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone ",(o==="Collection"||o==="Delivery")&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"phone",value:c.phone,onChange:ze,onFocus:Te=>Me(Te,"phone"),onClick:Te=>Re(Te,"phone"),onBlur:ce,className:`w-full px-3 py-2.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${_.phone?"border-red-500":"border-gray-300"}`,placeholder:"Enter phone number"}),_.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:c.email,onChange:ze,onFocus:Te=>Me(Te,"email"),onClick:Te=>Re(Te,"email"),onBlur:ce,className:`w-full px-3 py-2.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${_.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),_.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.email})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Addresses"}),e.jsx("button",{type:"button",onClick:Ve,className:"text-sm text-primary hover:text-primary/80 font-medium",children:"+ Add More Address"})]}),n&&m.length>=2&&e.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-700",children:"💡 Select the addresses you want to include. Unselected addresses will remain but won't be updated."})}),m.map((Te,Ke)=>e.jsxs("div",{className:`mb-4 p-3 border rounded-lg transition-colors ${n?x.includes(Ke)?"border-primary bg-primary/5":"border-gray-200 bg-gray-50 opacity-60":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[n&&e.jsx("input",{type:"checkbox",checked:x.includes(Ke),onChange:()=>We(Ke),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary focus:ring-2"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Address ",Ke+1," ",Te.id&&"(Existing)",!1]})]}),e.jsxs("div",{className:"flex gap-2",children:[Te.id&&e.jsx("button",{type:"button",onClick:()=>it(Te.id),className:"text-red-500 hover:text-red-700 text-sm",children:"Delete"}),m.length>1&&e.jsx("button",{type:"button",onClick:()=>Je(Ke),className:"text-gray-500 hover:text-gray-700 text-sm",children:"Remove"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative eircode-input-container",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Eircode"}),e.jsx("input",{type:"text",value:Te.eircode,onChange:Pe=>M(Ke,Pe.target.value),onKeyDown:Pe=>Q(Pe,Ke),onFocus:Pe=>Me(Pe,`address_${Ke}_eircode`),onClick:Pe=>Re(Pe,`address_${Ke}_eircode`),onBlur:ce,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Enter Eircode (e.g., D01F5P2)"}),se&&Ae.addressIndex===Ke&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:ie?e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"Loading..."}):T.length>0?T.map((Pe,qe)=>e.jsxs("div",{className:`px-3 py-2 text-sm cursor-pointer hover:bg-gray-100 ${qe===_e?"bg-primary text-white":""}`,onClick:()=>ue(Pe,Ke),children:[e.jsx("div",{className:"font-medium",children:Pe.summaryline}),Pe.locationsummary&&e.jsx("div",{className:"text-xs text-gray-500",children:Pe.locationsummary})]},Pe.id)):e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No addresses found"})}),!1]}),e.jsxs("div",{className:"relative address-input-container",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:Te.address,onChange:Pe=>U(Ke,Pe.target.value),onKeyDown:Pe=>H(Pe,Ke),onFocus:Pe=>Me(Pe,`address_${Ke}_address`),onClick:Pe=>Re(Pe,`address_${Ke}_address`),onBlur:ce,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Start typing address..."}),He&&ge.addressIndex===Ke&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:ae?e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"Loading..."}):Ce.length>0?Ce.map((Pe,qe)=>e.jsxs("div",{className:`px-3 py-2 text-sm cursor-pointer hover:bg-gray-100 ${qe===be?"bg-primary text-white":""}`,onClick:()=>V(Pe,Ke),children:[e.jsx("div",{className:"font-medium",children:Pe.summaryline}),Pe.locationsummary&&e.jsx("div",{className:"text-xs text-gray-500",children:Pe.locationsummary})]},Pe.id)):e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No addresses found"})}),!1]})]})]},Ke))]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Favourite Customer"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isloyal",checked:c.isloyal,onChange:ze,className:"sr-only",id:"loyal-toggle"}),e.jsx("label",{htmlFor:"loyal-toggle",className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${c.isloyal?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${c.isloyal?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:xt,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:n?"Update Customer":"Save"})]})]})})]})})}):null},RC=({isOpen:s,onClose:t,onCustomerSelect:r,onEditCustomer:n,onNewCustomer:o,orderType:c})=>{const[d,m]=v.useState(""),[h,x]=v.useState(""),[p,w]=v.useState(""),[N,_]=v.useState([]),[D,L]=v.useState([]),[B,z]=v.useState(null),[q,R]=v.useState(!1),[F,T]=v.useState(!1),[I,se]=v.useState({isVisible:!1,message:"",type:"error"}),[oe,_e]=v.useState(!1),[he,ie]=v.useState(""),[Ee,Ae]=v.useState(""),re=async()=>{R(!0);try{const g=await window.myAPI?.getCustomersByHotelId(1);g&&g.success&&_(g.data||[])}catch(g){console.error("Error fetching customers:",g)}finally{R(!1)}};v.useCallback(async()=>{N.length>0&&await re()},[N.length]);const le=v.useCallback(g=>{console.log("Updating customer in list:",g),_(S=>S.some(C=>C.id===g.id)?S.map(C=>C.id===g.id?g:C):S),L(S=>S.some(C=>C.id===g.id)?S.map(C=>C.id===g.id?g:C):S),B&&B.id===g.id&&z(g)},[B]);v.useEffect(()=>{s&&(_([]),L([]),T(!1),m(""),x(""),w(""),z(null))},[s]),v.useEffect(()=>{const g=S=>{console.log("Customer updated event received:",S.detail);const k=S.detail.customer;k&&le(k)};return window.addEventListener("customerUpdated",g),()=>{window.removeEventListener("customerUpdated",g)}},[le]);const J=async()=>{if(!d.trim()&&!h.trim()){alert("Please enter either a name or phone number to search");return}R(!0),T(!0),_e(!1),ie("");try{let g=[];if(d.trim()){console.log("Searching by name:",d.trim());const k=await window.myAPI?.searchCustomerByName(d.trim());console.log("Name search result:",k),k&&k.success&&k.data&&(g=[...g,...k.data])}if(h.trim()){const k=await window.myAPI?.searchCustomerByPhone(h.trim());k&&k.success&&k.data&&(g=[...g,...k.data])}const S=g.filter((k,C,O)=>C===O.findIndex(U=>U.id===k.id));if(console.log("All customers found:",g.length),console.log("Unique customers:",S.length),S.length>0){const k=await Promise.all(S.map(async C=>{try{const O=await window.myAPI?.getCustomerAddresses(C.id);return O&&O.success?{...C,addresses:O.data||[]}:C}catch(O){return console.error("Error fetching addresses for customer:",C.id,O),C}}));_(k),L(k)}else _([]),L([])}catch(g){console.error("Error searching customers:",g),_([]),L([])}finally{R(!1)}},Ce=g=>{z(g)},Se=v.useCallback((g,S="error")=>{se({isVisible:!0,message:g,type:S})},[]),He=v.useCallback(()=>{se({isVisible:!1,message:"",type:"error"})},[]),Y=()=>{if(B&&r){if((c==="Collection"||c==="Delivery")&&(!B.phone||B.phone.trim().length===0)){Se("Customer must have a phone number for "+c+" orders. Please edit the customer to add a phone number.","error");return}r(B),t()}},be=()=>{m(""),x(""),w(""),_([]),L([]),z(null),T(!1)},ye=g=>{ie(g),g==="searchName"?Ae(d||""):g==="searchPhone"&&Ae(h||""),_e(!0)},ae=g=>{setTimeout(()=>{_e(!1),ie(""),Ae("")},300)},Ne=(g,S)=>{ye(S)},ge=(g,S)=>{(!oe||he!==S)&&ye(S)},A=(g,S)=>{Ae(g),S==="searchName"?m(g):S==="searchPhone"&&x(g)},P=(g,S)=>{const k=g.target.value;S==="searchName"?(m(k),he==="searchName"&&Ae(k)):S==="searchPhone"?(x(k),he==="searchPhone"&&Ae(k)):S==="searchEmail"&&(w(k),he==="searchEmail"&&Ae(k))},f=g=>{if(g==="{enter}")if(he==="searchName"){const S=document.querySelector('[name="searchPhone"]');S&&S.focus()}else he==="searchPhone"&&J()};return s?e.jsxs("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("h2",{className:"text-xl font-bold",children:"Customer List"})]}),e.jsx("button",{onClick:t,className:"text-white hover:text-primary p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Search"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone:"}),e.jsx("input",{type:"text",name:"searchPhone",value:h,onChange:g=>P(g,"searchPhone"),onFocus:g=>Ne(g,"searchPhone"),onBlur:ae,onClick:g=>ge(g,"searchPhone"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name:"}),e.jsx("input",{type:"text",name:"searchName",value:d,onChange:g=>P(g,"searchName"),onFocus:g=>Ne(g,"searchName"),onBlur:ae,onClick:g=>ge(g,"searchName"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Enter customer name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email:"}),e.jsx("input",{type:"text",name:"searchEmail",value:p,onChange:g=>P(g,"searchEmail"),onFocus:g=>Ne(g,"searchEmail"),onBlur:ae,onClick:g=>ge(g,"searchEmail"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Enter email"})]}),e.jsxs("button",{onClick:J,className:"px-4 py-3 bg-[#16A34A] text-white rounded-md hover:bg-[#16A34A]/90 focus:outline-none focus:ring-2 focus:ring-[#16A34A] focus:ring-offset-2 text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(jn,{size:16}),"Search"]})]})]}),e.jsx("div",{className:"pb-6 pl-6 pr-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsxs("button",{onClick:()=>{B&&window&&window.dispatchEvent(new CustomEvent("openCustomerInfo",{detail:{customer:B}}))},disabled:!B,className:`flex-1 px-4 py-2 rounded-md text-sm font-medium flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2 ${B?"bg-[#007BFF] text-white hover:bg-[#007BFF]/90 focus:ring-[#007BFF]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(vn,{size:16}),"View"]}),e.jsxs("button",{onClick:()=>{o&&o()},className:"flex-1 px-4 py-2 bg-[#007BFF] text-white rounded-md hover:bg-[#007BFF]/90 focus:outline-none focus:ring-2 focus:ring-[#007BFF] focus:ring-offset-2 text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Ls,{size:16}),"Create"]}),e.jsxs("button",{onClick:()=>{B&&n&&n(B)},disabled:!B,className:`flex-1 px-4 py-2 rounded-md text-sm font-medium flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2 ${B?"bg-[#007BFF] text-white hover:bg-[#007BFF]/90 focus:ring-[#007BFF]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(ia,{size:16}),"Edit"]}),e.jsxs("button",{onClick:be,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(ug,{size:16}),"Reset"]})]})}),e.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:e.jsx("div",{className:"h-full flex flex-col",children:e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Select"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Count"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Delivery Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Loyal"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"Loading customers..."})}):D.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:F?"No customers found":"Enter name, phone, or email to search customers"})}):D.map(g=>e.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${B?.id===g.id?"bg-blue-50":""}`,onClick:()=>Ce(g),children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"radio",name:"customerSelect",checked:B?.id===g.id,onChange:()=>Ce(g),className:"text-primary focus:ring-primary border-gray-300"})}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:g.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:g.phone||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:g.orderCount||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.jsx("div",{className:"flex flex-col gap-1",children:g.addresses&&g.addresses.length>0?g.addresses.map((S,k)=>e.jsxs("div",{className:"text-xs",children:[S.address,S.code&&` (${S.code})`]},k)):e.jsx("span",{children:"No addresses"})})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:g.isLoyal?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"YES"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"NO"})})]},g.id))})]})})})})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3 bg-white flex-shrink-0",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Cancel"}),e.jsx("button",{onClick:Y,disabled:!B,className:`px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary ${B?"bg-primary hover:bg-primary/90":"bg-gray-300 cursor-not-allowed"}`,children:"Save"})]})]}),e.jsx(Wa,{isVisible:oe,onClose:()=>_e(!1),activeInput:he,onInputChange:A,onInputBlur:ae,inputValue:Ee,onKeyPress:f}),e.jsx(Ni,{message:I.message,isVisible:I.isVisible,onClose:He,type:I.type,duration:3e3})]}):null},IC=({isOpen:s,onClose:t,order:r,onCreateInvoice:n,foodDetails:o=null})=>!s||!r?null:e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Order Details"}),e.jsx("button",{onClick:t,className:"text-gray-600 hover:text-gray-800 p-1 rounded-full hover:bg-gray-100",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Order Type:"}),e.jsx("div",{className:"mt-1 text-gray-900",children:r.orderType})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Order Number:"}),e.jsx("div",{className:"mt-1 text-gray-900",children:r.orderNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Waiter:"}),e.jsx("div",{className:"mt-1 text-gray-900",children:r.waiter})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Customer:"}),e.jsx("div",{className:"mt-1 text-gray-900",children:r.customer?.name||"Walk-in Customer"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Table:"}),e.jsx("div",{className:"mt-1 text-gray-900",children:r.table||"None"})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"text-sm font-medium text-gray-700",children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Item"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Discount"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white",children:r.items&&r.items.length>0?r.items.map((c,d)=>e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c.food?.name||"Unknown Item"}),c.variations&&Object.keys(c.variations).length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Object.entries(c.variations).map(([m,h])=>{const x=o?.variations?.find(N=>N.id===parseInt(m)),p=x?.name||m,w=Array.isArray(h)?h:[h];return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-gray-500",children:["• ",p,":"]}),e.jsx("span",{className:"text-gray-700",children:w.map((N,_)=>{const D=x?.options?.find(L=>L.id===parseInt(N));return e.jsxs("span",{children:[D?.option_name||N,_<w.length-1?", ":""]},N)})})]},m)})}),c.adons&&c.adons.length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:c.adons.map((m,h)=>{const x=o?.adons?.find(N=>N.id===parseInt(m)),p=x?.name||m,w=x?.price;return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"• Addon:"}),e.jsx("span",{className:"text-gray-700",children:p}),w&&e.jsxs("span",{className:"text-gray-500",children:["(+€",w.toFixed(2),")"]})]},h)})})]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:["€",(parseFloat(c.totalPrice)/parseFloat(c.quantity)).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:c.quantity}),e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:"€0.00"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center font-medium text-gray-800",children:["€",parseFloat(c.totalPrice).toFixed(2)]})]},d)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"No items found"})})})]})})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Item:"}),e.jsx("span",{className:"font-semibold",children:r.items?r.items.reduce((c,d)=>c+(parseInt(d.quantity)||0),0):0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Sub Total:"}),e.jsxs("span",{className:"font-semibold",children:["€",(r.total/1.135).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Discount:"}),e.jsxs("span",{className:"font-semibold",children:["€",r.coupon?r.coupon.discount:"0.00"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tax:"}),e.jsxs("span",{className:"font-semibold",children:["€",(r.total*.135/1.135).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Discount:"}),e.jsxs("span",{className:"font-semibold",children:["€",r.coupon?r.coupon.discount:"0.00"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Charge:"}),e.jsx("span",{className:"font-semibold",children:"€0.00"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tips:"}),e.jsx("span",{className:"font-semibold",children:"€0.00"})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Total Payable:"}),e.jsxs("span",{className:"text-xl font-bold text-gray-800",children:["€",r.total.toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[e.jsxs("button",{onClick:n,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Oc,{size:20}),"Create Invoice & Close"]}),e.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Close"})]})]})}),wh=({order:s,isOpen:t,onClose:r,onPrint:n,foodDetails:o=null,isKitchen:c=!1,isEmployee:d=!1,paymentStatus:m="PAID"})=>{const{themeColors:h}=Ur();if(!t||!s)return null;const x=L=>new Date(L).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),p=L=>new Date(L).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}),w=()=>s.items?s.items.reduce((L,B)=>L+parseFloat(B.totalPrice),0):0,N=()=>{const L=w(),B=typeof window<"u"?window.appSettings?.current||{}:{},z=parseFloat(B?.standard_tax||B?.food_tax||13.5);return L*z/100},_=()=>{const L=w(),B=N(),z=typeof window<"u"?window.appSettings?.current||{}:{},q=parseFloat(z?.delivery_fee_per_km||2),R=s.orderType==="Delivery"?.75:0,F=.22,T=s.orderType==="Delivery"?q:0;return L+B+T+R+F},D=()=>{n?n():window.print()};return e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:c?"Kitchen Order":d?"Employee Copy":"Print Invoice"}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100",children:"✕"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 print:p-0 print:border-0 invoice-print-content",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("div",{className:"w-16 h-16 mx-auto rounded-lg border-2 flex flex-col items-center justify-center mb-2 shadow-md",style:{backgroundColor:h.primary,borderColor:h.primaryLight},children:[e.jsx("span",{className:"text-white font-bold text-2xl",children:"G"}),e.jsx("span",{className:"text-white font-medium text-xs",children:"POS"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-lg font-bold text-gray-800",children:"Saffron Indian Cuisine Cashel"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tel: 06262080"})]})]}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase",children:s.orderType}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",x(s.placedAt||s.createdAt),", ASAP (",p(s.placedAt||s.createdAt),")"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-800",children:["# ",s.orderNumber]})]}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsx("div",{className:"mb-4",children:s.items&&s.items.length>0?s.items.map((L,B)=>e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:[L.quantity," x ",L.food?.name||"Unknown Item"]})}),L.variations&&Object.keys(L.variations).length>0&&e.jsx("div",{className:"text-xs text-gray-600 ml-4 mt-1",children:Object.entries(L.variations).map(([z,q])=>{const R=o?.variations?.find(I=>I.id===parseInt(z)),F=R?.name||z,T=Array.isArray(q)?q:[q];return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{children:["• ",F,":"]}),e.jsx("span",{children:T.map((I,se)=>{const oe=R?.options?.find(_e=>_e.id===parseInt(I));return e.jsxs("span",{children:[oe?.option_name||I,se<T.length-1?", ":""]},I)})})]},z)})}),L.adons&&L.adons.length>0&&e.jsx("div",{className:"text-xs text-gray-600 ml-4 mt-1",children:L.adons.map((z,q)=>{const R=o?.adons?.find(I=>I.id===parseInt(z)),F=R?.name||z,T=R?.price;return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{children:["• Addon: ",F]}),T&&e.jsxs("span",{children:["(+€",T.toFixed(2),")"]})]},q)})})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-800 ml-4",children:["€",parseFloat(L.totalPrice).toFixed(2)]})]},B)):e.jsx("p",{className:"text-center text-gray-500",children:"No items found"})}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsxs("span",{className:"font-medium",children:["€",w().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bag Fee:"}),e.jsx("span",{className:"font-medium",children:"€0.22"})]}),s.orderType==="Delivery"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Service Fee:"}),e.jsx("span",{className:"font-medium",children:"€0.75"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Delivery Charge:"}),e.jsx("span",{className:"font-medium",children:"€2.00"})]})]}),e.jsx("div",{className:"border-t border-gray-300 pt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold text-gray-800",children:"TOTAL (Incl. VAT):"}),e.jsxs("span",{className:"font-bold text-gray-800",children:["€",_().toFixed(2)]})]})})]}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsx("div",{className:"text-center mb-4",children:e.jsxs("div",{className:`text-lg font-bold ${m==="PAID"?"text-green-600":"text-red-600"}`,children:["***** ",m," *****"]})}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-2",children:"Customer Info:"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",s.customer?.name||"Walk-in Customer"]}),(s.orderType==="Delivery"||s.customer?.phone)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Phone:"}),s.customer?.phone||"N/A"]}),s.customer?.email&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",s.customer.email]}),s.orderType==="Delivery"&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Delivery Address:"}),(()=>{if(s.customer?.addresses&&s.customer.addresses.length>0){const L=s.customer.addresses[0];return typeof L=="string"?L:L.address?L.address:"Address format error"}else return s.customer?.address?s.customer.address:"No address available"})()]}),s.orderType!=="Delivery"&&s.table&&s.table!=="None"&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Table:"})," ",s.table]})]})]}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),s.notes&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-2",children:"Notes:"}),e.jsx("p",{className:"text-sm text-gray-700",children:s.notes})]}),e.jsx("div",{className:"border-t border-gray-300 my-4"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 mb-1",children:"Thank You For Ordering!"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Powered By G Tech Nexa Limited"})]}),e.jsx("div",{className:"border-t border-gray-300 my-4"})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:D,className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors font-medium",children:c?"Print Kitchen Order":d?"Print Employee Copy":"Print Invoice"}),e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Close"})]})]})})},eu=({label:s,value:t})=>e.jsxs("div",{className:"flex items-center justify-between py-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsx("span",{className:"text-gray-900 font-medium",children:t??"—"})]}),_x=({children:s})=>e.jsx("div",{className:"border-b border-gray-200 pb-2 mb-3",children:e.jsx("span",{className:"text-[13px] font-semibold text-gray-700",children:s})}),zC=({ok:s})=>e.jsx("span",{className:`inline-flex items-center justify-center h-7 px-3 rounded-full text-xs font-semibold ${s?"bg-green-100 text-green-800":"bg-red-100 text-red-700"}`,children:s?"YES":"NO"}),PC=({isOpen:s,onClose:t,customer:r,onEditCustomer:n,onChangeCustomer:o})=>{if(!s)return null;const c=r?.name??"N/A",d=r?.phone??"N/A",m=r?.email??"N/A",h=r?.orderCount??0,x=!!r?.isLoyal,p=r?.lastOrderDate??"—",w=(r?.addresses??[]).slice(0,3);return e.jsx("div",{className:"fixed inset-0 bg-black/40 z-[70] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl",children:[e.jsxs("div",{className:"bg-primary text-white px-4 py-3 rounded-t-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2.5 h-2.5 bg-green-500 rounded-full"}),e.jsx("h3",{className:"font-semibold",children:"Customer Information"})]}),e.jsx("button",{onClick:t,className:"text-white/80 hover:text-white",children:"✕"})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx(_x,{children:"Personal Information"}),e.jsx(eu,{label:"Name:",value:c}),e.jsx(eu,{label:"Phone:",value:d}),e.jsx(eu,{label:"Email:",value:m})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx(_x,{children:"Order Information"}),e.jsx(eu,{label:"Total Orders:",value:h}),e.jsxs("div",{className:"flex items-center justify-between py-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Loyalty Status:"}),e.jsx(zC,{ok:x})]}),e.jsx(eu,{label:"Last Order:",value:p})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx(_x,{children:"Address Information"}),[0,1,2].map(N=>e.jsxs("div",{className:"flex items-center justify-between py-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:`Delivery Address ${N+1}:`}),e.jsx("span",{className:"text-gray-900 font-medium text-right",children:w[N]?.address??"—"})]},N))]})]}),e.jsxs("div",{className:"px-5 pb-5 pt-2 grid grid-cols-4 gap-3",children:[e.jsx("button",{onClick:t,className:"col-span-1 h-11 rounded-md bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Back"}),e.jsx("button",{onClick:o,className:"col-span-1 h-11 rounded-md bg-gray-600 text-white hover:bg-gray-700",children:"Change Customer"}),e.jsx("button",{onClick:()=>n?.(r),className:"col-span-1 h-11 rounded-md bg-primary text-white hover:bg-black/90",children:"Edit Customer"}),e.jsx("button",{onClick:t,className:"col-span-1 h-11 rounded-md bg-primary/90 text-white",children:"OK"})]})]})})},FC=({isOpen:s,onClose:t,onEditDraft:r,currentDraftOrders:n=[],onDeleteDraft:o,onDeleteAllDrafts:c})=>{const[d,m]=v.useState(""),[h,x]=v.useState(null),[p,w]=v.useState(!1),[N,_]=v.useState(!1);v.useEffect(()=>{console.log("Drafts modal isOpen:",s),console.log("Current draft orders:",n)},[s,n]);const D=n.filter(T=>{if(!d.trim())return!0;if(!T)return!1;const I=d.toLowerCase();return(T.draftName||T.customer&&T.customer.name||"Unknown").toLowerCase().includes(I)||(T.customer&&T.customer.phone||"N/A").toLowerCase().includes(I)||(T.orderNumber||T.id||"Unknown").toString().toLowerCase().includes(I)}),L=T=>{x(T)},B=()=>{if(h&&r){const T={id:h.id,items:h.items,customer:h.customer,table:h.table,orderType:h.orderType,waiter:h.waiter,subTotal:h.subTotal,discount:h.discount,tax:h.tax,charge:h.charge,tips:h.tips,totalPayable:h.totalPayable};r(T),t()}},z=()=>{h&&w(!0)},q=()=>{_(!0)},R=()=>{h&&o&&(o(h.databaseId),x(null)),w(!1)},F=()=>{c&&(c(),x(null)),_(!1)};return s?e.jsxs("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-11/12 max-w-6xl h-5/6 flex",children:[e.jsxs("div",{className:"w-1/2 border-r border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Draft Sale"})}),e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search Customer Name",value:d,onChange:T=>m(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"px-4 py-2",children:e.jsx("div",{className:"bg-gray-50 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Customer (Phone)"})]})}),e.jsx("tbody",{children:D.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"p-4 text-center text-gray-500",children:"No draft orders found"})}):D.map(T=>T?e.jsxs("tr",{onClick:()=>L(T),className:`cursor-pointer hover:bg-gray-50 transition-colors ${h?.id===T.id?"bg-blue-50 border-l-4 border-blue-500":""}`,children:[e.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:T.orderNumber||T.id||"Unknown"}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:T.draftName||T.customer&&T.customer.name||"Unknown"})]},T.id||Math.random()):null)})]})})})}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsx("button",{onClick:q,className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Delete all Draft Sales"})})]}),e.jsxs("div",{className:"w-1/2 flex flex-col overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Order Details"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(St,{className:"w-6 h-6"})})]}),h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-6 py-2 border-b border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Draft ID:"}),e.jsx("span",{className:"text-sm text-gray-900",children:h.orderNumber||h.id||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Draft Name:"}),e.jsx("span",{className:"text-sm text-gray-900",children:h.draftName||h.customer&&h.customer.name||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Customer:"}),e.jsx("span",{className:"text-sm text-gray-900",children:h.customer&&h.customer.name||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Phone:"}),e.jsx("span",{className:"text-sm text-gray-900",children:h.customer&&h.customer.phone||"N/A"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-gray-50 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Item"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"Qty Disc"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"Total"})]})}),e.jsx("tbody",{children:h.items.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-4 py-8 text-center text-gray-500",children:"No items in this draft order"})}):h.items.map((T,I)=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:T.name||T.food?.name||"Unknown Item"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:["€",((T.totalPrice||0)/(T.quantity||1)).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:T.qty||T.quantity||0}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:["€",(T.totalPrice||0).toFixed(2)]})]},I))})]})})})}),e.jsx("div",{className:"px-6 py-2 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Total Item:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:h.totalItems||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Sub Total:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["€",(h.subTotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Total Discount:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["€",(h.totalDiscount||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Tax:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["€",(h.tax||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Charge:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["€",(h.charge||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Tips:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["€",(h.tips||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between bg-gray-100 p-3 rounded-lg mt-2",children:[e.jsx("span",{className:"text-lg font-bold text-gray-800",children:"Total Payable:"}),e.jsxs("span",{className:"text-lg font-bold text-gray-800",children:["€",(h.totalPayable||0).toFixed(2)]})]})]})}),e.jsx("div",{className:"px-6 py-2 border-t border-gray-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:B,className:"flex-1 bg-primary text-white py-2 px-4 rounded-lg transition-colors font-medium flex items-center justify-center gap-2",children:[e.jsx(ia,{className:"w-4 h-4"}),"Edit In Cart"]}),e.jsxs("button",{onClick:z,className:"flex-1 bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors font-medium flex items-center justify-center gap-2",children:[e.jsx(za,{className:"w-4 h-4"}),"Delete"]}),e.jsx("button",{onClick:t,className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Cancel"})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(Lc,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"Select a draft order to view details"}),e.jsx("p",{className:"text-sm",children:"Choose an order from the list on the left"})]})})]})]}),p&&h&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-500 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Draft Order"}),e.jsx("button",{onClick:()=>w(!1),className:"text-white hover:text-red-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete this draft order? This action cannot be undone."}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Draft: ",e.jsx("strong",{children:h.orderNumber})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Customer: ",e.jsx("strong",{children:h.draftName||h.customer&&h.customer.name||"Unknown"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:R,className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-500 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete All Draft Orders"}),e.jsx("button",{onClick:()=>_(!1),className:"text-white hover:text-red-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete all draft orders? This action cannot be undone."}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["This will delete ",e.jsx("strong",{children:n.length})," draft order",n.length!==1?"s":"","."]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:F,className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete All"})]})]})})]}):null},LC=({isOpen:s,onClose:t,onSubmit:r})=>{const[n,o]=v.useState(""),c=()=>{n.trim()&&(r(n.trim()),o(""),t())},d=()=>{o(""),t()};return s?e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-96 max-w-md",children:[e.jsx("div",{className:"p-6 bg-primary rounded-t-lg text-white border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold",children:"Draft"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),e.jsx("input",{type:"text",value:n,onChange:m=>o(m.target.value),placeholder:"Enter customer name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none",autoFocus:!0})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:c,disabled:!n.trim(),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${n.trim()?"bg-primary text-white":"bg-primary text-white cursor-not-allowed"}`,children:"Submit"}),e.jsx("button",{onClick:d,className:"flex-1 py-2 px-4 bg-gray-200 text-gray-800 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})}):null},BC=({isOpen:s,onClose:t,hotelInfo:r,selectedScheduleDate:n,selectedScheduleTime:o,availableTimeSlots:c,useCustomTime:d,customTime:m,onDateChange:h,onTimeSelect:x,onCustomTimeChange:p,onUseCustomTimeChange:w,onConfirm:N,onCancel:_})=>s?e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Schedule Order"}),e.jsx("button",{onClick:_,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),r&&e.jsx("div",{className:"p-4 bg-gray-50 border-b",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Open: ",r.opening_time," - Close: ",r.closeing_time]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Date"}),e.jsx("input",{type:"date",value:n,onChange:D=>h(D.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Time"}),!d&&e.jsx(e.Fragment,{children:c.length>0?e.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-60 overflow-y-auto",children:c.map(D=>e.jsx("button",{onClick:()=>x(D),className:`p-3 text-sm rounded-lg border transition-all cursor-pointer ${o===D?"bg-primary text-white border-primary":"bg-white text-gray-700 border-gray-300 hover:border-primary hover:bg-gray-50"}`,children:D},D))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx($s,{size:24,className:"mx-auto mb-2"}),e.jsx("p",{children:"No available time slots for selected date"})]})})]}),(o||d&&m)&&e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Order scheduled for:"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-800",children:[n," at ",d?m:o]})]})})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:_,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors cursor-pointer",children:"Cancel"}),e.jsx("button",{onClick:N,disabled:!o&&!(d&&m),className:`flex-1 px-4 py-2 rounded-lg transition-colors cursor-pointer ${o||d&&m?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Confirm Schedule"})]})]})}):null,Rv=v.createContext(),Eg=()=>{const s=v.useContext(Rv);if(!s)throw new Error("useRiders must be used within a RiderProvider");return s},UC=({children:s})=>{const[t,r]=v.useState([{id:1,name:"John Smith",status:"Available",vehicle:"Car - ABC123",vehicleType:"car",mobile:"+353 87 123 4567",address:"123 Main St, Dublin",fullName:"John Smith"},{id:2,name:"Mike Johnson",status:"Available",vehicle:"Motorcycle - XYZ789",vehicleType:"motorcycle",mobile:"+353 87 234 5678",address:"456 Oak Ave, Cork",fullName:"Mike Johnson"},{id:3,name:"Sarah Wilson",status:"On Delivery",vehicle:"Car - DEF456",vehicleType:"car",mobile:"+353 87 345 6789",address:"789 Pine Rd, Galway",fullName:"Sarah Wilson"},{id:4,name:"David Brown",status:"Available",vehicle:"Motorcycle - GHI789",vehicleType:"motorcycle",mobile:"+353 87 456 7890",address:"321 Elm St, Limerick",fullName:"David Brown"},{id:5,name:"Lisa Davis",status:"Available",vehicle:"Car - JKL012",vehicleType:"car",mobile:"+353 87 567 8901",address:"654 Maple Dr, Waterford",fullName:"Lisa Davis"}]),[n,o]=v.useState(null),h={riders:t,selectedRider:n,setSelectedRider:o,addRider:x=>{const p={id:Date.now(),name:x.fullName,fullName:x.fullName,status:x.status==="active"?"Available":"Inactive",vehicle:x.vehicleType==="car"?`Car - ${x.regNo||"N/A"}`:x.vehicleType==="bike"?`Bike - ${x.regNo||"N/A"}`:`E-bike - ${x.regNo||"N/A"}`,vehicleType:x.vehicleType,mobile:x.mobile,address:x.address,licenceExpiry:x.licenceExpiry,insuranceExpiry:x.insuranceExpiry,blockOnExpiry:x.blockOnExpiry,payPreset:x.payPreset,perDrop:x.perDrop,perKm:x.perKm,basePerShift:x.basePerShift,hourlyRate:x.hourlyRate,deliveryFeeKeptBy:x.deliveryFeeKeptBy,riderShare:x.riderShare,cashTipsKeptByRider:x.cashTipsKeptByRider,cardTipsPayout:x.cardTipsPayout,payoutMethod:x.payoutMethod,ibanBic:x.ibanBic};return r(w=>[...w,p]),p},updateRiderStatus:(x,p)=>{r(w=>w.map(N=>N.id===x?{...N,status:p}:N))},getAvailableRiders:()=>t.filter(x=>x.status==="Available")};return e.jsx(Rv.Provider,{value:h,children:s})},Tg=({isOpen:s,onClose:t,onBack:r,order:n,onAssignRider:o,onStatusUpdate:c})=>{const{riders:d,getAvailableRiders:m,setSelectedRider:h}=Eg(),[x,p]=v.useState(null),[w,N]=v.useState(""),[_,D]=v.useState([]),[L,B]=v.useState(!1),[z,q]=v.useState(!1),R=async()=>{try{B(!0);const I=m();console.log("Fetched available riders:",I),D(I)}catch(I){console.error("Error fetching riders:",I),D([])}finally{B(!1)}},F=I=>{p(I)},T=async()=>{if(!x)return!1;try{return q(!0),h(x),await o(x)?(p(null),N(""),!0):!1}catch(I){return console.error("Error assigning rider:",I),!1}finally{q(!1)}};return v.useEffect(()=>{s?(p(null),N(""),q(!1),R()):(p(null),N(""),q(!1),D([]))},[s,d]),s?e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(zc,{size:20})}),e.jsx("h2",{className:"text-xl font-bold",children:"Assign Rider"})]}),e.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-4 bg-gray-50 border-b",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:["#",n?.orderNumber]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Delivery Order"})]})}),e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search riders...",value:w,onChange:I=>N(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",autoFocus:!0},`search-${s}`)]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:L?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading riders..."})}):_.length>0?e.jsx("div",{className:"space-y-3",children:_.filter(I=>I.name.toLowerCase().includes(w.toLowerCase())||I.vehicle.toLowerCase().includes(w.toLowerCase())).map(I=>e.jsx("div",{onClick:()=>F(I),className:`p-4 border rounded-lg cursor-pointer transition-all ${x?.id===I.id?"border-primary bg-primary/5":"border-gray-200 hover:border-primary/50 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:I.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[I.vehicleType==="car"?e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-sm text-gray-600",children:I.vehicle})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${I.status==="Available"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:I.status}),x?.id===I.id&&e.jsx(xa,{size:16,className:"text-primary"})]})]})},`rider-${I.id}-${s}`))}):e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"No riders available"})})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors cursor-pointer",children:"Cancel"}),e.jsx("button",{onClick:T,disabled:!x||z,className:`flex-1 px-4 py-2 rounded-lg transition-colors cursor-pointer ${!x||z?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-primary/90"}`,children:z?"Assigning...":"Assign Rider"})]})]})}):null},Iv=({isOpen:s,onClose:t,order:r,onStatusUpdate:n,onRiderAssignment:o,selectedStatus:c,onStatusChange:d,isUpdating:m=!1})=>{const[h,x]=v.useState(!1);Sr.useEffect(()=>{s&&x(!1)},[s]);const p=()=>{x(!1),t()};if(!s||!r)return null;const w=D=>{switch(D){case"In Store":return[{key:"New",label:"New",icon:e.jsx($s,{size:20}),disabled:!1},{key:"In Progress",label:"In Progress",icon:e.jsx($s,{size:20}),disabled:!1},{key:"Ready",label:"Ready",icon:e.jsx(xa,{size:20}),disabled:!1},{key:"Completed",label:"Completed",icon:e.jsx(iu,{size:20}),disabled:!1}];case"Table":case"Dine In":case"Collection":return[{key:"New",label:"New",icon:e.jsx($s,{size:20}),disabled:!1},{key:"In Progress",label:"In Progress",icon:e.jsx($s,{size:20}),disabled:!1},{key:"Ready",label:"Ready",icon:e.jsx(xa,{size:20}),disabled:!1},{key:"Completed",label:"Completed",icon:e.jsx(iu,{size:20}),disabled:!1}];case"Delivery":return[{key:"New",label:"New",icon:e.jsx($s,{size:20}),disabled:!1},{key:"In Progress",label:"In Progress",icon:e.jsx($s,{size:20}),disabled:!1},{key:"Ready",label:"Ready",icon:e.jsx(xa,{size:20}),disabled:!1},{key:"On the way",label:"On the way",icon:e.jsx(So,{size:20}),disabled:!1},{key:"Delivered",label:"Delivered",icon:e.jsx(xa,{size:20}),disabled:!1},{key:"Completed",label:"Completed",icon:e.jsx(iu,{size:20}),disabled:!1}];default:return[{key:"New",label:"New",icon:e.jsx($s,{size:20}),disabled:!1},{key:"In Progress",label:"In Progress",icon:e.jsx($s,{size:20}),disabled:!1},{key:"Ready",label:"Ready",icon:e.jsx(xa,{size:20}),disabled:!1},{key:"Completed",label:"Completed",icon:e.jsx(iu,{size:20}),disabled:!1}]}},N=D=>{D.disabled||(r.orderType==="Delivery"&&D.key==="On the way"?(p(),o&&o()):d(D.key))},_=()=>{n&&(x(!0),n(c))};return e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Update Order Status"}),e.jsx("button",{onClick:p,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-6 bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:["#",r.orderNumber]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Type: ",r.orderType||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Current: ",r.status||"Pending"]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:w(r.orderType).map(D=>e.jsx("button",{onClick:()=>N(D),className:`p-4 rounded-lg border-2 transition-all ${D.disabled?"bg-gray-300 text-gray-500 border-gray-300 cursor-not-allowed":c===D.key?"bg-white border-primary text-primary cursor-pointer":"bg-primary text-white border-primary hover:bg-primary/90 cursor-pointer"}`,disabled:D.disabled,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[D.icon,e.jsx("span",{className:"font-medium",children:D.label})]})},D.key))})}),h&&e.jsx("div",{className:"px-6 py-3 bg-green-50 border-t border-green-200",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[e.jsx(xa,{size:20}),e.jsx("span",{className:"font-medium",children:"Status updated successfully!"})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors cursor-pointer",children:"Cancel"}),e.jsx("button",{onClick:_,disabled:m,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${m?"bg-gray-400 text-gray-400 cursor-not-allowed":"bg-primary text-white hover:bg-primary cursor-pointer"}`,children:m?"Updating...":"Update Status"})]})]})})},$C=()=>{const s=v.useCallback(()=>{try{const r=window.appSettings?.current;return{dineInOrders:r?.dine_in_orders===1||r?.dine_in_orders===!0,inStoreOrders:r?.in_store_orders===1||r?.in_store_orders===!0,takeawayOrders:r?.takeaway_orders===1||r?.takeaway_orders===!0,deliveryOrders:r?.delivery_orders===1||r?.delivery_orders===!0}}catch(r){return console.log("Failed to get order type settings:",r),{dineInOrders:!0,inStoreOrders:!0,takeawayOrders:!0,deliveryOrders:!0}}},[]),t=v.useCallback(r=>{const n=s();switch(r){case"table":return n.dineInOrders;case"instore":return n.inStoreOrders;case"collection":return n.takeawayOrders;case"delivery":return n.deliveryOrders;default:return!0}},[s]);return{getOrderTypeSettings:s,shouldShowOrderType:t,orderTypeSettings:s()}};let zv=null;const HC=s=>{zv=s},VC=()=>{try{const s=window.appSettings?.current||zv;if(!(s?.sound_alert===1||s?.sound_alert===!0))return;_v()}catch(s){console.log("Button sound creation failed:",s)}},Xx=s=>{const t=s.target;(t.tagName==="BUTTON"||t.closest("button")||t.getAttribute("role")==="button"||t.classList.contains("btn")||t.classList.contains("button")||t.classList.contains("btn-lifted")||t.closest("[data-invoice-button]")||t.closest(".cursor-pointer")||t.closest('a[class*="cursor-pointer"]')||t.closest('a[class*="hover:"]')||t.closest('a[class*="flex items-center"]')||t.closest('[class*="hover:bg-"]')||t.closest('[class*="hover:text-"]')||t.onclick!==null||t.parentElement?.onclick!==null||t.parentElement?.tagName==="BUTTON"||t.parentElement?.classList.contains("cursor-pointer"))&&VC()},qC=()=>{document.removeEventListener("click",Xx),document.addEventListener("click",Xx,!0),console.log("Button sound handler initialized")},KC=()=>{document.removeEventListener("click",Xx,!0),console.log("Button sound handler cleaned up")},Pv=v.createContext(null),YC=({children:s})=>{const[t,r]=v.useState(null),[n,o]=v.useState(!1),c=v.useRef(!1),d=v.useCallback(async()=>{try{o(!0);const h=await window.settingsAPI?.get();if(h?.success){const x=h.data||null;r(x),HC(x)}}catch(h){console.error("Failed to load settings:",h)}finally{o(!1),c.current=!0}},[]);v.useEffect(()=>(d(),qC(),()=>{KC()}),[d]);const m={settings:t,isLoading:n,hasLoaded:c.current,reloadSettings:d};return v.useEffect(()=>{window.appSettings={reloadSettings:d,get current(){return t}}},[d,t]),e.jsx(Pv.Provider,{value:m,children:s})},GC=()=>{const s=v.useContext(Pv);if(!s)throw new Error("useSettings must be used within a SettingsProvider");return s},Qx=({isOpen:s,onClose:t,selectedPaymentMethod:r,setSelectedPaymentMethod:n,paymentAmount:o,setPaymentAmount:c,givenAmount:d,setGivenAmount:m,changeAmount:h,setChangeAmount:x,currencyAmount:p,setCurrencyAmount:w,selectedCurrency:N,setSelectedCurrency:_,currencyOptions:D,addedPayments:L,setAddedPayments:B,isSinglePayMode:z,selectedSplitBill:q,selectedPlacedOrder:R,cartItems:F,foodDetails:T,appliedCoupon:I,removeAppliedCoupon:se,couponCode:oe,setCouponCode:_e,availableCoupons:he,couponsLoading:ie,discountType:Ee,setDiscountType:Ae,discountAmount:re,setDiscountAmount:le,sendSMS:J,setSendSMS:Ce,handleCashGivenAmountChange:Se,handleCashAmountChange:He,handleNumericInputFocus:Y,handleNumericKeyboardChange:be,handleNumericKeyboardKeyPress:ye,handleAddPayment:ae,handleApplyManualDiscount:Ne,handleApplyCoupon:ge,handleAnyInputFocus:A,handleAnyInputClick:P,handleCustomInputBlur:f,calculateSinglePayTotals:g,calculateSplitBillTotal:S,calculateCartTotal:k,calculateSplitBillSubtotal:C,calculateSplitBillTax:O,calculateSplitBillDiscount:U,calculateSplitBillCharge:H,calculateSplitBillTips:V,calculateCartSubtotal:ee,calculateCartTax:X,calculateCartDiscount:M,calculateDueAmount:Q,getCurrencySymbol:ue,numericActiveInput:ne,numericKeyboardInput:fe,setNumericActiveInput:ce,setNumericKeyboardInput:Me,setShowCartDetailsModal:Re,splitBillToRemove:ze,setSplitBills:rt,setSplitBillToRemove:Ve,placedOrders:Je,selectedCustomer:We,selectedOrderType:it,selectedTable:Qe,handlePlaceOrder:At,showError:xt,showSuccess:Te,setIsInvoiceAfterPayment:Ke,setShowInvoiceModal:Pe,clearCart:qe,resetFinalizeSaleModal:ft,setIsSinglePayMode:ot,setSelectedPlacedOrder:pt,setCurrentOrderForInvoice:ke,isModifyingOrder:st,modifyingOrderId:gt,modifyingOrderPaymentInfo:kt,showPayLaterButton:Mt,setShowPayLaterButton:de,hasResetPayment:De,setHasResetPayment:Le})=>s?(Sr.useEffect(()=>{st&&kt&&kt.payment_method&&n(kt.payment_method)},[st,kt,n]),e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl h-[95vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold",children:z?"Finalize Sale - Single Pay":q?`Finalize Sale - Split Bill ${q.id}`:"Finalize Sale"}),e.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6 flex gap-6 flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-44 flex-shrink-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Payment Method"}),e.jsx("div",{className:"space-y-2",children:["Cash","Credit Card","Check","Bank Transfer"].map(ve=>e.jsx("button",{onClick:()=>{n(ve),c(""),m(""),x(""),w("")},className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${r===ve?"bg-gray-200 text-gray-800 font-medium":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:ve},ve))})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto max-h-[70vh]",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:r}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[r==="Cash"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Given Amount"}),e.jsx("input",{type:"number",value:d,onChange:ve=>Se(ve.target.value),onFocus:ve=>Y(ve,"givenAmount",d),onClick:ve=>Y(ve,"givenAmount",d),onBlur:ve=>{if(ne==="givenAmount"&&fe!==void 0)if(m(fe),c(fe),fe){const Ze=z?g().total:q?S():k(),mt=parseFloat(fe)-Ze;x(mt>0?mt.toFixed(2):"0.00")}else x("0.00");ce("")},onInput:ve=>{const Ze=ve.target.value;if(m(Ze),c(Ze),ne==="givenAmount"&&Me(Ze),Ze){const mt=z?g().total:q?S():k(),dt=parseFloat(Ze)-mt;x(dt>0?dt.toFixed(2):"0.00")}else x("0.00")},placeholder:"Given Amount",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Change Amount"}),e.jsx("input",{type:"number",value:h,onChange:ve=>x(ve.target.value),placeholder:"Change Amount",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",readOnly:!0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsx("input",{type:"number",value:o,onChange:ve=>He(ve.target.value),onFocus:ve=>Y(ve,"paymentAmount",o),onClick:ve=>Y(ve,"paymentAmount",o),onBlur:ve=>{if(ne==="paymentAmount"&&fe!==void 0&&(c(fe),r==="Cash"))if(m(fe),fe){const Ze=z?g().total:q?S():k(),mt=parseFloat(fe)-Ze;x(mt>0?mt.toFixed(2):"0.00")}else x("0.00");ce("")},onInput:ve=>{const Ze=ve.target.value;if(c(Ze),ne==="paymentAmount"&&Me(Ze),r==="Cash")if(m(Ze),Ze){const mt=z?g().total:q?S():k(),dt=parseFloat(Ze)-mt;x(dt>0?dt.toFixed(2):"0.00")}else x("0.00")},placeholder:"Amount",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}):r==="Change Currency"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),e.jsx("select",{value:N,onChange:ve=>_(ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:D.map(ve=>e.jsxs("option",{value:ve.code,children:[ve.symbol," ",ve.name]},ve.code))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsx("input",{type:"number",value:p,onChange:ve=>w(ve.target.value),placeholder:"Amount",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:()=>{w("")},className:"px-2 py-2 text-red-500 hover:text-red-700 self-end",children:e.jsx(St,{size:16})})]}):e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsx("input",{type:"number",value:o,onChange:ve=>c(ve.target.value),onFocus:ve=>Y(ve,"paymentAmount",o),onClick:ve=>Y(ve,"paymentAmount",o),onBlur:ve=>{ne==="paymentAmount"&&fe!==void 0&&c(fe),ce("")},onInput:ve=>{const Ze=ve.target.value;c(Ze),ne==="paymentAmount"&&Me(Ze)},placeholder:"Amount",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r!=="Change Currency"&&e.jsx("button",{onClick:ae,className:"px-6 py-2 bg-gray-300 text-black rounded-lg hover:bg-gray-400 transition-colors self-end",children:"Add"})]}),e.jsx("div",{className:"flex-1 bg-gray-50 rounded-lg p-4 mb-6",children:L.length>0?e.jsx("div",{className:"space-y-2",children:L.map((ve,Ze)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded border",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[ve.method,": €",ve.amount]}),e.jsx("button",{onClick:()=>B(mt=>mt.filter((dt,jt)=>jt!==Ze)),className:"text-red-500 hover:text-red-700",children:e.jsx(St,{size:16})})]},Ze))}):e.jsxs("div",{className:"text-gray-400 text-center py-8",children:[e.jsx("div",{className:"mb-2",children:"No payments added yet"}),e.jsx("div",{className:"text-xs",children:"Add a payment above to enable the Submit button"})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"space-y-2",children:[q&&e.jsx("div",{className:"border-b border-gray-200 pb-2 mb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Split Bill ",q.id,":"]}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:q.customer})]})}),z&&R&&e.jsx("div",{className:"border-b border-gray-200 pb-2 mb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-md font-medium text-gray-700",children:["Order #",R.id||R.orderNumber,":"]}),e.jsx("span",{className:"text-md font-medium text-gray-700",children:R.customer?.name||R.customer||"Walk-in Customer"})]})}),e.jsxs("div",{className:"border-b border-gray-200 pb-2 mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-md font-medium text-gray-700",children:"Subtotal:"}),e.jsxs("span",{className:"text-md font-medium text-gray-700",children:[ue(),z?g().subtotal.toFixed(2):q?C().toFixed(2):ee().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-md font-medium text-gray-700",children:"Tax:"}),e.jsxs("span",{className:"text-md font-medium text-gray-700",children:[ue(),z?g().tax.toFixed(2):q?O().toFixed(2):X().toFixed(2)]})]}),(z?g().discount:q?U():M())>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Discount:"}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["-",ue(),z?g().discount.toFixed(2):q?U().toFixed(2):M().toFixed(2)]})]}),(z?0:q?H():0)>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Charge:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[ue(),q?H().toFixed(2):"0.00"]})]}),(z?0:q?V():0)>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tips:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[ue(),q?V().toFixed(2):"0.00"]})]})]}),I&&e.jsx("div",{className:"border-b border-gray-200 pb-2 mb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm font-medium text-green-600",children:[I.title," (",I.code,"):"]}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["-",ue(),z?g().discount.toFixed(2):q?U().toFixed(2):M().toFixed(2)]})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Payable:"}),e.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[ue(),z?g().total.toFixed(2):q?S().toFixed(2):k().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Paid:"}),e.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[ue(),L.reduce((ve,Ze)=>ve+parseFloat(Ze.amount),0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Due:"}),e.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[ue(),Math.max(0,(z?g().total:q?S():k())-L.reduce((ve,Ze)=>ve+parseFloat(Ze.amount),0)).toFixed(2)]})]})]})}),st&&kt&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"text-md font-semibold text-blue-800",children:"Previous Payment Information"}),e.jsx("button",{onClick:()=>{Le(!0),c("0"),m("0"),x("0"),B([]),de(!0)},className:"px-3 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600 transition-colors",children:"Reset Payment"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Payment Method:"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:kt.payment_method})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Previously Paid:"}),e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[ue(),kt.paid_amount.toFixed(2)]})]})]}),De&&e.jsx("div",{className:"mt-3 p-2 bg-yellow-100 border border-yellow-300 rounded",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"Payment has been reset. You can now add new payments or use Pay Later option."})})]}),L.length>0&&Q()>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yu,{size:16,className:"text-yellow-600"}),e.jsxs("span",{className:"text-sm text-yellow-800 font-medium",children:["Payment incomplete. Due amount: ",ue(),Q().toFixed(2)]})]}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Add more payments to complete the transaction."})]}),L.length>0&&Q()===0&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xa,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-sm text-green-800 font-medium",children:"Payment complete! Ready to submit."})]})}),q&&q.items&&q.items.length>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Items in this Split Bill:"}),e.jsx("div",{className:"space-y-2",children:q.items.map((ve,Ze)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-800",children:ve.food?.name||"Unknown Item"}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["x",ve.quantity||0]})]}),e.jsxs("span",{className:"text-gray-800 font-medium",children:["€",(ve.totalPrice||0).toFixed(2)]})]},Ze))})]}),z&&(F.length>0||R&&R.items&&R.items.length>0)&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Order Items:"}),e.jsx("div",{className:"space-y-2",children:(F.length>0?F:R.items).map((ve,Ze)=>e.jsxs("div",{className:"flex justify-between items-start text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:ve.food?.name||"Unknown Item"}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["x",ve.quantity||0]})]}),ve.variations&&Object.keys(ve.variations).length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Object.entries(ve.variations).map(([mt,dt])=>{const jt=T?.variations?.find(me=>me.id===parseInt(mt)),wt=jt?.name||mt,Tt=Array.isArray(dt)?dt:[dt];return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-gray-500",children:["• ",wt,":"]}),e.jsx("span",{className:"text-gray-700",children:Tt.map((me,Ie)=>{const te=jt?.options?.find(Z=>Z.id===parseInt(me));return e.jsxs("span",{children:[te?.option_name||me,Ie<Tt.length-1?", ":""]},me)})})]},mt)})}),ve.adons&&ve.adons.length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:ve.adons.map((mt,dt)=>{const jt=T?.adons?.find(me=>me.id===parseInt(mt)),wt=jt?.name||mt,Tt=jt?.price;return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"• Addon:"}),e.jsx("span",{className:"text-gray-700",children:wt}),Tt&&e.jsxs("span",{className:"text-gray-500",children:["(+€",Tt.toFixed(2),")"]})]},dt)})})]}),e.jsxs("span",{className:"text-gray-800 font-medium",children:["€",(parseFloat(ve.totalPrice)||0).toFixed(2)]})]},Ze))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:J,onChange:ve=>Ce(ve.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Send SMS"})]}),e.jsx("button",{onClick:()=>Re(!0),className:"px-4 py-2 bg-gray-300 text-black rounded-lg hover:bg-gray-400 transition-colors text-sm",children:z?"Order Details":q?"Split Bill Details":"Cart Details"})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-col h-full",children:[e.jsx("div",{className:"mb-4 flex-shrink-0",children:e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("div",{className:"keyboard-container w-full",onClick:ve=>ve.stopPropagation(),onMouseDown:ve=>ve.preventDefault(),children:e.jsx(Dg,{keyboardRef:ve=>window.keyboard=ve,input:fe,onChange:be,onKeyPress:ye,theme:"hg-theme-default",layoutName:"numeric",layout:{numeric:["1 2 3","4 5 6","7 8 9","0 {bksp}"]},display:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0","{bksp}":"⌫"},physicalKeyboardHighlight:!0,physicalKeyboardHighlightTextColor:"#000000",physicalKeyboardHighlightBgColor:"#fff475"})})})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Coupons & Discounts"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(_h,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Manual Discount"})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Discount Type"}),e.jsxs("select",{name:"discountType",value:Ee,onChange:ve=>Ae(ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm",children:[e.jsx("option",{value:"percentage",children:"Percentage (%)"}),e.jsx("option",{value:"fixed",children:"Fixed Amount (€)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Disc. Amount"}),e.jsx("input",{type:"number",name:"discountAmount",value:re,onChange:ve=>le(ve.target.value),onFocus:ve=>Y(ve,"discountAmount",re),onClick:ve=>Y(ve,"discountAmount",re),onBlur:ve=>{ne==="discountAmount"&&fe!==void 0&&le(fe),ce("")},onInput:ve=>{const Ze=ve.target.value;le(Ze),ne==="discountAmount"&&Me(Ze)},min:"0",step:"0.01",placeholder:Ee==="percentage"?"20":"10",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"})]})]}),re&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:["✓ Manual discount of ",re,Ee==="percentage"?"%":"€"," is ready to apply."]}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx("button",{onClick:Ne,disabled:!re||parseFloat(re)<=0,className:`px-4 py-2 rounded-lg transition-colors font-medium ${re&&parseFloat(re)>0?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Apply Manual Discount"})})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(_h,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Enter Coupon Code"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"couponCode",value:oe,onChange:ve=>_e(ve.target.value),onFocus:ve=>A(ve,"couponCode"),onClick:ve=>P(ve,"couponCode"),onBlur:ve=>f(ve,"couponCode"),placeholder:"Enter promo code or click a coupon below",className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${oe.trim()?"border-green-400 focus:ring-green-500 focus:ring-green-500 bg-green-50":"border-gray-300 focus:ring-green-500 focus:border-green-500"}`,onKeyUp:ve=>{ve.key==="Enter"&&ge()}}),e.jsx("button",{onClick:ge,disabled:!oe.trim(),className:`px-4 py-2 rounded-lg transition-colors font-medium ${oe.trim()?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Apply"})]}),oe.trim()&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:['✓ Coupon code "',oe,'" is ready to apply. Click "Apply".']})]}),I&&e.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Applied Coupon"}),e.jsx("p",{className:"text-sm text-green-600",children:I.title}),e.jsxs("p",{className:"text-xs text-green-600",children:["Code: ",I.code]}),I.discountType==="percentage"?e.jsxs("p",{className:"text-green-700 font-medium",children:[I.discount,"% OFF"]}):e.jsxs("p",{className:"text-green-700 font-medium",children:["€",I.discount," OFF"]})]}),e.jsx("button",{onClick:se,className:"text-red-600 hover:text-red-800 p-1",children:e.jsx(St,{size:16})})]})}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-md font-semibold text-gray-800 mb-3",children:"Available Coupons"}),ie?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading coupons..."})}):he.length>0?e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:he.map(ve=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:border-green-300 hover:bg-green-50 transition-all cursor-pointer group",onClick:()=>{_e(ve.code)},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h6",{className:"font-semibold text-gray-800 text-sm",children:ve.title}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Customer Type: ",ve.customerType]}),ve.discountType==="percentage"?e.jsxs("p",{className:"text-green-600 font-medium mt-1 text-sm",children:[ve.discount,"% OFF"]}):e.jsxs("p",{className:"text-green-600 font-medium mt-1 text-sm",children:["€",ve.discount," OFF"]})]}),e.jsx("div",{className:"text-right ml-4",children:e.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:["Code: ",ve.code]})})]}),e.jsx("div",{className:"mt-1 text-xs text-green-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to use this coupon code"})]},ve.id))}):e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"No coupons available"})})]})]})})]})]}),st&&Mt&&e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("button",{onClick:async()=>{try{const Ze={order_amount:z?g().total:q?S():k(),payment_status:"pending",payment_method:null};if(gt){const mt=await window.myAPI.updateOrder(gt,Ze);if(!mt.success){xt("Failed to update order: "+mt.message);return}Te("Order updated with new amount. Payment status set to pending.")}else{xt("Order ID not found. Cannot update order.");return}t(),ot(!1),qe(),ft()}catch(ve){console.error("Error updating order for pay later:",ve),xt("Failed to update order. Please try again.")}},className:"w-full px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx($s,{size:20}),"Pay Later (€",(z?g().total:q?S():k()).toFixed(2),")"]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-4",children:[e.jsxs("button",{onClick:()=>{t(),ot(!1)},className:"flex-1 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(St,{size:20}),"Cancel"]}),e.jsxs("button",{disabled:L.length===0||Q()>0,onClick:async()=>{try{const ve=parseFloat(o)||0,Ze=parseFloat(d)||0,mt=parseFloat(h)||0;if(z){Ke(!0);const dt=await At();if(!dt){xt("Failed to create order for payment");return}try{const jt={payment_status:"paid",payment_method:r,order_status:"completed"},wt=await window.myAPI.updateOrder(dt,jt);if(!wt.success){xt("Failed to update order payment: "+wt.message);return}try{const me=await window.myAPI.getOrderById(dt);if(me.success&&me.data.table_details){const Ie=JSON.parse(me.data.table_details);if(Ie&&Ie.tables&&Ie.tables.length>0){const te=Ie.tables.map(Be=>Be.id);console.log("Freeing tables after payment completion:",te);const Z=await window.myAPI.tableUpdateMultipleStatuses(te,"Free");Z.success?console.log("Tables freed successfully after payment:",Z.message):console.warn("Failed to free tables after payment:",Z.message)}}}catch(me){console.error("Error freeing tables after payment:",me)}const Tt={id:dt,orderNumber:`ORD-${String(dt).padStart(3,"0")}`,items:F,customer:We||{name:"Walk-in Customer"},total:k(),coupon:I,orderType:it,table:Qe?`Table ${Qe}`:"None",waiter:"Ds Waiter",status:"Completed",placedAt:new Date().toISOString(),databaseId:dt};pt(Tt)}catch(jt){console.error("Error processing single pay order:",jt),xt("Failed to process payment for new order");return}}else if(R&&R.databaseId){Ke(!0);const dt={payment_status:"paid",payment_method:r},jt=await window.myAPI.updateOrder(R.databaseId,dt);if(!jt.success){xt("Failed to update order payment: "+jt.message);return}}else if(q){Ke(!0);const dt={id:q.id,orderNumber:`${R?.orderNumber||"ORD-000"}-SPLIT-${q.id}`,items:q.items,customer:q.customer||R?.customer||{name:"Walk-in Customer"},total:q.total,coupon:I,orderType:R?.orderType||"In Store",table:R?.table||"None",waiter:R?.waiter||"Ds Waiter",status:"Split Payment",placedAt:new Date().toISOString(),databaseId:R?.databaseId};pt(dt),ze&&(rt(jt=>jt.filter(wt=>wt.id!==ze)),Ve(null))}t(),ot(!1),qe(),ft(),z&&R?(Ke(!0),Pe(!0)):Je[0]?(pt(Je[0]),Ke(!0),Pe(!0)):R&&(Ke(!0),Pe(!0)),ot(!1),Ke(!1),ke(null)}catch(ve){console.error("Error processing payment:",ve),xt("Failed to process payment. Please try again.")}},className:`flex-1 px-6 py-3 rounded-lg transition-colors flex items-center justify-center gap-2 ${L.length===0||Q()>0?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[e.jsx(Oc,{size:20}),"Submit"]})]})]})})):null,WC=({isVisible:s,onClose:t,foodId:r,foodName:n})=>{const{themeColors:o}=Ur(),[c,d]=v.useState([]),[m,h]=v.useState(!1),[x,p]=v.useState(""),[w,N]=v.useState(null),[_,D]=v.useState(""),[L,B]=v.useState(!1),[z,q]=v.useState({isVisible:!1,message:"",type:"success"}),R=async()=>{if(r)try{h(!0);const he=await window.myAPI?.getFoodIngredients(r);he.success?d(he.data||[]):(console.error("Error fetching ingredients:",he.message),d([]))}catch(he){console.error("Error fetching ingredients:",he),d([])}finally{h(!1)}},F=async()=>{if(!(!x.trim()||!r))try{h(!0);const he=await window.myAPI?.createIngredient({name:x.trim(),status:1});if(he.success){const ie=he.id;(await window.myAPI?.createFoodIngredient(r,ie)).success?(await R(),p(""),oe(`Ingredient "${x.trim()}" added successfully!`,"success")):oe("Failed to add ingredient to food","error")}else oe("Failed to create ingredient","error")}catch(he){console.error("Error adding ingredient:",he),oe("An error occurred while adding the ingredient","error")}finally{h(!1)}},T=async he=>{try{h(!0),(await window.myAPI?.removeFoodIngredient(r,he)).success?(await R(),oe("Ingredient removed successfully!","success")):oe("Failed to remove ingredient","error")}catch(ie){console.error("Error removing ingredient:",ie),oe("An error occurred while removing the ingredient","error")}finally{h(!1)}},I=async()=>{if(!(!_.trim()||!w))try{h(!0),(await window.myAPI?.updateIngredient(w.id,{name:_.trim()})).success?(await R(),B(!1),N(null),D(""),oe("Ingredient updated successfully!","success")):oe("Failed to update ingredient","error")}catch(he){console.error("Error updating ingredient:",he),oe("An error occurred while updating the ingredient","error")}finally{h(!1)}},se=he=>{N(he),D(he.name),B(!0)},oe=(he,ie="success")=>{q({isVisible:!0,message:he,type:ie})},_e=he=>{he.key==="Enter"&&(he.preventDefault(),F())};return v.useEffect(()=>{s&&r&&R()},[s,r]),s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"text-white p-4 flex justify-between items-center rounded-t-xl flex-shrink-0",style:{backgroundColor:o.primary},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Ingredients"}),e.jsxs("span",{className:"text-sm opacity-90",children:["for ",n]})]}),e.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Ls,{size:18,style:{color:o.primary}}),"Add New Ingredient"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:x,onChange:he=>p(he.target.value),onKeyPress:_e,placeholder:"Enter ingredient name...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",style:{"--tw-ring-color":o.primary}}),e.jsxs("button",{onClick:F,disabled:m||!x.trim(),className:"px-4 py-2 text-white font-medium rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:o.primary},children:[e.jsx(Ls,{size:16}),"Add"]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(fl,{size:18,style:{color:o.primary}}),"Current Ingredients (",c.length,")"]}),m?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading ingredients..."})}):c.length>0?e.jsx("div",{className:"space-y-2",children:c.map(he=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("span",{className:"text-gray-800 font-medium",children:he.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>se(he),className:"p-1 text-gray-600 hover:text-primary transition-colors",style:{color:o.primary},children:e.jsx(fl,{size:16})}),e.jsx("button",{onClick:()=>T(he.id),className:"p-1 text-gray-600 hover:text-red-500 transition-colors",children:e.jsx(za,{size:16})})]})]},he.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No ingredients added yet"}),e.jsx("div",{className:"text-gray-400 text-xs mt-1",children:"Add ingredients using the form above"})]})]})]})]})}),L&&w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"text-white p-4 flex justify-between items-center rounded-t-xl",style:{backgroundColor:o.primary},children:[e.jsx("h3",{className:"text-lg font-bold",children:"Edit Ingredient"}),e.jsx("button",{onClick:()=>{B(!1),N(null),D("")},className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ingredient Name"}),e.jsx("input",{type:"text",value:_,onChange:he=>D(he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",style:{"--tw-ring-color":o.primary}})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{B(!1),N(null),D("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:I,disabled:m||!_.trim(),className:"flex-1 px-4 py-2 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:o.primary},children:m?"Updating...":"Update"})]})]})]})}),e.jsx(Ni,{isVisible:z.isVisible,message:z.message,type:z.type,onClose:()=>q({...z,isVisible:!1})})]}):null},XC=()=>{const s=nn(),{alertState:t,showSuccess:r,showError:n,showWarning:o,hideAlert:c}=Yh(),{updateDraftCount:d}=Tv(),{addNotification:m}=_g(),{playButtonSound:h}=kg(),{shouldShowOrderType:x,orderTypeSettings:p}=$C(),{settings:w}=GC(),N=b=>{if(!b)return!1;const K={"In Store":"instore",Table:"table",Collection:"collection",Delivery:"delivery"}[b];return K?x(K):!1},_=()=>{if(!Vt||!N(Vt)){const b=[];return x("instore")&&b.push("In Store"),x("table")&&b.push("Table"),x("collection")&&b.push("Collection"),x("delivery")&&b.push("Delivery"),b.length>0?(n(`Please select an order type first. Available options: ${b.join(", ")}`),!1):(n("No order types are available. Please check your settings."),!1)}return!0},[D,L]=v.useState(null),[B,z]=v.useState(!1),[q,R]=v.useState(!1),[F,T]=v.useState(null),[I,se]=v.useState(!1),[oe,_e]=v.useState(!1),[he,ie]=v.useState(!1),[Ee,Ae]=v.useState(!1),[re,le]=v.useState(null),[J,Ce]=v.useState([]),[Se,He]=v.useState(!0),[Y,be]=v.useState(null),[ye,ae]=v.useState(!1),[Ne,ge]=v.useState(null),[A,P]=v.useState({}),[f,g]=v.useState(1),[S,k]=v.useState(!1),[C,O]=v.useState(!1),[U,H]=v.useState(!1),[V,ee]=v.useState(null),[X,M]=v.useState(!1),[Q,ue]=v.useState([]),[ne,fe]=v.useState([]),[ce,Me]=v.useState(""),[Re,ze]=v.useState([]),[rt,Ve]=v.useState(""),[Je,We]=v.useState(""),[it,Qe]=v.useState([]),[At,xt]=v.useState(!1),[Te,Ke]=v.useState(!1),[Pe,qe]=v.useState(""),[ft,ot]=v.useState(""),[pt,ke]=v.useState([{id:1,tableId:""},{id:2,tableId:""}]);v.useEffect(()=>{const b=s?.state;if(!b||!b.loadOrder)return;const E=b.loadOrder;console.log("RunningOrders: Received order data from ManageOrders:",E),zt([]),ms(null),Ve(""),We(""),Me(""),T(null),qe(""),ot(""),ke([{id:1,tableId:""},{id:2,tableId:""}]),aa(null),g(1),P({}),ue([]),E.customer&&(console.log("Setting customer:",E.customer),T(E.customer)),E.orderType&&(console.log("Setting order type:",E.orderType),Da(E.orderType));const K=Date.now();if(E.items&&Array.isArray(E.items)){console.log("Loading items into cart:",E.items);const xe=E.items.map((je,pe)=>je.isCustomPizza?{id:K+pe,name:je.name,price:je.price,tax:je.tax,totalPrice:je.totalPrice,quantity:je.quantity||1,variations:{},adons:[],slices:je.slices,size:je.size,selectedPizzas:je.selectedPizzas,flavorIngredients:je.flavorIngredients,sliceColors:je.sliceColors,customNote:je.customNote,isCustomPizza:!0,addedAt:new Date().toISOString()}:je.isCustomFood?{id:K+pe,name:je.name,price:je.price,tax:je.tax,totalPrice:je.totalPrice,quantity:je.quantity||1,variations:{},adons:[],customFoodName:je.customFoodName,customFoodNote:je.customFoodNote,customFoodIngredients:je.customFoodIngredients,isCustomFood:!0,addedAt:new Date().toISOString()}:{id:K+pe,food:je.food,variations:je.variations||{},adons:je.adons||[],quantity:je.quantity||1,totalPrice:je.totalPrice||0,addedAt:new Date().toISOString()});zt(xe),Kt(K+(E.items.length||0)+1)}E.table&&(console.log("Setting table:",E.table),Ve(E.table)),Es(!0),Yr(E.databaseId||E.orderId),En({id:E.orderId,databaseId:E.databaseId,customer:E.customer,items:E.items,orderType:E.orderType,table:E.table}),window.history.replaceState({},document.title)},[s]);const[st,gt]=v.useState([]),[kt,Mt]=v.useState(!1),[de,De]=v.useState(""),[Le,ve]=v.useState(""),[Ze,mt]=v.useState([]),[dt,jt]=v.useState(""),[wt,Tt]=v.useState(!1),[me,Ie]=v.useState(null),[te,Z]=v.useState(0),[Be,Xe]=v.useState(!1),[nt,ut]=v.useState(""),[Et,Rt]=v.useState([]),[Ht,ss]=v.useState(!1),[Pt,ms]=v.useState(null),[as,ys]=v.useState(""),[vs,Nt]=v.useState("percentage"),[Ct,zt]=v.useState([]),[qt,Kt]=v.useState(1),[js,aa]=v.useState(null),[Ci,Xa]=v.useState(0),[Do,Uc]=v.useState(0),[Os,Cl]=v.useState(""),[ki,Eo]=v.useState(!1),[zs,Nn]=v.useState(4),[kl,Xn]=v.useState(!1),[pa,Sn]=v.useState(""),[Qn,Cr]=v.useState(""),[$r,Hr]=v.useState(""),[on,kr]=v.useState([]),[ir,or]=v.useState(""),[Cn,la]=v.useState(!1),[kn,Vs]=v.useState([]),[ca,Zn]=v.useState(null),[Jn,Rs]=v.useState([]),[ya,da]=v.useState(""),[ln,_a]=v.useState("12"),[G,Fe]=v.useState(""),[Lt,Jt]=v.useState([]),[rs,lr]=v.useState(null),[Vr,os]=v.useState([]),[Pa,_n]=v.useState({}),[Qa,Pu]=v.useState({}),[Fu,Lu]=v.useState(!1),[_l,$c]=v.useState([]),[tf,Bu]=v.useState({}),[Hc,cn]=v.useState({}),[cr,Al]=v.useState({}),[sf,Dl]=v.useState({}),[ws,El]=v.useState(null),[Uu,Tl]=v.useState(!1),[$u,To]=v.useState(""),[Ml,Mo]=v.useState(""),[Ol,_i]=v.useState(""),[af,Hu]=v.useState([]),[Ai,rf]=v.useState(null),[Di,Rl]=v.useState(""),[Vc,Il]=v.useState(!1),[nf,qc]=v.useState(!1),[Za,Oo]=v.useState(""),[ei,Kc]=v.useState(!1),[zl,Ei]=v.useState([]),[Vu,qu]=v.useState(!1),[Fa,An]=v.useState([]),[Gg,Ku]=v.useState(0),[Wg,Yc]=v.useState(0),[of,Ti]=v.useState(0),[dr,Ja]=v.useState([]),[Wt,_r]=v.useState(null),[ti,Mi]=v.useState(null),dn=()=>{if(!Fa||Fa.length===0)return 10;const b=Fa.reduce((E,K)=>E+K.quantity,0);return Math.min(b,10)},[Oi,Dn]=v.useState([]),[_t,En]=v.useState(null),[Pl,Fl]=v.useState(!1),[Gc,lf]=v.useState(new Set),[er,ur]=v.useState(!1),[ua,Ro]=v.useState(null),[Bs,si]=v.useState("New"),[Wc,Ri]=v.useState(!1),[Ii,Io]=v.useState(!1),[zo,Po]=v.useState(!1),[Xc,un]=v.useState(null),[zi,Pi]=v.useState(!1),[Fo,Ar]=v.useState(!1),[Fi,Li]=v.useState("Cash"),[Bi,mr]=v.useState(""),[Yu,hr]=v.useState(""),[Qc,Zs]=v.useState(""),[Lo,ba]=v.useState([]),[Zc,La]=v.useState(""),[tr,qr]=v.useState(!1),[Bo,Tn]=v.useState("EUR"),[Uo,ai]=v.useState(""),[Ui,$o]=v.useState(!1),[Ll,Mn]=v.useState(!1),[cf,Ba]=v.useState(new Date),[Jc,fr]=v.useState(!1),[$i,On]=v.useState(""),[ri,Hi]=v.useState(!1),[mn,hn]=v.useState(null),[ma,ni]=v.useState("In Store"),[Aa,va]=v.useState(""),[ra,Kr]=v.useState(""),[ha,xr]=v.useState(""),[Vt,Da]=v.useState(null),[qs,Rn]=v.useState(!1),[Ut,Es]=v.useState(!1),[Xt,Yr]=v.useState(null),[Ua,Bl]=v.useState(null),[In,Vi]=v.useState(!1),[Ul,fn]=v.useState(!1),[xn,Gu]=v.useState("New"),{showKeyboard:Ho,activeInput:Gr,keyboardInput:sr,handleInputBlur:ar,handleAnyInputFocus:fa,handleAnyInputClick:na,hideKeyboard:ed}=Wn(["searchQuery","runningOrdersSearchQuery","couponCode","customIngredientInput","pizzaNote","customFoodName","customFoodNote"]),[ja,Wr]=v.useState(""),[Dr,Ea]=v.useState("");v.useEffect(()=>{const b=document.createElement("style");return b.textContent=`
      @keyframes fade-in {
        0% {
          opacity: 0;
          transform: scale(0.95) translateY(-10px);
        }
        100% {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }
      .animate-fade-in {
        animation: fade-in 0.3s ease-out forwards;
      }
    `,document.head.appendChild(b),()=>{document.head.removeChild(b)}},[]),v.useEffect(()=>{const b=E=>{if(Pl){const K=document.querySelector("[data-invoice-button]"),xe=document.querySelector("[data-invoice-options]");K&&!K.contains(E.target)&&xe&&!xe.contains(E.target)&&Fl(!1)}};return document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[Pl]),v.useEffect(()=>{const b=()=>{Kc(!0)};return window.addEventListener("openDraftsModal",b),()=>{window.removeEventListener("openDraftsModal",b)}},[]),v.useEffect(()=>{ei&&lm()},[ei]),v.useEffect(()=>{d(zl.length)},[zl,d]),v.useEffect(()=>{const b=new Date,E=(60-b.getSeconds())*1e3-b.getMilliseconds(),K=setTimeout(()=>{Ba(new Date);const xe=setInterval(()=>{Ba(new Date)},6e4);K.interval=xe},E);return()=>{K.interval&&clearInterval(K.interval),clearTimeout(K)}},[]);const wa=async()=>{try{if(He(!0),console.log("Fetching categories for hotel_id: 1"),!window.myAPI){console.error("myAPI is not available"),Ce([]);return}const b=await window.myAPI.getCategoriesByHotel(1);if(console.log("Categories API result:",b),b&&b.success){const E=b.data.filter(K=>K.status===1);if(console.log("Active categories:",E),Ce(E),console.log("Active categories loaded successfully:",E),E&&E.length>0){const K=E[0];console.log("Auto-selecting first active category:",K),be(K),td(K.id)}}else console.error("Failed to fetch categories:",b?.message),Ce([])}catch(b){console.error("Error fetching categories:",b),Ce([])}finally{He(!1)}},Vo=()=>{Ro({orderType:Vt||"In Store",orderNumber:"NEW-ORDER",status:"New"}),si("New"),ur(!0)};Sr.useEffect(()=>{window.addEventListener("openStatusModal",Vo);const b=E=>{const K=E?.detail?.customer;K&&(le(K),Ae(!0))};return window.addEventListener("openCustomerInfo",b),()=>window.removeEventListener("openStatusModal",Vo)},[Vt]);const td=async b=>{try{if(Mt(!0),console.log("Fetching foods for category_id:",b),!window.myAPI){console.error("myAPI is not available"),gt([]);return}const E=await window.myAPI.getFoodByCategory(b);console.log("Foods API result:",E),E&&E.success?(gt(E.data),console.log("Foods loaded successfully:",E.data),E.data.forEach(K=>{console.log(`Food: ${K.name}, Image: ${K.image}`)})):(console.error("Failed to fetch foods:",E?.message),gt([]))}catch(E){console.error("Error fetching foods:",E),gt([])}finally{Mt(!1)}},df=b=>{be(b),td(b.id)},uf=async b=>{try{if(!b)return"Walk-in Customer";const E=await window.myAPI.getCustomerById(b);return E&&E.success&&E.data?E.data.name||`Customer ${b}`:`Customer ${b}`}catch(E){return console.error("Error fetching customer name:",E),`Customer ${b}`}},Wu=async()=>{try{if(console.log("Fetching active orders from database..."),!window.myAPI){console.error("myAPI is not available");return}const b=await window.myAPI.getAllOrders(100,0);if(b&&b.success){console.log("All orders loaded:",b.data);const E=b.data.filter(pe=>{const Ue=pe.order_status?.toLowerCase(),tt=pe.order_type?.toLowerCase(),yt=Ue!=="completed"&&Ue!=="delivered"&&Ue!=="canceled"&&Ue!=="done"&&Ue!=="finished"&&Ue!=="closed"&&Ue!=="draft"&&tt!=="draft";return console.log(`Order ${pe.id}: status="${pe.order_status}", order_type="${pe.order_type}" (normalized: "${Ue}"), isActive=${yt}`),yt});console.log("Active orders (not completed):",E);const K=E.map(async pe=>{try{console.log(`Fetching order details for order ${pe.id}...`);const Ue=await window.myAPI.getOrderDetailsWithFood(pe.id);let tt=[];Ue&&Ue.success?(console.log(`Order ${pe.id} details:`,Ue.data),tt=Ue.data.map(It=>{let ts={},vt={},bt=[];try{It.food_details&&(ts=JSON.parse(It.food_details)),It.variation&&(vt=JSON.parse(It.variation)),It.add_ons&&(bt=JSON.parse(It.add_ons))}catch(Bt){console.error("Error parsing JSON data:",Bt)}return{id:It.id,food:{id:It.food_id,name:It.food_name||ts.food?.name||"Unknown Food",description:It.food_description||ts.food?.description,price:It.price,image:It.food_image||ts.food?.image},variations:vt,adons:bt,quantity:It.quantity,totalPrice:It.price*It.quantity,addedAt:It.created_at}})):console.warn(`No order details found for order ${pe.id}. Including order with empty items.`);const yt=pe.customer_id?await uf(pe.customer_id):"Walk-in Customer";let Ot={id:pe.customer_id,name:yt};if(pe.customer_id)try{const It=await window.myAPI.getCustomerById(pe.customer_id);if(It&&It.success&&It.data){Ot={id:It.data.id,name:It.data.name,phone:It.data.phone,email:It.data.email};const ts=await window.myAPI.getCustomerAddresses(pe.customer_id);ts&&ts.success&&ts.data&&(Ot.addresses=ts.data),pe.order_type==="delivery"&&console.log("Delivery order customer data:",{orderId:pe.id,customerId:pe.customer_id,customerData:Ot,addresses:Ot.addresses})}}catch(It){console.error(`Error fetching customer data for order ${pe.id}:`,It)}return pe.order_type==="draft"&&console.log("Processing draft order from database:",{id:pe.id,order_type:pe.order_type,order_status:pe.order_status}),{id:pe.id,orderNumber:pe.order_type==="draft"?`DRAFT-${String(pe.id).padStart(3,"0")}`:`ORD-${String(pe.id).padStart(3,"0")}`,items:tt,customer:Ot,total:pe.order_amount,coupon:pe.coupon_code?{code:pe.coupon_code,title:pe.coupon_discount_title,discount:pe.coupon_discount_amount}:null,orderType:pe.order_type==="draft"?"Draft":pe.order_type==="instore"?"In Store":pe.order_type==="table"?"Table":pe.order_type==="collection"?"Collection":pe.order_type==="delivery"?"Delivery":"In Store",table:pe.delivery_address_id?"Table "+pe.delivery_address_id:"None",waiter:"Ds Waiter",status:pe.order_status==="pending"?"Pending":pe.order_status==="completed"?"Complete":pe.order_status==="ready"?"Ready":pe.order_status,placedAt:pe.created_at,databaseId:pe.id,isDraft:pe.order_type==="draft"}}catch(Ue){return console.error(`Error processing order ${pe.id}:`,Ue),{id:pe.id,orderNumber:pe.order_type==="draft"?`DRAFT-${String(pe.id).padStart(3,"0")}`:`ORD-${String(pe.id).padStart(3,"0")}`,items:[],customer:{id:pe.customer_id,name:pe.customer_id?`Customer ${pe.customer_id}`:"Walk-in Customer"},total:pe.order_amount,coupon:null,orderType:pe.order_type==="draft"?"Draft":"In Store",table:"None",waiter:"Ds Waiter",status:pe.order_status==="pending"?"Pending":pe.order_status==="completed"?"Complete":pe.order_status==="ready"?"Ready":pe.order_status,placedAt:pe.created_at,databaseId:pe.id,isDraft:pe.order_type==="draft"}}}),je=(await Promise.all(K)).filter(pe=>!!pe);Dn(pe=>{const Ue=new Map;console.log("Existing orders before merge:",pe.map(yt=>({id:yt.id,databaseId:yt.databaseId,orderType:yt.orderType,isDraft:yt.isDraft}))),console.log("New orders from database:",je.map(yt=>({id:yt.id,databaseId:yt.databaseId,orderType:yt.orderType,isDraft:yt.isDraft}))),[...pe,...je].forEach(yt=>{if(yt){const Ot=yt.databaseId||yt.id;if(Ue.has(Ot)){const It=Ue.get(Ot);console.log("Merge conflict detected:",{key:Ot,existing:{id:It.id,databaseId:It.databaseId,orderType:It.orderType,isDraft:It.isDraft},new:{id:yt.id,databaseId:yt.databaseId,orderType:yt.orderType,isDraft:yt.isDraft}})}Ue.set(Ot,yt)}});const tt=Array.from(Ue.values());return console.log("Merged active orders:",tt.map(yt=>({id:yt.id,databaseId:yt.databaseId,orderType:yt.orderType,isDraft:yt.isDraft}))),tt}),console.log("Transformed active orders loaded:",je)}else console.error("Failed to fetch existing orders:",b?.message)}catch(b){console.error("Error fetching existing orders:",b)}};v.useEffect(()=>{wa(),Ks(),Wu(),lm()},[]),v.useEffect(()=>{Vt&&!N(Vt)&&Da(null)},[p,Vt]),v.useEffect(()=>{console.log("Floors state updated:",ne),console.log("Floors loading:",At)},[ne,At]),v.useEffect(()=>{const b=setTimeout(()=>{jt(de)},300);return()=>clearTimeout(b)},[de]),v.useEffect(()=>{if(dt.trim()==="")mt(st);else{const b=st.filter(E=>E.name.toLowerCase().includes(dt.toLowerCase())||E.description&&E.description.toLowerCase().includes(dt.toLowerCase()));mt(b)}},[dt,st]),v.useEffect(()=>{mt(st)},[st]);const Ks=async()=>{try{if(xt(!0),console.log("Fetching floors..."),!window.myAPI){console.error("myAPI is not available"),fe([]);return}console.log("Calling floorGetAll...");const b=await window.myAPI.floorGetAll();console.log("Floors API result:",b),b&&b.success?(console.log("Floors data:",b.data),fe(b.data),console.log("Floors loaded successfully:",b.data)):(console.error("Failed to fetch floors:",b?.message),fe([]))}catch(b){console.error("Error fetching floors:",b),fe([])}finally{xt(!1)}},$l=b=>{if(Ut&&Vt==="Table"){console.log("In modification mode with Table order type - preventing floor selection change");return}Me(b.name),ke([{id:1,tableId:""},{id:2,tableId:""}]),qi(b.id)},qi=async b=>{try{if(Ke(!0),console.log("Fetching tables for floor ID:",b),!window.myAPI){console.error("myAPI is not available"),ze([]);return}const E=await window.myAPI.floorGetById(b);if(console.log("Floor details:",E),!E||!E.success){console.error("Failed to get floor details:",E?.message),ze([]);return}const K=await window.myAPI.tableGetByFloorWithStatus(b,"Free");console.log("Tables API result:",K),K&&K.success?(ze(K.data),console.log("Tables loaded successfully:",K.data)):(console.error("Failed to fetch tables:",K?.message),ze([]))}catch(E){console.error("Error fetching tables:",E),ze([])}finally{Ke(!1)}},qo=(b,E)=>{P(K=>{const xe=V?.variations?.find(pe=>pe.id===b);if(xe?.type==="multiple"){const pe=K[b]||[],Ue=pe.includes(E);let tt;if(Ue)tt=pe.filter(yt=>yt!==E);else{if(xe.max&&pe.length>=xe.max)return K;tt=[...pe,E]}return{...K,[b]:tt}}else return{...K,[b]:E}})},sd=b=>{ue(E=>E.includes(b)?E.filter(xe=>xe!==b):[...E,b])},gn=()=>{if(!Ne)return 0;let b=Ne.price||0,E=0,K=0;return V?.variations&&Object.entries(A).forEach(([je,pe])=>{const Ue=V.variations.find(tt=>tt.id===parseInt(je));if(Ue)if(Array.isArray(pe))pe.forEach(tt=>{const yt=Ue.options?.find(Ot=>Ot.id===parseInt(tt));yt&&(E+=yt.option_price||0)});else{const tt=Ue.options?.find(yt=>yt.id===parseInt(pe));tt&&(E+=tt.option_price||0)}}),V?.adons&&Q.forEach(je=>{const pe=V.adons.find(Ue=>Ue.id===parseInt(je));pe&&(K+=pe.price||0)}),(b+E+K)*f},Ki=()=>{g(b=>b+1)},mf=()=>{f>1&&g(b=>b-1)},Xu=()=>{if(wt){console.log("Already adding item to cart, ignoring click");return}if(!Vt){n("Select the Order Type First");return}if(!tc()){n("Please complete all required selections before adding to cart");return}if(Tt(!0),console.log("Adding to cart:",{food:Ne,variations:A,adons:Q,quantity:f,totalPrice:gn()}),js){Wl();return}const b=hf(Ne,A,Q);if(b)es(b.id,b.quantity+f),console.log("Increased quantity for existing item with variations and adons:",b.food.name),r(`${b.food.name} quantity increased!`);else{const E={id:qt,food:Ne,variations:A,adons:Q,quantity:f,totalPrice:gn(),addedAt:new Date().toISOString()};zt(xe=>{console.log("Previous cart items:",xe);const je=[...xe,E];return console.log("New cart items:",je),je}),Kt(xe=>xe+1),console.log("Added new item to cart:",Ne.name);const K=Date.now();if(K-te>200)try{new Audio(ul("newProductAdd.mp3")).play().catch(je=>{console.log("Audio play failed:",je)}),Z(K)}catch(xe){console.log("Audio creation failed:",xe)}r(`${Ne.name} added to cart!`)}ae(!1),ge(null),P({}),ue([]),g(1),Tt(!1)},hf=(b,E,K=[])=>Ct.find(xe=>xe.food?.id===b.id&&JSON.stringify(xe.variations)===JSON.stringify(E)&&JSON.stringify(xe.adons||[])===JSON.stringify(K)),Qu=b=>Ct.find(E=>E.food?.id===b.id),ii=async b=>{if(!b){console.error("Food item is undefined or null");return}if(wt){console.log("Already adding item to cart, ignoring click");return}if(console.log("Food item clicked:",b),!Vt){n("Select the Order Type First");return}const E=Qu(b);if(E)es(E.id,E.quantity+1),console.log("Increased quantity for existing item:",E.food.name),r(`${E.food.name} quantity increased!`);else{Tt(!0),console.log("Fetching detailed food data for:",b?.name||"Unknown Food"),M(!0);try{const K=await window.myAPI.getFoodById(b.id);if(console.log("Food details API result:",K),K&&K.success){console.log("Food details loaded successfully:",K.data),ee(K.data);const xe=K.data.variations&&K.data.variations.length>0;if(console.log("Food has variations:",xe),xe)ge(K.data),ae(!0),P({}),ue([]),g(1);else{const je={id:qt,food:K.data,variations:{},adons:[],quantity:1,totalPrice:K.data.price,addedAt:new Date().toISOString()};zt(Ue=>{console.log("Previous cart items:",Ue);const tt=[...Ue,je];return console.log("New cart items:",tt),tt}),Kt(Ue=>Ue+1),console.log("Added food without variations directly to cart:",K.data.name);const pe=Date.now();if(pe-te>200)try{new Audio(ul("newProductAdd.mp3")).play().catch(tt=>{console.log("Audio play failed:",tt)}),Z(pe)}catch(Ue){console.log("Audio creation failed:",Ue)}r(`${K.data.name} added to cart!`)}}else{console.error("Failed to fetch food details:",K?.message);const xe={id:qt,food:b,variations:{},adons:[],quantity:1,totalPrice:b.price,addedAt:new Date().toISOString()};zt(pe=>{console.log("Previous cart items:",pe);const Ue=[...pe,xe];return console.log("New cart items:",Ue),Ue}),Kt(pe=>pe+1),console.log("Added food without variations directly to cart (fallback):",b?.name||"Unknown Food");const je=Date.now();if(je-te>200)try{new Audio(ul("newProductAdd.mp3")).play().catch(Ue=>{console.log("Audio play failed:",Ue)}),Z(je)}catch(pe){console.log("Audio creation failed:",pe)}r(`${b?.name||"Unknown Food"} added to cart!`)}}catch(K){console.error("Error fetching food details:",K);const xe={id:qt,food:b,variations:{},adons:[],quantity:1,totalPrice:b.price,addedAt:new Date().toISOString()};zt(pe=>{console.log("Previous cart items:",pe);const Ue=[...pe,xe];return console.log("New cart items:",Ue),Ue}),Kt(pe=>pe+1),console.log("Added food without variations directly to cart (error fallback):",b?.name||"Unknown Food");const je=Date.now();if(je-te>200)try{new Audio(ul("newProductAdd.mp3")).play().catch(Ue=>{console.log("Audio play failed:",Ue)}),Z(je)}catch(pe){console.log("Audio creation failed:",pe)}r(`${b?.name||"Unknown Food"} added to cart!`)}finally{M(!1),Tt(!1)}}},ad=b=>{if(Ut&&Vt==="Table"){console.log("In modification mode with Table order type - preventing table selection change"),o("Cannot change table selection while modifying a table order");return}Ve(b),We(""),Da("Table")},zn=b=>it.some(E=>E.id===b),rd=(b,E)=>{if(Ut&&Vt==="Table"){console.log("In modification mode with Table order type - preventing reserved table addition");return}const K=Re.find(xe=>xe.id.toString()===b);K&&!zn(b)&&(Qe(xe=>[...xe,{id:b,tableNo:K.table_no,persons:E,floor:ce}]),Da("Table"))},Ko=b=>{if(Ut&&Vt==="Table"){console.log("In modification mode with Table order type - preventing reserved table removal");return}Qe(E=>E.filter(K=>K.id!==b))},Zu=b=>{if(Ut&&Vt==="Table"){console.log("In modification mode with Table order type - preventing persons selection change");return}We(b)},Hl=()=>Re.find(b=>b.id.toString()===rt),nd=()=>{const b=Hl();if(!b)return[];const E=b.seat_capacity||4;return Array.from({length:E},(K,xe)=>xe+1)},Ju=()=>{if(Ut&&Vt==="Table"){console.log("In modification mode with Table order type - preventing merge table modal");return}O(!1),H(!0),ke([{id:1,tableId:""},{id:2,tableId:""}])},Vl=()=>{if(Ut&&Vt==="Table"){console.log("In modification mode with Table order type - preventing back to table selection");return}H(!1),O(!0),ke([{id:1,tableId:""},{id:2,tableId:""}])},em=(b,E)=>{if(Ut&&Vt==="Table"){console.log("In modification mode with Table order type - preventing dynamic merge table selection");return}ke(K=>K.map(xe=>xe.id===b?{...xe,tableId:E}:xe)),Da("Table")},Yo=()=>{if(Ut&&Vt==="Table"){console.log("In modification mode with Table order type - preventing add more table selection");return}const b=Math.max(...pt.map(E=>E.id))+1;ke(E=>[...E,{id:b,tableId:""}])},tm=b=>{if(Ut&&Vt==="Table"){console.log("In modification mode with Table order type - preventing remove table selection");return}pt.length>2&&ke(E=>E.filter(K=>K.id!==b))},sm=b=>{const E=pt.filter(K=>K.id!==b&&K.tableId).map(K=>K.tableId);return Re.filter(K=>!E.includes(K.id.toString()))},Pn=()=>pt.filter(E=>E.tableId).map(E=>E.tableId).length>=Re.length,ql=b=>{T(b),b&&b.id&&window.dispatchEvent(new CustomEvent("customerUpdated",{detail:{customer:b}}))},id=async()=>{if(F)try{if(F.addresses&&F.addresses.length>0)for(const E of F.addresses)await window.myAPI?.deleteAddress(E.id);const b=await window.myAPI?.updateCustomer(F.id,{isDelete:1});b&&b.success?(T(null),se(!1),r("Customer deleted successfully","success")):n("Error deleting customer")}catch(b){console.error("Error deleting customer:",b),n("Error deleting customer")}},Fn=b=>{T(b),ie(!1),window.dispatchEvent(new CustomEvent("customerUpdated",{detail:{customer:b}}))},pn=async()=>{try{console.log("Adding sample data...");const b=await window.myAPI?.floorAddSampleData();console.log("Sample data result:",b),b&&b.success?(console.log("Sample data added successfully"),await Ks()):(console.error("Failed to add sample data:",b?.error),n("Failed to add sample data: "+(b?.error||"Unknown error")))}catch(b){console.error("Error adding sample data:",b),n("Error adding sample data")}},Go=async b=>{const E=b??F;if(!E){n("No customer selected to edit");return}try{const K=await window.myAPI?.getCustomerAddresses(E.id);if(K&&K.success){const xe={...E,addresses:K.data||[]};T(xe)}else T(E);ie(!0)}catch(K){console.error("Error fetching customer addresses:",K),T(E),ie(!0)}},Yi=async()=>{try{if(ss(!0),console.log("Fetching available coupons..."),!window.myAPI){console.error("myAPI is not available"),Rt([]);return}const b=await window.myAPI.getAllCoupons();if(console.log("Raw coupons API result:",b),console.log("Result success:",b?.success),console.log("Result data:",b?.data),b&&b.success){console.log("Raw coupons data:",b.data);const E=b.data.map(xe=>{console.log("Processing coupon:",xe);const je={id:xe.id,title:xe.title,code:xe.code,customerType:xe.type||"All Customers",limitForSameUser:xe.usage_limit||0,startDate:xe.start_date?xe.start_date.split("T")[0]:"",expireDate:xe.end_date?xe.end_date.split("T")[0]:"",discountType:xe.discount_type||"percentage",discount:xe.amount||0,maxDiscount:xe.max_discount||0,minPurchase:xe.min_purchase||0,totalUsers:0,status:xe.status===1?"active":"inactive"};return console.log("Transformed coupon:",je),je});console.log("All transformed coupons:",E);const K=E.filter(xe=>{console.log("Checking coupon status:",xe.status,"expireDate:",xe.expireDate);const je=xe.status==="active",pe=!xe.expireDate||new Date(xe.expireDate)>new Date;return console.log("Is active:",je,"Not expired:",pe),je&&pe});console.log("All coupons (including inactive):",E),console.log("Active coupons only:",K),console.log("Active coupons after filtering:",K),Rt(K),console.log("Available coupons loaded:",K)}else console.error("Failed to fetch coupons:",b?.message),Rt([])}catch(b){console.error("Error fetching coupons:",b),Rt([])}finally{ss(!1)}},Gi=async()=>{if(!nt.trim()){n("Please enter a coupon code");return}try{if(console.log("Applying coupon code:",nt),!window.myAPI){console.error("myAPI is not available"),n("System error: API not available");return}const b=await window.myAPI.searchCouponByCode(nt.trim());if(console.log("Coupon search result:",b),b&&b.success&&b.data){const E=b.data,K={id:E.id,title:E.title,code:E.code,customerType:E.type||"All Customers",limitForSameUser:E.usage_limit||0,startDate:E.start_date?E.start_date.split("T")[0]:"",expireDate:E.end_date?E.end_date.split("T")[0]:"",discountType:E.discount_type||"percentage",discount:E.amount||0,maxDiscount:E.max_discount||0,minPurchase:E.min_purchase||0,totalUsers:0,status:E.status===1?"active":"inactive"};if(K.status!=="active"){n("This coupon is not active");return}if(K.expireDate&&new Date(K.expireDate)<new Date){n("This coupon has expired");return}ms(K),ut("")}else n("Invalid coupon code. Please try again.")}catch(b){console.error("Error applying coupon:",b),n("Error applying coupon. Please try again.")}},Wo=()=>{Xe(!0),ut(""),ms(null),Yi(),Wr("discountAmount"),Ea(as||"")},Xo=()=>{Xe(!1),ut(""),ms(null),ys(""),Nt("percentage"),setShowKeyboard(!1),Wr(null)},Kl=()=>{ms(null)},Yl=()=>{if(!as||parseFloat(as)<=0){n("Please enter a valid discount amount");return}const b={id:"manual",title:"Manual Discount",code:"MANUAL",discount:parseFloat(as),discountType:vs,customerType:"All Customers",status:"active"};ms(b),ys(""),Nt("percentage")},Wi=(b,E)=>{b==="searchQuery"?De(E):b==="runningOrdersSearchQuery"?ve(E):b==="couponCode"?ut(E):b==="discountAmount"?ys(E):b==="customIngredientInput"?or(E):b==="pizzaNote"?Fe(E):b==="customFoodName"?Sn(E):b==="customFoodNote"&&Hr(E)},Gl=b=>b==="searchQuery"?de||"":b==="runningOrdersSearchQuery"?Le||"":b==="couponCode"?nt||"":b==="discountAmount"?as||"":b==="customIngredientInput"?ir||"":b==="pizzaNote"?G||"":b==="customFoodName"?pa||"":b==="customFoodNote"&&$r||"",Ln=(b,E)=>{Gr===E&&sr!==void 0&&handleKeyboardChange(sr,E),ar(b)},Xi=(b,E,K="")=>{Wr(E),Ea(K||""),window.keyboard&&window.keyboard.setInput(K||"")},Qo=b=>{if(Ea(b),ja==="discountAmount")ys(b);else if(ja==="paymentAmount"){if(mr(b),Fi==="Cash")if(hr(b),b){const E=qs?yr().total:Wt?Ha():Tr(),K=parseFloat(b)-E;Zs(K>0?K.toFixed(2):"0.00")}else Zs("0.00")}else if(ja==="givenAmount")if(hr(b),mr(b),b){const E=qs?yr().total:Wt?Ha():Tr(),K=parseFloat(b)-E;Zs(K>0?K.toFixed(2):"0.00")}else Zs("0.00")},Xr=b=>{if(ja==="discountAmount"){if(b==="{bksp}"){const K=(Dr||"").slice(0,-1);return Ea(K),ys(K),{action:"backspace",value:K,activeInput:ja}}}else if(ja==="paymentAmount"){if(b==="{bksp}"){const K=(Dr||"").slice(0,-1);if(Ea(K),mr(K),Fi==="Cash")if(hr(K),K){const xe=Ha(),je=parseFloat(K)-xe;Zs(je>0?je.toFixed(2):"0.00")}else Zs("0.00");return{action:"backspace",value:K,activeInput:ja}}}else if(ja==="givenAmount"&&b==="{bksp}"){const K=(Dr||"").slice(0,-1);if(Ea(K),hr(K),mr(K),K){const xe=Ha(),je=parseFloat(K)-xe;Zs(je>0?je.toFixed(2):"0.00")}else Zs("0.00");return{action:"backspace",value:K,activeInput:ja}}return null},es=(b,E)=>{if(E<=0){bs(b);return}me&&clearTimeout(me);const K=Date.now();if(K-te>200)try{new Audio(ul("newProductAdd.mp3")).play().catch(pe=>{console.log("Audio play failed:",pe)}),Z(K)}catch(je){console.log("Audio creation failed:",je)}const xe=setTimeout(()=>{Ie(null)},100);Ie(xe),zt(je=>je.map(pe=>{if(pe.id===b){if(pe.isCustomPizza||pe.isCustomFood){const ts=pe.price*E;return{...pe,quantity:E,totalPrice:ts}}const Ue=pe.food?.price||0;let tt=0;const yt={size:{Small:0,Medium:2.5,Large:5},toppings:{"Extra Cheese":1.5,Bacon:2,Mushrooms:1,Olives:.75},addons:{"Extra Cheese":1.5,Bacon:2,Mushrooms:1,Olives:.75,"Extra Sauce":.5,"Double Portion":3}};Object.entries(pe.variations).forEach(([ts,vt])=>{(ts==="size"||ts==="toppings"||ts==="addons")&&Array.isArray(vt)&&vt.forEach(bt=>{yt[ts]&&yt[ts][bt]&&(tt+=yt[ts][bt])})});const It=(Ue+tt)*E;return{...pe,quantity:E,totalPrice:It}}return pe}))},bs=b=>{const E=Ct.find(xe=>xe.id===b),K=E?E.isCustomPizza?"Split Pizza":E.isCustomFood?"Open Food":E.food.name:"Item";zt(xe=>xe.filter(je=>je.id!==b)),r(`${K} removed from cart!`)},Ys=async b=>{if(console.log("=== EDIT BUTTON CLICKED ==="),console.log("Editing cart item:",b),console.log("Is custom pizza:",b.isCustomPizza),console.log("Item keys:",Object.keys(b)),b.isCustomFood){console.log("=== CUSTOM FOOD DETECTED ==="),console.log("Editing custom food:",b),Zn(b),Sn(b.customFoodName||""),Cr(b.price.toString()),Hr(b.customFoodNote||""),kr(b.customFoodIngredients||[]),console.log("Set custom food data for editing:",{name:b.customFoodName||"",price:b.price.toString(),note:b.customFoodNote||"",ingredients:b.customFoodIngredients||[]}),console.log("Raw cartItem.customFoodNote:",b.customFoodNote),console.log("Setting customFoodNote to:",b.customFoodNote||""),console.log("=== SETTING CUSTOM FOOD MODAL TO TRUE ==="),Xn(!0),console.log("Opening custom food modal for editing");return}if(b.isCustomPizza||b.slices||b.size||b.selectedPizzas){console.log("=== CUSTOM PIZZA DETECTED ==="),console.log("Editing custom pizza:",b),aa(b),Nn(b.slices||4),da(b.price.toString()),_a(b.size||"12"),Fe(b.customNote||""),Al(b.selectedPizzas||{}),cn(b.flavorIngredients||{}),console.log("Set pizza data for editing:",{slices:b.slices||4,price:b.price.toString(),size:b.size||"12",note:b.customNote||"",selectedPizzas:b.selectedPizzas||{},flavorIngredients:b.flavorIngredients||{}}),console.log("=== SETTING MODAL TO TRUE ==="),Eo(!0),console.log("Opening split pizza modal for editing"),console.log("Modal should now be visible");return}aa(b),ge(b.food);let E={},K=[];try{typeof b.variations=="string"?E=JSON.parse(b.variations):E=b.variations||{},typeof b.adons=="string"?K=JSON.parse(b.adons):K=b.adons||[]}catch(xe){console.error("Error parsing variations/addons for editing:",xe),E=b.variations||{},K=b.adons||[]}console.log("Setting variations for editing:",E),console.log("Setting addons for editing:",K),P(E),ue(K),g(b.quantity);try{M(!0);const xe=await window.myAPI.getFoodById(b.food.id);xe&&xe.success&&(ee(xe.data),console.log("Food details loaded for editing:",xe.data))}catch(xe){console.error("Error loading food details for editing:",xe)}finally{M(!1)}ae(!0)},Wl=()=>{js&&(zt(b=>b.map(E=>E.id===js.id?{...E,variations:A,adons:Q,quantity:f,totalPrice:gn()}:E)),aa(null),ae(!1),ge(null),P({}),ue([]),g(1))},gr=()=>{const b=parseFloat(w?.food_tax)||0,E=parseFloat(w?.standard_tax)||0;return b>0?b:E},Ta=b=>{const E=gr();return b*E/100},pr=()=>Ct.reduce((b,E)=>b+E.totalPrice,0),Er=()=>{const b=pr();return Ta(b)},rr=()=>{if(!Pt)return 0;const b=pr();if(Pt.discountType==="percentage"){const E=b*(Pt.discount/100);return Pt.maxDiscount>0?Math.min(E,Pt.maxDiscount):E}else return Pt.discount},Tr=()=>{const b=pr(),E=Er(),K=rr();return b+E-K},Ts=()=>{const b=Ct.length;zt([]),ms(null),Ve(""),We(""),Me(""),T(null),qe(""),ot(""),ke([{id:1,tableId:""},{id:2,tableId:""}]),Qe([]),aa(null),g(1),P({}),ue([]),Da(""),_i(""),Es(!1),Yr(null),b>0&&r(`All ${b} item${b===1?"":"s"} removed from cart!`)},od=async()=>{try{const b=await window.myAPI.getAllIngredients();b.success&&Rs(b.data||[])}catch(b){console.error("Error fetching ingredients:",b),Rs([])}},ld=async()=>{ca||(Sn(""),Cr(""),Hr(""),kr([]),or(""),la(!1),Vs([])),await od(),Xn(!0)},Xl=()=>{Xn(!1),Sn(""),Cr(""),Hr(""),kr([]),or(""),la(!1),Vs([]),Zn(null)},am=()=>{if(!pa.trim()){n("Please enter a food name");return}if(!Qn||parseFloat(Qn)<=0){n("Please enter a valid price");return}const b=parseFloat(Qn),E=Ta(b),K=b+E,xe={id:ca?ca.id:`custom_food_${Date.now()}`,name:`Open Food - ${pa}`,price:b,tax:E,totalPrice:K,quantity:ca?ca.quantity:1,variations:{},adons:[],customFoodName:pa,customFoodNote:$r,customFoodIngredients:on,isCustomFood:!0};ca?(zt(je=>je.map(pe=>pe.id===ca.id?xe:pe)),r(`Custom food "${pa}" updated!`)):(zt(je=>[...je,xe]),h(),r(`Custom food "${pa}" added to order!`)),Zn(null),Xl()},ff=b=>{const E=b.target.value;if(or(E),console.log("Ingredient input changed:",E),console.log("All ingredients available:",Jn.length),E.length>0){const K=Jn.filter(xe=>xe.name.toLowerCase().includes(E.toLowerCase()));console.log("Filtered ingredients:",K),Vs(K),la(!0)}else la(!1),Vs([])},Ql=b=>{console.log("Adding ingredient:",b),on.find(E=>E.id===b.id)||kr(E=>{const K=[...E,b];return console.log("Updated ingredients:",K),K}),or(""),la(!1),Vs([])},cd=b=>{kr(E=>E.filter(K=>K.id!==b))},dd=async()=>{js||(Nn(2),Al({}),Dl({}),os([]),or(""),Vs([]),la(!1),hd([]),da(""),_a("12"),Fe(""),El(null),cn({}),Bu({})),Eo(!0),await $a()},$a=async()=>{try{const b=await window.myAPI.getPizzaFoods();b.success?Jt(b.data||[]):(console.error("Failed to fetch pizza foods:",b.message),n("Failed to load pizza options"))}catch(b){console.error("Error fetching pizza foods:",b),n("Error loading pizza options")}},Gs=async(b,E)=>{try{const K=Lt.find(xe=>xe.id===parseInt(E));if(K){Al(je=>({...je,[b]:K})),El(b);const xe=await window.myAPI.getFoodIngredients(E);if(xe.success){const je=xe.data||[];Dl(Ue=>({...Ue,[b]:je}));const pe=Hc[b];pe&&pe.default.length>0?console.log(`Keeping saved ingredients for slice ${b}:`,pe):(cn(Ue=>({...Ue,[b]:{default:je,custom:[]}})),console.log(`Initialized fresh ingredients for slice ${b}:`,je))}else console.error("Failed to fetch pizza ingredients:",xe.message),Dl(je=>({...je,[b]:[]})),cn(je=>({...je,[b]:{default:[],custom:[]}}))}}catch(K){console.error("Error selecting pizza for slice:",K),n("Error loading pizza ingredients for slice")}},ud=async b=>{if(or(b),b.length>=1)try{const E=await window.myAPI.searchIngredientsByName(b);if(E.success){const K=(E.data||[]).sort((xe,je)=>xe.name.toLowerCase().localeCompare(je.name.toLowerCase()));Vs(K),la(!0)}}catch(E){console.error("Error fetching ingredient suggestions:",E),Vs([]),la(!1)}else Vs([]),la(!1)},Zo=b=>{or(b.name),la(!1),Vs([])},Zl=()=>{if(!ir.trim())return;if(ws===null){n("Please select a flavor first");return}const b={id:`custom_${Date.now()}`,name:ir.trim(),isCustom:!0};cn(E=>{const K={...E,[ws]:{default:E[ws]?.default||[],custom:[...E[ws]?.custom||[],b]}};return console.log(`Added custom ingredient "${b.name}" to slice ${ws}. Updated ingredients:`,K[ws]),K}),or(""),la(!1),Vs([])},md=()=>{if(!ya||ya<=0){n("Please enter a valid price for the pizza");return}if(!Object.keys(cr).some(pe=>cr[pe])){n("Please select at least one pizza type for the slices");return}const E=parseFloat(ya),K=Ta(E),xe=E+K,je={id:js?js.id:`custom_pizza_${Date.now()}`,name:`Custom Pizza (${ln}" - ${zs} halves)`,price:E,tax:K,totalPrice:xe,quantity:js?js.quantity:1,variations:{},adons:[],slices:zs,size:ln,selectedPizzas:cr,flavorIngredients:Hc,sliceColors:fd,customNote:G,isCustomPizza:!0};if(js)zt(pe=>pe.map(Ue=>Ue.id===js.id?je:Ue)),r(`Custom ${ln}" pizza with ${zs} halves updated!`);else{zt(pe=>[...pe,je]);try{new Audio(ul("newProductAdd.mp3")).play().catch(Ue=>console.log("Audio play failed:",Ue))}catch(pe){console.log("Audio creation failed:",pe)}r(`Custom ${ln}" pizza with ${zs} halves added to cart!`)}aa(null),Mr()},Mr=()=>{Eo(!1),Nn(2),Al({}),Dl({}),os([]),or(""),Vs([]),la(!1),hd([]),da(""),_a("12"),Fe(""),Bu({}),cn({}),El(null),aa(null),console.log("Pizza modal closed - all state reset")},Jl=b=>{const E=parseInt(b.target.value);E>=2&&E<=4&&Nn(E)},Jo=b=>Hc[b]||{default:[],custom:[]},[rm,hd]=v.useState([]),[nm,ec]=v.useState(!1),fd=["#B8860B","#8B4513","#2F4F4F","#8B008B"],im=()=>{const b=[],E=360/zs;for(let K=0;K<zs;K++){const xe=K*E,je=(K+1)*E,pe=cr[K],Ue=100+80*Math.cos(xe*Math.PI/180),tt=100+80*Math.sin(xe*Math.PI/180),yt=100+80*Math.cos(je*Math.PI/180),Ot=100+80*Math.sin(je*Math.PI/180),It=Math.abs(je-xe)>180?1:0;let ts="#B8860B";pe&&(ts=fd[K]||"#B8860B"),b.push(e.jsx("g",{children:e.jsx("path",{d:`M 100 100 L ${Ue} ${tt} A 80 80 0 ${It} 1 ${yt} ${Ot} Z`,fill:ts,stroke:"#FF8C00",strokeWidth:"2",style:{transition:"fill 0.3s ease-in-out"}})},K))}return b},xd=(b,E,K,xe)=>{const je={title:"",description:"",icon:"",iconColor:""};switch(b){case"instore":return{...je,title:"In Store Order",description:`New in-store order #${E} placed`,icon:"store",iconColor:"bg-blue-500"};case"table":const Ue=(xe?JSON.parse(xe):null)?.tables?.[0]?.table_no||"Unknown";return{...je,title:"Table Order",description:`New order #${E} from Table ${Ue}`,icon:"table",iconColor:"bg-purple-500"};case"collection":return{...je,title:"Collection Order",description:`New collection order #${E} from ${K||"Customer"}`,icon:"package",iconColor:"bg-orange-500"};case"delivery":return{...je,title:"Delivery Order",description:`New delivery order #${E} to ${K||"Customer"}`,icon:"truck",iconColor:"bg-green-500"};default:return{...je,title:"New Order",description:`New order #${E} placed`,icon:"shopping-cart",iconColor:"bg-red-500"}}},el=async()=>{if(Ct.length===0){n("Please add items to cart before placing order");return}if(_()){if(Rn(!1),Vt==="Delivery"&&!F){n("Select customer first");return}if(Vt==="Collection"&&!F){n("Select customer first");return}if((Vt==="Collection"||Vt==="Delivery")&&F&&(!F.phone||F.phone.trim().length===0)){n("Customer must have a phone number for "+Vt+" orders"),ie(!0);return}if(Vt==="Delivery"&&F){if(console.log("Delivery order validation - Customer data:",F),console.log("Customer addresses:",F.addresses),!F.addresses||F.addresses.length===0){console.log("No addresses found for customer"),n("Customer must have a delivery address");return}const b=F.addresses.some(E=>E&&E.address&&E.address.trim().length>0);if(console.log("Has valid address:",b),console.log("Address details:",F.addresses.map(E=>({id:E.id,address:E.address,code:E.code,hasAddress:E&&E.address&&E.address.trim().length>0}))),!b){n("Customer must have a valid delivery address");return}console.log("Customer validation passed - ready for delivery order")}try{if(console.log("Starting order placement process..."),console.log("Is modifying order:",Ut),console.log("Modifying order ID:",Xt),!window.myAPI){n("API not available. Please refresh the page.");return}console.log("Mapping order type. selectedOrderType:",Vt);let b="instore";Vt==="Table"?b="table":Vt==="Collection"?b="collection":Vt==="Delivery"?b="delivery":Vt==="In Store"&&(b="instore"),console.log("Mapped to database order type:",b);const E=pr(),K=Er(),xe=rr(),je=Tr();let pe=null,Ue=[];if(ma==="Table"&&Aa){const bt=Re.find(Bt=>Bt.id.toString()===Aa);bt&&(pe=JSON.stringify({tables:[{id:bt.id,table_no:bt.table_no,floor_name:bt.floor_name,persons:ra||bt.seat_capacity||4}],total_persons:ra||bt.seat_capacity||4}),Ue.push(bt.id))}let tt="pending";switch(xn){case"New":tt="new";break;case"In Progress":tt="in_progress";break;case"Ready":tt="ready";break;case"On the way":tt="on_the_way";break;case"Delivered":tt="delivered";break;case"Completed":tt="completed";break;case"Pending":tt="pending";break;case"Complete":tt="completed";break;default:tt=xn.toLowerCase().replace(" ","_")}let yt=null;b==="delivery"&&F&&F.addresses&&F.addresses.length>0&&(yt=F.addresses[0].id);const Ot={customer_id:F?.id||null,order_amount:je,coupon_discount_amount:xe,coupon_discount_title:Pt?.title||null,payment_status:"pending",order_status:tt,total_tax_amount:K,payment_method:null,delivery_address_id:yt,coupon_code:Pt?.code||null,order_note:null,order_type:b,restaurant_id:1,delivery_charge:0,additional_charge:0,discount_amount:xe,tax_percentage:gr(),scheduled:Ol?1:0,schedule_at:Ol||null,failed:0,refunded:0,isdeleted:0,issyncronized:0,table_details:pe,placed_at:tt==="new"?new Date().toISOString():null};let It;if(Ut&&Xt){console.log("Updating existing order:",Xt),console.log("Order data to update:",Ot);const bt=await window.myAPI.updateOrder(Xt,Ot);if(console.log("Update result:",bt),!bt.success){n("Failed to update order: "+bt.message);return}if(It=Xt,console.log("Order updated successfully"),Ue.length>0)try{console.log("Reserving tables for modified order:",Ue);const Bt=await window.myAPI.tableUpdateMultipleStatuses(Ue,"Reserved");Bt.success?console.log("Tables reserved successfully for modified order:",Bt.message):console.warn("Failed to reserve tables for modified order:",Bt.message)}catch(Bt){console.error("Error reserving tables for modified order:",Bt)}}else{console.log("Creating new order");const bt=await window.myAPI.createOrder(Ot);if(!bt.success){n("Failed to create order: "+bt.message);return}if(It=bt.id,console.log("Order created successfully"),Ue.length>0)try{console.log("Reserving tables:",Ue);const Bt=await window.myAPI.tableUpdateMultipleStatuses(Ue,"Reserved");Bt.success?console.log("Tables reserved successfully:",Bt.message):console.warn("Failed to reserve tables:",Bt.message)}catch(Bt){console.error("Error reserving tables:",Bt)}}const ts=Ct.map(bt=>{const Bt=bt.totalPrice,Qt=Ta(Bt),Ma=0;if(bt.isCustomPizza){const hc=JSON.stringify({type:"custom_pizza",name:"Split Pizza",size:bt.size,slices:bt.slices,price:bt.price,note:bt.customNote,selectedPizzas:bt.selectedPizzas,flavorIngredients:bt.flavorIngredients,sliceColors:bt.sliceColors});return{order_id:It,food_id:0,quantity:bt.quantity,price:bt.price,food_details:hc,item_note:bt.customNote,variation:null,add_ons:null,ingredients:JSON.stringify(bt.flavorIngredients),discount_on_food:0,discount_type:null,tax_amount:Qt,total_add_on_price:0,issynicronized:0,isdeleted:0,iscreateyourown:1,isopen:0}}if(bt.isCustomFood){const hc=JSON.stringify({type:"custom_food",name:bt.customFoodName,price:bt.price,note:bt.customFoodNote,ingredients:bt.customFoodIngredients});return{order_id:It,food_id:0,quantity:bt.quantity,price:bt.price,food_details:hc,item_note:bt.customFoodNote,variation:null,add_ons:null,ingredients:JSON.stringify(bt.customFoodIngredients),discount_on_food:0,discount_type:null,tax_amount:Qt,total_add_on_price:0,issynicronized:0,isdeleted:0,iscreateyourown:0,isopen:1}}const gs=Object.keys(bt.variations).length>0?JSON.stringify(bt.variations):null,Ws=bt.adons&&bt.adons.length>0?JSON.stringify(bt.adons):null,nr=JSON.stringify({food:{id:bt.food?.id||0,name:bt.food?.name||"Unknown Food",description:bt.food?.description||"",price:bt.food?.price||0,image:bt.food?.image||null},variations:bt.variations,addons:bt.adons,quantity:bt.quantity,totalPrice:bt.totalPrice});return{food_id:bt.food?.id||0,order_id:It,price:bt.food?.price||0,food_details:nr,item_note:null,variation:gs,add_ons:Ws,discount_on_food:Ma,discount_type:null,quantity:bt.quantity,tax_amount:Qt,total_add_on_price:0,issynicronized:!1,isdeleted:!1}});if(Ut&&Xt){console.log("Smart updating order details for order:",Xt);try{const bt=await window.myAPI.getOrderDetailsWithFood(Xt);if(!bt.success){console.error("Failed to get existing order details:",bt.message),n("Failed to get existing order details");return}const Bt=bt.data||[];console.log("Existing order details:",Bt);for(const Qt of ts){const Ma=Bt.find(gs=>{if(gs.food_id!==Qt.food_id)return!1;if(Qt.variation&&gs.variation)try{const Ws=JSON.parse(Qt.variation),nr=JSON.parse(gs.variation);if(JSON.stringify(Ws)!==JSON.stringify(nr))return!1}catch(Ws){console.warn("Error parsing variations:",Ws)}else if(Qt.variation!==gs.variation)return!1;if(Qt.add_ons&&gs.add_ons)try{const Ws=JSON.parse(Qt.add_ons),nr=JSON.parse(gs.add_ons);if(JSON.stringify(Ws)!==JSON.stringify(nr))return!1}catch(Ws){console.warn("Error parsing addons:",Ws)}else if(Qt.add_ons!==gs.add_ons)return!1;return!0});if(Ma){console.log("Updating existing item:",Ma.id);const gs=await window.myAPI.updateOrderDetail(Ma.id,{quantity:Qt.quantity,price:Qt.price,food_details:Qt.food_details,variation:Qt.variation,add_ons:Qt.add_ons,discount_on_food:Qt.discount_on_food,tax_amount:Qt.tax_amount,total_add_on_price:Qt.total_add_on_price});gs.success||console.error("Failed to update order detail:",gs.message)}else{console.log("Adding new item:",Qt.food_id);const gs=await window.myAPI.createOrderDetail(Qt);gs.success||console.error("Failed to create new order detail:",gs.message)}}for(const Qt of Bt)if(!ts.find(gs=>{if(Qt.food_id!==gs.food_id)return!1;if(gs.variation&&Qt.variation)try{const Ws=JSON.parse(gs.variation),nr=JSON.parse(Qt.variation);if(JSON.stringify(Ws)!==JSON.stringify(nr))return!1}catch(Ws){console.warn("Error parsing variations:",Ws)}else if(gs.variation!==Qt.variation)return!1;if(gs.add_ons&&Qt.add_ons)try{const Ws=JSON.parse(gs.add_ons),nr=JSON.parse(Qt.add_ons);if(JSON.stringify(Ws)!==JSON.stringify(nr))return!1}catch(Ws){console.warn("Error parsing addons:",Ws)}else if(gs.add_ons!==Qt.add_ons)return!1;return!0})){console.log("Removing item:",Qt.id);const gs=await window.myAPI.deleteOrderDetail(Qt.id);gs.success||console.error("Failed to delete order detail:",gs.message)}console.log("Smart update completed")}catch(bt){console.error("Error in smart update:",bt),n("Failed to update order details: "+bt.message);return}}else{console.log("Creating new order details:",ts);const bt=await window.myAPI.createMultipleOrderDetails(ts);if(console.log("Order details result:",bt),!bt.success){n("Failed to create order details: "+bt.message);return}}const vt={id:It,orderNumber:`ORD-${String(It).padStart(3,"0")}`,items:[...Ct],customer:F?{...F,id:F.id,name:F.name,phone:F.phone||null,email:F.email||null,addresses:F.addresses||[]}:{name:"Walk-in Customer"},total:je,coupon:Pt,orderType:Vt,table:(()=>{if(Vt==="Table"){if(rt){const bt=Re.find(Bt=>Bt.id.toString()===rt);return bt?`Table ${bt.table_no}`:rt}else if(it.length>0)return it.map(bt=>`Table ${bt.tableNo}`).join(", ")}return"None"})(),waiter:"Ds Waiter",status:xn,placedAt:new Date().toISOString(),databaseId:It};if(Ut&&Xt)console.log("Modifying order. Original order type:",_t?.orderType),console.log("Current selectedOrderType:",Vt),Dn(bt=>bt.map(Bt=>Bt.databaseId===Xt?{...vt,databaseId:Xt}:Bt)),Es(!1),Yr(null),zt([]),ms(null),Ve(""),We(""),Me(""),T(null),qe(""),ot(""),ke([{id:1,tableId:""},{id:2,tableId:""}]),Qe([]),aa(null),g(1),P({}),ue([]),console.log("Order type preserved after modification:",Vt),r("Order updated successfully!","success");else if(qs){r("Order created for payment!","success");const bt=F?.name||null,Bt=xd(b,It,bt,pe);m(Bt)}else{Dn(Qt=>[vt,...Qt]),r("Order placed successfully!","success");const bt=F?.name||null,Bt=xd(b,It,bt,pe);m(Bt),Ts(),Da("In Store")}return _i(""),!Ut&&!zi&&!qs&&(un(vt),Io(!0),setTimeout(()=>{Po(!0)},500)),It}catch(b){return console.error("Error placing order:",b),console.error("Error details:",b.message,b.stack),n("Failed to place order: "+b.message),null}}},om=async()=>{try{if(!window.myAPI)return`draft_id${Date.now()}`;const b=await window.myAPI.getOrdersByStatus("draft");if(b&&b.success){const E=b.data||[];let K=0;return E.forEach(je=>{if(je.order_number&&je.order_number.startsWith("draft_id")){const pe=parseInt(je.order_number.replace("draft_id",""));!isNaN(pe)&&pe>K&&(K=pe)}}),`draft_id${(K+1).toString().padStart(3,"0")}`}return"draft_id001"}catch(b){return console.error("Error getting next draft ID:",b),`draft_id${Date.now()}`}},lm=async()=>{try{if(!window.myAPI){console.warn("API not available for fetching draft orders");return}const b=await window.myAPI.getOrdersByStatus("draft");if(b&&b.success){const E=b.data||[],xe=(await Promise.all(E.map(async je=>{if(!je||!je.id)return console.warn("Invalid order found:",je),null;let pe=[];try{const Ue=await window.myAPI.getOrderDetailsByOrderId(je.id);console.log(`Order details for draft ${je.id}:`,Ue),Ue&&Ue.success&&Array.isArray(Ue.data)&&(pe=Ue.data.filter(tt=>tt&&typeof tt=="object"&&tt.food_id&&typeof tt.quantity=="number").map(tt=>{let yt=null,Ot=null;try{tt.variation&&(yt=JSON.parse(tt.variation))}catch(It){console.error("Error parsing variations:",It),yt=null}try{tt.add_ons&&(Ot=JSON.parse(tt.add_ons))}catch(It){console.error("Error parsing addons:",It),Ot=null}return{id:tt.food_id,food:{id:tt.food_id,name:tt.food_details||"Unknown Food",price:tt.price||0},quantity:tt.quantity||1,variations:yt,adons:Ot,notes:tt.item_note||null,totalPrice:(tt.price||0)*(tt.quantity||1)}}))}catch(Ue){console.error(`Error fetching order details for order ${je.id}:`,Ue),pe=[]}return{id:je.id,databaseId:je.id,orderNumber:je.order_number||`draft_id${je.id}`,items:pe,customer:{name:je.draft_name||"Unknown",phone:"N/A"},total:je.order_amount||0,coupon:null,orderType:"Draft",table:"None",waiter:"N/A",status:"Draft",placedAt:je.created_at||new Date().toISOString(),totalItems:pe.reduce((Ue,tt)=>Ue+(tt&&tt.quantity?tt.quantity:0),0),subTotal:(je.order_amount||0)-(je.total_tax_amount||0),discount:je.discount_amount||0,totalDiscount:je.discount_amount||0,tax:je.total_tax_amount||0,charge:0,tips:0,totalPayable:je.order_amount||0,draftName:je.draft_name||"Unknown"}}))).filter(je=>je!==null);Ei(xe),console.log("Fetched draft orders:",xe)}}catch(b){console.error("Error fetching draft orders:",b)}},cm=async b=>{if(Ct.length===0){n("Please add items to cart before creating draft");return}try{if(console.log("Creating draft order for customer:",b),!window.myAPI){n("API not available. Please refresh the page.");return}const E=pr(),K=Er(),xe=rr(),je=Tr(),pe=await om(),Ue={customer_id:F?.id||null,order_amount:je,coupon_discount_amount:xe,coupon_discount_title:Pt?.title||null,payment_status:"pending",order_status:"draft",total_tax_amount:K,payment_method:null,delivery_address_id:null,coupon_code:Pt?.code||null,order_note:null,order_type:"draft",restaurant_id:1,delivery_charge:0,additional_charge:0,discount_amount:xe,tax_percentage:gr(),scheduled:0,schedule_at:null,failed:0,refunded:0,isdeleted:0,issyncronized:0,table_details:null,draft_name:b,order_number:pe},tt=await window.myAPI.createOrder(Ue);if(!tt.success){n("Failed to create draft order: "+tt.message);return}const yt=tt.id;console.log("Draft order created successfully with ID:",yt),console.log("Cart items before creating order details:",Ct),console.log("Cart items structure:",Ct.map(vt=>({id:vt.id,foodId:vt.food?.id,foodName:vt.food?.name,price:vt.food?.price,quantity:vt.quantity,totalPrice:vt.totalPrice,hasVariations:!!vt.variations,hasAdons:!!vt.adons})));const Ot=Ct.filter(vt=>{if(vt.isCustomPizza){const Bt=vt&&vt.quantity&&vt.price;return Bt||console.warn("Filtered out invalid custom pizza item:",vt),Bt}if(vt.isCustomFood){const Bt=vt&&vt.quantity&&vt.price&&vt.customFoodName;return Bt||console.warn("Filtered out invalid custom food item:",vt),Bt}const bt=vt&&vt.food&&vt.food?.id&&vt.quantity&&vt.food?.price;return bt||console.warn("Filtered out invalid cart item:",vt),bt}).map(vt=>{if(vt.isCustomPizza){const Bt=JSON.stringify({type:"custom_pizza",name:"Split Pizza",size:vt.size,slices:vt.slices,price:vt.price,note:vt.customNote,selectedPizzas:vt.selectedPizzas,flavorIngredients:vt.flavorIngredients,sliceColors:vt.sliceColors}),Qt={order_id:yt,food_id:0,quantity:vt.quantity,price:vt.price,food_details:Bt,item_note:vt.customNote,variation:null,add_ons:null,ingredients:JSON.stringify(vt.flavorIngredients),discount_on_food:0,discount_type:null,tax_amount:Ta(vt.price),total_add_on_price:0,issynicronized:0,isdeleted:0,iscreateyourown:1,isopen:0};return console.log("Created custom pizza order detail object:",Qt),Qt}if(vt.isCustomFood){const Bt=JSON.stringify({type:"custom_food",name:vt.customFoodName,price:vt.price,note:vt.customFoodNote,ingredients:vt.customFoodIngredients}),Qt={order_id:yt,food_id:0,quantity:vt.quantity,price:vt.price,food_details:Bt,item_note:vt.customFoodNote,variation:null,add_ons:null,ingredients:JSON.stringify(vt.customFoodIngredients),discount_on_food:0,discount_type:null,tax_amount:Ta(vt.price),total_add_on_price:0,issynicronized:0,isdeleted:0,iscreateyourown:0,isopen:1};return console.log("Created custom food order detail object:",Qt),Qt}const bt={order_id:yt,food_id:vt.food?.id||0,quantity:vt.quantity,price:vt.food?.price||0,food_details:vt.food?.name||null,item_note:null,variation:vt.variations?JSON.stringify(vt.variations):null,add_ons:vt.adons?JSON.stringify(vt.adons):null,discount_on_food:0,discount_type:null,tax_amount:0,total_add_on_price:0,issynicronized:0,isdeleted:0};return console.log("Created order detail object:",bt),bt});console.log("Testing API availability..."),console.log("window.myAPI.createOrderDetail exists:",typeof window.myAPI.createOrderDetail),console.log("window.myAPI.createMultipleOrderDetails exists:",typeof window.myAPI.createMultipleOrderDetails),console.log("Creating order details for draft order:",Ot);let It=0;if(Ot.length>0)try{console.log("Using createMultipleOrderDetails...");const vt=await window.myAPI.createMultipleOrderDetails(Ot);if(console.log("Batch API response:",vt),vt&&vt.success)console.log("Order details created successfully in batch:",vt),It=vt.count||Ot.length;else{console.error("Failed to create order details in batch:",vt),console.log("Falling back to individual creation...");for(const bt of Ot)try{console.log("Creating order detail individually:",bt);const Bt=await window.myAPI.createOrderDetail(bt);console.log("Individual API response:",Bt),Bt&&Bt.success?(console.log("Order detail created successfully:",Bt),It++):console.error("Failed to create order detail:",Bt)}catch(Bt){console.error("Error creating order detail:",Bt),console.error("Error stack:",Bt.stack)}}}catch(vt){console.error("Error in batch creation:",vt),console.error("Error stack:",vt.stack)}else console.log("No order details to create");if(console.log(`Created ${It} out of ${Ot.length} order details`),It>0)try{const vt=await window.myAPI.getOrderDetailsByOrderId(yt);vt&&vt.success&&console.log(`Verification: Found ${vt.data.length} order details for draft order ${yt}`)}catch(vt){console.error("Error verifying order details:",vt)}const ts={id:yt,databaseId:yt,orderNumber:pe,items:[...Ct],customer:F||{name:b,phone:"N/A"},total:je,coupon:Pt,orderType:"Draft",table:"None",waiter:"N/A",status:"Draft",placedAt:new Date().toISOString(),totalItems:Ct.reduce((vt,bt)=>vt+bt.quantity,0),subTotal:E,discount:xe,totalDiscount:xe,tax:K,charge:0,tips:0,totalPayable:je,draftName:b};Ei(vt=>[ts,...vt]),r("Draft order created successfully!","success"),Ts(),Da("In Store")}catch(E){console.error("Error creating draft order:",E),console.error("Error details:",E.message,E.stack),n("Failed to create draft order: "+E.message)}},dm=async b=>{hn(b),Hi(!0)},um=async b=>{try{if(console.log("Deleting draft order:",b),!window.myAPI){n("API not available. Please refresh the page.");return}const E=await window.myAPI.deleteOrder(b);if(!E.success){n("Failed to delete draft order: "+E.message);return}Ei(K=>K.filter(xe=>xe.databaseId!==b)),r("Draft order deleted successfully!")}catch(E){console.error("Error deleting draft order:",E),n("Failed to delete draft order: "+E.message)}},gd=async()=>{try{if(console.log("Deleting all draft orders"),!window.myAPI){n("API not available. Please refresh the page.");return}const b=await window.myAPI.getOrdersByStatus("draft");if(!b.success){n("Failed to fetch draft orders: "+b.message);return}const E=b.data||[];if(E.length===0){n("No draft orders to delete");return}let K=0,xe=0;for(const je of E)try{const pe=await window.myAPI.deleteOrder(je.id);pe.success?K++:(xe++,console.error(`Failed to delete draft ${je.id}:`,pe.message))}catch(pe){xe++,console.error(`Error deleting draft ${je.id}:`,pe)}Ei([]),xe===0?r(`Successfully deleted ${K} draft orders!`):n(`Deleted ${K} draft orders, but failed to delete ${xe} orders.`)}catch(b){console.error("Error deleting all draft orders:",b),n("Failed to delete all draft orders: "+b.message)}},mm=async()=>{if(!mn){n("No draft order selected for conversion");return}try{if(console.log("Converting draft order to regular order:",mn),!window.myAPI){n("API not available. Please refresh the page.");return}let b="instore";ma==="Table"?b="table":ma==="Collection"?b="collection":ma==="Delivery"?b="delivery":ma==="In Store"&&(b="instore");let E=null,K=[];if(ma==="Table"&&(Aa||it.length>0)){if(Aa){const tt=Re.find(yt=>yt.id.toString()===Aa);tt&&(E=JSON.stringify({tables:[{id:tt.id,table_no:tt.table_no,floor_name:tt.floor_name,persons:ra||tt.seat_capacity||4}],total_persons:ra||tt.seat_capacity||4}),K.push(tt.id))}if(it.length>0){const tt=it.map(yt=>{const Ot=Re.find(It=>It.id.toString()===yt.id);return{id:Ot?.id||yt.id,table_no:Ot?.table_no||yt.tableNo,floor_name:Ot?.floor_name||yt.floor,persons:yt.persons||Ot?.seat_capacity||4}});E=JSON.stringify({tables:tt,total_persons:tt.reduce((yt,Ot)=>yt+(Ot.persons||0),0)}),K=tt.map(yt=>yt.id)}}let xe="pending";switch(xn){case"New":xe="new";break;case"In Progress":xe="in_progress";break;case"Ready":xe="ready";break;case"On the way":xe="on_the_way";break;case"Delivered":xe="delivered";break;case"Completed":xe="completed";break;case"Pending":xe="pending";break;case"Complete":xe="completed";break;default:xe=xn.toLowerCase().replace(" ","_")}const je={order_type:b,order_status:xe,table_details:E};console.log("Updating draft order with data:",je);const pe=await window.myAPI.updateOrder(mn.databaseId,je);if(!pe.success){n("Failed to convert draft order: "+pe.message);return}if(K.length>0)try{console.log("Reserving tables for converted order:",K);const tt=await window.myAPI.tableUpdateMultipleStatuses(K,"Reserved");tt.success?console.log("Tables reserved successfully for converted order:",tt.message):console.warn("Failed to reserve tables for converted order:",tt.message)}catch(tt){console.error("Error reserving tables for converted order:",tt)}const Ue={...mn,orderType:ma,status:"Pending",table:(()=>{if(ma==="Table"){if(Aa){const tt=Re.find(yt=>yt.id.toString()===Aa);return tt?`Table ${tt.table_no}`:Aa}else if(it.length>0)return it.map(tt=>`Table ${tt.tableNo}`).join(", ")}return"None"})(),isDraft:!1};Dn(tt=>tt.map(yt=>yt.databaseId===mn.databaseId?Ue:yt)),Hi(!1),hn(null),ni("In Store"),va(""),Kr(""),xr(""),r("Draft order converted to regular order successfully!","success")}catch(b){console.error("Error converting draft order:",b),console.error("Error details:",b.message,b.stack),n("Failed to convert draft order: "+b.message)}},hm=async()=>{if(Ct.length===0){n("Please add items to cart before proceeding to payment");return}_()&&(nc(),Rn(!0),Ar(!0))},pd=async b=>{if(console.log("Loading food image:",b),!b||!b.startsWith("uploads/"))return console.log("Invalid image path:",b),null;try{const E=await window.myAPI.getFoodImage(b);if(console.log("Image loading result:",E),E&&E.success)return E.data;console.log("Image loading failed:",E?.message)}catch(E){console.error("Error loading food image:",E)}return null},fm=({food:b})=>{const[E,K]=v.useState(null),[xe,je]=v.useState(!0);return v.useEffect(()=>{(async()=>{if(je(!0),b&&b.image){const Ue=await pd(b.image);K(Ue)}else K(null);je(!1)})()},[b?.image]),xe?e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400 text-xs",children:"Loading..."})}):E?e.jsx("img",{src:E,alt:b?.name||"Food",className:"w-full h-full object-cover",onError:()=>K(null)}):e.jsx("img",{src:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=400&fit=crop&crop=center",alt:b?.name||"Food",className:"w-full h-full object-cover"})},xm=({item:b})=>{const[E,K]=v.useState(null),[xe,je]=v.useState(!0);return v.useEffect(()=>{(async()=>{if(je(!0),b.image){const Ue=await pd(b.image);K(Ue)}else K(null);je(!1)})()},[b.image]),e.jsxs("div",{className:"bg-white border border-gray-200 shadow-lg hover:shadow-xl transition-all overflow-hidden transform hover:-translate-y-1 cursor-pointer",children:[e.jsx("div",{className:"h-[88px] relative",children:xe?e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400 text-xs",children:"Loading..."})}):E?e.jsx("img",{src:E,alt:b?.name||"Food",className:"w-full h-[100%] object-cover",onError:()=>K(null)}):e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400 text-xs",children:"No Image"})})}),e.jsx("h3",{className:"font-semibold text-gray-800 text-md mt-2 mb-1 text-center",children:b?.name||"Unknown Food"}),e.jsxs("div",{className:"flex justify-between p-2 items-center",children:[e.jsx("div",{className:"flex flex-col",children:b.discount&&b.discount>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-gray-400 font-medium text-[12px] line-through",children:["€",b.price?.toFixed(2)||"0.00"]}),e.jsxs("p",{className:"text-green-600 font-semibold text-md",children:["€",(b.price-b.discount).toFixed(2)||"0.00"]})]}):e.jsxs("p",{className:"text-gray-600 font-semibold text-md mt-1",children:["€",b.price?.toFixed(2)||"0.00"]})}),e.jsx("button",{className:"mt-1 w-6 h-6 flex items-center justify-center rounded-full bg-primary border-2 border-primary text-white cursor-pointer",title:"Add",onClick:()=>ii(b),children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:e.jsx("path",{d:"M10 4v12M4 10h12",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})},xf=()=>e.jsx("div",{className:"flex-1 overflow-y-auto py-4 px-2",children:kt?e.jsx("div",{className:"text-center py-8"}):de!==dt?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Searching..."})}):Ze.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-2 gap-y-4",children:Ze.map(b=>e.jsx(xm,{item:b},b.id))}):dt.trim()!==""?e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:"text-gray-500 text-sm",children:['No foods found matching "',dt,'"']}),e.jsx("div",{className:"text-gray-400 text-xs mt-2",children:"Try a different search term"})]}):Y?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No foods found in this category"}),e.jsxs("div",{className:"text-gray-400 text-xs mt-2",children:["Category: ",Y.name]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"Select a category to view foods"}),e.jsxs("div",{className:"text-gray-400 text-xs mt-2",children:["Categories loaded: ",J.length]})]})}),tc=()=>{if(!V?.variations)return!0;for(const b of V.variations){const E=A[b.id];if(b.is_required&&!E)return!1;if(E){const K=Array.isArray(E)?E.length:1;if(b.min&&K<b.min||b.max&&K>b.max)return!1}}return!0},oi=()=>{qc(!0),Fl(!1),Oo(""),Ja([]),_r(null);const b=_t?_t.items:[];An(b.map(E=>({...E,splitQuantity:0,isSelected:!1}))),Ku(0),Yc(0),Ti(0)},sc=()=>{qc(!1),Oo(""),An([]),Ja([]),_r(null),Ku(0),Yc(0),Ti(0)},yd=()=>{if(!Za||parseInt(Za)<=0){n("Please enter a valid number of splits");return}const b=parseInt(Za),E=dn();if(b>E){n(`Maximum ${E} splits allowed based on total quantity`);return}const K=["Walk-in Customer","Dona M. Leighty 408-230-51","Donld PB 432226663","Gustavo J. Weitz 256-537-96","Mr Joe 231654849","Mr. Heri 523154215","John Smith 555-1234","Jane Doe 555-5678","Mike Johnson 555-9012","Sarah Wilson 555-3456"],xe=Array.from({length:b},(je,pe)=>({id:pe+1,customer:K[pe]||`Customer ${pe+1}`,items:[],subtotal:0,tax:0,discount:0,charge:0,tips:0,total:0}));Ja(xe),_r(xe[0]),r(`Created ${b} split bills successfully!`,"success")},ac=(b,E)=>{const K=Fa.find(je=>je.id===b);if(!K)return;if(Qi(b)<=0){n("No more quantity available for this item");return}Ja(je=>je.map(pe=>{if(pe.id===E){if(pe.items.find(tt=>tt.food?.id===K.food?.id))return{...pe,items:pe.items.map(tt=>tt.food?.id===K.food?.id?{...tt,quantity:(tt.quantity||0)+1,totalPrice:(tt.totalPrice||0)/(tt.quantity||1)*((tt.quantity||0)+1)}:tt)};{const tt={...K,quantity:1};return{...pe,items:[...pe.items,tt]}}}return pe})),vd(E)},tl=(b,E)=>{const K=Fa.find(xe=>xe.id===b);K&&(Ja(xe=>xe.map(je=>{if(je.id===E){const pe=je.items.find(Ue=>Ue.food?.id===K.food?.id);if(pe)return pe.quantity>1?{...je,items:je.items.map(Ue=>Ue.food?.id===K.food?.id?{...Ue,quantity:(Ue.quantity||0)-1,totalPrice:(Ue.totalPrice||0)/(Ue.quantity||1)*((Ue.quantity||0)-1)}:Ue)}:{...je,items:je.items.filter(Ue=>Ue.food?.id!==K.food?.id)}}return je})),vd(E))},bd=(b,E)=>{const K=Fa.find(pe=>pe.id===b);if(!K)return 0;const xe=dr.find(pe=>pe.id===E);if(!xe)return 0;const je=xe.items.find(pe=>pe.food?.id===K.food?.id);return je&&je.quantity||0},Qi=b=>{const E=Fa.find(xe=>xe.id===b);if(!E)return 0;const K=dr.reduce((xe,je)=>{if(je.paid)return xe;const pe=je.items.find(Ue=>Ue.food?.id===E.food?.id);return xe+(pe&&pe.quantity||0)},0);return Math.max(0,(E.quantity||0)-K)},li=()=>{if(!Fa||Fa.length===0)return!1;const b=Fa.filter(E=>E.quantity>0);return b.length===0?!0:b.every(E=>Qi(E.id)===0)},vd=b=>{Ja(E=>E.map(K=>{if(K.id===b){const xe=K.items.reduce((Ue,tt)=>Ue+(tt.totalPrice||0),0),je=Ta(xe),pe=xe+je+(K.charge||0)+(K.tips||0)-(K.discount||0);return{...K,subtotal:xe,tax:je,total:pe}}return K}))},gm=(b,E)=>{Ja(K=>K.map(xe=>xe.id===b?{...xe,customer:E}:xe))},pm=b=>{const E=dr.find(K=>K.id===b);if(Ja(K=>K.filter(xe=>xe.id!==b)),Wt?.id===b){const K=dr.filter(xe=>xe.id!==b);_r(K[0]||null)}E?.paid},jd=()=>{Ja(b=>b.map(E=>{const K=E.items.reduce((pe,Ue)=>pe+(Ue.totalPrice||0),0),xe=Ta(K),je=K+xe+(E.charge||0)+(E.tips||0)-(E.discount||0);return{...E,subtotal:K,tax:xe,total:je}}))},wd=()=>{const b=qs?yr().total:Wt?Ha():Tr(),E=Lo.reduce((K,xe)=>K+parseFloat(xe.amount),0);return Math.max(0,b-E)},Nd=()=>{if(!Bi||parseFloat(Bi)<=0){n("Please enter a valid payment amount");return}const b={method:Fi,amount:parseFloat(Bi),timestamp:new Date().toISOString()};ba(E=>[...E,b]),mr(""),hr(""),Zs("")},rc=b=>{if(mr(b),hr(b),b){const E=Ha(),K=parseFloat(b)-E;Zs(K>0?K.toFixed(2):"0.00")}else Zs("0.00")},Sd=b=>{if(hr(b),mr(b),b){const E=qs?yr().total:Wt?Ha():Tr(),K=parseFloat(b)-E;Zs(K>0?K.toFixed(2):"0.00")}else Zs("0.00")},Cd=()=>{Li("Cash"),mr(""),hr(""),Zs(""),ba([]),La(""),qr(!1),Tn("EUR"),ai(""),_r(null),Yi()},gf=()=>{Li("Cash"),mr(""),hr(""),Zs(""),ba([]),La(""),qr(!1),Tn("EUR"),ai(""),Yi()},nc=()=>{Li("Cash"),mr(""),hr(""),Zs(""),ba([]),La(""),qr(!1),Tn("EUR"),ai(""),_r(null),ms(null),Yi()},yr=()=>{if(!qs)return{subtotal:0,tax:0,total:0};const E=(Ct.length>0?Ct:_t?.items||[]).reduce((pe,Ue)=>pe+(parseFloat(Ue.totalPrice)||0),0),K=Ta(E);let xe=0;Pt&&(Pt.discountType==="percentage"?(xe=E*(Pt.discount/100),Pt.maxDiscount>0&&(xe=Math.min(xe,Pt.maxDiscount))):xe=Pt.discount),Zc&&(xe+=parseFloat(Zc)||0);const je=E+K-xe;return{subtotal:E,tax:K,discount:xe,total:je}},ic=[{code:"EUR",symbol:"€",name:"Euro"},{code:"USD",symbol:"$",name:"US Dollar"}],Or=()=>{const b=ic.find(E=>E.code===Bo);return b?b.symbol:"€"},oc=()=>{if(console.log("calculateSplitBillSubtotal - selectedSplitBill:",Wt),!Wt)return 0;const b=Wt.subtotal||0;return console.log("calculateSplitBillSubtotal - returning:",b),b},lc=()=>Wt&&Wt.tax||0,sl=()=>{if(!Wt)return 0;const b=Wt.discount||0;let E=0;if(Pt){const K=Wt.subtotal||0;Pt.discountType==="percentage"?(E=K*(Pt.discount/100),Pt.maxDiscount>0&&(E=Math.min(E,Pt.maxDiscount))):E=Pt.discount}return b+E},kd=()=>Wt&&Wt.charge||0,cc=()=>Wt&&Wt.tips||0,Ha=()=>{if(console.log("calculateSplitBillTotal - selectedSplitBill:",Wt),!Wt)return 0;const b=Wt.subtotal||0,E=Wt.tax||0,K=Wt.charge||0,xe=Wt.tips||0,je=sl(),pe=b+E+K+xe-je;return console.log("calculateSplitBillTotal - returning:",pe),pe},_d=(b,E)=>{E.stopPropagation(),lf(K=>{const xe=new Set(K);return xe.has(b)?xe.delete(b):xe.add(b),xe})},dc=()=>{if(!_t){n("Please select an order to view details");return}ec(!0)},ym=()=>{ec(!1),Ri(!0)},Ad=()=>{if(window.print(),r("Payment processed successfully! Invoice printed successfully!"),Ri(!1),ti){const b=dr.find(E=>E.id===ti);Ja(E=>E.map(K=>K.id===ti?{...K,paid:!0}:K)),setTimeout(()=>{Ja(E=>{const K=E.filter(xe=>xe.id!==ti);return K.length===0?(qc(!1),_r(null)):(_r(K[0]),setTimeout(()=>jd(),100)),K}),b&&b.items.length>0&&An(E=>E.map(K=>{const xe=b.items.find(je=>je.food?.id===K.food?.id);if(xe){const je=Math.max(0,K.quantity-xe.quantity);return{...K,quantity:je}}return K})),Mi(null)},1e3)}},uc=(b,E)=>{E&&E.stopPropagation(),Ro(b),si((xe=>{switch(xe){case"In Store":return"New";case"Table":case"Dine In":case"Collection":case"Delivery":return"New";default:return"New"}})(b.orderType)),ur(!0)},bm=async()=>{if(ua)try{let b="pending",E=null;switch(Bs){case"New":b="new",E="placed_at";break;case"In Progress":b="in_progress",E="processing_date";break;case"Ready":b="ready",E="ready_date";break;case"On the way":b="on_the_way",E="ontheway";break;case"Delivered":b="delivered",E="delivered_date";break;case"Completed":b="completed",E="confirmed_date";break;case"Pending":b="pending",E=null;break;case"Complete":b="completed",E="done_date";break;case"Confirmed":b="confirmed",E="confirmed_date";break;case"Processing":b="processing",E="processing_date";break;case"Handover":b="handover",E=null;break;case"Picked Up":b="picked_up",E=null;break;case"Cooked":b="cooked",E=null;break;case"Canceled":b="canceled",E="canceled_date";break;default:b=Bs.toLowerCase().replace(" ","_"),Bs.toLowerCase().includes("new")?E="placed_at":Bs.toLowerCase().includes("confirmed")?E="confirmed_date":Bs.toLowerCase().includes("processing")||Bs.toLowerCase().includes("in_progress")?E="processing_date":Bs.toLowerCase().includes("ready")?E="ready_date":Bs.toLowerCase().includes("on_the_way")?E="ontheway":Bs.toLowerCase().includes("delivered")?E="delivered_date":Bs.toLowerCase().includes("canceled")?E="canceled_date":(Bs.toLowerCase().includes("done")||Bs.toLowerCase().includes("completed"))&&(E="done_date")}if(!ua.databaseId){Gu(Bs),r(`Order status set to ${Bs} for new orders!`),ur(!1),Ro(null),si("New");return}const K={order_status:b};E&&(K[E]=new Date().toISOString());const xe=await window.myAPI.updateOrder(ua.databaseId,K);if(!xe.success){n("Failed to update order status: "+xe.message);return}if((b==="completed"||b==="delivered")&&ua.databaseId)try{const Ue=await window.myAPI.getOrderById(ua.databaseId);if(Ue.success&&Ue.data.table_details){const tt=JSON.parse(Ue.data.table_details);if(tt&&tt.tables&&tt.tables.length>0){const yt=tt.tables.map(It=>It.id);console.log("Freeing tables:",yt);const Ot=await window.myAPI.tableUpdateMultipleStatuses(yt,"Free");Ot.success?console.log("Tables freed successfully:",Ot.message):console.warn("Failed to free tables:",Ot.message)}}}catch(Ue){console.error("Error freeing tables:",Ue)}const je=Bs.toLowerCase(),pe=je==="complete"||je==="completed"||je==="delivered"||je==="canceled"||je==="done"||je==="finished"||je==="closed";console.log("Status update debug:",{selectedStatus:Bs,normalizedStatus:je,shouldRemove:pe,orderId:ua.id}),pe?(console.log("Removing order from running orders:",ua.id),console.log("Current orders before removal:",Oi.length),Dn(Ue=>{console.log("Previous orders:",Ue.map(yt=>({id:yt.id,databaseId:yt.databaseId,status:yt.status})));const tt=Ue.filter(yt=>yt.id!==ua.id&&yt.databaseId!==ua.databaseId);return console.log("Orders after removal:",tt.length),console.log("Removed order details:",{targetId:ua.id,targetDatabaseId:ua.databaseId}),tt}),r(`Order ${Bs.toLowerCase()} and removed from running orders!`)):(console.log("Updating order status in list:",ua.id),Dn(Ue=>Ue.map(tt=>tt.id===ua.id||tt.databaseId===ua.databaseId?{...tt,status:Bs}:tt)),r(`Order status updated to ${Bs}!`)),ur(!1),Ro(null),si("New")}catch(b){console.error("Error updating order status:",b),n("Failed to update order status. Please try again.")}},vm=async()=>{if(!_t){n("Please select an order to modify");return}if(_t.payment_status==="paid"){const b=_t.status?.toLowerCase(),E=_t.orderType?.toLowerCase();if(!(E==="table"||E==="collection"||E==="instore"?b!=="completed":E==="delivery"?b!=="on_the_way"&&b!=="delivered"&&b!=="completed":!0)){n("Cannot modify order: Order status does not allow modification");return}}if(zt([]),ms(null),Ve(""),We(""),Me(""),T(null),qe(""),ot(""),ke([{id:1,tableId:""},{id:2,tableId:""}]),aa(null),g(1),P({}),ue([]),_t.items&&_t.items.length>0){console.log("Loading order items:",_t.items);const b=_t.items.map((E,K)=>{if(console.log("Processing item:",E),E.isCustomPizza)return{id:Date.now()+K,name:E.name,price:E.price,tax:E.tax,totalPrice:E.totalPrice,quantity:E.quantity,variations:{},adons:[],slices:E.slices,size:E.size,selectedPizzas:E.selectedPizzas,flavorIngredients:E.flavorIngredients,sliceColors:E.sliceColors,customNote:E.customNote,isCustomPizza:!0,addedAt:new Date().toISOString()};if(E.isCustomFood)return{id:Date.now()+K,name:E.name,price:E.price,tax:E.tax,totalPrice:E.totalPrice,quantity:E.quantity,variations:{},adons:[],customFoodName:E.customFoodName,customFoodNote:E.customFoodNote,customFoodIngredients:E.customFoodIngredients,isCustomFood:!0,addedAt:new Date().toISOString()};let xe={},je=[];try{typeof E.variations=="string"?xe=JSON.parse(E.variations):xe=E.variations||{},typeof E.adons=="string"?je=JSON.parse(E.adons):je=E.adons||[]}catch(pe){console.error("Error parsing variations/addons for item:",E,pe)}return console.log("Parsed variations:",xe),console.log("Parsed addons:",je),{id:Date.now()+K,food:E.food,variations:xe,adons:je,quantity:E.quantity,totalPrice:E.totalPrice,addedAt:new Date().toISOString()}});console.log("Cart items from order:",b),zt(b),Kt(Date.now()+b.length+1)}if(_t.customer&&(console.log("Loading customer:",_t.customer),T(_t.customer)),_t.orderType?(console.log("Loading order type from order:",_t.orderType),Da(_t.orderType),console.log("Order type set to:",_t.orderType)):console.log("No order type found in selectedPlacedOrder"),_t.table&&_t.table!=="None"){if(console.log("Loading table:",_t.table),_t.databaseId)try{const E=await window.myAPI.getOrderById(_t.databaseId);if(E.success&&E.data.table_details){const K=JSON.parse(E.data.table_details);if(K&&K.tables&&K.tables.length>0){console.log("Loading table details from database:",K);const xe=K.tables.map(Ue=>{const tt=Re.find(yt=>yt.id===Ue.id);return{id:Ue.id.toString(),tableNo:tt?.table_no||Ue.table_no,persons:Ue.persons||tt?.seat_capacity||4,floor:tt?.floor_name||Ue.floor_name}});Qe(xe),console.log("Loaded reserved tables from database:",xe);const je=K.tables[0],pe=Re.find(Ue=>Ue.id===je.id);pe&&(console.log("Found table from database:",pe),Me(pe.floor_name||"Floor 1"),Ve(pe.id.toString()),We(je.persons||pe.seat_capacity||4));return}}}catch(E){console.error("Error loading table details from database:",E)}const b=_t.table.match(/Table (\d+)/);if(b){const E=b[1],K=Re.find(xe=>xe.table_no.toString()===E);K?(console.log("Found table:",K),Me(K.floor_name||"Floor 1"),Ve(K.id.toString())):(console.log("Table not found, setting table name as is"),Ve(_t.table))}else Ve(_t.table)}_t.coupon&&(console.log("Loading coupon:",_t.coupon),ms(_t.coupon)),_t.waiter&&console.log("Loading waiter:",_t.waiter),Es(!0),Yr(_t.databaseId),_t.payment_status==="paid"?(Bl({payment_method:_t.payment_method,paid_amount:_t.order_amount||0}),Vi(!1),fn(!1)):(Bl(null),Vi(!1),fn(!1)),En(null),_t.orderType==="Collection"&&await Ji(),r("Order loaded for modification. You can now edit the items.")},pf=()=>{if(!_t){n("Please select an order to cancel");return}fr(!0),On("")},Zi=async(b=!0)=>{if(!_t){n("Please select an order to cancel");return}try{const E={order_status:"canceled"};if(b&&$i.trim()&&(E.cancellation_reason=$i.trim()),_t.databaseId){const K=await window.myAPI.updateOrder(_t.databaseId,E);if(!K.success){n("Failed to cancel order: "+K.message);return}try{const xe=await window.myAPI.getOrderById(_t.databaseId);if(xe.success&&xe.data.table_details){const je=JSON.parse(xe.data.table_details);if(je&&je.tables&&je.tables.length>0){const pe=je.tables.map(tt=>tt.id);console.log("Freeing tables due to cancellation:",pe);const Ue=await window.myAPI.tableUpdateMultipleStatuses(pe,"Free");Ue.success?console.log("Tables freed successfully after cancellation:",Ue.message):console.warn("Failed to free tables after cancellation:",Ue.message)}}}catch(xe){console.error("Error freeing tables after cancellation:",xe)}}Dn(K=>K.filter(xe=>xe.id!==_t.id)),fr(!1),On(""),En(null),r("Order canceled successfully!")}catch(E){console.error("Error canceling order:",E),n("Failed to cancel order. Please try again.")}},al=b=>{switch(b){case"Pending":return"bg-yellow-100 text-yellow-700";case"Ready":return"bg-blue-100 text-blue-700";case"Complete":return"bg-green-100 text-green-700";default:return"bg-yellow-100 text-yellow-700"}},Ji=async()=>{try{if(!window.myAPI){n("API not available");return}const b=await window.myAPI.getHotelInfo();if(!b.success){n("Failed to fetch hotel information");return}rf(b.data);const K=new Date().toISOString().split("T")[0];Mo(K),eo(b.data,K),Tl(!0)}catch(b){console.error("Error opening schedule modal:",b),n("Failed to open schedule modal")}},eo=(b,E)=>{if(!b.opening_time||!b.closeing_time){n("Hotel opening/closing times not configured");return}const K=new Date,je=new Date(E).toDateString()===K.toDateString(),pe=b.opening_time.split(":").slice(0,2).join(":"),Ue=b.closeing_time.split(":").slice(0,2).join(":"),tt=[],yt=parseInt(pe.split(":")[0]);parseInt(pe.split(":")[1]);const Ot=parseInt(Ue.split(":")[0]),It=parseInt(Ue.split(":")[1]);for(let ts=yt;ts<=Ot;ts++)for(let vt=0;vt<60&&!(ts===Ot&&vt>=It);vt+=5){const bt=`${ts.toString().padStart(2,"0")}:${vt.toString().padStart(2,"0")}`,Bt=new Date(E+"T"+bt);je&&Bt<=K||tt.push(bt)}Hu(tt)},mc=b=>{Mo(b),To(""),Ai&&eo(Ai,b)},jm=b=>{To(b),Il(!1),Rl("")},wm=b=>{Rl(b),Il(!0),To("")},to=()=>{const b=Vc?Di:$u;if(!b){n("Please select a time");return}if(Vc){if(!/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(Di)){n("Please enter a valid time in HH:MM format");return}if(Ai){const xe=Ai.opening_time.split(":").slice(0,2).join(":"),je=Ai.closeing_time.split(":").slice(0,2).join(":");if(Di<xe||Di>je){n(`Time must be between ${xe} and ${je}`);return}const pe=new Date;if(new Date(Ml).toDateString()===pe.toDateString()){const yt=pe.toTimeString().slice(0,5);if(Di<=yt){n("Custom time must be in the future for today");return}}}}const E=`${Ml}T${b}:00`;_i(E),Tl(!1),r(`Order scheduled for ${Ml} at ${b}`)},Nm=()=>{Tl(!1),To(""),Mo(""),Rl(""),Il(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between gap-2 h-full",children:[e.jsxs("div",{className:"flex w-[20%] flex-col bg-[#ffffff] border-r border-gray-200 shadow-lg rounded-xl pb-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"font-bold text-gray-800",children:"Active Orders"}),e.jsxs("button",{onClick:()=>{h(),Wu()},className:"text-[#715af3] text-[11px] font-bold bg-white border border-gray-300 rounded-lg p-2 cursor-pointer hover:text-blue-800 flex items-center gap-2 shadow-[0_2px_4px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] hover:shadow-[0_1px_2px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] active:shadow-[0_1px_2px_rgba(0,0,0,0.1)_inset] active:translate-y-[1px] transition-all duration-150",children:[e.jsx(ug,{size:12}),"Refresh"]})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:14}),e.jsx("input",{type:"text",name:"runningOrdersSearchQuery",placeholder:"Search Active Orders",value:Le,onChange:b=>ve(b.target.value),onFocus:b=>fa(b,"runningOrdersSearchQuery"),onClick:b=>na(b,"runningOrdersSearchQuery"),onBlur:b=>Ln(b,"runningOrdersSearchQuery"),className:"w-full pl-8 text-sm font-semibold pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsx("div",{className:"flex-1 space-y-3 overflow-y-auto",children:Oi.length>0?Oi.filter(b=>{if(!Le.trim())return!0;const E=Le.toLowerCase().trim();return b.orderNumber.toString().toLowerCase().includes(E)}).map(b=>{const E=new Date(b.placedAt),K=cf-E,xe=Math.floor(K/(1e3*60)),je=Math.floor(K/(1e3*60*60)),pe=Math.floor(K/(1e3*60*60*24));let Ue;pe>0?Ue=`${pe} day${pe>1?"s":""} ago`:je>0?Ue=`${je} hour${je>1?"s":""} ago`:xe>0?Ue=`${xe} min${xe>1?"s":""} ago`:Ue="Just now";const yt=(Ot=>{switch(Ot){case"Dine In":return{bgColor:"bg-blue-100",textColor:"text-blue-700",icon:e.jsx(ji,{size:12})};case"Collection":return{bgColor:"bg-orange-100",textColor:"text-orange-700",icon:e.jsx(pu,{size:12})};case"Delivery":return{bgColor:"bg-green-100",textColor:"text-green-700",icon:e.jsx(So,{size:12})};case"In Store":return{bgColor:"bg-purple-100",textColor:"text-purple-700",icon:e.jsx(Ah,{size:12})};case"Draft":return{bgColor:"bg-yellow-100",textColor:"text-yellow-700",icon:e.jsx(Oc,{size:12})};default:return{bgColor:"bg-gray-100",textColor:"text-gray-700",icon:e.jsx(q0,{size:12})}}})(b.orderType);return e.jsxs("div",{className:`relative bg-white border border-gray-200 hover:border-primary hover:shadow-md rounded-lg p-4 cursor-pointer transition-all duration-200 ${_t?.id===b.id?"border-primary b-2 bg-primaryExtraLight shadow-md":"hover:bg-gray-50"}`,onClick:()=>En(b),children:[e.jsx("div",{className:"absolute top-4 right-3 cursor-pointer",onClick:Ot=>_d(b.id,Ot),children:Gc.has(b.id)?e.jsx($x,{size:20,className:"text-blue-500"}):e.jsx(hs,{size:20,className:"text-gray-400"})}),e.jsx("div",{className:`flex items-start justify-between ${Gc.has(b.id)?"bg-blue-50 p-3 border-b border-blue-200  -m-3 rounded-t-lg":""}`,children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 text-sm",children:["#",b.orderNumber]}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${yt.bgColor} ${yt.textColor}`,children:[yt.icon,b.orderType==="Dine In"?`${b.orderType} - ${b.table}`:b.orderType]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:b.customer.name}),e.jsx("p",{className:"text-xs text-gray-500",children:Ue})]}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${al(b.status||"Pending")}`,children:b.status||"PENDING"})]})]})}),Gc.has(b.id)&&e.jsxs("div",{className:" pt-4 ",children:[e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Order Items:"}),b.items.map((Ot,It)=>e.jsxs("div",{className:"flex justify-between items-start text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:Ot.food?.name||"Unknown Food"}),e.jsxs("span",{className:"text-blue-600 ml-2",children:["x",Ot.quantity]})]}),Ot.variations&&Object.keys(Ot.variations).length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Object.entries(Ot.variations).map(([ts,vt])=>{const bt=V?.variations?.find(Ma=>Ma.id===parseInt(ts)),Bt=bt?.name||ts,Qt=Array.isArray(vt)?vt:[vt];return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-gray-500",children:["• ",Bt,":"]}),e.jsx("span",{className:"text-gray-700",children:Qt.map((Ma,gs)=>{const Ws=bt?.options?.find(nr=>nr.id===parseInt(Ma));return e.jsxs("span",{children:[Ws?.option_name||Ma,gs<Qt.length-1?", ":""]},Ma)})})]},ts)})}),Ot.adons&&Ot.adons.length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Ot.adons.map((ts,vt)=>{const bt=V?.adons?.find(Ma=>Ma.id===parseInt(ts)),Bt=bt?.name||ts,Qt=bt?.price;return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"• Addon:"}),e.jsx("span",{className:"text-gray-700",children:Bt}),Qt&&e.jsxs("span",{className:"text-gray-500",children:["(+€",Qt.toFixed(2),")"]})]},vt)})})]}),e.jsxs("span",{className:"font-medium text-gray-800",children:["€",Ot.totalPrice.toFixed(2)]})]},It))]}),e.jsx("div",{className:"border-t border-gray-200 pt-2 mb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"Total:"}),e.jsxs("span",{className:"text-lg font-bold text-gray-800",children:["€",b.total.toFixed(2)]})]})}),e.jsx("div",{className:"flex gap-3",children:b.isDraft?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"flex-1 bg-gray-600 text-white text-sm font-medium py-1.5 px-2 rounded-lg hover:bg-gray-700 transition-colors",onClick:Ot=>{Ot.stopPropagation(),En(b)},children:"View Details"}),e.jsx("button",{className:"flex-1 bg-green-600 text-white text-sm font-medium py-1.5 px-2 rounded-lg hover:bg-green-700 transition-colors",onClick:Ot=>{Ot.stopPropagation(),dm(b)},children:"Convert to Order"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"flex-1 bg-gray-600 text-white text-sm font-medium py-1.5 px-2 rounded-lg hover:bg-gray-700 transition-colors",onClick:Ot=>{Ot.stopPropagation(),En(b)},children:"View Details"}),e.jsx("button",{className:"flex-1 bg-blue-600 text-white text-sm font-medium py-1.5 px-2 rounded-lg hover:bg-blue-700 transition-colors",onClick:Ot=>{Ot.stopPropagation(),uc(b,Ot)},children:"Mark As"})]})})]})]},b.id)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No active orders"}),e.jsx("div",{className:"text-gray-400 text-xs mt-2",children:"Place orders to see active orders here"})]})})]}),e.jsxs("div",{className:"flex justify-center p-2",children:[Ut&&e.jsx(e.Fragment,{}),e.jsxs("div",{className:"flex flex-col gap-2 text-[10px] w-full",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{"data-invoice-button":!0,onClick:()=>Fl(!Pl),disabled:!_t,className:`flex-1 h-12 text-[13px] font-bold rounded-lg px-3 cursor-pointer flex items-center justify-center gap-1 shadow-[0_2px_4px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] hover:shadow-[0_1px_2px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] active:shadow-[0_1px_2px_rgba(0,0,0,0.1)_inset] active:translate-y-[1px] transition-all duration-150 ${_t?"bg-[#010101] text-white":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:[e.jsx(q0,{size:14}),"BILL"]}),e.jsxs("button",{onClick:()=>{_t&&(Pi(!1),Ri(!0))},disabled:!_t,className:`flex-1 h-12 text-[13px] font-bold rounded-lg px-3 cursor-pointer flex items-center justify-center gap-1 shadow-[0_2px_4px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] hover:shadow-[0_1px_2px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] active:shadow-[0_1px_2px_rgba(0,0,0,0.1)_inset] active:translate-y-[1px] transition-all duration-150 ${_t?"bg-[#4d36eb] text-white":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:[e.jsx(Oc,{size:14}),"INVOICE"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:dc,disabled:!_t,className:`flex-1 text-[13px] h-12 font-bold rounded-lg px-3 cursor-pointer flex items-center justify-center gap-1 shadow-[0_2px_4px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] hover:shadow-[0_1px_2px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] active:shadow-[0_1px_2px_rgba(0,0,0,0.1)_inset] active:translate-y-[1px] transition-all duration-150 ${_t?"bg-[#4d36eb] text-white":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:[e.jsx(vn,{size:14}),"Details"]}),e.jsxs("button",{onClick:async()=>{try{await vm()}catch(b){console.error("Error modifying order:",b),n("Failed to modify order. Please try again.")}},disabled:!_t||Ut&&_t&&_t.databaseId===Xt,className:`flex-1 text-[13px] h-12 font-bold rounded-lg px-3 cursor-pointer flex items-center justify-center gap-1 shadow-[0_2px_4px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] hover:shadow-[0_1px_2px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] active:shadow-[0_1px_2px_rgba(0,0,0,0.1)_inset] active:translate-y-[1px] transition-all duration-150 ${_t&&!(Ut&&_t&&_t.databaseId===Xt)?"bg-[#f3be25] text-white hover:bg-[#e6b31e]":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,title:_t?Ut&&_t&&_t.databaseId===Xt?"Order is already being modified":"Modify order":"Select an order to modify",children:[e.jsx(ia,{size:14}),"Modify"]})]}),e.jsxs("button",{onClick:pf,disabled:!_t,className:`w-[70%] text-[13px] mx-auto h-12 font-bold rounded-lg px-3 flex items-center justify-center gap-2 shadow-[0_2px_4px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] hover:shadow-[0_1px_2px_rgba(0,0,0,0.1),0_1px_0_rgba(255,255,255,0.8)_inset] active:shadow-[0_1px_2px_rgba(0,0,0,0.1)_inset] active:translate-y-[1px] transition-all duration-150 ${_t?"bg-[#C42232] text-white cursor-pointer hover:bg-[#b01a28]":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:[e.jsx(St,{size:14}),"CANCEL ORDER"]})]})]}),Pl&&_t&&e.jsx("div",{"data-invoice-options":!0,className:"absolute bottom-37 left-10 transform -translate-x-7 bg-gray-200 rounded-lg p-2 shadow-lg z-10",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>{if(nc(),Rn(!1),_t&&_t.items){const b=_t.items.map((E,K)=>{let xe={},je=[];try{typeof E.variations=="string"?xe=JSON.parse(E.variations):xe=E.variations||{},typeof E.adons=="string"?je=JSON.parse(E.adons):je=E.adons||[]}catch(pe){console.error("Error parsing variations/addons for item:",E,pe)}return{id:Date.now()+K,food:E.food,variations:xe,adons:je,quantity:E.quantity,totalPrice:E.totalPrice,addedAt:new Date().toISOString()}});zt(b),Kt(Date.now()+b.length+1),_t.customer&&T(_t.customer),_t.coupon&&ms(_t.coupon)}Ar(!0),Fl(!1)},className:"w-32 bg-gray-300 text-black font-medium rounded px-3 py-2 text-center hover:bg-gray-400 transition-colors text-xs",children:"Single Pay"}),e.jsx("button",{onClick:oi,className:"w-32 bg-gray-300 text-black font-medium rounded px-3 py-2 text-center hover:bg-gray-400 transition-colors text-xs",children:"Split Bill"})]})})]}),e.jsxs("div",{className:"w-[40%] bg-white flex flex-col shadow-lg rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"py-3 px-2 border-b border-gray-200",children:[e.jsxs("div",{className:"relative mb-4 w-full",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx(jn,{className:"w-4 h-4 text-primary"})}),e.jsx("input",{type:"text",name:"searchQuery",placeholder:"Search Food Items",value:de,onChange:b=>De(b.target.value),onFocus:b=>fa(b,"searchQuery"),onClick:b=>na(b,"searchQuery"),onBlur:b=>Ln(b,"searchQuery"),className:`w-full pl-10 pr-4 py-2 text-sm bg-white placeholder:text-primary font-semibold border border-gray-300 rounded-xl z-10\r
      focus:outline-none focus:ring-2 focus:ring-primary`}),de&&e.jsx("button",{onClick:()=>De(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(St,{className:"w-4 h-4"})})]}),dt&&e.jsxs("div",{className:"mb-2 text-xs text-gray-600",children:["Found ",Ze.length," result",Ze.length!==1?"s":"",' for "',dt,'"']}),e.jsxs("div",{className:"flex items-center justify-between mb-2 border-b border-gray-200 pb-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-semibold text-gray-800 text-[16px]",children:"🍽 Food & Categories"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:dd,className:"bg-[#e53943] hover:bg-[#c62836] cursor-pointer text-white font-medium rounded-lg px-5 h-12 text-sm transition-colors",children:"Create Your Own"}),e.jsx("button",{onClick:ld,className:"bg-primary hover:bg-primaryLight cursor-pointer text-white font-medium rounded-lg px-5 h-12 text-sm transition-colors",children:"Open Order"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:Se?e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading categories..."}):J.length>0?J.map(b=>e.jsx("button",{className:`h-13 px-2 w-[120px] text-md font-semibold flex items-center justify-center gap-1 
                       btn-lifted transition-colors cursor-pointer ${Y?.id===b.id?"bg-white text-black border-2 border-primary":"bg-primary text-white hover:bg-primary/90"}`,onClick:()=>df(b),children:b.name},b.id)):e.jsx("div",{className:"text-gray-500 text-sm",children:"No categories found"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(xf,{})})]}),e.jsxs("div",{className:"w-[40%] bg-white rounded-lg flex flex-col",children:[Ut&&e.jsx(e.Fragment,{}),e.jsxs("div",{className:"px-2 py-2 flex-shrink-0 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[x("instore")&&e.jsxs("button",{onClick:()=>{if(Ut){o("Cannot change order type while modifying an existing order");return}Da("In Store"),Ve(""),We(""),Qe([]),_i("")},disabled:Ut,className:`px-3 py-1.5 h-10 text-[#666] text-base font-semibold rounded-lg border border-[#e0e0e0] flex items-center justify-center gap-1 
                          transition-colors cursor-pointer ${Ut?Vt==="In Store"?"bg-primary text-white cursor-not-allowed":"bg-gray-300 text-gray-500 cursor-not-allowed":Vt==="In Store"?"bg-primary text-white":"bg-white hover:bg-[#F8F9FA] hover:border-primary hover:border-2"}`,children:[e.jsx(mu,{size:14}),"In Store"]}),x("table")&&e.jsxs("button",{onClick:()=>{if(Ut){o("Cannot change order type while modifying an existing order");return}Da("Table"),_i(""),O(!0)},disabled:Ut,className:`px-3 py-1.5 h-10 text-[#666] text-base font-semibold rounded-lg border border-[#e0e0e0] flex items-center justify-center gap-1 
                          transition-colors cursor-pointer ${Ut?Vt==="Table"?"bg-primary text-white cursor-not-allowed":"bg-gray-300 text-gray-500 cursor-not-allowed":Vt==="Table"?"bg-primary text-white":"bg-white hover:border-primary hover:border-2 hover:bg-[#F8F9FA]"}`,children:[e.jsx(hg,{size:14}),"Table"]}),x("collection")&&e.jsxs("button",{onClick:()=>{if(Ut){o("Cannot change order type while modifying an existing order");return}Da("Collection"),Ve(""),We(""),Qe([]),R(!0)},disabled:Ut,className:`px-3 py-1.5 h-10 text-[#666] text-base font-semibold rounded-lg border border-[#e0e0e0] flex items-center justify-center gap-1 
                          transition-colors cursor-pointer ${Ut?Vt==="Collection"?"bg-primary text-white cursor-not-allowed":"bg-gray-300 text-gray-500 cursor-not-allowed":Vt==="Collection"?"bg-primary text-white":"bg-white hover:border-primary hover:border-2 hover:bg-[#F8F9FA]"}`,children:[e.jsx(yl,{size:14}),"Collection"]}),x("delivery")&&e.jsxs("button",{onClick:()=>{if(Ut){o("Cannot change order type while modifying an existing order");return}Da("Delivery"),Ve(""),We(""),Qe([]),_i(""),R(!0)},disabled:Ut,className:`px-3 py-1.5 h-10 text-[#666] text-base font-semibold rounded-lg border border-[#e0e0e0] flex items-center justify-center gap-1 
                           transition-colors cursor-pointer ${Ut?Vt==="Delivery"?"bg-primary text-white cursor-not-allowed":"bg-gray-300 text-gray-500 cursor-not-allowed":Vt==="Delivery"?"bg-primary text-white":"bg-white hover:border-primary hover:border-2 hover:bg-[#F8F9FA]"}`,children:[e.jsx(So,{size:14}),"Delivery"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("button",{onClick:Ji,className:`px-3 py-1.5 h-10 text-base text-[#666666] font-semibold rounded-lg border border-[#e0e0e0] flex items-center justify-center gap-1 
                        transition-colors cursor-pointer hover:border-[#007BFF] hover:border-2 ${Ol?"bg-primary text-white border-primary":"text-black hover:border-[#007BFF] hover:border-2 hover:bg-[#F8F9FA]"}`,children:[e.jsx($s,{size:14}),"Due to",Ol&&e.jsx("div",{})]}),e.jsxs("button",{onClick:()=>R(!0),className:`px-3 py-1.5 h-10 bg-[#007BFF] text-white text-base font-semibold rounded-lg border border-[#e0e0e0] flex items-center justify-center gap-1 \r
                       transition-colors cursor-pointer`,children:[e.jsx(Lc,{size:14}),"Customer"]}),e.jsxs("button",{onClick:()=>T(null),className:`px-3 py-1.5 h-10 text-base text-[#666666] font-semibold rounded-lg border border-[#e0e0e0] flex items-center justify-center gap-1 \r
                         transition-colors cursor-pointer hover:border-[#007BFF] hover:bg-[#F8F9FA] hover:border-2`,children:[!F&&e.jsx($1,{size:14}),F?F.name:"Walk In Customer"]}),e.jsxs("button",{onClick:()=>{if(Ct.length===0){n("Cart is already empty");return}_e(!0)},disabled:Ct.length===0||Ut,className:`flex justify-center bg-[#dc3545] items-center gap-2 text-white w-[100%] h-10 px-3 py-1.5 text-base font-semibold rounded-lg border border-[#e0e0e0] ${Ct.length>0&&!Ut?"cursor-pointer":"cursor-pointer hover:border-[#007BFF] hover:border-2"}`,children:[e.jsx(za,{size:14}),"Delete"]})]})]}),e.jsxs("div",{className:"bg-white flex flex-col mb-2 rounded-lg p-2 flex-1",children:[e.jsx("div",{className:"mt-3 border border-gray-200 rounded-lg flex flex-col flex-1 min-h-0",children:e.jsxs("table",{className:"w-full flex flex-col h-full",children:[e.jsx("thead",{className:"bg-gray-100 flex-shrink-0",children:e.jsxs("tr",{className:"grid grid-cols-[auto_100px_100px_100px] gap-2 text-sm font-medium text-gray-700 p-3",children:[e.jsx("th",{className:"text-left",children:"Items"}),e.jsx("th",{className:"text-center",children:"Qty"}),e.jsx("th",{className:"text-center",children:"Total"}),e.jsx("th",{className:"text-center",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white flex-1 overflow-y-auto",children:Ct.length>0?Ct.map(b=>e.jsxs("tr",{className:"grid grid-cols-[auto_100px_100px_100px] gap-2 items-center text-sm p-2 border-b border-gray-200",children:[e.jsx("td",{className:"text-gray-800 text-sm",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:b.isCustomPizza?"Split Pizza":b.isCustomFood?"Open Food":b.food?.name||"Unknown Food"}),b.isCustomPizza&&e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[e.jsxs("div",{children:[b.size,'" - ',b.slices," halves"]}),b.customNote&&e.jsxs("div",{children:["Note: ",b.customNote]}),e.jsxs("div",{children:["Price: €",b.price.toFixed(2)]})]}),b.isCustomFood&&e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[e.jsxs("div",{children:["Name: ",b.customFoodName]}),b.customFoodNote&&e.jsxs("div",{children:["Note: ",b.customFoodNote]}),b.customFoodIngredients&&b.customFoodIngredients.length>0&&e.jsxs("div",{children:["Ingredients: ",b.customFoodIngredients.map(E=>E.name).join(", ")]}),e.jsxs("div",{children:["Price: €",b.price.toFixed(2)]})]}),b.variations&&Object.keys(b.variations).length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Object.entries(b.variations).map(([E,K])=>{const xe=V?.variations?.find(Ue=>Ue.id===parseInt(E)),je=xe?.name||E,pe=Array.isArray(K)?K:[K];return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-gray-500",children:["• ",je,":"]}),e.jsx("span",{className:"text-gray-700",children:pe.map((Ue,tt)=>{const yt=xe?.options?.find(Ot=>Ot.id===parseInt(Ue));return e.jsxs("span",{children:[yt?.option_name||Ue,tt<pe.length-1?", ":""]},Ue)})})]},E)})}),b.adons&&b.adons.length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:b.adons.map((E,K)=>{const xe=V?.adons?.find(Ue=>Ue.id===parseInt(E)),je=xe?.name||E,pe=xe?.price;return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"• Addon:"}),e.jsx("span",{className:"text-gray-700",children:je}),pe&&e.jsxs("span",{className:"text-gray-500",children:["(+€",pe.toFixed(2),")"]})]},K)})})]})}),e.jsx("td",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center rounded",children:[e.jsx("button",{className:"text-primary flex items-center cursor-pointer justify-center transition-colors",onClick:()=>es(b.id,b.quantity-1),children:e.jsx(Vx,{size:15})}),e.jsx("span",{className:"w-8 text-center text-gray-800 py-1 text-sm",children:b.quantity}),e.jsx("button",{className:"flex items-center cursor-pointer justify-center text-primary transition-colors",onClick:()=>es(b.id,b.quantity+1),children:e.jsx(Ls,{size:15})})]})}),e.jsx("td",{className:"flex items-center justify-center",children:e.jsxs("span",{className:"text-gray-800",children:["€",b.totalPrice.toFixed(2)]})}),e.jsxs("td",{className:"flex items-center justify-center gap-2",children:[e.jsx(fl,{size:15,className:"text-primary cursor-pointer hover:text-primary-dark transition-colors",onClick:()=>Ys(b),title:"Edit item"}),e.jsx(za,{size:16,className:"text-[#c81118] mt-0.5 cursor-pointer",onClick:()=>bs(b.id)})]})]},b.id)):e.jsx("tr",{className:"grid grid-cols-[auto_1fr_80px_80px_100px] gap-2 items-center text-sm p-4",children:e.jsx("td",{colSpan:"5",className:"text-center text-gray-500"})})})]})}),e.jsxs("div",{className:"bg-white mt-5 w-[100%] rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsx("div",{className:"space-y-4 pb-2",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Subtotal"}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-md px-3 py-2 text-sm font-medium text-gray-900",children:["€",pr().toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:["Tax (",gr().toFixed(1),"%)"]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-md px-3 py-2 text-sm font-medium text-gray-900",children:["€",Er().toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Discount"}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-md px-3 py-2 text-sm font-medium text-gray-900",children:["€",rr().toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Total"}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-md px-3 py-2 text-sm font-medium text-gray-900",children:["€",Tr().toFixed(2)]})]})]})}),e.jsxs("div",{className:"grid grid-cols-7 gap-3 mb-3",children:[!(Ut&&Ua)&&e.jsxs("button",{onClick:()=>{h(),el()},className:"col-span-2 bg-[#fb8b02] text-white btn-lifted h-12 px-3 text-sm font-bold rounded flex items-center justify-center gap-2 hover:bg-[#e67a00] transition-colors",children:[e.jsx(ko,{size:16}),Ut?"UPDATE ORDER":"PLACE ORDER"]}),e.jsxs("button",{onClick:()=>{h(),hm()},className:`${Ut&&Ua?"col-span-5":"col-span-3"} bg-[#16A34A] text-white btn-lifted h-12 px-3 text-sm font-bold rounded flex items-center justify-center gap-2 hover:bg-[#15803d] transition-colors`,children:["PAY (€",Tr().toFixed(2),")"]}),e.jsxs("button",{onClick:()=>{h(),Ad()},className:"col-span-2 bg-[#3db4e4] text-white btn-lifted h-12 px-3 text-sm font-bold rounded flex items-center justify-center gap-2 hover:bg-[#2a9fd8] transition-colors",children:[e.jsx(Ah,{size:16}),"PRINT"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("button",{onClick:oi,className:"bg-gray-600 text-white btn-lifted h-12 px-2 text-xs font-bold rounded flex items-center justify-center gap-1 hover:bg-gray-700 transition-colors",children:[e.jsx(qx,{size:14}),"SPLIT SALE"]}),e.jsxs("button",{onClick:Wo,className:"bg-gray-600 text-white btn-lifted h-12 px-2 text-xs font-bold rounded flex items-center justify-center gap-1 hover:bg-gray-700 transition-colors",children:[e.jsx(mg,{size:14}),"HOLD"]}),e.jsxs("button",{className:"bg-gray-600 text-white btn-lifted h-12 px-2 text-xs font-bold rounded flex items-center justify-center gap-1 hover:bg-gray-700 transition-colors",children:[e.jsx(aN,{size:14}),"OPEN DRAWER"]}),e.jsxs("button",{className:"bg-gray-600 text-white btn-lifted h-12 px-2 text-xs font-bold rounded flex items-center justify-center gap-1 hover:bg-gray-700 transition-colors",children:[e.jsx(Bh,{size:14}),"SERVICE FEE"]})]})]})]})]}),e.jsx(xy,{isOpen:B,onClose:()=>z(!1),onCustomerSelect:ql,orderType:Vt}),e.jsx(RC,{isOpen:q,onClose:()=>R(!1),onCustomerSelect:ql,onEditCustomer:Go,onNewCustomer:()=>z(!0),orderType:Vt}),e.jsx(PC,{isOpen:Ee,onClose:()=>Ae(!1),customer:re,onEditCustomer:b=>{b&&T(b),Ae(!1),ie(!0)},onChangeCustomer:()=>{Ae(!1),R(!0)}}),he&&F&&e.jsx(xy,{isOpen:he,onClose:()=>ie(!1),onCustomerSelect:Fn,editingCustomer:F,orderType:Vt}),nf&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl h-[95vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Split Bill"}),e.jsx("button",{onClick:sc,disabled:li(),className:`p-1 rounded-full transition-colors ${li()?"text-gray-400 cursor-not-allowed":"text-red-500 hover:text-red-300 hover:bg-white hover:bg-opacity-20"}`,children:"X Cancel"})]}),e.jsx("div",{className:"p-6 flex-1 overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Order Items"}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"text-sm font-medium text-gray-700",children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Item Name"}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Price"}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Qty"}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Dis."}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Total"}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white",children:Fa.map(b=>e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 text-sm text-gray-800",children:e.jsx("span",{className:"truncate",children:b.food?.name||"Unknown Food"})}),e.jsxs("td",{className:"px-3 py-2 text-sm text-center text-gray-600",children:["€",(b.totalPrice/b.quantity).toFixed(2)]}),e.jsx("td",{className:"px-3 py-2 text-sm text-center text-gray-600",children:Qi(b.id)}),e.jsx("td",{className:"px-3 py-2 text-sm text-center text-gray-600",children:"€0.00"}),e.jsxs("td",{className:"px-3 py-2 text-sm text-center font-medium text-gray-800",children:["€",b.totalPrice.toFixed(2)]}),e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>tl(b.id,Wt?.id),disabled:!Wt||bd(b.id,Wt?.id)===0,className:`w-6 h-6 flex items-center justify-center rounded text-sm font-bold transition-colors ${Wt&&bd(b.id,Wt?.id)>0?"bg-red-500 text-white hover:bg-red-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:"Remove from selected split",children:"-"}),e.jsx("button",{onClick:()=>ac(b.id,Wt?.id),disabled:!Wt||Qi(b.id)<=0,className:`w-6 h-6 flex items-center justify-center rounded text-sm font-bold transition-colors ${Wt&&Qi(b.id)>0?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:"Add to selected split",children:"+"})]})})]},b.id))})]})}),e.jsxs("div",{className:"border-gray-200 pt-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Total Items:"}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:Fa.reduce((b,E)=>b+E.quantity,0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Sub Total:"}),e.jsxs("span",{className:"text-sm font-bold text-gray-800",children:["€",_t?(_t.total/(1+gr()/100)).toFixed(2):"0.00"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Tax:"}),e.jsxs("span",{className:"text-sm font-bold text-gray-800",children:["€",_t?(_t.total*gr()/100/(1+gr()/100)).toFixed(2):"0.00"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-800",children:"Total Payable:"}),e.jsxs("span",{className:"text-lg font-bold text-primary",children:["€",_t?_t.total.toFixed(2):"0.00"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Split Bills"}),dr.length===0&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-blue-800 font-medium mb-2",children:["Maximum Split(s): ",dn(),dn()<10&&e.jsxs("span",{className:"text-xs text-blue-600 block mt-1",children:["(Based on total quantity: ",Fa.reduce((b,E)=>b+E.quantity,0)," items)"]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Split"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"1",max:dn(),value:Za,onChange:b=>Oo(b.target.value),onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),Za&&parseInt(Za)>0&&parseInt(Za)<=dn()&&yd())},placeholder:"Enter number of splits",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"}),e.jsx("button",{onClick:yd,disabled:!Za||parseInt(Za)<=0||parseInt(Za)>dn(),className:`px-6 py-2 font-medium rounded-lg transition-colors ${Za&&parseInt(Za)>0&&parseInt(Za)<=dn()?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Go"})]})]})})]}),dr.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-4",children:dr.map(b=>e.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${Wt?.id===b.id?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>_r(b),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:["Split Bill ",b.id]}),Wt?.id===b.id&&e.jsx(xa,{size:16,className:"text-green-600"}),b.paid&&e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-medium",children:"PAID"})]}),e.jsx("button",{onClick:E=>{E.stopPropagation(),pm(b.id)},className:"text-red-500 hover:text-red-700 p-1",children:e.jsx(St,{size:16})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Customer:"}),e.jsxs("select",{value:b.customer,onChange:E=>gm(b.id,E.target.value),onClick:E=>E.stopPropagation(),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"Walk-in Customer",children:"Walk-in Customer"}),e.jsx("option",{value:"Dona M. Leighty 408-230-51",children:"Dona M. Leighty 408-230-51"}),e.jsx("option",{value:"Donld PB 432226663",children:"Donld PB 432226663"}),e.jsx("option",{value:"Gustavo J. Weitz 256-537-96",children:"Gustavo J. Weitz 256-537-96"}),e.jsx("option",{value:"Mr Joe 231654849",children:"Mr Joe 231654849"}),e.jsx("option",{value:"Mr. Heri 523154215",children:"Mr. Heri 523154215"}),e.jsx("option",{value:"John Smith 555-1234",children:"John Smith 555-1234"}),e.jsx("option",{value:"Jane Doe 555-5678",children:"Jane Doe 555-5678"}),e.jsx("option",{value:"Mike Johnson 555-9012",children:"Mike Johnson 555-9012"}),e.jsx("option",{value:"Sarah Wilson 555-3456",children:"Sarah Wilson 555-3456"})]})]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sub Total:"}),e.jsxs("span",{children:["€",(b.subtotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Disc Amt(%):"}),e.jsxs("span",{children:["€",(b.discount||0).toFixed(2),"X"]})]}),e.jsxs("div",{className:"flex justify-between font-bold border-t border-gray-200 pt-1",children:[e.jsx("span",{children:"Total Payable:"}),e.jsxs("span",{children:["€",(b.total||0).toFixed(2)]})]})]}),e.jsx("button",{disabled:!li(),className:`w-full mt-3 text-xs font-medium py-2 px-3 rounded transition-colors ${li()?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:E=>{E.stopPropagation(),li()&&(console.log("Setting selectedSplitBill:",b),_r(b),Mi(b.id),gf(),Rn(!1),Ar(!0))},children:"Checkout"}),!li()&&e.jsx("div",{className:"text-xs text-gray-500 mt-1 text-center",children:"All items must be distributed before checkout"})]},b.id))})]})]})})]})}),ki&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold",children:js?"Edit Split Pizza":"Split Pizza"}),e.jsx("button",{onClick:Mr,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Food Type:"}),e.jsx("div",{className:"bg-gray-100 rounded-lg px-3 py-2 text-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Pizza"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size:"}),e.jsxs("select",{value:ln,onChange:b=>_a(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",children:[e.jsx("option",{value:"7",children:"7 inch"}),e.jsx("option",{value:"12",children:"12 inch"}),e.jsx("option",{value:"16",children:"16 inch"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"No. of Splits:"}),e.jsxs("select",{value:zs,onChange:Jl,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",children:[e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price:"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:ya,onChange:b=>da(b.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",placeholder:"0.00"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-800",children:"€"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-[40%_60%] gap-8 mb-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 text-center",children:"Pizza Preview"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"relative",children:e.jsx("svg",{width:"300",height:"300",viewBox:"0 0 200 200",children:im()})})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Select Flavors"}),e.jsx("div",{className:`grid gap-4 mb-6 ${zs===2?"grid-cols-2":zs===3?"grid-cols-3":"grid-cols-2"}`,children:Array.from({length:zs},(b,E)=>{const K=ws===E;cr[E];const xe=Jo(E),je=xe.default.length>0||xe.custom.length>0;return e.jsxs("div",{className:`p-4 rounded-xl border-3 transition-all duration-200 cursor-pointer transform ${K?"border-blue-600 bg-blue-100 shadow-lg scale-105 ring-2 ring-blue-200":je?"border-green-400 bg-green-50 hover:border-green-500 hover:shadow-md":"border-gray-300 bg-white hover:border-gray-400 hover:shadow-sm"}`,onClick:()=>{El(E)},children:[e.jsxs("label",{className:`block text-sm font-semibold mb-2 \${\r
                              isCurrentlySelected \r
                                ? 'text-blue-800' \r
                                : hasSavedIngredients \r
                                  ? 'text-green-700' \r
                                  : 'text-gray-700'\r
                            }`,children:["Flavor ",E+1,":",je&&e.jsx("span",{className:"ml-2 text-xs text-green-600 font-normal",children:"(Modified)"}),K&&e.jsx("span",{className:"ml-2 text-xs text-blue-600 font-bold",children:"(Selected)"})]}),e.jsxs("select",{value:cr[E]?.id||"",onChange:pe=>Gs(E,pe.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 text-sm transition-colors ${K?"border-blue-400 focus:ring-blue-300 focus:border-blue-500 bg-blue-50":"border-gray-300 focus:ring-primary focus:border-primary bg-white"}`,children:[e.jsx("option",{value:"",children:"Select pizza..."}),Lt.map(pe=>e.jsxs("option",{value:pe.id,children:[pe.name," - €",pe.price]},pe.id))]}),je&&e.jsxs("div",{className:`mt-2 text-xs ${K?"text-blue-600":"text-gray-600"}`,children:[xe.default.length+xe.custom.length," ingredients"]})]},E)})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Ingredients for ",(()=>{if(ws!==null&&cr[ws]){const b=cr[ws];return`Flavor ${ws+1} (${b.name})`}return"Selected Flavor"})(),":"]}),(()=>{if(ws!==null){const b=Jo(ws);if(b.default.length>0||b.custom.length>0)return e.jsx("button",{onClick:()=>{if(ws!==null){const K=sf[ws]||[];cn(xe=>({...xe,[ws]:{default:K,custom:[]}})),console.log(`Reset ingredients for slice ${ws} to original:`,K)}},className:"text-xs text-red-600 hover:text-red-800 underline",children:"Reset to Original"})}return null})()]}),(()=>{if(ws===null||!cr[ws])return e.jsx("div",{className:"text-gray-400 text-sm",children:"Select a flavor above to see ingredients"});cr[ws];const b=Jo(ws),E=[...b.default,...b.custom];return E.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:E.map((K,xe)=>{const je=xe<b.default.length,pe=K.name||K;return e.jsxs("span",{className:"bg-primary text-white px-3 py-1 rounded-full text-sm flex items-center gap-1",children:[pe,e.jsx("button",{onClick:()=>{if(je){const Ue=b.default.filter((tt,yt)=>yt!==xe);cn(tt=>({...tt,[ws]:{...tt[ws],default:Ue}})),console.log(`Removed default ingredient "${pe}" from slice ${ws}. Updated defaults:`,Ue)}else{const Ue=xe-b.default.length,tt=b.custom.filter((yt,Ot)=>Ot!==Ue);cn(yt=>({...yt,[ws]:{...yt[ws],custom:tt}})),console.log(`Removed custom ingredient "${pe}" from slice ${ws}. Updated custom:`,tt)}},className:"text-white hover:text-red-200",children:e.jsx(St,{size:10})})]},`${ws}-${xe}`)})}):e.jsx("div",{className:"text-gray-400 text-sm",children:"No ingredients available for this pizza"})})()]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Add Custom Ingredient:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:Gr==="customIngredientInput"?sr:ir,onChange:b=>ud(b.target.value),onFocus:b=>fa(b,"customIngredientInput",ir),onClick:b=>na(b,"customIngredientInput",ir),onBlur:b=>Ln(b,"customIngredientInput"),onKeyPress:b=>{b.key==="Enter"&&Zl()},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",placeholder:"Type ingredient name and press Enter or click Add..."}),e.jsx("button",{onClick:Ql,className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors",children:"Add"})]}),Cn&&kn.length>0&&e.jsx("div",{className:"mt-2 bg-white border border-gray-300 rounded-lg shadow-lg max-h-40 overflow-y-auto",children:kn.map(b=>e.jsx("button",{onClick:()=>Zo(b),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 border-b border-gray-100 last:border-b-0",children:b.name},b.id))})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Order Note"}),e.jsx("textarea",{value:Gr==="pizzaNote"?sr:G,onChange:b=>Fe(b.target.value),onFocus:b=>fa(b,"pizzaNote",G),onClick:b=>na(b,"pizzaNote",G),onBlur:b=>Ln(b,"pizzaNote"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm resize-none",rows:3,placeholder:"Add any special instructions or notes for this pizza order..."})]})}),e.jsxs("div",{className:"flex gap-4 justify-end mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:Mr,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:md,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-blue-700 transition-colors",children:js?"Update Pizza":"Add to Order"})]})]})]})}),kl&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold",children:ca?"Edit Open Food":"Open Order"}),e.jsx("button",{onClick:Xl,className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Food Name:"}),e.jsx("input",{type:"text",value:Gr==="customFoodName"?sr:pa,onChange:b=>Sn(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",placeholder:"Enter food name",onFocus:b=>fa(b,"customFoodName",pa),onClick:b=>na(b,"customFoodName",pa),onBlur:ar})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price:"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:Qn,onChange:b=>Cr(b.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",placeholder:"0.00"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-800",children:"€"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ingredients:"}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx("input",{type:"text",value:Gr==="customIngredientInput"?sr:ir,onChange:ff,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",placeholder:"Type ingredient name...",onFocus:b=>fa(b,"customIngredientInput",ir),onClick:b=>na(b,"customIngredientInput",ir),onBlur:ar}),Cn&&kn.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-lg shadow-lg z-10 max-h-40 overflow-y-auto",children:kn.map(b=>e.jsx("button",{onClick:()=>Ql(b),className:"w-full px-3 py-2 text-left hover:bg-gray-100 text-sm border-b border-gray-100 last:border-b-0",children:b.name},b.id))})]}),on.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:on.map(b=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary text-white text-sm rounded-full",children:[b.name,e.jsx("button",{onClick:()=>cd(b.id),className:"ml-1 hover:bg-white hover:bg-opacity-20 rounded-full p-0.5",children:e.jsx(St,{size:12})})]},b.id))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note:"}),e.jsx("textarea",{value:Gr==="customFoodNote"?sr:$r,onChange:b=>Hr(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",rows:"3",placeholder:"Enter any special notes or instructions",onFocus:b=>fa(b,"customFoodNote",$r),onClick:b=>na(b,"customFoodNote",$r),onBlur:ar})]}),e.jsxs("div",{className:"flex gap-4 justify-end mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:Xl,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:am,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primaryLight transition-colors",children:ca?"Update Food":"Add to Order"})]})]})]})}),C&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Table Selection"}),e.jsx("button",{onClick:()=>O(!1),className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Select Floor"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-60 overflow-y-auto",children:At?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading floors..."})}):ne&&ne.length>0?ne.map(b=>e.jsxs("button",{onClick:()=>$l(b),className:`px-4 py-3 text-left rounded-lg transition-colors border ${ce===b.name?"bg-primary text-white border-primary":"bg-white text-gray-700 hover:bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:"font-medium",children:b.name}),e.jsx("div",{className:"text-sm opacity-75",children:b.type})]},b.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No floors found"}),e.jsx("div",{className:"text-gray-400 text-xs mt-2 mb-4",children:"Please add floors to the database"}),e.jsx("button",{onClick:pn,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors text-sm",children:"Add Sample Data"})]})})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${ce?"text-gray-700":"text-gray-400"}`,children:"Select Table"}),e.jsxs("select",{value:rt,onChange:b=>ad(b.target.value),disabled:!ce,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary ${ce?"border-gray-300 bg-white":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Choose a table..."}),Te?e.jsx("option",{value:"",disabled:!0,children:"Loading tables..."}):Re.length>0?Re.map(b=>e.jsxs("option",{value:b.id,disabled:zn(b.id.toString()),children:["Table ",b.table_no," (",b.seat_capacity||4," seats) ",zn(b.id.toString())?"- RESERVED":""]},b.id)):ce?e.jsx("option",{value:"",disabled:!0,children:"No available tables"}):e.jsx("option",{value:"",disabled:!0,children:"Select a floor first"})]}),it.length>0&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Reserved Tables:"}),e.jsx("div",{className:`space-y-2 ${it.length>3?"max-h-32 overflow-y-auto pr-2":""}`,children:it.map(b=>e.jsx("div",{className:"p-2 bg-orange-50 border border-orange-200 rounded-lg flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-orange-700 font-medium",children:["Table ",b.tableNo," (",b.persons," persons) - ",b.floor]})]}),e.jsx("button",{onClick:()=>Ko(b.id),className:"text-red-500 hover:text-red-700 p-1",title:"Remove reservation",children:e.jsx(St,{size:14})})]})},b.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${rt?"text-gray-700":"text-gray-400"}`,children:"Persons"}),e.jsxs("select",{value:Je,onChange:b=>Zu(b.target.value),disabled:!rt,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary ${rt?"border-gray-300 bg-white":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select number of persons..."}),nd().map(b=>e.jsxs("option",{value:b,children:[b," ",b===1?"Person":"Persons"]},b))]})]})]})]}),e.jsxs("div",{className:"flex gap-4 justify-end pt-4 border-t border-gray-200 flex-shrink-0",children:[e.jsxs("button",{disabled:!ce,onClick:Ju,className:`px-6 py-2 font-medium rounded-lg transition-colors flex items-center gap-2 ${ce?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}),e.jsx("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}),e.jsx("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}),e.jsx("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]}),"Merge Table"]}),e.jsxs("button",{disabled:!Je,onClick:()=>{rt&&Je&&rd(rt,Je),Ve(""),We(""),O(!1)},className:`px-6 py-2 font-medium rounded-lg transition-colors flex items-center gap-2 ${Je?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17,21 17,13 7,13 7,21"}),e.jsx("polyline",{points:"7,3 7,8 15,8"})]}),"Save"]})]})]})]})}),U&&e.jsx(Av,{open:U,onBack:Vl,onClose:()=>{H(!1),ke([{id:1,tableId:""},{id:2,tableId:""}])},floors:ne,floorsLoading:At,selectedFloor:ce,onSelectFloor:$l,addSampleData:pn,tables:Re,tablesLoading:Te,mergeTableSelections:pt,onSelectionChange:em,onRemoveSelection:tm,onAddMoreSelection:Yo,isAddMoreDisabled:Pn,getAvailableTablesForSelection:sm,isTableReserved:b=>zn(b.toString()),onSave:b=>{b.forEach(E=>{zn(E.id)||rd(E.id,"Merged Table")}),r(`Successfully merged ${b.length} tables!`),H(!1),ke([{id:1,tableId:""},{id:2,tableId:""}])}}),I&&F&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-500 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Customer"}),e.jsx("button",{onClick:()=>se(!1),className:"text-white hover:text-red-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete this customer? This action cannot be undone."}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Customer: ",e.jsx("strong",{children:F.name})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>se(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:id,className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),console.log("Modal render check:",{showFoodModal:ye,selectedFood:!!Ne}),ye&&Ne&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-xl font-bold",children:js?"Edit Food Item":"Food Details"}),Ut&&e.jsx("span",{className:"bg-yellow-500 text-yellow-900 px-2 py-1 rounded-full text-xs font-medium",children:"Modifying Order"})]}),e.jsx("button",{onClick:()=>{ae(!1),ge(null),P({}),g(1),aa(null)},className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:[e.jsxs("div",{className:"mb-6",children:[js&&e.jsx(e.Fragment,{}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex-shrink-0 mb-3",children:e.jsx(fm,{food:Ne})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:Ne.name}),Ne.description&&e.jsx("p",{className:"text-sm text-gray-600",children:Ne.description})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["€",Ne.price?.toFixed(2)||"0.00"]})})]})]}),X?e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(fl,{size:18,className:"text-primary"}),"Select Variation"]}),e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading variations..."})})]}):V?.variations&&V.variations.length>0?e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(fl,{size:18,className:"text-primary"}),"Select Variation"]}),e.jsx("div",{className:"space-y-4",children:V.variations.map(b=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h5",{className:"font-medium text-gray-800",children:b.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[b.is_required&&e.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Required"}),e.jsx("span",{className:"text-xs text-gray-500",children:b.type==="multiple"?"Multiple":"Single"})]})]}),(b.min||b.max)&&e.jsxs("div",{className:"mb-3 text-xs text-gray-600",children:[b.min&&b.max&&e.jsxs("span",{children:["Select ",b.min," to ",b.max," options"]}),b.min&&!b.max&&e.jsxs("span",{children:["Select at least ",b.min," option",b.min>1?"s":""]}),!b.min&&b.max&&e.jsxs("span",{children:["Select up to ",b.max," option",b.max>1?"s":""]})]}),e.jsx("div",{className:"space-y-2",children:b.options?.map(E=>{const K=b.type==="multiple"?A[b.id]?.includes(E.id):A[b.id]===E.id;return e.jsxs("button",{onClick:()=>qo(b.id,E.id),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-colors ${K?"bg-primary/10 border-primary":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${K?"border-primary bg-primary":"border-gray-300"}`,children:K&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsx("span",{className:`font-medium ${K?"text-primary":"text-gray-700"}`,children:E.option_name})]}),e.jsx("span",{className:`font-semibold ${K?"text-primary":"text-gray-600"}`,children:E.option_price>0?`+€${E.option_price.toFixed(2)}`:"Free"})]},E.id)})}),(()=>{const E=A[b.id],K=E?Array.isArray(E)?E.length:1:0,xe=[];return b.is_required&&!E&&xe.push(`Required: ${b.name}`),E&&(b.min&&K<b.min&&xe.push(`Minimum selection: ${b.min}`),b.max&&K>b.max&&xe.push(`Maximum selection: ${b.max}`)),xe.length>0?e.jsx("div",{className:"mt-2 space-y-1",children:xe.map((je,pe)=>e.jsx("div",{className:"text-xs text-red-600",children:je},pe))}):null})()]},b.id))})]}):null,X?e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Ls,{size:18,className:"text-primary"}),"Select Add on"]}),e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading addons..."})})]}):V?.adons&&V.adons.length>0?e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Ls,{size:18,className:"text-primary"}),"Select Add on"]}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsx("div",{className:"space-y-2",children:V.adons.map(b=>{const E=Q.includes(b.id);return e.jsxs("button",{onClick:()=>sd(b.id),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-colors ${E?"bg-primary/10 border-primary":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${E?"border-primary bg-primary":"border-gray-300"}`,children:E&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsx("span",{className:`font-medium ${E?"text-primary":"text-gray-700"}`,children:b.name})]}),e.jsxs("span",{className:`font-semibold ${E?"text-primary":"text-gray-600"}`,children:["+€",b.price.toFixed(2)]})]},b.id)})})})]}):null,e.jsx("div",{className:"mb-6 rounded-lg",children:e.jsxs("button",{onClick:()=>k(!0),className:"w-[150px] bg-primary text-white  flex items-center justify-center gap-2 px-4 py-3 border border-gray-300 rounded-lg transition-colors",children:[e.jsx(fl,{size:18,className:"text-white"}),e.jsx("span",{className:"font-medium text-white",children:"Ingredients"})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note:"}),e.jsx("textarea",{value:Os,onChange:b=>Cl(b.target.value),placeholder:"Add any special instructions or notes for this order...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none",rows:"3"})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4 mb-4",children:e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Total Price:"}),e.jsxs("span",{className:"text-2xl font-bold text-primary",children:["€",gn().toFixed(2)]})]})})]}),e.jsx("div",{className:"border-t border-gray-200 p-6 bg-white rounded-b-xl flex-shrink-0",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border border-gray-300 rounded-lg bg-white",children:[e.jsx("button",{onClick:mf,disabled:f<=1,className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:text-gray-800 disabled:text-gray-300 disabled:cursor-not-allowed transition-colors",children:e.jsx(Vx,{size:16})}),e.jsx("span",{className:"w-12 text-center text-gray-800 font-medium text-lg",children:f}),e.jsx("button",{onClick:Ki,className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx(Ls,{size:16})})]}),e.jsxs("button",{onClick:Xu,disabled:!tc(),className:`flex-1 px-4 py-3 font-medium rounded-lg transition-colors flex items-center justify-center gap-2 ${tc()?"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(ko,{size:18}),js?"Update":"Add"]})]})})]})}),e.jsx(WC,{isVisible:S,onClose:()=>k(!1),foodId:Ne?.id,foodName:Ne?.name}),Be&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl min-w-[800px] max-h-[90vh]",children:[e.jsxs("div",{className:"bg-white text-black p-3 flex justify-between items-center rounded-t-xl border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Coupons & Offers"}),e.jsx("button",{onClick:Xo,className:"text-black hover:text-gray-600 p-1 rounded-full hover:bg-gray-100",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-4 flex gap-4 overflow-y-auto max-h-[80vh]",children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(_h,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Manual Discount"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Discount Type"}),e.jsxs("select",{name:"discountType",value:vs,onChange:b=>Nt(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm",children:[e.jsx("option",{value:"percentage",children:"Percentage (%)"}),e.jsx("option",{value:"fixed",children:"Fixed Amount (€)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Disc. Amount"}),e.jsx("input",{type:"number",name:"discountAmount",value:as,onChange:b=>ys(b.target.value),onFocus:b=>Xi(b,"discountAmount",as),onClick:b=>Xi(b,"discountAmount",as),onBlur:b=>{ja==="discountAmount"&&Dr!==void 0&&ys(Dr),Wr("")},onInput:b=>{const E=b.target.value;ys(E),ja==="discountAmount"&&Ea(E)},min:"0",step:"0.01",placeholder:vs==="percentage"?"20":"10",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"})]})]}),as&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:["✓ Manual discount of ",as,vs==="percentage"?"%":"€"," is ready to apply."]}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx("button",{onClick:Yl,disabled:!as||parseFloat(as)<=0,className:`px-4 py-2 rounded-lg transition-colors font-medium ${as&&parseFloat(as)>0?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Apply Manual Discount"})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(_h,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Enter Coupon Code"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"couponCode",value:nt,onChange:b=>ut(b.target.value),onFocus:b=>fa(b,"couponCode"),onClick:b=>na(b,"couponCode"),onBlur:b=>Ln(b,"couponCode"),placeholder:"Enter promo code or click a coupon below",className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${nt.trim()?"border-green-400 focus:ring-green-500 focus:ring-green-500 bg-green-50":"border-gray-300 focus:ring-green-500 focus:border-green-500"}`,onKeyUp:b=>{b.key==="Enter"&&Gi()}}),e.jsx("button",{onClick:Gi,disabled:!nt.trim(),className:`px-4 py-2 rounded-lg transition-colors font-medium ${nt.trim()?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Apply"})]}),nt.trim()&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:['✓ Coupon code "',nt,'" is ready to apply. Click "Apply".']})]}),Pt&&e.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Applied Coupon"}),e.jsx("p",{className:"text-sm text-green-600",children:Pt.title}),e.jsxs("p",{className:"text-xs text-green-600",children:["Code: ",Pt.code]}),Pt.discountType==="percentage"?e.jsxs("p",{className:"text-green-700 font-medium",children:[Pt.discount,"% OFF"]}):e.jsxs("p",{className:"text-green-700 font-medium",children:["€",Pt.discount," OFF"]})]}),e.jsx("button",{onClick:Kl,className:"text-red-600 hover:text-red-800 p-1",children:e.jsx(St,{size:16})})]})}),e.jsx("div",{className:"border-t border-gray-300 my-4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Available Coupons"}),Ht?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading coupons..."})}):Et.length>0?e.jsx("div",{className:"space-y-3",children:Et.map(b=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-green-300 hover:bg-green-50 transition-all cursor-pointer group",onClick:()=>{ut(b.code)},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:b.title}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Customer Type: ",b.customerType]}),b.discountType==="percentage"?e.jsxs("p",{className:"text-green-600 font-medium mt-1",children:[b.discount,"% OFF"]}):e.jsxs("p",{className:"text-green-600 font-medium mt-1",children:["€",b.discount," OFF"]}),b.minPurchase>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Min Purchase: €",b.minPurchase]}),b.maxDiscount>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Max Discount: €",b.maxDiscount]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:["Code: ",b.code]}),b.expireDate&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Expires: ",new Date(b.expireDate).toLocaleDateString()]}),b.limitForSameUser>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Limit: ",b.limitForSameUser," uses"]})]})]}),e.jsx("div",{className:"mt-2 text-xs text-green-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to use this coupon code"})]},b.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No coupons available"}),e.jsx("div",{className:"text-gray-400 text-xs mt-2",children:"Create coupons in the Coupons section"}),e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("p",{className:"text-xs text-yellow-800 font-medium",children:"Debug Info:"}),e.jsxs("p",{className:"text-xs text-yellow-700",children:["Available coupons count: ",Et.length]}),e.jsxs("p",{className:"text-xs text-yellow-700",children:["Loading state: ",Ht?"true":"false"]})]})]})]})]}),ja==="discountAmount"&&e.jsx("div",{className:"w-80",children:e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsx("div",{className:"keyboard-container w-full",onClick:b=>b.stopPropagation(),onMouseDown:b=>b.preventDefault(),children:e.jsx(Dg,{keyboardRef:b=>window.keyboard=b,input:Dr,onChange:Qo,onKeyPress:Xr,theme:"hg-theme-default",layoutName:"numeric",layout:{numeric:["1 2 3","4 5 6","7 8 9","0 {bksp}"]},display:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0","{bksp}":"⌫"},physicalKeyboardHighlight:!0,physicalKeyboardHighlightTextColor:"#000000",physicalKeyboardHighlightBgColor:"#fff475"})})})})]})]})})})]})}),Fo&&e.jsx(Qx,{isOpen:Fo,onClose:()=>{Ut&&Ua&&Ul&&(fn(!1),Vi(!1)),Ar(!1)},selectedPaymentMethod:Fi,setSelectedPaymentMethod:Li,paymentAmount:Bi,setPaymentAmount:mr,givenAmount:Yu,setGivenAmount:hr,changeAmount:Qc,setChangeAmount:Zs,currencyAmount:Uo,setCurrencyAmount:ai,selectedCurrency:Bo,setSelectedCurrency:Tn,currencyOptions:ic,addedPayments:Lo,setAddedPayments:ba,isSinglePayMode:qs,selectedSplitBill:Wt,selectedPlacedOrder:_t,cartItems:Ct,foodDetails:V,appliedCoupon:Pt,removeAppliedCoupon:Kl,couponCode:nt,setCouponCode:ut,availableCoupons:Et,couponsLoading:Ht,discountType:vs,setDiscountType:Nt,discountAmount:as,setDiscountAmount:ys,sendSMS:tr,setSendSMS:qr,handleCashGivenAmountChange:Sd,handleCashAmountChange:rc,handleNumericInputFocus:Xi,handleNumericKeyboardChange:Qo,handleNumericKeyboardKeyPress:Xr,handleAddPayment:Nd,handleApplyManualDiscount:Yl,handleApplyCoupon:Gi,handleAnyInputFocus:fa,handleAnyInputClick:na,handleCustomInputBlur:Ln,calculateSinglePayTotals:yr,calculateSplitBillTotal:Ha,calculateCartTotal:Tr,calculateSplitBillSubtotal:oc,calculateSplitBillTax:lc,calculateSplitBillDiscount:sl,calculateSplitBillCharge:kd,calculateSplitBillTips:cc,calculateCartSubtotal:pr,calculateCartTax:Er,calculateCartDiscount:rr,calculateDueAmount:wd,getCurrencySymbol:Or,numericActiveInput:ja,numericKeyboardInput:Dr,setNumericActiveInput:Wr,setNumericKeyboardInput:Ea,setShowCartDetailsModal:Mn,splitBillToRemove:ti,setSplitBills:Ja,setSplitBillToRemove:Mi,placedOrders:Oi,selectedCustomer:F,selectedOrderType:Vt,selectedTable:rt,handlePlaceOrder:el,showError:n,showSuccess:r,setIsInvoiceAfterPayment:Pi,setShowInvoiceModal:Ri,clearCart:Ts,resetFinalizeSaleModal:Cd,setIsSinglePayMode:Rn,setSelectedPlacedOrder:En,setCurrentOrderForInvoice:un,isModifyingOrder:Ut,modifyingOrderId:Xt,modifyingOrderPaymentInfo:Ua,showPayLaterButton:In,setShowPayLaterButton:Vi,hasResetPayment:Ul,setHasResetPayment:fn})]}),oe&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full transform transition-all duration-300 scale-100 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Delete Cart Items"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700 text-base leading-relaxed",children:["Are you sure you want to delete ",e.jsx("span",{className:"font-semibold text-red-600",children:Ct.length})," item",Ct.length!==1?"s":""," from your cart?"]}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"This will permanently remove all items and reset your order. You'll need to start over."})]}),Ct.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Items to be deleted:"}),e.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[Ct.slice(0,5).map((b,E)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 truncate flex-1",children:[E+1,". ",b.food?.name||"Unknown Food"]}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["Qty: ",b.quantity]})]},b.id)),Ct.length>5&&e.jsxs("div",{className:"text-xs text-gray-400 text-center pt-2 border-t border-gray-200",children:["+",Ct.length-5," more items"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50 rounded-b-2xl",children:[e.jsx("button",{onClick:()=>_e(!1),className:"px-6 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200",children:"Cancel"}),e.jsxs("button",{onClick:()=>{Ts(),_e(!1)},className:"px-6 py-2.5 text-white bg-red-600 rounded-lg font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete All Items"]})]})]})}),e.jsx(Ni,{isVisible:t.isVisible,message:t.message,type:t.type,position:t.position,duration:t.duration,onClose:c}),Ll&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Cart Details"}),e.jsx("button",{onClick:()=>Mn(!1),className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-3",children:[qs&&_t&&_t.items&&_t.items.length>0&&e.jsxs("div",{className:"border-b border-gray-200 pb-3 mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Order Items:"}),e.jsx("div",{className:"space-y-2",children:_t.items.map((b,E)=>e.jsxs("div",{className:"flex justify-between items-start text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:b.food?.name||"Unknown Item"}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["x",b.quantity||0]})]}),b.variations&&Object.keys(b.variations).length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Object.entries(b.variations).map(([K,xe])=>{const je=V?.variations?.find(tt=>tt.id===parseInt(K)),pe=je?.name||K,Ue=Array.isArray(xe)?xe:[xe];return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-gray-500",children:["• ",pe,":"]}),e.jsx("span",{className:"text-gray-700",children:Ue.map((tt,yt)=>{const Ot=je?.options?.find(It=>It.id===parseInt(tt));return e.jsxs("span",{children:[Ot?.option_name||tt,yt<Ue.length-1?", ":""]},tt)})})]},K)})}),b.adons&&b.adons.length>0&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:b.adons.map((K,xe)=>{const je=V?.adons?.find(tt=>tt.id===parseInt(K)),pe=je?.name||K,Ue=je?.price;return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"• Addon:"}),e.jsx("span",{className:"text-gray-700",children:pe}),Ue&&e.jsxs("span",{className:"text-gray-500",children:["(+€",Ue.toFixed(2),")"]})]},xe)})})]}),e.jsxs("span",{className:"text-gray-800 font-medium",children:["€",(parseFloat(b.totalPrice)||0).toFixed(2)]})]},E))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Item:"}),e.jsx("span",{className:"font-semibold",children:qs?(Ct.length>0?Ct:_t?.items||[]).reduce((b,E)=>b+(parseInt(E.quantity)||0),0):Wt?Wt.items.reduce((b,E)=>b+(E.quantity||0),0):Ct.reduce((b,E)=>b+(E.quantity||0),0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Sub Total:"}),e.jsxs("span",{className:"font-semibold",children:[Or(),qs?yr().subtotal.toFixed(2):Wt?oc().toFixed(2):pr().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Discount:"}),e.jsxs("span",{className:"font-semibold",children:[Or(),qs?yr().discount.toFixed(2):Wt?sl().toFixed(2):rr().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Discount:"}),e.jsxs("span",{className:"font-semibold",children:[Or(),qs?yr().discount.toFixed(2):Wt?sl().toFixed(2):rr().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tax:"}),e.jsxs("span",{className:"font-semibold",children:[Or(),qs?yr().tax.toFixed(2):Wt?lc().toFixed(2):Er().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Charge:"}),e.jsxs("span",{className:"font-semibold",children:[Or(),qs?"0.00":Wt?kd().toFixed(2):Ci.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tips:"}),e.jsxs("span",{className:"font-semibold",children:[Or(),qs?"0.00":Wt?cc().toFixed(2):Do.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-3",children:[e.jsx("span",{className:"text-gray-800 font-semibold",children:"Total Payable:"}),e.jsxs("span",{className:"font-bold text-lg",children:[Or(),qs?yr().total.toFixed(2):Wt?Ha().toFixed(2):Tr().toFixed(2)]})]})]})})]})}),Jc&&_t&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Cancel Order"}),e.jsx("button",{onClick:()=>{fr(!1),On("")},className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Cancel Order #",_t.orderNumber,"?"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This action will cancel the order. Please provide a reason for cancellation (optional)."}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cancellation Reason"}),e.jsx("textarea",{value:$i,onChange:b=>On(b.target.value),placeholder:"Enter reason for cancellation...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none resize-none",rows:"3"})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:()=>{fr(!1),On("")},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Close"}),e.jsx("button",{onClick:()=>Zi(!0),disabled:!$i.trim(),className:`flex-1 px-4 py-2 rounded-lg transition-colors ${$i.trim()?"bg-primary text-white":"bg-primary text-white cursor-not-allowed"}`,children:"Cancel Order"})]})]})}),ri&&mn&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-30 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-primary text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Convert Draft to Order"}),e.jsx("button",{onClick:()=>{Hi(!1),hn(null),ni("In Store"),va(""),Kr(""),xr("")},className:"text-white hover:text-gray-200 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Convert Draft #",mn.orderNumber,"?"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select the order type and details to convert this draft to a regular order."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Type"}),e.jsxs("select",{value:ma,onChange:async b=>{const E=b.target.value;if(ni(E),E==="Collection")try{console.log("Collection selected, opening schedule modal..."),await Ji()}catch(K){console.error("Error opening schedule modal:",K)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[x("instore")&&e.jsx("option",{value:"In Store",children:"In Store"}),x("collection")&&e.jsx("option",{value:"Collection",children:"Collection"}),x("delivery")&&e.jsx("option",{value:"Delivery",children:"Delivery"}),x("table")&&e.jsx("option",{value:"Table",children:"Table"})]})]}),ma==="Table"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Floor"}),e.jsxs("select",{value:ha,onChange:async b=>{const E=b.target.value;if(xr(E),va(""),E)try{console.log("Fetching tables for floor ID:",E),await qi(E)}catch(K){console.error("Error fetching tables for floor:",K)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select Floor"}),ne.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]})]}),ha&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Table"}),e.jsxs("select",{value:Aa,onChange:b=>va(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select Table"}),(()=>{console.log("Debug table filtering:",{conversionFloor:ha,conversionFloorType:typeof ha,tablesCount:Re.length,tables:Re.map(E=>({id:E.id,floor_id:E.floor_id,floor_id_type:typeof E.floor_id,status:E.status,table_no:E.table_no}))});const b=Re.filter(E=>{const K=E.floor_id.toString()===ha.toString(),xe=E.status==="Free";return console.log(`Table ${E.table_no}: floor_id=${E.floor_id} (${typeof E.floor_id}), conversionFloor=${ha} (${typeof ha}), matchesFloor=${K}, isFree=${xe}`),K&&xe});return console.log("Filtered tables:",b),b.map(E=>e.jsxs("option",{value:E.id,children:["Table ",E.table_no," (",E.seat_capacity," seats)"]},E.id))})()]})]}),Aa&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Persons"}),e.jsx("input",{type:"number",value:ra,onChange:b=>Kr(b.target.value),min:"1",max:"20",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter number of persons"})]})]})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:()=>{Hi(!1),hn(null),ni("In Store"),va(""),Kr(""),xr("")},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:mm,disabled:ma==="Table"&&(!ha||!Aa||!ra),className:`flex-1 px-4 py-2 rounded-lg transition-colors ${ma==="Table"&&(!ha||!Aa||!ra)?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-primary text-white hover:bg-primary-dark"}`,children:"Convert to Order"})]})]})}),e.jsx(Iv,{isOpen:er,onClose:()=>ur(!1),order:ua,onStatusUpdate:bm,onRiderAssignment:()=>{ur(!1),$o(!0)},selectedStatus:Bs,onStatusChange:si}),e.jsx(Tg,{isOpen:Ui,onClose:()=>{$o(!1)},onBack:()=>{$o(!1),ur(!0)},order:ua,onAssignRider:async b=>{try{return r(`Rider ${b.name} assigned to order successfully!`),si("On the way"),$o(!1),ur(!0),!0}catch(E){return console.error("Error assigning rider:",E),n("Failed to assign rider. Please try again."),!1}},onStatusUpdate:()=>{}}),e.jsx(IC,{isOpen:nm,onClose:()=>ec(!1),order:_t,onCreateInvoice:ym,foodDetails:V}),e.jsx(wh,{isOpen:Wc,onClose:()=>{Ri(!1),Pi(!1)},order:_t,onPrint:Ad,foodDetails:V,paymentStatus:"PAID"}),e.jsx(wh,{isOpen:Ii,onClose:()=>Io(!1),order:Xc,onPrint:()=>{window.print(),Io(!1)},foodDetails:V,isKitchen:!0,paymentStatus:"UNPAID"}),e.jsx(wh,{isOpen:zo,onClose:()=>Po(!1),order:Xc,onPrint:()=>{window.print(),Po(!1)},foodDetails:V,isEmployee:!0,paymentStatus:"UNPAID"}),e.jsx(LC,{isOpen:Vu,onClose:()=>qu(!1),onSubmit:b=>{cm(b)}}),e.jsx(FC,{isOpen:ei,onClose:()=>Kc(!1),currentDraftOrders:zl,onEditDraft:b=>{console.log("Editing draft:",b),b.items&&b.items.length>0&&zt(b.items),b.customer&&T(b.customer),b.orderType&&Da(b.orderType),Ei(E=>E.filter(K=>K.id!==b.id)),Kc(!1)},onDeleteDraft:um,onDeleteAllDrafts:gd}),e.jsx(BC,{isOpen:Uu,onClose:()=>Tl(!1),hotelInfo:Ai,selectedScheduleDate:Ml,selectedScheduleTime:$u,availableTimeSlots:af,useCustomTime:Vc,customTime:Di,onDateChange:mc,onTimeSelect:jm,onCustomTimeChange:wm,onUseCustomTimeChange:b=>{Il(b),b?To(""):Rl("")},onConfirm:to,onCancel:Nm}),e.jsx(Wa,{isVisible:Ho,onClose:()=>ed(),activeInput:Gr,onInputChange:(b,E)=>{Wi(E,b)},onInputBlur:ar,inputValue:Gl(Gr)}),Fo&&e.jsx(Qx,{isOpen:Fo,onClose:()=>Ar(!1),selectedPaymentMethod:Fi,setSelectedPaymentMethod:Li,paymentAmount:Bi,setPaymentAmount:mr,givenAmount:Yu,setGivenAmount:hr,changeAmount:Qc,setChangeAmount:Zs,currencyAmount:Uo,setCurrencyAmount:ai,selectedCurrency:Bo,setSelectedCurrency:Tn,currencyOptions:ic,addedPayments:Lo,setAddedPayments:ba,isSinglePayMode:qs,selectedSplitBill:Wt,selectedPlacedOrder:_t,cartItems:Ct,foodDetails:V,appliedCoupon:Pt,removeAppliedCoupon:Kl,couponCode:nt,setCouponCode:ut,availableCoupons:Et,couponsLoading:Ht,discountType:vs,setDiscountType:Nt,discountAmount:as,setDiscountAmount:ys,sendSMS:tr,setSendSMS:qr,handleCashGivenAmountChange:Sd,handleCashAmountChange:rc,handleNumericInputFocus:Xi,handleNumericKeyboardChange:Qo,handleNumericKeyboardKeyPress:Xr,handleAddPayment:Nd,handleApplyManualDiscount:Yl,handleApplyCoupon:Gi,handleAnyInputFocus:fa,handleAnyInputClick:na,handleCustomInputBlur:Ln,calculateSinglePayTotals:yr,calculateSplitBillTotal:Ha,calculateCartTotal:Tr,calculateSplitBillSubtotal:oc,calculateSplitBillTax:lc,calculateSplitBillDiscount:sl,calculateSplitBillCharge:kd,calculateSplitBillTips:cc,calculateCartSubtotal:pr,calculateCartTax:Er,calculateCartDiscount:rr,calculateDueAmount:wd,getCurrencySymbol:Or,numericActiveInput:ja,numericKeyboardInput:Dr,setNumericActiveInput:Wr,setNumericKeyboardInput:Ea,setShowCartDetailsModal:Mn,splitBillToRemove:ti,setSplitBills:Ja,setSplitBillToRemove:Mi,placedOrders:Oi,selectedCustomer:F,selectedOrderType:Vt,selectedTable:rt,handlePlaceOrder:el,showError:n,showSuccess:r,setIsInvoiceAfterPayment:Pi,setShowInvoiceModal:Ri,clearCart:Ts,resetFinalizeSaleModal:Cd,setIsSinglePayMode:Rn,setSelectedPlacedOrder:En,setCurrentOrderForInvoice:un,isModifyingOrder:Ut,modifyingOrderId:Xt,modifyingOrderPaymentInfo:Ua,showPayLaterButton:In,setShowPayLaterButton:Vi,hasResetPayment:Ul,setHasResetPayment:fn})]})},QC=()=>{const[s,t]=v.useState(new Date),r=ka(),n=nn(),{themeColors:o,changeTheme:c}=Ur(),d=()=>localStorage.getItem("currentEmployee")!==null,m=()=>n.pathname==="/login"||n.pathname==="/";v.useEffect(()=>{const _=()=>{t(new Date)};_();const D=setInterval(_,6e4);return()=>clearInterval(D)},[]);const h=()=>{window.windowControls?.minimize()},x=async()=>{try{const _=localStorage.getItem("currentEmployee");if(_){const D=JSON.parse(_);D.id&&(window.handleEmployeeLogout?await window.handleEmployeeLogout(D.id):await window.myAPI?.updateEmployeeLogout(D.id))}localStorage.removeItem("currentEmployee"),sessionStorage.clear(),r("/login")}catch(_){console.error("Error during logout:",_),localStorage.removeItem("currentEmployee"),sessionStorage.clear(),r("/login")}},p=_=>_.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),w=_=>_.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),N=_=>_.toLocaleDateString("en-US",{weekday:"long"});return e.jsxs("div",{className:"fixed top-0 left-0 right-0 h-11 z-50 flex items-center justify-between px-4 select-none title-bar",style:{backgroundColor:o.primary,borderBottom:`1px solid ${o.primaryLight}`},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[m()?e.jsx("span",{className:"text-white text-sm font-semibold",children:"POS System"}):d()?e.jsx("button",{onClick:x,className:"w-8 h-8 cursor-pointer flex items-center justify-center text-white hover:bg-white/15 transition-colors duration-200 rounded-lg",style:{border:"1px solid rgba(255,255,255,0.35)",backgroundColor:"transparent"},title:"Logout",children:e.jsx(zc,{className:"w-5 h-5"})}):e.jsx("span",{className:"text-white text-sm font-semibold",children:"POS System"}),!m()&&e.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("openDashboardMenu")),className:"w-8 h-8 cursor-pointer flex items-center justify-center text-white hover:bg-white/15 transition-colors duration-200 rounded-lg",style:{border:"1px solid rgba(255,255,255,0.35)",backgroundColor:"transparent"},title:"Menu",children:e.jsx(Qb,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-4 h-4 relative mr-2",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-4 h-4 stroke-white stroke-2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"white",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M12 6v6l4 2",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("span",{className:"text-white text-md font-bold",children:p(s)}),e.jsx("span",{className:"text-white text-sm font-semibold",children:w(s)}),e.jsx("span",{className:"text-white text-sm font-semibold",children:N(s)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-1 mr-2",children:[e.jsx("button",{onClick:()=>c("default"),className:"w-4 h-4 rounded-full border border-white cursor-pointer transform active:scale-95",style:{background:"linear-gradient(to bottom right, #003E5C, #1976d2)"},title:"Default Theme"}),e.jsx("button",{onClick:()=>c("blue"),className:"w-4 h-4 rounded-full border border-white cursor-pointer transform active:scale-95",style:{background:"linear-gradient(to bottom right, #176B87, #3498db)"},title:"Blue Theme"}),e.jsx("button",{onClick:()=>c("green"),className:"w-4 h-4 rounded-full border border-white cursor-pointer transform active:scale-95",style:{background:"linear-gradient(to bottom right, #25A18E, #34A0A4)"},title:"Green Theme"}),e.jsx("button",{onClick:()=>c("black"),className:"w-4 h-4 rounded-full border border-white cursor-pointer transform active:scale-95",style:{background:"linear-gradient(to bottom right, #1a1a1a, #333333)"},title:"Black Theme"})]}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx("button",{onClick:h,className:"w-9 h-9 flex items-center justify-center text-white hover:bg-white/15 transition-colors duration-200 rounded-lg",style:{border:"1px solid rgba(255,255,255,0.35)",backgroundColor:"transparent"},title:"Minimize",children:e.jsx(Vx,{className:"w-4 h-4"})})})]})]})};function ZC(){console.log("App component rendering...");const{themeColors:s}=Ur();return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:s.dashboardBackground},children:[e.jsx(QC,{}),e.jsxs("div",{className:"pt-8",children:[" ",e.jsx(bv,{})]})]})}const JC=()=>{const[s,t]=v.useState(!0),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState(null),h=ka(),x=async()=>{try{t(!0),m(null);const w=await window.myAPI.checkHotelTable();if(!w.success)throw new Error("Failed to check hotel table");if(!w.tableExists||!w.hasData){console.log("No hotel record found, redirecting to license screen"),n(!1),h("/license");return}const N=await window.myAPI.checkHotelStatus();if(!N.success)throw new Error(N.message||"Failed to check hotel status");n(N.isLicensed),c(N),N.isLicensed?console.log("Hotel is licensed, staying on current page"):(console.log("Hotel not licensed, redirecting to license screen"),h("/license"))}catch(w){console.error("Error checking hotel status:",w),m(w.message),h("/license")}finally{t(!1)}};return v.useEffect(()=>{x()},[]),{isLoading:s,isLicensed:r,hotelInfo:o,error:d,refreshStatus:()=>{x()}}},e3=()=>{const s=ka(),{themeColors:t}=Ur(),[r,n]=v.useState(new Date),[o,c]=v.useState(!1),{isLoading:d,isLicensed:m,error:h}=JC(),[x,p]=v.useState(!1),[w,N]=v.useState(0),[_,D]=v.useState(""),[L,B]=v.useState("");v.useEffect(()=>{const se=()=>{n(new Date)};se();const oe=setInterval(se,6e4);return()=>clearInterval(oe)},[]);const z=se=>se.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),q=se=>se.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),R=()=>{s("/login")},F=async(se,oe,_e,he)=>{try{const ie=new FormData;ie.append("file",se),ie.append("license",oe),ie.append("adminName",_e),ie.append("hotelUsername",he);const Ae=await(await fetch("http://127.0.0.1:8080/api/v1/upload/database",{method:"POST",body:ie})).json();return Ae.status==="ok"?(console.log("Upload successful:",Ae.filePath),{success:!0,data:Ae}):Ae.status==="inactive"?(console.log("License expired:",Ae.message),{success:!1,error:"LICENSE_EXPIRED",message:Ae.message}):(console.log("Upload failed:",Ae.message),{success:!1,error:"UPLOAD_FAILED",message:Ae.message})}catch(ie){return console.error("Network error:",ie),{success:!1,error:"NETWORK_ERROR",message:ie.message}}},T=async()=>{try{if(p(!0),N(0),D("uploading"),B("Preparing database backup..."),!(await window.myAPI.getHotelInfo()).success)throw new Error("Failed to get hotel information");const oe=setInterval(()=>{N(re=>re>=90?(clearInterval(oe),90):re+10)},200),_e=await window.myAPI.getDatabasePath();if(!_e.success)throw new Error("Failed to get database path");B("Uploading database to server...");const he=await fetch(`local-file://${_e.path}`);if(!he.ok)throw new Error("Failed to read database file");const ie=await he.blob(),Ee=new File([ie],"pos.db",{type:"application/x-sqlite3"}),Ae=await F(Ee,"QgtXF2TwCu03gKIwZJbO","saqib","miday");clearInterval(oe),N(100),Ae.success?(D("success"),B("Database uploaded successfully! Closing application..."),setTimeout(()=>{window.loginWindowControls?.close()},2e3)):(D("error"),B(Ae.message||"Upload failed"),setTimeout(()=>{window.loginWindowControls?.close()},3e3))}catch(se){console.error("Error during upload:",se),D("error"),B(se.message||"Upload failed"),setTimeout(()=>{window.loginWindowControls?.close()},3e3)}},I=[{icon:DN,title:"Smart Ordering",description:"Streamlined order management"},{icon:ji,title:"Kitchen Display",description:"Real-time kitchen coordination"},{icon:sn,title:"Customer Care",description:"Enhanced customer experience"},{icon:$s,title:"24/7 Support",description:"Always ready to serve"}];return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center relative overflow-hidden",style:{backgroundColor:t.dashboardBackground},children:[e.jsx("button",{onClick:T,disabled:x,className:`absolute top-4 right-4 w-8 h-8 flex items-center justify-center transition-colors duration-200 rounded-full border z-50 ${x?"text-gray-400 cursor-not-allowed border-gray-200":"text-gray-600 hover:text-red-600 hover:bg-red-50 border-gray-300 hover:border-red-300"}`,title:x?"Uploading database...":"Close Application",children:x?e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):e.jsx(St,{className:"w-5 h-5"})}),e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 rounded-full",style:{backgroundColor:t.primary}}),e.jsx("div",{className:"absolute top-40 right-32 w-24 h-24 rounded-full",style:{backgroundColor:t.primaryLight}}),e.jsx("div",{className:"absolute bottom-32 left-32 w-28 h-28 rounded-full",style:{backgroundColor:t.primary}}),e.jsx("div",{className:"absolute bottom-20 right-20 w-20 h-20 rounded-full",style:{backgroundColor:t.primaryLight}})]}),e.jsxs("div",{className:"relative z-10 text-center px-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-4 transform hover:scale-105 transition-transform duration-300",children:[e.jsxs("div",{className:"w-32 h-32 mx-auto rounded-3xl border-4 flex flex-col items-center justify-center mb-6 shadow-2xl",style:{backgroundColor:t.primary,borderColor:t.primaryLight,boxShadow:`0 20px 40px rgba(0, 0, 0, 0.1), 0 0 0 1px ${t.primaryLight}20`},children:[e.jsx("span",{className:"text-white font-bold text-6xl mb-1",children:"G"}),e.jsx("span",{className:"text-white font-medium text-xl",children:"POS"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(jo,{className:"absolute -top-4 -left-4 w-6 h-6 animate-pulse",style:{color:t.primaryLight}}),e.jsx(jo,{className:"absolute -top-4 -right-4 w-6 h-6 animate-pulse",style:{color:t.primaryLight}}),e.jsx(jo,{className:"absolute -bottom-4 -left-4 w-6 h-6 animate-pulse",style:{color:t.primaryLight}}),e.jsx(jo,{className:"absolute -bottom-4 -right-4 w-6 h-6 animate-pulse",style:{color:t.primaryLight}})]})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"Welcome to GPOS"}),e.jsx("p",{className:"text-xl text-gray-600 mb-2 font-medium",children:"Smart & Simplified Point of Sale"}),e.jsx("p",{className:"text-gray-500 max-w-2xl mx-auto",children:"Experience the future of restaurant management with our comprehensive POS solution. From order processing to kitchen coordination, we've got everything covered."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8 max-w-3xl mx-auto",children:I.map((se,oe)=>{const _e=se.icon;return e.jsxs("div",{className:"p-4 rounded-xl text-center transform hover:scale-105 transition-all duration-300",style:{backgroundColor:"white",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",border:`1px solid ${t.primaryExtraLight}`},children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-lg flex items-center justify-center",style:{backgroundColor:t.primaryExtraLight},children:e.jsx(_e,{className:"w-6 h-6",style:{color:t.primary}})}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:se.title}),e.jsx("p",{className:"text-sm text-gray-500",children:se.description})]},oe)})}),e.jsx("div",{className:"mb-4 flex flex-col sm:flex-row gap-4 justify-center",children:d?e.jsxs("div",{className:"flex items-center justify-center gap-3 px-8 py-4 rounded-2xl bg-gray-100",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-gray-600 font-medium",children:"Checking License Status..."})]}):h?e.jsx("div",{className:"flex items-center justify-center gap-3 px-8 py-4 rounded-2xl bg-red-50 border border-red-200",children:e.jsxs("span",{className:"text-red-600 font-medium",children:["Error: ",h]})}):m?e.jsx("button",{onClick:R,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),className:"group relative px-8 py-4 rounded-2xl cursor-pointer font-semibold text-lg transition-all duration-300 transform shadow-sm hover:scale-105",style:{backgroundColor:t.primary,color:"white",boxShadow:`0 8px 25px ${t.primary}40`},children:e.jsxs("span",{className:"flex items-center gap-3",children:["Go to Login Screen",e.jsx($b,{className:`w-5 h-5 transition-transform duration-300 ${o?"translate-x-1":""}`})]})}):null}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"inline-flex items-center gap-3 px-6 py-3 rounded-full",style:{backgroundColor:"white",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:t.primary},children:z(r)}),e.jsx("div",{className:"text-sm text-gray-500",children:q(r)})]})})})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl",style:{border:`2px solid ${t.primary}`},children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mb-6",children:[_==="uploading"&&e.jsx("div",{className:"w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4",style:{backgroundColor:t.primaryExtraLight},children:e.jsx(fg,{className:"w-8 h-8",style:{color:t.primary}})}),_==="success"&&e.jsx("div",{className:"w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4 bg-green-100",children:e.jsx(xa,{className:"w-8 h-8 text-green-600"})}),_==="error"&&e.jsx("div",{className:"w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4 bg-red-100",children:e.jsx(lg,{className:"w-8 h-8 text-red-600"})})]}),e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:[_==="uploading"&&"Uploading Database",_==="success"&&"Upload Complete",_==="error"&&"Upload Failed"]}),e.jsx("p",{className:"text-gray-600 mb-6",children:L}),_==="uploading"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:e.jsx("div",{className:"h-3 rounded-full transition-all duration-300",style:{width:`${w}%`,backgroundColor:t.primary}})}),e.jsxs("p",{className:"text-sm text-gray-500",children:[w,"% Complete"]})]}),e.jsx("div",{className:"text-xs text-gray-400 mb-4",children:"Server: 127.0.0.1:8080"}),_==="success"&&e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Database backup saved successfully!"}),_==="error"&&e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Application will close anyway..."})]})})}),e.jsx("div",{className:"absolute top-10 right-10 opacity-20",children:e.jsx("div",{className:"w-4 h-4 rounded-full animate-bounce",style:{backgroundColor:t.primary}})}),e.jsx("div",{className:"absolute bottom-10 left-10 opacity-20",children:e.jsx("div",{className:"w-6 h-6 rounded-full animate-bounce",style:{backgroundColor:t.primaryLight}})})]})},t3=()=>{const s=ka(),{themeColors:t}=Ur(),[r,n]=v.useState(""),[o,c]=v.useState(!1),[d,m]=v.useState(null),[h,x]=v.useState(null),[p,w]=v.useState(""),[N,_]=v.useState("checking"),D=()=>{console.log("Back to Welcome clicked, navigating to /"),s("/")},L=async()=>{try{_("checking");const R=await fetch("http://127.0.0.1:8080/api/v1/check/license/test",{method:"GET",signal:AbortSignal.timeout(5e3)});console.log("Network check - Status:",R.status),console.log("Network check - Headers:",R.headers),_("online")}catch(R){console.log("Network check failed:",R),_("offline")}},B=async R=>{try{_("checking");const F=await fetch(`http://127.0.0.1:8080/api/v1/check/license/${R}`,{signal:AbortSignal.timeout(1e4)});console.log("Response status:",F.status),console.log("Response headers:",F.headers);const T=F.headers.get("content-type");if(!T||!T.includes("application/json")){const se=await F.text();return console.log("Non-JSON response:",se),x({status:"error",message:"Server returned non-JSON response",rawResponse:se,statusCode:F.status}),_("online"),{success:!1,error:"INVALID_RESPONSE",message:`Server returned ${F.status}: ${se.substring(0,100)}...`}}const I=await F.json();return console.log("API Response:",I),x(I),_("online"),I.status==="ok"?{success:!0,hotel:I.hotel,isActive:I.hotel.status,isExpired:new Date(I.hotel.validUntil)<new Date}:{success:!1,error:"INVALID_LICENSE",message:I.message}}catch(F){return console.error("License verification error:",F),_("offline"),x({status:"error",message:"Network or parsing error",error:F.message,type:F.name}),{success:!1,error:"NETWORK_ERROR",message:F.message}}},z=async()=>{if(r.trim()){c(!0),x(null),w("");try{const R=await B(r);if(R.success)if(R.isActive&&!R.isExpired){if(!(await window.myAPI.checkHotelTable()).success)throw new Error("Failed to check hotel table");const T={name:R.hotel.hotelName||"GPOS Restaurant",status:90500,active:!0,isDelete:!1,isSyncronized:!1},I=await window.myAPI.createOrUpdateHotel(T);if(!I.success)throw new Error(I.message||"Failed to update hotel status");m(!0),c(!1),setTimeout(()=>{s("/")},3e3)}else m(!1),c(!1),w(R.isExpired?"License has expired":"License is inactive");else m(!1),c(!1),w(R.message||"Invalid license key")}catch(R){console.error("Error validating license:",R),m(!1),c(!1),w(R.message)}}},q=R=>{R.key==="Enter"&&z()};return v.useEffect(()=>{L()},[]),e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center relative overflow-hidden",style:{backgroundColor:t.dashboardBackground},children:[e.jsx("button",{onClick:()=>window.loginWindowControls?.close(),className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center text-gray-600 hover:text-red-600 hover:bg-red-50 transition-colors duration-200 rounded-full border border-gray-300 hover:border-red-300 z-50",title:"Close Application",children:e.jsx(St,{className:"w-5 h-5"})}),e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 rounded-full",style:{backgroundColor:t.primary}}),e.jsx("div",{className:"absolute top-40 right-32 w-24 h-24 rounded-full",style:{backgroundColor:t.primaryLight}}),e.jsx("div",{className:"absolute bottom-32 left-32 w-28 h-28 rounded-full",style:{backgroundColor:t.primary}}),e.jsx("div",{className:"absolute bottom-20 right-20 w-20 h-20 rounded-full",style:{backgroundColor:t.primaryLight}})]}),e.jsxs("div",{className:"relative z-10 text-center px-6 max-w-md mx-auto",children:[e.jsxs("button",{onClick:D,className:"mb-8 flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors duration-200 hover:scale-105 mx-auto px-4 py-2 rounded-lg hover:bg-gray-100 active:scale-95",children:[e.jsx(zc,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Back to Welcome"})]}),e.jsxs("div",{className:"mb-8 transform hover:scale-105 transition-transform duration-300",children:[e.jsx("div",{className:"w-24 h-24 mx-auto rounded-2xl border-4 flex items-center justify-center mb-6 shadow-2xl",style:{backgroundColor:t.primary,borderColor:t.primaryLight,boxShadow:`0 20px 40px rgba(0, 0, 0, 0.1), 0 0 0 1px ${t.primaryLight}20`},children:e.jsx(Wb,{className:"w-12 h-12 text-white"})}),e.jsxs("div",{className:"relative",children:[e.jsx(jo,{className:"absolute -top-2 -left-2 w-4 h-4 animate-pulse",style:{color:t.primaryLight}}),e.jsx(jo,{className:"absolute -top-2 -right-2 w-4 h-4 animate-pulse",style:{color:t.primaryLight}}),e.jsx(jo,{className:"absolute -bottom-2 -left-2 w-4 h-4 animate-pulse",style:{color:t.primaryLight}}),e.jsx(jo,{className:"absolute -bottom-2 -right-2 w-4 h-4 animate-pulse",style:{color:t.primaryLight}})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"License Verification"}),e.jsx("p",{className:"text-gray-600 mb-2 font-medium",children:"Enter your license key to continue"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Please provide your valid license key to access GPOS"}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[N==="checking"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm text-blue-600",children:"Checking server connection..."})]}),N==="online"&&e.jsxs(e.Fragment,{children:[e.jsx(e2,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-600",children:"Server connected"})]}),N==="offline"&&e.jsxs(e.Fragment,{children:[e.jsx(Z1,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-sm text-red-600",children:"Server offline"})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:r,onChange:R=>n(R.target.value),onKeyPress:q,placeholder:"Enter your license key...",className:`w-full px-4 py-4 rounded-xl border-2 transition-all duration-300 focus:outline-none focus:ring-4 text-center font-mono text-lg ${d===null?"border-gray-300 focus:border-blue-500 focus:ring-blue-100":d?"border-green-500 focus:border-green-500 focus:ring-green-100":"border-red-500 focus:border-red-500 focus:ring-red-100"}`,style:{backgroundColor:"white",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)"}}),d!==null&&e.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:d?e.jsx(xa,{className:"w-6 h-6 text-green-500"}):e.jsx(St,{className:"w-6 h-6 text-red-500"})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:z,disabled:!r.trim()||o,className:`group relative w-full px-8 py-4 rounded-xl cursor-pointer font-semibold text-lg transition-all duration-300 transform shadow-sm ${!r.trim()||o?"opacity-50 cursor-not-allowed":"hover:scale-105"}`,style:{backgroundColor:t.primary,color:"white",boxShadow:`0 8px 25px ${t.primary}40`},children:[o?e.jsxs("span",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Validating License..."]}):e.jsxs("span",{className:"flex items-center justify-center gap-3",children:[e.jsx(vl,{className:"w-5 h-5"}),"Validate License"]}),e.jsx("div",{className:`absolute inset-0 rounded-xl transition-opacity duration-300 ${!r.trim()||o?"opacity-0":"opacity-0 hover:opacity-100"}`,style:{background:`linear-gradient(45deg, ${t.primary}, ${t.primaryLight})`,filter:"blur(5px)",zIndex:-1}})]}),e.jsxs("div",{className:"mt-3 text-center space-y-2",children:[e.jsx("button",{onClick:()=>n("ABC123XYZ789DEF456GHI"),className:"text-sm text-gray-500 hover:text-gray-700 underline block",children:"Use Test License Key"}),e.jsx("button",{onClick:async()=>{try{const R=await fetch("http://127.0.0.1:8080/api/v1/check/license/test"),F=await R.text();console.log("Test endpoint response:",F),x({status:"test",message:"Test endpoint response",rawResponse:F,statusCode:R.status})}catch(R){console.error("Test endpoint error:",R),x({status:"error",message:"Test endpoint failed",error:R.message})}},className:"text-sm text-blue-500 hover:text-blue-700 underline block",children:"Test API Endpoint"})]})]}),d&&e.jsx("div",{className:"mb-6 p-4 rounded-xl bg-green-50 border border-green-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xa,{className:"w-6 h-6 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-800",children:"License Valid!"}),e.jsx("p",{className:"text-sm text-green-600",children:"Redirecting to login..."})]})]})}),d===!1&&e.jsx("div",{className:"mb-6 p-4 rounded-xl bg-red-50 border border-red-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(St,{className:"w-6 h-6 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-800",children:"Invalid License"}),e.jsx("p",{className:"text-sm text-red-600",children:p||"Please check your license key and try again."})]})]})}),h&&e.jsxs("div",{className:"mb-6 p-4 rounded-xl bg-blue-50 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(HN,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-800",children:"API Response (Testing)"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Server: 127.0.0.1:8080"})]})]}),e.jsx("div",{className:"bg-white p-3 rounded-lg border",children:e.jsx("pre",{className:"text-xs text-gray-700 overflow-x-auto whitespace-pre-wrap",children:h.rawResponse?`Status: ${h.statusCode||"N/A"}

Raw Response:
${h.rawResponse}`:JSON.stringify(h,null,2)})}),h.status==="ok"&&h.hotel&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Hotel:"})," ",h.hotel.hotelName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Admin:"})," ",h.hotel.adminName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",h.hotel.adminEmail]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Phone:"})," ",h.hotel.adminPhone]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",new Date(h.hotel.validUntil).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-1 px-2 py-1 rounded text-xs ${h.hotel.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:h.hotel.status?"Active":"Inactive"})]})]})})]}),e.jsx("div",{className:"p-4 rounded-xl text-left",style:{backgroundColor:"white",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",border:`1px solid ${t.primaryExtraLight}`},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 mt-1",style:{backgroundColor:t.primaryExtraLight},children:e.jsx(vl,{className:"w-4 h-4",style:{color:t.primary}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"License Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your license key ensures you have access to all GPOS features and updates. Contact support if you need assistance with your license."})]})]})})]}),e.jsx("div",{className:"absolute top-10 right-10 opacity-20",children:e.jsx("div",{className:"w-4 h-4 rounded-full animate-bounce",style:{backgroundColor:t.primary}})}),e.jsx("div",{className:"absolute bottom-10 left-10 opacity-20",children:e.jsx("div",{className:"w-6 h-6 rounded-full animate-bounce",style:{backgroundColor:t.primaryLight}})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ru(s){return s+.5|0}const wo=(s,t,r)=>Math.max(Math.min(s,r),t);function lu(s){return wo(Ru(s*2.55),0,255)}function Co(s){return wo(Ru(s*255),0,255)}function yi(s){return wo(Ru(s/2.55)/100,0,1)}function gy(s){return wo(Ru(s*100),0,100)}const Jr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Zx=[..."0123456789ABCDEF"],s3=s=>Zx[s&15],a3=s=>Zx[(s&240)>>4]+Zx[s&15],th=s=>(s&240)>>4===(s&15),r3=s=>th(s.r)&&th(s.g)&&th(s.b)&&th(s.a);function n3(s){var t=s.length,r;return s[0]==="#"&&(t===4||t===5?r={r:255&Jr[s[1]]*17,g:255&Jr[s[2]]*17,b:255&Jr[s[3]]*17,a:t===5?Jr[s[4]]*17:255}:(t===7||t===9)&&(r={r:Jr[s[1]]<<4|Jr[s[2]],g:Jr[s[3]]<<4|Jr[s[4]],b:Jr[s[5]]<<4|Jr[s[6]],a:t===9?Jr[s[7]]<<4|Jr[s[8]]:255})),r}const i3=(s,t)=>s<255?t(s):"";function o3(s){var t=r3(s)?s3:a3;return s?"#"+t(s.r)+t(s.g)+t(s.b)+i3(s.a,t):void 0}const l3=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Fv(s,t,r){const n=t*Math.min(r,1-r),o=(c,d=(c+s/30)%12)=>r-n*Math.max(Math.min(d-3,9-d,1),-1);return[o(0),o(8),o(4)]}function c3(s,t,r){const n=(o,c=(o+s/60)%6)=>r-r*t*Math.max(Math.min(c,4-c,1),0);return[n(5),n(3),n(1)]}function d3(s,t,r){const n=Fv(s,1,.5);let o;for(t+r>1&&(o=1/(t+r),t*=o,r*=o),o=0;o<3;o++)n[o]*=1-t-r,n[o]+=t;return n}function u3(s,t,r,n,o){return s===o?(t-r)/n+(t<r?6:0):t===o?(r-s)/n+2:(s-t)/n+4}function Mg(s){const r=s.r/255,n=s.g/255,o=s.b/255,c=Math.max(r,n,o),d=Math.min(r,n,o),m=(c+d)/2;let h,x,p;return c!==d&&(p=c-d,x=m>.5?p/(2-c-d):p/(c+d),h=u3(r,n,o,p,c),h=h*60+.5),[h|0,x||0,m]}function Og(s,t,r,n){return(Array.isArray(t)?s(t[0],t[1],t[2]):s(t,r,n)).map(Co)}function Rg(s,t,r){return Og(Fv,s,t,r)}function m3(s,t,r){return Og(d3,s,t,r)}function h3(s,t,r){return Og(c3,s,t,r)}function Lv(s){return(s%360+360)%360}function f3(s){const t=l3.exec(s);let r=255,n;if(!t)return;t[5]!==n&&(r=t[6]?lu(+t[5]):Co(+t[5]));const o=Lv(+t[2]),c=+t[3]/100,d=+t[4]/100;return t[1]==="hwb"?n=m3(o,c,d):t[1]==="hsv"?n=h3(o,c,d):n=Rg(o,c,d),{r:n[0],g:n[1],b:n[2],a:r}}function x3(s,t){var r=Mg(s);r[0]=Lv(r[0]+t),r=Rg(r),s.r=r[0],s.g=r[1],s.b=r[2]}function g3(s){if(!s)return;const t=Mg(s),r=t[0],n=gy(t[1]),o=gy(t[2]);return s.a<255?`hsla(${r}, ${n}%, ${o}%, ${yi(s.a)})`:`hsl(${r}, ${n}%, ${o}%)`}const py={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},yy={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function p3(){const s={},t=Object.keys(yy),r=Object.keys(py);let n,o,c,d,m;for(n=0;n<t.length;n++){for(d=m=t[n],o=0;o<r.length;o++)c=r[o],m=m.replace(c,py[c]);c=parseInt(yy[d],16),s[m]=[c>>16&255,c>>8&255,c&255]}return s}let sh;function y3(s){sh||(sh=p3(),sh.transparent=[0,0,0,0]);const t=sh[s.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const b3=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function v3(s){const t=b3.exec(s);let r=255,n,o,c;if(t){if(t[7]!==n){const d=+t[7];r=t[8]?lu(d):wo(d*255,0,255)}return n=+t[1],o=+t[3],c=+t[5],n=255&(t[2]?lu(n):wo(n,0,255)),o=255&(t[4]?lu(o):wo(o,0,255)),c=255&(t[6]?lu(c):wo(c,0,255)),{r:n,g:o,b:c,a:r}}}function j3(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${yi(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const Ax=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,_c=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function w3(s,t,r){const n=_c(yi(s.r)),o=_c(yi(s.g)),c=_c(yi(s.b));return{r:Co(Ax(n+r*(_c(yi(t.r))-n))),g:Co(Ax(o+r*(_c(yi(t.g))-o))),b:Co(Ax(c+r*(_c(yi(t.b))-c))),a:s.a+r*(t.a-s.a)}}function ah(s,t,r){if(s){let n=Mg(s);n[t]=Math.max(0,Math.min(n[t]+n[t]*r,t===0?360:1)),n=Rg(n),s.r=n[0],s.g=n[1],s.b=n[2]}}function Bv(s,t){return s&&Object.assign(t||{},s)}function by(s){var t={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(t={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(t.a=Co(s[3]))):(t=Bv(s,{r:0,g:0,b:0,a:1}),t.a=Co(t.a)),t}function N3(s){return s.charAt(0)==="r"?v3(s):f3(s)}class wu{constructor(t){if(t instanceof wu)return t;const r=typeof t;let n;r==="object"?n=by(t):r==="string"&&(n=n3(t)||y3(t)||N3(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Bv(this._rgb);return t&&(t.a=yi(t.a)),t}set rgb(t){this._rgb=by(t)}rgbString(){return this._valid?j3(this._rgb):void 0}hexString(){return this._valid?o3(this._rgb):void 0}hslString(){return this._valid?g3(this._rgb):void 0}mix(t,r){if(t){const n=this.rgb,o=t.rgb;let c;const d=r===c?.5:r,m=2*d-1,h=n.a-o.a,x=((m*h===-1?m:(m+h)/(1+m*h))+1)/2;c=1-x,n.r=255&x*n.r+c*o.r+.5,n.g=255&x*n.g+c*o.g+.5,n.b=255&x*n.b+c*o.b+.5,n.a=d*n.a+(1-d)*o.a,this.rgb=n}return this}interpolate(t,r){return t&&(this._rgb=w3(this._rgb,t._rgb,r)),this}clone(){return new wu(this.rgb)}alpha(t){return this._rgb.a=Co(t),this}clearer(t){const r=this._rgb;return r.a*=1-t,this}greyscale(){const t=this._rgb,r=Ru(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=r,this}opaquer(t){const r=this._rgb;return r.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return ah(this._rgb,2,t),this}darken(t){return ah(this._rgb,2,-t),this}saturate(t){return ah(this._rgb,1,t),this}desaturate(t){return ah(this._rgb,1,-t),this}rotate(t){return x3(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function xi(){}const S3=(()=>{let s=0;return()=>s++})();function Ns(s){return s==null}function oa(s){if(Array.isArray&&Array.isArray(s))return!0;const t=Object.prototype.toString.call(s);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function fs(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function Ga(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function Hn(s,t){return Ga(s)?s:t}function is(s,t){return typeof s>"u"?t:s}const C3=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/t,Uv=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*t:+s;function Ps(s,t,r){if(s&&typeof s.call=="function")return s.apply(r,t)}function ks(s,t,r,n){let o,c,d;if(oa(s))for(c=s.length,o=0;o<c;o++)t.call(r,s[o],o);else if(fs(s))for(d=Object.keys(s),c=d.length,o=0;o<c;o++)t.call(r,s[d[o]],d[o])}function Mh(s,t){let r,n,o,c;if(!s||!t||s.length!==t.length)return!1;for(r=0,n=s.length;r<n;++r)if(o=s[r],c=t[r],o.datasetIndex!==c.datasetIndex||o.index!==c.index)return!1;return!0}function Oh(s){if(oa(s))return s.map(Oh);if(fs(s)){const t=Object.create(null),r=Object.keys(s),n=r.length;let o=0;for(;o<n;++o)t[r[o]]=Oh(s[r[o]]);return t}return s}function $v(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function k3(s,t,r,n){if(!$v(s))return;const o=t[s],c=r[s];fs(o)&&fs(c)?Nu(o,c,n):t[s]=Oh(c)}function Nu(s,t,r){const n=oa(t)?t:[t],o=n.length;if(!fs(s))return s;r=r||{};const c=r.merger||k3;let d;for(let m=0;m<o;++m){if(d=n[m],!fs(d))continue;const h=Object.keys(d);for(let x=0,p=h.length;x<p;++x)c(h[x],s,d,r)}return s}function hu(s,t){return Nu(s,t,{merger:_3})}function _3(s,t,r){if(!$v(s))return;const n=t[s],o=r[s];fs(n)&&fs(o)?hu(n,o):Object.prototype.hasOwnProperty.call(t,s)||(t[s]=Oh(o))}const vy={"":s=>s,x:s=>s.x,y:s=>s.y};function A3(s){const t=s.split("."),r=[];let n="";for(const o of t)n+=o,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function D3(s){const t=A3(s);return r=>{for(const n of t){if(n==="")break;r=r&&r[n]}return r}}function jl(s,t){return(vy[t]||(vy[t]=D3(t)))(s)}function Ig(s){return s.charAt(0).toUpperCase()+s.slice(1)}const Su=s=>typeof s<"u",Ao=s=>typeof s=="function",jy=(s,t)=>{if(s.size!==t.size)return!1;for(const r of s)if(!t.has(r))return!1;return!0};function E3(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const _s=Math.PI,Hs=2*_s,T3=Hs+_s,Rh=Number.POSITIVE_INFINITY,M3=_s/180,ga=_s/2,ll=_s/4,wy=_s*2/3,Hv=Math.log10,Yn=Math.sign;function fu(s,t,r){return Math.abs(s-t)<r}function Ny(s){const t=Math.round(s);s=fu(s,t,s/1e3)?t:s;const r=Math.pow(10,Math.floor(Hv(s))),n=s/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function O3(s){const t=[],r=Math.sqrt(s);let n;for(n=1;n<r;n++)s%n===0&&(t.push(n),t.push(s/n));return r===(r|0)&&t.push(r),t.sort((o,c)=>o-c).pop(),t}function R3(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function Cu(s){return!R3(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function I3(s,t){const r=Math.round(s);return r-t<=s&&r+t>=s}function z3(s,t,r){let n,o,c;for(n=0,o=s.length;n<o;n++)c=s[n][r],isNaN(c)||(t.min=Math.min(t.min,c),t.max=Math.max(t.max,c))}function bi(s){return s*(_s/180)}function P3(s){return s*(180/_s)}function Sy(s){if(!Ga(s))return;let t=1,r=0;for(;Math.round(s*t)/t!==s;)t*=10,r++;return r}function Vv(s,t){const r=t.x-s.x,n=t.y-s.y,o=Math.sqrt(r*r+n*n);let c=Math.atan2(n,r);return c<-.5*_s&&(c+=Hs),{angle:c,distance:o}}function Jx(s,t){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function F3(s,t){return(s-t+T3)%Hs-_s}function Br(s){return(s%Hs+Hs)%Hs}function ku(s,t,r,n){const o=Br(s),c=Br(t),d=Br(r),m=Br(c-o),h=Br(d-o),x=Br(o-c),p=Br(o-d);return o===c||o===d||n&&c===d||m>h&&x<p}function Ka(s,t,r){return Math.max(t,Math.min(r,s))}function L3(s){return Ka(s,-32768,32767)}function vi(s,t,r,n=1e-6){return s>=Math.min(t,r)-n&&s<=Math.max(t,r)+n}function zg(s,t,r){r=r||(d=>s[d]<t);let n=s.length-1,o=0,c;for(;n-o>1;)c=o+n>>1,r(c)?o=c:n=c;return{lo:o,hi:n}}const gl=(s,t,r,n)=>zg(s,r,n?o=>{const c=s[o][t];return c<r||c===r&&s[o+1][t]===r}:o=>s[o][t]<r),B3=(s,t,r)=>zg(s,r,n=>s[n][t]>=r);function U3(s,t,r){let n=0,o=s.length;for(;n<o&&s[n]<t;)n++;for(;o>n&&s[o-1]>r;)o--;return n>0||o<s.length?s.slice(n,o):s}const qv=["push","pop","shift","splice","unshift"];function $3(s,t){if(s._chartjs){s._chartjs.listeners.push(t);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),qv.forEach(r=>{const n="_onData"+Ig(r),o=s[r];Object.defineProperty(s,r,{configurable:!0,enumerable:!1,value(...c){const d=o.apply(this,c);return s._chartjs.listeners.forEach(m=>{typeof m[n]=="function"&&m[n](...c)}),d}})})}function Cy(s,t){const r=s._chartjs;if(!r)return;const n=r.listeners,o=n.indexOf(t);o!==-1&&n.splice(o,1),!(n.length>0)&&(qv.forEach(c=>{delete s[c]}),delete s._chartjs)}function Kv(s){const t=new Set(s);return t.size===s.length?s:Array.from(t)}const Yv=(function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame})();function Gv(s,t){let r=[],n=!1;return function(...o){r=o,n||(n=!0,Yv.call(window,()=>{n=!1,s.apply(t,r)}))}}function H3(s,t){let r;return function(...n){return t?(clearTimeout(r),r=setTimeout(s,t,n)):s.apply(this,n),t}}const Pg=s=>s==="start"?"left":s==="end"?"right":"center",qa=(s,t,r)=>s==="start"?t:s==="end"?r:(t+r)/2,V3=(s,t,r,n)=>s===(n?"left":"right")?r:s==="center"?(t+r)/2:t;function q3(s,t,r){const n=t.length;let o=0,c=n;if(s._sorted){const{iScale:d,vScale:m,_parsed:h}=s,x=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,p=d.axis,{min:w,max:N,minDefined:_,maxDefined:D}=d.getUserBounds();if(_){if(o=Math.min(gl(h,p,w).lo,r?n:gl(t,p,d.getPixelForValue(w)).lo),x){const L=h.slice(0,o+1).reverse().findIndex(B=>!Ns(B[m.axis]));o-=Math.max(0,L)}o=Ka(o,0,n-1)}if(D){let L=Math.max(gl(h,d.axis,N,!0).hi+1,r?0:gl(t,p,d.getPixelForValue(N),!0).hi+1);if(x){const B=h.slice(L-1).findIndex(z=>!Ns(z[m.axis]));L+=Math.max(0,B)}c=Ka(L,o,n)-o}else c=n-o}return{start:o,count:c}}function K3(s){const{xScale:t,yScale:r,_scaleRanges:n}=s,o={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!n)return s._scaleRanges=o,!0;const c=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,o),c}const rh=s=>s===0||s===1,ky=(s,t,r)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-t)*Hs/r)),_y=(s,t,r)=>Math.pow(2,-10*s)*Math.sin((s-t)*Hs/r)+1,xu={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*ga)+1,easeOutSine:s=>Math.sin(s*ga),easeInOutSine:s=>-.5*(Math.cos(_s*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>rh(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>rh(s)?s:ky(s,.075,.3),easeOutElastic:s=>rh(s)?s:_y(s,.075,.3),easeInOutElastic(s){return rh(s)?s:s<.5?.5*ky(s*2,.1125,.45):.5+.5*_y(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let t=1.70158;return(s/=.5)<1?.5*(s*s*(((t*=1.525)+1)*s-t)):.5*((s-=2)*s*(((t*=1.525)+1)*s+t)+2)},easeInBounce:s=>1-xu.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?xu.easeInBounce(s*2)*.5:xu.easeOutBounce(s*2-1)*.5+.5};function Fg(s){if(s&&typeof s=="object"){const t=s.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Ay(s){return Fg(s)?s:new wu(s)}function Dx(s){return Fg(s)?s:new wu(s).saturate(.5).darken(.1).hexString()}const Y3=["x","y","borderWidth","radius","tension"],G3=["color","borderColor","backgroundColor"];function W3(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),s.set("animations",{colors:{type:"color",properties:G3},numbers:{type:"number",properties:Y3}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function X3(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Dy=new Map;function Q3(s,t){t=t||{};const r=s+JSON.stringify(t);let n=Dy.get(r);return n||(n=new Intl.NumberFormat(s,t),Dy.set(r,n)),n}function Lg(s,t,r){return Q3(t,r).format(s)}const Z3={values(s){return oa(s)?s:""+s},numeric(s,t,r){if(s===0)return"0";const n=this.chart.options.locale;let o,c=s;if(r.length>1){const x=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(x<1e-4||x>1e15)&&(o="scientific"),c=J3(s,r)}const d=Hv(Math.abs(c)),m=isNaN(d)?1:Math.max(Math.min(-1*Math.floor(d),20),0),h={notation:o,minimumFractionDigits:m,maximumFractionDigits:m};return Object.assign(h,this.options.ticks.format),Lg(s,n,h)}};function J3(s,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(r)>=1&&s!==Math.floor(s)&&(r=s-Math.floor(s)),r}var Wv={formatters:Z3};function e4(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,r)=>r.lineWidth,tickColor:(t,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Wv.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const wl=Object.create(null),eg=Object.create(null);function gu(s,t){if(!t)return s;const r=t.split(".");for(let n=0,o=r.length;n<o;++n){const c=r[n];s=s[c]||(s[c]=Object.create(null))}return s}function Ex(s,t,r){return typeof t=="string"?Nu(gu(s,t),r):Nu(gu(s,""),t)}class t4{constructor(t,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,o)=>Dx(o.backgroundColor),this.hoverBorderColor=(n,o)=>Dx(o.borderColor),this.hoverColor=(n,o)=>Dx(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(r)}set(t,r){return Ex(this,t,r)}get(t){return gu(this,t)}describe(t,r){return Ex(eg,t,r)}override(t,r){return Ex(wl,t,r)}route(t,r,n,o){const c=gu(this,t),d=gu(this,n),m="_"+r;Object.defineProperties(c,{[m]:{value:c[r],writable:!0},[r]:{enumerable:!0,get(){const h=this[m],x=d[o];return fs(h)?Object.assign({},x,h):is(h,x)},set(h){this[m]=h}}})}apply(t){t.forEach(r=>r(this))}}var ta=new t4({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[W3,X3,e4]);function s4(s){return!s||Ns(s.size)||Ns(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function Ey(s,t,r,n,o){let c=t[o];return c||(c=t[o]=s.measureText(o).width,r.push(o)),c>n&&(n=c),n}function cl(s,t,r){const n=s.currentDevicePixelRatio,o=r!==0?Math.max(r/2,.5):0;return Math.round((t-o)*n)/n+o}function Ty(s,t){!t&&!s||(t=t||s.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,s.width,s.height),t.restore())}function tg(s,t,r,n){Xv(s,t,r,n,null)}function Xv(s,t,r,n,o){let c,d,m,h,x,p,w,N;const _=t.pointStyle,D=t.rotation,L=t.radius;let B=(D||0)*M3;if(_&&typeof _=="object"&&(c=_.toString(),c==="[object HTMLImageElement]"||c==="[object HTMLCanvasElement]")){s.save(),s.translate(r,n),s.rotate(B),s.drawImage(_,-_.width/2,-_.height/2,_.width,_.height),s.restore();return}if(!(isNaN(L)||L<=0)){switch(s.beginPath(),_){default:o?s.ellipse(r,n,o/2,L,0,0,Hs):s.arc(r,n,L,0,Hs),s.closePath();break;case"triangle":p=o?o/2:L,s.moveTo(r+Math.sin(B)*p,n-Math.cos(B)*L),B+=wy,s.lineTo(r+Math.sin(B)*p,n-Math.cos(B)*L),B+=wy,s.lineTo(r+Math.sin(B)*p,n-Math.cos(B)*L),s.closePath();break;case"rectRounded":x=L*.516,h=L-x,d=Math.cos(B+ll)*h,w=Math.cos(B+ll)*(o?o/2-x:h),m=Math.sin(B+ll)*h,N=Math.sin(B+ll)*(o?o/2-x:h),s.arc(r-w,n-m,x,B-_s,B-ga),s.arc(r+N,n-d,x,B-ga,B),s.arc(r+w,n+m,x,B,B+ga),s.arc(r-N,n+d,x,B+ga,B+_s),s.closePath();break;case"rect":if(!D){h=Math.SQRT1_2*L,p=o?o/2:h,s.rect(r-p,n-h,2*p,2*h);break}B+=ll;case"rectRot":w=Math.cos(B)*(o?o/2:L),d=Math.cos(B)*L,m=Math.sin(B)*L,N=Math.sin(B)*(o?o/2:L),s.moveTo(r-w,n-m),s.lineTo(r+N,n-d),s.lineTo(r+w,n+m),s.lineTo(r-N,n+d),s.closePath();break;case"crossRot":B+=ll;case"cross":w=Math.cos(B)*(o?o/2:L),d=Math.cos(B)*L,m=Math.sin(B)*L,N=Math.sin(B)*(o?o/2:L),s.moveTo(r-w,n-m),s.lineTo(r+w,n+m),s.moveTo(r+N,n-d),s.lineTo(r-N,n+d);break;case"star":w=Math.cos(B)*(o?o/2:L),d=Math.cos(B)*L,m=Math.sin(B)*L,N=Math.sin(B)*(o?o/2:L),s.moveTo(r-w,n-m),s.lineTo(r+w,n+m),s.moveTo(r+N,n-d),s.lineTo(r-N,n+d),B+=ll,w=Math.cos(B)*(o?o/2:L),d=Math.cos(B)*L,m=Math.sin(B)*L,N=Math.sin(B)*(o?o/2:L),s.moveTo(r-w,n-m),s.lineTo(r+w,n+m),s.moveTo(r+N,n-d),s.lineTo(r-N,n+d);break;case"line":d=o?o/2:Math.cos(B)*L,m=Math.sin(B)*L,s.moveTo(r-d,n-m),s.lineTo(r+d,n+m);break;case"dash":s.moveTo(r,n),s.lineTo(r+Math.cos(B)*(o?o/2:L),n+Math.sin(B)*L);break;case!1:s.closePath();break}s.fill(),t.borderWidth>0&&s.stroke()}}function _u(s,t,r){return r=r||.5,!t||s&&s.x>t.left-r&&s.x<t.right+r&&s.y>t.top-r&&s.y<t.bottom+r}function Gh(s,t){s.save(),s.beginPath(),s.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),s.clip()}function Wh(s){s.restore()}function a4(s,t,r,n,o){if(!t)return s.lineTo(r.x,r.y);if(o==="middle"){const c=(t.x+r.x)/2;s.lineTo(c,t.y),s.lineTo(c,r.y)}else o==="after"!=!!n?s.lineTo(t.x,r.y):s.lineTo(r.x,t.y);s.lineTo(r.x,r.y)}function r4(s,t,r,n){if(!t)return s.lineTo(r.x,r.y);s.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function n4(s,t){t.translation&&s.translate(t.translation[0],t.translation[1]),Ns(t.rotation)||s.rotate(t.rotation),t.color&&(s.fillStyle=t.color),t.textAlign&&(s.textAlign=t.textAlign),t.textBaseline&&(s.textBaseline=t.textBaseline)}function i4(s,t,r,n,o){if(o.strikethrough||o.underline){const c=s.measureText(n),d=t-c.actualBoundingBoxLeft,m=t+c.actualBoundingBoxRight,h=r-c.actualBoundingBoxAscent,x=r+c.actualBoundingBoxDescent,p=o.strikethrough?(h+x)/2:x;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=o.decorationWidth||2,s.moveTo(d,p),s.lineTo(m,p),s.stroke()}}function o4(s,t){const r=s.fillStyle;s.fillStyle=t.color,s.fillRect(t.left,t.top,t.width,t.height),s.fillStyle=r}function Au(s,t,r,n,o,c={}){const d=oa(t)?t:[t],m=c.strokeWidth>0&&c.strokeColor!=="";let h,x;for(s.save(),s.font=o.string,n4(s,c),h=0;h<d.length;++h)x=d[h],c.backdrop&&o4(s,c.backdrop),m&&(c.strokeColor&&(s.strokeStyle=c.strokeColor),Ns(c.strokeWidth)||(s.lineWidth=c.strokeWidth),s.strokeText(x,r,n,c.maxWidth)),s.fillText(x,r,n,c.maxWidth),i4(s,r,n,x,c),n+=Number(o.lineHeight);s.restore()}function Ih(s,t){const{x:r,y:n,w:o,h:c,radius:d}=t;s.arc(r+d.topLeft,n+d.topLeft,d.topLeft,1.5*_s,_s,!0),s.lineTo(r,n+c-d.bottomLeft),s.arc(r+d.bottomLeft,n+c-d.bottomLeft,d.bottomLeft,_s,ga,!0),s.lineTo(r+o-d.bottomRight,n+c),s.arc(r+o-d.bottomRight,n+c-d.bottomRight,d.bottomRight,ga,0,!0),s.lineTo(r+o,n+d.topRight),s.arc(r+o-d.topRight,n+d.topRight,d.topRight,0,-ga,!0),s.lineTo(r+d.topLeft,n)}const l4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,c4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function d4(s,t){const r=(""+s).match(l4);if(!r||r[1]==="normal")return t*1.2;switch(s=+r[2],r[3]){case"px":return s;case"%":s/=100;break}return t*s}const u4=s=>+s||0;function Bg(s,t){const r={},n=fs(t),o=n?Object.keys(t):t,c=fs(s)?n?d=>is(s[d],s[t[d]]):d=>s[d]:()=>s;for(const d of o)r[d]=u4(c(d));return r}function Qv(s){return Bg(s,{top:"y",right:"x",bottom:"y",left:"x"})}function Tc(s){return Bg(s,["topLeft","topRight","bottomLeft","bottomRight"])}function rn(s){const t=Qv(s);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ya(s,t){s=s||{},t=t||ta.font;let r=is(s.size,t.size);typeof r=="string"&&(r=parseInt(r,10));let n=is(s.style,t.style);n&&!(""+n).match(c4)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const o={family:is(s.family,t.family),lineHeight:d4(is(s.lineHeight,t.lineHeight),r),size:r,style:n,weight:is(s.weight,t.weight),string:""};return o.string=s4(o),o}function nh(s,t,r,n){let o,c,d;for(o=0,c=s.length;o<c;++o)if(d=s[o],d!==void 0&&d!==void 0)return d}function m4(s,t,r){const{min:n,max:o}=s,c=Uv(t,(o-n)/2),d=(m,h)=>r&&m===0?0:m+h;return{min:d(n,-Math.abs(c)),max:d(o,c)}}function Sl(s,t){return Object.assign(Object.create(s),t)}function Ug(s,t=[""],r,n,o=()=>s[0]){const c=r||s;typeof n>"u"&&(n=tj("_fallback",s));const d={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:c,_fallback:n,_getTarget:o,override:m=>Ug([m,...s],t,c,n)};return new Proxy(d,{deleteProperty(m,h){return delete m[h],delete m._keys,delete s[0][h],!0},get(m,h){return Jv(m,h,()=>v4(h,t,s,m))},getOwnPropertyDescriptor(m,h){return Reflect.getOwnPropertyDescriptor(m._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(m,h){return Oy(m).includes(h)},ownKeys(m){return Oy(m)},set(m,h,x){const p=m._storage||(m._storage=o());return m[h]=p[h]=x,delete m._keys,!0}})}function Rc(s,t,r,n){const o={_cacheable:!1,_proxy:s,_context:t,_subProxy:r,_stack:new Set,_descriptors:Zv(s,n),setContext:c=>Rc(s,c,r,n),override:c=>Rc(s.override(c),t,r,n)};return new Proxy(o,{deleteProperty(c,d){return delete c[d],delete s[d],!0},get(c,d,m){return Jv(c,d,()=>f4(c,d,m))},getOwnPropertyDescriptor(c,d){return c._descriptors.allKeys?Reflect.has(s,d)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,d)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(c,d){return Reflect.has(s,d)},ownKeys(){return Reflect.ownKeys(s)},set(c,d,m){return s[d]=m,delete c[d],!0}})}function Zv(s,t={scriptable:!0,indexable:!0}){const{_scriptable:r=t.scriptable,_indexable:n=t.indexable,_allKeys:o=t.allKeys}=s;return{allKeys:o,scriptable:r,indexable:n,isScriptable:Ao(r)?r:()=>r,isIndexable:Ao(n)?n:()=>n}}const h4=(s,t)=>s?s+Ig(t):t,$g=(s,t)=>fs(t)&&s!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Jv(s,t,r){if(Object.prototype.hasOwnProperty.call(s,t)||t==="constructor")return s[t];const n=r();return s[t]=n,n}function f4(s,t,r){const{_proxy:n,_context:o,_subProxy:c,_descriptors:d}=s;let m=n[t];return Ao(m)&&d.isScriptable(t)&&(m=x4(t,m,s,r)),oa(m)&&m.length&&(m=g4(t,m,s,d.isIndexable)),$g(t,m)&&(m=Rc(m,o,c&&c[t],d)),m}function x4(s,t,r,n){const{_proxy:o,_context:c,_subProxy:d,_stack:m}=r;if(m.has(s))throw new Error("Recursion detected: "+Array.from(m).join("->")+"->"+s);m.add(s);let h=t(c,d||n);return m.delete(s),$g(s,h)&&(h=Hg(o._scopes,o,s,h)),h}function g4(s,t,r,n){const{_proxy:o,_context:c,_subProxy:d,_descriptors:m}=r;if(typeof c.index<"u"&&n(s))return t[c.index%t.length];if(fs(t[0])){const h=t,x=o._scopes.filter(p=>p!==h);t=[];for(const p of h){const w=Hg(x,o,s,p);t.push(Rc(w,c,d&&d[s],m))}}return t}function ej(s,t,r){return Ao(s)?s(t,r):s}const p4=(s,t)=>s===!0?t:typeof s=="string"?jl(t,s):void 0;function y4(s,t,r,n,o){for(const c of t){const d=p4(r,c);if(d){s.add(d);const m=ej(d._fallback,r,o);if(typeof m<"u"&&m!==r&&m!==n)return m}else if(d===!1&&typeof n<"u"&&r!==n)return null}return!1}function Hg(s,t,r,n){const o=t._rootScopes,c=ej(t._fallback,r,n),d=[...s,...o],m=new Set;m.add(n);let h=My(m,d,r,c||r,n);return h===null||typeof c<"u"&&c!==r&&(h=My(m,d,c,h,n),h===null)?!1:Ug(Array.from(m),[""],o,c,()=>b4(t,r,n))}function My(s,t,r,n,o){for(;r;)r=y4(s,t,r,n,o);return r}function b4(s,t,r){const n=s._getTarget();t in n||(n[t]={});const o=n[t];return oa(o)&&fs(r)?r:o||{}}function v4(s,t,r,n){let o;for(const c of t)if(o=tj(h4(c,s),r),typeof o<"u")return $g(s,o)?Hg(r,n,s,o):o}function tj(s,t){for(const r of t){if(!r)continue;const n=r[s];if(typeof n<"u")return n}}function Oy(s){let t=s._keys;return t||(t=s._keys=j4(s._scopes)),t}function j4(s){const t=new Set;for(const r of s)for(const n of Object.keys(r).filter(o=>!o.startsWith("_")))t.add(n);return Array.from(t)}const w4=Number.EPSILON||1e-14,Ic=(s,t)=>t<s.length&&!s[t].skip&&s[t],sj=s=>s==="x"?"y":"x";function N4(s,t,r,n){const o=s.skip?t:s,c=t,d=r.skip?t:r,m=Jx(c,o),h=Jx(d,c);let x=m/(m+h),p=h/(m+h);x=isNaN(x)?0:x,p=isNaN(p)?0:p;const w=n*x,N=n*p;return{previous:{x:c.x-w*(d.x-o.x),y:c.y-w*(d.y-o.y)},next:{x:c.x+N*(d.x-o.x),y:c.y+N*(d.y-o.y)}}}function S4(s,t,r){const n=s.length;let o,c,d,m,h,x=Ic(s,0);for(let p=0;p<n-1;++p)if(h=x,x=Ic(s,p+1),!(!h||!x)){if(fu(t[p],0,w4)){r[p]=r[p+1]=0;continue}o=r[p]/t[p],c=r[p+1]/t[p],m=Math.pow(o,2)+Math.pow(c,2),!(m<=9)&&(d=3/Math.sqrt(m),r[p]=o*d*t[p],r[p+1]=c*d*t[p])}}function C4(s,t,r="x"){const n=sj(r),o=s.length;let c,d,m,h=Ic(s,0);for(let x=0;x<o;++x){if(d=m,m=h,h=Ic(s,x+1),!m)continue;const p=m[r],w=m[n];d&&(c=(p-d[r])/3,m[`cp1${r}`]=p-c,m[`cp1${n}`]=w-c*t[x]),h&&(c=(h[r]-p)/3,m[`cp2${r}`]=p+c,m[`cp2${n}`]=w+c*t[x])}}function k4(s,t="x"){const r=sj(t),n=s.length,o=Array(n).fill(0),c=Array(n);let d,m,h,x=Ic(s,0);for(d=0;d<n;++d)if(m=h,h=x,x=Ic(s,d+1),!!h){if(x){const p=x[t]-h[t];o[d]=p!==0?(x[r]-h[r])/p:0}c[d]=m?x?Yn(o[d-1])!==Yn(o[d])?0:(o[d-1]+o[d])/2:o[d-1]:o[d]}S4(s,o,c),C4(s,c,t)}function ih(s,t,r){return Math.max(Math.min(s,r),t)}function _4(s,t){let r,n,o,c,d,m=_u(s[0],t);for(r=0,n=s.length;r<n;++r)d=c,c=m,m=r<n-1&&_u(s[r+1],t),c&&(o=s[r],d&&(o.cp1x=ih(o.cp1x,t.left,t.right),o.cp1y=ih(o.cp1y,t.top,t.bottom)),m&&(o.cp2x=ih(o.cp2x,t.left,t.right),o.cp2y=ih(o.cp2y,t.top,t.bottom)))}function A4(s,t,r,n,o){let c,d,m,h;if(t.spanGaps&&(s=s.filter(x=>!x.skip)),t.cubicInterpolationMode==="monotone")k4(s,o);else{let x=n?s[s.length-1]:s[0];for(c=0,d=s.length;c<d;++c)m=s[c],h=N4(x,m,s[Math.min(c+1,d-(n?0:1))%d],t.tension),m.cp1x=h.previous.x,m.cp1y=h.previous.y,m.cp2x=h.next.x,m.cp2y=h.next.y,x=m}t.capBezierPoints&&_4(s,r)}function Vg(){return typeof window<"u"&&typeof document<"u"}function qg(s){let t=s.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function zh(s,t,r){let n;return typeof s=="string"?(n=parseInt(s,10),s.indexOf("%")!==-1&&(n=n/100*t.parentNode[r])):n=s,n}const Xh=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function D4(s,t){return Xh(s).getPropertyValue(t)}const E4=["top","right","bottom","left"];function pl(s,t,r){const n={};r=r?"-"+r:"";for(let o=0;o<4;o++){const c=E4[o];n[c]=parseFloat(s[t+"-"+c+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const T4=(s,t,r)=>(s>0||t>0)&&(!r||!r.shadowRoot);function M4(s,t){const r=s.touches,n=r&&r.length?r[0]:s,{offsetX:o,offsetY:c}=n;let d=!1,m,h;if(T4(o,c,s.target))m=o,h=c;else{const x=t.getBoundingClientRect();m=n.clientX-x.left,h=n.clientY-x.top,d=!0}return{x:m,y:h,box:d}}function ml(s,t){if("native"in s)return s;const{canvas:r,currentDevicePixelRatio:n}=t,o=Xh(r),c=o.boxSizing==="border-box",d=pl(o,"padding"),m=pl(o,"border","width"),{x:h,y:x,box:p}=M4(s,r),w=d.left+(p&&m.left),N=d.top+(p&&m.top);let{width:_,height:D}=t;return c&&(_-=d.width+m.width,D-=d.height+m.height),{x:Math.round((h-w)/_*r.width/n),y:Math.round((x-N)/D*r.height/n)}}function O4(s,t,r){let n,o;if(t===void 0||r===void 0){const c=s&&qg(s);if(!c)t=s.clientWidth,r=s.clientHeight;else{const d=c.getBoundingClientRect(),m=Xh(c),h=pl(m,"border","width"),x=pl(m,"padding");t=d.width-x.width-h.width,r=d.height-x.height-h.height,n=zh(m.maxWidth,c,"clientWidth"),o=zh(m.maxHeight,c,"clientHeight")}}return{width:t,height:r,maxWidth:n||Rh,maxHeight:o||Rh}}const oh=s=>Math.round(s*10)/10;function R4(s,t,r,n){const o=Xh(s),c=pl(o,"margin"),d=zh(o.maxWidth,s,"clientWidth")||Rh,m=zh(o.maxHeight,s,"clientHeight")||Rh,h=O4(s,t,r);let{width:x,height:p}=h;if(o.boxSizing==="content-box"){const N=pl(o,"border","width"),_=pl(o,"padding");x-=_.width+N.width,p-=_.height+N.height}return x=Math.max(0,x-c.width),p=Math.max(0,n?x/n:p-c.height),x=oh(Math.min(x,d,h.maxWidth)),p=oh(Math.min(p,m,h.maxHeight)),x&&!p&&(p=oh(x/2)),(t!==void 0||r!==void 0)&&n&&h.height&&p>h.height&&(p=h.height,x=oh(Math.floor(p*n))),{width:x,height:p}}function Ry(s,t,r){const n=t||1,o=Math.floor(s.height*n),c=Math.floor(s.width*n);s.height=Math.floor(s.height),s.width=Math.floor(s.width);const d=s.canvas;return d.style&&(r||!d.style.height&&!d.style.width)&&(d.style.height=`${s.height}px`,d.style.width=`${s.width}px`),s.currentDevicePixelRatio!==n||d.height!==o||d.width!==c?(s.currentDevicePixelRatio=n,d.height=o,d.width=c,s.ctx.setTransform(n,0,0,n,0,0),!0):!1}const I4=(function(){let s=!1;try{const t={get passive(){return s=!0,!1}};Vg()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return s})();function Iy(s,t){const r=D4(s,t),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function hl(s,t,r,n){return{x:s.x+r*(t.x-s.x),y:s.y+r*(t.y-s.y)}}function z4(s,t,r,n){return{x:s.x+r*(t.x-s.x),y:n==="middle"?r<.5?s.y:t.y:n==="after"?r<1?s.y:t.y:r>0?t.y:s.y}}function P4(s,t,r,n){const o={x:s.cp2x,y:s.cp2y},c={x:t.cp1x,y:t.cp1y},d=hl(s,o,r),m=hl(o,c,r),h=hl(c,t,r),x=hl(d,m,r),p=hl(m,h,r);return hl(x,p,r)}const F4=function(s,t){return{x(r){return s+s+t-r},setWidth(r){t=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},L4=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,t){return s+t},leftForLtr(s,t){return s}}};function Mc(s,t,r){return s?F4(t,r):L4()}function aj(s,t){let r,n;(t==="ltr"||t==="rtl")&&(r=s.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),s.prevTextDirection=n)}function rj(s,t){t!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",t[0],t[1]))}function nj(s){return s==="angle"?{between:ku,compare:F3,normalize:Br}:{between:vi,compare:(t,r)=>t-r,normalize:t=>t}}function zy({start:s,end:t,count:r,loop:n,style:o}){return{start:s%r,end:t%r,loop:n&&(t-s+1)%r===0,style:o}}function B4(s,t,r){const{property:n,start:o,end:c}=r,{between:d,normalize:m}=nj(n),h=t.length;let{start:x,end:p,loop:w}=s,N,_;if(w){for(x+=h,p+=h,N=0,_=h;N<_&&d(m(t[x%h][n]),o,c);++N)x--,p--;x%=h,p%=h}return p<x&&(p+=h),{start:x,end:p,loop:w,style:s.style}}function ij(s,t,r){if(!r)return[s];const{property:n,start:o,end:c}=r,d=t.length,{compare:m,between:h,normalize:x}=nj(n),{start:p,end:w,loop:N,style:_}=B4(s,t,r),D=[];let L=!1,B=null,z,q,R;const F=()=>h(o,R,z)&&m(o,R)!==0,T=()=>m(c,z)===0||h(c,R,z),I=()=>L||F(),se=()=>!L||T();for(let oe=p,_e=p;oe<=w;++oe)q=t[oe%d],!q.skip&&(z=x(q[n]),z!==R&&(L=h(z,o,c),B===null&&I()&&(B=m(z,o)===0?oe:_e),B!==null&&se()&&(D.push(zy({start:B,end:oe,loop:N,count:d,style:_})),B=null),_e=oe,R=z));return B!==null&&D.push(zy({start:B,end:w,loop:N,count:d,style:_})),D}function oj(s,t){const r=[],n=s.segments;for(let o=0;o<n.length;o++){const c=ij(n[o],s.points,t);c.length&&r.push(...c)}return r}function U4(s,t,r,n){let o=0,c=t-1;if(r&&!n)for(;o<t&&!s[o].skip;)o++;for(;o<t&&s[o].skip;)o++;for(o%=t,r&&(c+=o);c>o&&s[c%t].skip;)c--;return c%=t,{start:o,end:c}}function $4(s,t,r,n){const o=s.length,c=[];let d=t,m=s[t],h;for(h=t+1;h<=r;++h){const x=s[h%o];x.skip||x.stop?m.skip||(n=!1,c.push({start:t%o,end:(h-1)%o,loop:n}),t=d=x.stop?h:null):(d=h,m.skip&&(t=h)),m=x}return d!==null&&c.push({start:t%o,end:d%o,loop:n}),c}function H4(s,t){const r=s.points,n=s.options.spanGaps,o=r.length;if(!o)return[];const c=!!s._loop,{start:d,end:m}=U4(r,o,c,n);if(n===!0)return Py(s,[{start:d,end:m,loop:c}],r,t);const h=m<d?m+o:m,x=!!s._fullLoop&&d===0&&m===o-1;return Py(s,$4(r,d,h,x),r,t)}function Py(s,t,r,n){return!n||!n.setContext||!r?t:V4(s,t,r,n)}function V4(s,t,r,n){const o=s._chart.getContext(),c=Fy(s.options),{_datasetIndex:d,options:{spanGaps:m}}=s,h=r.length,x=[];let p=c,w=t[0].start,N=w;function _(D,L,B,z){const q=m?-1:1;if(D!==L){for(D+=h;r[D%h].skip;)D-=q;for(;r[L%h].skip;)L+=q;D%h!==L%h&&(x.push({start:D%h,end:L%h,loop:B,style:z}),p=z,w=L%h)}}for(const D of t){w=m?w:D.start;let L=r[w%h],B;for(N=w+1;N<=D.end;N++){const z=r[N%h];B=Fy(n.setContext(Sl(o,{type:"segment",p0:L,p1:z,p0DataIndex:(N-1)%h,p1DataIndex:N%h,datasetIndex:d}))),q4(B,p)&&_(w,N-1,D.loop,p),L=z,p=B}w<N-1&&_(w,N-1,D.loop,p)}return x}function Fy(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function q4(s,t){if(!t)return!1;const r=[],n=function(o,c){return Fg(c)?(r.includes(c)||r.push(c),r.indexOf(c)):c};return JSON.stringify(s,n)!==JSON.stringify(t,n)}function lh(s,t,r){return s.options.clip?s[r]:t[r]}function K4(s,t){const{xScale:r,yScale:n}=s;return r&&n?{left:lh(r,t,"left"),right:lh(r,t,"right"),top:lh(n,t,"top"),bottom:lh(n,t,"bottom")}:t}function lj(s,t){const r=t._clip;if(r.disabled)return!1;const n=K4(t,s.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?s.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?s.height:n.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Y4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,r,n,o){const c=r.listeners[o],d=r.duration;c.forEach(m=>m({chart:t,initial:r.initial,numSteps:d,currentStep:Math.min(n-r.start,d)}))}_refresh(){this._request||(this._running=!0,this._request=Yv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let r=0;this._charts.forEach((n,o)=>{if(!n.running||!n.items.length)return;const c=n.items;let d=c.length-1,m=!1,h;for(;d>=0;--d)h=c[d],h._active?(h._total>n.duration&&(n.duration=h._total),h.tick(t),m=!0):(c[d]=c[c.length-1],c.pop());m&&(o.draw(),this._notify(o,n,t,"progress")),c.length||(n.running=!1,this._notify(o,n,t,"complete"),n.initial=!1),r+=c.length}),this._lastDate=t,r===0&&(this._running=!1)}_getAnims(t){const r=this._charts;let n=r.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(t,n)),n}listen(t,r,n){this._getAnims(t).listeners[r].push(n)}add(t,r){!r||!r.length||this._getAnims(t).items.push(...r)}has(t){return this._getAnims(t).items.length>0}start(t){const r=this._charts.get(t);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,o)=>Math.max(n,o._duration),0),this._refresh())}running(t){if(!this._running)return!1;const r=this._charts.get(t);return!(!r||!r.running||!r.items.length)}stop(t){const r=this._charts.get(t);if(!r||!r.items.length)return;const n=r.items;let o=n.length-1;for(;o>=0;--o)n[o].cancel();r.items=[],this._notify(t,r,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var gi=new Y4;const Ly="transparent",G4={boolean(s,t,r){return r>.5?t:s},color(s,t,r){const n=Ay(s||Ly),o=n.valid&&Ay(t||Ly);return o&&o.valid?o.mix(n,r).hexString():t},number(s,t,r){return s+(t-s)*r}};class W4{constructor(t,r,n,o){const c=r[n];o=nh([t.to,o,c,t.from]);const d=nh([t.from,c,o]);this._active=!0,this._fn=t.fn||G4[t.type||typeof d],this._easing=xu[t.easing]||xu.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=r,this._prop=n,this._from=d,this._to=o,this._promises=void 0}active(){return this._active}update(t,r,n){if(this._active){this._notify(!1);const o=this._target[this._prop],c=n-this._start,d=this._duration-c;this._start=n,this._duration=Math.floor(Math.max(d,t.duration)),this._total+=c,this._loop=!!t.loop,this._to=nh([t.to,r,o,t.from]),this._from=nh([t.from,o,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const r=t-this._start,n=this._duration,o=this._prop,c=this._from,d=this._loop,m=this._to;let h;if(this._active=c!==m&&(d||r<n),!this._active){this._target[o]=m,this._notify(!0);return}if(r<0){this._target[o]=c;return}h=r/n%2,h=d&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[o]=this._fn(c,m,h)}wait(){const t=this._promises||(this._promises=[]);return new Promise((r,n)=>{t.push({res:r,rej:n})})}_notify(t){const r=t?"res":"rej",n=this._promises||[];for(let o=0;o<n.length;o++)n[o][r]()}}class cj{constructor(t,r){this._chart=t,this._properties=new Map,this.configure(r)}configure(t){if(!fs(t))return;const r=Object.keys(ta.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(o=>{const c=t[o];if(!fs(c))return;const d={};for(const m of r)d[m]=c[m];(oa(c.properties)&&c.properties||[o]).forEach(m=>{(m===o||!n.has(m))&&n.set(m,d)})})}_animateOptions(t,r){const n=r.options,o=Q4(t,n);if(!o)return[];const c=this._createAnimations(o,n);return n.$shared&&X4(t.options.$animations,n).then(()=>{t.options=n},()=>{}),c}_createAnimations(t,r){const n=this._properties,o=[],c=t.$animations||(t.$animations={}),d=Object.keys(r),m=Date.now();let h;for(h=d.length-1;h>=0;--h){const x=d[h];if(x.charAt(0)==="$")continue;if(x==="options"){o.push(...this._animateOptions(t,r));continue}const p=r[x];let w=c[x];const N=n.get(x);if(w)if(N&&w.active()){w.update(N,p,m);continue}else w.cancel();if(!N||!N.duration){t[x]=p;continue}c[x]=w=new W4(N,t,x,p),o.push(w)}return o}update(t,r){if(this._properties.size===0){Object.assign(t,r);return}const n=this._createAnimations(t,r);if(n.length)return gi.add(this._chart,n),!0}}function X4(s,t){const r=[],n=Object.keys(t);for(let o=0;o<n.length;o++){const c=s[n[o]];c&&c.active()&&r.push(c.wait())}return Promise.all(r)}function Q4(s,t){if(!t)return;let r=s.options;if(!r){s.options=t;return}return r.$shared&&(s.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function By(s,t){const r=s&&s.options||{},n=r.reverse,o=r.min===void 0?t:0,c=r.max===void 0?t:0;return{start:n?c:o,end:n?o:c}}function Z4(s,t,r){if(r===!1)return!1;const n=By(s,r),o=By(t,r);return{top:o.end,right:n.end,bottom:o.start,left:n.start}}function J4(s){let t,r,n,o;return fs(s)?(t=s.top,r=s.right,n=s.bottom,o=s.left):t=r=n=o=s,{top:t,right:r,bottom:n,left:o,disabled:s===!1}}function dj(s,t){const r=[],n=s._getSortedDatasetMetas(t);let o,c;for(o=0,c=n.length;o<c;++o)r.push(n[o].index);return r}function Uy(s,t,r,n={}){const o=s.keys,c=n.mode==="single";let d,m,h,x;if(t===null)return;let p=!1;for(d=0,m=o.length;d<m;++d){if(h=+o[d],h===r){if(p=!0,n.all)continue;break}x=s.values[h],Ga(x)&&(c||t===0||Yn(t)===Yn(x))&&(t+=x)}return!p&&!n.all?0:t}function ek(s,t){const{iScale:r,vScale:n}=t,o=r.axis==="x"?"x":"y",c=n.axis==="x"?"x":"y",d=Object.keys(s),m=new Array(d.length);let h,x,p;for(h=0,x=d.length;h<x;++h)p=d[h],m[h]={[o]:p,[c]:s[p]};return m}function Tx(s,t){const r=s&&s.options.stacked;return r||r===void 0&&t.stack!==void 0}function tk(s,t,r){return`${s.id}.${t.id}.${r.stack||r.type}`}function sk(s){const{min:t,max:r,minDefined:n,maxDefined:o}=s.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:o?r:Number.POSITIVE_INFINITY}}function ak(s,t,r){const n=s[t]||(s[t]={});return n[r]||(n[r]={})}function $y(s,t,r,n){for(const o of t.getMatchingVisibleMetas(n).reverse()){const c=s[o.index];if(r&&c>0||!r&&c<0)return o.index}return null}function Hy(s,t){const{chart:r,_cachedMeta:n}=s,o=r._stacks||(r._stacks={}),{iScale:c,vScale:d,index:m}=n,h=c.axis,x=d.axis,p=tk(c,d,n),w=t.length;let N;for(let _=0;_<w;++_){const D=t[_],{[h]:L,[x]:B}=D,z=D._stacks||(D._stacks={});N=z[x]=ak(o,p,L),N[m]=B,N._top=$y(N,d,!0,n.type),N._bottom=$y(N,d,!1,n.type);const q=N._visualValues||(N._visualValues={});q[m]=B}}function Mx(s,t){const r=s.scales;return Object.keys(r).filter(n=>r[n].axis===t).shift()}function rk(s,t){return Sl(s,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function nk(s,t,r){return Sl(s,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}function tu(s,t){const r=s.controller.index,n=s.vScale&&s.vScale.axis;if(n){t=t||s._parsed;for(const o of t){const c=o._stacks;if(!c||c[n]===void 0||c[n][r]===void 0)return;delete c[n][r],c[n]._visualValues!==void 0&&c[n]._visualValues[r]!==void 0&&delete c[n]._visualValues[r]}}}const Ox=s=>s==="reset"||s==="none",Vy=(s,t)=>t?s:Object.assign({},s),ik=(s,t,r)=>s&&!t.hidden&&t._stacked&&{keys:dj(r,!0),values:null};class Qh{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Tx(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&tu(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,n=this.getDataset(),o=(w,N,_,D)=>w==="x"?N:w==="r"?D:_,c=r.xAxisID=is(n.xAxisID,Mx(t,"x")),d=r.yAxisID=is(n.yAxisID,Mx(t,"y")),m=r.rAxisID=is(n.rAxisID,Mx(t,"r")),h=r.indexAxis,x=r.iAxisID=o(h,c,d,m),p=r.vAxisID=o(h,d,c,m);r.xScale=this.getScaleForId(c),r.yScale=this.getScaleForId(d),r.rScale=this.getScaleForId(m),r.iScale=this.getScaleForId(x),r.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Cy(this._data,this),t._stacked&&tu(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),n=this._data;if(fs(r)){const o=this._cachedMeta;this._data=ek(r,o)}else if(n!==r){if(n){Cy(n,this);const o=this._cachedMeta;tu(o),o._parsed=[]}r&&Object.isExtensible(r)&&$3(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,n=this.getDataset();let o=!1;this._dataCheck();const c=r._stacked;r._stacked=Tx(r.vScale,r),r.stack!==n.stack&&(o=!0,tu(r),r.stack=n.stack),this._resyncElements(t),(o||c!==r._stacked)&&(Hy(this,r._parsed),r._stacked=Tx(r.vScale,r))}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:n,_data:o}=this,{iScale:c,_stacked:d}=n,m=c.axis;let h=t===0&&r===o.length?!0:n._sorted,x=t>0&&n._parsed[t-1],p,w,N;if(this._parsing===!1)n._parsed=o,n._sorted=!0,N=o;else{oa(o[t])?N=this.parseArrayData(n,o,t,r):fs(o[t])?N=this.parseObjectData(n,o,t,r):N=this.parsePrimitiveData(n,o,t,r);const _=()=>w[m]===null||x&&w[m]<x[m];for(p=0;p<r;++p)n._parsed[p+t]=w=N[p],h&&(_()&&(h=!1),x=w);n._sorted=h}d&&Hy(this,N)}parsePrimitiveData(t,r,n,o){const{iScale:c,vScale:d}=t,m=c.axis,h=d.axis,x=c.getLabels(),p=c===d,w=new Array(o);let N,_,D;for(N=0,_=o;N<_;++N)D=N+n,w[N]={[m]:p||c.parse(x[D],D),[h]:d.parse(r[D],D)};return w}parseArrayData(t,r,n,o){const{xScale:c,yScale:d}=t,m=new Array(o);let h,x,p,w;for(h=0,x=o;h<x;++h)p=h+n,w=r[p],m[h]={x:c.parse(w[0],p),y:d.parse(w[1],p)};return m}parseObjectData(t,r,n,o){const{xScale:c,yScale:d}=t,{xAxisKey:m="x",yAxisKey:h="y"}=this._parsing,x=new Array(o);let p,w,N,_;for(p=0,w=o;p<w;++p)N=p+n,_=r[N],x[p]={x:c.parse(jl(_,m),N),y:d.parse(jl(_,h),N)};return x}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,n){const o=this.chart,c=this._cachedMeta,d=r[t.axis],m={keys:dj(o,!0),values:r._stacks[t.axis]._visualValues};return Uy(m,d,c.index,{mode:n})}updateRangeFromParsed(t,r,n,o){const c=n[r.axis];let d=c===null?NaN:c;const m=o&&n._stacks[r.axis];o&&m&&(o.values=m,d=Uy(o,c,this._cachedMeta.index)),t.min=Math.min(t.min,d),t.max=Math.max(t.max,d)}getMinMax(t,r){const n=this._cachedMeta,o=n._parsed,c=n._sorted&&t===n.iScale,d=o.length,m=this._getOtherScale(t),h=ik(r,n,this.chart),x={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:w}=sk(m);let N,_;function D(){_=o[N];const L=_[m.axis];return!Ga(_[t.axis])||p>L||w<L}for(N=0;N<d&&!(!D()&&(this.updateRangeFromParsed(x,t,_,h),c));++N);if(c){for(N=d-1;N>=0;--N)if(!D()){this.updateRangeFromParsed(x,t,_,h);break}}return x}getAllParsedValues(t){const r=this._cachedMeta._parsed,n=[];let o,c,d;for(o=0,c=r.length;o<c;++o)d=r[o][t.axis],Ga(d)&&n.push(d);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,n=r.iScale,o=r.vScale,c=this.getParsed(t);return{label:n?""+n.getLabelForValue(c[n.axis]):"",value:o?""+o.getLabelForValue(c[o.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=J4(is(this.options.clip,Z4(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,r=this.chart,n=this._cachedMeta,o=n.data||[],c=r.chartArea,d=[],m=this._drawStart||0,h=this._drawCount||o.length-m,x=this.options.drawActiveElementsOnTop;let p;for(n.dataset&&n.dataset.draw(t,c,m,h),p=m;p<m+h;++p){const w=o[p];w.hidden||(w.active&&x?d.push(w):w.draw(t,c))}for(p=0;p<d.length;++p)d[p].draw(t,c)}getStyle(t,r){const n=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,r,n){const o=this.getDataset();let c;if(t>=0&&t<this._cachedMeta.data.length){const d=this._cachedMeta.data[t];c=d.$context||(d.$context=nk(this.getContext(),t,d)),c.parsed=this.getParsed(t),c.raw=o.data[t],c.index=c.dataIndex=t}else c=this.$context||(this.$context=rk(this.chart.getContext(),this.index)),c.dataset=o,c.index=c.datasetIndex=this.index;return c.active=!!r,c.mode=n,c}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",n){const o=r==="active",c=this._cachedDataOpts,d=t+"-"+r,m=c[d],h=this.enableOptionSharing&&Su(n);if(m)return Vy(m,h);const x=this.chart.config,p=x.datasetElementScopeKeys(this._type,t),w=o?[`${t}Hover`,"hover",t,""]:[t,""],N=x.getOptionScopes(this.getDataset(),p),_=Object.keys(ta.elements[t]),D=()=>this.getContext(n,o,r),L=x.resolveNamedOptions(N,_,D,w);return L.$shared&&(L.$shared=h,c[d]=Object.freeze(Vy(L,h))),L}_resolveAnimations(t,r,n){const o=this.chart,c=this._cachedDataOpts,d=`animation-${r}`,m=c[d];if(m)return m;let h;if(o.options.animation!==!1){const p=this.chart.config,w=p.datasetAnimationScopeKeys(this._type,r),N=p.getOptionScopes(this.getDataset(),w);h=p.createResolver(N,this.getContext(t,n,r))}const x=new cj(o,h&&h.animations);return h&&h._cacheable&&(c[d]=Object.freeze(x)),x}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||Ox(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const n=this.resolveDataElementOptions(t,r),o=this._sharedOptions,c=this.getSharedOptions(n),d=this.includeOptions(r,c)||c!==o;return this.updateSharedOptions(c,r,n),{sharedOptions:c,includeOptions:d}}updateElement(t,r,n,o){Ox(o)?Object.assign(t,n):this._resolveAnimations(r,o).update(t,n)}updateSharedOptions(t,r,n){t&&!Ox(r)&&this._resolveAnimations(void 0,r).update(t,n)}_setStyle(t,r,n,o){t.active=o;const c=this.getStyle(r,o);this._resolveAnimations(r,n,o).update(t,{options:!o&&this.getSharedOptions(c)||c})}removeHoverStyle(t,r,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,r,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,n=this._cachedMeta.data;for(const[m,h,x]of this._syncList)this[m](h,x);this._syncList=[];const o=n.length,c=r.length,d=Math.min(c,o);d&&this.parse(0,d),c>o?this._insertElements(o,c-o,t):c<o&&this._removeElements(c,o-c)}_insertElements(t,r,n=!0){const o=this._cachedMeta,c=o.data,d=t+r;let m;const h=x=>{for(x.length+=r,m=x.length-1;m>=d;m--)x[m]=x[m-r]};for(h(c),m=t;m<d;++m)c[m]=new this.dataElementType;this._parsing&&h(o._parsed),this.parse(t,r),n&&this.updateElements(c,t,r,"reset")}updateElements(t,r,n,o){}_removeElements(t,r){const n=this._cachedMeta;if(this._parsing){const o=n._parsed.splice(t,r);n._stacked&&tu(n,o)}n.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,n,o]=t;this[r](n,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ok(s,t){if(!s._cache.$bar){const r=s.getMatchingVisibleMetas(t);let n=[];for(let o=0,c=r.length;o<c;o++)n=n.concat(r[o].controller.getAllParsedValues(s));s._cache.$bar=Kv(n.sort((o,c)=>o-c))}return s._cache.$bar}function lk(s){const t=s.iScale,r=ok(t,s.type);let n=t._length,o,c,d,m;const h=()=>{d===32767||d===-32768||(Su(m)&&(n=Math.min(n,Math.abs(d-m)||n)),m=d)};for(o=0,c=r.length;o<c;++o)d=t.getPixelForValue(r[o]),h();for(m=void 0,o=0,c=t.ticks.length;o<c;++o)d=t.getPixelForTick(o),h();return n}function ck(s,t,r,n){const o=r.barThickness;let c,d;return Ns(o)?(c=t.min*r.categoryPercentage,d=r.barPercentage):(c=o*n,d=1),{chunk:c/n,ratio:d,start:t.pixels[s]-c/2}}function dk(s,t,r,n){const o=t.pixels,c=o[s];let d=s>0?o[s-1]:null,m=s<o.length-1?o[s+1]:null;const h=r.categoryPercentage;d===null&&(d=c-(m===null?t.end-t.start:m-c)),m===null&&(m=c+c-d);const x=c-(c-Math.min(d,m))/2*h;return{chunk:Math.abs(m-d)/2*h/n,ratio:r.barPercentage,start:x}}function uk(s,t,r,n){const o=r.parse(s[0],n),c=r.parse(s[1],n),d=Math.min(o,c),m=Math.max(o,c);let h=d,x=m;Math.abs(d)>Math.abs(m)&&(h=m,x=d),t[r.axis]=x,t._custom={barStart:h,barEnd:x,start:o,end:c,min:d,max:m}}function uj(s,t,r,n){return oa(s)?uk(s,t,r,n):t[r.axis]=r.parse(s,n),t}function qy(s,t,r,n){const o=s.iScale,c=s.vScale,d=o.getLabels(),m=o===c,h=[];let x,p,w,N;for(x=r,p=r+n;x<p;++x)N=t[x],w={},w[o.axis]=m||o.parse(d[x],x),h.push(uj(N,w,c,x));return h}function Rx(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function mk(s,t,r){return s!==0?Yn(s):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}function hk(s){let t,r,n,o,c;return s.horizontal?(t=s.base>s.x,r="left",n="right"):(t=s.base<s.y,r="bottom",n="top"),t?(o="end",c="start"):(o="start",c="end"),{start:r,end:n,reverse:t,top:o,bottom:c}}function fk(s,t,r,n){let o=t.borderSkipped;const c={};if(!o){s.borderSkipped=c;return}if(o===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:d,end:m,reverse:h,top:x,bottom:p}=hk(s);o==="middle"&&r&&(s.enableBorderRadius=!0,(r._top||0)===n?o=x:(r._bottom||0)===n?o=p:(c[Ky(p,d,m,h)]=!0,o=x)),c[Ky(o,d,m,h)]=!0,s.borderSkipped=c}function Ky(s,t,r,n){return n?(s=xk(s,t,r),s=Yy(s,r,t)):s=Yy(s,t,r),s}function xk(s,t,r){return s===t?r:s===r?t:s}function Yy(s,t,r){return s==="start"?t:s==="end"?r:s}function gk(s,{inflateAmount:t},r){s.inflateAmount=t==="auto"?r===1?.33:0:t}class pk extends Qh{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,n,o){return qy(t,r,n,o)}parseArrayData(t,r,n,o){return qy(t,r,n,o)}parseObjectData(t,r,n,o){const{iScale:c,vScale:d}=t,{xAxisKey:m="x",yAxisKey:h="y"}=this._parsing,x=c.axis==="x"?m:h,p=d.axis==="x"?m:h,w=[];let N,_,D,L;for(N=n,_=n+o;N<_;++N)L=r[N],D={},D[c.axis]=c.parse(jl(L,x),N),w.push(uj(jl(L,p),D,d,N));return w}updateRangeFromParsed(t,r,n,o){super.updateRangeFromParsed(t,r,n,o);const c=n._custom;c&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,c.min),t.max=Math.max(t.max,c.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:n,vScale:o}=r,c=this.getParsed(t),d=c._custom,m=Rx(d)?"["+d.start+", "+d.end+"]":""+o.getLabelForValue(c[o.axis]);return{label:""+n.getLabelForValue(c[n.axis]),value:m}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,n,o){const c=o==="reset",{index:d,_cachedMeta:{vScale:m}}=this,h=m.getBasePixel(),x=m.isHorizontal(),p=this._getRuler(),{sharedOptions:w,includeOptions:N}=this._getSharedOptions(r,o);for(let _=r;_<r+n;_++){const D=this.getParsed(_),L=c||Ns(D[m.axis])?{base:h,head:h}:this._calculateBarValuePixels(_),B=this._calculateBarIndexPixels(_,p),z=(D._stacks||{})[m.axis],q={horizontal:x,base:L.base,enableBorderRadius:!z||Rx(D._custom)||d===z._top||d===z._bottom,x:x?L.head:B.center,y:x?B.center:L.head,height:x?B.size:Math.abs(L.size),width:x?Math.abs(L.size):B.size};N&&(q.options=w||this.resolveDataElementOptions(_,t[_].active?"active":o));const R=q.options||t[_].options;fk(q,R,z,d),gk(q,R,p.ratio),this.updateElement(t[_],_,q,o)}}_getStacks(t,r){const{iScale:n}=this._cachedMeta,o=n.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),c=n.options.stacked,d=[],m=this._cachedMeta.controller.getParsed(r),h=m&&m[n.axis],x=p=>{const w=p._parsed.find(_=>_[n.axis]===h),N=w&&w[p.vScale.axis];if(Ns(N)||isNaN(N))return!0};for(const p of o)if(!(r!==void 0&&x(p))&&((c===!1||d.indexOf(p.stack)===-1||c===void 0&&p.stack===void 0)&&d.push(p.stack),p.index===t))break;return d.length||d.push(void 0),d}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===r).shift()}_getAxis(){const t={},r=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[is(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,n){const o=this._getStacks(t,n),c=r!==void 0?o.indexOf(r):-1;return c===-1?o.length-1:c}_getRuler(){const t=this.options,r=this._cachedMeta,n=r.iScale,o=[];let c,d;for(c=0,d=r.data.length;c<d;++c)o.push(n.getPixelForValue(this.getParsed(c)[n.axis],c));const m=t.barThickness;return{min:m||lk(r),pixels:o,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:m?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:n,index:o},options:{base:c,minBarLength:d}}=this,m=c||0,h=this.getParsed(t),x=h._custom,p=Rx(x);let w=h[r.axis],N=0,_=n?this.applyStack(r,h,n):w,D,L;_!==w&&(N=_-w,_=w),p&&(w=x.barStart,_=x.barEnd-x.barStart,w!==0&&Yn(w)!==Yn(x.barEnd)&&(N=0),N+=w);const B=!Ns(c)&&!p?c:N;let z=r.getPixelForValue(B);if(this.chart.getDataVisibility(t)?D=r.getPixelForValue(N+_):D=z,L=D-z,Math.abs(L)<d){L=mk(L,r,m)*d,w===m&&(z-=L/2);const q=r.getPixelForDecimal(0),R=r.getPixelForDecimal(1),F=Math.min(q,R),T=Math.max(q,R);z=Math.max(Math.min(z,T),F),D=z+L,n&&!p&&(h._stacks[r.axis]._visualValues[o]=r.getValueForPixel(D)-r.getValueForPixel(z))}if(z===r.getPixelForValue(m)){const q=Yn(L)*r.getLineWidthForValue(m)/2;z+=q,L-=q}return{size:L,base:z,head:D,center:D+L/2}}_calculateBarIndexPixels(t,r){const n=r.scale,o=this.options,c=o.skipNull,d=is(o.maxBarThickness,1/0);let m,h;const x=this._getAxisCount();if(r.grouped){const p=c?this._getStackCount(t):r.stackCount,w=o.barThickness==="flex"?dk(t,r,o,p*x):ck(t,r,o,p*x),N=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,_=this._getAxis().indexOf(is(N,this.getFirstScaleIdForIndexAxis())),D=this._getStackIndex(this.index,this._cachedMeta.stack,c?t:void 0)+_;m=w.start+w.chunk*D+w.chunk/2,h=Math.min(d,w.chunk*w.ratio)}else m=n.getPixelForValue(this.getParsed(t)[n.axis],t),h=Math.min(d,r.min*r.ratio);return{base:m-h/2,head:m+h/2,center:m,size:h}}draw(){const t=this._cachedMeta,r=t.vScale,n=t.data,o=n.length;let c=0;for(;c<o;++c)this.getParsed(c)[r.axis]!==null&&!n[c].hidden&&n[c].draw(this._ctx)}}function yk(s,t,r){let n=1,o=1,c=0,d=0;if(t<Hs){const m=s,h=m+t,x=Math.cos(m),p=Math.sin(m),w=Math.cos(h),N=Math.sin(h),_=(R,F,T)=>ku(R,m,h,!0)?1:Math.max(F,F*r,T,T*r),D=(R,F,T)=>ku(R,m,h,!0)?-1:Math.min(F,F*r,T,T*r),L=_(0,x,w),B=_(ga,p,N),z=D(_s,x,w),q=D(_s+ga,p,N);n=(L-z)/2,o=(B-q)/2,c=-(L+z)/2,d=-(B+q)/2}return{ratioX:n,ratioY:o,offsetX:c,offsetY:d}}class bk extends Qh{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const r=t.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:o}}=t.legend.options;return r.labels.map((c,d)=>{const h=t.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:o,lineWidth:h.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(d),index:d}})}return[]}},onClick(t,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){const n=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=n;else{let c=h=>+n[h];if(fs(n[t])){const{key:h="value"}=this._parsing;c=x=>+jl(n[x],h)}let d,m;for(d=t,m=t+r;d<m;++d)o._parsed[d]=c(d)}}_getRotation(){return bi(this.options.rotation-90)}_getCircumference(){return bi(this.options.circumference)}_getRotationExtents(){let t=Hs,r=-Hs;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const o=this.chart.getDatasetMeta(n).controller,c=o._getRotation(),d=o._getCircumference();t=Math.min(t,c),r=Math.max(r,c+d)}return{rotation:t,circumference:r-t}}update(t){const r=this.chart,{chartArea:n}=r,o=this._cachedMeta,c=o.data,d=this.getMaxBorderWidth()+this.getMaxOffset(c)+this.options.spacing,m=Math.max((Math.min(n.width,n.height)-d)/2,0),h=Math.min(C3(this.options.cutout,m),1),x=this._getRingWeight(this.index),{circumference:p,rotation:w}=this._getRotationExtents(),{ratioX:N,ratioY:_,offsetX:D,offsetY:L}=yk(w,p,h),B=(n.width-d)/N,z=(n.height-d)/_,q=Math.max(Math.min(B,z)/2,0),R=Uv(this.options.radius,q),F=Math.max(R*h,0),T=(R-F)/this._getVisibleDatasetWeightTotal();this.offsetX=D*R,this.offsetY=L*R,o.total=this.calculateTotal(),this.outerRadius=R-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*x,0),this.updateElements(c,0,c.length,t)}_circumference(t,r){const n=this.options,o=this._cachedMeta,c=this._getCircumference();return r&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*c/Hs)}updateElements(t,r,n,o){const c=o==="reset",d=this.chart,m=d.chartArea,x=d.options.animation,p=(m.left+m.right)/2,w=(m.top+m.bottom)/2,N=c&&x.animateScale,_=N?0:this.innerRadius,D=N?0:this.outerRadius,{sharedOptions:L,includeOptions:B}=this._getSharedOptions(r,o);let z=this._getRotation(),q;for(q=0;q<r;++q)z+=this._circumference(q,c);for(q=r;q<r+n;++q){const R=this._circumference(q,c),F=t[q],T={x:p+this.offsetX,y:w+this.offsetY,startAngle:z,endAngle:z+R,circumference:R,outerRadius:D,innerRadius:_};B&&(T.options=L||this.resolveDataElementOptions(q,F.active?"active":o)),z+=R,this.updateElement(F,q,T,o)}}calculateTotal(){const t=this._cachedMeta,r=t.data;let n=0,o;for(o=0;o<r.length;o++){const c=t._parsed[o];c!==null&&!isNaN(c)&&this.chart.getDataVisibility(o)&&!r[o].hidden&&(n+=Math.abs(c))}return n}calculateCircumference(t){const r=this._cachedMeta.total;return r>0&&!isNaN(t)?Hs*(Math.abs(t)/r):0}getLabelAndValue(t){const r=this._cachedMeta,n=this.chart,o=n.data.labels||[],c=Lg(r._parsed[t],n.options.locale);return{label:o[t]||"",value:c}}getMaxBorderWidth(t){let r=0;const n=this.chart;let o,c,d,m,h;if(!t){for(o=0,c=n.data.datasets.length;o<c;++o)if(n.isDatasetVisible(o)){d=n.getDatasetMeta(o),t=d.data,m=d.controller;break}}if(!t)return 0;for(o=0,c=t.length;o<c;++o)h=m.resolveDataElementOptions(o),h.borderAlign!=="inner"&&(r=Math.max(r,h.borderWidth||0,h.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let n=0,o=t.length;n<o;++n){const c=this.resolveDataElementOptions(n);r=Math.max(r,c.offset||0,c.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(r+=this._getRingWeight(n));return r}_getRingWeight(t){return Math.max(is(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class vk extends Qh{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:n,data:o=[],_dataset:c}=r,d=this.chart._animationsDisabled;let{start:m,count:h}=q3(r,o,d);this._drawStart=m,this._drawCount=h,K3(r)&&(m=0,h=o.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!c._decimated,n.points=o;const x=this.resolveDatasetElementOptions(t);this.options.showLine||(x.borderWidth=0),x.segment=this.options.segment,this.updateElement(n,void 0,{animated:!d,options:x},t),this.updateElements(o,m,h,t)}updateElements(t,r,n,o){const c=o==="reset",{iScale:d,vScale:m,_stacked:h,_dataset:x}=this._cachedMeta,{sharedOptions:p,includeOptions:w}=this._getSharedOptions(r,o),N=d.axis,_=m.axis,{spanGaps:D,segment:L}=this.options,B=Cu(D)?D:Number.POSITIVE_INFINITY,z=this.chart._animationsDisabled||c||o==="none",q=r+n,R=t.length;let F=r>0&&this.getParsed(r-1);for(let T=0;T<R;++T){const I=t[T],se=z?I:{};if(T<r||T>=q){se.skip=!0;continue}const oe=this.getParsed(T),_e=Ns(oe[_]),he=se[N]=d.getPixelForValue(oe[N],T),ie=se[_]=c||_e?m.getBasePixel():m.getPixelForValue(h?this.applyStack(m,oe,h):oe[_],T);se.skip=isNaN(he)||isNaN(ie)||_e,se.stop=T>0&&Math.abs(oe[N]-F[N])>B,L&&(se.parsed=oe,se.raw=x.data[T]),w&&(se.options=p||this.resolveDataElementOptions(T,I.active?"active":o)),z||this.updateElement(I,T,se,o),F=oe}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,n=r.options&&r.options.borderWidth||0,o=t.data||[];if(!o.length)return n;const c=o[0].size(this.resolveDataElementOptions(0)),d=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(n,c,d)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function dl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Kg{static override(t){Object.assign(Kg.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return dl()}parse(){return dl()}format(){return dl()}add(){return dl()}diff(){return dl()}startOf(){return dl()}endOf(){return dl()}}var jk={_date:Kg};function wk(s,t,r,n){const{controller:o,data:c,_sorted:d}=s,m=o._cachedMeta.iScale,h=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(m&&t===m.axis&&t!=="r"&&d&&c.length){const x=m._reversePixels?B3:gl;if(n){if(o._sharedOptions){const p=c[0],w=typeof p.getRange=="function"&&p.getRange(t);if(w){const N=x(c,t,r-w),_=x(c,t,r+w);return{lo:N.lo,hi:_.hi}}}}else{const p=x(c,t,r);if(h){const{vScale:w}=o._cachedMeta,{_parsed:N}=s,_=N.slice(0,p.lo+1).reverse().findIndex(L=>!Ns(L[w.axis]));p.lo-=Math.max(0,_);const D=N.slice(p.hi).findIndex(L=>!Ns(L[w.axis]));p.hi+=Math.max(0,D)}return p}}return{lo:0,hi:c.length-1}}function Zh(s,t,r,n,o){const c=s.getSortedVisibleDatasetMetas(),d=r[t];for(let m=0,h=c.length;m<h;++m){const{index:x,data:p}=c[m],{lo:w,hi:N}=wk(c[m],t,d,o);for(let _=w;_<=N;++_){const D=p[_];D.skip||n(D,x,_)}}}function Nk(s){const t=s.indexOf("x")!==-1,r=s.indexOf("y")!==-1;return function(n,o){const c=t?Math.abs(n.x-o.x):0,d=r?Math.abs(n.y-o.y):0;return Math.sqrt(Math.pow(c,2)+Math.pow(d,2))}}function Ix(s,t,r,n,o){const c=[];return!o&&!s.isPointInArea(t)||Zh(s,r,t,function(m,h,x){!o&&!_u(m,s.chartArea,0)||m.inRange(t.x,t.y,n)&&c.push({element:m,datasetIndex:h,index:x})},!0),c}function Sk(s,t,r,n){let o=[];function c(d,m,h){const{startAngle:x,endAngle:p}=d.getProps(["startAngle","endAngle"],n),{angle:w}=Vv(d,{x:t.x,y:t.y});ku(w,x,p)&&o.push({element:d,datasetIndex:m,index:h})}return Zh(s,r,t,c),o}function Ck(s,t,r,n,o,c){let d=[];const m=Nk(r);let h=Number.POSITIVE_INFINITY;function x(p,w,N){const _=p.inRange(t.x,t.y,o);if(n&&!_)return;const D=p.getCenterPoint(o);if(!(!!c||s.isPointInArea(D))&&!_)return;const B=m(t,D);B<h?(d=[{element:p,datasetIndex:w,index:N}],h=B):B===h&&d.push({element:p,datasetIndex:w,index:N})}return Zh(s,r,t,x),d}function zx(s,t,r,n,o,c){return!c&&!s.isPointInArea(t)?[]:r==="r"&&!n?Sk(s,t,r,o):Ck(s,t,r,n,o,c)}function Gy(s,t,r,n,o){const c=[],d=r==="x"?"inXRange":"inYRange";let m=!1;return Zh(s,r,t,(h,x,p)=>{h[d]&&h[d](t[r],o)&&(c.push({element:h,datasetIndex:x,index:p}),m=m||h.inRange(t.x,t.y,o))}),n&&!m?[]:c}var kk={modes:{index(s,t,r,n){const o=ml(t,s),c=r.axis||"x",d=r.includeInvisible||!1,m=r.intersect?Ix(s,o,c,n,d):zx(s,o,c,!1,n,d),h=[];return m.length?(s.getSortedVisibleDatasetMetas().forEach(x=>{const p=m[0].index,w=x.data[p];w&&!w.skip&&h.push({element:w,datasetIndex:x.index,index:p})}),h):[]},dataset(s,t,r,n){const o=ml(t,s),c=r.axis||"xy",d=r.includeInvisible||!1;let m=r.intersect?Ix(s,o,c,n,d):zx(s,o,c,!1,n,d);if(m.length>0){const h=m[0].datasetIndex,x=s.getDatasetMeta(h).data;m=[];for(let p=0;p<x.length;++p)m.push({element:x[p],datasetIndex:h,index:p})}return m},point(s,t,r,n){const o=ml(t,s),c=r.axis||"xy",d=r.includeInvisible||!1;return Ix(s,o,c,n,d)},nearest(s,t,r,n){const o=ml(t,s),c=r.axis||"xy",d=r.includeInvisible||!1;return zx(s,o,c,r.intersect,n,d)},x(s,t,r,n){const o=ml(t,s);return Gy(s,o,"x",r.intersect,n)},y(s,t,r,n){const o=ml(t,s);return Gy(s,o,"y",r.intersect,n)}}};const mj=["left","top","right","bottom"];function su(s,t){return s.filter(r=>r.pos===t)}function Wy(s,t){return s.filter(r=>mj.indexOf(r.pos)===-1&&r.box.axis===t)}function au(s,t){return s.sort((r,n)=>{const o=t?n:r,c=t?r:n;return o.weight===c.weight?o.index-c.index:o.weight-c.weight})}function _k(s){const t=[];let r,n,o,c,d,m;for(r=0,n=(s||[]).length;r<n;++r)o=s[r],{position:c,options:{stack:d,stackWeight:m=1}}=o,t.push({index:r,box:o,pos:c,horizontal:o.isHorizontal(),weight:o.weight,stack:d&&c+d,stackWeight:m});return t}function Ak(s){const t={};for(const r of s){const{stack:n,pos:o,stackWeight:c}=r;if(!n||!mj.includes(o))continue;const d=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});d.count++,d.weight+=c}return t}function Dk(s,t){const r=Ak(s),{vBoxMaxWidth:n,hBoxMaxHeight:o}=t;let c,d,m;for(c=0,d=s.length;c<d;++c){m=s[c];const{fullSize:h}=m.box,x=r[m.stack],p=x&&m.stackWeight/x.weight;m.horizontal?(m.width=p?p*n:h&&t.availableWidth,m.height=o):(m.width=n,m.height=p?p*o:h&&t.availableHeight)}return r}function Ek(s){const t=_k(s),r=au(t.filter(x=>x.box.fullSize),!0),n=au(su(t,"left"),!0),o=au(su(t,"right")),c=au(su(t,"top"),!0),d=au(su(t,"bottom")),m=Wy(t,"x"),h=Wy(t,"y");return{fullSize:r,leftAndTop:n.concat(c),rightAndBottom:o.concat(h).concat(d).concat(m),chartArea:su(t,"chartArea"),vertical:n.concat(o).concat(h),horizontal:c.concat(d).concat(m)}}function Xy(s,t,r,n){return Math.max(s[r],t[r])+Math.max(s[n],t[n])}function hj(s,t){s.top=Math.max(s.top,t.top),s.left=Math.max(s.left,t.left),s.bottom=Math.max(s.bottom,t.bottom),s.right=Math.max(s.right,t.right)}function Tk(s,t,r,n){const{pos:o,box:c}=r,d=s.maxPadding;if(!fs(o)){r.size&&(s[o]-=r.size);const w=n[r.stack]||{size:0,count:1};w.size=Math.max(w.size,r.horizontal?c.height:c.width),r.size=w.size/w.count,s[o]+=r.size}c.getPadding&&hj(d,c.getPadding());const m=Math.max(0,t.outerWidth-Xy(d,s,"left","right")),h=Math.max(0,t.outerHeight-Xy(d,s,"top","bottom")),x=m!==s.w,p=h!==s.h;return s.w=m,s.h=h,r.horizontal?{same:x,other:p}:{same:p,other:x}}function Mk(s){const t=s.maxPadding;function r(n){const o=Math.max(t[n]-s[n],0);return s[n]+=o,o}s.y+=r("top"),s.x+=r("left"),r("right"),r("bottom")}function Ok(s,t){const r=t.maxPadding;function n(o){const c={left:0,top:0,right:0,bottom:0};return o.forEach(d=>{c[d]=Math.max(t[d],r[d])}),c}return n(s?["left","right"]:["top","bottom"])}function cu(s,t,r,n){const o=[];let c,d,m,h,x,p;for(c=0,d=s.length,x=0;c<d;++c){m=s[c],h=m.box,h.update(m.width||t.w,m.height||t.h,Ok(m.horizontal,t));const{same:w,other:N}=Tk(t,r,m,n);x|=w&&o.length,p=p||N,h.fullSize||o.push(m)}return x&&cu(o,t,r,n)||p}function ch(s,t,r,n,o){s.top=r,s.left=t,s.right=t+n,s.bottom=r+o,s.width=n,s.height=o}function Qy(s,t,r,n){const o=r.padding;let{x:c,y:d}=t;for(const m of s){const h=m.box,x=n[m.stack]||{placed:0,weight:1},p=m.stackWeight/x.weight||1;if(m.horizontal){const w=t.w*p,N=x.size||h.height;Su(x.start)&&(d=x.start),h.fullSize?ch(h,o.left,d,r.outerWidth-o.right-o.left,N):ch(h,t.left+x.placed,d,w,N),x.start=d,x.placed+=w,d=h.bottom}else{const w=t.h*p,N=x.size||h.width;Su(x.start)&&(c=x.start),h.fullSize?ch(h,c,o.top,N,r.outerHeight-o.bottom-o.top):ch(h,c,t.top+x.placed,N,w),x.start=c,x.placed+=w,c=h.right}}t.x=c,t.y=d}var tn={addBox(s,t){s.boxes||(s.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(r){t.draw(r)}}]},s.boxes.push(t)},removeBox(s,t){const r=s.boxes?s.boxes.indexOf(t):-1;r!==-1&&s.boxes.splice(r,1)},configure(s,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(s,t,r,n){if(!s)return;const o=rn(s.options.layout.padding),c=Math.max(t-o.width,0),d=Math.max(r-o.height,0),m=Ek(s.boxes),h=m.vertical,x=m.horizontal;ks(s.boxes,L=>{typeof L.beforeLayout=="function"&&L.beforeLayout()});const p=h.reduce((L,B)=>B.box.options&&B.box.options.display===!1?L:L+1,0)||1,w=Object.freeze({outerWidth:t,outerHeight:r,padding:o,availableWidth:c,availableHeight:d,vBoxMaxWidth:c/2/p,hBoxMaxHeight:d/2}),N=Object.assign({},o);hj(N,rn(n));const _=Object.assign({maxPadding:N,w:c,h:d,x:o.left,y:o.top},o),D=Dk(h.concat(x),w);cu(m.fullSize,_,w,D),cu(h,_,w,D),cu(x,_,w,D)&&cu(h,_,w,D),Mk(_),Qy(m.leftAndTop,_,w,D),_.x+=_.w,_.y+=_.h,Qy(m.rightAndBottom,_,w,D),s.chartArea={left:_.left,top:_.top,right:_.left+_.w,bottom:_.top+_.h,height:_.h,width:_.w},ks(m.chartArea,L=>{const B=L.box;Object.assign(B,s.chartArea),B.update(_.w,_.h,{left:0,top:0,right:0,bottom:0})})}};class fj{acquireContext(t,r){}releaseContext(t){return!1}addEventListener(t,r,n){}removeEventListener(t,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,r,n,o){return r=Math.max(0,r||t.width),n=n||t.height,{width:r,height:Math.max(0,o?Math.floor(r/o):n)}}isAttached(t){return!0}updateConfig(t){}}class Rk extends fj{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Nh="$chartjs",Ik={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Zy=s=>s===null||s==="";function zk(s,t){const r=s.style,n=s.getAttribute("height"),o=s.getAttribute("width");if(s[Nh]={initial:{height:n,width:o,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",Zy(o)){const c=Iy(s,"width");c!==void 0&&(s.width=c)}if(Zy(n))if(s.style.height==="")s.height=s.width/(t||2);else{const c=Iy(s,"height");c!==void 0&&(s.height=c)}return s}const xj=I4?{passive:!0}:!1;function Pk(s,t,r){s&&s.addEventListener(t,r,xj)}function Fk(s,t,r){s&&s.canvas&&s.canvas.removeEventListener(t,r,xj)}function Lk(s,t){const r=Ik[s.type]||s.type,{x:n,y:o}=ml(s,t);return{type:r,chart:t,native:s,x:n!==void 0?n:null,y:o!==void 0?o:null}}function Ph(s,t){for(const r of s)if(r===t||r.contains(t))return!0}function Bk(s,t,r){const n=s.canvas,o=new MutationObserver(c=>{let d=!1;for(const m of c)d=d||Ph(m.addedNodes,n),d=d&&!Ph(m.removedNodes,n);d&&r()});return o.observe(document,{childList:!0,subtree:!0}),o}function Uk(s,t,r){const n=s.canvas,o=new MutationObserver(c=>{let d=!1;for(const m of c)d=d||Ph(m.removedNodes,n),d=d&&!Ph(m.addedNodes,n);d&&r()});return o.observe(document,{childList:!0,subtree:!0}),o}const Du=new Map;let Jy=0;function gj(){const s=window.devicePixelRatio;s!==Jy&&(Jy=s,Du.forEach((t,r)=>{r.currentDevicePixelRatio!==s&&t()}))}function $k(s,t){Du.size||window.addEventListener("resize",gj),Du.set(s,t)}function Hk(s){Du.delete(s),Du.size||window.removeEventListener("resize",gj)}function Vk(s,t,r){const n=s.canvas,o=n&&qg(n);if(!o)return;const c=Gv((m,h)=>{const x=o.clientWidth;r(m,h),x<o.clientWidth&&r()},window),d=new ResizeObserver(m=>{const h=m[0],x=h.contentRect.width,p=h.contentRect.height;x===0&&p===0||c(x,p)});return d.observe(o),$k(s,c),d}function Px(s,t,r){r&&r.disconnect(),t==="resize"&&Hk(s)}function qk(s,t,r){const n=s.canvas,o=Gv(c=>{s.ctx!==null&&r(Lk(c,s))},s);return Pk(n,t,o),o}class Kk extends fj{acquireContext(t,r){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(zk(t,r),n):null}releaseContext(t){const r=t.canvas;if(!r[Nh])return!1;const n=r[Nh].initial;["height","width"].forEach(c=>{const d=n[c];Ns(d)?r.removeAttribute(c):r.setAttribute(c,d)});const o=n.style||{};return Object.keys(o).forEach(c=>{r.style[c]=o[c]}),r.width=r.width,delete r[Nh],!0}addEventListener(t,r,n){this.removeEventListener(t,r);const o=t.$proxies||(t.$proxies={}),d={attach:Bk,detach:Uk,resize:Vk}[r]||qk;o[r]=d(t,r,n)}removeEventListener(t,r){const n=t.$proxies||(t.$proxies={}),o=n[r];if(!o)return;({attach:Px,detach:Px,resize:Px}[r]||Fk)(t,r,o),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,r,n,o){return R4(t,r,n,o)}isAttached(t){const r=t&&qg(t);return!!(r&&r.isConnected)}}function Yk(s){return!Vg()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?Rk:Kk}let Si=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:r,y:n}=this.getProps(["x","y"],t);return{x:r,y:n}}hasValue(){return Cu(this.x)&&Cu(this.y)}getProps(t,r){const n=this.$animations;if(!r||!n)return this;const o={};return t.forEach(c=>{o[c]=n[c]&&n[c].active()?n[c]._to:this[c]}),o}};function Gk(s,t){const r=s.options.ticks,n=Wk(s),o=Math.min(r.maxTicksLimit||n,n),c=r.major.enabled?Qk(t):[],d=c.length,m=c[0],h=c[d-1],x=[];if(d>o)return Zk(t,x,c,d/o),x;const p=Xk(c,t,o);if(d>0){let w,N;const _=d>1?Math.round((h-m)/(d-1)):null;for(dh(t,x,p,Ns(_)?0:m-_,m),w=0,N=d-1;w<N;w++)dh(t,x,p,c[w],c[w+1]);return dh(t,x,p,h,Ns(_)?t.length:h+_),x}return dh(t,x,p),x}function Wk(s){const t=s.options.offset,r=s._tickSize(),n=s._length/r+(t?0:1),o=s._maxLength/r;return Math.floor(Math.min(n,o))}function Xk(s,t,r){const n=Jk(s),o=t.length/r;if(!n)return Math.max(o,1);const c=O3(n);for(let d=0,m=c.length-1;d<m;d++){const h=c[d];if(h>o)return h}return Math.max(o,1)}function Qk(s){const t=[];let r,n;for(r=0,n=s.length;r<n;r++)s[r].major&&t.push(r);return t}function Zk(s,t,r,n){let o=0,c=r[0],d;for(n=Math.ceil(n),d=0;d<s.length;d++)d===c&&(t.push(s[d]),o++,c=r[o*n])}function dh(s,t,r,n,o){const c=is(n,0),d=Math.min(is(o,s.length),s.length);let m=0,h,x,p;for(r=Math.ceil(r),o&&(h=o-n,r=h/Math.floor(h/r)),p=c;p<0;)m++,p=Math.round(c+m*r);for(x=Math.max(c,0);x<d;x++)x===p&&(t.push(s[x]),m++,p=Math.round(c+m*r))}function Jk(s){const t=s.length;let r,n;if(t<2)return!1;for(n=s[0],r=1;r<t;++r)if(s[r]-s[r-1]!==n)return!1;return n}const e_=s=>s==="left"?"right":s==="right"?"left":s,eb=(s,t,r)=>t==="top"||t==="left"?s[t]+r:s[t]-r,tb=(s,t)=>Math.min(t||s,s);function sb(s,t){const r=[],n=s.length/t,o=s.length;let c=0;for(;c<o;c+=n)r.push(s[Math.floor(c)]);return r}function t_(s,t,r){const n=s.ticks.length,o=Math.min(t,n-1),c=s._startPixel,d=s._endPixel,m=1e-6;let h=s.getPixelForTick(o),x;if(!(r&&(n===1?x=Math.max(h-c,d-h):t===0?x=(s.getPixelForTick(1)-h)/2:x=(h-s.getPixelForTick(o-1))/2,h+=o<t?x:-x,h<c-m||h>d+m)))return h}function s_(s,t){ks(s,r=>{const n=r.gc,o=n.length/2;let c;if(o>t){for(c=0;c<o;++c)delete r.data[n[c]];n.splice(0,o)}})}function ru(s){return s.drawTicks?s.tickLength:0}function ab(s,t){if(!s.display)return 0;const r=Ya(s.font,t),n=rn(s.padding);return(oa(s.text)?s.text.length:1)*r.lineHeight+n.height}function a_(s,t){return Sl(s,{scale:t,type:"scale"})}function r_(s,t,r){return Sl(s,{tick:r,index:t,type:"tick"})}function n_(s,t,r){let n=Pg(s);return(r&&t!=="right"||!r&&t==="right")&&(n=e_(n)),n}function i_(s,t,r,n){const{top:o,left:c,bottom:d,right:m,chart:h}=s,{chartArea:x,scales:p}=h;let w=0,N,_,D;const L=d-o,B=m-c;if(s.isHorizontal()){if(_=qa(n,c,m),fs(r)){const z=Object.keys(r)[0],q=r[z];D=p[z].getPixelForValue(q)+L-t}else r==="center"?D=(x.bottom+x.top)/2+L-t:D=eb(s,r,t);N=m-c}else{if(fs(r)){const z=Object.keys(r)[0],q=r[z];_=p[z].getPixelForValue(q)-B+t}else r==="center"?_=(x.left+x.right)/2-B+t:_=eb(s,r,t);D=qa(n,d,o),w=r==="left"?-ga:ga}return{titleX:_,titleY:D,maxWidth:N,rotation:w}}class Bc extends Si{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,r){return t}getUserBounds(){let{_userMin:t,_userMax:r,_suggestedMin:n,_suggestedMax:o}=this;return t=Hn(t,Number.POSITIVE_INFINITY),r=Hn(r,Number.NEGATIVE_INFINITY),n=Hn(n,Number.POSITIVE_INFINITY),o=Hn(o,Number.NEGATIVE_INFINITY),{min:Hn(t,n),max:Hn(r,o),minDefined:Ga(t),maxDefined:Ga(r)}}getMinMax(t){let{min:r,max:n,minDefined:o,maxDefined:c}=this.getUserBounds(),d;if(o&&c)return{min:r,max:n};const m=this.getMatchingVisibleMetas();for(let h=0,x=m.length;h<x;++h)d=m[h].controller.getMinMax(this,t),o||(r=Math.min(r,d.min)),c||(n=Math.max(n,d.max));return r=c&&r>n?n:r,n=o&&r>n?r:n,{min:Hn(r,Hn(n,r)),max:Hn(n,Hn(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ps(this.options.beforeUpdate,[this])}update(t,r,n){const{beginAtZero:o,grace:c,ticks:d}=this.options,m=d.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=m4(this,c,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=m<this.ticks.length;this._convertTicksToLabels(h?sb(this.ticks,m):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),d.display&&(d.autoSkip||d.source==="auto")&&(this.ticks=Gk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,t=!t),this._startPixel=r,this._endPixel=n,this._reversePixels=t,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ps(this.options.afterUpdate,[this])}beforeSetDimensions(){Ps(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ps(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ps(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ps(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const r=this.options.ticks;let n,o,c;for(n=0,o=t.length;n<o;n++)c=t[n],c.label=Ps(r.callback,[c.value,n,t],this)}afterTickToLabelConversion(){Ps(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ps(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,r=t.ticks,n=tb(this.ticks.length,t.ticks.maxTicksLimit),o=r.minRotation||0,c=r.maxRotation;let d=o,m,h,x;if(!this._isVisible()||!r.display||o>=c||n<=1||!this.isHorizontal()){this.labelRotation=o;return}const p=this._getLabelSizes(),w=p.widest.width,N=p.highest.height,_=Ka(this.chart.width-w,0,this.maxWidth);m=t.offset?this.maxWidth/n:_/(n-1),w+6>m&&(m=_/(n-(t.offset?.5:1)),h=this.maxHeight-ru(t.grid)-r.padding-ab(t.title,this.chart.options.font),x=Math.sqrt(w*w+N*N),d=P3(Math.min(Math.asin(Ka((p.highest.height+6)/m,-1,1)),Math.asin(Ka(h/x,-1,1))-Math.asin(Ka(N/x,-1,1)))),d=Math.max(o,Math.min(c,d))),this.labelRotation=d}afterCalculateLabelRotation(){Ps(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ps(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:r,options:{ticks:n,title:o,grid:c}}=this,d=this._isVisible(),m=this.isHorizontal();if(d){const h=ab(o,r.options.font);if(m?(t.width=this.maxWidth,t.height=ru(c)+h):(t.height=this.maxHeight,t.width=ru(c)+h),n.display&&this.ticks.length){const{first:x,last:p,widest:w,highest:N}=this._getLabelSizes(),_=n.padding*2,D=bi(this.labelRotation),L=Math.cos(D),B=Math.sin(D);if(m){const z=n.mirror?0:B*w.width+L*N.height;t.height=Math.min(this.maxHeight,t.height+z+_)}else{const z=n.mirror?0:L*w.width+B*N.height;t.width=Math.min(this.maxWidth,t.width+z+_)}this._calculatePadding(x,p,B,L)}}this._handleMargins(),m?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,r,n,o){const{ticks:{align:c,padding:d},position:m}=this.options,h=this.labelRotation!==0,x=m!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,w=this.right-this.getPixelForTick(this.ticks.length-1);let N=0,_=0;h?x?(N=o*t.width,_=n*r.height):(N=n*t.height,_=o*r.width):c==="start"?_=r.width:c==="end"?N=t.width:c!=="inner"&&(N=t.width/2,_=r.width/2),this.paddingLeft=Math.max((N-p+d)*this.width/(this.width-p),0),this.paddingRight=Math.max((_-w+d)*this.width/(this.width-w),0)}else{let p=r.height/2,w=t.height/2;c==="start"?(p=0,w=t.height):c==="end"&&(p=r.height,w=0),this.paddingTop=p+d,this.paddingBottom=w+d}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ps(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:r}=this.options;return r==="top"||r==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let r,n;for(r=0,n=t.length;r<n;r++)Ns(t[r].label)&&(t.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=sb(n,r)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,r,n){const{ctx:o,_longestTextCache:c}=this,d=[],m=[],h=Math.floor(r/tb(r,n));let x=0,p=0,w,N,_,D,L,B,z,q,R,F,T;for(w=0;w<r;w+=h){if(D=t[w].label,L=this._resolveTickFontOptions(w),o.font=B=L.string,z=c[B]=c[B]||{data:{},gc:[]},q=L.lineHeight,R=F=0,!Ns(D)&&!oa(D))R=Ey(o,z.data,z.gc,R,D),F=q;else if(oa(D))for(N=0,_=D.length;N<_;++N)T=D[N],!Ns(T)&&!oa(T)&&(R=Ey(o,z.data,z.gc,R,T),F+=q);d.push(R),m.push(F),x=Math.max(R,x),p=Math.max(F,p)}s_(c,r);const I=d.indexOf(x),se=m.indexOf(p),oe=_e=>({width:d[_e]||0,height:m[_e]||0});return{first:oe(0),last:oe(r-1),widest:oe(I),highest:oe(se),widths:d,heights:m}}getLabelForValue(t){return t}getPixelForValue(t,r){return NaN}getValueForPixel(t){}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const r=this._startPixel+t*this._length;return L3(this._alignToPixels?cl(this.chart,r,0):r)}getDecimalForPixel(t){const r=(t-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:r}=this;return t<0&&r<0?r:t>0&&r>0?t:0}getContext(t){const r=this.ticks||[];if(t>=0&&t<r.length){const n=r[t];return n.$context||(n.$context=r_(this.getContext(),t,n))}return this.$context||(this.$context=a_(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,r=bi(this.labelRotation),n=Math.abs(Math.cos(r)),o=Math.abs(Math.sin(r)),c=this._getLabelSizes(),d=t.autoSkipPadding||0,m=c?c.widest.width+d:0,h=c?c.highest.height+d:0;return this.isHorizontal()?h*n>m*o?m/n:h/o:h*o<m*n?h/n:m/o}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const r=this.axis,n=this.chart,o=this.options,{grid:c,position:d,border:m}=o,h=c.offset,x=this.isHorizontal(),w=this.ticks.length+(h?1:0),N=ru(c),_=[],D=m.setContext(this.getContext()),L=D.display?D.width:0,B=L/2,z=function(J){return cl(n,J,L)};let q,R,F,T,I,se,oe,_e,he,ie,Ee,Ae;if(d==="top")q=z(this.bottom),se=this.bottom-N,_e=q-B,ie=z(t.top)+B,Ae=t.bottom;else if(d==="bottom")q=z(this.top),ie=t.top,Ae=z(t.bottom)-B,se=q+B,_e=this.top+N;else if(d==="left")q=z(this.right),I=this.right-N,oe=q-B,he=z(t.left)+B,Ee=t.right;else if(d==="right")q=z(this.left),he=t.left,Ee=z(t.right)-B,I=q+B,oe=this.left+N;else if(r==="x"){if(d==="center")q=z((t.top+t.bottom)/2+.5);else if(fs(d)){const J=Object.keys(d)[0],Ce=d[J];q=z(this.chart.scales[J].getPixelForValue(Ce))}ie=t.top,Ae=t.bottom,se=q+B,_e=se+N}else if(r==="y"){if(d==="center")q=z((t.left+t.right)/2);else if(fs(d)){const J=Object.keys(d)[0],Ce=d[J];q=z(this.chart.scales[J].getPixelForValue(Ce))}I=q-B,oe=I-N,he=t.left,Ee=t.right}const re=is(o.ticks.maxTicksLimit,w),le=Math.max(1,Math.ceil(w/re));for(R=0;R<w;R+=le){const J=this.getContext(R),Ce=c.setContext(J),Se=m.setContext(J),He=Ce.lineWidth,Y=Ce.color,be=Se.dash||[],ye=Se.dashOffset,ae=Ce.tickWidth,Ne=Ce.tickColor,ge=Ce.tickBorderDash||[],A=Ce.tickBorderDashOffset;F=t_(this,R,h),F!==void 0&&(T=cl(n,F,He),x?I=oe=he=Ee=T:se=_e=ie=Ae=T,_.push({tx1:I,ty1:se,tx2:oe,ty2:_e,x1:he,y1:ie,x2:Ee,y2:Ae,width:He,color:Y,borderDash:be,borderDashOffset:ye,tickWidth:ae,tickColor:Ne,tickBorderDash:ge,tickBorderDashOffset:A}))}return this._ticksLength=w,this._borderValue=q,_}_computeLabelItems(t){const r=this.axis,n=this.options,{position:o,ticks:c}=n,d=this.isHorizontal(),m=this.ticks,{align:h,crossAlign:x,padding:p,mirror:w}=c,N=ru(n.grid),_=N+p,D=w?-p:_,L=-bi(this.labelRotation),B=[];let z,q,R,F,T,I,se,oe,_e,he,ie,Ee,Ae="middle";if(o==="top")I=this.bottom-D,se=this._getXAxisLabelAlignment();else if(o==="bottom")I=this.top+D,se=this._getXAxisLabelAlignment();else if(o==="left"){const le=this._getYAxisLabelAlignment(N);se=le.textAlign,T=le.x}else if(o==="right"){const le=this._getYAxisLabelAlignment(N);se=le.textAlign,T=le.x}else if(r==="x"){if(o==="center")I=(t.top+t.bottom)/2+_;else if(fs(o)){const le=Object.keys(o)[0],J=o[le];I=this.chart.scales[le].getPixelForValue(J)+_}se=this._getXAxisLabelAlignment()}else if(r==="y"){if(o==="center")T=(t.left+t.right)/2-_;else if(fs(o)){const le=Object.keys(o)[0],J=o[le];T=this.chart.scales[le].getPixelForValue(J)}se=this._getYAxisLabelAlignment(N).textAlign}r==="y"&&(h==="start"?Ae="top":h==="end"&&(Ae="bottom"));const re=this._getLabelSizes();for(z=0,q=m.length;z<q;++z){R=m[z],F=R.label;const le=c.setContext(this.getContext(z));oe=this.getPixelForTick(z)+c.labelOffset,_e=this._resolveTickFontOptions(z),he=_e.lineHeight,ie=oa(F)?F.length:1;const J=ie/2,Ce=le.color,Se=le.textStrokeColor,He=le.textStrokeWidth;let Y=se;d?(T=oe,se==="inner"&&(z===q-1?Y=this.options.reverse?"left":"right":z===0?Y=this.options.reverse?"right":"left":Y="center"),o==="top"?x==="near"||L!==0?Ee=-ie*he+he/2:x==="center"?Ee=-re.highest.height/2-J*he+he:Ee=-re.highest.height+he/2:x==="near"||L!==0?Ee=he/2:x==="center"?Ee=re.highest.height/2-J*he:Ee=re.highest.height-ie*he,w&&(Ee*=-1),L!==0&&!le.showLabelBackdrop&&(T+=he/2*Math.sin(L))):(I=oe,Ee=(1-ie)*he/2);let be;if(le.showLabelBackdrop){const ye=rn(le.backdropPadding),ae=re.heights[z],Ne=re.widths[z];let ge=Ee-ye.top,A=0-ye.left;switch(Ae){case"middle":ge-=ae/2;break;case"bottom":ge-=ae;break}switch(se){case"center":A-=Ne/2;break;case"right":A-=Ne;break;case"inner":z===q-1?A-=Ne:z>0&&(A-=Ne/2);break}be={left:A,top:ge,width:Ne+ye.width,height:ae+ye.height,color:le.backdropColor}}B.push({label:F,font:_e,textOffset:Ee,options:{rotation:L,color:Ce,strokeColor:Se,strokeWidth:He,textAlign:Y,textBaseline:Ae,translation:[T,I],backdrop:be}})}return B}_getXAxisLabelAlignment(){const{position:t,ticks:r}=this.options;if(-bi(this.labelRotation))return t==="top"?"left":"right";let o="center";return r.align==="start"?o="left":r.align==="end"?o="right":r.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(t){const{position:r,ticks:{crossAlign:n,mirror:o,padding:c}}=this.options,d=this._getLabelSizes(),m=t+c,h=d.widest.width;let x,p;return r==="left"?o?(p=this.right+c,n==="near"?x="left":n==="center"?(x="center",p+=h/2):(x="right",p+=h)):(p=this.right-m,n==="near"?x="right":n==="center"?(x="center",p-=h/2):(x="left",p=this.left)):r==="right"?o?(p=this.left+c,n==="near"?x="right":n==="center"?(x="center",p-=h/2):(x="left",p-=h)):(p=this.left+m,n==="near"?x="left":n==="center"?(x="center",p+=h/2):(x="right",p=this.right)):x="right",{textAlign:x,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:r},left:n,top:o,width:c,height:d}=this;r&&(t.save(),t.fillStyle=r,t.fillRect(n,o,c,d),t.restore())}getLineWidthForValue(t){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const o=this.ticks.findIndex(c=>c.value===t);return o>=0?r.setContext(this.getContext(o)).lineWidth:0}drawGrid(t){const r=this.options.grid,n=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let c,d;const m=(h,x,p)=>{!p.width||!p.color||(n.save(),n.lineWidth=p.width,n.strokeStyle=p.color,n.setLineDash(p.borderDash||[]),n.lineDashOffset=p.borderDashOffset,n.beginPath(),n.moveTo(h.x,h.y),n.lineTo(x.x,x.y),n.stroke(),n.restore())};if(r.display)for(c=0,d=o.length;c<d;++c){const h=o[c];r.drawOnChartArea&&m({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),r.drawTicks&&m({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:r,options:{border:n,grid:o}}=this,c=n.setContext(this.getContext()),d=n.display?c.width:0;if(!d)return;const m=o.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let x,p,w,N;this.isHorizontal()?(x=cl(t,this.left,d)-d/2,p=cl(t,this.right,m)+m/2,w=N=h):(w=cl(t,this.top,d)-d/2,N=cl(t,this.bottom,m)+m/2,x=p=h),r.save(),r.lineWidth=c.width,r.strokeStyle=c.color,r.beginPath(),r.moveTo(x,w),r.lineTo(p,N),r.stroke(),r.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,o=this._computeLabelArea();o&&Gh(n,o);const c=this.getLabelItems(t);for(const d of c){const m=d.options,h=d.font,x=d.label,p=d.textOffset;Au(n,x,0,p,h,m)}o&&Wh(n)}drawTitle(){const{ctx:t,options:{position:r,title:n,reverse:o}}=this;if(!n.display)return;const c=Ya(n.font),d=rn(n.padding),m=n.align;let h=c.lineHeight/2;r==="bottom"||r==="center"||fs(r)?(h+=d.bottom,oa(n.text)&&(h+=c.lineHeight*(n.text.length-1))):h+=d.top;const{titleX:x,titleY:p,maxWidth:w,rotation:N}=i_(this,h,r,m);Au(t,n.text,0,0,c,{color:n.color,maxWidth:w,rotation:N,textAlign:n_(m,r,o),textBaseline:"middle",translation:[x,p]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,r=t.ticks&&t.ticks.z||0,n=is(t.grid&&t.grid.z,-1),o=is(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Bc.prototype.draw?[{z:r,draw:c=>{this.draw(c)}}]:[{z:n,draw:c=>{this.drawBackground(),this.drawGrid(c),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:r,draw:c=>{this.drawLabels(c)}}]}getMatchingVisibleMetas(t){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",o=[];let c,d;for(c=0,d=r.length;c<d;++c){const m=r[c];m[n]===this.id&&(!t||m.type===t)&&o.push(m)}return o}_resolveTickFontOptions(t){const r=this.options.ticks.setContext(this.getContext(t));return Ya(r.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class uh{constructor(t,r,n){this.type=t,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const r=Object.getPrototypeOf(t);let n;c_(r)&&(n=this.register(r));const o=this.items,c=t.id,d=this.scope+"."+c;if(!c)throw new Error("class does not have id: "+t);return c in o||(o[c]=t,o_(t,d,n),this.override&&ta.override(t.id,t.overrides)),d}get(t){return this.items[t]}unregister(t){const r=this.items,n=t.id,o=this.scope;n in r&&delete r[n],o&&n in ta[o]&&(delete ta[o][n],this.override&&delete wl[n])}}function o_(s,t,r){const n=Nu(Object.create(null),[r?ta.get(r):{},ta.get(t),s.defaults]);ta.set(t,n),s.defaultRoutes&&l_(t,s.defaultRoutes),s.descriptors&&ta.describe(t,s.descriptors)}function l_(s,t){Object.keys(t).forEach(r=>{const n=r.split("."),o=n.pop(),c=[s].concat(n).join("."),d=t[r].split("."),m=d.pop(),h=d.join(".");ta.route(c,o,h,m)})}function c_(s){return"id"in s&&"defaults"in s}class d_{constructor(){this.controllers=new uh(Qh,"datasets",!0),this.elements=new uh(Si,"elements"),this.plugins=new uh(Object,"plugins"),this.scales=new uh(Bc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,r,n){[...r].forEach(o=>{const c=n||this._getRegistryForType(o);n||c.isForType(o)||c===this.plugins&&o.id?this._exec(t,c,o):ks(o,d=>{const m=n||this._getRegistryForType(d);this._exec(t,m,d)})})}_exec(t,r,n){const o=Ig(t);Ps(n["before"+o],[],n),r[t](n),Ps(n["after"+o],[],n)}_getRegistryForType(t){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(t))return n}return this.plugins}_get(t,r,n){const o=r.get(t);if(o===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return o}}var qn=new d_;class u_{constructor(){this._init=[]}notify(t,r,n,o){r==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const c=o?this._descriptors(t).filter(o):this._descriptors(t),d=this._notify(c,t,r,n);return r==="afterDestroy"&&(this._notify(c,t,"stop"),this._notify(this._init,t,"uninstall")),d}_notify(t,r,n,o){o=o||{};for(const c of t){const d=c.plugin,m=d[n],h=[r,o,c.options];if(Ps(m,h,d)===!1&&o.cancelable)return!1}return!0}invalidate(){Ns(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),r}_createDescriptors(t,r){const n=t&&t.config,o=is(n.options&&n.options.plugins,{}),c=m_(n);return o===!1&&!r?[]:f_(t,c,o,r)}_notifyStateChanges(t){const r=this._oldCache||[],n=this._cache,o=(c,d)=>c.filter(m=>!d.some(h=>m.plugin.id===h.plugin.id));this._notify(o(r,n),t,"stop"),this._notify(o(n,r),t,"start")}}function m_(s){const t={},r=[],n=Object.keys(qn.plugins.items);for(let c=0;c<n.length;c++)r.push(qn.getPlugin(n[c]));const o=s.plugins||[];for(let c=0;c<o.length;c++){const d=o[c];r.indexOf(d)===-1&&(r.push(d),t[d.id]=!0)}return{plugins:r,localIds:t}}function h_(s,t){return!t&&s===!1?null:s===!0?{}:s}function f_(s,{plugins:t,localIds:r},n,o){const c=[],d=s.getContext();for(const m of t){const h=m.id,x=h_(n[h],o);x!==null&&c.push({plugin:m,options:x_(s.config,{plugin:m,local:r[h]},x,d)})}return c}function x_(s,{plugin:t,local:r},n,o){const c=s.pluginScopeKeys(t),d=s.getOptionScopes(n,c);return r&&t.defaults&&d.push(t.defaults),s.createResolver(d,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function sg(s,t){const r=ta.datasets[s]||{};return((t.datasets||{})[s]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function g_(s,t){let r=s;return s==="_index_"?r=t:s==="_value_"&&(r=t==="x"?"y":"x"),r}function p_(s,t){return s===t?"_index_":"_value_"}function rb(s){if(s==="x"||s==="y"||s==="r")return s}function y_(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function ag(s,...t){if(rb(s))return s;for(const r of t){const n=r.axis||y_(r.position)||s.length>1&&rb(s[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function nb(s,t,r){if(r[t+"AxisID"]===s)return{axis:t}}function b_(s,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(n=>n.xAxisID===s||n.yAxisID===s);if(r.length)return nb(s,"x",r[0])||nb(s,"y",r[0])}return{}}function v_(s,t){const r=wl[s.type]||{scales:{}},n=t.scales||{},o=sg(s.type,t),c=Object.create(null);return Object.keys(n).forEach(d=>{const m=n[d];if(!fs(m))return console.error(`Invalid scale configuration for scale: ${d}`);if(m._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${d}`);const h=ag(d,m,b_(d,s),ta.scales[m.type]),x=p_(h,o),p=r.scales||{};c[d]=hu(Object.create(null),[{axis:h},m,p[h],p[x]])}),s.data.datasets.forEach(d=>{const m=d.type||s.type,h=d.indexAxis||sg(m,t),p=(wl[m]||{}).scales||{};Object.keys(p).forEach(w=>{const N=g_(w,h),_=d[N+"AxisID"]||N;c[_]=c[_]||Object.create(null),hu(c[_],[{axis:N},n[_],p[w]])})}),Object.keys(c).forEach(d=>{const m=c[d];hu(m,[ta.scales[m.type],ta.scale])}),c}function pj(s){const t=s.options||(s.options={});t.plugins=is(t.plugins,{}),t.scales=v_(s,t)}function yj(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function j_(s){return s=s||{},s.data=yj(s.data),pj(s),s}const ib=new Map,bj=new Set;function mh(s,t){let r=ib.get(s);return r||(r=t(),ib.set(s,r),bj.add(r)),r}const nu=(s,t,r)=>{const n=jl(t,r);n!==void 0&&s.add(n)};class w_{constructor(t){this._config=j_(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=yj(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),pj(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return mh(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,r){return mh(`${t}.transition.${r}`,()=>[[`datasets.${t}.transitions.${r}`,`transitions.${r}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,r){return mh(`${t}-${r}`,()=>[[`datasets.${t}.elements.${r}`,`datasets.${t}`,`elements.${r}`,""]])}pluginScopeKeys(t){const r=t.id,n=this.type;return mh(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,r){const n=this._scopeCache;let o=n.get(t);return(!o||r)&&(o=new Map,n.set(t,o)),o}getOptionScopes(t,r,n){const{options:o,type:c}=this,d=this._cachedScopes(t,n),m=d.get(r);if(m)return m;const h=new Set;r.forEach(p=>{t&&(h.add(t),p.forEach(w=>nu(h,t,w))),p.forEach(w=>nu(h,o,w)),p.forEach(w=>nu(h,wl[c]||{},w)),p.forEach(w=>nu(h,ta,w)),p.forEach(w=>nu(h,eg,w))});const x=Array.from(h);return x.length===0&&x.push(Object.create(null)),bj.has(r)&&d.set(r,x),x}chartOptionScopes(){const{options:t,type:r}=this;return[t,wl[r]||{},ta.datasets[r]||{},{type:r},ta,eg]}resolveNamedOptions(t,r,n,o=[""]){const c={$shared:!0},{resolver:d,subPrefixes:m}=ob(this._resolverCache,t,o);let h=d;if(S_(d,r)){c.$shared=!1,n=Ao(n)?n():n;const x=this.createResolver(t,n,m);h=Rc(d,n,x)}for(const x of r)c[x]=h[x];return c}createResolver(t,r,n=[""],o){const{resolver:c}=ob(this._resolverCache,t,n);return fs(r)?Rc(c,r,void 0,o):c}}function ob(s,t,r){let n=s.get(t);n||(n=new Map,s.set(t,n));const o=r.join();let c=n.get(o);return c||(c={resolver:Ug(t,r),subPrefixes:r.filter(m=>!m.toLowerCase().includes("hover"))},n.set(o,c)),c}const N_=s=>fs(s)&&Object.getOwnPropertyNames(s).some(t=>Ao(s[t]));function S_(s,t){const{isScriptable:r,isIndexable:n}=Zv(s);for(const o of t){const c=r(o),d=n(o),m=(d||c)&&s[o];if(c&&(Ao(m)||N_(m))||d&&oa(m))return!0}return!1}var C_="4.5.0";const k_=["top","bottom","left","right","chartArea"];function lb(s,t){return s==="top"||s==="bottom"||k_.indexOf(s)===-1&&t==="x"}function cb(s,t){return function(r,n){return r[s]===n[s]?r[t]-n[t]:r[s]-n[s]}}function db(s){const t=s.chart,r=t.options.animation;t.notifyPlugins("afterRender"),Ps(r&&r.onComplete,[s],t)}function __(s){const t=s.chart,r=t.options.animation;Ps(r&&r.onProgress,[s],t)}function vj(s){return Vg()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const Sh={},ub=s=>{const t=vj(s);return Object.values(Sh).filter(r=>r.canvas===t).pop()};function A_(s,t,r){const n=Object.keys(s);for(const o of n){const c=+o;if(c>=t){const d=s[o];delete s[o],(r>0||c>t)&&(s[c+r]=d)}}}function D_(s,t,r,n){return!r||s.type==="mouseout"?null:n?t:s}let Iu=class{static defaults=ta;static instances=Sh;static overrides=wl;static registry=qn;static version=C_;static getChart=ub;static register(...t){qn.add(...t),mb()}static unregister(...t){qn.remove(...t),mb()}constructor(t,r){const n=this.config=new w_(r),o=vj(t),c=ub(o);if(c)throw new Error("Canvas is already in use. Chart with ID '"+c.id+"' must be destroyed before the canvas with ID '"+c.canvas.id+"' can be reused.");const d=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Yk(o)),this.platform.updateConfig(n);const m=this.platform.acquireContext(o,d.aspectRatio),h=m&&m.canvas,x=h&&h.height,p=h&&h.width;if(this.id=S3(),this.ctx=m,this.canvas=h,this.width=p,this.height=x,this._options=d,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new u_,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=H3(w=>this.update(w),d.resizeDelay||0),this._dataChanges=[],Sh[this.id]=this,!m||!h){console.error("Failed to create chart: can't acquire context from the given item");return}gi.listen(this,"complete",db),gi.listen(this,"progress",__),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:n,height:o,_aspectRatio:c}=this;return Ns(t)?r&&c?c:o?n/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return qn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ry(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ty(this.canvas,this.ctx),this}stop(){return gi.stop(this),this}resize(t,r){gi.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const n=this.options,o=this.canvas,c=n.maintainAspectRatio&&this.aspectRatio,d=this.platform.getMaximumSize(o,t,r,c),m=n.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=d.width,this.height=d.height,this._aspectRatio=this.aspectRatio,Ry(this,m,!0)&&(this.notifyPlugins("resize",{size:d}),Ps(n.onResize,[this,d],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};ks(r,(n,o)=>{n.id=o})}buildOrUpdateScales(){const t=this.options,r=t.scales,n=this.scales,o=Object.keys(n).reduce((d,m)=>(d[m]=!1,d),{});let c=[];r&&(c=c.concat(Object.keys(r).map(d=>{const m=r[d],h=ag(d,m),x=h==="r",p=h==="x";return{options:m,dposition:x?"chartArea":p?"bottom":"left",dtype:x?"radialLinear":p?"category":"linear"}}))),ks(c,d=>{const m=d.options,h=m.id,x=ag(h,m),p=is(m.type,d.dtype);(m.position===void 0||lb(m.position,x)!==lb(d.dposition))&&(m.position=d.dposition),o[h]=!0;let w=null;if(h in n&&n[h].type===p)w=n[h];else{const N=qn.getScale(p);w=new N({id:h,type:p,ctx:this.ctx,chart:this}),n[w.id]=w}w.init(m,t)}),ks(o,(d,m)=>{d||delete n[m]}),ks(n,d=>{tn.configure(this,d,d.options),tn.addBox(this,d)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,n=t.length;if(t.sort((o,c)=>o.index-c.index),n>r){for(let o=r;o<n;++o)this._destroyDatasetMeta(o);t.splice(r,n-r)}this._sortedMetasets=t.slice(0).sort(cb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((n,o)=>{r.filter(c=>c===n._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let n,o;for(this._removeUnreferencedMetasets(),n=0,o=r.length;n<o;n++){const c=r[n];let d=this.getDatasetMeta(n);const m=c.type||this.config.type;if(d.type&&d.type!==m&&(this._destroyDatasetMeta(n),d=this.getDatasetMeta(n)),d.type=m,d.indexAxis=c.indexAxis||sg(m,this.options),d.order=c.order||0,d.index=n,d.label=""+c.label,d.visible=this.isDatasetVisible(n),d.controller)d.controller.updateIndex(n),d.controller.linkScales();else{const h=qn.getController(m),{datasetElementType:x,dataElementType:p}=ta.datasets[m];Object.assign(h,{dataElementType:qn.getElement(p),datasetElementType:x&&qn.getElement(x)}),d.controller=new h(this,n),t.push(d.controller)}}return this._updateMetasets(),t}_resetElements(){ks(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const c=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let d=0;for(let x=0,p=this.data.datasets.length;x<p;x++){const{controller:w}=this.getDatasetMeta(x),N=!o&&c.indexOf(w)===-1;w.buildOrUpdateElements(N),d=Math.max(+w.getMaxOverflow(),d)}d=this._minPadding=n.layout.autoPadding?d:0,this._updateLayout(d),o||ks(c,x=>{x.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(cb("z","_idx"));const{_active:m,_lastEvent:h}=this;h?this._eventHandler(h,!0):m.length&&this._updateHoverStyles(m,m,!0),this.render()}_updateScales(){ks(this.scales,t=>{tn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!jy(r,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:o,count:c}of r){const d=n==="_removeElements"?-c:c;A_(t,o,d)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=c=>new Set(t.filter(d=>d[0]===c).map((d,m)=>m+","+d.splice(1).join(","))),o=n(0);for(let c=1;c<r;c++)if(!jy(o,n(c)))return;return Array.from(o).map(c=>c.split(",")).map(c=>({method:c[1],start:+c[2],count:+c[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;tn.update(this,this.width,this.height,t);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],ks(this.boxes,o=>{n&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,c)=>{o._idx=c}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,Ao(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const n=this.getDatasetMeta(t),o={meta:n,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(n.controller._update(r),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(gi.has(this)?this.attached&&!gi.running(this)&&gi.start(this):(this.draw(),db({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,n=[];let o,c;for(o=0,c=r.length;o<c;++o){const d=r[o];(!t||d.visible)&&n.push(d)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,n={meta:t,index:t.index,cancelable:!0},o=lj(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(o&&Gh(r,o),t.controller.draw(),o&&Wh(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return _u(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,n,o){const c=kk.modes[r];return typeof c=="function"?c(this,t,n,o):[]}getDatasetMeta(t){const r=this.data.datasets[t],n=this._metasets;let o=n.filter(c=>c&&c._dataset===r).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},n.push(o)),o}getContext(){return this.$context||(this.$context=Sl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(t,r){const n=this.getDatasetMeta(t);n.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,n){const o=n?"show":"hide",c=this.getDatasetMeta(t),d=c.controller._resolveAnimations(void 0,o);Su(r)?(c.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),d.update(c,{visible:n}),this.update(m=>m.datasetIndex===t?o:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),gi.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ty(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete Sh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,n=(c,d)=>{r.addEventListener(this,c,d),t[c]=d},o=(c,d,m)=>{c.offsetX=d,c.offsetY=m,this._eventHandler(c)};ks(this.options.events,c=>n(c,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,n=(h,x)=>{r.addEventListener(this,h,x),t[h]=x},o=(h,x)=>{t[h]&&(r.removeEventListener(this,h,x),delete t[h])},c=(h,x)=>{this.canvas&&this.resize(h,x)};let d;const m=()=>{o("attach",m),this.attached=!0,this.resize(),n("resize",c),n("detach",d)};d=()=>{this.attached=!1,o("resize",c),this._stop(),this._resize(0,0),n("attach",m)},r.isAttached(this.canvas)?m():d()}unbindEvents(){ks(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},ks(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,n){const o=n?"set":"remove";let c,d,m,h;for(r==="dataset"&&(c=this.getDatasetMeta(t[0].datasetIndex),c.controller["_"+o+"DatasetHoverStyle"]()),m=0,h=t.length;m<h;++m){d=t[m];const x=d&&this.getDatasetMeta(d.datasetIndex).controller;x&&x[o+"HoverStyle"](d.element,d.datasetIndex,d.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],n=t.map(({datasetIndex:c,index:d})=>{const m=this.getDatasetMeta(c);if(!m)throw new Error("No dataset found at index "+c);return{datasetIndex:c,element:m.data[d],index:d}});!Mh(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(t,r,n){return this._plugins.notify(this,t,r,n)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,n){const o=this.options.hover,c=(h,x)=>h.filter(p=>!x.some(w=>p.datasetIndex===w.datasetIndex&&p.index===w.index)),d=c(r,t),m=n?t:c(t,r);d.length&&this.updateHoverStyle(d,o.mode,!1),m.length&&o.mode&&this.updateHoverStyle(m,o.mode,!0)}_eventHandler(t,r){const n={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},o=d=>(d.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,o)===!1)return;const c=this._handleEvent(t,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,o),(c||n.changed)&&this.render(),this}_handleEvent(t,r,n){const{_active:o=[],options:c}=this,d=r,m=this._getActiveElements(t,o,n,d),h=E3(t),x=D_(t,this._lastEvent,n,h);n&&(this._lastEvent=null,Ps(c.onHover,[t,m,this],this),h&&Ps(c.onClick,[t,m,this],this));const p=!Mh(m,o);return(p||r)&&(this._active=m,this._updateHoverStyles(m,o,r)),this._lastEvent=x,p}_getActiveElements(t,r,n,o){if(t.type==="mouseout")return[];if(!n)return r;const c=this.options.hover;return this.getElementsAtEventForMode(t,c.mode,c,o)}};function mb(){return ks(Iu.instances,s=>s._plugins.invalidate())}function E_(s,t,r){const{startAngle:n,x:o,y:c,outerRadius:d,innerRadius:m,options:h}=t,{borderWidth:x,borderJoinStyle:p}=h,w=Math.min(x/d,Br(n-r));if(s.beginPath(),s.arc(o,c,d-x/2,n+w/2,r-w/2),m>0){const N=Math.min(x/m,Br(n-r));s.arc(o,c,m+x/2,r-N/2,n+N/2,!0)}else{const N=Math.min(x/2,d*Br(n-r));if(p==="round")s.arc(o,c,N,r-_s/2,n+_s/2,!0);else if(p==="bevel"){const _=2*N*N,D=-_*Math.cos(r+_s/2)+o,L=-_*Math.sin(r+_s/2)+c,B=_*Math.cos(n+_s/2)+o,z=_*Math.sin(n+_s/2)+c;s.lineTo(D,L),s.lineTo(B,z)}}s.closePath(),s.moveTo(0,0),s.rect(0,0,s.canvas.width,s.canvas.height),s.clip("evenodd")}function T_(s,t,r){const{startAngle:n,pixelMargin:o,x:c,y:d,outerRadius:m,innerRadius:h}=t;let x=o/m;s.beginPath(),s.arc(c,d,m,n-x,r+x),h>o?(x=o/h,s.arc(c,d,h,r+x,n-x,!0)):s.arc(c,d,o,r+ga,n-ga),s.closePath(),s.clip()}function M_(s){return Bg(s,["outerStart","outerEnd","innerStart","innerEnd"])}function O_(s,t,r,n){const o=M_(s.options.borderRadius),c=(r-t)/2,d=Math.min(c,n*t/2),m=h=>{const x=(r-Math.min(c,h))*n/2;return Ka(h,0,Math.min(c,x))};return{outerStart:m(o.outerStart),outerEnd:m(o.outerEnd),innerStart:Ka(o.innerStart,0,d),innerEnd:Ka(o.innerEnd,0,d)}}function Ac(s,t,r,n){return{x:r+s*Math.cos(t),y:n+s*Math.sin(t)}}function Fh(s,t,r,n,o,c){const{x:d,y:m,startAngle:h,pixelMargin:x,innerRadius:p}=t,w=Math.max(t.outerRadius+n+r-x,0),N=p>0?p+n+r+x:0;let _=0;const D=o-h;if(n){const le=p>0?p-n:0,J=w>0?w-n:0,Ce=(le+J)/2,Se=Ce!==0?D*Ce/(Ce+n):D;_=(D-Se)/2}const L=Math.max(.001,D*w-r/_s)/w,B=(D-L)/2,z=h+B+_,q=o-B-_,{outerStart:R,outerEnd:F,innerStart:T,innerEnd:I}=O_(t,N,w,q-z),se=w-R,oe=w-F,_e=z+R/se,he=q-F/oe,ie=N+T,Ee=N+I,Ae=z+T/ie,re=q-I/Ee;if(s.beginPath(),c){const le=(_e+he)/2;if(s.arc(d,m,w,_e,le),s.arc(d,m,w,le,he),F>0){const He=Ac(oe,he,d,m);s.arc(He.x,He.y,F,he,q+ga)}const J=Ac(Ee,q,d,m);if(s.lineTo(J.x,J.y),I>0){const He=Ac(Ee,re,d,m);s.arc(He.x,He.y,I,q+ga,re+Math.PI)}const Ce=(q-I/N+(z+T/N))/2;if(s.arc(d,m,N,q-I/N,Ce,!0),s.arc(d,m,N,Ce,z+T/N,!0),T>0){const He=Ac(ie,Ae,d,m);s.arc(He.x,He.y,T,Ae+Math.PI,z-ga)}const Se=Ac(se,z,d,m);if(s.lineTo(Se.x,Se.y),R>0){const He=Ac(se,_e,d,m);s.arc(He.x,He.y,R,z-ga,_e)}}else{s.moveTo(d,m);const le=Math.cos(_e)*w+d,J=Math.sin(_e)*w+m;s.lineTo(le,J);const Ce=Math.cos(he)*w+d,Se=Math.sin(he)*w+m;s.lineTo(Ce,Se)}s.closePath()}function R_(s,t,r,n,o){const{fullCircles:c,startAngle:d,circumference:m}=t;let h=t.endAngle;if(c){Fh(s,t,r,n,h,o);for(let x=0;x<c;++x)s.fill();isNaN(m)||(h=d+(m%Hs||Hs))}return Fh(s,t,r,n,h,o),s.fill(),h}function I_(s,t,r,n,o){const{fullCircles:c,startAngle:d,circumference:m,options:h}=t,{borderWidth:x,borderJoinStyle:p,borderDash:w,borderDashOffset:N,borderRadius:_}=h,D=h.borderAlign==="inner";if(!x)return;s.setLineDash(w||[]),s.lineDashOffset=N,D?(s.lineWidth=x*2,s.lineJoin=p||"round"):(s.lineWidth=x,s.lineJoin=p||"bevel");let L=t.endAngle;if(c){Fh(s,t,r,n,L,o);for(let B=0;B<c;++B)s.stroke();isNaN(m)||(L=d+(m%Hs||Hs))}D&&T_(s,t,L),h.selfJoin&&L-d>=_s&&_===0&&p!=="miter"&&E_(s,t,L),c||(Fh(s,t,r,n,L,o),s.stroke())}class z_ extends Si{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,r,n){const o=this.getProps(["x","y"],n),{angle:c,distance:d}=Vv(o,{x:t,y:r}),{startAngle:m,endAngle:h,innerRadius:x,outerRadius:p,circumference:w}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),N=(this.options.spacing+this.options.borderWidth)/2,_=is(w,h-m),D=ku(c,m,h)&&m!==h,L=_>=Hs||D,B=vi(d,x+N,p+N);return L&&B}getCenterPoint(t){const{x:r,y:n,startAngle:o,endAngle:c,innerRadius:d,outerRadius:m}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:h,spacing:x}=this.options,p=(o+c)/2,w=(d+m+x+h)/2;return{x:r+Math.cos(p)*w,y:n+Math.sin(p)*w}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:r,circumference:n}=this,o=(r.offset||0)/4,c=(r.spacing||0)/2,d=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=n>Hs?Math.floor(n/Hs):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const m=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(m)*o,Math.sin(m)*o);const h=1-Math.sin(Math.min(_s,n||0)),x=o*h;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,R_(t,this,x,c,d),I_(t,this,x,c,d),t.restore()}}function jj(s,t,r=t){s.lineCap=is(r.borderCapStyle,t.borderCapStyle),s.setLineDash(is(r.borderDash,t.borderDash)),s.lineDashOffset=is(r.borderDashOffset,t.borderDashOffset),s.lineJoin=is(r.borderJoinStyle,t.borderJoinStyle),s.lineWidth=is(r.borderWidth,t.borderWidth),s.strokeStyle=is(r.borderColor,t.borderColor)}function P_(s,t,r){s.lineTo(r.x,r.y)}function F_(s){return s.stepped?a4:s.tension||s.cubicInterpolationMode==="monotone"?r4:P_}function wj(s,t,r={}){const n=s.length,{start:o=0,end:c=n-1}=r,{start:d,end:m}=t,h=Math.max(o,d),x=Math.min(c,m),p=o<d&&c<d||o>m&&c>m;return{count:n,start:h,loop:t.loop,ilen:x<h&&!p?n+x-h:x-h}}function L_(s,t,r,n){const{points:o,options:c}=t,{count:d,start:m,loop:h,ilen:x}=wj(o,r,n),p=F_(c);let{move:w=!0,reverse:N}=n||{},_,D,L;for(_=0;_<=x;++_)D=o[(m+(N?x-_:_))%d],!D.skip&&(w?(s.moveTo(D.x,D.y),w=!1):p(s,L,D,N,c.stepped),L=D);return h&&(D=o[(m+(N?x:0))%d],p(s,L,D,N,c.stepped)),!!h}function B_(s,t,r,n){const o=t.points,{count:c,start:d,ilen:m}=wj(o,r,n),{move:h=!0,reverse:x}=n||{};let p=0,w=0,N,_,D,L,B,z;const q=F=>(d+(x?m-F:F))%c,R=()=>{L!==B&&(s.lineTo(p,B),s.lineTo(p,L),s.lineTo(p,z))};for(h&&(_=o[q(0)],s.moveTo(_.x,_.y)),N=0;N<=m;++N){if(_=o[q(N)],_.skip)continue;const F=_.x,T=_.y,I=F|0;I===D?(T<L?L=T:T>B&&(B=T),p=(w*p+F)/++w):(R(),s.lineTo(F,T),D=I,w=0,L=B=T),z=T}R()}function rg(s){const t=s.options,r=t.borderDash&&t.borderDash.length;return!s._decimated&&!s._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!r?B_:L_}function U_(s){return s.stepped?z4:s.tension||s.cubicInterpolationMode==="monotone"?P4:hl}function $_(s,t,r,n){let o=t._path;o||(o=t._path=new Path2D,t.path(o,r,n)&&o.closePath()),jj(s,t.options),s.stroke(o)}function H_(s,t,r,n){const{segments:o,options:c}=t,d=rg(t);for(const m of o)jj(s,c,m.style),s.beginPath(),d(s,t,m,{start:r,end:r+n-1})&&s.closePath(),s.stroke()}const V_=typeof Path2D=="function";function q_(s,t,r,n){V_&&!t.options.segment?$_(s,t,r,n):H_(s,t,r,n)}class zu extends Si{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const o=n.spanGaps?this._loop:this._fullLoop;A4(this._points,n,t,o,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=H4(this,this.options.segment))}first(){const t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){const t=this.segments,r=this.points,n=t.length;return n&&r[t[n-1].end]}interpolate(t,r){const n=this.options,o=t[r],c=this.points,d=oj(this,{property:r,start:o,end:o});if(!d.length)return;const m=[],h=U_(n);let x,p;for(x=0,p=d.length;x<p;++x){const{start:w,end:N}=d[x],_=c[w],D=c[N];if(_===D){m.push(_);continue}const L=Math.abs((o-_[r])/(D[r]-_[r])),B=h(_,D,L,n.stepped);B[r]=t[r],m.push(B)}return m.length===1?m[0]:m}pathSegment(t,r,n){return rg(this)(t,this,r,n)}path(t,r,n){const o=this.segments,c=rg(this);let d=this._loop;r=r||0,n=n||this.points.length-r;for(const m of o)d&=c(t,this,m,{start:r,end:r+n-1});return!!d}draw(t,r,n,o){const c=this.options||{};(this.points||[]).length&&c.borderWidth&&(t.save(),q_(t,this,n,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function hb(s,t,r,n){const o=s.options,{[r]:c}=s.getProps([r],n);return Math.abs(t-c)<o.radius+o.hitRadius}class Nj extends Si{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,n){const o=this.options,{x:c,y:d}=this.getProps(["x","y"],n);return Math.pow(t-c,2)+Math.pow(r-d,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,r){return hb(this,t,"x",r)}inYRange(t,r){return hb(this,t,"y",r)}getCenterPoint(t){const{x:r,y:n}=this.getProps(["x","y"],t);return{x:r,y:n}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);const n=r&&t.borderWidth||0;return(r+n)*2}draw(t,r){const n=this.options;this.skip||n.radius<.1||!_u(this,r,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,tg(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Sj(s,t){const{x:r,y:n,base:o,width:c,height:d}=s.getProps(["x","y","base","width","height"],t);let m,h,x,p,w;return s.horizontal?(w=d/2,m=Math.min(r,o),h=Math.max(r,o),x=n-w,p=n+w):(w=c/2,m=r-w,h=r+w,x=Math.min(n,o),p=Math.max(n,o)),{left:m,top:x,right:h,bottom:p}}function No(s,t,r,n){return s?0:Ka(t,r,n)}function K_(s,t,r){const n=s.options.borderWidth,o=s.borderSkipped,c=Qv(n);return{t:No(o.top,c.top,0,r),r:No(o.right,c.right,0,t),b:No(o.bottom,c.bottom,0,r),l:No(o.left,c.left,0,t)}}function Y_(s,t,r){const{enableBorderRadius:n}=s.getProps(["enableBorderRadius"]),o=s.options.borderRadius,c=Tc(o),d=Math.min(t,r),m=s.borderSkipped,h=n||fs(o);return{topLeft:No(!h||m.top||m.left,c.topLeft,0,d),topRight:No(!h||m.top||m.right,c.topRight,0,d),bottomLeft:No(!h||m.bottom||m.left,c.bottomLeft,0,d),bottomRight:No(!h||m.bottom||m.right,c.bottomRight,0,d)}}function G_(s){const t=Sj(s),r=t.right-t.left,n=t.bottom-t.top,o=K_(s,r/2,n/2),c=Y_(s,r/2,n/2);return{outer:{x:t.left,y:t.top,w:r,h:n,radius:c},inner:{x:t.left+o.l,y:t.top+o.t,w:r-o.l-o.r,h:n-o.t-o.b,radius:{topLeft:Math.max(0,c.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,c.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,c.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,c.bottomRight-Math.max(o.b,o.r))}}}}function Fx(s,t,r,n){const o=t===null,c=r===null,m=s&&!(o&&c)&&Sj(s,n);return m&&(o||vi(t,m.left,m.right))&&(c||vi(r,m.top,m.bottom))}function W_(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function X_(s,t){s.rect(t.x,t.y,t.w,t.h)}function Lx(s,t,r={}){const n=s.x!==r.x?-t:0,o=s.y!==r.y?-t:0,c=(s.x+s.w!==r.x+r.w?t:0)-n,d=(s.y+s.h!==r.y+r.h?t:0)-o;return{x:s.x+n,y:s.y+o,w:s.w+c,h:s.h+d,radius:s.radius}}class Q_ extends Si{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:r,options:{borderColor:n,backgroundColor:o}}=this,{inner:c,outer:d}=G_(this),m=W_(d.radius)?Ih:X_;t.save(),(d.w!==c.w||d.h!==c.h)&&(t.beginPath(),m(t,Lx(d,r,c)),t.clip(),m(t,Lx(c,-r,d)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),m(t,Lx(c,r)),t.fillStyle=o,t.fill(),t.restore()}inRange(t,r,n){return Fx(this,t,r,n)}inXRange(t,r){return Fx(this,t,null,r)}inYRange(t,r){return Fx(this,null,t,r)}getCenterPoint(t){const{x:r,y:n,base:o,horizontal:c}=this.getProps(["x","y","base","horizontal"],t);return{x:c?(r+o)/2:r,y:c?n:(n+o)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}function Z_(s,t,r){const n=s.segments,o=s.points,c=t.points,d=[];for(const m of n){let{start:h,end:x}=m;x=Jh(h,x,o);const p=ng(r,o[h],o[x],m.loop);if(!t.segments){d.push({source:m,target:p,start:o[h],end:o[x]});continue}const w=oj(t,p);for(const N of w){const _=ng(r,c[N.start],c[N.end],N.loop),D=ij(m,o,_);for(const L of D)d.push({source:L,target:N,start:{[r]:fb(p,_,"start",Math.max)},end:{[r]:fb(p,_,"end",Math.min)}})}}return d}function ng(s,t,r,n){if(n)return;let o=t[s],c=r[s];return s==="angle"&&(o=Br(o),c=Br(c)),{property:s,start:o,end:c}}function J_(s,t){const{x:r=null,y:n=null}=s||{},o=t.points,c=[];return t.segments.forEach(({start:d,end:m})=>{m=Jh(d,m,o);const h=o[d],x=o[m];n!==null?(c.push({x:h.x,y:n}),c.push({x:x.x,y:n})):r!==null&&(c.push({x:r,y:h.y}),c.push({x:r,y:x.y}))}),c}function Jh(s,t,r){for(;t>s;t--){const n=r[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function fb(s,t,r,n){return s&&t?n(s[r],t[r]):s?s[r]:t?t[r]:0}function Cj(s,t){let r=[],n=!1;return oa(s)?(n=!0,r=s):r=J_(s,t),r.length?new zu({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function xb(s){return s&&s.fill!==!1}function e5(s,t,r){let o=s[t].fill;const c=[t];let d;if(!r)return o;for(;o!==!1&&c.indexOf(o)===-1;){if(!Ga(o))return o;if(d=s[o],!d)return!1;if(d.visible)return o;c.push(o),o=d.fill}return!1}function t5(s,t,r){const n=n5(s);if(fs(n))return isNaN(n.value)?!1:n;let o=parseFloat(n);return Ga(o)&&Math.floor(o)===o?s5(n[0],t,o,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function s5(s,t,r,n){return(s==="-"||s==="+")&&(r=t+r),r===t||r<0||r>=n?!1:r}function a5(s,t){let r=null;return s==="start"?r=t.bottom:s==="end"?r=t.top:fs(s)?r=t.getPixelForValue(s.value):t.getBasePixel&&(r=t.getBasePixel()),r}function r5(s,t,r){let n;return s==="start"?n=r:s==="end"?n=t.options.reverse?t.min:t.max:fs(s)?n=s.value:n=t.getBaseValue(),n}function n5(s){const t=s.options,r=t.fill;let n=is(r&&r.target,r);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function i5(s){const{scale:t,index:r,line:n}=s,o=[],c=n.segments,d=n.points,m=o5(t,r);m.push(Cj({x:null,y:t.bottom},n));for(let h=0;h<c.length;h++){const x=c[h];for(let p=x.start;p<=x.end;p++)l5(o,d[p],m)}return new zu({points:o,options:{}})}function o5(s,t){const r=[],n=s.getMatchingVisibleMetas("line");for(let o=0;o<n.length;o++){const c=n[o];if(c.index===t)break;c.hidden||r.unshift(c.dataset)}return r}function l5(s,t,r){const n=[];for(let o=0;o<r.length;o++){const c=r[o],{first:d,last:m,point:h}=c5(c,t,"x");if(!(!h||d&&m)){if(d)n.unshift(h);else if(s.push(h),!m)break}}s.push(...n)}function c5(s,t,r){const n=s.interpolate(t,r);if(!n)return{};const o=n[r],c=s.segments,d=s.points;let m=!1,h=!1;for(let x=0;x<c.length;x++){const p=c[x],w=d[p.start][r],N=d[p.end][r];if(vi(o,w,N)){m=o===w,h=o===N;break}}return{first:m,last:h,point:n}}class kj{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,r,n){const{x:o,y:c,radius:d}=this;return r=r||{start:0,end:Hs},t.arc(o,c,d,r.end,r.start,!0),!n.bounds}interpolate(t){const{x:r,y:n,radius:o}=this,c=t.angle;return{x:r+Math.cos(c)*o,y:n+Math.sin(c)*o,angle:c}}}function d5(s){const{chart:t,fill:r,line:n}=s;if(Ga(r))return u5(t,r);if(r==="stack")return i5(s);if(r==="shape")return!0;const o=m5(s);return o instanceof kj?o:Cj(o,n)}function u5(s,t){const r=s.getDatasetMeta(t);return r&&s.isDatasetVisible(t)?r.dataset:null}function m5(s){return(s.scale||{}).getPointPositionForValue?f5(s):h5(s)}function h5(s){const{scale:t={},fill:r}=s,n=a5(r,t);if(Ga(n)){const o=t.isHorizontal();return{x:o?n:null,y:o?null:n}}return null}function f5(s){const{scale:t,fill:r}=s,n=t.options,o=t.getLabels().length,c=n.reverse?t.max:t.min,d=r5(r,t,c),m=[];if(n.grid.circular){const h=t.getPointPositionForValue(0,c);return new kj({x:h.x,y:h.y,radius:t.getDistanceFromCenterForValue(d)})}for(let h=0;h<o;++h)m.push(t.getPointPositionForValue(h,d));return m}function Bx(s,t,r){const n=d5(t),{chart:o,index:c,line:d,scale:m,axis:h}=t,x=d.options,p=x.fill,w=x.backgroundColor,{above:N=w,below:_=w}=p||{},D=o.getDatasetMeta(c),L=lj(o,D);n&&d.points.length&&(Gh(s,r),x5(s,{line:d,target:n,above:N,below:_,area:r,scale:m,axis:h,clip:L}),Wh(s))}function x5(s,t){const{line:r,target:n,above:o,below:c,area:d,scale:m,clip:h}=t,x=r._loop?"angle":t.axis;s.save();let p=c;c!==o&&(x==="x"?(gb(s,n,d.top),Ux(s,{line:r,target:n,color:o,scale:m,property:x,clip:h}),s.restore(),s.save(),gb(s,n,d.bottom)):x==="y"&&(pb(s,n,d.left),Ux(s,{line:r,target:n,color:c,scale:m,property:x,clip:h}),s.restore(),s.save(),pb(s,n,d.right),p=o)),Ux(s,{line:r,target:n,color:p,scale:m,property:x,clip:h}),s.restore()}function gb(s,t,r){const{segments:n,points:o}=t;let c=!0,d=!1;s.beginPath();for(const m of n){const{start:h,end:x}=m,p=o[h],w=o[Jh(h,x,o)];c?(s.moveTo(p.x,p.y),c=!1):(s.lineTo(p.x,r),s.lineTo(p.x,p.y)),d=!!t.pathSegment(s,m,{move:d}),d?s.closePath():s.lineTo(w.x,r)}s.lineTo(t.first().x,r),s.closePath(),s.clip()}function pb(s,t,r){const{segments:n,points:o}=t;let c=!0,d=!1;s.beginPath();for(const m of n){const{start:h,end:x}=m,p=o[h],w=o[Jh(h,x,o)];c?(s.moveTo(p.x,p.y),c=!1):(s.lineTo(r,p.y),s.lineTo(p.x,p.y)),d=!!t.pathSegment(s,m,{move:d}),d?s.closePath():s.lineTo(r,w.y)}s.lineTo(r,t.first().y),s.closePath(),s.clip()}function Ux(s,t){const{line:r,target:n,property:o,color:c,scale:d,clip:m}=t,h=Z_(r,n,o);for(const{source:x,target:p,start:w,end:N}of h){const{style:{backgroundColor:_=c}={}}=x,D=n!==!0;s.save(),s.fillStyle=_,g5(s,d,m,D&&ng(o,w,N)),s.beginPath();const L=!!r.pathSegment(s,x);let B;if(D){L?s.closePath():yb(s,n,N,o);const z=!!n.pathSegment(s,p,{move:L,reverse:!0});B=L&&z,B||yb(s,n,w,o)}s.closePath(),s.fill(B?"evenodd":"nonzero"),s.restore()}}function g5(s,t,r,n){const o=t.chart.chartArea,{property:c,start:d,end:m}=n||{};if(c==="x"||c==="y"){let h,x,p,w;c==="x"?(h=d,x=o.top,p=m,w=o.bottom):(h=o.left,x=d,p=o.right,w=m),s.beginPath(),r&&(h=Math.max(h,r.left),p=Math.min(p,r.right),x=Math.max(x,r.top),w=Math.min(w,r.bottom)),s.rect(h,x,p-h,w-x),s.clip()}}function yb(s,t,r,n){const o=t.interpolate(r,n);o&&s.lineTo(o.x,o.y)}var _j={id:"filler",afterDatasetsUpdate(s,t,r){const n=(s.data.datasets||[]).length,o=[];let c,d,m,h;for(d=0;d<n;++d)c=s.getDatasetMeta(d),m=c.dataset,h=null,m&&m.options&&m instanceof zu&&(h={visible:s.isDatasetVisible(d),index:d,fill:t5(m,d,n),chart:s,axis:c.controller.options.indexAxis,scale:c.vScale,line:m}),c.$filler=h,o.push(h);for(d=0;d<n;++d)h=o[d],!(!h||h.fill===!1)&&(h.fill=e5(o,d,r.propagate))},beforeDraw(s,t,r){const n=r.drawTime==="beforeDraw",o=s.getSortedVisibleDatasetMetas(),c=s.chartArea;for(let d=o.length-1;d>=0;--d){const m=o[d].$filler;m&&(m.line.updateControlPoints(c,m.axis),n&&m.fill&&Bx(s.ctx,m,c))}},beforeDatasetsDraw(s,t,r){if(r.drawTime!=="beforeDatasetsDraw")return;const n=s.getSortedVisibleDatasetMetas();for(let o=n.length-1;o>=0;--o){const c=n[o].$filler;xb(c)&&Bx(s.ctx,c,s.chartArea)}},beforeDatasetDraw(s,t,r){const n=t.meta.$filler;!xb(n)||r.drawTime!=="beforeDatasetDraw"||Bx(s.ctx,n,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const bb=(s,t)=>{let{boxHeight:r=t,boxWidth:n=t}=s;return s.usePointStyle&&(r=Math.min(r,t),n=s.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(t,r)}},p5=(s,t)=>s!==null&&t!==null&&s.datasetIndex===t.datasetIndex&&s.index===t.index;class vb extends Si{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r,n){this.maxWidth=t,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let r=Ps(t.generateLabels,[this.chart],this)||[];t.filter&&(r=r.filter(n=>t.filter(n,this.chart.data))),t.sort&&(r=r.sort((n,o)=>t.sort(n,o,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:t,ctx:r}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,o=Ya(n.font),c=o.size,d=this._computeTitleHeight(),{boxWidth:m,itemHeight:h}=bb(n,c);let x,p;r.font=o.string,this.isHorizontal()?(x=this.maxWidth,p=this._fitRows(d,c,m,h)+10):(p=this.maxHeight,x=this._fitCols(d,o,m,h)+10),this.width=Math.min(x,t.maxWidth||this.maxWidth),this.height=Math.min(p,t.maxHeight||this.maxHeight)}_fitRows(t,r,n,o){const{ctx:c,maxWidth:d,options:{labels:{padding:m}}}=this,h=this.legendHitBoxes=[],x=this.lineWidths=[0],p=o+m;let w=t;c.textAlign="left",c.textBaseline="middle";let N=-1,_=-p;return this.legendItems.forEach((D,L)=>{const B=n+r/2+c.measureText(D.text).width;(L===0||x[x.length-1]+B+2*m>d)&&(w+=p,x[x.length-(L>0?0:1)]=0,_+=p,N++),h[L]={left:0,top:_,row:N,width:B,height:o},x[x.length-1]+=B+m}),w}_fitCols(t,r,n,o){const{ctx:c,maxHeight:d,options:{labels:{padding:m}}}=this,h=this.legendHitBoxes=[],x=this.columnSizes=[],p=d-t;let w=m,N=0,_=0,D=0,L=0;return this.legendItems.forEach((B,z)=>{const{itemWidth:q,itemHeight:R}=y5(n,r,c,B,o);z>0&&_+R+2*m>p&&(w+=N+m,x.push({width:N,height:_}),D+=N+m,L++,N=_=0),h[z]={left:D,top:_,col:L,width:q,height:R},N=Math.max(N,q),_+=R+m}),w+=N,x.push({width:N,height:_}),w}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:o},rtl:c}}=this,d=Mc(c,this.left,this.width);if(this.isHorizontal()){let m=0,h=qa(n,this.left+o,this.right-this.lineWidths[m]);for(const x of r)m!==x.row&&(m=x.row,h=qa(n,this.left+o,this.right-this.lineWidths[m])),x.top+=this.top+t+o,x.left=d.leftForLtr(d.x(h),x.width),h+=x.width+o}else{let m=0,h=qa(n,this.top+t+o,this.bottom-this.columnSizes[m].height);for(const x of r)x.col!==m&&(m=x.col,h=qa(n,this.top+t+o,this.bottom-this.columnSizes[m].height)),x.top=h,x.left+=this.left+o,x.left=d.leftForLtr(d.x(x.left),x.width),h+=x.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Gh(t,this),this._draw(),Wh(t)}}_draw(){const{options:t,columnSizes:r,lineWidths:n,ctx:o}=this,{align:c,labels:d}=t,m=ta.color,h=Mc(t.rtl,this.left,this.width),x=Ya(d.font),{padding:p}=d,w=x.size,N=w/2;let _;this.drawTitle(),o.textAlign=h.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=x.string;const{boxWidth:D,boxHeight:L,itemHeight:B}=bb(d,w),z=function(I,se,oe){if(isNaN(D)||D<=0||isNaN(L)||L<0)return;o.save();const _e=is(oe.lineWidth,1);if(o.fillStyle=is(oe.fillStyle,m),o.lineCap=is(oe.lineCap,"butt"),o.lineDashOffset=is(oe.lineDashOffset,0),o.lineJoin=is(oe.lineJoin,"miter"),o.lineWidth=_e,o.strokeStyle=is(oe.strokeStyle,m),o.setLineDash(is(oe.lineDash,[])),d.usePointStyle){const he={radius:L*Math.SQRT2/2,pointStyle:oe.pointStyle,rotation:oe.rotation,borderWidth:_e},ie=h.xPlus(I,D/2),Ee=se+N;Xv(o,he,ie,Ee,d.pointStyleWidth&&D)}else{const he=se+Math.max((w-L)/2,0),ie=h.leftForLtr(I,D),Ee=Tc(oe.borderRadius);o.beginPath(),Object.values(Ee).some(Ae=>Ae!==0)?Ih(o,{x:ie,y:he,w:D,h:L,radius:Ee}):o.rect(ie,he,D,L),o.fill(),_e!==0&&o.stroke()}o.restore()},q=function(I,se,oe){Au(o,oe.text,I,se+B/2,x,{strikethrough:oe.hidden,textAlign:h.textAlign(oe.textAlign)})},R=this.isHorizontal(),F=this._computeTitleHeight();R?_={x:qa(c,this.left+p,this.right-n[0]),y:this.top+p+F,line:0}:_={x:this.left+p,y:qa(c,this.top+F+p,this.bottom-r[0].height),line:0},aj(this.ctx,t.textDirection);const T=B+p;this.legendItems.forEach((I,se)=>{o.strokeStyle=I.fontColor,o.fillStyle=I.fontColor;const oe=o.measureText(I.text).width,_e=h.textAlign(I.textAlign||(I.textAlign=d.textAlign)),he=D+N+oe;let ie=_.x,Ee=_.y;h.setWidth(this.width),R?se>0&&ie+he+p>this.right&&(Ee=_.y+=T,_.line++,ie=_.x=qa(c,this.left+p,this.right-n[_.line])):se>0&&Ee+T>this.bottom&&(ie=_.x=ie+r[_.line].width+p,_.line++,Ee=_.y=qa(c,this.top+F+p,this.bottom-r[_.line].height));const Ae=h.x(ie);if(z(Ae,Ee,I),ie=V3(_e,ie+D+N,R?ie+he:this.right,t.rtl),q(h.x(ie),Ee,I),R)_.x+=he+p;else if(typeof I.text!="string"){const re=x.lineHeight;_.y+=Aj(I,re)+p}else _.y+=T}),rj(this.ctx,t.textDirection)}drawTitle(){const t=this.options,r=t.title,n=Ya(r.font),o=rn(r.padding);if(!r.display)return;const c=Mc(t.rtl,this.left,this.width),d=this.ctx,m=r.position,h=n.size/2,x=o.top+h;let p,w=this.left,N=this.width;if(this.isHorizontal())N=Math.max(...this.lineWidths),p=this.top+x,w=qa(t.align,w,this.right-N);else{const D=this.columnSizes.reduce((L,B)=>Math.max(L,B.height),0);p=x+qa(t.align,this.top,this.bottom-D-t.labels.padding-this._computeTitleHeight())}const _=qa(m,w,w+N);d.textAlign=c.textAlign(Pg(m)),d.textBaseline="middle",d.strokeStyle=r.color,d.fillStyle=r.color,d.font=n.string,Au(d,r.text,_,p,n)}_computeTitleHeight(){const t=this.options.title,r=Ya(t.font),n=rn(t.padding);return t.display?r.lineHeight+n.height:0}_getLegendItemAt(t,r){let n,o,c;if(vi(t,this.left,this.right)&&vi(r,this.top,this.bottom)){for(c=this.legendHitBoxes,n=0;n<c.length;++n)if(o=c[n],vi(t,o.left,o.left+o.width)&&vi(r,o.top,o.top+o.height))return this.legendItems[n]}return null}handleEvent(t){const r=this.options;if(!j5(t.type,r))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const o=this._hoveredItem,c=p5(o,n);o&&!c&&Ps(r.onLeave,[t,o,this],this),this._hoveredItem=n,n&&!c&&Ps(r.onHover,[t,n,this],this)}else n&&Ps(r.onClick,[t,n,this],this)}}function y5(s,t,r,n,o){const c=b5(n,s,t,r),d=v5(o,n,t.lineHeight);return{itemWidth:c,itemHeight:d}}function b5(s,t,r,n){let o=s.text;return o&&typeof o!="string"&&(o=o.reduce((c,d)=>c.length>d.length?c:d)),t+r.size/2+n.measureText(o).width}function v5(s,t,r){let n=s;return typeof t.text!="string"&&(n=Aj(t,r)),n}function Aj(s,t){const r=s.text?s.text.length:0;return t*r}function j5(s,t){return!!((s==="mousemove"||s==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(s==="click"||s==="mouseup"))}var Dj={id:"legend",_element:vb,start(s,t,r){const n=s.legend=new vb({ctx:s.ctx,options:r,chart:s});tn.configure(s,n,r),tn.addBox(s,n)},stop(s){tn.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,t,r){const n=s.legend;tn.configure(s,n,r),n.options=r},afterUpdate(s){const t=s.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(s,t){t.replay||s.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,t,r){const n=t.datasetIndex,o=r.chart;o.isDatasetVisible(n)?(o.hide(n),t.hidden=!0):(o.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const t=s.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:o,color:c,useBorderRadius:d,borderRadius:m}}=s.legend.options;return s._getSortedDatasetMetas().map(h=>{const x=h.controller.getStyle(r?0:void 0),p=rn(x.borderWidth);return{text:t[h.index].label,fillStyle:x.backgroundColor,fontColor:c,hidden:!h.visible,lineCap:x.borderCapStyle,lineDash:x.borderDash,lineDashOffset:x.borderDashOffset,lineJoin:x.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:x.borderColor,pointStyle:n||x.pointStyle,rotation:x.rotation,textAlign:o||x.textAlign,borderRadius:d&&(m||x.borderRadius),datasetIndex:h.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class Ej extends Si{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=r;const o=oa(n.text)?n.text.length:1;this._padding=rn(n.padding);const c=o*Ya(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=c:this.width=c}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:r,left:n,bottom:o,right:c,options:d}=this,m=d.align;let h=0,x,p,w;return this.isHorizontal()?(p=qa(m,n,c),w=r+t,x=c-n):(d.position==="left"?(p=n+t,w=qa(m,o,r),h=_s*-.5):(p=c-t,w=qa(m,r,o),h=_s*.5),x=o-r),{titleX:p,titleY:w,maxWidth:x,rotation:h}}draw(){const t=this.ctx,r=this.options;if(!r.display)return;const n=Ya(r.font),c=n.lineHeight/2+this._padding.top,{titleX:d,titleY:m,maxWidth:h,rotation:x}=this._drawArgs(c);Au(t,r.text,0,0,n,{color:r.color,maxWidth:h,rotation:x,textAlign:Pg(r.align),textBaseline:"middle",translation:[d,m]})}}function w5(s,t){const r=new Ej({ctx:s.ctx,options:t,chart:s});tn.configure(s,r,t),tn.addBox(s,r),s.titleBlock=r}var Tj={id:"title",_element:Ej,start(s,t,r){w5(s,r)},stop(s){const t=s.titleBlock;tn.removeBox(s,t),delete s.titleBlock},beforeUpdate(s,t,r){const n=s.titleBlock;tn.configure(s,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const du={average(s){if(!s.length)return!1;let t,r,n=new Set,o=0,c=0;for(t=0,r=s.length;t<r;++t){const m=s[t].element;if(m&&m.hasValue()){const h=m.tooltipPosition();n.add(h.x),o+=h.y,++c}}return c===0||n.size===0?!1:{x:[...n].reduce((m,h)=>m+h)/n.size,y:o/c}},nearest(s,t){if(!s.length)return!1;let r=t.x,n=t.y,o=Number.POSITIVE_INFINITY,c,d,m;for(c=0,d=s.length;c<d;++c){const h=s[c].element;if(h&&h.hasValue()){const x=h.getCenterPoint(),p=Jx(t,x);p<o&&(o=p,m=h)}}if(m){const h=m.tooltipPosition();r=h.x,n=h.y}return{x:r,y:n}}};function Vn(s,t){return t&&(oa(t)?Array.prototype.push.apply(s,t):s.push(t)),s}function pi(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function N5(s,t){const{element:r,datasetIndex:n,index:o}=t,c=s.getDatasetMeta(n).controller,{label:d,value:m}=c.getLabelAndValue(o);return{chart:s,label:d,parsed:c.getParsed(o),raw:s.data.datasets[n].data[o],formattedValue:m,dataset:c.getDataset(),dataIndex:o,datasetIndex:n,element:r}}function jb(s,t){const r=s.chart.ctx,{body:n,footer:o,title:c}=s,{boxWidth:d,boxHeight:m}=t,h=Ya(t.bodyFont),x=Ya(t.titleFont),p=Ya(t.footerFont),w=c.length,N=o.length,_=n.length,D=rn(t.padding);let L=D.height,B=0,z=n.reduce((F,T)=>F+T.before.length+T.lines.length+T.after.length,0);if(z+=s.beforeBody.length+s.afterBody.length,w&&(L+=w*x.lineHeight+(w-1)*t.titleSpacing+t.titleMarginBottom),z){const F=t.displayColors?Math.max(m,h.lineHeight):h.lineHeight;L+=_*F+(z-_)*h.lineHeight+(z-1)*t.bodySpacing}N&&(L+=t.footerMarginTop+N*p.lineHeight+(N-1)*t.footerSpacing);let q=0;const R=function(F){B=Math.max(B,r.measureText(F).width+q)};return r.save(),r.font=x.string,ks(s.title,R),r.font=h.string,ks(s.beforeBody.concat(s.afterBody),R),q=t.displayColors?d+2+t.boxPadding:0,ks(n,F=>{ks(F.before,R),ks(F.lines,R),ks(F.after,R)}),q=0,r.font=p.string,ks(s.footer,R),r.restore(),B+=D.width,{width:B,height:L}}function S5(s,t){const{y:r,height:n}=t;return r<n/2?"top":r>s.height-n/2?"bottom":"center"}function C5(s,t,r,n){const{x:o,width:c}=n,d=r.caretSize+r.caretPadding;if(s==="left"&&o+c+d>t.width||s==="right"&&o-c-d<0)return!0}function k5(s,t,r,n){const{x:o,width:c}=r,{width:d,chartArea:{left:m,right:h}}=s;let x="center";return n==="center"?x=o<=(m+h)/2?"left":"right":o<=c/2?x="left":o>=d-c/2&&(x="right"),C5(x,s,t,r)&&(x="center"),x}function wb(s,t,r){const n=r.yAlign||t.yAlign||S5(s,r);return{xAlign:r.xAlign||t.xAlign||k5(s,t,r,n),yAlign:n}}function _5(s,t){let{x:r,width:n}=s;return t==="right"?r-=n:t==="center"&&(r-=n/2),r}function A5(s,t,r){let{y:n,height:o}=s;return t==="top"?n+=r:t==="bottom"?n-=o+r:n-=o/2,n}function Nb(s,t,r,n){const{caretSize:o,caretPadding:c,cornerRadius:d}=s,{xAlign:m,yAlign:h}=r,x=o+c,{topLeft:p,topRight:w,bottomLeft:N,bottomRight:_}=Tc(d);let D=_5(t,m);const L=A5(t,h,x);return h==="center"?m==="left"?D+=x:m==="right"&&(D-=x):m==="left"?D-=Math.max(p,N)+o:m==="right"&&(D+=Math.max(w,_)+o),{x:Ka(D,0,n.width-t.width),y:Ka(L,0,n.height-t.height)}}function hh(s,t,r){const n=rn(r.padding);return t==="center"?s.x+s.width/2:t==="right"?s.x+s.width-n.right:s.x+n.left}function Sb(s){return Vn([],pi(s))}function D5(s,t,r){return Sl(s,{tooltip:t,tooltipItems:r,type:"tooltip"})}function Cb(s,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?s.override(r):s}const Mj={beforeTitle:xi,title(s){if(s.length>0){const t=s[0],r=t.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return r[t.dataIndex]}return""},afterTitle:xi,beforeBody:xi,beforeLabel:xi,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let t=s.dataset.label||"";t&&(t+=": ");const r=s.formattedValue;return Ns(r)||(t+=r),t},labelColor(s){const r=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const r=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:xi,afterBody:xi,beforeFooter:xi,footer:xi,afterFooter:xi};function jr(s,t,r,n){const o=s[t].call(r,n);return typeof o>"u"?Mj[t].call(r,n):o}class kb extends Si{static positioners=du;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,n=this.options.setContext(this.getContext()),o=n.enabled&&r.options.animation&&n.animations,c=new cj(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(c)),c}getContext(){return this.$context||(this.$context=D5(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:n}=r,o=jr(n,"beforeTitle",this,t),c=jr(n,"title",this,t),d=jr(n,"afterTitle",this,t);let m=[];return m=Vn(m,pi(o)),m=Vn(m,pi(c)),m=Vn(m,pi(d)),m}getBeforeBody(t,r){return Sb(jr(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:n}=r,o=[];return ks(t,c=>{const d={before:[],lines:[],after:[]},m=Cb(n,c);Vn(d.before,pi(jr(m,"beforeLabel",this,c))),Vn(d.lines,jr(m,"label",this,c)),Vn(d.after,pi(jr(m,"afterLabel",this,c))),o.push(d)}),o}getAfterBody(t,r){return Sb(jr(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:n}=r,o=jr(n,"beforeFooter",this,t),c=jr(n,"footer",this,t),d=jr(n,"afterFooter",this,t);let m=[];return m=Vn(m,pi(o)),m=Vn(m,pi(c)),m=Vn(m,pi(d)),m}_createItems(t){const r=this._active,n=this.chart.data,o=[],c=[],d=[];let m=[],h,x;for(h=0,x=r.length;h<x;++h)m.push(N5(this.chart,r[h]));return t.filter&&(m=m.filter((p,w,N)=>t.filter(p,w,N,n))),t.itemSort&&(m=m.sort((p,w)=>t.itemSort(p,w,n))),ks(m,p=>{const w=Cb(t.callbacks,p);o.push(jr(w,"labelColor",this,p)),c.push(jr(w,"labelPointStyle",this,p)),d.push(jr(w,"labelTextColor",this,p))}),this.labelColors=o,this.labelPointStyles=c,this.labelTextColors=d,this.dataPoints=m,m}update(t,r){const n=this.options.setContext(this.getContext()),o=this._active;let c,d=[];if(!o.length)this.opacity!==0&&(c={opacity:0});else{const m=du[n.position].call(this,o,this._eventPosition);d=this._createItems(n),this.title=this.getTitle(d,n),this.beforeBody=this.getBeforeBody(d,n),this.body=this.getBody(d,n),this.afterBody=this.getAfterBody(d,n),this.footer=this.getFooter(d,n);const h=this._size=jb(this,n),x=Object.assign({},m,h),p=wb(this.chart,n,x),w=Nb(n,x,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,c={opacity:1,x:w.x,y:w.y,width:h.width,height:h.height,caretX:m.x,caretY:m.y}}this._tooltipItems=d,this.$context=void 0,c&&this._resolveAnimations().update(this,c),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,n,o){const c=this.getCaretPosition(t,n,o);r.lineTo(c.x1,c.y1),r.lineTo(c.x2,c.y2),r.lineTo(c.x3,c.y3)}getCaretPosition(t,r,n){const{xAlign:o,yAlign:c}=this,{caretSize:d,cornerRadius:m}=n,{topLeft:h,topRight:x,bottomLeft:p,bottomRight:w}=Tc(m),{x:N,y:_}=t,{width:D,height:L}=r;let B,z,q,R,F,T;return c==="center"?(F=_+L/2,o==="left"?(B=N,z=B-d,R=F+d,T=F-d):(B=N+D,z=B+d,R=F-d,T=F+d),q=B):(o==="left"?z=N+Math.max(h,p)+d:o==="right"?z=N+D-Math.max(x,w)-d:z=this.caretX,c==="top"?(R=_,F=R-d,B=z-d,q=z+d):(R=_+L,F=R+d,B=z+d,q=z-d),T=R),{x1:B,x2:z,x3:q,y1:R,y2:F,y3:T}}drawTitle(t,r,n){const o=this.title,c=o.length;let d,m,h;if(c){const x=Mc(n.rtl,this.x,this.width);for(t.x=hh(this,n.titleAlign,n),r.textAlign=x.textAlign(n.titleAlign),r.textBaseline="middle",d=Ya(n.titleFont),m=n.titleSpacing,r.fillStyle=n.titleColor,r.font=d.string,h=0;h<c;++h)r.fillText(o[h],x.x(t.x),t.y+d.lineHeight/2),t.y+=d.lineHeight+m,h+1===c&&(t.y+=n.titleMarginBottom-m)}}_drawColorBox(t,r,n,o,c){const d=this.labelColors[n],m=this.labelPointStyles[n],{boxHeight:h,boxWidth:x}=c,p=Ya(c.bodyFont),w=hh(this,"left",c),N=o.x(w),_=h<p.lineHeight?(p.lineHeight-h)/2:0,D=r.y+_;if(c.usePointStyle){const L={radius:Math.min(x,h)/2,pointStyle:m.pointStyle,rotation:m.rotation,borderWidth:1},B=o.leftForLtr(N,x)+x/2,z=D+h/2;t.strokeStyle=c.multiKeyBackground,t.fillStyle=c.multiKeyBackground,tg(t,L,B,z),t.strokeStyle=d.borderColor,t.fillStyle=d.backgroundColor,tg(t,L,B,z)}else{t.lineWidth=fs(d.borderWidth)?Math.max(...Object.values(d.borderWidth)):d.borderWidth||1,t.strokeStyle=d.borderColor,t.setLineDash(d.borderDash||[]),t.lineDashOffset=d.borderDashOffset||0;const L=o.leftForLtr(N,x),B=o.leftForLtr(o.xPlus(N,1),x-2),z=Tc(d.borderRadius);Object.values(z).some(q=>q!==0)?(t.beginPath(),t.fillStyle=c.multiKeyBackground,Ih(t,{x:L,y:D,w:x,h,radius:z}),t.fill(),t.stroke(),t.fillStyle=d.backgroundColor,t.beginPath(),Ih(t,{x:B,y:D+1,w:x-2,h:h-2,radius:z}),t.fill()):(t.fillStyle=c.multiKeyBackground,t.fillRect(L,D,x,h),t.strokeRect(L,D,x,h),t.fillStyle=d.backgroundColor,t.fillRect(B,D+1,x-2,h-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,r,n){const{body:o}=this,{bodySpacing:c,bodyAlign:d,displayColors:m,boxHeight:h,boxWidth:x,boxPadding:p}=n,w=Ya(n.bodyFont);let N=w.lineHeight,_=0;const D=Mc(n.rtl,this.x,this.width),L=function(oe){r.fillText(oe,D.x(t.x+_),t.y+N/2),t.y+=N+c},B=D.textAlign(d);let z,q,R,F,T,I,se;for(r.textAlign=d,r.textBaseline="middle",r.font=w.string,t.x=hh(this,B,n),r.fillStyle=n.bodyColor,ks(this.beforeBody,L),_=m&&B!=="right"?d==="center"?x/2+p:x+2+p:0,F=0,I=o.length;F<I;++F){for(z=o[F],q=this.labelTextColors[F],r.fillStyle=q,ks(z.before,L),R=z.lines,m&&R.length&&(this._drawColorBox(r,t,F,D,n),N=Math.max(w.lineHeight,h)),T=0,se=R.length;T<se;++T)L(R[T]),N=w.lineHeight;ks(z.after,L)}_=0,N=w.lineHeight,ks(this.afterBody,L),t.y-=c}drawFooter(t,r,n){const o=this.footer,c=o.length;let d,m;if(c){const h=Mc(n.rtl,this.x,this.width);for(t.x=hh(this,n.footerAlign,n),t.y+=n.footerMarginTop,r.textAlign=h.textAlign(n.footerAlign),r.textBaseline="middle",d=Ya(n.footerFont),r.fillStyle=n.footerColor,r.font=d.string,m=0;m<c;++m)r.fillText(o[m],h.x(t.x),t.y+d.lineHeight/2),t.y+=d.lineHeight+n.footerSpacing}}drawBackground(t,r,n,o){const{xAlign:c,yAlign:d}=this,{x:m,y:h}=t,{width:x,height:p}=n,{topLeft:w,topRight:N,bottomLeft:_,bottomRight:D}=Tc(o.cornerRadius);r.fillStyle=o.backgroundColor,r.strokeStyle=o.borderColor,r.lineWidth=o.borderWidth,r.beginPath(),r.moveTo(m+w,h),d==="top"&&this.drawCaret(t,r,n,o),r.lineTo(m+x-N,h),r.quadraticCurveTo(m+x,h,m+x,h+N),d==="center"&&c==="right"&&this.drawCaret(t,r,n,o),r.lineTo(m+x,h+p-D),r.quadraticCurveTo(m+x,h+p,m+x-D,h+p),d==="bottom"&&this.drawCaret(t,r,n,o),r.lineTo(m+_,h+p),r.quadraticCurveTo(m,h+p,m,h+p-_),d==="center"&&c==="left"&&this.drawCaret(t,r,n,o),r.lineTo(m,h+w),r.quadraticCurveTo(m,h,m+w,h),r.closePath(),r.fill(),o.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,n=this.$animations,o=n&&n.x,c=n&&n.y;if(o||c){const d=du[t.position].call(this,this._active,this._eventPosition);if(!d)return;const m=this._size=jb(this,t),h=Object.assign({},d,this._size),x=wb(r,t,h),p=Nb(t,h,x,r);(o._to!==p.x||c._to!==p.y)&&(this.xAlign=x.xAlign,this.yAlign=x.yAlign,this.width=m.width,this.height=m.height,this.caretX=d.x,this.caretY=d.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const o={width:this.width,height:this.height},c={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const d=rn(r.padding),m=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&m&&(t.save(),t.globalAlpha=n,this.drawBackground(c,t,o,r),aj(t,r.textDirection),c.y+=d.top,this.drawTitle(c,t,r),this.drawBody(c,t,r),this.drawFooter(c,t,r),rj(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const n=this._active,o=t.map(({datasetIndex:m,index:h})=>{const x=this.chart.getDatasetMeta(m);if(!x)throw new Error("Cannot find a dataset at index "+m);return{datasetIndex:m,element:x.data[h],index:h}}),c=!Mh(n,o),d=this._positionChanged(o,r);(c||d)&&(this._active=o,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,c=this._active||[],d=this._getActiveElements(t,c,r,n),m=this._positionChanged(d,t),h=r||!Mh(d,c)||m;return h&&(this._active=d,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),h}_getActiveElements(t,r,n,o){const c=this.options;if(t.type==="mouseout")return[];if(!o)return r.filter(m=>this.chart.data.datasets[m.datasetIndex]&&this.chart.getDatasetMeta(m.datasetIndex).controller.getParsed(m.index)!==void 0);const d=this.chart.getElementsAtEventForMode(t,c.mode,c,n);return c.reverse&&d.reverse(),d}_positionChanged(t,r){const{caretX:n,caretY:o,options:c}=this,d=du[c.position].call(this,t,r);return d!==!1&&(n!==d.x||o!==d.y)}}var Oj={id:"tooltip",_element:kb,positioners:du,afterInit(s,t,r){r&&(s.tooltip=new kb({chart:s,options:r}))},beforeUpdate(s,t,r){s.tooltip&&s.tooltip.initialize(r)},reset(s,t,r){s.tooltip&&s.tooltip.initialize(r)},afterDraw(s){const t=s.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(s.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;t.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",r)}},afterEvent(s,t){if(s.tooltip){const r=t.replay;s.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,t)=>t.bodyFont.size,boxWidth:(s,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Mj},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const E5=(s,t,r,n)=>(typeof t=="string"?(r=s.push(t)-1,n.unshift({index:r,label:t})):isNaN(t)&&(r=null),r);function T5(s,t,r,n){const o=s.indexOf(t);if(o===-1)return E5(s,t,r,n);const c=s.lastIndexOf(t);return o!==c?r:o}const M5=(s,t)=>s===null?null:Ka(Math.round(s),0,t);function _b(s){const t=this.getLabels();return s>=0&&s<t.length?t[s]:s}class Rj extends Bc{static id="category";static defaults={ticks:{callback:_b}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:o,label:c}of r)n[o]===c&&n.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Ns(t))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===t?r:T5(n,t,is(r,t),this._addedLabels),M5(r,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),r||(o=this.getLabels().length-1)),this.min=n,this.max=o}buildTicks(){const t=this.min,r=this.max,n=this.options.offset,o=[];let c=this.getLabels();c=t===0&&r===c.length-1?c:c.slice(t,r+1),this._valueRange=Math.max(c.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let d=t;d<=r;d++)o.push({value:d});return o}getLabelForValue(t){return _b.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function O5(s,t){const r=[],{bounds:o,step:c,min:d,max:m,precision:h,count:x,maxTicks:p,maxDigits:w,includeBounds:N}=s,_=c||1,D=p-1,{min:L,max:B}=t,z=!Ns(d),q=!Ns(m),R=!Ns(x),F=(B-L)/(w+1);let T=Ny((B-L)/D/_)*_,I,se,oe,_e;if(T<1e-14&&!z&&!q)return[{value:L},{value:B}];_e=Math.ceil(B/T)-Math.floor(L/T),_e>D&&(T=Ny(_e*T/D/_)*_),Ns(h)||(I=Math.pow(10,h),T=Math.ceil(T*I)/I),o==="ticks"?(se=Math.floor(L/T)*T,oe=Math.ceil(B/T)*T):(se=L,oe=B),z&&q&&c&&I3((m-d)/c,T/1e3)?(_e=Math.round(Math.min((m-d)/T,p)),T=(m-d)/_e,se=d,oe=m):R?(se=z?d:se,oe=q?m:oe,_e=x-1,T=(oe-se)/_e):(_e=(oe-se)/T,fu(_e,Math.round(_e),T/1e3)?_e=Math.round(_e):_e=Math.ceil(_e));const he=Math.max(Sy(T),Sy(se));I=Math.pow(10,Ns(h)?he:h),se=Math.round(se*I)/I,oe=Math.round(oe*I)/I;let ie=0;for(z&&(N&&se!==d?(r.push({value:d}),se<d&&ie++,fu(Math.round((se+ie*T)*I)/I,d,Ab(d,F,s))&&ie++):se<d&&ie++);ie<_e;++ie){const Ee=Math.round((se+ie*T)*I)/I;if(q&&Ee>m)break;r.push({value:Ee})}return q&&N&&oe!==m?r.length&&fu(r[r.length-1].value,m,Ab(m,F,s))?r[r.length-1].value=m:r.push({value:m}):(!q||oe===m)&&r.push({value:oe}),r}function Ab(s,t,{horizontal:r,minRotation:n}){const o=bi(n),c=(r?Math.sin(o):Math.cos(o))||.001,d=.75*t*(""+s).length;return Math.min(t/c,d)}class R5 extends Bc{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,r){return Ns(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:o,max:c}=this;const d=h=>o=r?o:h,m=h=>c=n?c:h;if(t){const h=Yn(o),x=Yn(c);h<0&&x<0?m(0):h>0&&x>0&&d(0)}if(o===c){let h=c===0?1:Math.abs(c*.05);m(c+h),t||d(o-h)}this.min=o,this.max=c}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=t,o;return n?(o=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),r=r||11),r&&(o=Math.min(r,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,r=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const o={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},c=this._range||this,d=O5(o,c);return t.bounds==="ticks"&&z3(d,this,"value"),t.reverse?(d.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),d}configure(){const t=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const o=(n-r)/Math.max(t.length-1,1)/2;r-=o,n+=o}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(t){return Lg(t,this.chart.options.locale,this.options.ticks.format)}}class Ij extends R5{static id="linear";static defaults={ticks:{callback:Wv.formatters.numeric}};determineDataLimits(){const{min:t,max:r}=this.getMinMax(!0);this.min=Ga(t)?t:0,this.max=Ga(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),r=t?this.width:this.height,n=bi(this.options.ticks.minRotation),o=(t?Math.sin(n):Math.cos(n))||.001,c=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,c.lineHeight/o))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const ef={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Nr=Object.keys(ef);function Db(s,t){return s-t}function Eb(s,t){if(Ns(t))return null;const r=s._adapter,{parser:n,round:o,isoWeekday:c}=s._parseOpts;let d=t;return typeof n=="function"&&(d=n(d)),Ga(d)||(d=typeof n=="string"?r.parse(d,n):r.parse(d)),d===null?null:(o&&(d=o==="week"&&(Cu(c)||c===!0)?r.startOf(d,"isoWeek",c):r.startOf(d,o)),+d)}function Tb(s,t,r,n){const o=Nr.length;for(let c=Nr.indexOf(s);c<o-1;++c){const d=ef[Nr[c]],m=d.steps?d.steps:Number.MAX_SAFE_INTEGER;if(d.common&&Math.ceil((r-t)/(m*d.size))<=n)return Nr[c]}return Nr[o-1]}function I5(s,t,r,n,o){for(let c=Nr.length-1;c>=Nr.indexOf(r);c--){const d=Nr[c];if(ef[d].common&&s._adapter.diff(o,n,d)>=t-1)return d}return Nr[r?Nr.indexOf(r):0]}function z5(s){for(let t=Nr.indexOf(s)+1,r=Nr.length;t<r;++t)if(ef[Nr[t]].common)return Nr[t]}function Mb(s,t,r){if(!r)s[t]=!0;else if(r.length){const{lo:n,hi:o}=zg(r,t),c=r[n]>=t?r[n]:r[o];s[c]=!0}}function P5(s,t,r,n){const o=s._adapter,c=+o.startOf(t[0].value,n),d=t[t.length-1].value;let m,h;for(m=c;m<=d;m=+o.add(m,1,n))h=r[m],h>=0&&(t[h].major=!0);return t}function Ob(s,t,r){const n=[],o={},c=t.length;let d,m;for(d=0;d<c;++d)m=t[d],o[m]=d,n.push({value:m,major:!1});return c===0||!r?n:P5(s,n,o,r)}class Rb extends Bc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const n=t.time||(t.time={}),o=this._adapter=new jk._date(t.adapters.date);o.init(r),hu(n.displayFormats,o.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:Eb(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,n=t.time.unit||"day";let{min:o,max:c,minDefined:d,maxDefined:m}=this.getUserBounds();function h(x){!d&&!isNaN(x.min)&&(o=Math.min(o,x.min)),!m&&!isNaN(x.max)&&(c=Math.max(c,x.max))}(!d||!m)&&(h(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&h(this.getMinMax(!1))),o=Ga(o)&&!isNaN(o)?o:+r.startOf(Date.now(),n),c=Ga(c)&&!isNaN(c)?c:+r.endOf(Date.now(),n)+1,this.min=Math.min(o,c-1),this.max=Math.max(o+1,c)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],n=t[t.length-1]),{min:r,max:n}}buildTicks(){const t=this.options,r=t.time,n=t.ticks,o=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const c=this.min,d=this.max,m=U3(o,c,d);return this._unit=r.unit||(n.autoSkip?Tb(r.minUnit,this.min,this.max,this._getLabelCapacity(c)):I5(this,m.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:z5(this._unit),this.initOffsets(o),t.reverse&&m.reverse(),Ob(this,m,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,n=0,o,c;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?r=1-o:r=(this.getDecimalForValue(t[1])-o)/2,c=this.getDecimalForValue(t[t.length-1]),t.length===1?n=c:n=(c-this.getDecimalForValue(t[t.length-2]))/2);const d=t.length<3?.5:.25;r=Ka(r,0,d),n=Ka(n,0,d),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const t=this._adapter,r=this.min,n=this.max,o=this.options,c=o.time,d=c.unit||Tb(c.minUnit,r,n,this._getLabelCapacity(r)),m=is(o.ticks.stepSize,1),h=d==="week"?c.isoWeekday:!1,x=Cu(h)||h===!0,p={};let w=r,N,_;if(x&&(w=+t.startOf(w,"isoWeek",h)),w=+t.startOf(w,x?"day":d),t.diff(n,r,d)>1e5*m)throw new Error(r+" and "+n+" are too far apart with stepSize of "+m+" "+d);const D=o.ticks.source==="data"&&this.getDataTimestamps();for(N=w,_=0;N<n;N=+t.add(N,m,d),_++)Mb(p,N,D);return(N===n||o.bounds==="ticks"||_===1)&&Mb(p,N,D),Object.keys(p).sort(Db).map(L=>+L)}getLabelForValue(t){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(t,n.tooltipFormat):r.format(t,n.displayFormats.datetime)}format(t,r){const o=this.options.time.displayFormats,c=this._unit,d=r||o[c];return this._adapter.format(t,d)}_tickFormatFunction(t,r,n,o){const c=this.options,d=c.ticks.callback;if(d)return Ps(d,[t,r,n],this);const m=c.time.displayFormats,h=this._unit,x=this._majorUnit,p=h&&m[h],w=x&&m[x],N=n[r],_=x&&w&&N&&N.major;return this._adapter.format(t,o||(_?w:p))}generateTickLabels(t){let r,n,o;for(r=0,n=t.length;r<n;++r)o=t[r],o.label=this._tickFormatFunction(o.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(t){const r=this._offsets,n=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,n=this.ctx.measureText(t).width,o=bi(this.isHorizontal()?r.maxRotation:r.minRotation),c=Math.cos(o),d=Math.sin(o),m=this._resolveTickFontOptions(0).size;return{w:n*c+m*d,h:n*d+m*c}}_getLabelCapacity(t){const r=this.options.time,n=r.displayFormats,o=n[r.unit]||n.millisecond,c=this._tickFormatFunction(t,0,Ob(this,[t],this._majorUnit),o),d=this._getLabelSize(c),m=Math.floor(this.isHorizontal()?this.width/d.w:this.height/d.h)-1;return m>0?m:1}getDataTimestamps(){let t=this._cache.data||[],r,n;if(t.length)return t;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(r=0,n=o.length;r<n;++r)t=t.concat(o[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,n;if(t.length)return t;const o=this.getLabels();for(r=0,n=o.length;r<n;++r)t.push(Eb(this,o[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Kv(t.sort(Db))}}function fh(s,t,r){let n=0,o=s.length-1,c,d,m,h;r?(t>=s[n].pos&&t<=s[o].pos&&({lo:n,hi:o}=gl(s,"pos",t)),{pos:c,time:m}=s[n],{pos:d,time:h}=s[o]):(t>=s[n].time&&t<=s[o].time&&({lo:n,hi:o}=gl(s,"time",t)),{time:c,pos:m}=s[n],{time:d,pos:h}=s[o]);const x=d-c;return x?m+(h-m)*(t-c)/x:m}class D6 extends Rb{static id="timeseries";static defaults=Rb.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(t);this._minPos=fh(r,this.min),this._tableRange=fh(r,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:r,max:n}=this,o=[],c=[];let d,m,h,x,p;for(d=0,m=t.length;d<m;++d)x=t[d],x>=r&&x<=n&&o.push(x);if(o.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(d=0,m=o.length;d<m;++d)p=o[d+1],h=o[d-1],x=o[d],Math.round((p+h)/2)!==x&&c.push({time:x,pos:d/(m-1)});return c}_generate(){const t=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((o,c)=>o-c)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?t=this.normalize(r.concat(n)):t=r.length?r:n,t=this._cache.all=t,t}getDecimalForValue(t){return(fh(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const r=this._offsets,n=this.getDecimalForPixel(t)/r.factor-r.end;return fh(this._table,n*this._tableRange+this._minPos,!0)}}const zj="label";function Ib(s,t){typeof s=="function"?s(t):s&&(s.current=t)}function F5(s,t){const r=s.options;r&&t&&Object.assign(r,t)}function Pj(s,t){s.labels=t}function Fj(s,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zj;const n=[];s.datasets=t.map(o=>{const c=s.datasets.find(d=>d[r]===o[r]);return!c||!o.data||n.includes(c)?{...o}:(n.push(c),Object.assign(c,o),c)})}function L5(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zj;const r={labels:[],datasets:[]};return Pj(r,s.labels),Fj(r,s.datasets,t),r}function B5(s,t){const{height:r=150,width:n=300,redraw:o=!1,datasetIdKey:c,type:d,data:m,options:h,plugins:x=[],fallbackContent:p,updateMode:w,...N}=s,_=v.useRef(null),D=v.useRef(null),L=()=>{_.current&&(D.current=new Iu(_.current,{type:d,data:L5(m,c),options:h&&{...h},plugins:x}),Ib(t,D.current))},B=()=>{Ib(t,null),D.current&&(D.current.destroy(),D.current=null)};return v.useEffect(()=>{!o&&D.current&&h&&F5(D.current,h)},[o,h]),v.useEffect(()=>{!o&&D.current&&Pj(D.current.config.data,m.labels)},[o,m.labels]),v.useEffect(()=>{!o&&D.current&&m.datasets&&Fj(D.current.config.data,m.datasets,c)},[o,m.datasets]),v.useEffect(()=>{D.current&&(o?(B(),setTimeout(L)):D.current.update(w))},[o,h,m.labels,m.datasets,w]),v.useEffect(()=>{D.current&&(B(),setTimeout(L))},[d]),v.useEffect(()=>(L(),()=>B()),[]),Sr.createElement("canvas",{ref:_,role:"img",height:r,width:n,...N},p)}const U5=v.forwardRef(B5);function Yg(s,t){return Iu.register(t),v.forwardRef((r,n)=>Sr.createElement(U5,{...r,ref:n,type:s}))}const Lj=Yg("line",vk),zb=Yg("bar",pk),$5=Yg("doughnut",bk);Iu.register(Rj,Ij,Nj,zu,Q_,z_,Tj,Oj,Dj,_j);const H5=()=>{const[s,t]=v.useState("30D"),[r,n]=v.useState("7D"),o=[{id:"#ORD-001",customer:"John Smith",items:"Pizza Margherita, Coke",paymentMethod:"Credit Card",total:24.5,status:"COMPLETED",time:"2 min ago"},{id:"#ORD-002",customer:"Sarah Johnson",items:"Burger Deluxe, Fries",paymentMethod:"Cash",total:18.75,status:"COMPLETED",time:"5 min ago"},{id:"#ORD-003",customer:"Mike Wilson",items:"Pasta Carbonara",paymentMethod:"Mobile Pay",total:16.9,status:"PROCESSING",time:"8 min ago"},{id:"#ORD-004",customer:"Lisa Brown",items:"Chicken Wings, Beer",paymentMethod:"Credit Card",total:22.3,status:"COMPLETED",time:"12 min ago"},{id:"#ORD-005",customer:"David Lee",items:"Caesar Salad, Water",paymentMethod:"Cash",total:14.25,status:"COMPLETED",time:"15 min ago"},{id:"#ORD-006",customer:"Emma Davis",items:"Steak, Wine",paymentMethod:"Credit Card",total:45.8,status:"PREPARING",time:"18 min ago"}],c=F=>{switch(F){case"Credit Card":return e.jsx($0,{className:"w-4 h-4 text-yellow-600"});case"Cash":return e.jsx(oN,{className:"w-4 h-4 text-green-600"});case"Mobile Pay":return e.jsx(k1,{className:"w-4 h-4 text-blue-600"});default:return e.jsx($0,{className:"w-4 h-4 text-gray-600"})}},d=F=>{switch(F){case"COMPLETED":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:F});case"PROCESSING":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:F});case"PREPARING":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded-full",children:F});default:return e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:F})}},m=F=>{switch(F){case"7D":return{labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],data:[1200,1900,1600,2100,1800,2200,1950]};case"30D":return{labels:["Week 1","Week 2","Week 3","Week 4"],data:[15e3,18e3,22e3,19e3]};case"90D":return{labels:["Month 1","Month 2","Month 3"],data:[45e3,52e3,48e3]};default:return{labels:["Week 1","Week 2","Week 3","Week 4"],data:[15e3,18e3,22e3,19e3]}}},h=F=>{const T={Pizza:34,Burger:24,Pasta:20,Salad:15,Dessert:5},I=F==="7D"?1:F==="30D"?4:12;return Object.fromEntries(Object.entries(T).map(([se,oe])=>[se,oe*I]))},x=m(s),p=h(r),w={labels:x.labels,datasets:[{label:"Daily Sales",data:x.data,borderColor:"#0f766e",backgroundColor:"rgba(15, 118, 110, 0.1)",borderWidth:2,fill:!0,tension:.4,pointBackgroundColor:"#0f766e",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]},N={labels:Object.keys(p),datasets:[{label:"Sales",data:Object.values(p),backgroundColor:["#0f766e","#0891b2","#059669","#ea580c","#dc2626"],borderRadius:8,borderSkipped:!1}]},_={labels:["Credit Card","Cash","Mobile Pay"],datasets:[{data:[65,25,10],backgroundColor:["#0f766e","#0891b2","#059669"],borderWidth:0,cutout:"60%"}]},D={labels:["Lunch (12-2PM)","Dinner (6-8PM)","Late Night (9-11PM)"],datasets:[{label:"Sales",data:[2700,4100,1300],backgroundColor:["#0f766e","#0891b2","#059669"],borderRadius:8,borderSkipped:!1}]},L={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,color:"#0f766e",font:{size:16,weight:"bold"},align:"start",padding:{bottom:20}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#374151",bodyColor:"#374151",borderColor:"#e5e7eb",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(F){return`Sales: $${F.parsed.y.toLocaleString()}`}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6b7280",font:{size:12}}},y:{beginAtZero:!0,max:s==="7D"?2500:s==="30D"?25e3:6e4,grid:{color:"rgba(229, 231, 235, 0.3)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:12},callback:function(F){return"$"+F.toLocaleString()}}}},interaction:{intersect:!1,mode:"index"}},B={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,color:"#0f766e",font:{size:16,weight:"bold"},align:"start",padding:{bottom:20}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#374151",bodyColor:"#374151",borderColor:"#e5e7eb",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(F){return`Sales: ${F.parsed.y.toLocaleString()}`}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6b7280",font:{size:12}}},y:{beginAtZero:!0,max:r==="7D"?35:r==="30D"?140:420,grid:{color:"rgba(229, 231, 235, 0.3)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:12}}}}},z={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:20,color:"#374151",font:{size:12}}},title:{display:!0,color:"#0f766e",font:{size:16,weight:"bold"},align:"start",padding:{bottom:20}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#374151",bodyColor:"#374151",borderColor:"#e5e7eb",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(F){return`${F.label}: ${F.parsed}%`}}}}},q={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,color:"#0f766e",font:{size:16,weight:"bold"},align:"start",padding:{bottom:20}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#374151",bodyColor:"#374151",borderColor:"#e5e7eb",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(F){return`Sales: $${F.parsed.y.toLocaleString()}`}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6b7280",font:{size:12}}},y:{beginAtZero:!0,max:4500,grid:{color:"rgba(229, 231, 235, 0.3)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:12},callback:function(F){return"$"+F.toLocaleString()}}}}},R=({active:F,children:T,onClick:I})=>e.jsx("button",{onClick:I,className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${F?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:T});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Dashboard Overview"}),e.jsx("p",{className:"text-gray-600",children:"Real-time insights into your restaurant performance"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:"$12,847"}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+12.5% vs last week"})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-yellow-400 to-yellow-600 flex items-center justify-center",children:e.jsx(Fc,{className:"w-6 h-6 text-white"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Orders Today"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:"156"}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+8.2% vs yesterday"})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center",children:e.jsx(ko,{className:"w-6 h-6 text-white"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Food Items Sold"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:"342"}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+15.3% vs yesterday"})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center",children:e.jsx(ji,{className:"w-6 h-6 text-white"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Customer Rating"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:"4.8/5"}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+0.2 vs last week"})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-yellow-400 to-yellow-600 flex items-center justify-center",children:e.jsx(iu,{className:"w-6 h-6 text-white"})})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Daily Sales Trend"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{active:s==="7D",onClick:()=>t("7D"),children:"7D"}),e.jsx(R,{active:s==="30D",onClick:()=>t("30D"),children:"30D"}),e.jsx(R,{active:s==="90D",onClick:()=>t("90D"),children:"90D"})]})]}),e.jsx("div",{className:"h-80",children:e.jsx(Lj,{data:w,options:L})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Top Food Items"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{active:r==="7D",onClick:()=>n("7D"),children:"7D"}),e.jsx(R,{active:r==="30D",onClick:()=>n("30D"),children:"30D"}),e.jsx(R,{active:r==="90D",onClick:()=>n("90D"),children:"90D"})]})]}),e.jsx("div",{className:"h-80",children:e.jsx(zb,{data:N,options:B})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qx,{className:"w-5 h-5 text-yellow-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Payment Methods"})]}),e.jsxs("div",{className:"flex space-x-4 text-sm text-gray-600",children:[e.jsx("span",{children:"Credit Card"}),e.jsx("span",{children:"Cash"}),e.jsx("span",{children:"Mobile Pay"})]})]}),e.jsx("div",{className:"h-80",children:e.jsx($5,{data:_,options:z})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5 text-red-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Peak Hours Analysis"})]}),e.jsxs("div",{className:"flex space-x-4 text-sm text-gray-600",children:[e.jsx("span",{children:"Lunch"}),e.jsx("span",{children:"Dinner"}),e.jsx("span",{children:"Late Night"})]})]}),e.jsx("div",{className:"h-80",children:e.jsx(zb,{data:D,options:q})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qx,{className:"w-5 h-5 text-yellow-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Recent Sales Transactions"})]}),e.jsxs("button",{className:"bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg transition-colors duration-200 flex items-center gap-2",children:[e.jsx(vn,{className:"w-4 h-4"}),"View All Sales"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Order ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Items"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Payment Method"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Total"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Time"})]})}),e.jsx("tbody",{children:o.map((F,T)=>e.jsxs("tr",{className:`border-b border-gray-100 ${T%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:F.id}),e.jsx("td",{className:"py-3 px-4 text-gray-700",children:F.customer}),e.jsx("td",{className:"py-3 px-4 text-gray-700",children:F.items}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[c(F.paymentMethod),e.jsx("span",{className:"text-gray-700",children:F.paymentMethod})]})}),e.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900",children:["$",F.total.toFixed(2)]}),e.jsx("td",{className:"py-3 px-4",children:d(F.status)}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:F.time})]},F.id))})]})})]})]})},V5=()=>{const s=ka(),[t,r]=v.useState("all"),[n,o]=v.useState([]),[c,d]=v.useState(!1),[m,h]=v.useState(!1),[x,p]=v.useState(!1),[w,N]=v.useState(null),[_,D]=v.useState(null),[L,B]=v.useState(null),{alertState:z,showError:q,showSuccess:R,hideAlert:F}=Yh(),T=async()=>{d(!0);try{if(!window.myAPI)return;let le;if(t==="today"){const J=new Date().toISOString().split("T")[0];le=await window.myAPI.getReservationsByDateRange(J,J,1)}else if(t==="upcoming"){const J=new Date().toISOString().split("T")[0],Ce=new Date;Ce.setFullYear(Ce.getFullYear()+1),le=await window.myAPI.getReservationsByDateRange(J,Ce.toISOString().split("T")[0],1)}else t==="all"?le=await window.myAPI.getReservationsByHotelId(1,100,0):le=await window.myAPI.getReservationsByStatus(t,1,100,0);le&&le.success&&o(le.data||[])}catch(le){console.error("Error loading reservations:",le),q("Failed to load reservations")}finally{d(!1)}};v.useEffect(()=>{T()},[t]);const I=v.useMemo(()=>{if(t==="today"){const le=new Date().toISOString().split("T")[0];return n.filter(J=>J.reservation_date===le)}else if(t==="upcoming"){const le=new Date().toISOString().split("T")[0];return n.filter(J=>J.reservation_date>le)}else return t==="all"?n:n.filter(le=>le.status===t)},[t,n]),se=le=>{N(le),h(!0)},oe=async()=>{if(w)try{const le=await window.myAPI.deleteReservation(w.id);le&&le.success?(R("Reservation deleted successfully"),T()):q("Failed to delete reservation")}catch(le){console.error("Error deleting reservation:",le),q("An error occurred while deleting the reservation")}h(!1),N(null)},_e=()=>{h(!1),N(null)},he=async(le,J)=>{try{const Ce=await window.myAPI.updateReservation(le,{status:J});Ce&&Ce.success?(R(`Reservation ${J} successfully`),T()):q(`Failed to ${J} reservation`)}catch(Ce){console.error("Error updating reservation status:",Ce),q(`An error occurred while ${J} the reservation`)}},ie=()=>{p(!0)},Ee=()=>{T()},Ae=le=>le.status==="confirmed",re=le=>le==="confirmed"?e.jsx("span",{className:"px-2 py-2 text-xs rounded bg-green-100 text-green-700",children:"CONFIRMED"}):le==="completed"?e.jsx("span",{className:"px-2 py-2 text-xs rounded bg-blue-100 text-blue-700",children:"COMPLETED"}):e.jsx("span",{className:"px-2 py-2 text-xs rounded bg-gray-100 text-gray-700",children:"CANCELLED"});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hN,{size:18,className:"text-primary"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Reservations"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:ie,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx(Ls,{size:16}),"New Reservation"]}),e.jsx("button",{onClick:()=>s("/dashboard/sales"),className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"Sales Screen"})]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-3",children:[{id:"all",label:"All"},{id:"today",label:"Today"},{id:"upcoming",label:"Upcoming"},{id:"confirmed",label:"Confirmed"},{id:"completed",label:"Completed"},{id:"cancelled",label:"Cancelled"}].map(le=>e.jsx("button",{onClick:()=>r(le.id),className:`px-4 py-2 rounded text-sm transition-colors duration-150 ${t===le.id?"bg-primary text-white":"bg-white text-gray-700 border border-gray-300 shadow-sm"}`,children:le.label},le.id))}),c?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"Loading reservations..."})}):e.jsx("div",{className:"overflow-auto",children:I.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No reservations found"}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Table"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Party"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map(le=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 text-sm text-gray-800 font-medium",children:le.customer_name}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:new Date(le.reservation_date).toLocaleDateString()}),e.jsxs("td",{className:"px-3 py-2 text-sm text-gray-700",children:[le.start_time," - ",le.end_time]}),e.jsxs("td",{className:"px-3 py-2 text-sm text-gray-700",children:[le.table_no?`Table ${le.table_no}`:"No table",le.floor_name&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",le.floor_name,")"]})]}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:le.party_size}),e.jsx("td",{className:"px-3 py-2 text-sm",children:re(le.status)}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:le.special_notes?le.special_notes.length>10?`${le.special_notes.slice(0,10)}...`:le.special_notes:"-"}),e.jsx("td",{className:"px-3 py-2 text-sm",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>B(le),className:"px-3 py-1 rounded bg-gray-200 text-gray-800 text-sm hover:bg-gray-300",children:"View"}),Ae(le)&&e.jsx("button",{onClick:()=>D(le),className:"px-3 py-1 rounded bg-[#007bff] text-white text-sm hover:bg-[#0056b3]",children:"Edit"}),le.status==="confirmed"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>he(le.id,"completed"),className:"px-3 py-1 rounded bg-[#28a745] text-white text-sm hover:bg-[#1e7e34]",children:"Complete"}),e.jsx("button",{onClick:()=>he(le.id,"cancelled"),className:"px-3 py-1 rounded bg-[#dc3545] text-white text-sm hover:bg-[#c82333]",children:"Cancel"})]}):le.status==="completed"?e.jsx("button",{onClick:()=>he(le.id,"cancelled"),className:"px-3 py-1 rounded bg-[#dc3545] text-white text-sm hover:bg-[#c82333]",children:"Cancel"}):null,e.jsx("button",{onClick:()=>se(le),className:"px-3 py-1 rounded bg-[#6c757d] text-white text-sm hover:bg-[#545b62]",children:"Delete"})]})})]},le.id))})]})})]}),m&&e.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:_e}),e.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-primary",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Delete Reservation"}),e.jsx("button",{onClick:_e,className:"w-8 h-8 flex items-center justify-center rounded hover:bg-white/15",children:e.jsx(St,{className:"w-5 h-5 text-white"})})]}),e.jsx("div",{className:"p-4",children:e.jsxs("p",{className:"text-gray-700",children:["Are you sure you want to delete ",w?.customer_name,"'s reservation for table ",w?.table_no||"No table","?"]})}),e.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t",children:[e.jsx("button",{onClick:_e,className:"px-4 py-2 rounded bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{onClick:oe,className:"px-4 py-2 rounded bg-red-600 text-white",children:"Delete"})]})]})]}),e.jsx(Dv,{isOpen:x,onClose:()=>p(!1),onCreate:Ee}),L&&e.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>B(null)}),e.jsxs("div",{className:"relative w-full max-w-lg bg-white rounded-lg shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-primary",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Reservation Details"}),e.jsx("button",{onClick:()=>B(null),className:"w-8 h-8 flex items-center justify-center rounded hover:bg-white/15",children:e.jsx(St,{className:"w-5 h-5 text-white"})})]}),e.jsx("div",{className:"p-4 space-y-2 text-sm text-gray-800",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Customer"}),e.jsx("div",{className:"font-medium",children:L.customer_name||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Date"}),e.jsx("div",{className:"font-medium",children:L.reservation_date?new Date(L.reservation_date).toLocaleDateString():"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Time"}),e.jsxs("div",{className:"font-medium",children:[L.start_time," - ",L.end_time]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Party Size"}),e.jsx("div",{className:"font-medium",children:L.party_size||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-gray-500",children:"Table"}),e.jsxs("div",{className:"font-medium",children:[L.table_no?`Table ${L.table_no}`:"No table",L.floor_name&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",L.floor_name,")"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Status"}),e.jsx("div",{className:"mt-1",children:re(L.status)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-gray-500",children:"Notes"}),e.jsx("div",{className:"font-medium whitespace-pre-wrap",children:L.special_notes||"-"})]})]})}),e.jsx("div",{className:"flex justify-end gap-2 p-4 border-t",children:e.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 rounded bg-gray-500 text-white",children:"Close"})})]})]}),e.jsx(Ni,{message:z.message,isVisible:z.isVisible,onClose:F,duration:z.duration,type:z.type})]})},q5=({isOpen:s,onClose:t,onConfirm:r,title:n="Confirm Action",message:o="Are you sure you want to proceed?",confirmText:c="Confirm",cancelText:d="Cancel",type:m="warning",isLoading:h=!1})=>{if(!s)return null;const x=()=>{switch(m){case"success":return e.jsx(xa,{size:24,className:"text-green-600"});case"danger":return e.jsx(yu,{size:24,className:"text-red-600"});default:return e.jsx(yu,{size:24,className:"text-yellow-600"})}},p=()=>{switch(m){case"success":return"bg-green-600 hover:bg-green-700 text-white";case"danger":return"bg-red-600 hover:bg-red-700 text-white";default:return"bg-primary hover:bg-primaryDark text-white"}};return e.jsx("div",{className:"fixed inset-0 bg-[#00000080] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md transform transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[x(),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-600 leading-relaxed",children:o})}),e.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:t,disabled:h,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:d}),e.jsx("button",{onClick:r,disabled:h,className:`flex-1 px-4 py-2 rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed ${p()}`,children:h?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processing..."]}):c})]})]})})},K5=()=>{const[s,t]=v.useState("all"),[r,n]=v.useState([]),[o,c]=v.useState([]),[d,m]=v.useState(""),[h,x]=v.useState(""),[p,w]=v.useState(""),[N,_]=v.useState(""),[D,L]=v.useState(null),[B,z]=v.useState([]),[q,R]=v.useState(null),[F,T]=v.useState(!1),[I,se]=v.useState(!1),[oe,_e]=v.useState(!1),[he,ie]=v.useState("all"),[Ee,Ae]=v.useState("all"),[re,le]=v.useState(!0),[J,Ce]=v.useState(null),[Se,He]=v.useState(null),[Y,be]=v.useState(!1),[ye,ae]=v.useState(null),[Ne,ge]=v.useState("New"),[A,P]=v.useState(!1),[f,g]=v.useState(!1),[S,k]=v.useState(null),[C,O]=v.useState(!1),[U,H]=v.useState(!1),[V,ee]=v.useState(null),[X,M]=v.useState({title:"",message:"",type:"warning",onConfirm:null}),[Q,ue]=v.useState(!1),[ne,fe]=v.useState(!1),[ce,Me]=v.useState({message:"",type:"success"}),[Re,ze]=v.useState(!1),[rt,Ve]=v.useState("Cash"),[Je,We]=v.useState(""),[it,Qe]=v.useState(""),[At,xt]=v.useState(""),[Te,Ke]=v.useState([]),[Pe,qe]=v.useState(!1),[ft,ot]=v.useState("EUR"),[pt,ke]=v.useState(""),[st]=v.useState([{code:"EUR",symbol:"€",name:"Euro"},{code:"USD",symbol:"$",name:"US Dollar"},{code:"GBP",symbol:"£",name:"British Pound"}]),[gt,kt]=v.useState(null),[Mt,de]=v.useState(""),[De,Le]=v.useState([]),[ve,Ze]=v.useState(!1),[mt,dt]=v.useState("percentage"),[jt,wt]=v.useState(""),[Tt,me]=v.useState(""),[Ie,te]=v.useState(""),Z=ka(),{showKeyboard:Be,activeInput:Xe,keyboardInput:nt,handleInputBlur:ut,handleAnyInputFocus:Et,handleAnyInputClick:Rt,hideKeyboard:Ht}=Wn(["searchTerm","customerSearchTerm"]),ss=G=>{const Fe=os=>String(os).padStart(2,"0"),Lt=G.getFullYear(),Jt=Fe(G.getMonth()+1),rs=Fe(G.getDate()),lr=Fe(G.getHours()),Vr=Fe(G.getMinutes());return`${Lt}-${Jt}-${rs}T${lr}:${Vr}`};v.useEffect(()=>{const G=new Date,Fe=new Date(G.getFullYear(),G.getMonth(),G.getDate(),0,0,0),Lt=new Date(G.getFullYear(),G.getMonth(),G.getDate(),G.getHours(),G.getMinutes(),0);w(ss(Fe)),_(ss(Lt)),Pt(Fe.toISOString(),Lt.toISOString())},[]);const Pt=async(G,Fe)=>{try{le(!0),Ce(null);const Lt=await window.myAPI.getOrdersByDateRange(G,Fe);if(Lt.success){const Jt=await Promise.all(Lt.data.map(async rs=>{let lr=null;if(rs.customer_id)try{const Vr=await window.myAPI.getCustomerById(rs.customer_id);Vr.success&&Vr.data&&(lr=Vr.data)}catch(Vr){console.warn(`Failed to fetch customer data for order ${rs.id}:`,Vr)}return{...rs,customerData:lr,orderDate:new Date(rs.created_at).toLocaleDateString(),orderTime:new Date(rs.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),dueDate:rs.schedule_at?new Date(rs.schedule_at).toLocaleDateString():"N/A",dueTime:rs.schedule_at?new Date(rs.schedule_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A",total:parseFloat(rs.order_amount||0),status:rs.order_status||"new",paymentStatus:rs.payment_status||"pending"}}));n(Jt),c(Jt)}else Ce(Lt.message||"Failed to load orders"),n([]),c([])}catch(Lt){console.error("Error loading orders:",Lt),Ce("Failed to load orders"),n([]),c([])}finally{le(!1)}};v.useEffect(()=>{let G=r;s==="collection"?G=G.filter(Fe=>Rs(Fe.order_type)==="collection"):s==="delivery"?G=G.filter(Fe=>Rs(Fe.order_type)==="delivery"):s==="online"?G=G.filter(Fe=>Rs(Fe.order_type)==="online"):s==="dinein"?G=G.filter(Fe=>Rs(Fe.order_type)==="dinein"):s==="instore"?G=G.filter(Fe=>Rs(Fe.order_type)==="instore"):s==="paid"?G=G.filter(Fe=>Fe.paymentStatus==="paid"):s==="unpaid"&&(G=G.filter(Fe=>Fe.paymentStatus==="unpaid")),he==="paid"?G=G.filter(Fe=>Fe.paymentStatus==="paid"):he==="unpaid"&&(G=G.filter(Fe=>Fe.paymentStatus==="unpaid")),Ee!=="all"&&(G=G.filter(Fe=>Fe.status===Ee)),d&&(G=G.filter(Fe=>Fe.id.toString().toLowerCase().includes(d.toLowerCase())||Fe.order_number?.toLowerCase().includes(d.toLowerCase()))),h&&(G=G.filter(Fe=>Fe.customerData?Fe.customerData.name?.toLowerCase().includes(h.toLowerCase())||Fe.customerData.phone?.includes(h):!1)),c(G)},[r,s,he,Ee,d,h]),v.useEffect(()=>{if(!(!p||!N))try{const G=new Date(p).toISOString(),Fe=new Date(N).toISOString();Pt(G,Fe)}catch{}},[p,N]);const ms=()=>{t("all"),ie("all"),Ae("all"),m(""),x("");const G=new Date,Fe=new Date(G.getFullYear(),G.getMonth(),G.getDate(),0,0,0),Lt=new Date(G.getFullYear(),G.getMonth(),G.getDate(),G.getHours(),G.getMinutes(),0);w(ss(Fe)),_(ss(Lt)),Pt(Fe.toISOString(),Lt.toISOString())},as=async G=>{try{T(!0),L(G),se(!0),setTimeout(()=>_e(!0),10);const[Fe,Lt]=await Promise.all([window.myAPI.getOrderDetailsWithFood(G.id),window.myAPI.calculateOrderTotal(G.id)]);Fe?.success?z(Fe.data||[]):z([]),Lt?.success?R(Lt.data||null):R(null)}finally{T(!1)}},ys=()=>{_e(!1),setTimeout(()=>{se(!1),L(null),z([]),R(null)},300)},vs=G=>{ae({id:G.id,orderNumber:G.id,orderType:ya(G.order_type),status:G.status,customer:G.customerData});const Lt=(Jt=>{if(!Jt)return"New";const rs={new:"New","in progress":"In Progress",inprogress:"In Progress",ready:"Ready",completed:"Completed",delivered:"Delivered","on the way":"On the way",ontheway:"On the way"},lr=Jt.toLowerCase().replace(/[_\s-]+/g," ");return rs[lr]||Jt.charAt(0).toUpperCase()+Jt.slice(1).toLowerCase()})(G.status);ge(Lt),be(!0)},Nt=()=>{be(!1),ae(null),ge("New")},Ct=G=>{if(Rs(G.order_type)!=="delivery"){console.log("Rider assignment is only available for delivery orders");return}k({id:G.id,orderNumber:G.id,orderType:ya(G.order_type),status:G.status,customer:G.customerData}),g(!0)},zt=()=>{g(!1),k(null)},qt=async G=>{try{const[Fe,Lt]=await Promise.all([window.myAPI.getOrderDetailsWithFood(G.id),window.myAPI.calculateOrderTotal(G.id)]),Jt=Fe?.success?Fe.data:[],rs=Lt?.success?Lt.data:null,lr={orderNumber:G.id,orderType:ya(G.order_type),placedAt:G.created_at,createdAt:G.created_at,customer:G.customerData?{name:G.customerData.name||"Walk-in Customer",phone:G.customerData.phone,email:G.customerData.email,address:G.customerData.address,addresses:G.customerData.address?[G.customerData.address]:[]}:{name:"Walk-in Customer",phone:"N/A",address:"N/A",addresses:[]},table:G.table_details,items:Jt.map(os=>({id:os.id,food:{id:os.food_id,name:os.food_name,description:os.food_description},quantity:os.quantity,totalPrice:Number(os.price||0)*Number(os.quantity||1),variations:os.variation?(()=>{try{return JSON.parse(os.variation)}catch{return{}}})():{},adons:os.add_ons?(()=>{try{return JSON.parse(os.add_ons)}catch{return[]}})():[]})),notes:G.special_instructions||null},Vr={variations:Jt.reduce((os,Pa)=>{if(Pa.variation)try{const _n=JSON.parse(Pa.variation);Object.keys(_n).forEach(Qa=>{os[Qa]||(os[Qa]={id:parseInt(Qa),name:`Variation ${Qa}`,options:[]})})}catch{console.warn("Failed to parse variations for detail:",Pa.id)}return os},{}),adons:Jt.reduce((os,Pa)=>{if(Pa.add_ons)try{JSON.parse(Pa.add_ons).forEach(Qa=>{os.find(Pu=>Pu.id===parseInt(Qa))||os.push({id:parseInt(Qa),name:`Addon ${Qa}`,price:0})})}catch{console.warn("Failed to parse add-ons for detail:",Pa.id)}return os},[])};ee(lr),z(Jt),H(!0)}catch(Fe){console.error("Error preparing invoice data:",Fe),Os("Failed to load invoice data","error")}},Kt=()=>{H(!1),ee(null)},js=async G=>{if(ye){console.log("handleStatusUpdate called with status:",G),console.log("selectedOrderForStatus:",ye),P(!0);try{let Fe=G;switch(G){case"New":Fe="new";break;case"In Progress":Fe="in_progress";break;case"Ready":Fe="ready";break;case"On the way":Fe="on_the_way";break;case"Delivered":Fe="delivered";break;case"Completed":Fe="completed";break;default:Fe=G.toLowerCase().replace(/\s+/g,"_")}console.log("Mapped status for database:",Fe);const Lt=await window.myAPI.updateOrderStatus(ye.id,Fe);console.log("API result:",Lt),Lt.success?(n(Jt=>Jt.map(rs=>rs.id===ye.id?{...rs,status:G}:rs)),console.log("Order status updated successfully"),setTimeout(()=>{Nt()},500)):console.error("Failed to update order status:",Lt.message)}catch(Fe){console.error("Error updating order status:",Fe)}finally{P(!1)}}},aa=G=>{console.log("handleStatusChange called with status:",G),ge(G)},Ci=async G=>{if(!S)return!1;try{console.log(`Assigning rider ${G.name} to order ${S.id}`);const Fe=await window.myAPI.updateOrderStatus(S.id,"on_the_way");return Fe.success?(n(Lt=>Lt.map(Jt=>Jt.id===S.id?{...Jt,driver:G.name,status:"On the way"}:Jt)),console.log('Order status updated to "On the way" and rider assigned successfully'),zt(),!0):(console.error("Failed to update order status:",Fe.message),!1)}catch(Fe){return console.error("Error assigning rider:",Fe),!1}},Xa=async G=>{try{if(G.status==="delivered"||G.status==="Delivered"){Os(`Order #${G.id} is already marked as delivered`,"warning");return}Do("Mark Order as Delivered",`Are you sure you want to mark Order #${G.id} as delivered?

This action will change the order status to "delivered" and cannot be undone.`,"warning",async()=>{try{console.log(`Marking order ${G.id} as delivered`);const Fe=await window.myAPI.updateOrderStatus(G.id,"delivered");Fe.success?(n(Lt=>Lt.map(Jt=>Jt.id===G.id?{...Jt,status:"delivered"}:Jt)),console.log("Order marked as delivered successfully"),Os(`Order #${G.id} has been marked as delivered successfully!`,"success"),He(null)):(console.error("Failed to mark order as delivered:",Fe.message),Os(`Failed to mark order as delivered: ${Fe.message}`,"error"))}catch(Fe){console.error("Error marking order as delivered:",Fe),Os("An error occurred while marking the order as delivered","error")}})}catch(Fe){console.error("Error marking order as delivered:",Fe),alert("An error occurred while marking the order as delivered")}},Do=(G,Fe,Lt="warning",Jt)=>{M({title:G,message:Fe,type:Lt,onConfirm:Jt}),O(!0)},Uc=()=>{O(!1),M({title:"",message:"",type:"warning",onConfirm:null})},Os=(G,Fe="success")=>{Me({message:G,type:Fe}),fe(!0)},Cl=async()=>{try{if(!Se)return;const G=r.find(Fe=>Fe.id===Se);if(!G)return;if(G.status==="completed"||G.status==="Completed"){Os(`Order #${G.id} is already completed`,"warning");return}if(G.status==="delivered"||G.status==="Delivered"||G.status==="canceled"||G.status==="Canceled"){Os(`Order #${G.id} cannot be completed as it is in ${G.status} state`,"warning");return}Do("Complete Order",`Are you sure you want to mark Order #${G.id} as completed?

This action will change the order status to "completed" and cannot be undone.`,"warning",async()=>{try{console.log(`Completing order ${G.id}`);const Fe=await window.myAPI.updateOrderStatus(G.id,"completed");Fe.success?(n(Lt=>Lt.map(Jt=>Jt.id===G.id?{...Jt,status:"completed"}:Jt)),console.log("Order completed successfully"),Os(`Order #${G.id} has been completed successfully!`,"success"),He(null)):(console.error("Failed to complete order:",Fe.message),Os(`Failed to complete order: ${Fe.message}`,"error"))}catch(Fe){console.error("Error completing order:",Fe),Os("An error occurred while completing the order","error")}})}catch(G){console.error("Error completing order:",G),alert("An error occurred while completing the order")}},ki=G=>{if(Qe(G),We(G),G){const Fe=parseFloat(order?.total||0),Lt=parseFloat(G)-Fe;xt(Lt>0?Lt.toFixed(2):"0.00")}else xt("0.00")},Eo=G=>{if(We(G),Qe(G),G){const Fe=parseFloat(order?.total||0),Lt=parseFloat(G)-Fe;xt(Lt>0?Lt.toFixed(2):"0.00")}else xt("0.00")},zs=(G,Fe,Lt)=>{me(Fe),te(Lt||"")},Nn=G=>{te(G)},kl=G=>{G==="{bksp}"&&te(Fe=>Fe.slice(0,-1))},Xn=()=>{if(!Je||parseFloat(Je)<=0)return;const G={method:rt,amount:parseFloat(Je)};Ke(Fe=>[...Fe,G]),We(""),Qe(""),xt(""),ke("")},pa=()=>{!jt||parseFloat(jt)<=0||(Os(`Manual discount of ${jt}${mt==="percentage"?"%":"€"} applied successfully!`,"success"),wt(""))},Sn=()=>{Mt.trim()&&(Os(`Coupon code "${Mt}" applied successfully!`,"success"),de(""))},Qn=()=>{kt(null),Os("Coupon removed successfully!","success")},Cr=(G,Fe)=>{},$r=()=>parseFloat(D?.total||0),Hr=()=>parseFloat(D?.total||0),on=()=>0,kr=()=>0,ir=()=>{const G=$r(),Fe=Te.reduce((Lt,Jt)=>Lt+parseFloat(Jt.amount),0);return Math.max(0,G-Fe)},or=()=>st.find(G=>G.code===ft)?.symbol||"€",Cn=()=>{Ve("Cash"),We(""),Qe(""),xt(""),Ke([]),wt(""),qe(!1),ot("EUR"),ke(""),kt(null),de("")},la=()=>{ze(!1),Cn()},kn=(G,Fe)=>{Fe==="searchTerm"?m(G):Fe==="customerSearchTerm"&&x(G)},Vs=(G,Fe)=>{Fe==="searchTerm"?Et(G,"searchTerm",d):Fe==="customerSearchTerm"&&Et(G,"customerSearchTerm",h)},ca=(G,Fe)=>{Fe==="searchTerm"?Rt(G,"searchTerm",d):Fe==="customerSearchTerm"&&Rt(G,"customerSearchTerm",h)},Zn=G=>({new:"bg-purple-50 text-purple-700 border-purple-200",pending:"bg-orange-50 text-orange-700 border-orange-200",confirmed:"bg-blue-50 text-blue-700 border-blue-200",processing:"bg-yellow-50 text-yellow-700 border-yellow-200",ready:"bg-green-50 text-green-700 border-green-200",completed:"bg-gray-50 text-gray-700 border-gray-200",delivered:"bg-blue-50 text-blue-700 border-blue-200",canceled:"bg-red-50 text-red-700 border-red-200","In Prepare":"bg-yellow-50 text-yellow-700 border-yellow-200","In Progress":"bg-blue-50 text-blue-700 border-blue-200",Ready:"bg-green-50 text-green-700 border-green-200",Completed:"bg-gray-50 text-gray-700 border-gray-200",Delivered:"bg-blue-50 text-blue-700 border-blue-200"})[G]||"bg-gray-50 text-gray-700 border-gray-200",Jn=G=>({new:"New",pending:"Pending",confirmed:"Confirmed",processing:"Processing",ready:"Ready",completed:"Completed",delivered:"Delivered",canceled:"Canceled"})[G]||G,Rs=G=>{if(!G)return"";const Fe=String(G).toLowerCase().replace(/[_\s-]+/g,"");return Fe==="dinein"||Fe==="dine"?"dinein":Fe==="instore"||Fe==="instoreshop"||Fe==="inshop"?"instore":Fe==="collection"||Fe==="pickup"||Fe==="pickuporder"?"collection":Fe==="delivery"?"delivery":Fe==="online"||Fe==="web"||Fe==="app"?"online":Fe},ya=G=>{const Fe=Rs(G);return{dinein:"Dine In",delivery:"Delivery",collection:"Collection",online:"Online",instore:"In Store"}[Fe]||G},da=G=>G.customerData?{name:G.customerData.name||"N/A",phone:G.customerData.phone||"N/A",address:G.customerData.address||"N/A"}:{name:"Walk-in Customer",phone:"N/A",address:"N/A"},ln=G=>{const Fe=Rs(G.order_type);return Fe==="delivery"?G.driver||"N/A":Fe==="dinein"&&G.table_details||"N/A"},_a=G=>{if(!G)return!1;const Fe=G.toLowerCase().replace(/[_\s-]+/g,"");return["completed","ontheway","delivered"].includes(Fe)};return r.length,r.filter(G=>Rs(G.order_type)==="collection").length,r.filter(G=>Rs(G.order_type)==="delivery").length,r.filter(G=>Rs(G.order_type)==="online").length,r.filter(G=>Rs(G.order_type)==="dinein").length,r.filter(G=>Rs(G.order_type)==="instore").length,r.filter(G=>G.paymentStatus==="paid").length,r.filter(G=>G.paymentStatus==="unpaid").length,re?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading orders..."})]})}):J?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(St,{size:48,className:"mx-auto"})}),e.jsx("p",{className:"text-red-600 font-medium mb-2",children:"Error loading orders"}),e.jsx("p",{className:"text-gray-600 text-sm",children:J}),e.jsx("button",{onClick:()=>ms(),className:"mt-4 px-4 py-4 bg-primary text-white rounded-lg hover:bg-primaryDark transition-colors",children:"Retry"})]})}):e.jsxs("div",{className:"h-full flex flex-col px-4 py-4 bg-transparent",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"bg-[#CDCDCD] rounded-lg mb-6",children:[e.jsx("div",{className:"flex-shrink-0 p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-4 ",children:[e.jsxs("div",{className:"flex flex-col items-start gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"w-20 text-center rounded-md px-3 py-4 text-sm font-medium text-white bg-primary",htmlFor:"from-datetime",children:"From:"}),e.jsx("div",{className:"relative flex items-center gap-2",children:e.jsx("input",{id:"from-datetime",type:"datetime-local",className:"px-3 py-4 border bg-white text-black border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primaryLight focus:border-transparent",value:p,onChange:G=>w(G.target.value)})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"w-20 text-center rounded-md px-3 py-4 text-sm font-medium text-white bg-primary",htmlFor:"to-datetime",children:"To:"}),e.jsx("div",{className:"relative flex items-center gap-2",children:e.jsx("input",{id:"to-datetime",type:"datetime-local",className:"px-3 py-4 border bg-white text-black border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primaryLight focus:border-transparent",value:N,onChange:G=>_(G.target.value)})})]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:["In Store","Dine In","Collection","Delivery","Online"].map(G=>{const Fe=G.toLowerCase().replace(/\s+/g,"");return e.jsx("button",{className:`w-28 px-4 py-4 rounded-lg text-sm font-medium transition-colors border-2 ${s===Fe?"bg-white text-black border-primary cursor-pointer":"bg-primary text-white border-primary cursor-pointer"}`,onClick:()=>t(Fe),children:G},G)})}),e.jsxs("div",{className:"flex flex-col items-center gap-2 mb-4",children:[e.jsx("button",{className:`w-24 px-4 py-4 rounded-lg text-sm font-medium transition-colors ${he==="paid"?"bg-[#16A34A] text-white":"bg-[#16A34A] text-white hover:bg-[#16A34A] cursor-pointer"}`,onClick:()=>ie(he==="paid"?"all":"paid"),children:"Paid"}),e.jsx("button",{className:`w-24 px-4 py-4 rounded-lg text-sm font-medium transition-colors ${he==="unpaid"?"bg-[#0EA5E9] text-white":"bg-[#0EA5E9] text-white hover:bg-[#0EA5E9] cursor-pointer"}`,onClick:()=>ie(he==="unpaid"?"all":"unpaid"),children:"Unpaid"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"w-10 h-10 bg-white border border-gray-300 rounded-md flex items-center justify-center hover:bg-gray-50 transition-colors",onClick:ms,children:e.jsx($h,{size:18,className:"text-gray-600"})}),e.jsx("button",{className:"w-10 h-10 bg-white border cursor-pointer border-gray-300 rounded-md flex items-center justify-center hover:bg-gray-50 transition-colors",children:e.jsx(pu,{size:18,className:"text-gray-600"})})]})]})}),e.jsx("div",{className:"flex-shrink-0 p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{className:"px-3 py-4 border border-gray-300 rounded-lg text-sm bg-white w-38",value:Ee,onChange:G=>Ae(G.target.value),children:[e.jsx("option",{value:"all",children:"Status (All)"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"ready",children:"Ready"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"canceled",children:"Canceled"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",name:"searchTerm",placeholder:"Search by Order ID",value:d,onChange:G=>m(G.target.value),onFocus:G=>Vs(G,"searchTerm"),onClick:G=>ca(G,"searchTerm"),onBlur:ut,className:"px-3 py-4 border bg-white border-gray-300 rounded-lg text-sm focus:outline-none"}),e.jsx("input",{type:"text",name:"customerSearchTerm",placeholder:"Search by Customer name or Number",value:h,onChange:G=>x(G.target.value),onFocus:G=>Vs(G,"customerSearchTerm"),onClick:G=>ca(G,"customerSearchTerm"),onBlur:ut,className:"px-3 py-4 border bg-white border-gray-300 rounded-lg text-sm focus:outline-none"}),e.jsx("button",{className:"px-4 py-4 bg-orange-500 text-white rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors",children:"Search by Driver"}),e.jsx("button",{className:"px-4 py-4 bg-orange-500 text-white rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors",children:"Advanced Search"})]})]})})]}),e.jsx("div",{className:"flex-shrink-0 px-4 py-4 rounded-lg mb-5 border-b border-gray-200 bg-primary",children:e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx("button",{className:`w-full px-4 py-4 rounded-sm text-sm font-medium transition-colors font-semibold ${(()=>{if(!Se)return"bg-white text-primary cursor-pointer";const G=r.find(Fe=>Fe.id===Se);return!G||_a(G.status)?"bg-white text-primary cursor-pointer":"bg-white text-primary hover:bg-gray-100 cursor-pointer"})()}`,title:(()=>{if(!Se)return"No order selected";const G=r.find(Fe=>Fe.id===Se);return G?_a(G.status)?`Cannot load sales for order with status: ${G.status}`:"Load order into sales screen":"No order selected"})(),onClick:async()=>{if(!Se)return;const G=r.find(Fe=>Fe.id===Se);if(G){if(_a(G.status)){console.log(`Cannot load sales for order with status: ${G.status}`);return}try{const[Fe]=await Promise.all([window.myAPI.getOrderDetailsWithFood(G.id)]),Lt=Fe?.success?Fe.data:[],Jt={orderId:G.id,databaseId:G.id,orderType:ya(G.order_type),customer:G.customerData?{id:G.customer_id,name:G.customerData.name,phone:G.customerData.phone,address:G.customerData.address}:null,items:Lt.map(rs=>({id:rs.id,food:{id:rs.food_id,name:rs.food_name,description:rs.food_description},quantity:rs.quantity,totalPrice:Number(rs.price||0)*Number(rs.quantity||1),variations:rs.variation?(()=>{try{return JSON.parse(rs.variation)}catch{return{}}})():{},adons:rs.add_ons?(()=>{try{return JSON.parse(rs.add_ons)}catch{return[]}})():[]})),payment:{method:G.payment_method,status:G.paymentStatus,amount:G.total},table:G.table_details||null,waiter:G.waiter||null};Z("/dashboard/sales",{state:{loadOrder:Jt}})}catch(Fe){console.error("Failed to prepare order for sales:",Fe)}}},children:"Load Sales"}),e.jsx("button",{className:"w-full px-4 py-4 bg-white text-primary rounded-sm text-sm font-medium hover:bg-gray-100 transition-colors font-semibold cursor-pointer",onClick:()=>{if(!Se)return;const G=r.find(Fe=>Fe.id===Se);G&&vs(G)},children:"Move Order"}),["Pay"].map(G=>e.jsx("button",{className:`w-full px-4 py-4 rounded-sm text-sm font-medium transition-colors font-semibold ${Se?"bg-white text-primary hover:bg-gray-100 cursor-pointer":"bg-white text-primary cursor-not-allowed"}`,disabled:!Se,title:Se?"Process payment for selected order":"No order selected",onClick:()=>{if(!Se)return;const Fe=r.find(Lt=>Lt.id===Se);Fe&&qt(Fe)},children:G},G)),e.jsx("button",{className:"w-full px-4 py-4 bg-white text-primary rounded-sm text-sm font-medium hover:bg-gray-100 transition-colors font-semibold cursor-pointer",onClick:()=>{if(!Se)return;const G=r.find(Fe=>Fe.id===Se);G&&Ct(G)},children:"Assign Driver"}),e.jsx("button",{className:`w-full px-4 py-4 rounded-sm text-sm font-medium transition-colors font-semibold ${(()=>{if(!Se)return"bg-white text-primary cursor-pointer";const G=r.find(Fe=>Fe.id===Se);return!G||Rs(G.order_type)!=="delivery"?"bg-white text-primary cursor-pointer":"bg-white text-primary hover:bg-gray-100 cursor-pointer"})()}`,disabled:(()=>{if(!Se)return!0;const G=r.find(Fe=>Fe.id===Se);return!G||Rs(G.order_type)!=="delivery"||G.status==="delivered"||G.status==="Delivered"})(),title:(()=>{if(!Se)return"No order selected";const G=r.find(Fe=>Fe.id===Se);return G?Rs(G.order_type)!=="delivery"?"Mark Delivered is only available for delivery orders":G.status==="delivered"||G.status==="Delivered"?"Order is already marked as delivered":"Mark order as delivered":"No order selected"})(),onClick:()=>{if(!Se)return;const G=r.find(Fe=>Fe.id===Se);if(G){if(Rs(G.order_type)!=="delivery"){console.log("Mark Delivered is only available for delivery orders");return}Xa(G)}},children:"Mark Delivered"}),e.jsx("button",{className:`w-full px-4 py-4 rounded-sm text-sm font-medium transition-colors font-semibold ${(()=>{if(!Se)return"bg-white text-primary cursor-pointer";const G=r.find(Fe=>Fe.id===Se);return!G||G.status==="completed"||G.status==="Completed"||G.status==="delivered"||G.status==="Delivered"||G.status==="canceled"||G.status==="Canceled"?"bg-white text-primary cursor-pointer":"bg-white text-primary hover:bg-gray-100 cursor-pointer"})()}`,disabled:(()=>{if(!Se)return!0;const G=r.find(Fe=>Fe.id===Se);return G?G.status==="completed"||G.status==="Completed"||G.status==="delivered"||G.status==="Delivered"||G.status==="canceled"||G.status==="Canceled":!0})(),title:(()=>{if(!Se)return"No order selected";const G=r.find(Fe=>Fe.id===Se);return G?G.status==="completed"||G.status==="Completed"?"Order is already completed":G.status==="delivered"||G.status==="Delivered"?"Order is delivered and cannot be completed":G.status==="canceled"||G.status==="Canceled"?"Order is canceled and cannot be completed":"Mark order as completed":"No order selected"})(),onClick:()=>{!Se||!r.find(Fe=>Fe.id===Se)||Cl()},children:"Complete All"}),e.jsx("button",{className:`w-full px-4 py-4 rounded-sm text-sm font-medium transition-colors font-semibold ${!Se||!r.find(Fe=>Fe.id===Se)?"bg-white text-primary cursor-pointer":"bg-white text-primary hover:bg-gray-100 cursor-pointer"}`,disabled:!Se,title:Se?"Print invoice for selected order":"No order selected",onClick:()=>{if(!Se)return;const G=r.find(Fe=>Fe.id===Se);G&&qt(G)},children:"Print"})]})}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{className:"sticky top-0 bg-primaryExtraLight z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-primaryLight focus:ring-primaryLight"})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Type"})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Order ID"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Kitchen ID"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Date/Time"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Due At"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Driver/Table"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Customer"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Address"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Amount"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Payment"})}),e.jsx("th",{className:"text-left py-3 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsx("div",{className:"flex items-center gap-1",children:"Status"})})]})}),e.jsx("tbody",{children:o.map((G,Fe)=>{const Lt=da(G),Jt=ln(G);return e.jsxs("tr",{className:`border-b border-gray-100 transition-colors ${Fe%2===0?"bg-white hover:bg-blue-50":"bg-gray-50 hover:bg-blue-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 focus:ring-primaryLight text-primaryLight cursor-pointer",checked:Se===G.id,disabled:_a(G.status),title:_a(G.status)?`Cannot select order with status: ${G.status}`:"Select order for sales operations",onChange:rs=>{_a(G.status)||He(rs.target.checked?G.id:null)}})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:ya(G.order_type)})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("button",{className:"text-sm font-medium text-primary underline hover:text-primaryDark",onClick:()=>as(G),children:["ORD-",G.id]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:G.id})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm text-gray-800",children:G.orderDate}),e.jsx("div",{className:"text-xs text-gray-600",children:G.orderTime})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm text-gray-800",children:G.dueDate}),e.jsx("div",{className:"text-xs text-gray-600",children:G.dueTime})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:Jt})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-800",children:Lt.name}),e.jsxs("div",{className:"text-xs text-gray-600",children:["(",Lt.phone,")"]})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:Lt.address})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:["€",G.total.toFixed(2)]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${G.paymentStatus==="paid"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:G.paymentStatus})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex flex-col gap-1",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Zn(G.status)}`,children:Jn(G.status)})})})]},G.id)})})]}),o.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-300 mb-3",children:e.jsx(pu,{size:40,className:"mx-auto"})}),e.jsx("p",{className:"text-gray-600 font-medium text-sm",children:"No orders found"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Orders matching your filter criteria will appear here."})]})]})]}),I&&D&&e.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[e.jsx("div",{className:"absolute inset-0 bg-[#0000000d] bg-opacity-50 transition-opacity",onClick:ys}),e.jsxs("div",{className:`relative w-96 h-full bg-white shadow-2xl transform transition-transform duration-300 ease-in-out flex flex-col ${oe?"translate-x-0":"translate-x-full"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Order Details"}),e.jsx("button",{onClick:ys,className:"text-primaryLight hover:text-primary transition-colors p-2 rounded-full hover:bg-gray-100",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-semibold text-primary",children:["ORD-",D.id]}),e.jsx("span",{className:"text-sm text-gray-600",children:"•"}),e.jsx("span",{className:"text-sm text-gray-600",children:ya(D.order_type)})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[D.orderDate,", ",D.orderTime]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Items"}),F?e.jsx("div",{className:"text-sm text-gray-500",children:"Loading items..."}):e.jsxs("div",{className:"space-y-2",children:[B.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"No items found for this order."}),B.map(G=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-700",children:G.food_name||"Item"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Qty: ",G.quantity]})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:["€",(Number(G.price||0)*Number(G.quantity||1)).toFixed(2)]})]},G.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Payment"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Method:"}),e.jsx("span",{className:"text-gray-800",children:D.payment_method||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-gray-800",children:["€",(q?.grand_total??D.total).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${D.paymentStatus==="paid"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:D.paymentStatus})]}),q&&e.jsxs("div",{className:"space-y-1 pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsxs("span",{className:"text-gray-800",children:["€",Number(q.subtotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Add-ons:"}),e.jsxs("span",{className:"text-gray-800",children:["€",Number(q.total_addons||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Taxes:"}),e.jsxs("span",{className:"text-gray-800",children:["€",Number(q.total_taxes||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Discounts:"}),e.jsxs("span",{className:"text-gray-800",children:["-€",Number(q.total_discounts||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{className:"text-gray-800",children:"Grand Total:"}),e.jsxs("span",{className:"text-gray-800",children:["€",Number(q.grand_total||0).toFixed(2)]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Customer"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("div",{className:"text-gray-800 font-medium",children:da(D).name}),e.jsx("div",{className:"text-gray-600",children:da(D).phone}),e.jsx("div",{className:"text-gray-400",children:da(D).address})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Current Status"}),e.jsx("span",{className:`px-3 py-2 rounded-full text-sm font-medium ${Zn(D.status)}`,children:Jn(D.status)})]})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"w-full px-4 py-4 border border-primaryLight text-primaryLight rounded-lg hover:bg-primaryLight hover:text-white transition-colors font-medium",onClick:()=>{ys(),vs(D)},children:"Update Status"}),e.jsx("button",{className:"w-full px-4 py-4 border border-primaryLight text-primaryLight rounded-lg hover:bg-primaryLight hover:text-white transition-colors font-medium",onClick:()=>{ys(),qt(D)},children:"Print Invoice"}),e.jsx("button",{className:`w-full px-4 py-4 border rounded-lg transition-colors font-medium ${Rs(D.order_type)==="delivery"?"border-primaryLight text-primaryLight hover:bg-primaryLight hover:text-white":"border-gray-300 text-gray-400 cursor-not-allowed"}`,disabled:Rs(D.order_type)!=="delivery",onClick:()=>{Rs(D.order_type)==="delivery"&&(ys(),Ct(D))},children:"Assign Driver"})]})})]})]}),Y&&ye&&e.jsx(Iv,{isOpen:Y,onClose:Nt,order:ye,onStatusUpdate:js,onRiderAssignment:()=>{Nt(),k(ye),g(!0)},selectedStatus:Ne,onStatusChange:aa,isUpdating:A}),f&&S&&e.jsx(Tg,{isOpen:f,onClose:zt,onBack:zt,order:S,onAssignRider:Ci,onStatusUpdate:js}),U&&V&&e.jsx(wh,{order:V,isOpen:U,onClose:Kt,onPrint:()=>{try{setTimeout(()=>{window.print()},100)}catch(G){console.error("Print failed:",G),Os("Print failed. Please try again.","error")}},foodDetails:B}),e.jsx(q5,{isOpen:C,onClose:Uc,onConfirm:()=>{X.onConfirm&&(ue(!0),X.onConfirm().finally(()=>{ue(!1)})),Uc()},title:X.title,message:X.message,type:X.type,confirmText:"Confirm",cancelText:"Cancel",isLoading:Q}),e.jsx(Ni,{message:ce.message,isVisible:ne,onClose:()=>fe(!1),type:ce.type,duration:4e3}),Re&&D&&e.jsx(Qx,{isOpen:Re,onClose:la,selectedPaymentMethod:rt,setSelectedPaymentMethod:Ve,paymentAmount:Je,setPaymentAmount:We,givenAmount:it,setGivenAmount:Qe,changeAmount:At,setChangeAmount:xt,currencyAmount:pt,setCurrencyAmount:ke,selectedCurrency:ft,setSelectedCurrency:ot,currencyOptions:st,addedPayments:Te,setAddedPayments:Ke,isSinglePayMode:!1,selectedSplitBill:null,selectedPlacedOrder:D,cartItems:[],foodDetails:null,appliedCoupon:gt,removeAppliedCoupon:Qn,couponCode:Mt,setCouponCode:de,availableCoupons:De,couponsLoading:ve,discountType:mt,setDiscountType:dt,discountAmount:jt,setDiscountAmount:wt,sendSMS:Pe,setSendSMS:qe,handleCashGivenAmountChange:ki,handleCashAmountChange:Eo,handleNumericInputFocus:zs,handleNumericKeyboardChange:Nn,handleNumericKeyboardKeyPress:kl,handleAddPayment:Xn,handleApplyManualDiscount:pa,handleApplyCoupon:Sn,handleAnyInputFocus:Et,handleAnyInputClick:Rt,handleCustomInputBlur:Cr,calculateSinglePayTotals:()=>({total:$r(),subtotal:Hr(),tax:on(),discount:kr()}),calculateSplitBillTotal:$r,calculateCartTotal:$r,calculateSplitBillSubtotal:Hr,calculateSplitBillTax:on,calculateSplitBillDiscount:kr,calculateSplitBillCharge:()=>0,calculateSplitBillTips:()=>0,calculateCartSubtotal:Hr,calculateCartTax:on,calculateCartDiscount:kr,calculateDueAmount:ir,getCurrencySymbol:or,numericActiveInput:Tt,numericKeyboardInput:Ie,setNumericActiveInput:me,setNumericKeyboardInput:te,setShowCartDetailsModal:()=>{},splitBillToRemove:null,setSplitBills:()=>{},setSplitBillToRemove:()=>{},placedOrders:[],selectedCustomer:D?.customerData||null,selectedOrderType:ya(D?.order_type),selectedTable:D?.table_details||null,handlePlaceOrder:async()=>{try{if(Te.length===0||ir()>0)return Os("Please complete the payment before submitting","warning"),null;const G={payment_status:"paid",payment_method:rt},Fe=await window.myAPI.updateOrder(D.id,G);return Fe.success?(n(Lt=>Lt.map(Jt=>Jt.id===D.id?{...Jt,paymentStatus:"paid"}:Jt)),He(null),Os(`Payment processed successfully for Order #${D.id}!`,"success"),la(),D.id):(Os(`Failed to process payment: ${Fe.message}`,"error"),null)}catch(G){return console.error("Error processing payment:",G),Os("An error occurred while processing the payment","error"),null}},showError:Os,setIsInvoiceAfterPayment:()=>{},setShowInvoiceModal:()=>{},clearCart:()=>{},resetFinalizeSaleModal:Cn,setIsSinglePayMode:()=>{},setSelectedPlacedOrder:()=>{},setCurrentOrderForInvoice:()=>{}}),e.jsx(Wa,{isVisible:Be,onClose:Ht,activeInput:Xe,onInputChange:kn,onInputBlur:ut,inputValue:nt})]})},Y5=({order:s,onUpdateItemStatus:t,onUpdateOrderStatus:r,onCompleteOrder:n,onCookAll:o,onMarkAllReady:c,formatElapsedTime:d})=>{const m=N=>{switch(N){case"new":return"bg-gray-100 text-gray-700 border-gray-300";case"preparing":return"bg-orange-100 text-orange-700 border-orange-300";case"ready":return"bg-green-100 text-green-700 border-green-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},h=N=>N>1200?"text-red-600":N>900?"text-orange-600":N>600?"text-yellow-600":"text-green-600",x=s.items.every(N=>N.status==="ready"),p=s.items.some(N=>N.status==="preparing"),w=s.items.every(N=>N.status==="new");return e.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"border-b border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("span",{className:"text-lg font-bold text-primary",children:["#",s.id]})}),e.jsxs("div",{className:`text-sm font-bold ${h(s.elapsedTime)}`,children:[e.jsx($s,{size:16,className:"inline mr-1"}),d(s.elapsedTime)]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(gh,{size:14}),e.jsxs("span",{children:["Table ",s.tableNumber]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.orderType==="Dine-In"||s.orderType==="Takeaway","bg-primaryExtraLight text-primary"}`,children:s.orderType})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-600",children:[e.jsx(Lc,{size:14}),e.jsx("span",{children:s.customer})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"space-y-3",children:s.items.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-medium text-gray-800",children:N.name})}),N.notes&&e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-orange-600",children:[e.jsx(yu,{size:12}),e.jsx("span",{children:N.notes})]}),N.isAddedLate&&e.jsxs("span",{className:"bg-yellow-100 mt-2 text-yellow-800 w-[90px] py-1 rounded-full text-xs font-medium flex items-center justify-center gap-1",children:[e.jsx(Ls,{size:10}),"Added Late"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium border ${m(N.status)}`,children:N.status.charAt(0).toUpperCase()+N.status.slice(1)}),e.jsxs("div",{className:"flex gap-1",children:[N.status==="new"&&e.jsx("button",{onClick:()=>t(s.id,N.id,"preparing"),className:"px-2 py-1 bg-orange-500 text-white rounded text-xs hover:bg-orange-600 transition-colors",children:"Cook"}),N.status==="preparing"&&e.jsx("button",{onClick:()=>t(s.id,N.id,"ready"),className:"px-2 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600 transition-colors",children:"Ready"}),N.status==="ready"&&e.jsx(xa,{size:16,className:"text-green-600"})]})]})]},N.id))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex gap-2",children:[w&&e.jsx("button",{onClick:()=>o(s.id),className:"flex-1 bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition-colors text-sm font-medium",children:"Cook All"}),p&&!x&&e.jsx("button",{onClick:()=>c(s.id),className:"flex-1 bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition-colors text-sm font-medium",children:"Mark All Ready"}),x&&e.jsxs("button",{onClick:()=>n(s.id),className:"flex-1 bg-primaryLight text-white py-2 px-4 rounded-lg hover:bg-primary transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(xa,{size:16}),"Done"]})]})})]})]})},G5=()=>{const{kdsCurrentView:s="cards",kdsShowNotifications:t=!1,kdsShowRecall:r=!1,kdsNotificationCount:n=0,setKdsCurrentView:o,setKdsShowNotifications:c,setKdsShowRecall:d,setKdsNotificationCount:m}=gS()||{},[h,x]=v.useState("new"),[p,w]=v.useState([]),[N,_]=v.useState([]),[D,L]=v.useState([]);v.useEffect(()=>{const re=[{id:"KDS001",tableNumber:5,orderType:"Dine-In",elapsedTime:540,placedAt:new Date(Date.now()-54e4),items:[{id:1,name:"Chicken Biryani",status:"new",notes:"Less spicy",isAddedLate:!1},{id:2,name:"Garlic Naan",status:"new",notes:"",isAddedLate:!1},{id:3,name:"Raita",status:"new",notes:"",isAddedLate:!1}],status:"new",customer:"John Doe",phone:"0894632626"},{id:"KDS002",tableNumber:12,orderType:"Dine-In",elapsedTime:1140,placedAt:new Date(Date.now()-114e4),items:[{id:1,name:"Mutton Curry",status:"preparing",notes:"",isAddedLate:!1},{id:2,name:"Steamed Rice",status:"preparing",notes:"",isAddedLate:!1},{id:3,name:"Papad",status:"preparing",notes:"",isAddedLate:!1}],status:"preparing",customer:"Jessica Irving",phone:"0962626267"},{id:"KDS004",tableNumber:8,orderType:"Dine-In",elapsedTime:1440,placedAt:new Date(Date.now()-144e4),items:[{id:1,name:"Fish Curry",status:"ready",notes:"",isAddedLate:!1},{id:2,name:"Rice",status:"ready",notes:"",isAddedLate:!1},{id:3,name:"Pickle",status:"ready",notes:"",isAddedLate:!1}],status:"ready",customer:"Sarah Johnson",phone:"0851234567"},{id:"KDS005",tableNumber:3,orderType:"Dine-In",elapsedTime:360,placedAt:new Date(Date.now()-36e4),items:[{id:1,name:"Chicken Tikka",status:"new",notes:"",isAddedLate:!1},{id:2,name:"Mixed Vegetables",status:"new",notes:"",isAddedLate:!0}],status:"new",customer:"Anna Davis",phone:"082367237"},{id:"KDS003",tableNumber:15,orderType:"Takeaway",elapsedTime:840,placedAt:new Date(Date.now()-84e4),items:[{id:1,name:"Paneer Tikka",status:"preparing",notes:"Extra mint chutney",isAddedLate:!1},{id:2,name:"Butter Naan",status:"preparing",notes:"",isAddedLate:!1}],status:"preparing",customer:"Michael Brown",phone:"23236368238"},{id:"KDS006",tableNumber:7,orderType:"Dine-In",elapsedTime:720,placedAt:new Date(Date.now()-72e4),items:[{id:1,name:"Lamb Korma",status:"ready",notes:"Mild spice",isAddedLate:!1},{id:2,name:"Basmati Rice",status:"ready",notes:"",isAddedLate:!1}],status:"ready",customer:"David Wilson",phone:"0851237890"}];w(re);const le=[{id:1,type:"order_placed",message:"New order #KDS001 received for Table 5",time:new Date(Date.now()-54e4),read:!1},{id:2,type:"order_ready",message:"Order #KDS004 is ready for service",time:new Date(Date.now()-3e5),read:!1},{id:3,type:"order_updated",message:"Order #KDS005 updated with additional items",time:new Date(Date.now()-12e4),read:!0},{id:4,type:"order_delayed",message:"Order #KDS002 is taking longer than expected",time:new Date(Date.now()-6e4),read:!1}];_(le),m&&m(le.filter(J=>!J.read).length)},[m]),v.useEffect(()=>{m&&m(N.filter(re=>!re.read).length)},[N,m]),v.useEffect(()=>{const re=setInterval(()=>{w(le=>le.map(J=>({...J,elapsedTime:Math.floor((Date.now()-J.placedAt.getTime())/1e3)})))},1e3);return()=>clearInterval(re)},[]);const B=re=>{const le=Math.floor(re/60),J=re%60;return`${le}m ${J}s`},z=re=>p.filter(le=>le.status===re),q=(re,le,J)=>{w(Ce=>Ce.map(Se=>{if(Se.id===re){const He=Se.items.map(ye=>ye.id===le?{...ye,status:J}:ye),be=He.every(ye=>ye.status==="ready")?"ready":He.some(ye=>ye.status==="preparing")?"preparing":"new";return{...Se,items:He,status:be}}return Se}))},R=(re,le)=>{w(J=>J.map(Ce=>Ce.id===re?{...Ce,status:le}:Ce))},F=re=>{const le=p.find(J=>J.id===re);if(le){L(Ce=>[...Ce,{...le,completedAt:new Date}]),w(Ce=>Ce.filter(Se=>Se.id!==re));const J={id:Date.now(),type:"order_completed",message:`Order #${re} completed and ready for service`,time:new Date,read:!1};_(Ce=>[J,...Ce])}},T=re=>{w(le=>le.map(J=>{if(J.id===re){const Ce=J.items.map(Se=>({...Se,status:"preparing"}));return{...J,items:Ce,status:"preparing"}}return J}))},I=re=>{w(le=>le.map(J=>{if(J.id===re){const Ce=J.items.map(Se=>({...Se,status:"ready"}));return{...J,items:Ce,status:"ready"}}return J}))},se=()=>{const re={};return[...p,...D].forEach(le=>{le.items.forEach(J=>{re[J.name]=(re[J.name]||0)+1})}),re},oe=z("new"),_e=z("preparing"),he=z("ready"),ie=()=>{switch(h){case"new":return oe;case"preparing":return _e;case"ready":return he;default:return[]}},Ee=[{id:"preparing",label:"In Preparation",count:_e.length,icon:e.jsx(R1,{size:16}),color:"bg-orange-50 border-orange-200 text-orange-800",activeColor:"bg-orange-500 text-white",borderColor:"border-orange-500"},{id:"new",label:"New Orders",count:oe.length,icon:e.jsx(Bh,{size:16}),color:"bg-primaryExtraLight border-primaryLight text-primary",activeColor:"bg-primaryLight text-white",borderColor:"border-primary"},{id:"ready",label:"Ready for Service",count:he.length,icon:e.jsx(xa,{size:16}),color:"bg-green-50 border-green-200 text-green-800",activeColor:"bg-green-500 text-white",borderColor:"border-green-500"}],Ae=Ee.find(re=>re.id===h);return e.jsx("div",{children:e.jsxs("div",{className:"px-4 py-2",children:[t&&c&&e.jsx(W5,{notifications:N,onClose:()=>c(!1),onMarkAsRead:re=>{_(le=>le.map(J=>J.id===re?{...J,read:!0}:J))}}),s==="allday"&&e.jsx(X5,{data:se()}),s==="cards"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:Ee.map(re=>e.jsxs("button",{onClick:()=>x(re.id),className:`flex items-center gap-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${h===re.id?`${re.borderColor} text-${re.id==="new"?"primary":re.id==="preparing"?"orange-600":"green-600"}`:"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[re.icon,re.label,e.jsx("span",{className:`ml-2 py-1 px-2 rounded-full text-xs font-medium ${h===re.id?re.activeColor:re.color}`,children:re.count})]},re.id))})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:[ie().map(re=>e.jsx(Y5,{order:re,onUpdateItemStatus:q,onUpdateOrderStatus:R,onCompleteOrder:F,onCookAll:T,onMarkAllReady:I,formatElapsedTime:B},re.id)),ie().length===0&&e.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[Ae?.icon&&e.jsx("div",{className:"mb-4 opacity-50",children:Sr.cloneElement(Ae.icon,{size:48})}),e.jsxs("p",{className:"text-lg font-medium",children:["No ",Ae?.label.toLowerCase()]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[h==="new"&&"New orders will appear here",h==="preparing"&&"Orders being prepared will appear here",h==="ready"&&"Orders ready for service will appear here"]})]})})]})})]}),r&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Recalled Orders (Last 10 minutes)"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 text-xl font-bold w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100",children:"✕"})]}),e.jsxs("div",{className:"space-y-3",children:[D.map(re=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-semibold text-primary",children:["#",re.id]}),e.jsxs("span",{className:"text-gray-600",children:["Table ",re.tableNumber]}),e.jsx("span",{className:"text-sm text-gray-500",children:re.customer})]}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:re.items.map((le,J)=>e.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",children:le.name},J))}),e.jsxs("span",{className:"text-xs text-gray-500 block mt-2",children:["Completed: ",re.completedAt?.toLocaleTimeString()]})]}),e.jsx("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded text-xs font-medium",children:"COMPLETED"})]})},re.id)),D.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx($h,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No recalled orders"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Completed orders from the last 10 minutes will appear here"})]})]})]})})]})})},W5=({notifications:s,onClose:t,onMarkAsRead:r})=>{const n=o=>{switch(o){case"order_placed":return e.jsx(Ls,{className:"w-4 h-4 text-blue-500"});case"order_ready":return e.jsx(xa,{className:"w-4 h-4 text-green-500"});case"order_updated":return e.jsx($s,{className:"w-4 h-4 text-orange-500"});case"order_delayed":return e.jsx(yu,{className:"w-4 h-4 text-red-500"});case"order_completed":return e.jsx(xa,{className:"w-4 h-4 text-green-600"});default:return e.jsx(uu,{className:"w-4 h-4 text-gray-500"})}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(uu,{className:"w-5 h-5"}),"Notifications"]}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-xl font-bold w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100",children:"✕"})]}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[s.map(o=>e.jsx("div",{className:`border rounded-lg p-4 transition-colors ${o.read?"bg-gray-50 border-gray-200":"bg-blue-50 border-blue-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n(o.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:o.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.time.toLocaleTimeString()})]}),!o.read&&e.jsx("button",{onClick:()=>r(o.id),className:"text-xs text-blue-600 hover:text-blue-800 font-medium whitespace-nowrap",children:"Mark as read"})]})},o.id)),s.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(uu,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No notifications"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"New notifications will appear here"})]})]})]})})},X5=({data:s})=>{const t=Object.values(s).reduce((n,o)=>n+o,0),r=Object.entries(s).sort(([,n],[,o])=>o-n);return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Pc,{className:"w-5 h-5"}),"All Day Summary"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Total items: ",e.jsx("span",{className:"font-semibold text-primary",children:t})]})]}),r.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(([n,o])=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-medium text-gray-700 truncate block",children:n}),e.jsx("span",{className:"text-xs text-gray-500",children:"Total orders"})]}),e.jsx("span",{className:"bg-primary text-white px-3 py-1 rounded-full text-sm font-bold ml-2",children:o})]})},n))}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(ji,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No items to display"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Item summary will appear here as orders are placed"})]})]})},Pb=({imagePath:s,alt:t,className:r="w-10 h-10 object-cover rounded"})=>{const[n,o]=v.useState(null),[c,d]=v.useState(!0),[m,h]=v.useState(!1);return v.useEffect(()=>{(async()=>{try{if(d(!0),h(!1),s&&s.startsWith("uploads/")){const p=await window.myAPI?.getCategoryImage(s);p&&p.success?o(p.data):h(!0)}else h(!0)}catch(p){console.error("Error loading category image:",p),h(!0)}finally{d(!1)}})()},[s]),c?e.jsx("div",{className:`${r} bg-gray-200 animate-pulse`}):m||!n?e.jsx("div",{className:`${r} bg-gray-200`}):e.jsx("img",{src:n,alt:t,className:r})},Q5=()=>{const[s,t]=v.useState([]),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState({name:"",position:"",image:null,originalFilename:null}),[h,x]=v.useState(""),[p,w]=v.useState(!1),[N,_]=v.useState(null),{showKeyboard:D,activeInput:L,handleAnyInputFocus:B,handleAnyInputClick:z,handleInputBlur:q,hideKeyboard:R}=Wn(["category_name","category_position"]),F=re=>re==="category_name"?d.name||"":re==="category_position"&&d.position?.toString()||"",T=async()=>{try{const le=await window.myAPI?.getCategoriesByHotel(1);le&&le.success?t(le.data):(console.error("Failed to fetch categories:",le?.message),t([]))}catch(re){console.error("Error fetching categories:",re),t([])}};v.useEffect(()=>{T()});const I=re=>{c(re),m({name:re.name,position:re.position,image:re.image||null,originalFilename:null}),x(""),n(!0)},se=()=>{c(null),m({name:"",position:"",image:null,originalFilename:null}),x(""),n(!0)},oe=re=>{const{name:le,value:J}=re.target;if(m(Ce=>({...Ce,[le]:J})),le==="name"){const Ce=J.trim().toLowerCase(),Se=s.find(He=>He.name.toLowerCase()===Ce&&(!o||He.id!==o.id));x(Se?"⚠ Category with this name already exists":"")}},_e=re=>{const le=re.target.files[0];le&&m(J=>({...J,image:le,originalFilename:le.name}))},he=async re=>{re.preventDefault();const le=d.name.trim().toLowerCase();if(s.find(Se=>Se.name.toLowerCase()===le&&(!o||Se.id!==o.id))){x("⚠ Category with this name already exists");return}const Ce=1;try{let Se=null;if(d.image&&d.image instanceof File&&(Se=await new Promise((He,Y)=>{const be=new FileReader;be.onload=()=>He(be.result),be.onerror=Y,be.readAsDataURL(d.image)})),o){const He={name:d.name,position:parseInt(d.position)};d.image instanceof File&&(He.image=Se);const Y=await window.myAPI?.updateCategory(o.id,He,d.originalFilename);if(!Y.success){console.error("Failed to update category:",Y.message);return}}else{const He=await window.myAPI?.createCategory({name:d.name,position:parseInt(d.position),hotel_id:Ce,image:Se,originalFilename:d.originalFilename,status:1});if(!He.success){console.error("Failed to create category:",He.message);return}}T(),n(!1),x("")}catch(Se){console.error("Error saving category:",Se)}},ie=async re=>{try{const le=s.find(Ce=>Ce.id===re);if(!le)return;const J=le.status?0:1;await window.myAPI?.updateCategory(re,{status:J}),T()}catch(le){console.error("Error toggling status:",le)}},Ee=re=>{_(re),w(!0)},Ae=async re=>{try{await window.myAPI?.updateCategory(re,{isdelete:1}),T(),n(!1),w(!1),_(null)}catch(le){console.error("Error deleting category:",le)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"overflow-x-auto bg-white py-5 px-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Category List"}),e.jsxs("button",{onClick:se,className:"px-4 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add New Category"]})]}),e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Image"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:s.map((re,le)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-25 transition-colors ${le%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:le+1})}),e.jsx("td",{className:"py-3 px-4",children:re.image?e.jsx(Pb,{imagePath:re.image,alt:re.name}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:re.name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:re.position})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:"-"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!re.status,onChange:()=>ie(re.id),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${re.status?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${re.status?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I(re),className:"text-primary hover:text-primaryDark cursor-pointer transition-colors",children:e.jsx(ia,{size:16})}),e.jsx("button",{onClick:()=>Ee(re),className:"text-red-500 hover:text-red-700 cursor-pointer transition-colors",children:e.jsx(za,{size:16})})]})})]},re.id))})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-[#0000008e] bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:o?"Edit Category":"Add New Category"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(St,{size:24})})]}),e.jsxs("form",{onSubmit:he,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name*"}),e.jsx("input",{type:"text",name:"name",value:d.name,onChange:oe,onFocus:re=>{B(re,"category_name",d.name||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(d.name||"")},onClick:re=>{z(re,"category_name",d.name||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(d.name||"")},onBlur:q,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight ${h?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-primaryLight"}`,placeholder:"e.g., Burgers",required:!0}),h&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),e.jsx("input",{type:"number",name:"position",value:d.position,onChange:oe,onFocus:re=>{B(re,"category_position",(d.position||"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((d.position||"").toString())},onClick:re=>{z(re,"category_position",(d.position||"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((d.position||"").toString())},onBlur:q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",placeholder:"e.g., 1",min:"1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Image"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsxs("label",{className:"cursor-pointer bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-md border border-gray-300 text-sm font-medium text-gray-700",children:["Choose File",e.jsx("input",{type:"file",onChange:_e,className:"sr-only",accept:"image/*"})]}),d.image?d.image instanceof File?e.jsx("img",{src:URL.createObjectURL(d.image),alt:"Selected",className:"w-16 h-16 object-cover rounded mt-2"}):typeof d.image=="string"&&d.image.startsWith("uploads/")?e.jsx(Pb,{imagePath:d.image,alt:"Selected",className:"w-16 h-16 object-cover rounded mt-2"}):typeof d.image=="string"?e.jsx("img",{src:`data:image/png;base64,${d.image}`,alt:"Selected",className:"w-16 h-16 object-cover rounded mt-2"}):null:null]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Recommended: 200x200px, PNG, JPG up to 2MB"})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primaryLight hover:bg-primaryDark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:o?"Update Category":"Add Category"})]})]})]})})}),p&&N&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Category"}),e.jsx("button",{onClick:()=>{w(!1),_(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 mb-4",children:"Do you want to delete this category?"})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{w(!1),_(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>Ae(N.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]}),e.jsx(Wa,{isVisible:D,onClose:()=>R(),activeInput:L,onInputChange:(re,le)=>{if(le==="category_name"){m(Se=>({...Se,name:re}));const J=(re||"").trim().toLowerCase(),Ce=s.find(Se=>Se.name.toLowerCase()===J&&(!o||Se.id!==o.id));x(Ce?"⚠ Category with this name already exists":"")}else le==="category_position"&&m(J=>({...J,position:re}))},onInputBlur:q,inputValue:F(L)})]})},Z5=()=>{const[s,t]=v.useState([]),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState({category_id:"",name:"",position:""}),[h,x]=v.useState([]),[p,w]=v.useState(!1),[N,_]=v.useState(null),{showKeyboard:D,activeInput:L,handleAnyInputFocus:B,handleAnyInputClick:z,handleInputBlur:q,hideKeyboard:R}=Wn(["subcat_name","subcat_position"]),F=re=>re==="subcat_name"?d.name||"":re==="subcat_position"?(d.position??"").toString():"",T=async()=>{try{const re=await window.myAPI?.getCategoriesByHotel(1);re&&re.success?x(re.data):(console.error("Failed to fetch main categories:",re?.message),x([]))}catch(re){console.error("Error fetching main categories:",re),x([])}},I=async()=>{try{const re=await window.myAPI?.getSubcategoriesByHotel(1);re&&re.success?t(re.data):(console.error("Failed to fetch sub categories:",re?.message),t([]))}catch(re){console.error("Error fetching sub categories:",re),t([])}};v.useEffect(()=>{T(),I()},[]);const se=()=>{c(null),m({category_id:"",name:"",position:""}),n(!0)},oe=re=>{c(re),m({category_id:re.category_id,name:re.name,position:re.position}),n(!0)},_e=re=>{const{name:le,value:J}=re.target;m(Ce=>({...Ce,[le]:J}))},he=async re=>{if(re.preventDefault(),o)try{await window.myAPI?.updateSubcategory(o.id,{category_id:d.category_id,name:d.name,position:parseInt(d.position)}),I()}catch(le){console.log(le,"error updating sub category")}else try{await window.myAPI?.createSubcategory({category_id:d.category_id,name:d.name,position:parseInt(d.position),status:1}),I()}catch(le){console.log(le,"error creating sub category")}n(!1)},ie=re=>{_(re),w(!0)},Ee=async re=>{try{await window.myAPI?.updateSubcategory(re,{isDelete:1}),I(),n(!1),w(!1),_(null)}catch(le){console.error("Error deleting sub category:",le)}},Ae=async re=>{try{const le=s.find(Ce=>Ce.id===re);if(!le)return;const J=le.status?0:1;await window.myAPI?.updateSubcategory(re,{status:J}),I()}catch(le){console.error("Error toggling status:",le)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"overflow-x-auto bg-white py-5 px-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Sub Category List"}),e.jsxs("button",{onClick:se,className:"px-4 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add New Sub Category"]})]}),s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 font-medium text-sm",children:"No sub categories found"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Create your first sub category to get started"})]}):e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Main Category"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:s.map((re,le)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-25 transition-colors ${le%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:le+1})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:re.category_name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:re.name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:re.position})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!re.status,onChange:()=>Ae(re.id),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${re.status?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${re.status?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>oe(re),className:"text-primary hover:text-primaryDark cursor-pointer transition-colors",children:e.jsx(ia,{size:16})}),e.jsx("button",{onClick:()=>ie(re),className:"text-red-500 hover:text-red-700 cursor-pointer transition-colors",children:e.jsx(za,{size:16})})]})})]},re.id))})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-[#0000008e] bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:o?"Edit Sub Category":"Add New Sub Category"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(St,{size:24})})]}),e.jsxs("form",{onSubmit:he,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Main Category*"}),e.jsxs("select",{name:"category_id",value:d.category_id,onChange:_e,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),h.filter(re=>re.status===1).map(re=>e.jsx("option",{value:re.id,children:re.name},re.id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub Category Name*"}),e.jsx("input",{type:"text",name:"name",value:d.name,onChange:_e,onFocus:re=>{B(re,"subcat_name",d.name||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(d.name||"")},onClick:re=>{z(re,"subcat_name",d.name||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(d.name||"")},onBlur:q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",placeholder:"e.g., Chicken Burgers",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),e.jsx("input",{type:"number",name:"position",value:d.position,onChange:_e,onFocus:re=>{B(re,"subcat_position",(d.position??"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((d.position??"").toString())},onClick:re=>{z(re,"subcat_position",(d.position??"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((d.position??"").toString())},onBlur:q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",placeholder:"e.g., 1",min:"1"})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primaryLight hover:bg-primaryDark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:o?"Update Sub Category":"Add Sub Category"})]})]})]})})}),p&&N&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Sub Category"}),e.jsx("button",{onClick:()=>{w(!1),_(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 mb-4",children:"Do you want to delete this sub category?"})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{w(!1),_(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>Ee(N.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]}),e.jsx(Wa,{isVisible:D,onClose:()=>R(),activeInput:L,onInputChange:(re,le)=>{le==="subcat_name"?m(J=>({...J,name:re})):le==="subcat_position"&&m(J=>({...J,position:re}))},onInputBlur:q,inputValue:F(L)})]})},J5=()=>{const[s,t]=v.useState([]),[r,n]=v.useState({name:"",price:"",restaurant_id:1,stock_type:"",addon_stock:""});v.useEffect(()=>{o()},[s]);const o=async()=>{try{if(!window.myAPI){console.error("window.myAPI is not available");return}const Ee=await window.myAPI?.getAdonsByHotel?.(1);Ee&&Ee.success?t(Ee.data||[]):(console.error("Failed to load adons:",Ee?.message),t([]))}catch(ie){console.error("Error fetching addons:",ie)}},[c,d]=v.useState(!1),[m,h]=v.useState(null),[x,p]=v.useState(!1),[w,N]=v.useState(null),{showKeyboard:_,activeInput:D,handleAnyInputFocus:L,handleAnyInputClick:B,handleInputBlur:z,hideKeyboard:q}=Wn(["addon_name","addon_price","addon_stock"]),R=ie=>ie==="addon_name"?r.name||"":ie==="addon_price"?(r.price??"").toString():ie==="addon_stock"?(r.addon_stock??"").toString():"",F=ie=>{h(ie),n({name:ie.name,price:ie.price,restaurant_id:1,stock_type:ie.stock_type,addon_stock:ie.stock_type==="Limited"?ie.addon_stock:""}),d(!0)},T=()=>{h(null),n({name:"",price:"",restaurant_id:1,stock_type:"",addon_stock:""}),d(!0)},I=ie=>{const{name:Ee,value:Ae}=ie.target;n(re=>({...re,[Ee]:Ae}))},se=async ie=>{ie.preventDefault();const Ee={...r,price:parseFloat(r.price),addon_stock:r.stock_type==="Unlimited"?"Unlimited":parseInt(r.addon_stock)};if(m)await window.myAPI?.updateAdon?.(m.id,Ee),o();else try{if((await window.myAPI?.createAdon?.(Ee))?.success){const le=await window.myAPI?.getAdonsByHotel?.(1);le&&le.success&&t(le.data||[])}}catch(Ae){console.error("Error creating addon:",Ae)}d(!1)},oe=async ie=>{try{const Ee=s.find(re=>re.id===ie);if(!Ee)return;const Ae=Ee.status===1?0:1;await window.myAPI?.updateAdon?.(ie,{status:Ae}),o()}catch(Ee){console.error("Error toggling status:",Ee)}},_e=ie=>{N(ie),p(!0)},he=async ie=>{try{await window.myAPI?.updateAdon?.(ie,{isdeleted:1}),o(),p(!1),N(null)}catch(Ee){console.error("Error deleting addon:",Ee)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"overflow-x-auto bg-white py-5 px-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Addon List"}),e.jsxs("button",{onClick:T,className:"px-4 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add New Addon"]})]}),e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Stock Type"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:s.map((ie,Ee)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-25 transition-colors ${Ee%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:Ee+1})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:ie.name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["   ",ie.price!=null?ie.price.toFixed(2):""," €"]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ie.stock_type})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ie.addon_stock})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ie.status,onChange:()=>oe(ie.id),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${ie.status?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${ie.status?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F(ie),className:"text-primary hover:text-primaryDark cursor-pointer transition-colors",children:e.jsx(ia,{size:16})}),e.jsx("button",{onClick:()=>_e(ie),className:"text-red-500 hover:text-red-700 cursor-pointer transition-colors",children:e.jsx(za,{size:16})})]})})]},ie.id))})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-[#0000008e] bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:m?"Edit Addon":"Add New Addon"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(St,{size:24})})]}),e.jsxs("form",{onSubmit:se,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name*"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:I,onFocus:ie=>{L(ie,"addon_name",r.name||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(r.name||"")},onClick:ie=>{B(ie,"addon_name",r.name||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(r.name||"")},onBlur:z,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",placeholder:"Ex: water",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price*"}),e.jsx("input",{type:"number",name:"price",value:r.price,onChange:I,onFocus:ie=>{L(ie,"addon_price",(r.price??"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((r.price??"").toString())},onClick:ie=>{B(ie,"addon_price",(r.price??"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((r.price??"").toString())},onBlur:z,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",placeholder:"100",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Type*"}),e.jsxs("select",{name:"stock_type",value:r.stock_type??"",onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select Stock Type"}),e.jsx("option",{value:"Unlimited",children:"Unlimited Stock"}),e.jsx("option",{value:"Limited",children:"Limited Stock"})]})]}),r.stock_type==="Limited"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Quantity*"}),e.jsx("input",{type:"number",name:"addon_stock",value:r.addon_stock??"",onChange:I,onFocus:ie=>{L(ie,"addon_stock",(r.addon_stock??"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((r.addon_stock??"").toString())},onClick:ie=>{B(ie,"addon_stock",(r.addon_stock??"").toString()),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput((r.addon_stock??"").toString())},onBlur:z,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",placeholder:"Enter stock quantity",min:"0",required:!0})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:"Reset"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primaryDark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:m?"Update":"Submit"})]})]})]})})}),x&&w&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Addon"}),e.jsx("button",{onClick:()=>{p(!1),N(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 mb-4",children:"Do you want to delete this addon?"})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{p(!1),N(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>he(w.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]}),e.jsx(Wa,{isVisible:_,onClose:()=>q(),activeInput:D,onInputChange:(ie,Ee)=>{Ee==="addon_name"?n(Ae=>({...Ae,name:ie})):Ee==="addon_price"?n(Ae=>({...Ae,price:ie})):Ee==="addon_stock"&&n(Ae=>({...Ae,addon_stock:ie}))},onInputBlur:z,inputValue:R(D)})]})},e6=()=>{const{themeColors:s}=Ur(),[t,r]=v.useState([]),[n,o]=v.useState([]),[c,d]=v.useState(!1),[m,h]=v.useState(null),[x,p]=v.useState(""),[w,N]=v.useState(""),[_,D]=v.useState([]),[L,B]=v.useState([]),[z,q]=v.useState(!1),[R,F]=v.useState(!1),[T,I]=v.useState(null),[se,oe]=v.useState("All categories"),[_e,he]=v.useState(!1),[ie,Ee]=v.useState(-1),[Ae,re]=v.useState([]),[le,J]=v.useState(!1),[Ce,Se]=v.useState(""),[He,Y]=v.useState(1),[be,ye]=v.useState(""),[ae,Ne]=v.useState({}),[ge,A]=v.useState([]),[P,f]=v.useState(""),[g,S]=v.useState([]),[k,C]=v.useState({isVisible:!1,message:"",type:"success"});v.useRef(null),v.useRef(null);const{showKeyboard:O,activeInput:U,handleAnyInputFocus:H,handleAnyInputClick:V,handleInputBlur:ee,hideKeyboard:X}=Wn(["custom_ingredient","update_ingredient_name"]),M=ke=>ke==="custom_ingredient"?P||"":ke==="update_ingredient_name"&&Ce||"",Q=async()=>{try{q(!0);const ke=await window.myAPI?.getAllIngredientsWithCategories();if(ke.success){r(ke.data);const st={};ke.data.forEach(gt=>{gt.category_id&&gt.category_name&&(st[gt.id]={category_id:gt.category_id,name:gt.category_name})}),Ne(st)}else console.error("Error fetching ingredients:",ke.message),r([]),Ne({})}catch(ke){console.error("Error fetching ingredients:",ke),r([]),Ne({})}finally{q(!1)}},ue=async()=>{try{const ke=await window.myAPI?.getActiveCategories(null);ke.success?o(ke.data):(console.error("Error fetching categories:",ke.message),o([]))}catch(ke){console.error("Error fetching categories:",ke),o([])}},ne=async ke=>{try{const st=await window.myAPI?.getIngredientsByCategoryPaginated(ke);st.success?re(st.data):re([])}catch(st){console.error("Error fetching ingredients by category:",st),re([])}},fe=async ke=>{if(!ke.trim()){D([]),he(!1);return}try{const st=await window.myAPI?.searchIngredientsByName(ke);st.success?(D(st.data),he(st.data.length>0),Ee(-1)):(D([]),he(!1))}catch(st){console.error("Error searching ingredients:",st),D([]),he(!1)}},ce=async(ke,st)=>{try{const gt=await window.myAPI?.checkCategoryIngredientExists(ke,st);return gt.success&&gt.exists}catch(gt){return console.error("Error checking ingredient existence:",gt),!1}},Me=async(ke,st)=>{try{const gt=await window.myAPI?.createCategoryIngredient(ke,st);return gt.success?!0:(console.error("Failed to add ingredient to category:",gt.message),!1)}catch(gt){return console.error("Error adding ingredient to category:",gt),!1}},Re=async ke=>{try{const st=await window.myAPI?.createIngredient({name:ke,status:1});return st.success?st.id:null}catch(st){return console.error("Error creating ingredient:",st),null}};v.useEffect(()=>{Q(),ue()},[]),v.useEffect(()=>{const ke=setTimeout(()=>{fe(w)},300);return()=>clearTimeout(ke)},[w]),v.useEffect(()=>{if(se&&se!=="All categories"){const ke=n.find(st=>st.name===se);ke&&ne(ke.id)}else re([])},[se,n]);const ze=()=>{h(null),p(""),N(""),D([]),B([]),f(""),S([]),he(!1),Ee(-1),d(!0)},rt=ke=>{h(ke),Se(ke.name),Y(ke.status);const st=ae[ke.id];ye(st?st.category_id:""),J(!0)},Ve=ke=>{p(ke.target.value)},Je=ke=>{const st=ke.target.value;f(st),N(st)},We=ke=>{ke.key==="Enter"?(ke.preventDefault(),ie>=0&&_[ie]?xt(_[ie]):P.trim()&&Qe()):ke.key==="ArrowDown"?(ke.preventDefault(),Ee(st=>st<_.length-1?st+1:st)):ke.key==="ArrowUp"?(ke.preventDefault(),Ee(st=>st>0?st-1:-1)):ke.key==="Escape"&&(he(!1),Ee(-1))},it=(ke,st="success")=>{C({isVisible:!0,message:ke,type:st})},Qe=()=>{if(P.trim()){if(g.find(ke=>ke.toLowerCase()===P.trim().toLowerCase())){it("This custom ingredient already exists!","error");return}S([...g,P.trim()]),f("")}},At=ke=>{S(g.filter((st,gt)=>gt!==ke))},xt=ke=>{if(t.find(gt=>gt.id===ke.id&&ae[gt.id]?.category_id===parseInt(x))){it("This ingredient already exists in the selected category!","error");return}L.find(gt=>gt.id===ke.id)||B([...L,ke]),N(""),f(""),D([]),he(!1),Ee(-1)},Te=async ke=>{if(ke.preventDefault(),!(!Ce.trim()||!m))try{if(q(!0),(await window.myAPI?.updateIngredient(m.id,{name:Ce.trim(),status:He})).success){if(be){const gt=ae[m.id],kt=gt?gt.category_id:null;kt!==be&&(kt&&await window.myAPI?.removeCategoryIngredient(kt,m.id),await Me(be,m.id))}await Q(),J(!1),h(null),Se(""),Y(1),ye(""),it("Ingredient updated successfully!","success")}else it("Unable to update ingredient","error")}catch(st){console.error("Error updating ingredient:",st),it("An error occurred while updating the ingredient","error")}finally{q(!1)}},Ke=async ke=>{if(ke.preventDefault(),!(L.length===0&&g.length===0||!x))try{q(!0);let st=0,gt=[],kt=[];for(const Mt of L)await ce(x,Mt.id)?gt.push(Mt.name):await Me(x,Mt.id)&&st++;for(const Mt of g){const de=await Re(Mt);de&&await Me(x,de)?st++:kt.push(Mt)}if(st>0&&(await Q(),B([]),S([]),it(`${st} ingredient(s) added successfully!`,"success")),gt.length>0){const Mt=gt.join(", ");it(`${gt.length} ingredient(s) were already in this category: ${Mt}`,"warning")}if(kt.length>0){const Mt=kt.join(", ");it(`Failed to add ${kt.length} ingredient(s): ${Mt}`,"error")}}catch(st){console.error("Error adding ingredients to category:",st),it("Error adding ingredients to category","error")}finally{q(!1)}},Pe=ke=>{B(L.filter(st=>st.id!==ke))},qe=async ke=>{try{const st=t.find(Mt=>Mt.id===ke);if(!st)return;const gt=st.status?0:1;(await window.myAPI?.updateIngredient(ke,{status:gt})).success&&await Q()}catch(st){console.error("Error toggling status:",st)}},ft=ke=>{I(ke),F(!0)},ot=async ke=>{try{(await window.myAPI?.updateIngredient(ke,{isdeleted:1})).success?(await Q(),F(!1),I(null),it("Ingredient deleted successfully!","success")):it("Failed to delete ingredient","error")}catch(st){console.error("Error deleting ingredient:",st),it("Error deleting ingredient","error")}},pt=se&&se!=="All categories"?Ae:t;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"overflow-x-auto bg-white py-5 px-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Ingredients List"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative",children:e.jsxs("select",{value:se,onChange:ke=>oe(ke.target.value),className:"w-48 px-4 py-1.5 border text-sm rounded-lg focus:outline-none focus:ring-2 focus:border-transparent",style:{borderColor:s.primary},children:[e.jsx("option",{children:"All categories"}),n.map(ke=>e.jsx("option",{children:ke.name},ke.id))]})}),e.jsxs("button",{onClick:ze,className:"px-4 py-1.5 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors flex items-center gap-2",style:{backgroundColor:s.primary},children:[e.jsx(Ls,{size:16}),"Add New Ingredient"]})]})]}),e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:pt.map((ke,st)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-25 transition-colors ${st%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:st+1})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:ke.name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-600",children:ae[ke.id]?ae[ke.id].name:"No Category"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!ke.status,onChange:()=>qe(ke.id),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${ke.status?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${ke.status?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>rt(ke),className:"text-primary hover:text-primaryDark cursor-pointer transition-colors",children:e.jsx(ia,{size:16})}),e.jsx("button",{onClick:()=>ft(ke),className:"text-red-500 hover:text-red-700 cursor-pointer transition-colors",children:e.jsx(za,{size:16})})]})})]},ke.id))})]}),pt.length===0&&!z&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 font-medium text-sm",children:"No ingredients found"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Ingredients will appear here once added."})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-[#0000008e] bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:m?"Edit Ingredient":"Add Ingredients to Category"}),e.jsx("button",{onClick:()=>d(!1),className:"hover:opacity-70",style:{color:s.primary},children:e.jsx(St,{size:24})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Category*"}),e.jsxs("select",{value:x,onChange:Ve,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1",style:{borderColor:x?s.primaryBg:"#d1d5db",boxShadow:x?`0 0 0 2px ${s.primaryBg}`:void 0},required:!0,children:[e.jsx("option",{value:"",children:"Choose a category..."}),n.map(ke=>e.jsx("option",{value:ke.id,children:ke.name},ke.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Custom Ingredient"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"custom_ingredient",type:"text",value:P,onChange:Je,onKeyDown:We,onFocus:ke=>{H(ke,"custom_ingredient",P||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(P||"")},onClick:ke=>{V(ke,"custom_ingredient",P||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(P||"")},onBlur:ee,placeholder:"Type ingredient name to search or add custom ingredient...",className:"w-full px-3 py-2 border rounded-md focus:outline-none",style:{borderColor:x?s.primaryBg:"#d1d5db",boxShadow:x?`0 0 0 2px ${s.primaryBg}`:void 0}}),_e&&_.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:_.map((ke,st)=>e.jsx("div",{className:`px-3 py-2 cursor-pointer hover:bg-gray-50 ${st===ie?"bg-gray-100":""}`,onClick:()=>xt(ke),children:e.jsx("span",{className:"text-sm text-gray-800",children:ke.name})},ke.id))})]})]}),(L.length>0||g.length>0)&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ingredients to Add (",L.length+g.length,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[L.map(ke=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm border-2",style:{backgroundColor:"white",color:s.primary,borderColor:s.primary},children:[ke.name,e.jsx("button",{type:"button",onClick:()=>Pe(ke.id),className:"ml-2 hover:opacity-70",style:{color:s.primary},children:e.jsx(St,{size:14})})]},ke.id)),g.map((ke,st)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm border",style:{backgroundColor:s.primaryExtraLight,color:s.primary,borderColor:s.primary},children:[ke,e.jsx("button",{type:"button",onClick:()=>At(st),className:"ml-2 hover:opacity-70",style:{color:s.primary},children:e.jsx(St,{size:14})})]},`custom-${st}`))]})]}),e.jsx("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:Ke,disabled:z||!x||L.length===0&&g.length===0,className:"flex-1 px-4 py-3 text-white text-sm font-medium rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed",style:{backgroundColor:z||!x||L.length===0&&g.length===0?"#9CA3AF":s.primary},children:z?"Adding...":`Add ${L.length+g.length} Ingredient(s)`})})]})]})})}),le&&m&&e.jsx("div",{className:"fixed inset-0 bg-[#0000008e] bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Update Ingredient"}),e.jsx("button",{onClick:()=>{J(!1),h(null),Se(""),Y(1)},className:"text-gray-500 hover:text-gray-700",children:e.jsx(St,{size:24})})]}),e.jsxs("form",{onSubmit:Te,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ingredient Name*"}),e.jsx("input",{name:"update_ingredient_name",type:"text",value:Ce,onChange:ke=>Se(ke.target.value),onFocus:ke=>{H(ke,"update_ingredient_name",Ce||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(Ce||"")},onClick:ke=>{V(ke,"update_ingredient_name",Ce||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(Ce||"")},onBlur:ee,placeholder:"Enter ingredient name...",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2",style:{borderColor:s.primary},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category*"}),e.jsxs("select",{value:be,onChange:ke=>ye(ke.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2",style:{borderColor:s.primary},required:!0,children:[e.jsx("option",{value:"",children:"Choose a category..."}),n.map(ke=>e.jsx("option",{value:ke.id,children:ke.name},ke.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!He,onChange:ke=>Y(ke.target.checked?1:0),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${He?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${He?"translate-x-5":"translate-x-0.5"} mt-0.5`})}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:He?"Active":"Inactive"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{J(!1),h(null),Se(""),Y(1)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:z||!Ce.trim(),className:"flex-1 px-4 py-2 text-white text-sm font-medium rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed",style:{backgroundColor:z||!Ce.trim()?"#9CA3AF":s.primary},children:z?"Updating...":"Update Ingredient"})]})]})]})})}),R&&T&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Ingredient"}),e.jsx("button",{onClick:()=>{F(!1),I(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("p",{className:"text-gray-700 mb-4",children:['Do you want to delete the ingredient "',T.name,'"?']})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{F(!1),I(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>ot(T.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(Ni,{isVisible:k.isVisible,message:k.message,type:k.type,onClose:()=>C({...k,isVisible:!1})})]}),e.jsx(Wa,{isVisible:O,onClose:()=>X(),activeInput:U,onInputChange:(ke,st)=>{st==="custom_ingredient"?(f(ke),N(ke)):st==="update_ingredient_name"&&Se(ke)},onInputBlur:ee,inputValue:M(U)})]})},Bj=({food:s,onSubmit:t})=>{const r=ka(),[n,o]=v.useState({name:"",description:"",image:null,category_id:"",subcategory_id:"",veg:"",isPizza:!1,status:1,restaurant_id:1,position:"",price:"",tax:"",tax_type:"custom",discount:"",discount_type:"percentage",available_time_starts:"",available_time_ends:"",sku:"",barcode:"",stock_type:"",item_stock:"",sell_count:0,addons:[],allowNotes:!0,productNote:"",trackInventory:!1,lowInventory:5,recommended:!1,variations:[]}),[c,d]=v.useState(null),[m,h]=v.useState("custom"),[x,p]=v.useState({}),[w,N]=v.useState(""),[_,D]=v.useState([]),[L,B]=v.useState([]),[z,q]=v.useState([]),[R,F]=v.useState([]),[T,I]=v.useState(""),[se,oe]=v.useState([]),[_e,he]=v.useState(!1),[ie,Ee]=v.useState(-1),[Ae,re]=v.useState([]),[le,J]=v.useState([]),[Ce,Se]=v.useState(""),[He,Y]=v.useState([]),[be,ye]=v.useState(!1),[ae,Ne]=v.useState(-1),[ge,A]=v.useState([]),[P,f]=v.useState([]),[g,S]=v.useState(""),[k,C]=v.useState([]),[O,U]=v.useState(!1),[H,V]=v.useState(-1),[ee,X]=v.useState(!1),[M,Q]=v.useState(!1),{showKeyboard:ue,activeInput:ne,handleInputBlur:fe,handleAnyInputFocus:ce,handleAnyInputClick:Me,hideKeyboard:Re}=Wn(["name","description","position","price","tax","discount","available_time_starts","available_time_ends","maxPurchaseQty","stock_type","item_stock","sku","barcode","lowInventory","productNote","ingredientInput","allerginInput","adonInput"]),ze=te=>{const Z=te.target;if(!Z||!Z.tagName)return;const Be=Z.tagName.toLowerCase(),Xe=(Z.getAttribute("type")||"").toLowerCase();if(Be==="textarea"||Be==="input"&&["text","number","time","date"].includes(Xe)){const ut=Z.name||"";ce(te,ut,Z.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(Z.value||"")}},rt=te=>{const Z=te.target;if(!Z||!Z.tagName)return;const Be=Z.tagName.toLowerCase(),Xe=(Z.getAttribute("type")||"").toLowerCase();if(Be==="textarea"||Be==="input"&&["text","number","time","date"].includes(Xe)){const ut=Z.name||"";Me(te,ut,Z.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(Z.value||"")}},Ve=(te,Z)=>{if(!te)return;let Be=te.match(/^variation_(\d+)_(name|min|max)$/);if(Be){const Xe=parseInt(Be[1],10),nt=Be[2];o(ut=>{const Et=[...ut.variations||[]];return Et[Xe]?(Et[Xe]={...Et[Xe],[nt]:Z},{...ut,variations:Et}):ut});return}if(Be=te.match(/^variation_(\d+)_option_(\d+)_(option_name|option_price|total_stock)$/),Be){const Xe=parseInt(Be[1],10),nt=parseInt(Be[2],10),ut=Be[3];o(Et=>{const Rt=[...Et.variations||[]];if(!Rt[Xe])return Et;const Ht={...Rt[Xe]},ss=[...Ht.options||[]];return ss[nt]?(ss[nt]={...ss[nt],[ut]:Z},Ht.options=ss,Rt[Xe]=Ht,{...Et,variations:Rt}):Et});return}o(Xe=>({...Xe,[te]:Z}))},Je=te=>{if(!te)return"";let Z=te.match(/^variation_(\d+)_(name|min|max)$/);if(Z){const Xe=parseInt(Z[1],10),nt=Z[2];return(n.variations?.[Xe]?.[nt]??"").toString()}if(Z=te.match(/^variation_(\d+)_option_(\d+)_(option_name|option_price|total_stock)$/),Z){const Xe=parseInt(Z[1],10),nt=parseInt(Z[2],10),ut=Z[3];return(n.variations?.[Xe]?.options?.[nt]?.[ut]??"").toString()}if(te==="ingredientInput")return g||"";if(te==="allerginInput")return T||"";if(te==="adonInput")return Ce||"";const Be=n[te];return Be!=null?String(Be):""};v.useEffect(()=>{(async()=>{try{X(!0),console.log("Loading categories...");const Z=await window.myAPI?.getCategoriesByHotel(1);if(console.log("Categories API result:",Z),Z&&Z.success){const Be=(Z.data||[]).filter(Xe=>Xe.status===1);D(Be),console.log("Active categories loaded:",Be)}else console.error("Failed to load categories:",Z?.message)}catch(Z){console.error("Error loading categories:",Z)}finally{X(!1)}})()},[]),v.useEffect(()=>{(async()=>{try{console.log("Loading allergens...");const Z=await window.myAPI?.getAllAllergins();console.log("Allergins API result:",Z),Z&&Z.success?(q(Z.data||[]),console.log("Allergins loaded:",Z.data)):console.error("Failed to load allergens:",Z?.message)}catch(Z){console.error("Error loading allergens:",Z)}})()},[]),v.useEffect(()=>{(async()=>{try{console.log("Loading adons...");const Z=await window.myAPI?.getAdonsByHotel(1);if(console.log("Adons API result:",Z),Z&&Z.success){const Be=(Z.data||[]).filter(Xe=>Xe.status===1);re(Be),console.log("Active adons loaded:",Be)}else console.error("Failed to load adons:",Z?.message)}catch(Z){console.error("Error loading adons:",Z)}})()},[]),v.useEffect(()=>{(async()=>{try{console.log("Loading ingredients...");const Z=await window.myAPI?.getAllIngredients();if(console.log("Ingredients API result:",Z),Z&&Z.success){const Be=(Z.data||[]).filter(Xe=>Xe.status===1);A(Be),console.log("Active ingredients loaded:",Be)}else console.error("Failed to load ingredients:",Z?.message)}catch(Z){console.error("Error loading ingredients:",Z)}})()},[]),v.useEffect(()=>{(async()=>{if(!n.category_id){B([]);return}try{console.log("Loading subcategories for category:",n.category_id);const Z=await window.myAPI?.getSubcategoriesByCategory(n.category_id);if(console.log("Subcategories API result:",Z),Z&&Z.success){const Be=(Z.data||[]).filter(Xe=>Xe.status===1);B(Be),console.log("Active subcategories loaded:",Be)}else console.error("Failed to load subcategories:",Z?.message),B([])}catch(Z){console.error("Error loading subcategories:",Z),B([])}})()},[n.category_id]),v.useEffect(()=>{s||(f([]),S(""),C([]),U(!1),V(-1))},[n.category_id,s]),v.useEffect(()=>{s&&(o({name:s.name||"",description:s.description||"",image:s.image||null,category_id:s.category_id||"",subcategory_id:s.subcategory_id||"",veg:s.veg||0,isPizza:s.isPizza===1||s.isPizza===!0||!1,status:s.status===1?1:0,restaurant_id:s.restaurant_id||1,position:s.position||"",price:s.price||"",tax:s.tax||"",tax_type:s.tax_type&&["food","standard","custom"].includes(String(s.tax_type))?s.tax_type:"custom",discount:s.discount||"",discount_type:s.discount_type||"percentage",available_time_starts:s.available_time_starts||"",available_time_ends:s.available_time_ends||"",sku:s.sku||"",barcode:s.barcode||"",stock_type:s.stock_type||"unlimited",item_stock:s.item_stock||"",sell_count:s.sell_count||0,maxPurchaseQty:s.maximum_cart_quantity||"",allowNotes:s.product_note_enabled===1||s.product_note_enabled===!0||!1,productNote:s.product_note||"",trackInventory:s.track_inventory===1||s.track_inventory===!0||!1,lowInventory:s.low_inventory_threshold||5,recommended:s.recommended===1||s.recommended===!0||!1,variations:s.variations||[]}),s.tax_type&&["food","standard","custom"].includes(String(s.tax_type))?h(s.tax_type):h("custom"),s.image?s.image.startsWith("uploads/")?window.myAPI.getFoodImage(s.image).then(te=>{te.success?d(te.data):(console.error("Failed to load food image:",te.message),d(null))}).catch(()=>{d(null)}):s.image.startsWith("data:image")?d(s.image):d(`data:image/png;base64,${s.image}`):d(null),s.allergins&&s.allergins.length>0&&F(s.allergins),s.adons&&s.adons.length>0?J(s.adons):s.id&&(async()=>{try{const Z=await window.myAPI?.getFoodAdons(s.id);Z&&Z.success&&J(Z.data||[])}catch(Z){console.error("Error loading food adons:",Z)}})(),s.ingredients&&s.ingredients.length>0?f(s.ingredients):s.id&&(async()=>{try{const Z=await window.myAPI?.getFoodIngredients(s.id);Z&&Z.success&&f(Z.data||[])}catch(Z){console.error("Error loading food ingredients:",Z)}})())},[s]);const We=te=>{const{name:Z,value:Be,type:Xe,checked:nt}=te.target;o(ut=>({...ut,[Z]:Xe==="checkbox"?nt:Be})),x[Z]&&p(ut=>({...ut,[Z]:""}))},it=typeof window<"u"?window.appSettings?.current||{}:{},Qe=Number(it?.food_tax??it?.foodTax??it?.food_tax_percentage??it?.foodTaxPercent??0),At=Number(it?.standard_tax??it?.standardTax??it?.standard_tax_percentage??it?.standardTaxPercent??0);Number(it?.delivery_tax??it?.deliveryTax??it?.delivery_tax_percentage??it?.deliveryTaxPercent??0),Number(it?.service_tax??it?.serviceTax??it?.service_tax_percentage??it?.serviceTaxPercent??0),v.useEffect(()=>{m==="food"?o(te=>({...te,tax:isNaN(Qe)?"":Qe})):m==="standard"&&o(te=>({...te,tax:isNaN(At)?"":At}))},[m,Qe,At]),v.useEffect(()=>{o(te=>({...te,tax_type:m}))},[m]);const xt=te=>{const Z=te.target.files[0];if(Z){o(Xe=>({...Xe,image:Z}));const Be=new FileReader;Be.onloadend=()=>d(Be.result),Be.readAsDataURL(Z)}},Te=()=>{o(te=>({...te,variations:[...te.variations||[],{name:"",type:"single",min:1,max:"",is_required:!1,options:[{option_name:"",option_price:0,total_stock:"",stock_type:"",sell_count:0}]}]}))},Ke=te=>{const Z=[...n.variations||[]];Z[te].options||(Z[te].options=[]),Z[te].options.push({option_name:"",option_price:0,total_stock:"",stock_type:"",sell_count:0}),o(Be=>({...Be,variations:Z}))},Pe=(te,Z,Be)=>{const Xe=[...n.variations||[]];Xe[te]={...Xe[te],[Z]:Be},o(nt=>({...nt,variations:Xe}))},qe=(te,Z,Be,Xe)=>{const nt=[...n.variations||[]];nt[te].options[Z]={...nt[te].options[Z],[Be]:Xe},o(ut=>({...ut,variations:nt}))},ft=te=>{const Z=[...n.variations||[]];Z.splice(te,1),o(Be=>({...Be,variations:Z}))},ot=(te,Z)=>{const Be=[...n.variations||[]];Be[te].options.splice(Z,1),o(Xe=>({...Xe,variations:Be}))},pt=te=>{const Z=te.target.value;if(I(Z),Ee(-1),Z.trim()){const Be=z.filter(Xe=>Xe.name.toLowerCase().includes(Z.toLowerCase())&&!R.some(nt=>nt.id===Xe.id));oe(Be),he(!0)}else{const Be=z.filter(Xe=>!R.some(nt=>nt.id===Xe.id));oe(Be),he(!0)}},ke=()=>{const te=z.filter(Z=>!R.some(Be=>Be.id===Z.id));oe(te),he(!0)},st=te=>{R.some(Z=>Z.id===te.id)||F(Z=>[...Z,te]),I(""),oe([]),he(!1),Ee(-1)},gt=te=>{F(Z=>Z.filter(Be=>Be.id!==te))},kt=async te=>{if(te.key==="Enter"){if(te.preventDefault(),ie>=0&&se[ie])st(se[ie]);else if(T.trim()){const Z=z.find(Be=>Be.name.toLowerCase()===T.trim().toLowerCase());if(Z)st(Z);else try{const Be=await window.myAPI?.createAllergin({name:T.trim()});if(Be&&Be.success){const Xe={id:Be.id,name:T.trim()};q(nt=>[...nt,Xe]),F(nt=>[...nt,Xe]),I(""),oe([]),he(!1),Ee(-1)}else console.error("Failed to create allergen:",Be?.message)}catch(Be){console.error("Error creating allergen:",Be)}}}else te.key==="ArrowDown"?(te.preventDefault(),Ee(Z=>Z<se.length-1?Z+1:Z)):te.key==="ArrowUp"?(te.preventDefault(),Ee(Z=>Z>0?Z-1:-1)):te.key==="Escape"&&(he(!1),Ee(-1))},Mt=te=>{const Z=te.target.value;if(Se(Z),Ne(-1),Z.trim()){const Be=Ae.filter(Xe=>Xe.name.toLowerCase().includes(Z.toLowerCase())&&!le.some(nt=>nt.id===Xe.id));Y(Be),ye(!0)}else{const Be=Ae.filter(Xe=>!le.some(nt=>nt.id===Xe.id));Y(Be),ye(!0)}},de=()=>{const te=Ae.filter(Z=>!le.some(Be=>Be.id===Z.id));Y(te),ye(!0)},De=te=>{le.some(Z=>Z.id===te.id)||J(Z=>[...Z,te]),Se(""),Y([]),ye(!1),Ne(-1)},Le=te=>{J(Z=>Z.filter(Be=>Be.id!==te))},ve=te=>{te.key==="Enter"?(te.preventDefault(),ae>=0&&He[ae]&&De(He[ae])):te.key==="ArrowDown"?(te.preventDefault(),Ne(Z=>Z<He.length-1?Z+1:Z)):te.key==="ArrowUp"?(te.preventDefault(),Ne(Z=>Z>0?Z-1:-1)):te.key==="Escape"&&(ye(!1),Ne(-1))},Ze=te=>{if(!n.category_id)return;const Z=te.target.value;if(S(Z),V(-1),Z.trim()){const Be=ge.filter(Xe=>Xe.name.toLowerCase().includes(Z.toLowerCase())&&!P.some(nt=>nt.id===Xe.id));C(Be),U(!0)}else{const Be=ge.filter(Xe=>!P.some(nt=>nt.id===Xe.id));C(Be),U(!0)}},mt=()=>{if(!n.category_id)return;const te=ge.filter(Z=>!P.some(Be=>Be.id===Z.id));C(te),U(!0)},dt=te=>{console.log("Selecting ingredient:",te),P.some(Z=>Z.id===te.id)?console.log("Ingredient already selected:",te.name):f(Z=>{const Be=[...Z,te];return console.log("Updated selectedIngredients:",Be),Be}),S(""),C([]),U(!1),V(-1)},jt=te=>{f(Z=>Z.filter(Be=>Be.id!==te))},wt=async te=>{if(n.category_id)if(te.key==="Enter"){if(te.preventDefault(),H>=0&&k[H])dt(k[H]);else if(g.trim()){const Z=ge.find(Be=>Be.name.toLowerCase()===g.trim().toLowerCase());if(Z)dt(Z);else{console.log("Creating new ingredient:",g.trim());try{const Be=await window.myAPI?.createIngredient({name:g.trim()});if(console.log("createIngredient result:",Be),Be&&Be.success){const Xe={id:Be.id,name:g.trim()};console.log("Created new ingredient:",Xe),A(nt=>[...nt,Xe]),f(nt=>{const ut=[...nt,Xe];return console.log("Added new ingredient to selectedIngredients:",ut),ut}),S(""),C([]),U(!1),V(-1)}else console.error("Failed to create ingredient:",Be?.message)}catch(Be){console.error("Error creating ingredient:",Be)}}}}else te.key==="ArrowDown"?(te.preventDefault(),V(Z=>Z<k.length-1?Z+1:Z)):te.key==="ArrowUp"?(te.preventDefault(),V(Z=>Z>0?Z-1:-1)):te.key==="Escape"&&(U(!1),V(-1))},Tt=()=>{const te={};return n.name.trim()||(te.name="Name is required"),n.category_id||(te.category_id="Category is required"),n.price<=0&&(te.price="Price must be greater than 0"),p(te),Object.keys(te).length===0},me=async te=>{if(te.preventDefault(),!!Tt()){Q(!0);try{let Z=null,Be=null;n.image&&n.image instanceof File?(Z=await new Promise((Et,Rt)=>{const Ht=new FileReader;Ht.onload=()=>Et(Ht.result),Ht.onerror=Rt,Ht.readAsDataURL(n.image)}),Be=n.image.name):(typeof n.image=="string"&&n.image.startsWith("data:image")||typeof n.image=="string"&&n.image.startsWith("uploads/"))&&(Z=n.image);const Xe={name:n.name,description:n.description,image:Z,originalFilename:Be,category_id:parseInt(n.category_id),subcategory_id:n.subcategory_id?parseInt(n.subcategory_id):null,price:parseFloat(n.price),tax:n.tax===""?0:parseFloat(n.tax),tax_type:n.tax_type,discount:n.discount===""?0:parseFloat(n.discount),discount_type:n.discount_type,available_time_starts:n.available_time_starts,available_time_ends:n.available_time_ends,veg:n.veg,isPizza:n.isPizza?1:0,status:n.status,restaurant_id:n.restaurant_id,position:n.position?parseInt(n.position):null,sku:n.sku,barcode:n.barcode,stock_type:n.stock_type||"unlimited",item_stock:n.stock_type==="limited"&&n.item_stock!==""?parseInt(n.item_stock):null,sell_count:parseInt(n.sell_count),maximum_cart_quantity:n.maxPurchaseQty?parseInt(n.maxPurchaseQty):null,track_inventory:n.trackInventory?1:0,low_inventory_threshold:n.lowInventory?parseInt(n.lowInventory):null,product_note_enabled:n.allowNotes?1:0,product_note:n.productNote||null};let nt,ut;if(s?(console.log("Updating food with ID:",s.id),nt=await window.myAPI?.updateFood(s.id,{foodData:Xe,variations:n.variations}),ut=s.id):(console.log("Creating new food"),nt=await window.myAPI?.createFood(Xe),ut=nt?.food_id),nt&&nt.success){if(console.log(s?"Food updated successfully:":"Food created successfully:",nt),R.length>0)try{const Et=R.map(Ht=>Ht.id),Rt=await window.myAPI?.updateFoodAllergins(ut,Et);Rt&&Rt.success?console.log("Food-allergin relationships saved successfully"):console.error("Failed to save food-allergin relationships:",Rt?.message)}catch(Et){console.error("Error saving food-allergin relationships:",Et)}else try{await window.myAPI?.updateFoodAllergins(ut,[])}catch(Et){console.error("Error clearing food-allergin relationships:",Et)}if(le.length>0)try{const Et=le.map(Ht=>Ht.id),Rt=await window.myAPI?.updateFoodAdons(ut,Et);Rt&&Rt.success?console.log("Food-addon relationships saved successfully"):console.error("Failed to save food-addon relationships:",Rt?.message)}catch(Et){console.error("Error saving food-addon relationships:",Et)}else try{await window.myAPI?.updateFoodAdons(ut,[])}catch(Et){console.error("Error clearing food-addon relationships:",Et)}if(P.length>0&&n.category_id)try{console.log("Processing ingredients for food:",ut),console.log("Selected ingredients:",P),console.log("Category ID:",n.category_id);const Et=P.map(Ht=>Ht.name);console.log("Ingredient names to process:",Et);const Rt=await window.myAPI?.processFoodIngredients(ut,parseInt(n.category_id),Et);console.log("processFoodIngredients result:",Rt),Rt&&Rt.success?console.log("Food-ingredient relationships processed successfully:",Rt.data):console.error("Failed to process food-ingredient relationships:",Rt?.message)}catch(Et){console.error("Error processing food-ingredient relationships:",Et)}else console.log("No ingredients to save or no category selected"),console.log("selectedIngredients.length:",P.length),console.log("formData.category_id:",n.category_id);if(!s&&n.variations&&n.variations.length>0)try{for(const Et of n.variations)if(Et.name&&Et.options&&Et.options.length>0){const Rt={food_id:ut,name:Et.name,type:Et.type||"single",min:parseInt(Et.min)||1,max:Et.max?parseInt(Et.max):null,is_required:Et.is_required||!1},Ht=await window.myAPI?.createVariation(Rt);if(Ht){const ss=Ht;console.log("Variation created successfully:",ss);for(const Pt of Et.options)if(Pt.option_name){const ms={food_id:ut,variation_id:ss,option_name:Pt.option_name,option_price:parseFloat(Pt.option_price)||0,total_stock:parseInt(Pt.total_stock)||0,stock_type:Pt.stock_type||"unlimited",sell_count:parseInt(Pt.sell_count)||0},as=await window.myAPI?.createVariationOption(ms);as?console.log("Variation option created successfully:",as):console.error("Failed to create variation option")}}else console.error("Failed to create variation")}console.log("All variations and options saved successfully")}catch(Et){console.error("Error saving variations:",Et)}t?t(nt):r("/dashboard/food-management")}else console.error(s?"Failed to update food:":"Failed to create food:",nt?.message),alert(s?"Failed to update food: "+(nt?.message||"Unknown error"):"Failed to create food: "+(nt?.message||"Unknown error"))}catch(Z){console.error(s?"Error updating food:":"Error creating food:",Z),alert(s?"Error updating food: "+Z.message:"Error creating food: "+Z.message)}finally{Q(!1)}}},Ie=(te,Z=!1)=>`w-full px-3 py-2 border rounded-md transition-all duration-200 focus:outline-none focus:ring-2 ${Z?"border-red-500 focus:ring-red-500":""} ${w===te&&!Z?"border-primaryLight focus:ring-primaryLight focus:border-primaryLight":""} ${!Z&&w!==te?"border-gray-300 hover:border-primaryLight":""}`;return e.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"flex items-center justify-center text-center text-black font-bold border-2 border-black h-6 w-6 rounded-full hover:text-gray-800 mr-4",children:s?e.jsx(fl,{className:"h-4 w-4 mr-1 pl-1"}):e.jsx(Ls,{className:"h-5 w-5 mr-1 pl-1 font-bold"})}),e.jsx("h1",{className:"text-2xl font-bold",children:s?"Edit Food Item":"Add New Food Item"})]}),e.jsxs("form",{onSubmit:me,onFocus:ze,onClick:rt,onBlur:fe,className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[e.jsx(Gb,{className:"h-5 w-5 text-primaryLight mr-2"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Basic Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:We,onFocus:()=>N("name"),onBlur:()=>N(""),className:Ie("name",x.name),required:!0}),x.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:n.description,onChange:We,onFocus:()=>N("description"),onBlur:()=>N(""),className:Ie("description"),rows:3})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Food Image"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-primaryLight transition-colors",children:c?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:c,alt:"Preview",className:"w-32 h-32 object-cover rounded-md mb-2"}),e.jsx("button",{type:"button",onClick:()=>d(null),className:"text-sm text-red-600 hover:text-red-800",children:"Remove Image"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-600 justify-center",children:e.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-primaryLight hover:text-primaryDark",children:[e.jsx("span",{children:"Upload an image"}),e.jsx("input",{type:"file",className:"sr-only",onChange:xt,accept:"image/*"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 2MB"})]})})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[e.jsx(Hh,{className:"h-5 w-5 text-primaryLight mr-2"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Category & Position"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"category_id",value:n.category_id,onChange:We,onFocus:()=>N("category_id"),onBlur:()=>N(""),className:`${Ie("category_id",x.category_id)} appearance-none pr-8`,required:!0,disabled:ee,children:[e.jsx("option",{value:"",children:ee?"Loading categories...":"Select Category"}),_.map(te=>(console.log("Rendering category:",te),e.jsx("option",{value:te.id,children:te.name},te.id)))]}),e.jsx(hs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),x.category_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.category_id})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub Category"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"subcategory_id",value:n.subcategory_id,onChange:We,onFocus:()=>N("subcategory_id"),onBlur:()=>N(""),className:`${Ie("subcategory_id")} appearance-none pr-8`,disabled:!n.category_id,children:[e.jsx("option",{value:"",children:"Select Sub Category"}),L.map(te=>e.jsx("option",{value:te.id,children:te.name},te.id))]}),e.jsx(hs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Food Type"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"veg",value:n.veg,onChange:We,onFocus:()=>N("veg"),onBlur:()=>N(""),className:`${Ie("veg")} appearance-none pr-8`,children:[e.jsx("option",{value:"",children:"Select Food Type"}),e.jsx("option",{value:0,children:"Non-Veg"}),e.jsx("option",{value:1,children:"Veg"})]}),e.jsx(hs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position (in Category)"}),e.jsx("input",{type:"number",name:"position",value:n.position,onChange:We,onFocus:()=>N("position"),onBlur:()=>N(""),className:Ie("position"),min:"1",placeholder:"1, 2, 3..."})]})]}),e.jsxs("div",{className:"my-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Is Pizza"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"isPizza",checked:n.isPizza,onChange:We,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primaryLight/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primaryLight"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:n.isPizza?"Yes":"No"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enable if this is a pizza item"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product Notes"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"allowNotes",checked:n.allowNotes,onChange:We,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primaryLight/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primaryLight"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:n.allowNotes?"ON":"OFF"})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Allow staff to add custom notes while ordering"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default Product Note"}),e.jsx("input",{type:"text",name:"productNote",value:n.productNote,onChange:We,onFocus:()=>N("productNote"),onBlur:()=>N(""),disabled:!n.allowNotes,className:`${Ie("productNote")} ${n.allowNotes?"":"opacity-50 cursor-not-allowed"}`,placeholder:"e.g., No onions, Extra spicy",title:n.allowNotes?"":"Enable Product Notes to add a default note"})]})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ingredients ",!n.category_id&&e.jsx("span",{className:"text-gray-400",children:"(Select category first)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"ingredientInput",type:"text",value:g,onChange:Ze,onKeyDown:wt,onFocus:mt,onBlur:()=>setTimeout(()=>U(!1),200),className:`${Ie("ingredientInput")} ${n.category_id?"":"opacity-50 cursor-not-allowed"}`,placeholder:n.category_id?"Click to see all ingredients, type to search":"Select category first to enable ingredients",disabled:!n.category_id}),O&&k.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto",children:k.map((te,Z)=>e.jsx("div",{className:`px-3 py-2 cursor-pointer border-b border-gray-100 last:border-b-0 ${Z===H?"bg-primary text-white":"hover:bg-gray-100"}`,onClick:()=>dt(te),children:te.name},te.id))})]}),P.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selected Ingredients:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(te=>e.jsxs("div",{className:"flex items-center bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:te.name}),e.jsx("button",{type:"button",onClick:()=>jt(te.id),className:"ml-2 text-orange-600 hover:text-orange-800",children:e.jsx(St,{className:"h-3 w-3"})})]},te.id))})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Allergins"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"allerginInput",type:"text",value:T,onChange:pt,onKeyDown:kt,onFocus:ke,onBlur:()=>setTimeout(()=>he(!1),200),className:Ie("allerginInput"),placeholder:"Click to see all allergens, type to search"}),_e&&se.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto",children:se.map((te,Z)=>e.jsx("div",{className:`px-3 py-2 cursor-pointer border-b border-gray-100 last:border-b-0 ${Z===ie?"bg-primary text-white":"hover:bg-gray-100"}`,onClick:()=>st(te),children:te.name},te.id))})]}),R.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selected Allergins:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(te=>e.jsxs("div",{className:"flex items-center bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:te.name}),e.jsx("button",{type:"button",onClick:()=>gt(te.id),className:"ml-2 text-blue-600 hover:text-blue-800",children:e.jsx(St,{className:"h-3 w-3"})})]},te.id))})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[e.jsx(Fc,{className:"h-5 w-5 text-primaryLight mr-2"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Price & Availability"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Unit Price (€) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"price",value:n.price,onChange:We,onFocus:()=>N("price"),onBlur:()=>N(""),className:Ie("price",x.price),step:"0.01",min:"0.01",required:!0}),x.price&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.price})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Source"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:m,onChange:te=>h(te.target.value),className:`${Ie("tax_source")} appearance-none pr-8`,children:[e.jsx("option",{value:"food",children:`Food Tax ${isNaN(Qe)?"":`(${Qe}%)`}`}),e.jsx("option",{value:"standard",children:`Standard Tax ${isNaN(At)?"":`(${At}%)`}`}),e.jsx("option",{value:"custom",children:"Custom"})]}),e.jsx(hs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax (%)"}),e.jsx("input",{type:"number",name:"tax",value:n.tax,onChange:We,onFocus:()=>N("tax"),onBlur:()=>N(""),className:`${Ie("tax")} ${m!=="custom"?"opacity-50 cursor-not-allowed":""}`,step:"0.01",min:"0",disabled:m!=="custom"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Type"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"discount_type",value:n.discount_type,onChange:We,onFocus:()=>N("discount_type"),onBlur:()=>N(""),className:`${Ie("discount_type")} appearance-none pr-8`,children:[e.jsx("option",{value:"percentage",children:"Percent (%)"}),e.jsx("option",{value:"amount",children:"Amount (€)"})]}),e.jsx(hs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Value"}),e.jsx("input",{type:"number",name:"discount",value:n.discount,onChange:We,onFocus:()=>N("discount"),onBlur:()=>N(""),className:Ie("discount"),min:"0",step:n.discount_type==="percentage"?"1":"0.01"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available From"}),e.jsx("input",{type:"time",name:"available_time_starts",value:n.available_time_starts,onChange:We,onFocus:()=>N("available_time_starts"),onBlur:()=>N(""),className:Ie("available_time_starts")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available To"}),e.jsx("input",{type:"time",name:"available_time_ends",value:n.available_time_ends,onChange:We,onFocus:()=>N("available_time_ends"),onBlur:()=>N(""),className:Ie("available_time_ends")})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Purchase Quantity"}),e.jsx("input",{type:"number",name:"maxPurchaseQty",value:n.maxPurchaseQty,onChange:We,onFocus:()=>N("maxPurchaseQty"),onBlur:()=>N(""),className:Ie("maxPurchaseQty"),min:"1"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Type"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"stock_type",value:n.stock_type,onChange:We,onFocus:()=>N("stock_type"),onBlur:()=>N(""),className:`${Ie("stock_type")} appearance-none pr-8`,children:[e.jsx("option",{value:"",children:"Select Stock Type"}),e.jsx("option",{value:"unlimited",children:"Unlimited"}),e.jsx("option",{value:"limited",children:"Limited"})]}),e.jsx(hs,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),n.stock_type==="limited"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Type"}),e.jsx("input",{type:"number",name:"item_stock",value:n.item_stock,onChange:We,onFocus:te=>{N("item_stock"),ce(te,"item_stock",te.target.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(te.target.value||"")},onClick:te=>{Me(te,"item_stock",te.target.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(te.target.value||"")},onBlur:()=>N(""),className:Ie("item_stock"),min:"0",placeholder:"Enter stock amount"})]})]})})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[e.jsx(yl,{className:"h-5 w-5 text-primaryLight mr-2"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Adons"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adons"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"adonInput",type:"text",value:Ce,onChange:Mt,onKeyDown:ve,onFocus:de,onBlur:()=>setTimeout(()=>ye(!1),200),className:Ie("adonInput"),placeholder:"Click to see all adons, type to search"}),be&&He.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto",children:He.map((te,Z)=>e.jsx("div",{className:`px-3 py-2 cursor-pointer border-b border-gray-100 last:border-b-0 ${Z===ae?"bg-primary text-white":"hover:bg-gray-100"}`,onClick:()=>De(te),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:te.name}),e.jsxs("span",{className:"text-sm font-medium",children:["€",te.price]})]})},te.id))})]}),le.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selected Adons:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:le.map(te=>e.jsxs("div",{className:"flex items-center bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:te.name}),e.jsxs("span",{className:"ml-2 font-medium",children:["€",te.price]}),e.jsx("button",{type:"button",onClick:()=>Le(te.id),className:"ml-2 text-green-600 hover:text-green-800",children:e.jsx(St,{className:"h-3 w-3"})})]},te.id))})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 pb-2 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(bl,{className:"h-5 w-5 text-primaryLight mr-2"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Variations"})]}),e.jsxs("button",{type:"button",onClick:Te,className:"flex items-center px-3 py-1.5 bg-primary text-white text-sm font-medium rounded-lg hover:bg-primaryDark transition-colors",children:[e.jsx(Ls,{className:"h-4 w-4 mr-1"}),"Add Variation"]})]}),e.jsx("div",{className:"space-y-6",children:n.variations?.map((te,Z)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-md font-medium text-gray-800",children:["Variation ",Z+1]}),e.jsxs("button",{type:"button",onClick:()=>ft(Z),className:"flex items-center text-red-600 hover:text-red-800 text-sm",children:[e.jsx(za,{className:"h-4 w-4 mr-1"}),"Remove"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Variation Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{name:`variation_${Z}_name`,type:"text",value:te.name||"",onChange:Be=>Pe(Z,"name",Be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primaryLight focus:border-primaryLight",placeholder:"e.g., Size",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selection Type"}),e.jsxs("div",{className:"flex space-x-4 pt-2",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:`type-${Z}`,checked:(te.type||"single")==="single",onChange:()=>Pe(Z,"type","single"),className:"h-4 w-4 text-primaryLight focus:ring-primaryLight border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Single Selection"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:`type-${Z}`,checked:te.type==="multiple",onChange:()=>Pe(Z,"type","multiple"),className:"h-4 w-4 text-primaryLight focus:ring-primaryLight border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Multiple Selection"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Selections"}),e.jsx("input",{name:`variation_${Z}_min`,type:"number",value:te.min||1,onChange:Be=>Pe(Z,"min",Be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primaryLight focus:border-primaryLight",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Selections"}),e.jsx("input",{name:`variation_${Z}_max`,type:"number",value:te.max||"",onChange:Be=>Pe(Z,"max",Be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primaryLight focus:border-primaryLight",min:"1"})]}),e.jsx("div",{className:"flex items-center pt-6",children:e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",checked:te.is_required||!1,onChange:Be=>Pe(Z,"is_required",Be.target.checked),className:"h-4 w-4 text-primaryLight focus:ring-primaryLight border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Required"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Options"}),e.jsxs("button",{type:"button",onClick:()=>Ke(Z),className:"flex items-center text-primaryLight hover:text-primaryDark text-sm",children:[e.jsx(Ls,{className:"h-4 w-4 mr-1"}),"Add Option"]})]}),te.options?.map((Be,Xe)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end bg-white p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Option Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{name:`variation_${Z}_option_${Xe}_option_name`,type:"text",value:Be.option_name||"",onChange:nt=>qe(Z,Xe,"option_name",nt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primaryLight focus:border-primaryLight",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Price (€)"}),e.jsx("input",{name:`variation_${Z}_option_${Xe}_option_price`,type:"number",value:Be.option_price||"",onChange:nt=>qe(Z,Xe,"option_price",nt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primaryLight focus:border-primaryLight",step:"0.01",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Type"}),e.jsxs("select",{value:Be.stock_type||"",onChange:nt=>qe(Z,Xe,"stock_type",nt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primaryLight focus:border-primaryLight",children:[e.jsx("option",{value:"",children:"Select Stock Type"}),e.jsx("option",{value:"unlimited",children:"Unlimited"}),e.jsx("option",{value:"limited",children:"Limited"})]})]}),Be.stock_type==="limited"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Type"}),e.jsx("input",{name:`variation_${Z}_option_${Xe}_total_stock`,type:"number",value:Be.total_stock!==void 0&&Be.total_stock!==null?Be.total_stock:"",onChange:nt=>qe(Z,Xe,"total_stock",nt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primaryLight focus:border-primaryLight",min:"0",placeholder:"Enter stock amount"})]}),e.jsx("div",{children:e.jsxs("button",{type:"button",onClick:()=>ot(Z,Xe),className:"flex items-center text-red-600 hover:text-red-800 text-sm",children:[e.jsx(za,{className:"h-4 w-4 mr-1"}),"Remove"]})})]},Xe))]})]},Z))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[e.jsx(yl,{className:"h-5 w-5 text-primaryLight mr-2"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Inventory"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU (Stock Keeping Unit)"}),e.jsx("input",{type:"text",name:"sku",value:n.sku,onChange:We,className:Ie("sku"),placeholder:"e.g., ABC-123"})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode"}),e.jsx("input",{type:"text",name:"barcode",value:n.barcode,onChange:We,className:Ie("barcode"),placeholder:"EAN, UPC, GTIN, etc"})]})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Track Inventory"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enable to track stock levels for this item"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"trackInventory",checked:n.trackInventory,onChange:We,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primaryLight/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primaryLight"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:n.trackInventory?"ON":"OFF"})]})]}),n.trackInventory&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Stock"}),e.jsx("input",{type:"number",name:"item_stock",value:n.item_stock,onChange:We,onFocus:te=>{N("item_stock"),ce(te,"item_stock",te.target.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(te.target.value||"")},onClick:te=>{Me(te,"item_stock",te.target.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(te.target.value||"")},onBlur:()=>N(""),className:Ie("item_stock"),min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Low Inventory Threshold"}),e.jsx("input",{type:"number",name:"lowInventory",value:n.lowInventory,onChange:We,onFocus:te=>{N("lowInventory"),ce(te,"lowInventory",te.target.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(te.target.value||"")},onClick:te=>{Me(te,"lowInventory",te.target.value||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(te.target.value||"")},onBlur:()=>N(""),className:Ie("lowInventory"),min:"1"})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{t?t(null):r("/dashboard/food-management")},className:"px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:M,className:"px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primaryDark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:M?s?"Updating...":"Creating...":s?"Update Food Item":"Add Food Item"})]})]}),e.jsx(Wa,{isVisible:ue,onClose:()=>Re(),activeInput:ne,onInputChange:(te,Z)=>{Z==="ingredientInput"?S(te):Z==="allerginInput"?I(te):Z==="adonInput"?Se(te):Ve(Z,te)},onInputBlur:fe,inputValue:Je(ne)})]})},t6=({imagePath:s,alt:t,className:r="w-10 h-10 object-cover rounded"})=>{const[n,o]=v.useState(null),[c,d]=v.useState(!0),[m,h]=v.useState(!1);return v.useEffect(()=>{s?(async()=>{try{if(d(!0),h(!1),s&&typeof s=="string")if(s.startsWith("uploads/")){const p=await window.myAPI?.getFoodImage(s);p&&p.success?o(p.data):h(!0)}else s.startsWith("data:image"),o(s);else h(!0)}catch(p){console.error("Error loading food image:",p),h(!0)}finally{d(!1)}})():(d(!1),h(!0))},[s]),c?e.jsx("div",{className:`${r} bg-gray-200 animate-pulse`}):m||!n?e.jsx("div",{className:`${r} bg-gray-200`}):e.jsx("img",{src:n,alt:t,className:r})},s6=()=>{const[s,t]=v.useState("foodList"),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState(""),[h,x]=v.useState("All categories"),[p,w]=v.useState({key:null,direction:"asc"}),[N,_]=v.useState([]),[D,L]=v.useState(!0),[B,z]=v.useState(!1),[q,R]=v.useState(null),F=["Traditional","Burgers","Pizza","Beverages"],{showKeyboard:T,activeInput:I,handleAnyInputFocus:se,handleAnyInputClick:oe,handleInputBlur:_e,hideKeyboard:he}=Wn(["foodSearch"]),ie=ye=>ye==="foodSearch"&&d||"",Ee=async()=>{try{L(!0);const ye=await window.myAPI?.getAllFoods();if(ye&&ye.success){const ae=ye.data.map(Ne=>({id:Ne.id,name:Ne.name,image:Ne.image&&typeof Ne.image=="string"&&Ne.image.trim()!==""?Ne.image:null,category:Ne.category_name||"Uncategorized",price:Ne.price||0,type:Ne.veg===1?"Veg":"Non-Veg",recommended:!1,status:Ne.status===1,stock:Ne.stock_type||(Ne.item_stock>0?"limited":"unlimited"),position:Ne.position||0}));_(ae)}else console.error("Failed to fetch food data:",ye?.message),_([])}catch(ye){console.error("Error fetching food data:",ye),_([])}finally{L(!1)}};v.useEffect(()=>{Ee()},[]);const Ae=async ye=>{try{const ae=await window.myAPI?.getFoodById(ye.id);ae&&ae.success?(c(ae.data),n(!0)):(console.error("Failed to fetch food details:",ae?.message),alert("Failed to load food details for editing"))}catch(ae){console.error("Error fetching food details:",ae),alert("Error loading food details for editing")}},re=ye=>{R(ye),z(!0)},le=async ye=>{try{console.log("Attempting to delete food with ID:",ye),console.log("window.myAPI available:",!!window.myAPI),console.log("deleteFood available:",!!window.myAPI?.deleteFood);const ae=await window.myAPI?.deleteFood(ye);console.log("Delete result:",ae),ae&&ae.success?(console.log("Food deleted successfully"),Ee(),z(!1),R(null)):(console.error("Failed to delete food:",ae?.message),alert("Error deleting food: "+(ae?.message||"Unknown error")))}catch(ae){console.error("Error deleting food:",ae),alert("Error deleting food: "+ae.message)}},J=async ye=>{try{const ae=N.find(A=>A.id===ye);if(!ae)return;const Ne=!ae.recommended,ge=await window.myAPI?.updateFood(ye,{foodData:{recommended:Ne?1:0}});ge&&ge.success?Ee():console.error("Failed to update recommended status:",ge?.message)}catch(ae){console.error("Error toggling recommended status:",ae)}},Ce=async ye=>{try{const ae=N.find(A=>A.id===ye);if(!ae)return;const Ne=!ae.status,ge=await window.myAPI?.updateFood(ye,{foodData:{status:Ne?1:0}});ge&&ge.success?Ee():console.error("Failed to update status:",ge?.message)}catch(ae){console.error("Error toggling status:",ae)}},Se=ye=>{let ae="asc";p.key===ye&&p.direction==="asc"&&(ae="desc"),w({key:ye,direction:ae})},Y=(p.key?[...N].sort((ye,ae)=>ye[p.key]<ae[p.key]?p.direction==="asc"?-1:1:ye[p.key]>ae[p.key]?p.direction==="asc"?1:-1:0):N).filter(ye=>!(d&&!ye.name.toLowerCase().includes(d.toLowerCase())||h&&h!=="All categories"&&ye.category!==h)),be=ye=>p.key!==ye?e.jsxs("div",{className:"flex flex-col ml-1",children:[e.jsx($x,{size:12,className:"text-gray-400"}),e.jsx(hs,{size:12,className:"text-gray-400 -mt-1"})]}):p.direction==="asc"?e.jsx($x,{size:12,className:"ml-1 text-primary"}):e.jsx(hs,{size:12,className:"ml-1 text-primary"});return e.jsxs("div",{className:"px-4 py-2",children:[e.jsx("div",{className:"flex items-center justify-end mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>t("foodList"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="foodList"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(ji,{size:16}),"Food List"]}),e.jsxs("button",{onClick:()=>t("categories"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="categories"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(cg,{size:16}),"Categories"]}),e.jsxs("button",{onClick:()=>t("subCategories"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="subCategories"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(jx,{size:16}),"Sub Categories"]}),e.jsxs("button",{onClick:()=>t("addons"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="addons"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(jx,{size:16}),"Addons"]}),e.jsxs("button",{onClick:()=>t("ingredients"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="ingredients"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(jx,{size:16}),"Ingredients"]})]})}),s==="foodList"&&e.jsxs("div",{className:"overflow-x-auto bg-white py-5 px-4 rounded-lg shadow-sm",children:[r&&e.jsx("div",{className:"mb-6",children:e.jsx(Bj,{food:o,onSubmit:ye=>{ye===null?(n(!1),c(null)):o?(_(N.map(ae=>ae.id===ye.id?ye:ae)),n(!1),c(null),Ee()):(_([...N,{...ye,id:Math.max(...N.map(ae=>ae.id))+1}]),n(!1),c(null),Ee())}})}),e.jsx("div",{className:"mb-6 flex justify-end items-center",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative",children:e.jsxs("select",{value:h,onChange:ye=>x(ye.target.value),className:"w-48 px-4 py-1.5 border text-sm border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primaryLight focus:border-transparent",children:[e.jsx("option",{children:"All categories"}),e.jsx("option",{children:"Out Of Stock Foods"}),F.map(ye=>e.jsx("option",{children:ye},ye))]})}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",placeholder:"Search food items...",name:"foodSearch",value:d,onChange:ye=>m(ye.target.value),onFocus:ye=>{se(ye,"foodSearch",d||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(d||"")},onClick:ye=>{oe(ye,"foodSearch",d||""),window.keyboard&&typeof window.keyboard.setInput=="function"&&window.keyboard.setInput(d||"")},onBlur:_e,className:"w-64 px-4 py-1.5 border text-sm border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primaryLight focus:border-transparent"})}),e.jsx(Cg,{to:"/dashboard/food-management/add-food",children:e.jsxs("button",{onClick:()=>{c(null),n(!0)},className:"px-4 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add New Food"]})})]})}),e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer",onClick:()=>Se("id"),children:e.jsxs("div",{className:"flex items-center",children:["SI",be("id")]})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Image"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer",onClick:()=>Se("name"),children:e.jsxs("div",{className:"flex items-center",children:["Name",be("name")]})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer",onClick:()=>Se("category"),children:e.jsxs("div",{className:"flex items-center",children:["Category",be("category")]})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer",onClick:()=>Se("price"),children:e.jsxs("div",{className:"flex items-center",children:["Price",be("price")]})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer",onClick:()=>Se("type"),children:e.jsxs("div",{className:"flex items-center",children:["Type",be("type")]})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Recommended"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider cursor-pointer",onClick:()=>Se("stock"),children:e.jsxs("div",{className:"flex items-center",children:["Stock",be("stock")]})}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:Y.map((ye,ae)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-25 transition-colors ${ae%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:ae+1})}),e.jsx("td",{className:"py-3 px-4",children:ye.image&&typeof ye.image=="string"&&ye.image.trim()!==""?e.jsx(t6,{imagePath:ye.image,alt:ye.name}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-xs",children:"🍽️"})})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:ye.name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ye.category})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:["$",ye.price.toFixed(2)]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ye.type==="Veg"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ye.type})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ye.recommended,onChange:()=>J(ye.id),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:left-[1px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primaryLight"})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ye.status,onChange:()=>Ce(ye.id),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:left-[1px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primaryLight"})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-800",children:ye.stock})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Ae(ye),className:"text-primary hover:text-primaryDark cursor-pointer transition-colors",children:e.jsx(ia,{size:16})}),e.jsx("button",{onClick:()=>re(ye),className:"text-red-500 hover:text-red-700 cursor-pointer transition-colors",children:e.jsx(za,{size:16})})]})})]},ye.id))})]}),Y.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 font-medium text-sm",children:"No food items found"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Items matching your filter criteria will appear here."})]})]}),s==="categories"&&e.jsx(Q5,{}),s==="subCategories"&&e.jsx(Z5,{}),s==="addons"&&e.jsx(J5,{}),s==="ingredients"&&e.jsx(e6,{}),B&&q&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Food Item"}),e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 mb-4",children:"Do you want to delete this food item?"})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{z(!1),R(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>le(q.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(Wa,{isVisible:T,onClose:()=>he(),activeInput:I,onInputChange:(ye,ae)=>{ae==="foodSearch"&&m(ye)},onInputBlur:_e,inputValue:ie(I)})]})},Fb=()=>{const s=ka(),{id:t}=yS(),r=!!t,[n,o]=v.useState(null),[c,d]=v.useState(!1);v.useEffect(()=>{r&&t&&(async()=>{try{d(!0),console.log("Fetching food data for ID:",t);const x=await window.myAPI?.getFoodById(parseInt(t));x&&x.success?(console.log("Food data fetched successfully:",x.data),o(x.data)):(console.error("Failed to fetch food data:",x?.message),alert("Failed to load food details for editing"),s("/dashboard/food-management"))}catch(x){console.error("Error fetching food data:",x),alert("Error loading food details for editing"),s("/dashboard/food-management")}finally{d(!1)}})()},[t,r,s]);const m=h=>{console.log("Form submitted:",h),s("/dashboard/food-management")};return c?e.jsx("div",{className:"container mx-auto p-4",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading food details..."})})}):e.jsx("div",{className:"container mx-auto p-4",children:e.jsx(Bj,{food:r?n:null,onSubmit:m})})},a6=()=>{const[s,t]=v.useState([]),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState(!1),[h,x]=v.useState(!1),[p,w]=v.useState(null),[N,_]=v.useState(!1),[D,L]=v.useState(null),[B,z]=v.useState({}),[q,R]=v.useState(!1),[F,T]=v.useState(""),[I,se]=v.useState({firstName:"",lastName:"",role:"",phone:"",email:"",pin:"",confirmPin:"",salaryPerHour:"",image:null,vehicleNumber:"",vehicleType:""}),[oe,_e]=v.useState(""),[he,ie]=v.useState(""),[Ee,Ae]=v.useState(""),[re,le]=v.useState({}),J=async()=>{try{const C=localStorage.getItem("currentEmployee");let O=null;if(C)try{O=JSON.parse(C).id}catch(H){console.error("Error parsing current employee data:",H)}const U=await window.myAPI?.getAllEmployees(O);if(U.success){t(U.data);const H={};for(const V of U.data)if(V.imgurl&&V.imgurl.startsWith("uploads/"))try{const ee=await window.myAPI.getEmployeeImage(V.imgurl);ee.success&&(H[V.id]=ee.data)}catch(ee){console.error("Error loading image for employee:",V.id,ee)}z(H)}else console.error("Error fetching employees:",U.message)}catch(C){console.error("Error fetching employees:",C)}};v.useEffect(()=>{J()},[]);const Ce=C=>{if(c(C),se({firstName:C.fname||"",lastName:C.lname||"",role:C.roll||"",phone:C.phone||"",email:C.email||"",pin:"",confirmPin:"",salaryPerHour:C.salaryPerHour||"",image:null,vehicleNumber:C.vehicleNumber||"",vehicleType:C.vehicleType||""}),C.imgurl)if(C.imgurl.startsWith("uploads/")){const O=B[C.id];O?w(O):window.myAPI.getEmployeeImage(C.imgurl).then(U=>{U.success?w(U.data):w(null)}).catch(()=>{w(null)})}else w(`data:image/png;base64,${C.imgurl}`);else w(null);_e(""),ie(""),Ae(""),n(!0)},Se=()=>{c(null),se({firstName:"",lastName:"",role:"",phone:"",email:"",pin:"",confirmPin:"",salaryPerHour:"",image:null,vehicleNumber:"",vehicleType:""}),w(null),_e(""),ie(""),Ae(""),n(!0)},He=C=>{const{name:O,value:U}=C.target;if(O==="phone"){const H=U.replace(/\D/g,"");if(H.length>10||H.length>0&&H.length>=2&&!H.startsWith("08"))return;se(V=>({...V,[O]:H})),Ee&&Ae("");return}if(O==="pin"){const H=U.trim(),V=s.find(ee=>ee.pin===H&&(!o||ee.id!==o.id));_e(V?"⚠ This PIN is already taken by another employee":"")}O==="email"&&he&&ie(""),se(H=>({...H,[O]:U}))},Y=C=>{const O=C.target.files[0];if(O){if(console.log("File selected:",O.name,O.size,O.type),O.size>2*1024*1024){alert("Image size must be less than 2MB");return}if(!O.type.startsWith("image/")){alert("Please select an image file");return}const U=new FileReader;U.onload=H=>{w(H.target.result)},U.readAsDataURL(O),se(H=>({...H,image:O}))}},be=async C=>{if(C.preventDefault(),_e(""),ie(""),Ae(""),I.pin!==I.confirmPin){alert("PIN and Confirm PIN do not match");return}if(I.phone.length!==10||!I.phone.startsWith("08")){alert("Phone number must be 10 digits and start with 08");return}try{let O=null;I.image?(console.log("Processing image:",I.image.name,I.image.size),O=await new Promise((H,V)=>{const ee=new FileReader;ee.onload=()=>{const X=ee.result.split(",")[1];console.log("Image converted to base64, length:",X.length),console.log("Base64 preview (first 100 chars):",X.substring(0,100)),H(X)},ee.onerror=X=>{console.error("Error reading image:",X),V(X)},ee.readAsDataURL(I.image)})):console.log("No image selected");const U={fname:I.firstName,lname:I.lastName,roll:I.role,phone:I.phone,email:I.email,pin:I.pin,code:I.pin,address:"",isActive:1,isDeleted:0,isSyncronized:0};if(I.role==="Delivery Man"&&(U.vehicleNumber=I.vehicleNumber,U.vehicleType=I.vehicleType),I.image&&(U.imgurl=O,U.originalFilename=I.image.name),console.log("Employee data to send:",{...U,imgurl:U.imgurl?`base64_data_${U.imgurl.length}_chars`:"not provided"}),o){const H=await window.myAPI?.updateEmployee(o.id,U,U.originalFilename||null);if(H.success)J();else{H.message.includes("Email already exists")?ie("⚠ Email already exists"):H.message.includes("Phone number already exists")?Ae("⚠ Phone number already exists"):H.message.includes("PIN code already exists")?_e("⚠ PIN code already exists"):alert("Error updating employee: "+H.message);return}}else{const H=await window.myAPI?.createEmployee(U);if(H.success)J();else{H.message.includes("Email already exists")?ie("⚠ Email already exists"):H.message.includes("Phone number already exists")?Ae("⚠ Phone number already exists"):H.message.includes("PIN code already exists")?_e("⚠ PIN code already exists"):alert("Error creating employee: "+H.message);return}}n(!1),w(null)}catch(O){console.error("Error saving employee:",O),alert("Error saving employee")}},ye=()=>{se({firstName:"",lastName:"",role:"",phone:"",email:"",pin:"",confirmPin:"",salaryPerHour:"",image:null,vehicleNumber:"",vehicleType:""}),w(null),_e(""),ie(""),Ae("")},ae=C=>{L(C),_(!0)},Ne=async C=>{try{const O=await window.myAPI?.updateEmployee(C,{isDeleted:1});O.success?(J(),_(!1),L(null)):alert("Error deleting employee: "+O.message)}catch(O){console.error("Error deleting employee:",O),alert("Error deleting employee")}},ge=async C=>{if(!re[C])try{le(ee=>({...ee,[C]:!0}));const O=s.find(ee=>ee.id===C);if(!O)return;console.log("Current employee data:",O),console.log("Current isActive value:",O.isActive,"Type:",typeof O.isActive);let U;O.isActive===1||O.isActive===!0||O.isActive==="1"?U=!0:U=!1;const H=U?0:1;console.log("Toggling status for employee:",O.fname,"from",U,"to",H);const V=await window.myAPI?.updateEmployee(C,{isActive:H});console.log("API response:",V),V&&V.success?(console.log("Status updated successfully"),t(ee=>ee.map(X=>X.id===C?{...X,isActive:H}:X)),setTimeout(()=>{console.log("Fetching fresh data..."),J()},200)):(console.error("API returned error:",V),alert("Error toggling status: "+(V?.message||"Unknown error")))}catch(O){console.error("Error toggling status:",O),alert("Error toggling status. Please try again.")}finally{le(O=>({...O,[C]:!1}))}},A=C=>{T(C),R(!0)},P=C=>{C.relatedTarget&&C.relatedTarget.closest(".hg-theme-default")||C.target&&C.target.closest(".hg-theme-default")||C.relatedTarget&&C.relatedTarget.tagName==="INPUT"&&C.relatedTarget.closest("form")||C.relatedTarget&&C.relatedTarget.tagName==="SELECT"&&C.relatedTarget.closest("form")||setTimeout(()=>{R(!1),T("")},100)},f=(C,O)=>{(!q||F!==O)&&A(O)},g=(C,O)=>{A(O)},S=(C,O,U)=>{if(O&&se(H=>({...H,[O]:C})),U==="enter"){const H=["firstName","lastName","role","phone","salaryPerHour","email","pin","confirmPin"],V=H.indexOf(O);if(V<H.length-1){const ee=H[V+1],X=document.querySelector(`[name="${ee}"]`);X&&X.focus()}}},k=()=>{R(!1),T("")};return e.jsxs("div",{className:"space-y-6",children:[r&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-primary",children:o?"Edit Employee":"Add New Employee"}),e.jsx("button",{onClick:()=>{n(!1),w(null)},className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100",children:e.jsx(St,{size:20})})]}),e.jsxs("form",{onSubmit:be,children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary mb-4 pb-2 border-b border-gray-200",children:"General Information"}),e.jsxs("div",{className:"flex ",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"firstName",value:I.firstName,onChange:He,onFocus:()=>f(null,"firstName"),onBlur:P,onClick:()=>g(null,"firstName"),className:"w-[80%] px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Ex: John",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"lastName",value:I.lastName,onChange:He,onFocus:()=>f(null,"lastName"),onBlur:P,onClick:()=>g(null,"lastName"),className:"w-[80%] px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Ex: Doe",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Role ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"role",value:I.role,onChange:He,onFocus:()=>f(null,"role"),onBlur:P,onClick:()=>g(null,"role"),className:"w-[80%] px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"Manager",children:"Manager"}),e.jsx("option",{value:"Cashier",children:"Cashier"}),e.jsx("option",{value:"Chef",children:"Chef"}),e.jsx("option",{value:"Waiter",children:"Waiter"}),e.jsx("option",{value:"Sweeper",children:"Sweeper"}),e.jsx("option",{value:"Delivery Man",children:"Delivery Man"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})," ",e.jsx("span",{className:"text-xs text-gray-500",children:"(Must start with 08 and be 10 digits)"})]}),e.jsx("input",{type:"text",name:"phone",value:I.phone,onChange:He,onFocus:()=>f(null,"phone"),onBlur:P,onClick:()=>g(null,"phone"),className:`w-[80%] px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${Ee?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-primary"}`,placeholder:"08xxxxxxxx",maxLength:"10",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:I.phone.length>0&&e.jsxs("span",{className:I.phone.length===10&&I.phone.startsWith("08")?"text-green-600":"text-red-500",children:[I.phone.length,"/10 digits"]})}),Ee&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:Ee})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Salary per Hour ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"salaryPerHour",value:I.salaryPerHour,onChange:He,onFocus:()=>f(null,"salaryPerHour"),onBlur:P,onClick:()=>g(null,"salaryPerHour"),className:"w-[80%] px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"0.00",min:"0",step:"0.01",required:!0})]}),I.role==="Delivery Man"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Vehicle Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"vehicleNumber",value:I.vehicleNumber,onChange:He,onFocus:()=>f(null,"vehicleNumber"),onBlur:P,onClick:()=>g(null,"vehicleNumber"),className:"w-[80%] px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Ex: ABC-123",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Vehicle Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"vehicleType",value:I.vehicleType,onChange:He,onFocus:()=>f(null,"vehicleType"),onBlur:P,onClick:()=>g(null,"vehicleType"),className:"w-[80%] px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Vehicle Type"}),e.jsx("option",{value:"Bike",children:"Bike"}),e.jsx("option",{value:"Car",children:"Car"}),e.jsx("option",{value:"Truck",children:"Truck"}),e.jsx("option",{value:"Bicycle",children:"Bicycle"})]})]})]})]})}),e.jsxs("div",{className:"w-48",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Image"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"border-2 border-dashed border-gray-300 rounded-lg p-3 flex flex-col items-center justify-center cursor-pointer hover:border-primary transition-colors w-full h-32 relative overflow-hidden",children:[p?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:p,alt:"Preview",className:"w-full h-full object-cover rounded-md"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"text-white text-xs",children:"Change Image"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(fg,{size:20,className:"text-gray-400 mb-1"}),e.jsx("span",{className:"text-primary font-medium text-xs",children:"Upload Image"})]}),e.jsx("input",{type:"file",onChange:Y,className:"sr-only",accept:"image/*"})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"Image format - jpg png jpeg gif"}),e.jsx("p",{children:"Image Size - maximum size 2 MB"}),e.jsx("p",{children:"Image Ratio - 1:1"}),I.image&&e.jsxs("p",{className:"text-green-600 font-medium",children:["Selected: ",I.image.name]})]})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-lg",children:"👤"}),e.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Account Info"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",name:"email",value:I.email,onChange:He,onFocus:()=>f(null,"email"),onBlur:P,onClick:()=>g(null,"email"),className:`w-3/4 px-3 py-2.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${he?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-primary"}`,placeholder:"mrsaqibale@gmail.com",required:!0}),he&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:he})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["PIN Code ",e.jsx("span",{className:"text-red-500",children:"*"})," ",e.jsx("span",{className:"text-xs text-gray-500",children:"(4-6 digits)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:d?"text":"password",name:"pin",value:I.pin,onChange:He,onFocus:()=>f(null,"pin"),onBlur:P,onClick:()=>g(null,"pin"),className:`w-3/4 px-3 py-2.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent pr-6 text-sm ${oe?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-primary"}`,placeholder:"••••••",minLength:"4",maxLength:"6",pattern:"[0-9]{4,6}",required:!0}),e.jsx("button",{type:"button",onClick:()=>m(!d),className:"absolute right-12 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:d?e.jsx(kh,{size:14}):e.jsx(vn,{size:14})})]}),oe&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:oe})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Confirm PIN ",e.jsx("span",{className:"text-red-500",children:"*"})," ",e.jsx("span",{className:"text-xs text-gray-500",children:"(Must match above)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:h?"text":"password",name:"confirmPin",value:I.confirmPin,onChange:He,onFocus:()=>f(null,"confirmPin"),onBlur:P,onClick:()=>g(null,"confirmPin"),className:"w-3/4 px-3 py-2.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent pr-6 text-sm",placeholder:"••••••",minLength:"4",maxLength:"6",pattern:"[0-9]{4,6}",required:!0}),e.jsx("button",{type:"button",onClick:()=>x(!h),className:"absolute right-12 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h?e.jsx(kh,{size:14}):e.jsx(vn,{size:14})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:ye,className:"px-6 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary",children:"Reset"}),e.jsx("button",{type:"submit",className:`px-6 py-2 bg-primary text-white font-medium rounded-lg \r
                shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
                active:shadow-none active:translate-y-[4px] transition-all`,children:"Submit"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"👥"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Employee List"})]}),e.jsxs("button",{onClick:Se,className:`px-3 py-2 bg-primary text-white text-sm font-medium rounded-lg flex items-center gap-2 \r
            shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
            active:shadow-none active:translate-y-[4px] transition-all`,children:[e.jsx(Ls,{size:16}),"Add New Employee"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse  overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Employee Name"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primaryuppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:s.filter(C=>C.roll!=="Admin").map((C,O)=>e.jsxs("tr",{className:`border-b border-gray-100 ${O%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:O+1})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[C.imgurl?e.jsx("img",{src:C.imgurl.startsWith("uploads/")?B[C.id]:`data:image/png;base64,${C.imgurl}`,alt:`${C.fname} ${C.lname}`,className:"w-8 h-8 object-cover rounded-full",onError:U=>{U.target.style.display="none",U.target.nextSibling.style.display="flex"}}):e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-xs text-gray-500",children:[C.fname?.charAt(0),C.lname?.charAt(0)]})}),e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",style:{display:"none"},children:e.jsxs("span",{className:"text-xs text-gray-500",children:[C.fname?.charAt(0),C.lname?.charAt(0)]})}),e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:[C.fname," ",C.lname]})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:C.roll})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:C.phone})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:C.email})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:`relative inline-flex items-center ${re[C.id]?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[e.jsx("input",{type:"checkbox",checked:C.isActive===1,onChange:()=>!re[C.id]&&ge(C.id),className:"sr-only",disabled:re[C.id]}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${C.isActive===1?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${C.isActive===1?"translate-x-5":"translate-x-0.5"} mt-0.5`})}),re[C.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:C.created_at?new Date(C.created_at).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Ce(C),className:"text-primary hover:text-primary-dark transition-colors p-1 rounded hover:bg-blue-50",children:e.jsx(ia,{size:16})}),e.jsx("button",{onClick:()=>ae(C),className:"text-red-600 hover:text-red-800 transition-colors p-1 rounded hover:bg-red-50",children:e.jsx(za,{size:16})})]})})]},C.id))})]})})]}),N&&D&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Employee"}),e.jsx("button",{onClick:()=>{_(!1),L(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete this employee? This action cannot be undone."}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Employee: ",e.jsxs("strong",{children:[D.fname," ",D.lname]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Role: ",e.jsx("strong",{children:D.roll})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{_(!1),L(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>Ne(D.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(Wa,{isVisible:q,onClose:k,activeInput:F,onInputChange:S,onInputBlur:P,inputValue:I[F]||"",placeholder:"Type here..."})]})},{api:Qs}=window,r6=()=>{const[s,t]=v.useState(""),[r,n]=v.useState(""),[o,c]=v.useState(""),[d,m]=v.useState(""),[h,x]=v.useState(""),[p,w]=v.useState(""),[N,_]=v.useState("cash"),[D,L]=v.useState(""),[B,z]=v.useState([]),[q,R]=v.useState([]),[F,T]=v.useState(""),[I,se]=v.useState(1),[oe]=v.useState(7),[_e,he]=v.useState(!1),[ie,Ee]=v.useState(null),[Ae,re]=v.useState(!1),[le,J]=v.useState(""),[Ce,Se]=v.useState(""),[He,Y]=v.useState(["Check In","Check Out"]),[be,ye]=v.useState(!1),[ae,Ne]=v.useState([]),[ge,A]=v.useState(!1),[P,f]=v.useState(""),[g,S]=v.useState(""),[k,C]=v.useState(""),[O,U]=v.useState(""),[H,V]=v.useState(!1),[ee,X]=v.useState(""),[M,Q]=v.useState(!1),[ue,ne]=v.useState(""),[fe,ce]=v.useState("success"),Me=[{value:"present_today",label:"Present Today"},{value:"absent_today",label:"Absent Today"},{value:"late_today",label:"Late Today"},{value:"most_attendance",label:"Most Attendance"},{value:"least_attendance",label:"Least Attendance"},{value:"highest_salary",label:"Highest Salary"},{value:"lowest_salary",label:"Lowest Salary"},{value:"unpaid_salary",label:"Unpaid Salary"},{value:"recent_joiners",label:"Recent Joiners"}],Re=[{value:"sick",label:"Sick Leave"},{value:"annual",label:"Annual Leave"},{value:"personal",label:"Personal Leave"},{value:"other",label:"Other"}],ze=[{value:"cash",label:"Cash"},{value:"bank_transfer",label:"Bank Transfer"},{value:"check",label:"Check"},{value:"digital_payment",label:"Digital Payment"}],[rt,Ve]=v.useState([]);v.useEffect(()=>{Je()},[]);const Je=async()=>{try{if(Qs){const me=await Qs.getAllEmployees(),Z=(Array.isArray(me)?me:me?.data||[]).filter(Xe=>{const nt=typeof Xe.isActive=="string"?parseInt(Xe.isActive,10):Xe.isActive,ut=typeof Xe.isDeleted=="string"?parseInt(Xe.isDeleted,10):Xe.isDeleted,Et=nt===1||nt===!0||nt==="1"||nt==null,Rt=ut===0||ut===!1||ut==="0"||ut==null;return Et&&Rt}).map(Xe=>({id:Xe.id,employeeId:Xe.code||`EMP${Xe.id.toString().padStart(3,"0")}`,name:`${Xe.fname} ${Xe.lname}`,email:Xe.email||"",phone:Xe.phone||"",role:Xe.roll||"Employee",totalDays:0,presentDays:0,lateDays:0,totalHours:0,salary:Xe.salary||0,joiningDate:Xe.created_at||new Date().toISOString().split("T")[0],isPaid:!1,address:Xe.address||"",salaryHistory:[]})),Be=await Promise.all(Z.map(async Xe=>{try{const nt=await Qs.attendanceGetByEmployee(Xe.id),ut=await Qs.salaryPaymentGetByEmployee(Xe.id),Et=Array.isArray(nt)?nt:nt?.data||[],Rt=Et.length,Ht=Et.filter(vs=>vs.status==="present").length,ss=Et.filter(vs=>vs.status==="late").length,Pt=Et.reduce((vs,Nt)=>vs+(Nt.total_hours||0),0),ms=Array.isArray(ut)?ut:ut?.data||[],ys=ms.reduce((vs,Nt)=>vs+(Nt.amount||0),0)>=Xe.salary;return{...Xe,totalDays:Rt,presentDays:Ht,lateDays:ss,totalHours:Pt,isPaid:ys,salaryHistory:ms}}catch(nt){return console.error(`Error loading details for employee ${Xe.id}:`,nt),Xe}}));z(Be),R(Be)}}catch(me){console.error("Error loading employees:",me),z([]),R([])}};v.useEffect(()=>{let me=B.filter(Ie=>Ie.name.toLowerCase().includes(F.toLowerCase())||Ie.email.toLowerCase().includes(F.toLowerCase())||Ie.phone.includes(F)||Ie.role.toLowerCase().includes(F.toLowerCase()));if(d)switch(d){case"highest_salary":me.sort((Ie,te)=>te.salary-Ie.salary);break;case"lowest_salary":me.sort((Ie,te)=>Ie.salary-te.salary);break;case"unpaid_salary":me=me.filter(Ie=>!Ie.isPaid);break;case"recent_joiners":me.sort((Ie,te)=>new Date(te.joiningDate)-new Date(Ie.joiningDate));break;case"most_attendance":me.sort((Ie,te)=>te.presentDays/te.totalDays-Ie.presentDays/Ie.totalDays);break;case"least_attendance":me.sort((Ie,te)=>Ie.presentDays/Ie.totalDays-te.presentDays/te.totalDays);break}R(me),se(1)},[F,B,d]);const We=I*oe,it=We-oe,Qe=q.slice(it,We),At=Math.ceil(q.length/oe),xt=me=>new Date(me).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),Te=me=>{se(me)},Ke=async me=>{Ee(me),he(!0);try{if(Qs){const Ie=await Qs.attendanceGetByEmployee(me.id),te=Array.isArray(Ie)?Ie:Ie?.data||[];te.sort((Z,Be)=>new Date(`${Be.date} ${Be.checkin||"00:00:00"}`)-new Date(`${Z.date} ${Z.checkin||"00:00:00"}`)),Ve(te)}else Ve([])}catch(Ie){console.error("Error loading attendance records:",Ie),Ve([])}},Pe=()=>{he(!1),Ee(null),w("")},qe=async()=>{try{await Je()}catch{}re(!0),J(""),Se(""),Y(["Check In","Check Out"])},ft=()=>{re(!1),J(""),Se("")},ot=async()=>{if(!le||!Ce){ne("Please select both employee and action"),ce("error"),Q(!0);return}const me=B.find(Z=>Z.id.toString()===le),Ie=new Date().toISOString(),te=new Date().toISOString().split("T")[0];try{if(Qs){const Z=await Qs.attendanceCheckTodayStatus(le,te);let Be="present",Xe=null,nt=null;if(Ce==="Check In"){if(Z.success&&Z.data&&!Z.data.checkout){ne("Already checked in. Please Check Out first."),ce("error"),Q(!0);return}Xe=Ie,Be="present"}else if(Ce==="Check Out"){if(!Z.success||!Z.data||Z.data.checkout){ne("No open session to check out"),ce("error"),Q(!0);return}nt=Ie;const ut=await Qs.attendanceUpdate(Z.data.id,{checkout:nt});if(ut?.success&&ut.computedHours!=null){const Et=ut.computedPay!=null?`, Pay: €${Number(ut.computedPay).toLocaleString()}`:"";ne(`Checked out. Hours: ${ut.computedHours}${Et}`),ce("success"),Q(!0)}}if(Ce==="Check In"){const ut={employee_id:parseInt(le),date:te,checkin:Xe,checkout:nt,status:Be,added_by:1};if((await Qs.attendanceCreate(ut)).success){ne(`${Ce} recorded successfully for ${me?.name} at ${new Date(Ie).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})}`),ce("success"),Q(!0),await Je();try{if(_e&&ie&&ie.id===me?.id){const Rt=await Qs.attendanceGetByEmployee(me.id),Ht=Array.isArray(Rt)?Rt:Rt?.data||[];Ht.sort((ss,Pt)=>new Date(`${Pt.date} ${Pt.checkin||"00:00:00"}`)-new Date(`${ss.date} ${ss.checkin||"00:00:00"}`)),Ve(Ht)}}catch{}ft()}else ne("Failed to save attendance record"),ce("error"),Q(!0)}else{ne(`${Ce} recorded successfully for ${me?.name} at ${new Date(Ie).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})}`),ce("success"),Q(!0),await Je();try{if(_e&&ie&&ie.id===me?.id){const ut=await Qs.attendanceGetByEmployee(me.id),Et=Array.isArray(ut)?ut:ut?.data||[];Et.sort((Rt,Ht)=>new Date(`${Ht.date} ${Ht.checkin||"00:00:00"}`)-new Date(`${Rt.date} ${Rt.checkin||"00:00:00"}`)),Ve(Et)}}catch{}ft()}}else console.log("Attendance record:",{employeeId:le,employeeName:me?.name,action:Ce,time:Ie,date:te}),ne(`${Ce} recorded successfully for ${me?.name} at ${new Date(Ie).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})}`),ce("success"),Q(!0),ft()}catch(Z){console.error("Error saving attendance:",Z),ne("Error saving attendance record"),ce("error"),Q(!0)}},pt=me=>{X(me),V(!0)},ke=me=>{me.relatedTarget&&me.relatedTarget.closest(".hg-theme-default")||setTimeout(()=>{V(!1),X("")},300)},st=(me,Ie)=>{(!H||ee!==Ie)&&pt(Ie)},gt=(me,Ie)=>{Ie==="chooseFirst"?x(me):Ie==="paySalary"?w(me):Ie==="searchTerm"?T(me):Ie==="paymentNote"&&L(me)},kt=()=>{V(!1),X("")},Mt=(me,Ie)=>(me/Ie*100).toFixed(1),de=(me,Ie,te)=>{const Z=Mt(me,Ie);return Z>=95?{text:"Excellent",color:"bg-green-100 text-green-800"}:Z>=85?{text:"Good",color:"bg-blue-100 text-blue-800"}:Z>=75?{text:"Fair",color:"bg-yellow-100 text-yellow-800"}:{text:"Poor",color:"bg-red-100 text-red-800"}},De=async()=>{if(!p||parseFloat(p)<=0){ne("Please enter a valid salary amount"),ce("error"),Q(!0);return}try{if(Qs){const me={employee_id:ie.id,payment_date:new Date().toISOString().split("T")[0],amount:parseFloat(p),payment_method:N,payment_note:D||`Salary payment for ${ie?.name}`,paid_by:1};if((await Qs.salaryPaymentCreate(me)).success){await Je();const te=B.find(Z=>Z.id===ie.id);te&&Ee(te);try{const Z=await Qs.attendanceGetByEmployee(ie.id),Be=Array.isArray(Z)?Z:Z?.data||[];Be.sort((Xe,nt)=>new Date(`${nt.date} ${nt.checkin||"00:00:00"}`)-new Date(`${Xe.date} ${Xe.checkin||"00:00:00"}`)),Ve(Be)}catch(Z){console.error("Error refreshing attendance records:",Z)}ne(`Salary payment of €${parseFloat(p).toLocaleString()} saved successfully for ${ie?.name}!`),ce("success"),Q(!0),w(""),_("cash"),L("")}else ne("Failed to save salary payment"),ce("error"),Q(!0)}else{console.log("Paying salary:",p,"for employee:",ie?.name);const me={id:Date.now(),date:new Date().toISOString().split("T")[0],amount:parseFloat(p),method:N,note:D||`Salary payment for ${ie?.name}`,paid_by:1};ie&&(z(Ie=>Ie.map(te=>te.id===ie.id?{...te,isPaid:!0,salaryHistory:[...te.salaryHistory||[],me]}:te)),Ee(Ie=>Ie?{...Ie,isPaid:!0,salaryHistory:[...Ie.salaryHistory||[],me]}:null)),ne(`Salary payment of €${parseFloat(p).toLocaleString()} saved successfully for ${ie?.name}!`),ce("success"),Q(!0),w(""),_("cash"),L("")}}catch(me){console.error("Error saving salary payment:",me),ne("Error saving salary payment"),ce("error"),Q(!0)}},Le=async me=>{Ee(me);try{if(Qs){const Ie=await Qs.salaryPaymentGetByEmployee(me.id);if(Ie.success){const te=Ie.data.map(Z=>({id:Z.id,date:Z.payment_date,amount:Z.amount,method:Z.payment_method,note:Z.payment_note}));Ne(te)}else Ne([])}else Ne(me.salaryHistory||[])}catch(Ie){console.error("Error loading salary history:",Ie),Ne(me.salaryHistory||[])}ye(!0)},ve=async()=>{try{await Je()}catch{}A(!0),f(""),S(""),C(""),U("")},Ze=async()=>{if(!P||!g||!k){ne("Please fill in all required fields"),ce("error"),Q(!0);return}const me=new Date(g),Ie=new Date(k);if(me>Ie){ne("Start date cannot be after end date"),ce("error"),Q(!0);return}const te=Math.ceil((Ie-me)/(1e3*60*60*24))+1;try{if(Qs){const Z=await Qs.leaveRequestCheckOverlapping(ie.id,g,k);if(Z.success&&Z.data.hasOverlapping){ne("Employee has overlapping leave requests for these dates"),ce("error"),Q(!0);return}const Be={employee_id:ie.id,leave_type:P,start_date:g,end_date:k,total_days:te,reason:O};(await Qs.leaveRequestCreate(Be)).success?(ne(`Leave request submitted successfully for ${te} days`),ce("success"),Q(!0),mt()):(ne("Failed to submit leave request"),ce("error"),Q(!0))}else console.log("Leave request:",{employeeId:ie?.id,leaveType:P,startDate:g,endDate:k,totalDays:te,reason:O}),ne(`Leave request submitted successfully for ${te} days`),ce("success"),Q(!0),mt()}catch(Z){console.error("Error submitting leave request:",Z),ne("Error submitting leave request"),ce("error"),Q(!0)}},mt=()=>{A(!1),f(""),S(""),C(""),U("")},dt=me=>me.salaryHistory?me.salaryHistory.reduce((Ie,te)=>Ie+te.amount,0):0,jt=me=>!rt||rt.length===0?0:rt.reduce((Ie,te)=>Ie+(te.earned_amount||0),0),wt=me=>{const Ie=jt(),te=dt(me);return Math.max(0,Ie-te)},Tt=(me,Ie)=>Math.max(0,me-Ie);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center gap-3 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sn,{size:24,className:"text-primary"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Employee Attendance"})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:s,onChange:me=>t(me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:r,onChange:me=>n(me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:d,onChange:me=>m(me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm appearance-none cursor-pointer",children:[e.jsx("option",{value:"",children:"Select Attendance Sorting Order"}),Me.map(me=>e.jsx("option",{value:me.value,children:me.label},me.value))]}),e.jsx(hs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:qe,className:`px-6 py-3 bg-primary text-white font-medium rounded-lg cursor-pointer\r
            hover:translate-y-[2px] \r
             transition-all flex items-center gap-2`,children:"Employee Attendance"}),e.jsx("button",{onClick:ve,className:`px-6 py-3 bg-blue-600 text-white font-medium rounded-lg cursor-pointer\r
            hover:translate-y-[2px] \r
             transition-all flex items-center gap-2`,children:"Leave Request"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Employee Attendance List"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",q.length," employees)"]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Ex: Search by name or role",value:F,onChange:me=>T(me.target.value),onFocus:()=>pt("searchTerm"),onBlur:ke,onClick:()=>st(null,"searchTerm"),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm w-64"}),e.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"SI"}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Employee ID",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Employee Name",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Contact Information",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Role",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Hours",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Salary",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Actions"})]})}),e.jsx("tbody",{children:Qe.map((me,Ie)=>(Mt(me.presentDays,me.totalDays),de(me.presentDays,me.totalDays,me.lateDays),e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:it+Ie+1}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:me.employeeId}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:me.name})})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-gray-800",children:me.email}),e.jsx("div",{className:"text-gray-500",children:me.phone})]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:me.role}),e.jsxs("td",{className:"py-3 px-4 text-sm text-gray-600",children:[me.totalHours,"h"]}),e.jsxs("td",{className:"py-3 px-4 text-sm text-gray-600",children:["€",me.salary.toLocaleString()]}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>Ke(me),className:"p-1 text-gray-400 hover:text-primary transition-colors",children:e.jsx(vn,{size:16})})})]},me.id)))})]})}),At>1&&e.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",it+1," to ",Math.min(We,q.length)," of ",q.length," employees"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Te(I-1),disabled:I===1,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Eu,{size:16})}),Array.from({length:At},(me,Ie)=>Ie+1).map(me=>e.jsx("button",{onClick:()=>Te(me),className:`px-3 py-2 text-sm rounded-lg transition-colors ${I===me?"bg-primary text-white":"border border-gray-300 hover:bg-gray-50"}`,children:me},me)),e.jsx("button",{onClick:()=>Te(I+1),disabled:I===At,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Hb,{size:16})})]})]})]}),_e&&ie&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Employee Attendance Details"}),e.jsx("button",{onClick:Pe,className:"text-gray-400 hover:text-gray-600",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 p-6 border-r border-gray-200 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Attendance Records"}),e.jsxs("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full",children:[ie.totalDays," days"]})]})}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"sticky top-0 bg-white",children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Date",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Salary",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Check In",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Check Out",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Hours Worked",e.jsx(hs,{className:"inline ml-1",size:12})]})]})}),e.jsx("tbody",{children:rt.map(me=>{const Ie=me.checkin?new Date(me.checkin).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}):"-",te=me.checkout?new Date(me.checkout).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}):"-",Z=me.total_hours!=null?me.total_hours:me.checkin&&me.checkout?((new Date(me.checkout)-new Date(me.checkin))/(1e3*60*60)).toFixed(2):0;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:xt(me.date)}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:me.earned_amount?`€${Number(me.earned_amount).toFixed(2)}`:"-"}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:Ie}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:te}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:Z>0?`${Z}h`:"-"})]},me.id)})})]})})]}),e.jsxs("div",{className:"w-80 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(sn,{size:20,className:"text-primary"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:ie.name})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center border-2 border-gray-200",children:e.jsx("span",{className:"text-gray-400 text-2xl",children:"👤"})})}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xb,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-800",children:ie.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dg,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-800",children:ie.phone})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sn,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-800",children:ie.role})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:"Salary Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Amount:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:["€",jt().toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Paid Amount:"}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["€",dt(ie).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pending Amount:"}),e.jsxs("span",{className:"text-sm font-medium text-red-600",children:["€",wt(ie).toLocaleString()]})]}),Tt(parseFloat(p),wt(ie))>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Advance Amount:"}),e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:["€",Tt(parseFloat(p),wt(ie)).toLocaleString()]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>Le(ie),className:"w-full px-4 py-2 bg-blue-50 text-blue-700 font-medium rounded-lg border border-blue-200 hover:bg-blue-100 transition-colors",children:"View Salary History"})}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Pay Salary Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:p,onChange:me=>w(me.target.value),onFocus:()=>pt("paySalary"),onBlur:ke,onClick:()=>st(null,"paySalary"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"0.00",min:"0",step:"0.01",required:!0}),p&&parseFloat(p)>0&&e.jsx("div",{className:"mt-2 text-sm",children:parseFloat(p)>wt(ie)?e.jsxs("div",{className:"text-blue-600 bg-blue-50 p-2 rounded border border-blue-200",children:[e.jsx("strong",{children:"Advance Payment:"})," This payment exceeds the pending amount by €",Tt(parseFloat(p),wt(ie)).toFixed(2)]}):e.jsxs("div",{className:"text-green-600 bg-green-50 p-2 rounded border border-green-200",children:[e.jsx("strong",{children:"Regular Payment:"})," This payment covers €",parseFloat(p).toFixed(2)," of the €",wt(ie).toFixed(2)," pending amount"]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),e.jsx("select",{value:N,onChange:me=>_(me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",children:ze.map(me=>e.jsx("option",{value:me.value,children:me.label},me.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Note"}),e.jsx("textarea",{value:D,onChange:me=>L(me.target.value),onFocus:()=>pt("paymentNote"),onBlur:ke,onClick:()=>st(null,"paymentNote"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Optional note about this payment",rows:"2"})]}),e.jsx("button",{onClick:De,disabled:!p||parseFloat(p)<=0,className:`w-full px-4 py-2 bg-primary text-white font-medium rounded-lg \r
                      shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
                      active:shadow-none active:translate-y-[4px] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none disabled:translate-y-0`,children:"Save Payment"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:"Contact info"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Pc,{size:16,className:"text-gray-400 mt-0.5"}),e.jsxs("span",{className:"text-sm text-gray-800",children:["Joined: ",xt(ie.joiningDate)]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($s,{size:16,className:"text-gray-400 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-800",children:ie.address||"No address available"})]})]})]})]})]})]})}),Ae&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Employee Attendance"}),e.jsx("button",{onClick:ft,className:"text-gray-400 hover:text-gray-600",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Employee ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:le,onChange:async me=>{const Ie=me.target.value;J(Ie);try{if(Qs&&Ie){const te=new Date().toISOString().split("T")[0],Z=await Qs.attendanceCheckTodayStatus(Ie,te);Z?.success&&Z.data?!!Z.data.checkout?(Y(["Check In"]),Se("Check In")):(Y(["Check Out"]),Se("Check Out")):(Y(["Check In"]),Se("Check In"))}else Y(["Check In","Check Out"]),Se("")}catch(te){console.error("Error checking today status:",te),Y(["Check In","Check Out"]),Se("")}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm appearance-none cursor-pointer",required:!0,children:[e.jsx("option",{value:"",children:"Choose an employee"}),B.map(me=>e.jsxs("option",{value:me.id,children:[me.employeeId," - ",me.name," (",me.role,")"]},me.id))]}),e.jsx(hs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Action ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:Ce,onChange:me=>Se(me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm appearance-none cursor-pointer",required:!0,children:[e.jsx("option",{value:"",children:"Choose action"}),He.map(me=>e.jsx("option",{value:me,children:me},me))]}),e.jsx(hs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:ft,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ot,disabled:!le||!Ce,className:`flex-1 px-4 py-2 bg-primary text-white font-medium rounded-lg \r
                  shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
                  active:shadow-none active:translate-y-[4px] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none disabled:translate-y-0`,children:"Save"})]})]})]})}),be&&ie&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["Salary History - ",ie.name]}),e.jsx("button",{onClick:()=>ye(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:["€",jt().toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Amount"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["€",dt(ie).toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Paid Amount"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["€",wt(ie).toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending Amount"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["€",Tt(dt(ie),wt(ie)).toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Advance Amount"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Date"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Method"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Type"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Note"})]})}),e.jsx("tbody",{children:ae.length>0?ae.map(me=>{const Ie=me.amount>wt(ie)?"Advance":"Regular",te=Ie==="Advance"?"text-blue-600":"text-green-600";return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:xt(me.date)}),e.jsxs("td",{className:"py-3 px-4 text-sm font-medium text-green-600",children:["€",me.amount.toLocaleString()]}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.jsx("span",{className:"capitalize",children:me.method.replace("_"," ")})}),e.jsx("td",{className:"py-3 px-4 text-sm font-medium",children:e.jsx("span",{className:`${te} bg-opacity-10 px-2 py-1 rounded-full text-xs`,children:Ie})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:me.note||"-"})]},me.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"py-8 text-center text-gray-500",children:"No salary payments found"})})})]})})]})]})}),ge&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Leave Request"}),e.jsx("button",{onClick:mt,className:"text-gray-400 hover:text-gray-600",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Employee ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:ie?.id||"",onChange:me=>{const Ie=B.find(te=>te.id.toString()===me.target.value);Ee(Ie)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm appearance-none cursor-pointer",required:!0,children:[e.jsx("option",{value:"",children:"Choose an employee"}),B.map(me=>e.jsxs("option",{value:me.id,children:[me.employeeId," - ",me.name," (",me.role,")"]},me.id))]}),e.jsx(hs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Leave Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:P,onChange:me=>f(me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm appearance-none cursor-pointer",required:!0,children:[e.jsx("option",{value:"",children:"Choose leave type"}),Re.map(me=>e.jsx("option",{value:me.value,children:me.label},me.value))]}),e.jsx(hs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:g,onChange:me=>S(me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["End Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:k,onChange:me=>C(me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason"}),e.jsx("textarea",{value:O,onChange:me=>U(me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Reason for leave request",rows:"3"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:mt,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ze,disabled:!ie||!P||!g||!k,className:`flex-1 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg \r
                  shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
                  active:shadow-none active:translate-y-[4px] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none disabled:translate-y-0`,children:"Submit Request"})]})]})]})}),e.jsx(Wa,{isVisible:H,onClose:kt,activeInput:ee,onInputChange:gt,onInputBlur:ke,inputValue:ee==="paySalary"?p||"":ee==="searchTerm"?F||"":ee==="paymentNote"?D||"":h||"",placeholder:"Type here..."}),e.jsx(Ni,{message:ue,isVisible:M,onClose:()=>Q(!1),type:fe,duration:2e3})]})},n6=()=>{const[s,t]=v.useState("employee");return e.jsxs("div",{className:"px-4 py-2",children:[e.jsx("div",{className:"flex items-center justify-end mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>t("employee"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="employee"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(sn,{size:16}),"Employee Management"]}),e.jsxs("button",{onClick:()=>t("attendance"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="attendance"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Pc,{size:16}),"Attendance"]})]})}),e.jsxs("div",{className:"mt-6",children:[s==="employee"&&e.jsx(a6,{}),s==="attendance"&&e.jsx(r6,{})]})]})},i6=()=>{const[s,t]=v.useState([]),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState({name:"",type:"Indoor"}),[h,x]=v.useState(!1),[p,w]=v.useState(null),[N,_]=v.useState(null),[D,L]=v.useState([]),[B,z]=v.useState(!1),{showKeyboard:q,activeInput:R,keyboardInput:F,handleInputBlur:T,handleAnyInputFocus:I,handleAnyInputClick:se,resetKeyboardInputs:oe,hideKeyboard:_e}=Wn(["name","type"]),he=async()=>{try{const ae=await window.myAPI?.floorGetAll();ae&&ae.success?t(ae.data||[]):(console.error("Failed to fetch floors:",ae?.message||"Unknown error"),t([]))}catch(ae){console.error("Error fetching floors:",ae),t([])}},ie=async ae=>{try{const Ne=await window.myAPI?.tableGetByFloor(ae);Ne&&Ne.success?L(Ne.data||[]):(console.error("Failed to fetch floor tables:",Ne?.message||"Unknown error"),L([]))}catch(Ne){console.error("Error fetching floor tables:",Ne),L([])}};v.useEffect(()=>{he()},[]);const Ee=async ae=>{_(ae),await ie(ae.id),z(!0)},Ae=()=>{z(!1),_(null),L([])},re=ae=>{c(ae),m({name:ae.name,type:ae.type}),n(!0),oe()},le=()=>{c(null),m({name:"",type:"Indoor"}),n(!0),oe()},J=ae=>{const{name:Ne,value:ge}=ae.target;m(A=>({...A,[Ne]:ge}))},Ce=(ae,Ne)=>{Ne==="name"?m(ge=>({...ge,name:ae})):Ne==="type"&&m(ge=>({...ge,type:ae}))},Se=async ae=>{ae.preventDefault();try{if(o){const Ne=await window.myAPI?.floorUpdate(o.id,{name:d.name,type:d.type});if(!Ne||!Ne.success)throw new Error(Ne?.message||"Failed to update floor")}else{const Ne=await window.myAPI?.floorCreate({name:d.name,type:d.type,addedby:1});if(!Ne||!Ne.success)throw new Error(Ne?.message||"Failed to create floor")}he(),n(!1),oe()}catch(Ne){console.error("Error saving floor:",Ne),alert(`Error: ${Ne.message}`)}},He=ae=>{w(ae),x(!0)},Y=async ae=>{try{const Ne=await window.myAPI?.floorUpdate(ae,{isdeleted:1});if(!Ne||!Ne.success)throw new Error(Ne?.message||"Failed to delete floor");he(),n(!1),x(!1),w(null)}catch(Ne){console.error("Error deleting floor:",Ne),alert(`Error: ${Ne.message}`)}},be=()=>{const ae=ge=>ge<=2?"w-16 h-16":ge<=4?"w-20 h-20":ge<=6?"w-24 h-24":"w-28 h-28",Ne=ge=>{switch(ge){case"Occupied":return"bg-red-500";case"Reserved":return"bg-yellow-500";default:return"bg-green-500"}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:Ae,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(zc,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:N?.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[N?.type," Floor"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Total Tables: ",e.jsx("span",{className:"font-semibold text-primary",children:D.length})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Total Seats: ",e.jsx("span",{className:"font-semibold text-primary",children:D.reduce((ge,A)=>ge+(A.seat_capacity||0),0)})]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-6 min-h-[400px]",children:D.length>0?e.jsx("div",{className:"grid grid-cols-6 gap-6",children:D.map(ge=>e.jsxs("div",{className:`${ae(ge.seat_capacity)} ${Ne(ge.status||"Free")} rounded-lg flex flex-col items-center justify-center text-white font-bold shadow-lg hover:shadow-xl transition-all duration-200 cursor-pointer relative group`,title:`Table ${ge.table_no} - ${ge.seat_capacity} seats - ${ge.status||"Free"}`,children:[e.jsxs("span",{className:"text-xs font-bold",children:["T",ge.table_no]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(sn,{size:10}),e.jsx("span",{className:"text-xs",children:ge.seat_capacity})]}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-white text-xs px-1 py-0.5 rounded-full text-gray-700 font-medium shadow-sm",children:ge.status||"Free"}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-10",children:["Table ",ge.table_no," - ",ge.seat_capacity," seats"]})]},ge.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center mb-4",children:e.jsx(sn,{size:24})}),e.jsx("p",{className:"text-lg font-medium",children:"No tables found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Add tables to this floor to see them here"})]})}),e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Available"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Occupied"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Reserved"})]})]})]})},ye=()=>e.jsxs("div",{className:"overflow-x-auto bg-white py-5 px-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Floor List"}),e.jsxs("button",{onClick:le,className:"px-4 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add New Floor"]})]}),e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Floor Name"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Total Tables"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:s.map((ae,Ne)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-25 transition-colors ${Ne%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:Ne+1})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>Ee(ae),className:"text-sm font-medium text-gray-800 hover:text-primary transition-colors text-left",children:ae.name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ae.type})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ae.table_count||0})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>re(ae),className:"text-primary hover:text-primaryDark cursor-pointer transition-colors",children:e.jsx(ia,{size:16})}),e.jsx("button",{onClick:()=>He(ae),className:"text-red-500 hover:text-red-700 cursor-pointer transition-colors",children:e.jsx(za,{size:16})})]})})]},ae.id))})]})]});return e.jsxs(e.Fragment,{children:[B?e.jsx(be,{}):e.jsx(ye,{}),r&&e.jsx("div",{className:"fixed inset-0 bg-[#0000008e] bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:o?"Edit Floor":"Add New Floor"}),e.jsx("button",{onClick:()=>{n(!1),oe()},className:"text-gray-500 hover:text-gray-700",children:e.jsx(St,{size:24})})]}),e.jsxs("form",{onSubmit:Se,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Floor Name*"}),e.jsx("input",{type:"text",name:"name",placeholder:"e.g., Ground Floor, Rooftop",value:d.name,onChange:ae=>{const Ne=ae.target.value;m(ge=>({...ge,name:Ne}))},onFocus:ae=>I(ae,"name",d.name),onClick:ae=>se(ae,"name",d.name),onBlur:T,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Floor Type*"}),e.jsxs("select",{name:"type",value:d.type,onChange:J,onFocus:ae=>I(ae,"type",d.type),onClick:ae=>se(ae,"type",d.type),onBlur:T,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",required:!0,children:[e.jsx("option",{value:"Indoor",children:"Indoor"}),e.jsx("option",{value:"Outdoor",children:"Outdoor"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{n(!1),oe()},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primaryLight hover:bg-primaryDark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:o?"Update Floor":"Add Floor"})]})]})]})})}),e.jsx(Wa,{isVisible:q,onClose:_e,activeInput:R,onInputChange:Ce,onInputBlur:T,inputValue:F}),h&&p&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Floor"}),e.jsx("button",{onClick:()=>{x(!1),w(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 mb-4",children:"Do you want to delete this floor?"})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{x(!1),w(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>Y(p.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})},o6=()=>{const[s,t]=v.useState([]),[r,n]=v.useState([]),[o,c]=v.useState(!1),[d,m]=v.useState(null),[h,x]=v.useState({table_no:"",floor_id:"",seat_capacity:4}),[p,w]=v.useState(!1),[N,_]=v.useState(null),[D,L]=v.useState(""),[B,z]=v.useState("list"),{showKeyboard:q,activeInput:R,keyboardInput:F,handleInputBlur:T,handleAnyInputFocus:I,handleAnyInputClick:se,resetKeyboardInputs:oe,hideKeyboard:_e}=Wn(["table_no","floor_id","seat_capacity"]),he=async()=>{try{const ae=await window.myAPI?.tableGetAll();ae&&ae.success?t(ae.data||[]):(console.error("Failed to fetch tables:",ae?.message||"Unknown error"),t([]))}catch(ae){console.error("Error fetching tables:",ae),t([])}},ie=async()=>{try{const ae=await window.myAPI?.floorGetAll();ae&&ae.success?n(ae.data||[]):(console.error("Failed to fetch floors:",ae?.message||"Unknown error"),n([]))}catch(ae){console.error("Error fetching floors:",ae),n([])}};v.useEffect(()=>{he(),ie()},[]);const Ee=ae=>{m(ae),x({table_no:ae.table_no,floor_id:ae.floor_id,seat_capacity:ae.seat_capacity||4}),c(!0),oe()},Ae=()=>{m(null),x({table_no:"",floor_id:r.length>0?r[0].id:"",seat_capacity:4}),c(!0),oe()},re=ae=>{const{name:Ne,value:ge}=ae.target;x(A=>({...A,[Ne]:ge}))},le=(ae,Ne)=>{Ne==="table_no"?x(ge=>({...ge,table_no:ae})):Ne==="seat_capacity"?x(ge=>({...ge,seat_capacity:parseInt(ae)||4})):Ne==="floor_id"&&x(ge=>({...ge,floor_id:ae}))},J=async ae=>{ae.preventDefault();try{if(d){const Ne=await window.myAPI?.tableUpdate(d.id,{table_no:h.table_no,floor_id:parseInt(h.floor_id),seat_capacity:parseInt(h.seat_capacity)});if(!Ne||!Ne.success)throw new Error(Ne?.message||"Failed to update table")}else{const Ne=await window.myAPI?.tableCreate({table_no:h.table_no,floor_id:parseInt(h.floor_id),seat_capacity:parseInt(h.seat_capacity),addedby:1});if(!Ne||!Ne.success)throw new Error(Ne?.message||"Failed to create table")}he(),c(!1),oe()}catch(Ne){console.error("Error saving table:",Ne),alert(`Error: ${Ne.message}`)}},Ce=ae=>{_(ae),w(!0)},Se=async ae=>{try{const Ne=await window.myAPI?.tableUpdate(ae,{isdeleted:1});if(!Ne||!Ne.success)throw new Error(Ne?.message||"Failed to delete table");he(),c(!1),w(!1),_(null)}catch(Ne){console.error("Error deleting table:",Ne),alert(`Error: ${Ne.message}`)}},He=ae=>{switch(ae){case"Free":return"text-green-600 bg-green-100";case"Occupied":return"text-red-600 bg-red-100";case"Reserved":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},Y=D?s.filter(ae=>ae.floor_id==D):s,be=()=>{const ae=A=>A<=2?"w-16 h-16":A<=4?"w-20 h-20":A<=6?"w-24 h-24":"w-28 h-28",Ne=A=>{switch(A){case"Occupied":return"bg-red-500";case"Reserved":return"bg-yellow-500";default:return"bg-green-500"}},ge=r.find(A=>A.id==D);return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:ge?`${ge.name} - Tables`:"All Tables"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Y.length," tables, ",Y.reduce((A,P)=>A+(P.seat_capacity||0),0)," total seats"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:D,onChange:A=>L(A.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primaryLight",children:[e.jsx("option",{value:"",children:"All Floors"}),r.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]}),e.jsx("button",{onClick:()=>z("list"),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"List View"})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-6 min-h-[400px]",children:Y.length>0?e.jsx("div",{className:"grid grid-cols-6 gap-6",children:Y.map(A=>e.jsxs("div",{className:`${ae(A.seat_capacity)} ${Ne(A.status||"Free")} rounded-lg flex flex-col items-center justify-center text-white font-bold shadow-lg hover:shadow-xl transition-all duration-200 cursor-pointer relative group`,title:`Table ${A.table_no} - ${A.seat_capacity} seats - ${A.status||"Free"}`,children:[e.jsxs("span",{className:"text-xs font-bold",children:["T",A.table_no]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(sn,{size:10}),e.jsx("span",{className:"text-xs",children:A.seat_capacity})]}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-white text-xs px-1 py-0.5 rounded-full text-gray-700 font-medium shadow-sm",children:A.status||"Free"}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-10",children:["Table ",A.table_no," - ",A.seat_capacity," seats"]})]},A.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center mb-4",children:e.jsx(sn,{size:24})}),e.jsx("p",{className:"text-lg font-medium",children:"No tables found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:D?"No tables on this floor":"Add tables to see them here"})]})}),e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Available"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Occupied"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Reserved"})]})]})]})},ye=()=>e.jsxs("div",{className:"overflow-x-auto bg-white py-5 px-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Table List"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:D,onChange:ae=>L(ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primaryLight",children:[e.jsx("option",{value:"",children:"All Floors"}),r.map(ae=>e.jsx("option",{value:ae.id,children:ae.name},ae.id))]}),e.jsxs("button",{onClick:()=>z("visual"),className:"px-3 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors flex items-center gap-2",children:[e.jsx(BN,{size:16}),"Visual View"]}),e.jsxs("button",{onClick:Ae,className:"px-4 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors flex items-center gap-2",children:[e.jsx(Ls,{size:16}),"Add New Table"]})]})]}),e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Table ID"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Table Name"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Floor"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Seats"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:Y.map((ae,Ne)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-25 transition-colors ${Ne%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:ae.id})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:ae.table_no})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ae.floor_name||"N/A"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ae.seat_capacity||4})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${He(ae.status)}`,children:ae.status||"Free"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Ee(ae),className:"text-primary hover:text-primaryDark cursor-pointer transition-colors",children:e.jsx(ia,{size:16})}),e.jsx("button",{onClick:()=>Ce(ae),className:"text-red-500 hover:text-red-700 cursor-pointer transition-colors",children:e.jsx(za,{size:16})})]})})]},ae.id))})]})]});return e.jsxs(e.Fragment,{children:[B==="visual"?e.jsx(be,{}):e.jsx(ye,{}),o&&e.jsx("div",{className:"fixed inset-0 bg-[#0000008e] bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:d?"Edit Table":"Add New Table"}),e.jsx("button",{onClick:()=>{c(!1),oe()},className:"text-gray-500 hover:text-gray-700",children:e.jsx(St,{size:24})})]}),e.jsxs("form",{onSubmit:J,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Table Name / Number*"}),e.jsx("input",{type:"text",name:"table_no",placeholder:"e.g., T1, Booth 3",value:h.table_no,onChange:ae=>{const Ne=ae.target.value;x(ge=>({...ge,table_no:Ne}))},onFocus:ae=>I(ae,"table_no",h.table_no),onClick:ae=>se(ae,"table_no",h.table_no),onBlur:T,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Floor*"}),e.jsxs("select",{name:"floor_id",value:h.floor_id,onChange:re,onFocus:ae=>I(ae,"floor_id",h.floor_id),onClick:ae=>se(ae,"floor_id",h.floor_id),onBlur:T,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",required:!0,children:[e.jsx("option",{value:"",children:"Select a floor"}),r.map(ae=>e.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seats Capacity*"}),e.jsx("input",{type:"number",name:"seat_capacity",placeholder:"e.g., 4",value:h.seat_capacity,onChange:ae=>{const Ne=ae.target.value;x(ge=>({...ge,seat_capacity:parseInt(Ne)||4}))},onFocus:ae=>I(ae,"seat_capacity",h.seat_capacity),onClick:ae=>se(ae,"seat_capacity",h.seat_capacity),onBlur:T,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primaryLight",min:"1",max:"20",required:!0})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{c(!1),oe()},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primaryLight hover:bg-primaryDark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primaryLight",children:d?"Update Table":"Add Table"})]})]})]})})}),e.jsx(Wa,{isVisible:q,onClose:_e,activeInput:R,onInputChange:le,onInputBlur:T,inputValue:F}),p&&N&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Table"}),e.jsx("button",{onClick:()=>{w(!1),_(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 mb-4",children:"Do you want to delete this table?"})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{w(!1),_(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>Se(N.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})},l6=()=>{const[s,t]=v.useState("table");return e.jsxs("div",{className:"px-4 py-2",children:[e.jsx("div",{className:"flex items-center justify-end mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>t("floor"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="floor"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(cg,{size:16}),"Floor Management"]}),e.jsxs("button",{onClick:()=>t("table"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="table"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Yb,{size:16}),"Table Management"]})]})}),e.jsxs("div",{className:"mt-6",children:[s==="floor"&&e.jsx(i6,{}),s==="table"&&e.jsx(o6,{})]})]})},c6=()=>{const[s,t]=v.useState([]),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState(""),[h,x]=v.useState("all"),[p,w]=v.useState(!1),[N,_]=v.useState(!1),[D,L]=v.useState(null),[B,z]=v.useState(!1),[q,R]=v.useState("");v.useEffect(()=>{F()},[]);const F=async()=>{try{w(!0);const f=await window.myAPI.getAllVouchers();if(f.success){const g=f.data.map(S=>({id:S.id,title:S.title||"",name:S.name||"",phoneNo:S.phone_no||"",email:S.email||"",startDate:S.start_date?S.start_date.split("T")[0]:"",endDate:S.end_date?S.end_date.split("T")[0]:"",amount:S.amount||0,voucherCode:S.voucher_code||"",event:S.event||"",status:S.status===1?"active":"inactive"}));t(g)}else console.error("Failed to load voucher:",f.message)}catch(f){console.error("Error loading voucher:",f)}finally{w(!1)}},[T,I]=v.useState({title:"",name:"",phoneNo:"",email:"",startDate:"",endDate:"",amount:"",voucherCode:"",event:""}),[se,oe]=v.useState({}),[_e,he]=v.useState(""),ie=()=>{const f=Date.now().toString(36),g=Math.random().toString(36).substring(2,8);return`VOUCHER-${f}-${g}`.toUpperCase()},Ee=f=>{R(f),z(!0)},Ae=f=>{f.relatedTarget&&f.relatedTarget.closest(".hg-theme-default")||f.target&&f.target.closest(".hg-theme-default")||setTimeout(()=>{z(!1),R("")},300)},re=(f,g)=>{Ee(g)},le=(f,g)=>{(!B||q!==g)&&Ee(g)},J=(f,g,S)=>{if(g==="phoneNo"){const k=f.replace(/\D/g,"");if(k.length>10||k.length>0&&k.length>=2&&!k.startsWith("08"))return;I(C=>({...C,[g]:k})),_e&&he("");return}if(g==="searchTerm"?m(f):g&&I(k=>({...k,[g]:f})),S==="enter"){const k=["title","name","phoneNo","email","startDate","endDate","amount","event"],C=k.indexOf(g);if(C<k.length-1){const O=k[C+1],U=document.querySelector(`[name="${O}"]`);U&&U.focus()}}},Ce=()=>{z(!1),R("")},Se=f=>{const{name:g,value:S}=f.target;if(g==="phoneNo"){const k=S.replace(/\D/g,"");if(k.length>10||k.length>0&&k.length>=2&&!k.startsWith("08"))return;I(C=>({...C,[g]:k})),_e&&he("");return}I(k=>({...k,[g]:S})),se[g]&&oe(k=>({...k,[g]:""}))},He=()=>{const f={};return!T.phoneNo||T.phoneNo.length!==10||!T.phoneNo.startsWith("08")?(he("Phone number must be 10 digits and start with 08"),!1):(T.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T.email)&&(f.email="Please enter a valid email address"),T.startDate&&T.endDate&&T.startDate>T.endDate&&(f.endDate="End date must be after start date"),T.amount&&parseFloat(T.amount)<=0&&(f.amount="Amount must be greater than 0"),oe(f),Object.keys(f).length===0)},Y=async f=>{if(f.preventDefault(),!!He())try{if(w(!0),o){const g={title:T.title,name:T.name,phone_no:T.phoneNo,email:T.email||null,start_date:T.startDate,end_date:T.endDate,amount:parseFloat(T.amount),voucher_code:T.voucherCode,event:T.event||null},S=await window.myAPI.updateVoucher(o.id,g);S.success?(await F(),n(!1),c(null)):console.error("Failed to update voucher:",S.message)}else{const g={title:T.title,name:T.name,phone_no:T.phoneNo,email:T.email||null,start_date:T.startDate,end_date:T.endDate,amount:parseFloat(T.amount),voucher_code:T.voucherCode,event:T.event||null,added_by:1},S=await window.myAPI.createVoucher(g);S.success?(await F(),n(!1)):console.error("Failed to create voucher:",S.message)}}catch(g){console.error("Error saving voucher:",g)}finally{w(!1)}},be=f=>{c(f),I({title:f.title||"",name:f.name,phoneNo:f.phoneNo,email:f.email,startDate:f.startDate,endDate:f.endDate,amount:f.amount.toString(),voucherCode:f.voucherCode,event:f.event||""}),oe({}),he(""),R(""),z(!1),n(!0)},ye=f=>{L(f),_(!0)},ae=async f=>{try{w(!0);const g=await window.myAPI.deleteVoucher(f);g.success?(await F(),_(!1),L(null)):(console.error("Failed to delete voucher:",g.message),alert("Error deleting voucher: "+g.message))}catch(g){console.error("Error deleting voucher:",g),alert("Error deleting voucher")}finally{w(!1)}},Ne=()=>{const f=ie();I({title:"",name:"",phoneNo:"",email:"",startDate:"",endDate:"",amount:"",voucherCode:f,event:""}),oe({}),he(""),R(""),z(!1)},ge=()=>{c(null);const f=ie();I({title:"",name:"",phoneNo:"",email:"",startDate:"",endDate:"",amount:"",voucherCode:f,event:""}),oe({}),he(""),R(""),z(!1),n(!0)},A=async f=>{try{const S=s.find(C=>C.id===f).status==="active"?0:1,k=await window.myAPI.updateVoucher(f,{status:S});k.success?await F():console.error("Failed to toggle status:",k.message)}catch(g){console.error("Error toggling status:",g)}},P=()=>{let f=s;return d&&(f=f.filter(g=>g.voucherCode.toLowerCase().includes(d.toLowerCase())||g.title.toLowerCase().includes(d.toLowerCase())||g.name.toLowerCase().includes(d.toLowerCase())||g.phoneNo.toLowerCase().includes(d.toLowerCase()))),h!=="all"&&(f=f.filter(g=>g.status===h)),f};return e.jsxs("div",{className:"space-y-6",children:[r&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-primary",children:o?"Edit Voucher":"Add New Voucher"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>{n(!1),c(null),Ne(),z(!1)},className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100",children:e.jsx(St,{size:20})})})]}),e.jsxs("form",{onSubmit:Y,children:[e.jsxs("div",{className:"grid grid-cols-3 gap-5 mb-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"title",value:T.title,onChange:Se,onFocus:f=>re(f,"title"),onClick:f=>le(f,"title"),onBlur:Ae,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${se.title?"border-red-500":"border-gray-300"}`,placeholder:"Enter voucher title"}),se.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:se.title})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:T.name,onChange:Se,onFocus:f=>re(f,"name"),onClick:f=>le(f,"name"),onBlur:Ae,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${se.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter name"}),se.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:se.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})," ",e.jsx("span",{className:"text-xs text-gray-500",children:"(Must start with 08 and be 10 digits)"})]}),e.jsx("input",{type:"text",name:"phoneNo",value:T.phoneNo,onChange:Se,onFocus:f=>re(f,"phoneNo"),onClick:f=>le(f,"phoneNo"),onBlur:Ae,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${_e?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-primary"}`,placeholder:"08xxxxxxxx",maxLength:"10",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:T.phoneNo.length>0&&e.jsxs("span",{className:T.phoneNo.length===10&&T.phoneNo.startsWith("08")?"text-green-600":"text-red-500",children:[T.phoneNo.length,"/10 digits"]})}),_e&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:_e})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-5 mb-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Email (Optional)"}),e.jsx("input",{type:"email",name:"email",value:T.email,onChange:Se,onFocus:f=>re(f,"email"),onClick:f=>le(f,"email"),onBlur:Ae,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${se.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),se.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:se.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"startDate",value:T.startDate,onChange:Se,onFocus:f=>re(f,"startDate"),onClick:f=>le(f,"startDate"),onBlur:Ae,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${se.startDate?"border-red-500":"border-gray-300"}`}),se.startDate&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:se.startDate})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["End Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"endDate",value:T.endDate,onChange:Se,onFocus:f=>re(f,"endDate"),onClick:f=>le(f,"endDate"),onBlur:Ae,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${se.endDate?"border-red-500":"border-gray-300"}`}),se.endDate&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:se.endDate})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 mb-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"amount",value:T.amount,onChange:Se,onFocus:f=>re(f,"amount"),onClick:f=>le(f,"amount"),onBlur:Ae,min:"0",step:"0.01",className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${se.amount?"border-red-500":"border-gray-300"}`,placeholder:"Enter amount"}),se.amount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:se.amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Voucher Code"}),e.jsx("input",{type:"text",name:"voucherCode",value:T.voucherCode,onChange:Se,onFocus:f=>re(f,"voucherCode"),onClick:f=>le(f,"voucherCode"),onBlur:Ae,className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm bg-gray-50",placeholder:"Auto generated code",readOnly:!o}),!o&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Code will be auto-generated"})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Event Description"}),e.jsx("textarea",{name:"event",value:T.event,onChange:Se,onFocus:f=>re(f,"event"),onClick:f=>le(f,"event"),onBlur:Ae,rows:"3",className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Enter event description or additional notes"})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:Ne,className:"px-6 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary",children:"Reset"}),e.jsx("button",{type:"submit",disabled:p,className:`px-6 py-2 bg-primary text-white font-medium rounded-lg \r
                shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
                active:shadow-none active:translate-y-[4px] transition-all disabled:opacity-50 disabled:cursor-not-allowed`,children:p?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):o?"Update Voucher":"Submit"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🏷️"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Voucher List"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:ge,className:`px-3 py-2 bg-primary text-white text-sm font-medium rounded-lg flex items-center gap-2 \r
              shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
              active:shadow-none active:translate-y-[4px] transition-all`,children:[e.jsx(Ls,{size:16}),"Add New Voucher"]})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex justify-end items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search voucher...",value:d,onChange:f=>m(f.target.value),onFocus:f=>re(f,"searchTerm"),onClick:f=>le(f,"searchTerm"),onBlur:Ae,className:"w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("select",{value:h,onChange:f=>x(f.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"overflow-x-auto",children:[p&&e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading voucher..."})]}),!p&&e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Phone Number"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Voucher Code"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Start Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"End Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Event"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:P().map((f,g)=>e.jsxs("tr",{className:`border-b border-gray-100 ${g%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:g+1})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:f.title})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:f.name})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:f.phoneNo})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:f.email||"-"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"font-mono font-medium text-primary",children:f.voucherCode})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["€",f.amount]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:f.startDate?new Date(f.startDate).toLocaleDateString():"-"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:f.endDate?new Date(f.endDate).toLocaleDateString():"-"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600 max-w-xs truncate",title:f.event,children:f.event||"-"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.status==="active",onChange:()=>A(f.id),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${f.status==="active"?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${f.status==="active"?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>be(f),className:"text-primary hover:text-primary-dark transition-colors p-1 rounded hover:bg-blue-50",children:e.jsx(ia,{size:16})}),e.jsx("button",{onClick:()=>ye(f),className:"text-red-600 hover:text-red-800 transition-colors p-1 rounded hover:bg-red-50",children:e.jsx(za,{size:16})})]})})]},f.id))})]})]}),!p&&P().length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Hh,{size:48,className:"mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No voucher found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Create your first voucher to get started"})]})]}),N&&D&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Voucher"}),e.jsx("button",{onClick:()=>{_(!1),L(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete this voucher? This action cannot be undone."}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Title: ",e.jsx("strong",{children:D.title})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Name: ",e.jsx("strong",{children:D.name})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Voucher Code: ",e.jsx("strong",{children:D.voucherCode})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Amount: ",e.jsxs("strong",{children:["€",D.amount]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{_(!1),L(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>ae(D.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(Wa,{isVisible:B,onClose:Ce,activeInput:q,onInputChange:J,onInputBlur:Ae,inputValue:q==="searchTerm"?d:T[q]||"",placeholder:"Type here..."})]})},d6=()=>{const[s,t]=v.useState([]),[r,n]=v.useState(!1),[o,c]=v.useState(null),[d,m]=v.useState(""),[h,x]=v.useState("all"),[p,w]=v.useState(!1),[N,_]=v.useState(!1),[D,L]=v.useState(null),[B,z]=v.useState(!1),[q,R]=v.useState("");v.useEffect(()=>{F()},[]);const F=async()=>{try{w(!0);const ge=await window.myAPI.getAllCoupons();if(ge.success){const A=ge.data.map(P=>({id:P.id,title:P.title,customerType:P.type||"All Customers",code:P.code,limitForSameUser:P.usage_limit||0,startDate:P.start_date?P.start_date.split("T")[0]:"",expireDate:P.end_date?P.end_date.split("T")[0]:"",discountType:P.discount_type||"percentage",discount:P.amount||0,maxDiscount:P.max_discount||0,minPurchase:P.min_purchase||0,totalUsers:0,status:P.status===1?"active":"inactive"}));t(A)}else console.error("Failed to load coupons:",ge.message)}catch(ge){console.error("Error loading coupons:",ge)}finally{w(!1)}},[T,I]=v.useState({title:"",customerType:"",code:"",limitForSameUser:"",startDate:"",expireDate:"",discountType:"percentage",discount:"",maxDiscount:"",minPurchase:""}),[se,oe]=v.useState({}),_e=ge=>{R(ge),z(!0)},he=ge=>{ge.relatedTarget&&ge.relatedTarget.closest(".hg-theme-default")||ge.target&&ge.target.closest(".hg-theme-default")||setTimeout(()=>{z(!1),R("")},300)},ie=(ge,A)=>{_e(A)},Ee=(ge,A)=>{(!B||q!==A)&&_e(A)},Ae=(ge,A,P)=>{if(A==="searchTerm"?m(ge):A&&I(f=>({...f,[A]:ge})),P==="enter"){const f=["title","customerType","code","limitForSameUser","startDate","expireDate","discount","maxDiscount","minPurchase"],g=f.indexOf(A);if(g<f.length-1){const S=f[g+1],k=document.querySelector(`[name="${S}"]`);k&&k.focus()}}},re=()=>{z(!1),R("")},le=ge=>{const{name:A,value:P}=ge.target;I(f=>({...f,[A]:P})),se[A]&&oe(f=>({...f,[A]:""}))},J=()=>{const ge={};return T.title.trim()||(ge.title="Title is required"),T.customerType.trim()||(ge.customerType="Customer type is required"),T.code.trim()||(ge.code="Code is required"),T.startDate||(ge.startDate="Start date is required"),T.expireDate||(ge.expireDate="Expire date is required"),(!T.discount||T.discount<=0)&&(ge.discount="Discount must be greater than 0"),T.discountType==="percentage"&&T.discount>100&&(ge.discount="Percentage discount cannot exceed 100%"),T.minPurchase&&T.minPurchase<0&&(ge.minPurchase="Minimum purchase cannot be negative"),T.maxDiscount&&T.maxDiscount<0&&(ge.maxDiscount="Maximum discount cannot be negative"),oe(ge),Object.keys(ge).length===0},Ce=async ge=>{if(ge.preventDefault(),!!J())try{if(w(!0),o){const A={title:T.title,type:T.customerType,code:T.code,usage_limit:parseInt(T.limitForSameUser)||0,start_date:T.startDate,end_date:T.expireDate,discount_type:T.discountType,amount:parseFloat(T.discount),max_discount:parseFloat(T.maxDiscount)||0,min_purchase:parseFloat(T.minPurchase)||0},P=await window.myAPI.updateCoupon(o.id,A);P.success?(await F(),n(!1),c(null)):console.error("Failed to update coupon:",P.message)}else{const A={title:T.title,type:T.customerType,code:T.code,usage_limit:parseInt(T.limitForSameUser)||0,start_date:T.startDate,end_date:T.expireDate,discount_type:T.discountType,amount:parseFloat(T.discount),max_discount:parseFloat(T.maxDiscount)||0,min_purchase:parseFloat(T.minPurchase)||0,added_by:1},P=await window.myAPI.createCoupon(A);P.success?(await F(),n(!1)):console.error("Failed to create coupon:",P.message)}}catch(A){console.error("Error saving coupon:",A)}finally{w(!1)}},Se=ge=>{c(ge),I({title:ge.title,customerType:ge.customerType,code:ge.code,limitForSameUser:ge.limitForSameUser.toString(),startDate:ge.startDate,expireDate:ge.expireDate,discountType:ge.discountType,discount:ge.discount.toString(),maxDiscount:ge.maxDiscount.toString(),minPurchase:ge.minPurchase.toString()}),R(""),z(!1),n(!0)},He=ge=>{L(ge),_(!0)},Y=async ge=>{try{w(!0);const A=await window.myAPI.deleteCoupon(ge);A.success?(await F(),_(!1),L(null)):(console.error("Failed to delete coupon:",A.message),alert("Error deleting coupon: "+A.message))}catch(A){console.error("Error deleting coupon:",A),alert("Error deleting coupon")}finally{w(!1)}},be=()=>{I({title:"",customerType:"",code:"",limitForSameUser:"",startDate:"",expireDate:"",discountType:"percentage",discount:"",maxDiscount:"",minPurchase:""}),oe({}),R(""),z(!1)},ye=()=>{c(null),I({title:"",customerType:"",code:"",limitForSameUser:"",startDate:"",expireDate:"",discountType:"percentage",discount:"",maxDiscount:"",minPurchase:""}),oe({}),R(""),z(!1),n(!0)},ae=async ge=>{try{const P=s.find(g=>g.id===ge).status==="active"?0:1,f=await window.myAPI.updateCoupon(ge,{status:P});f.success?await F():console.error("Failed to toggle status:",f.message)}catch(A){console.error("Error toggling status:",A)}},Ne=()=>{let ge=s;return d&&(ge=ge.filter(A=>A.code.toLowerCase().includes(d.toLowerCase())||A.title.toLowerCase().includes(d.toLowerCase()))),h!=="all"&&(ge=ge.filter(A=>A.status===h)),ge};return e.jsxs("div",{className:"space-y-6",children:[r&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-primary",children:o?"Edit Coupon":"Add New Coupon"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>{n(!1),c(null),be(),z(!1)},className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100",children:e.jsx(St,{size:20})})})]}),e.jsxs("form",{onSubmit:Ce,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-5 mb-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"title",value:T.title,onChange:le,onFocus:ge=>ie(ge,"title"),onClick:ge=>Ee(ge,"title"),onBlur:he,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${se.title?"border-red-500":"border-gray-300"}`,placeholder:"New Coupon",required:!0}),se.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:se.title})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Select Customer ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"customerType",value:T.customerType,onChange:le,onFocus:ge=>ie(ge,"customerType"),onClick:ge=>Ee(ge,"customerType"),onBlur:he,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${se.customerType?"border-red-500":"border-gray-300"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Customer"}),e.jsx("option",{value:"All Customers",children:"All Customers"}),e.jsx("option",{value:"New Customers",children:"New Customers"}),e.jsx("option",{value:"Loyal Customers",children:"Loyal Customers"}),e.jsx("option",{value:"VIP Customer",children:"VIP Customer"}),e.jsx("option",{value:"Delivery Only",children:"Delivery Only"}),e.jsx("option",{value:"Collection Only",children:"Collection Only"})]}),se.customerType&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:se.customerType})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"code",value:T.code,onChange:le,onFocus:ge=>ie(ge,"code"),onClick:ge=>Ee(ge,"code"),onBlur:he,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${se.code?"border-red-500":"border-gray-300"}`,placeholder:"e.g., SAVE20",required:!0}),se.code&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:se.code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Limit for same user"}),e.jsx("input",{type:"number",name:"limitForSameUser",value:T.limitForSameUser,onChange:le,onFocus:ge=>ie(ge,"limitForSameUser"),onClick:ge=>Ee(ge,"limitForSameUser"),onBlur:he,min:"1",className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"Ex:10"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"startDate",value:T.startDate,onChange:le,onFocus:ge=>ie(ge,"startDate"),onClick:ge=>Ee(ge,"startDate"),onBlur:he,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${se.startDate?"border-red-500":"border-gray-300"}`,required:!0}),se.startDate&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:se.startDate})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Expire Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"expireDate",value:T.expireDate,onChange:le,onFocus:ge=>ie(ge,"expireDate"),onClick:ge=>Ee(ge,"expireDate"),onBlur:he,className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${se.expireDate?"border-red-500":"border-gray-300"}`,required:!0}),se.expireDate&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:se.expireDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Discount Type"}),e.jsxs("select",{name:"discountType",value:T.discountType,onChange:le,onFocus:ge=>ie(ge,"discountType"),onClick:ge=>Ee(ge,"discountType"),onBlur:he,className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",children:[e.jsx("option",{value:"percentage",children:"Percentage (%)"}),e.jsx("option",{value:"fixed",children:"Fixed Amount (€)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Discount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"discount",value:T.discount,onChange:le,onFocus:ge=>ie(ge,"discount"),onClick:ge=>Ee(ge,"discount"),onBlur:he,min:"0",step:"0.01",className:`w-full px-2 py-1.5 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm ${se.discount?"border-red-500":"border-gray-300"}`,placeholder:T.discountType==="percentage"?"20":"10",required:!0}),se.discount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:se.discount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Max Discount"}),e.jsx("input",{type:"number",name:"maxDiscount",value:T.maxDiscount,onChange:le,onFocus:ge=>ie(ge,"maxDiscount"),onClick:ge=>Ee(ge,"maxDiscount"),onBlur:he,min:"0",step:"0.01",className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"0 (no limit)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Min Purchase"}),e.jsx("input",{type:"number",name:"minPurchase",value:T.minPurchase,onChange:le,onFocus:ge=>ie(ge,"minPurchase"),onClick:ge=>Ee(ge,"minPurchase"),onBlur:he,min:"0",step:"0.01",className:"w-full px-2.5 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",placeholder:"0"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:be,className:"px-6 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary",children:"Reset"}),e.jsx("button",{type:"submit",disabled:p,className:`px-6 py-2 bg-primary text-white font-medium rounded-lg \r
                shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
                active:shadow-none active:translate-y-[4px] transition-all disabled:opacity-50 disabled:cursor-not-allowed`,children:p?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):o?"Update Coupon":"Submit"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🏷️"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Coupon List"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:ye,className:`px-3 py-2 bg-primary text-white text-sm font-medium rounded-lg flex items-center gap-2 \r
              shadow-[0_4px_0_rgba(0,0,0,0.2)] hover:shadow-[0_2px_0_rgba(0,0,0,0.2)] hover:translate-y-[2px] \r
              active:shadow-none active:translate-y-[4px] transition-all`,children:[e.jsx(Ls,{size:16}),"Add New Coupon"]})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex justify-end items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search coupons...",value:d,onChange:ge=>m(ge.target.value),onFocus:ge=>ie(ge,"searchTerm"),onClick:ge=>Ee(ge,"searchTerm"),onBlur:he,className:"w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("select",{value:h,onChange:ge=>x(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"overflow-x-auto",children:[p&&e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading coupons..."})]}),!p&&e.jsxs("table",{className:"w-full border-collapse overflow-hidden rounded-xl shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primaryExtraLight",children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"SI"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Total Users"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Min Purchase"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Max Discount"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Discount"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Discount Type"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Start Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Expire Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Customer Type"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-primary uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:Ne().map((ge,A)=>e.jsxs("tr",{className:`border-b border-gray-100 ${A%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:A+1})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:ge.title})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"font-mono font-medium text-primary",children:ge.code})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ge.discountType})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ge.totalUsers})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["€",ge.minPurchase]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["€",ge.maxDiscount]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:ge.discountType==="percentage"?`${ge.discount}%`:`€${ge.discount}`})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:ge.discountType})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:new Date(ge.startDate).toLocaleDateString()})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:new Date(ge.expireDate).toLocaleDateString()})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:ge.customerType})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ge.status==="active",onChange:()=>ae(ge.id),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${ge.status==="active"?"bg-primary":"bg-gray-200"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${ge.status==="active"?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Se(ge),className:"text-primary hover:text-primary-dark transition-colors p-1 rounded hover:bg-blue-50",children:e.jsx(ia,{size:16})}),e.jsx("button",{onClick:()=>He(ge),className:"text-red-600 hover:text-red-800 transition-colors p-1 rounded hover:bg-red-50",children:e.jsx(za,{size:16})})]})})]},ge.id))})]})]}),!p&&Ne().length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Hh,{size:48,className:"mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No coupons found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Create your first coupon to get started"})]})]}),N&&D&&e.jsx("div",{className:"fixed inset-0 bg-[#000000a1] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-red-700 text-white p-4 flex justify-between items-center rounded-t-xl",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Coupon"}),e.jsx("button",{onClick:()=>{_(!1),L(null)},className:"text-white hover:text-red-700 p-1 rounded-full hover:bg-white hover:bg-opacity-20",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete this coupon? This action cannot be undone."}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Coupon: ",e.jsx("strong",{children:D.title})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Code: ",e.jsx("strong",{children:D.code})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Discount: ",e.jsx("strong",{children:D.discountType==="percentage"?`${D.discount}%`:`€${D.discount}`})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{_(!1),L(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>Y(D.id),className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(Wa,{isVisible:B,onClose:re,activeInput:q,onInputChange:Ae,onInputBlur:he,inputValue:q==="searchTerm"?d:T[q]||"",placeholder:"Type here..."})]})},u6=()=>{const[s,t]=v.useState("coupon");return e.jsxs("div",{className:"px-4 py-2",children:[e.jsx("div",{className:"flex items-center justify-end mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>t("voucher"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="voucher"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(cg,{size:16}),"Voucher Management"]}),e.jsxs("button",{onClick:()=>t("coupon"),className:`px-3 py-2 rounded-md cursor-pointer text-sm font-medium transition-colors flex items-center gap-2 ${s==="coupon"?"bg-primaryLight text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Yb,{size:16}),"Coupon Management"]})]})}),e.jsxs("div",{className:"mt-6",children:[s==="voucher"&&e.jsx(c6,{}),s==="coupon"&&e.jsx(d6,{})]})]})},m6=()=>{const[s,t]=v.useState(""),[r,n]=v.useState(""),[o,c]=v.useState(""),[d,m]=v.useState(""),[h,x]=v.useState(""),[p,w]=v.useState([]),[N,_]=v.useState([]),[D,L]=v.useState(""),[B,z]=v.useState(1),[q,R]=v.useState(10),[F,T]=v.useState(0),[I,se]=v.useState(!1),[oe,_e]=v.useState([]),[he,ie]=v.useState(!1),[Ee,Ae]=v.useState(null),[re,le]=v.useState(!1),[J,Ce]=v.useState(""),Se=[{value:"loyal_customers",label:"Loyal Customers"},{value:"impulse_customers",label:"Impulse Customers"},{value:"discount_customer",label:"Discount Customers"}],He=[10,20,30,50,100],Y=async(X=1,M=q,Q="")=>{se(!0);try{const ue=(X-1)*M;let ne;Q.trim()?ne=await window.electronAPI.invoke("customer:searchWithOrderStats",Q,1,M,ue):ne=await window.electronAPI.invoke("customer:getWithOrderStats",1,M,ue),ne.success?(w(ne.data),_(ne.data)):(console.error("Failed to load customers:",ne.message),w([]),_([]))}catch(ue){console.error("Error loading customers:",ue),w([]),_([])}finally{se(!1)}},be=async()=>{try{const X=await window.electronAPI.invoke("customer:getCount",1);X.success&&T(X.count)}catch(X){console.error("Error loading customer count:",X)}},ye=async X=>{try{const M=await window.electronAPI.invoke("customer:getOrders",X,50,0);M.success?_e(M.data):(console.error("Failed to load customer orders:",M.message),_e([]))}catch(M){console.error("Error loading customer orders:",M),_e([])}};v.useEffect(()=>{Y(),be()},[]),v.useEffect(()=>{const X=setTimeout(()=>{D!==""?Y(1,q,D):Y(1,q),z(1)},500);return()=>clearTimeout(X)},[D,q]),v.useEffect(()=>{Y(B,q,D)},[B,q]);const ae=Math.ceil(F/q),Ne=(B-1)*q+1,ge=Math.min(B*q,F),A=X=>new Date(X).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),P=X=>{z(X)},f=async X=>{try{const M=p.find(Q=>Q.id===X);if(M){const Q=await window.electronAPI.invoke("customer:update",X,{isloyal:!M.isloyal});Q.success?Y(B,q,D):console.error("Failed to update customer status:",Q.message)}}catch(M){console.error("Error updating customer status:",M)}},g=async X=>{console.log("Opening modal for customer:",X),Ae(X),ie(!0),await ye(X.id)},S=()=>{ie(!1),Ae(null)},k=X=>{Ce(X),le(!0)},C=X=>{X.relatedTarget&&X.relatedTarget.closest(".hg-theme-default")||setTimeout(()=>{le(!1),Ce("")},300)},O=(X,M)=>{k(M)},U=(X,M)=>{(!re||J!==M)&&k(M)},H=(X,M)=>{M==="chooseFirst"&&x(X)},V=()=>{le(!1),Ce("")},ee=X=>{const M=X.target.value.replace(/\D/g,"");x(M)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center gap-3 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sn,{size:24,className:"text-primary"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Customers"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 ",children:"Start Date"}),e.jsx("input",{type:"date",value:s,onChange:X=>t(X.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 ",children:"End Date"}),e.jsx("input",{type:"date",value:r,onChange:X=>n(X.target.value)})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Joining Date"}),e.jsx("input",{type:"date",value:o,onChange:X=>c(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:d,onChange:X=>m(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm appearance-none cursor-pointer",children:[e.jsx("option",{value:"",children:"Select Customer Sorting Order"}),Se.map(X=>e.jsx("option",{value:X.value,children:X.label},X.value))]}),e.jsx(hs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose First"}),e.jsx("input",{type:"text",name:"chooseFirst",placeholder:"Ex : 100",value:h,onChange:ee,onFocus:()=>O(null,"chooseFirst"),onBlur:C,onClick:()=>U(null,"chooseFirst"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Customer list"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",F," customers)"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Show:"}),e.jsx("select",{value:q,onChange:X=>{R(parseInt(X.target.value)),z(1)},className:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:He.map(X=>e.jsx("option",{value:X,children:X},X))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Ex: Search by name",value:D,onChange:X=>L(X.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm w-64"}),e.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16})]}),e.jsxs("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2 text-sm",children:[e.jsx(Kb,{size:16}),"Export",e.jsx(hs,{size:14})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"SI"}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Name",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Contact Information",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Total Order",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Total Order Amount",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Joining Date",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Loyal"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Actions"})]})}),e.jsx("tbody",{children:I?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:"Loading customers..."})}):p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:"No customers found"})}):p.map((X,M)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:Ne+M}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("span",{className:"text-sm font-medium text-gray-800",children:X.name})})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-gray-800",children:X.email}),e.jsx("div",{className:"text-gray-500",children:X.phone})]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:X.totalOrders}),e.jsxs("td",{className:"py-3 px-4 text-sm font-medium text-gray-800",children:[parseFloat(X.totalAmount||0).toFixed(2)," €"]}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:A(X.joiningDate)}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>f(X.id),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${X.isloyal?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${X.isloyal?"translate-x-6":"translate-x-1"}`})})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>g(X),className:"p-1 text-gray-400 hover:text-primary transition-colors",children:e.jsx(vn,{size:16})})})]},X.id))})]})}),ae>1&&e.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",Ne," to ",ge," of ",F," customers"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>P(B-1),disabled:B===1,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Eu,{size:16})}),Array.from({length:ae},(X,M)=>M+1).map(X=>e.jsx("button",{onClick:()=>P(X),className:`px-3 py-2 text-sm rounded-lg transition-colors ${B===X?"bg-primary text-white":"border border-gray-300 hover:bg-gray-50"}`,children:X},X)),e.jsx("button",{onClick:()=>P(B+1),disabled:B===ae,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Hb,{size:16})})]})]})]}),he&&Ee&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Customer Details"}),e.jsx("button",{onClick:S,className:"text-gray-400 hover:text-gray-600",children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 p-6 border-r border-gray-200 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Order List"}),e.jsx("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full",children:Ee.totalOrders})]})}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"sticky top-0 bg-white",children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Sl",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Order Id",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Status",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsxs("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm cursor-pointer hover:text-primary",children:["Total Amount",e.jsx(hs,{className:"inline ml-1",size:12})]}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:"Action"})]})}),e.jsx("tbody",{children:oe.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"py-8 text-center text-gray-500",children:"No orders found for this customer"})}):oe.map((X,M)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:M+1}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-primary font-medium cursor-pointer hover:underline",children:X.order_number||X.id})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${X.order_status==="confirmed"?"bg-green-100 text-green-800":X.order_status==="pending"?"bg-yellow-100 text-yellow-800":X.order_status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:X.order_status||"Confirmed"})}),e.jsxs("td",{className:"py-3 px-4 text-sm font-medium text-gray-800",children:[parseFloat(X.order_amount||0).toFixed(2)," €"]}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"p-1 bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors",children:e.jsx(vn,{size:14})}),e.jsx("button",{className:"p-1 bg-primary text-white rounded hover:bg-primary/90 transition-colors",children:e.jsx(Ah,{size:14})})]})})]},X.id))})]})})]}),e.jsxs("div",{className:"w-80 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(sn,{size:20,className:"text-primary"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:Ee.name})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center border-2 border-gray-200",children:e.jsx("span",{className:"text-gray-400 text-2xl",children:"📷"})})}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xb,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-800",children:Ee.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dg,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-800",children:Ee.phone})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pu,{size:16,className:"text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-800",children:[Ee.totalOrders," Orders"]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:"Contact info"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Hx,{size:16,className:"text-gray-400 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-800",children:Ee.address||"No address available"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Hx,{size:16,className:"text-gray-400 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-800",children:Ee.address||"No address available"})]})]})]})]})]})]})}),e.jsx(Wa,{isVisible:re,onClose:V,activeInput:J,onInputChange:H,onInputBlur:C,inputValue:h||"",placeholder:"Type here..."})]})},h6=[{icon:e.jsx(ji,{size:18,className:"text-primary"}),label:"Menu",path:"/dashboard/food-management"},{icon:e.jsx(hg,{size:18,className:"text-primary"}),label:"Tables",path:"/dashboard/table-management"},{icon:e.jsx(sn,{size:18,className:"text-primary"}),label:"Employee",path:"/dashboard/employee-management"},{icon:e.jsx(dN,{size:18,className:"text-primary"}),label:"Stock Management",path:"/dashboard/food-management"}],f6=[{icon:e.jsx(Wb,{size:18,className:"text-yellow-500"}),label:"Change Password",path:"/dashboard/change-password"},{icon:e.jsx(bl,{size:18,className:"text-sky-500"}),label:"Application Settings",path:"/dashboard/application-settings"},{icon:e.jsx(vl,{size:18,className:"text-amber-600"}),label:"Security Settings"}];function x6(){const s=ka(),t=r=>{s(r)};return e.jsxs("div",{className:"mt-10 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"mb-2 text-center",children:[e.jsx("h2",{className:"text-3xl font-semibold text-primary mb-1",children:"Menu Panel"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Navigation and system access"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[e.jsxs("div",{className:"w-[300px] relative overflow-hidden",style:{background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)",borderRadius:"24px",padding:"32px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.08), 0 8px 16px rgba(0, 0, 0, 0.04), inset 0 1px 0 rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 rounded-t-lg ",style:{background:"linear-gradient(to right, var(--color-primary), var(--color-primaryLight))"}}),e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Vb,{size:22,className:"text-primary mr-2"}),e.jsx("span",{className:"font-bold text-primary text-lg",children:"Administration"})]}),e.jsx("div",{className:"flex flex-col gap-2",children:h6.map(r=>e.jsxs("button",{onClick:()=>t(r.path),className:"flex items-center gap-3 p-3 rounded-lg bg-[#f6fafd] hover:bg-cyan-50 transition border border-transparent focus:outline-none cursor-pointer",style:{boxShadow:"0 1px 2px 0 rgba(0,0,0,0.01)"},children:[r.icon,e.jsx("span",{className:"text-gray-700 font-medium",children:r.label})]},r.label))})]}),e.jsxs("div",{className:"w-[300px] relative overflow-hidden",style:{background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)",borderRadius:"24px",padding:"32px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.08), 0 8px 16px rgba(0, 0, 0, 0.04), inset 0 1px 0 rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 rounded-t-lg",style:{background:"linear-gradient(to right, var(--color-primary), var(--color-primaryLight))"}}),e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(V1,{size:22,className:"text-primary mr-2"}),e.jsx("span",{className:"font-bold text-primary text-lg",children:"Settings & Security"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[f6.map(r=>e.jsxs("button",{onClick:()=>r.path&&t(r.path),className:"flex items-center gap-3 p-3 rounded-lg bg-[#f6fafd] hover:bg-cyan-50 transition border border-transparent focus:outline-none cursor-pointer",style:{boxShadow:"0 1px 2px 0 rgba(0,0,0,0.01)"},children:[r.icon,e.jsx("span",{className:"text-gray-700 font-medium",children:r.label})]},r.label)),e.jsxs("button",{className:"flex items-center gap-3 p-3 rounded-lg bg-red-50 hover:bg-red-100 transition border border-red-200 focus:outline-none mt-1",style:{boxShadow:"0 1px 2px 0 rgba(0,0,0,0.01)"},children:[e.jsx(Uh,{size:18,className:"text-red-500"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Logout"})]})]})]})]})]})}const g6=()=>{const s=ka(),[t,r]=v.useState("finance"),[n,o]=v.useState(!1),c=v.useRef(null),{alertState:d,showSuccess:m,showError:h,hideAlert:x}=Yh(),[p,w]=v.useState({defaultTheme:"Blue Theme",selectKeyboard:"System Keyboard",selectOrderBell:"Bell 1",autoSaveInterval:"5",soundAlert:!1,notifications:!0}),[N,_]=v.useState({currency:"Euro (€)",currencySymbolPosition:"Right (123€)",digitAfterDecimalPoint:"2",taxRate:"23",standardTax:"23",foodTax:"0",deliveryTax:"0",serviceTax:"0",timeZone:"Ireland Dublin",timeFormat:"12 hour"}),[D,L]=v.useState({minimumOrderAmount:"10.00",orderPlaceSetting:"Both",deliveryMinTime:"25",deliveryMaxTime:"45",deliveryUnit:"Minute",dineInTime:"0",dineInUnit:"Minutes",dineInOrders:!0,inStoreOrders:!0,takeawayOrders:!0,deliveryOrders:!0,cashierCanCancelOrder:"No"}),[B,z]=v.useState({freeDeliveryIn:"5",deliveryFeePerKm:"2.50",maximumDeliveryRange:"15",minimumDeliveryOrderAmount:"20.00"}),q=M=>{se({businessName:M?.business_name||"Restaurant Name",phoneNumber:M?.phone_number||"",country:M?.country||"Ireland",description:M?.description||"Welcome to our restaurant! We serve delicious food with excellent service in a warm and welcoming atmosphere.",logoFile:null,logoPreview:M?.logo_file?`local-file://${M.logo_file}`:M?.logo_preview||"",address:M?.address||"123 Main Street, Dublin, Ireland",latitude:M?.latitude!=null?String(M.latitude):"53.3498",longitude:M?.longitude!=null?String(M.longitude):"-6.2603"}),_({currency:M?.currency||"Euro (€)",currencySymbolPosition:M?.currency_symbol_position||"Right (123€)",digitAfterDecimalPoint:M?.digit_after_decimal_point!=null?String(M.digit_after_decimal_point):"2",taxRate:M?.tax_rate!=null?String(M.tax_rate):"23",standardTax:M?.standard_tax!=null?String(M.standard_tax):"23",foodTax:M?.food_tax!=null?String(M.food_tax):"0",deliveryTax:M?.delivery_tax!=null?String(M.delivery_tax):"0",serviceTax:M?.service_tax!=null?String(M.service_tax):"0",timeZone:M?.time_zone||"Ireland Dublin",timeFormat:M?.time_format||"12 hour"}),L({minimumOrderAmount:M?.minimum_order_amount!=null?String(M.minimum_order_amount):"10.00",orderPlaceSetting:M?.order_place_setting||"Both",deliveryMinTime:M?.delivery_min_time!=null?String(M.delivery_min_time):"25",deliveryMaxTime:M?.delivery_max_time!=null?String(M.delivery_max_time):"45",deliveryUnit:M?.delivery_unit||"Minute",dineInTime:M?.dine_in_time!=null?String(M.dine_in_time):"0",dineInUnit:M?.dine_in_unit||"Minutes",dineInOrders:!!(M?.dine_in_orders??!0),inStoreOrders:!!(M?.in_store_orders??!0),takeawayOrders:!!(M?.takeaway_orders??!0),deliveryOrders:!!(M?.delivery_orders??!0),cashierCanCancelOrder:M?.cashier_can_cancel_order||"No"}),z({freeDeliveryIn:M?.free_delivery_in!=null?String(M.free_delivery_in):"5",deliveryFeePerKm:M?.delivery_fee_per_km!=null?String(M.delivery_fee_per_km):"2.50",maximumDeliveryRange:M?.maximum_delivery_range!=null?String(M.maximum_delivery_range):"15",minimumDeliveryOrderAmount:M?.minimum_delivery_order_amount!=null?String(M.minimum_delivery_order_amount):"20.00"}),T({monday:{open:M?.monday_open||"12:00",close:M?.monday_close||"23:59"},tuesday:{open:M?.tuesday_open||"12:00",close:M?.tuesday_close||"23:59"},wednesday:{open:M?.wednesday_open||"12:00",close:M?.wednesday_close||"23:59"},thursday:{open:M?.thursday_open||"12:00",close:M?.thursday_close||"23:59"},friday:{open:M?.friday_open||"12:00",close:M?.friday_close||"23:59"},saturday:{open:M?.saturday_open||"12:00",close:M?.saturday_close||"23:59"},sunday:{open:M?.sunday_open||"12:00",close:M?.sunday_close||"23:59"}}),w({defaultTheme:M?.default_theme||"Blue Theme",selectKeyboard:M?.select_keyboard||"System Keyboard",selectOrderBell:M?.select_order_bell||"Bell 1",autoSaveInterval:M?.auto_save_interval!=null?String(M.auto_save_interval):"5",soundAlert:!!(M?.sound_alert??!1),notifications:!!(M?.notifications??!0)})},R=async()=>{try{o(!0);const M=await window.settingsAPI.get();M?.success&&(c.current=M.data||null,M.data&&q(M.data))}finally{o(!1)}};v.useEffect(()=>{R()},[t]);const[F,T]=v.useState({monday:{open:"12:00",close:"23:59"},tuesday:{open:"12:00",close:"23:59"},wednesday:{open:"12:00",close:"23:59"},thursday:{open:"12:00",close:"23:59"},friday:{open:"12:00",close:"23:59"},saturday:{open:"12:00",close:"23:59"},sunday:{open:"12:00",close:"23:59"}}),[I,se]=v.useState({businessName:"Restaurant Name",phoneNumber:"",country:"Ireland",description:"Welcome to our restaurant! We serve delicious food with excellent service in a warm and welcoming atmosphere.",logoFile:null,logoPreview:"",address:"123 Main Street, Dublin, Ireland",latitude:"53.3498",longitude:"-6.2603"}),oe=v.useRef(null),[_e,he]=v.useState(!1),[ie,Ee]=v.useState(null),[Ae,re]=v.useState({open:"",close:""}),[le,J]=v.useState(!1),[Ce,Se]=v.useState(null),He=[{id:"businessInfo",label:"Business Information",icon:e.jsx(mu,{size:16})},{id:"appearance",label:"Appearance",icon:e.jsx(bl,{size:16})},{id:"finance",label:"Finance & Tax",icon:e.jsx(U0,{size:16})},{id:"order",label:"Order Configuration",icon:e.jsx(V0,{size:16})},{id:"delivery",label:"Delivery Management",icon:e.jsx(So,{size:16})},{id:"schedule",label:"Time Schedule",icon:e.jsx($s,{size:16})}],Y=(M,Q)=>{w(ue=>({...ue,[M]:Q}))},be=(M,Q)=>{_(ue=>({...ue,[M]:Q}))},ye=(M,Q)=>{L(ue=>({...ue,[M]:Q}))},ae=(M,Q)=>{z(ue=>({...ue,[M]:Q}))},Ne=(M,Q)=>{se(ue=>({...ue,[M]:Q}))},ge=()=>{oe?.current?.click()},A=M=>{const Q=M.target.files&&M.target.files[0];if(!Q)return;const ue=new FileReader;ue.onload=()=>{const ne=ue.result;se(fe=>({...fe,logoFile:ne,logoPreview:ne}))},ue.readAsDataURL(Q)},P=()=>{if(!navigator.geolocation){console.warn("Geolocation not supported");return}navigator.geolocation.getCurrentPosition(M=>{const{latitude:Q,longitude:ue}=M.coords;se(ne=>({...ne,latitude:String(Q.toFixed(6)),longitude:String(ue.toFixed(6))}))},M=>{console.warn("Geolocation error:",M.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},f=()=>{const{latitude:M,longitude:Q,address:ue}=I,fe=`https://www.google.com/maps/search/?api=1&query=${ue?encodeURIComponent(ue):`${M},${Q}`}`;window.open(fe,"_blank")},g=(M,Q,ue)=>{T(ne=>({...ne,[M]:{...ne[M],[Q]:ue}}))},S=M=>{Ee(M),re({open:F[M].open,close:F[M].close}),he(!0)},k=()=>{ie&&T(M=>({...M,[ie]:{...M[ie],open:Ae.open,close:Ae.close}})),he(!1),Ee(null),re({open:"",close:""})},C=()=>{he(!1),Ee(null),re({open:"",close:""})},O=(M,Q)=>{re(ue=>({...ue,[M]:Q}))},U=M=>{Se(M),J(!0)},H=()=>{console.log(`Delete confirmed for ${Ce}`),J(!1),Se(null)},V=()=>{J(!1),Se(null)},ee=async()=>{const M={businessName:I.businessName,phoneNumber:I.phoneNumber,country:I.country,description:I.description,logo_preview:I.logoPreview,...I.logoFile?{logoFile:I.logoFile,originalLogoFilename:I.logoFile.name||"logo.png"}:{},address:I.address,latitude:I.latitude,longitude:I.longitude,currency:N.currency,currencySymbolPosition:N.currencySymbolPosition,digitAfterDecimalPoint:N.digitAfterDecimalPoint,taxRate:N.taxRate,standardTax:N.standardTax,foodTax:N.foodTax,deliveryTax:N.deliveryTax,serviceTax:N.serviceTax,timeZone:N.timeZone,timeFormat:N.timeFormat,minimumOrderAmount:D.minimumOrderAmount,orderPlaceSetting:D.orderPlaceSetting,deliveryMinTime:D.deliveryMinTime,deliveryMaxTime:D.deliveryMaxTime,deliveryUnit:D.deliveryUnit,dineInTime:D.dineInTime,dineInUnit:D.dineInUnit,dineInOrders:D.dineInOrders,inStoreOrders:D.inStoreOrders,takeawayOrders:D.takeawayOrders,deliveryOrders:D.deliveryOrders,cashierCanCancelOrder:D.cashierCanCancelOrder,freeDeliveryIn:B.freeDeliveryIn,deliveryFeePerKm:B.deliveryFeePerKm,maximumDeliveryRange:B.maximumDeliveryRange,minimumDeliveryOrderAmount:B.minimumDeliveryOrderAmount,monday_open:F.monday.open,monday_close:F.monday.close,tuesday_open:F.tuesday.open,tuesday_close:F.tuesday.close,wednesday_open:F.wednesday.open,wednesday_close:F.wednesday.close,thursday_open:F.thursday.open,thursday_close:F.thursday.close,friday_open:F.friday.open,friday_close:F.friday.close,saturday_open:F.saturday.open,saturday_close:F.saturday.close,sunday_open:F.sunday.open,sunday_close:F.sunday.close,defaultTheme:p.defaultTheme,selectKeyboard:p.selectKeyboard,selectOrderBell:p.selectOrderBell,autoSaveInterval:p.autoSaveInterval,soundAlert:p.soundAlert,notifications:p.notifications},Q=await window.settingsAPI.upsert(M);if(Q?.success){m("Settings updated successfully!",{duration:1500});try{window.appSettings&&typeof window.appSettings.reloadSettings=="function"&&await window.appSettings.reloadSettings()}catch(ue){console.warn("Could not reload app settings after save:",ue)}}else h(Q?.message||"Failed to update settings");await R()},X=async()=>{await R()};return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx(Ni,{message:d.message,isVisible:d.isVisible,onClose:x,duration:d.duration,type:d.type}),e.jsx("div",{className:"bg-white flex justify-center rounded-lg shadow-sm mb-6",children:e.jsx("div",{className:"flex items-center p-2 ",children:He.map(M=>e.jsxs("button",{onClick:()=>r(M.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium transition-colors ${t===M.id?"text-white bg-primary rounded-lg":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx("span",{className:t===M.id?"text-white":"text-gray-500",children:M.icon}),M.label]},M.id))})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 relative overflow-hidden",style:{"--primary":"var(--color-primary)"},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-primary"}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:()=>s("/dashboard/admin-panel"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Eu,{size:20,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:t==="businessInfo"?e.jsxs(e.Fragment,{children:[e.jsx(mu,{size:24,className:"text-primary"}),"Business Information"]}):t==="finance"?e.jsxs(e.Fragment,{children:[e.jsx(U0,{size:24,className:"text-primary"}),"Business Configuration"]}):t==="order"?e.jsxs(e.Fragment,{children:[e.jsx(V0,{size:24,className:"text-primary"}),"Order Configuration"]}):t==="delivery"?e.jsxs(e.Fragment,{children:[e.jsx(So,{size:24,className:"text-primary"}),"Delivery Management"]}):t==="schedule"?e.jsxs(e.Fragment,{children:[e.jsx($s,{size:24,className:"text-primary"}),"Schedule Working Hours"]}):e.jsxs(e.Fragment,{children:[e.jsx(bl,{size:24,className:"text-primary"}),"System Appearance and Preferences"]})}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:t==="businessInfo"?"Configure your business details and location information":t==="finance"?"Set up business-specific settings.":t==="order"?"Configure order processing and delivery settings.":t==="delivery"?"Configure delivery settings and fees.":t==="schedule"?"Set opening and closing times for each day of the week":"Configure system behavior and performance."})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:t==="businessInfo"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 md:col-span-2",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),e.jsx("input",{type:"text",value:I.businessName,onChange:M=>Ne("businessName",M.target.value),placeholder:"Enter business name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"text",value:I.phoneNumber,onChange:M=>Ne("phoneNumber",M.target.value),placeholder:"Enter phone number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),e.jsxs("select",{value:I.country,onChange:M=>Ne("country",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Ireland",children:"Ireland"}),e.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),e.jsx("option",{value:"United States",children:"United States"}),e.jsx("option",{value:"Germany",children:"Germany"})]})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200"}),e.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-4",children:"Address & Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("input",{type:"text",value:I.address,onChange:M=>Ne("address",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Latitude"}),e.jsx("input",{type:"text",value:I.latitude,onChange:M=>Ne("latitude",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Longitude"}),e.jsx("input",{type:"text",value:I.longitude,onChange:M=>Ne("longitude",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4",children:[e.jsxs("button",{onClick:P,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90",children:[e.jsx(gh,{size:16})," Get Current Location"]}),e.jsxs("button",{onClick:f,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:[e.jsx(gh,{size:16})," Open in Maps"]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-5 md:col-span-2",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-5",children:"Description & Logo"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 items-start",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsxs("div",{className:"rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("textarea",{rows:8,value:I.description,onChange:M=>Ne("description",M.target.value),maxLength:600,placeholder:"Tell customers what makes your place special...",className:"w-full min-h-[180px] px-4 py-3 outline-none border-0 focus:ring-2 focus:ring-primary"}),e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-500",children:[e.jsx("span",{children:"Tip: Friendly, clear, and under 600 characters."}),e.jsxs("span",{children:[I.description?.length||0,"/600"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Logo"}),e.jsx("div",{className:"rounded-lg border border-dashed border-gray-300 bg-gray-50 p-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"aspect-square w-32 md:w-36 rounded-lg bg-white border border-gray-200 flex items-center justify-center overflow-hidden shadow-sm",children:I.logoPreview?e.jsx("img",{src:I.logoPreview,alt:"Logo",className:"w-full h-full object-contain"}):e.jsx("span",{className:"text-xs text-gray-400",children:"No logo"})}),e.jsx("p",{className:"text-xs text-gray-500 h-4 truncate w-full text-center",children:I.logoFile?.name||"No file chosen"}),e.jsx("input",{ref:oe,type:"file",accept:"image/*",className:"hidden",onChange:A}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:ge,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90",children:[e.jsx(fg,{size:16})," Upload"]}),I.logoPreview&&e.jsx("button",{onClick:()=>Ne("logoPreview",""),className:"inline-flex items-center gap-2 px-3 py-2 bg-white text-gray-700 border border-gray-200 rounded-md hover:bg-gray-100",children:"Remove"})]}),e.jsx("p",{className:"text-[11px] text-gray-500 text-center",children:"Use a square image (≥ 256×256). PNG with transparent background looks best."})]})})]})]})]})]}):t==="finance"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),e.jsxs("select",{value:N.currency,onChange:M=>be("currency",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Euro (€)",children:"Euro (€)"}),e.jsx("option",{value:"US Dollar ($)",children:"US Dollar ($)"}),e.jsx("option",{value:"British Pound (£)",children:"British Pound (£)"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency Symbol Position"}),e.jsxs("select",{value:N.currencySymbolPosition,onChange:M=>be("currencySymbolPosition",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Right (123€)",children:"Right (123€)"}),e.jsx("option",{value:"Left (€123)",children:"Left (€123)"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Digit After Decimal Point"}),e.jsxs("select",{value:N.digitAfterDecimalPoint,onChange:M=>be("digitAfterDecimalPoint",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"0",children:"0"}),e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Standard Tax (%)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:N.standardTax,onChange:M=>be("standardTax",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Food Tax (%)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:N.foodTax,onChange:M=>be("foodTax",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Tax (%)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:N.deliveryTax,onChange:M=>be("deliveryTax",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Tax (%)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:N.serviceTax,onChange:M=>be("serviceTax",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Zone"}),e.jsxs("select",{value:N.timeZone,onChange:M=>be("timeZone",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Ireland Dublin",children:"Ireland Dublin"}),e.jsx("option",{value:"London",children:"London"}),e.jsx("option",{value:"New York",children:"New York"}),e.jsx("option",{value:"Los Angeles",children:"Los Angeles"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Format"}),e.jsxs("select",{value:N.timeFormat,onChange:M=>be("timeFormat",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"12 hour",children:"12 hour"}),e.jsx("option",{value:"24 hour",children:"24 hour"})]})]})]}):t==="order"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(H0,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Minimum Order Amount"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Set the minimum amount required for orders."}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:D.minimumOrderAmount,onChange:M=>ye("minimumOrderAmount",M.target.value),className:"flex-1 pl-2 w-full py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("span",{className:"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md text-gray-600",children:"€"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(v1,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Order Place Setting"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Choose where orders are sent when placed."}),e.jsxs("select",{value:D.orderPlaceSetting,onChange:M=>ye("orderPlaceSetting",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Kitchen",children:"Kitchen"}),e.jsx("option",{value:"Bar",children:"Bar"}),e.jsx("option",{value:"Both",children:"Both"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($s,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Approximate Delivery Time"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Set the time range for delivery estimates."}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Min Time"}),e.jsx("input",{type:"text",value:D.deliveryMinTime,onChange:M=>ye("deliveryMinTime",M.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Max Time"}),e.jsx("input",{type:"text",value:D.deliveryMaxTime,onChange:M=>ye("deliveryMaxTime",M.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Unit"}),e.jsxs("select",{value:D.deliveryUnit,onChange:M=>ye("deliveryUnit",M.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"Minute",children:"Minute"}),e.jsx("option",{value:"Hour",children:"Hour"})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ji,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Minimum Time For Dine-In"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Set minimum preparation time for dine-in orders."}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Time"}),e.jsx("input",{type:"text",value:D.dineInTime,onChange:M=>ye("dineInTime",M.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Unit"}),e.jsxs("select",{value:D.dineInUnit,onChange:M=>ye("dineInUnit",M.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"Minutes",children:"Minutes"}),e.jsx("option",{value:"Hours",children:"Hours"})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ji,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dine In Orders"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>ye("dineInOrders",!D.dineInOrders),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${D.dineInOrders?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${D.dineInOrders?"translate-x-6":"translate-x-1"}`})})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(mu,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"In-Store Orders"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>ye("inStoreOrders",!D.inStoreOrders),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${D.inStoreOrders?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${D.inStoreOrders?"translate-x-6":"translate-x-1"}`})})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(yl,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Takeaway Orders"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>ye("takeawayOrders",!D.takeawayOrders),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${D.takeawayOrders?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${D.takeawayOrders?"translate-x-6":"translate-x-1"}`})})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(So,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Delivery Orders"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>ye("deliveryOrders",!D.deliveryOrders),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${D.deliveryOrders?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${D.deliveryOrders?"translate-x-6":"translate-x-1"}`})})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:e.jsx(St,{size:12,className:"text-white"})}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cashier Can Cancel Order"})]}),e.jsxs("select",{value:D.cashierCanCancelOrder,onChange:M=>ye("cashierCanCancelOrder",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-primary font-medium",children:[e.jsx("option",{value:"No",children:"No"}),e.jsx("option",{value:"Yes",children:"Yes"})]})]})]}):t==="delivery"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(yl,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Free Delivery In (KM)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Distance within which delivery is free"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:B.freeDeliveryIn,onChange:M=>ae("freeDeliveryIn",M.target.value),className:"flex-1 w-full pl-2 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("span",{className:"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md text-gray-600",children:"km"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(H0,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Delivery Fee per KM"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Cost per kilometer for delivery"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:B.deliveryFeePerKm,onChange:M=>ae("deliveryFeePerKm",M.target.value),className:"flex-1 w-full pl-2 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("span",{className:"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md text-gray-600",children:"€"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(gh,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Maximum Delivery Range"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Maximum distance for delivery service"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:B.maximumDeliveryRange,onChange:M=>ae("maximumDeliveryRange",M.target.value),className:"flex-1 w-full pl-2 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("span",{className:"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md text-gray-600",children:"km"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ko,{size:16,className:"text-primary"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Minimum Delivery Order Amount"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Minimum order value for delivery"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:B.minimumDeliveryOrderAmount,onChange:M=>ae("minimumDeliveryOrderAmount",M.target.value),className:"flex-1 w-full pl-2 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("span",{className:"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md text-gray-600",children:"€"})]})]})]}):t==="schedule"?e.jsx("div",{className:"col-span-full",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 2xl:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Monday"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),e.jsx("input",{type:"time",value:F.monday.open,onChange:M=>g("monday","open",M.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),e.jsx("input",{type:"time",value:F.monday.close,onChange:M=>g("monday","close",M.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>U("monday"),className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(ol,{size:12})}),e.jsx("button",{onClick:()=>S("monday"),className:"w-6 h-6 bg-primary text-white rounded flex items-center justify-center hover:bg-primary/80 transition-colors",children:e.jsx(ia,{size:12})})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Tuesday"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),e.jsx("input",{type:"time",value:F.tuesday.open,onChange:M=>g("tuesday","open",M.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),e.jsx("input",{type:"time",value:F.tuesday.close,onChange:M=>g("tuesday","close",M.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>U("tuesday"),className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(ol,{size:12})}),e.jsx("button",{onClick:()=>S("tuesday"),className:"w-6 h-6 bg-primary text-white rounded flex items-center justify-center hover:bg-primary/80 transition-colors",children:e.jsx(ia,{size:12})})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Wednesday"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),e.jsx("input",{type:"time",value:F.wednesday.open,onChange:M=>g("wednesday","open",M.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),e.jsx("input",{type:"time",value:F.wednesday.close,onChange:M=>g("wednesday","close",M.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>U("wednesday"),className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(ol,{size:12})}),e.jsx("button",{onClick:()=>S("wednesday"),className:"w-6 h-6 bg-primary text-white rounded flex items-center justify-center hover:bg-primary/80 transition-colors",children:e.jsx(ia,{size:12})})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Thursday"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),e.jsx("input",{type:"time",value:F.thursday.open,onChange:M=>g("thursday","open",M.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),e.jsx("input",{type:"time",value:F.thursday.close,onChange:M=>g("thursday","close",M.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>U("thursday"),className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(ol,{size:12})}),e.jsx("button",{onClick:()=>S("thursday"),className:"w-6 h-6 bg-primary text-white rounded flex items-center justify-center hover:bg-primary/80 transition-colors",children:e.jsx(ia,{size:12})})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Friday"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),e.jsx("input",{type:"time",value:F.friday.open,onChange:M=>g("friday","open",M.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),e.jsx("input",{type:"time",value:F.friday.close,onChange:M=>g("friday","close",M.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>U("friday"),className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(ol,{size:12})}),e.jsx("button",{onClick:()=>S("friday"),className:"w-6 h-6 bg-primary text-white rounded flex items-center justify-center hover:bg-primary/80 transition-colors",children:e.jsx(ia,{size:12})})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Saturday"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),e.jsx("input",{type:"time",value:F.saturday.open,onChange:M=>g("saturday","open",M.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),e.jsx("input",{type:"time",value:F.saturday.close,onChange:M=>g("saturday","close",M.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>U("saturday"),className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(ol,{size:12})}),e.jsx("button",{onClick:()=>S("saturday"),className:"w-6 h-6 bg-primary text-white rounded flex items-center justify-center hover:bg-primary/80 transition-colors",children:e.jsx(ia,{size:12})})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Sunday"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),e.jsx("input",{type:"time",value:F.sunday.open,onChange:M=>g("sunday","open",M.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),e.jsx("input",{type:"time",value:F.sunday.close,onChange:M=>g("sunday","close",M.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded bg-blue-50 focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>U("sunday"),className:"w-6 h-6 bg-red-500 text-white rounded flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx(ol,{size:12})}),e.jsx("button",{onClick:()=>S("sunday"),className:"w-6 h-6 bg-primary text-white rounded flex items-center justify-center hover:bg-primary/80 transition-colors",children:e.jsx(ia,{size:12})})]})]})]})})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Theme"}),e.jsxs("select",{value:p.defaultTheme,onChange:M=>Y("defaultTheme",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Blue Theme",children:"Blue Theme"}),e.jsx("option",{value:"Dark Blue Theme",children:"Dark Blue Theme"}),e.jsx("option",{value:"Green Theme",children:"Green Theme"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Keyboard"}),e.jsxs("select",{value:p.selectKeyboard,onChange:M=>Y("selectKeyboard",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"System Keyboard",children:"System Keyboard"}),e.jsx("option",{value:"GBoard",children:"GBoard"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Order Bell"}),e.jsxs("select",{value:p.selectOrderBell,onChange:M=>Y("selectOrderBell",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"Bell 1",children:"Bell 1"}),e.jsx("option",{value:"Bell 2",children:"Bell 2"}),e.jsx("option",{value:"Bell 3",children:"Bell 3"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Auto Save Interval"}),e.jsxs("select",{value:p.autoSaveInterval,onChange:M=>Y("autoSaveInterval",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"1",children:"1 minute"}),e.jsx("option",{value:"3",children:"3 minutes"}),e.jsx("option",{value:"5",children:"5 minutes"}),e.jsx("option",{value:"10",children:"10 minutes"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sound Alert"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>Y("soundAlert",!p.soundAlert),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${p.soundAlert?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${p.soundAlert?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:"ml-3 text-sm text-gray-600",children:p.soundAlert?"On":"Off"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notifications"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>Y("notifications",!p.notifications),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${p.notifications?"bg-primary":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${p.notifications?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:"ml-3 text-sm text-gray-600",children:p.notifications?"On":"Off"})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:X,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Reset to Default"}),e.jsx("button",{onClick:ee,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"Save Changes"})]})]})}),_e&&e.jsx("div",{className:"fixed inset-0  bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center bg-primary text-white p-4",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Create Schedule For ",ie?ie.charAt(0).toUpperCase()+ie.slice(1):""]}),e.jsx("button",{onClick:C,className:" text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(St,{size:20})})]}),e.jsx("div",{className:"p-6 relative",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start time :"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"time",value:Ae.open,onChange:M=>O("open",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-2",children:[e.jsx($s,{size:16,className:"text-gray-400"}),e.jsx("button",{onClick:()=>{const Q=new Date().toTimeString().slice(0,5);O("open",Q)},className:"text-gray-400 hover:text-gray-600",children:"▶"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End time :"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"time",value:Ae.close,onChange:M=>O("close",M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-2",children:[e.jsx($s,{size:16,className:"text-gray-400"}),e.jsx("button",{onClick:()=>{const Q=new Date().toTimeString().slice(0,5);O("close",Q)},className:"text-gray-400 hover:text-gray-600",children:"▶"})]})]})]})]})}),e.jsx("div",{className:"p-6 border-t border-gray-200 flex justify-end",children:e.jsx("button",{onClick:k,className:"px-6 py-2 bg-primary text-white font-medium rounded-lg hover:bg-primary/90 transition-colors shadow-sm",children:"Submit"})})]})}),le&&e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[e.jsx("div",{className:"flex justify-center pt-6 pb-4",children:e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-2xl font-bold",children:"!"})})})}),e.jsxs("div",{className:"px-6 pb-6 text-center",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"Want to delete this schedule"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"If you select Yes the time schedule will be deleted"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:V,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"No"}),e.jsx("button",{onClick:H,className:"px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Yes"})]})]})]})})]})},xh=({label:s,onClick:t,className:r=""})=>e.jsx("button",{type:"button",onClick:()=>t(s),className:`flex items-center justify-center rounded-lg h-14 text-lg font-semibold border border-gray-200 bg-white hover:bg-gray-50 active:translate-y-[1px] transition ${r}`,children:s});function p6(){const s=ka(),{themeColors:t}=Ur(),[r,n]=v.useState(""),[o,c]=v.useState(""),[d,m]=v.useState(""),[h,x]=v.useState("old"),[p,w]=v.useState(!1),[N,_]=v.useState(""),[D,L]=v.useState(""),[B,z]=v.useState(!1),[q,R]=v.useState(!1),[F,T]=v.useState(!1),I=v.useMemo(()=>!(!r||!o||!d||o!==d||o.length<4||o===r),[r,o,d]),se=he=>{_(""),L("");const ie=/^(\d)$/.test(String(he)),Ee=(Ae,re)=>{he==="bksp"?Ae(re.slice(0,-1)):he==="clear"?Ae(""):ie&&re.length<4&&Ae(re+String(he))};h==="old"&&Ee(n,r),h==="new"&&Ee(c,o),h==="confirm"&&Ee(m,d),console.log("activeField:",h,"old:",r,"new:",o,"confirm:",d)},oe=async he=>{if(he.preventDefault(),_(""),L(""),!!I)try{w(!0);const ie=localStorage.getItem("currentEmployee");if(!ie){_("No logged-in user found");return}let Ee=null;try{Ee=JSON.parse(ie)?.id}catch{}if(!Ee){_("Invalid user session");return}console.log("Submitting change password with:",{employeeId:Ee,oldPassword:r,newPassword:o});const Ae=await window.myAPI?.changeEmployeePassword(Ee,r,o);console.log("Change password result:",Ae),Ae?.success?(L("Password changed successfully"),n(""),c(""),m(""),x("old")):_(Ae?.message||"Failed to change password")}catch{_("Failed to change password")}finally{w(!1)}},_e=({value:he,onFocus:ie,label:Ee,isActive:Ae,visible:re,onToggleVisible:le})=>{const J=Math.min(4,he.length);re?he.padEnd(4," "):"".padStart(J,"•");const Ce=new Array(4).fill(null).map((Se,He)=>{const Y=He<J,be=re?he[He]||"":Y?"•":"";return e.jsx("div",{className:`h-12 rounded-lg border flex items-center justify-center text-xl font-semibold ${Y?"border-primary bg-primaryExtraLight text-primary":"border-gray-200 bg-white text-gray-500"}`,children:be},He)});return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:Ee}),e.jsx("div",{className:`w-full rounded-xl ${Ae?"ring-2":""}`,style:{ringColor:Ae?t.primaryLight:void 0},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:ie,className:"flex-1",children:e.jsx("div",{className:`grid grid-cols-4 gap-3 p-1 rounded-lg ${Ae?"bg-primaryExtraLight":""}`,children:Ce})}),e.jsx("button",{type:"button",onClick:le,className:"p-2 text-gray-600 hover:text-gray-800",children:re?e.jsx(kh,{size:18}):e.jsx(vn,{size:18})})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"4-digit numeric PIN"})]})};return e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 w-full",children:e.jsxs("div",{className:"max-w-4xl mx-auto mt-8",children:[e.jsxs("button",{type:"button",onClick:()=>s(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-4",children:[e.jsx(Eu,{size:18})," Back"]}),e.jsxs("div",{className:"rounded-2xl p-5 md:p-6",style:{background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.08), 0 8px 16px rgba(0, 0, 0, 0.04)",border:"1px solid rgba(0,0,0,0.04)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(XN,{size:22,className:"text-primary"}),e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Change Password"})]}),e.jsxs("form",{onSubmit:oe,className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(_e,{label:"Old Password",value:r,onFocus:()=>x("old"),isActive:h==="old",visible:B,onToggleVisible:()=>z(he=>!he)}),e.jsx(_e,{label:"New Password",value:o,onFocus:()=>x("new"),isActive:h==="new",visible:q,onToggleVisible:()=>R(he=>!he)}),e.jsx(_e,{label:"Confirm Password",value:d,onFocus:()=>x("confirm"),isActive:h==="confirm",visible:F,onToggleVisible:()=>T(he=>!he)}),N&&e.jsx("div",{className:"text-sm text-red-600",children:N}),D&&e.jsx("div",{className:"text-sm text-green-600",children:D}),e.jsxs("div",{className:"flex gap-3 pt-1",children:[e.jsx("button",{type:"submit",disabled:!I||p,className:`px-4 py-2 rounded-lg text-white font-semibold btn-lifted ${I&&!p?"bg-primary hover:bg-primary/90":"bg-gray-400 cursor-not-allowed"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ch,{size:16}),p?"Saving...":"Change Password"]})}),e.jsx("button",{type:"button",onClick:()=>{n(""),c(""),m(""),x("old"),_(""),L("")},className:"px-4 py-2 rounded-lg font-semibold border border-gray-200 bg-white hover:bg-gray-50",children:"Reset"})]})]}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 select-none",children:[["1","2","3","4","5","6","7","8","9"].map(he=>e.jsx(xh,{label:he,onClick:se},he)),e.jsx(xh,{label:"bksp",onClick:()=>se("bksp"),className:"col-span-1"}),e.jsx(xh,{label:"0",onClick:se}),e.jsx(xh,{label:"clear",onClick:()=>se("clear"),className:"col-span-1"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Tap a field, then use the keypad to enter 4 digits."})]})]})]})]})})}const y6=()=>{const[s,t]=v.useState("2025-09-12"),[r,n]=v.useState("09:00"),[o,c]=v.useState(""),[d,m]=v.useState(""),[h,x]=v.useState(!1),p={payments:[{type:"Cash",amount:1250.5},{type:"Card",amount:890.25},{type:"Digital",amount:340.75},{type:"Contactless",amount:156.8},{type:"Mobile Pay",amount:89.45},{type:"Gift Card",amount:45.2},{type:"Store Credit",amount:23.1},{type:"Split Payment",amount:78.9}],taxes:[{category:"VAT 21%",taxes:420.15,net:2e3},{category:"VAT 9%",taxes:45.3,net:503.33},{category:"VAT 13.5%",taxes:67.85,net:502.59},{category:"VAT 23%",taxes:89.45,net:388.91},{category:"Zero Rate",taxes:0,net:125},{category:"Exempt",taxes:0,net:89.5}],transactions:{sales:{count:45,gross:2480.5,taxes:465.45,net:2015.05},refund:{count:2,gross:-45,taxes:-9.45,net:-35.55},void:{count:1,gross:-25,taxes:-5.25,net:-19.75},tip:{count:12,gross:120,taxes:0,net:120}}},w=p.transactions.sales.count+p.transactions.refund.count+p.transactions.void.count+p.transactions.tip.count,N=p.transactions.sales.gross+p.transactions.refund.gross+p.transactions.void.gross+p.transactions.tip.gross,_=p.transactions.sales.taxes+p.transactions.refund.taxes+p.transactions.void.taxes+p.transactions.tip.taxes,D=p.transactions.sales.net+p.transactions.refund.net+p.transactions.void.net+p.transactions.tip.net,L=[{type:"Sales",count:p.transactions.sales.count,gross:p.transactions.sales.gross,taxes:p.transactions.sales.taxes,net:p.transactions.sales.net,bgColor:"bg-green-50",icon:e.jsx(ko,{className:"w-4 h-4 text-yellow-600"})},{type:"Refund",count:p.transactions.refund.count,gross:p.transactions.refund.gross,taxes:p.transactions.refund.taxes,net:p.transactions.refund.net,bgColor:"bg-yellow-50",icon:e.jsx($h,{className:"w-4 h-4 text-blue-600"})},{type:"Void",count:p.transactions.void.count,gross:p.transactions.void.gross,taxes:p.transactions.void.taxes,net:p.transactions.void.net,bgColor:"bg-red-50",icon:e.jsx(St,{className:"w-4 h-4 text-red-600"})},{type:"Tip",count:p.transactions.tip.count,gross:p.transactions.tip.gross,taxes:p.transactions.tip.taxes,net:p.transactions.tip.net,bgColor:"bg-yellow-50",icon:e.jsx(Zb,{className:"w-4 h-4 text-yellow-600"})},{type:"Total",count:w,gross:N,taxes:_,net:D,bgColor:"bg-blue-50",icon:e.jsx(og,{className:"w-4 h-4 text-blue-600"})}],B=()=>{console.log("Generating report for:",{startDate:s,startTime:r,endDate:o,endTime:d}),x(!0)};return e.jsxs("div",{className:"min-h-screen",children:[e.jsx("style",{jsx:!0,children:`
        input[type="date"], input[type="time"] {
          color-scheme: light;
          position: relative;
          z-index: 1;
        }
        input[type="date"]::-webkit-calendar-picker-indicator,
        input[type="time"]::-webkit-calendar-picker-indicator {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          width: auto;
          height: auto;
          color: transparent;
          background: transparent;
          cursor: pointer;
          z-index: 2;
        }
        input[type="date"]::-webkit-inner-spin-button,
        input[type="date"]::-webkit-clear-button,
        input[type="time"]::-webkit-inner-spin-button,
        input[type="time"]::-webkit-clear-button {
          display: none;
          -webkit-appearance: none;
        }
        input[type="date"]:focus,
        input[type="time"]:focus {
          outline: none;
          z-index: 10;
          position: relative;
        }
        input[type="date"]:focus::-webkit-calendar-picker-indicator,
        input[type="time"]:focus::-webkit-calendar-picker-indicator {
          z-index: 11;
        }
      `}),e.jsx("div",{className:"bg-white p-6 mb-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pc,{size:24,className:"text-primary"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Daily Report (Z-Report)"})]}),e.jsxs("p",{className:"text-gray-600 mt-1 text-sm bg-[#F3F4F6] rounded-lg p-2",children:["Register: ",e.jsx("span",{className:"font-bold text-primary",children:"001"})]})]}),e.jsxs("div",{className:"flex items-end gap-2 bg-[#F8F9FA] border border-gray-300 rounded-lg p-2",children:[e.jsxs("div",{className:"flex flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Start Date:"}),e.jsxs("div",{className:"flex items-center gap-1 bg-white border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("input",{type:"date",value:s,onChange:z=>t(z.target.value),onClick:z=>z.stopPropagation(),onFocus:z=>z.stopPropagation(),onBlur:z=>z.stopPropagation(),className:"text-sm border-none outline-none bg-transparent w-20"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("input",{type:"time",value:r,onChange:z=>n(z.target.value),onClick:z=>z.stopPropagation(),onFocus:z=>z.stopPropagation(),onBlur:z=>z.stopPropagation(),className:"text-sm border-none outline-none bg-transparent w-16"})]})]}),e.jsxs("div",{className:"flex flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"End Date:"}),e.jsxs("div",{className:"flex items-center gap-1 bg-white border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("input",{type:"date",value:o,onChange:z=>c(z.target.value),onClick:z=>z.stopPropagation(),onFocus:z=>z.stopPropagation(),onBlur:z=>z.stopPropagation(),className:"text-sm border-none outline-none bg-transparent w-20",placeholder:"mm/dd/yyyy"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("input",{type:"time",value:d,onChange:z=>m(z.target.value),onClick:z=>z.stopPropagation(),onFocus:z=>z.stopPropagation(),onBlur:z=>z.stopPropagation(),className:"text-sm border-none outline-none bg-transparent w-16",placeholder:"--:--"})]})]}),e.jsxs("button",{onClick:B,className:"bg-primary text-white px-4 py-3 rounded-lg text-sm font-medium flex items-center gap-2 whitespace-nowrap",children:[e.jsx(ug,{className:"w-4 h-4"}),"Generate Report"]})]})]})}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("div",{className:"flex-1 bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center bg-primary",children:e.jsx(Fc,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Payment Summary"})]}),h?e.jsx("div",{className:"flex-1 max-h-48 overflow-y-auto pr-2",children:e.jsx("div",{className:"space-y-2",children:p.payments.map((z,q)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-700",children:[z.type,":"]}),e.jsxs("span",{className:"font-medium text-gray-800",children:["€",z.amount.toFixed(2)]})]},q))})}):e.jsx("div",{className:"flex-1 flex items-center justify-center h-32",children:e.jsx("p",{className:"text-gray-500 text-sm",children:'Click "Generate Report" to view payment summary'})})]})}),e.jsx("div",{className:"flex-1 bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center bg-primary",children:e.jsx(Oc,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Tax Breakdown"})]}),h?e.jsx("div",{className:"flex-1 max-h-48 overflow-y-auto pr-2",children:e.jsx("div",{className:"space-y-2",children:p.taxes.map((z,q)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-700",children:[z.category,":"]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium text-gray-800",children:["€",z.taxes.toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["€",z.net.toFixed(2)]})]})]},q))})}):e.jsx("div",{className:"flex-1 flex items-center justify-center h-32",children:e.jsx("p",{className:"text-gray-500 text-sm",children:'Click "Generate Report" to view tax breakdown'})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsx("div",{className:"flex gap-6",children:e.jsxs("div",{className:"w-80",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-primary",children:e.jsx(Oc,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-black",children:"Transaction Summary"})]}),e.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs font-medium",children:w})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-5 gap-4 text-xs font-semibold text-gray-600 uppercase tracking-wide",children:[e.jsx("div",{children:"TYPE"}),e.jsx("div",{children:"COUNT"}),e.jsx("div",{children:"GROSS"}),e.jsx("div",{children:"TAXES"}),e.jsx("div",{children:"NET"})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:L.map((z,q)=>e.jsx("div",{className:`px-4 py-3 ${z.bgColor}`,children:e.jsxs("div",{className:"grid grid-cols-5 gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[z.icon,e.jsx("span",{className:"text-sm font-medium text-gray-800",children:z.type})]}),e.jsx("div",{className:"text-sm text-gray-600",children:h?z.count:"-"}),e.jsx("div",{className:"text-sm text-gray-600",children:h?`€${z.gross.toFixed(2)}`:"-"}),e.jsx("div",{className:"text-sm text-gray-600",children:h?`€${z.taxes.toFixed(2)}`:"-"}),e.jsx("div",{className:"text-sm text-gray-600",children:h?`€${z.net.toFixed(2)}`:"-"})]})},q))})]})]})})})]})},b6=({isOpen:s,onClose:t,onSave:r})=>{const{addRider:n}=Eg(),[o,c]=v.useState({fullName:"",mobile:"",address:"",status:"",vehicleType:"",regNo:"",licenceExpiry:"",insuranceExpiry:"",blockOnExpiry:!1,payPreset:"hourly",perDrop:"",perKm:"",basePerShift:"",hourlyRate:"",deliveryFeeKeptBy:"restaurant",riderShare:"",cashTipsKeptByRider:"yes",cardTipsPayout:"no",payoutMethod:"cash",ibanBic:""}),[d,m]=v.useState(!1),[h,x]=v.useState(!1),[p,w]=v.useState(!1),N=R=>{const{name:F,value:T,type:I,checked:se}=R.target;c(oe=>({...oe,[F]:I==="checkbox"?se:T}))},_=R=>{m(R==="car"),x(R==="car")},D=R=>{w(R==="split")},L=R=>{c(F=>({...F,payPreset:R,perDrop:R==="mileage"?"2.50":"",perKm:R==="mileage"?"0.50":"",hourlyRate:R==="hourly"?"12.00":"",basePerShift:R==="custom"?"50.00":""}))},B=()=>{const F=["fullName","mobile","status","vehicleType"].filter(T=>!o[T]||o[T].trim()==="");return F.length>0?(alert(`Please fill in all required fields: ${F.join(", ")}`),!1):!0},z=()=>{if(!B())return;const R=n(o);r(R),t()},q=()=>{if(!B())return;const R=n(o);r(R),c({fullName:"",mobile:"",address:"",status:"",vehicleType:"",regNo:"",licenceExpiry:"",insuranceExpiry:"",blockOnExpiry:!1,payPreset:"hourly",perDrop:"",perKm:"",basePerShift:"",hourlyRate:"",deliveryFeeKeptBy:"restaurant",riderShare:"",cashTipsKeptByRider:"yes",cardTipsPayout:"no",payoutMethod:"cash",ibanBic:""})};return s?e.jsxs("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:R=>{R.target===R.currentTarget&&t()},children:[e.jsx("style",{jsx:!0,children:`
        input[type="date"] {
          position: relative;
          z-index: 1;
        }
        input[type="date"]::-webkit-calendar-picker-indicator {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          width: auto;
          height: auto;
          color: transparent;
          background: transparent;
          cursor: pointer;
          z-index: 2;
        }
        input[type="date"]::-webkit-inner-spin-button,
        input[type="date"]::-webkit-clear-button {
          display: none;
          -webkit-appearance: none;
        }
        .modal-content {
          pointer-events: auto;
          position: relative;
          z-index: 1;
        }
        .modal-content input[type="date"]:focus {
          z-index: 10;
          position: relative;
        }
        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 40;
        }
      `}),e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-xl max-h-[90vh] overflow-hidden modal-content",onClick:R=>R.stopPropagation(),children:[e.jsxs("div",{className:"flex bg-primary items-center justify-between px-6 py-3 border-b border-gray-200",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Add Rider"})}),e.jsx("button",{onClick:t,className:"p-2 rounded-lg transition-colors",children:e.jsx(St,{className:"w-5 h-5 text-white"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:e.jsxs("form",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h4",{className:"text-lg font-medium text-gray-800",children:"Identity & Contact"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Full name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"fullName",value:o.fullName,onChange:N,placeholder:"e.g., Ahsan Ali",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Mobile ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"mobile",value:o.mobile,onChange:N,placeholder:"+353...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("input",{type:"text",name:"address",value:o.address,onChange:N,placeholder:"street, city, Eircode",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"status",value:o.status,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:!0,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"on-leave",children:"On Leave"})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Mobile required, Eircode helpful for zones."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h4",{className:"text-lg font-medium text-gray-800",children:"Vehicle & Compliance"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Vehicle type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"vehicleType",value:o.vehicleType,onChange:R=>{N(R),_(R.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:!0,children:[e.jsx("option",{value:"",children:"Select Vehicle"}),e.jsx("option",{value:"bike",children:"Bike"}),e.jsx("option",{value:"car",children:"Car"}),e.jsx("option",{value:"e-bike",children:"E-bike"})]})]}),d&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Reg no."}),e.jsx("input",{type:"text",name:"regNo",value:o.regNo,onChange:N,placeholder:"if Car",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Licence expiry"}),e.jsx("input",{type:"date",name:"licenceExpiry",value:o.licenceExpiry,onChange:N,onClick:R=>R.stopPropagation(),onFocus:R=>R.stopPropagation(),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),h&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Insurance expiry"}),e.jsx("input",{type:"date",name:"insuranceExpiry",value:o.insuranceExpiry,onChange:N,onClick:R=>R.stopPropagation(),onFocus:R=>R.stopPropagation(),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"blockOnExpiry",name:"blockOnExpiry",checked:o.blockOnExpiry,onChange:N,className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary/20"}),e.jsx("label",{htmlFor:"blockOnExpiry",className:"text-sm font-medium text-gray-700",children:"Block on expiry"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h4",{className:"text-lg font-medium text-gray-800",children:"Pay Rules"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Preset"}),e.jsxs("select",{name:"payPreset",value:o.payPreset,onChange:R=>{N(R),L(R.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[e.jsx("option",{value:"mileage",children:"Mileage"}),e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Per-drop"}),e.jsx("input",{type:"number",name:"perDrop",value:o.perDrop,onChange:N,placeholder:"€ per delivery",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Per-km"}),e.jsx("input",{type:"number",name:"perKm",value:o.perKm,onChange:N,placeholder:"€ per km",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Base per shift"}),e.jsx("input",{type:"number",name:"basePerShift",value:o.basePerShift,onChange:N,placeholder:"€ (optional)",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hourly rate"}),e.jsx("input",{type:"number",name:"hourlyRate",value:o.hourlyRate,onChange:N,placeholder:"€ (optional)",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Per-drop + Per-km payment structure."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h4",{className:"text-lg font-medium text-gray-800",children:"Tips & Delivery-Fee Policy"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Delivery fee kept by ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"deliveryFeeKeptBy",value:o.deliveryFeeKeptBy,onChange:R=>{N(R),D(R.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[e.jsx("option",{value:"restaurant",children:"Restaurant"}),e.jsx("option",{value:"rider",children:"Rider"}),e.jsx("option",{value:"split",children:"Split %"})]})]}),p&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rider share %"}),e.jsx("input",{type:"number",name:"riderShare",value:o.riderShare,onChange:N,step:"0.1",min:"0",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Cash tips kept by rider ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"cashTipsKeptByRider",value:o.cashTipsKeptByRider,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Card tips payout ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"cardTipsPayout",value:o.cardTipsPayout,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[e.jsx("option",{value:"no",children:"No"}),e.jsx("option",{value:"weekly",children:"Yes (weekly)"}),e.jsx("option",{value:"share",children:"Yes (% share)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payout method"}),e.jsxs("select",{name:"payoutMethod",value:o.payoutMethod,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank",children:"Bank"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"IBAN/BIC"}),e.jsx("input",{type:"text",name:"ibanBic",value:o.ibanBic,onChange:N,placeholder:"if Bank",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"})]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-2 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"Save"}),e.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save & New"})]})]})]}):null},v6=({isOpen:s,onClose:t,rider:r,onManageOrders:n,onProcessCashout:o})=>{const c=ka();if(!s)return null;const d={rider:r?.name||"N/A",settledOrders:2,unsettledOrders:0,totalDrops:{count:3,rate:3,total:9},totalDistance:{km:6.7,rate:.75,total:5.03},totalDeliveryFees:14.03,totalTips:8.5,totalPayout:16.91};return e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex bg-primary rounded-t-lg items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Cashout Summary"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(St,{className:"w-5 h-5 text-white"})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("p",{className:"text-lg font-medium text-gray-800",children:["Rider: ",d.rider]})}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 bg-[#FFC824] p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800 mb-2",children:"SETTLED ORDERS"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-900",children:d.settledOrders})]}),e.jsxs("div",{className:"flex-1 bg-[#3395FF] p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-sm font-medium text-white mb-2",children:"UNSETTLED ORDERS"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:d.unsettledOrders})]})]})}),e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Payment Breakdown:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yl,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-gray-700",children:"Total Drops"})]}),e.jsxs("span",{className:"font-medium text-gray-800",children:[d.totalDrops.count," x €",d.totalDrops.rate," = €",d.totalDrops.total.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($s,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-gray-700",children:"Total Distance"})]}),e.jsxs("span",{className:"font-medium text-gray-800",children:[d.totalDistance.km," km x €",d.totalDistance.rate," = €",d.totalDistance.total.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(KN,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-gray-700",children:"Total Delivery Fees"})]}),e.jsxs("span",{className:"font-medium text-gray-800",children:["€",d.totalDeliveryFees.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fc,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-gray-700",children:"Total Tips"})]}),e.jsxs("span",{className:"font-medium text-gray-800",children:["€",d.totalTips.toFixed(2)]})]})]})]}),e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("div",{className:"bg-[#28A745] p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-semibold text-white",children:"Total Payout"}),e.jsxs("span",{className:"text-2xl font-bold text-white",children:["€",d.totalPayout.toFixed(2)]})]})})}),e.jsxs("div",{className:"p-6 flex gap-3",children:[e.jsx("button",{onClick:()=>{t(),c("/dashboard/manage-orders")},className:"flex-1 bg-primary text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"MANAGE ORDERS"}),e.jsx("button",{onClick:o,className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"PROCESS CASHOUT"})]})]})})},j6=({isOpen:s,onClose:t,rider:r,onManageOrders:n,onProcessCashout:o})=>e.jsx(v6,{isOpen:s,onClose:t,rider:r,onManageOrders:n,onProcessCashout:o}),w6=({isOpen:s,onClose:t,rider:r,reportData:n})=>{if(!s)return null;const o=n||{rider:r?.name||"N/A",orders:2,amount:54.75,distance:6.7},c=()=>{const d=window.open("","_blank");d.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Delivery Report - ${o.rider}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              background: white;
              color: #333;
            }
            .report-header {
              text-align: center;
              margin-bottom: 30px;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
            }
            .report-content {
              line-height: 1.8;
              font-size: 16px;
            }
            .report-item {
              margin-bottom: 10px;
            }
            @media print {
              body { margin: 0; }
            }
          </style>
        </head>
        <body>
          <div class="report-header">
            <h1>Delivery Report</h1>
            <p>Generated on ${new Date().toLocaleDateString()}</p>
          </div>
          <div class="report-content">
            <div class="report-item">Delivery report generated for ${o.rider}</div>
            <div class="report-item">Orders: ${o.orders}</div>
            <div class="report-item">Amount: €${o.amount.toFixed(2)}</div>
            <div class="report-item">Distance: ${o.distance} km</div>
          </div>
        </body>
      </html>
    `),d.document.close(),d.print(),d.close()};return e.jsx("div",{className:"fixed inset-0 bg-[#00000089] bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex bg-primary rounded-t-lg items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Print Delivery Report"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(St,{className:"w-5 h-5 text-white"})})]}),e.jsx("div",{className:"px-6 py-6 border-b border-gray-200",children:e.jsx("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-3 text-gray-800",children:[e.jsxs("div",{className:"text-base leading-relaxed",children:["Delivery report generated for ",e.jsx("span",{className:"font-semibold",children:o.rider})]}),e.jsxs("div",{className:"text-base leading-relaxed",children:["Orders: ",e.jsx("span",{className:"font-semibold",children:o.orders})]}),e.jsxs("div",{className:"text-base leading-relaxed",children:["Amount: ",e.jsxs("span",{className:"font-semibold",children:["€",o.amount.toFixed(2)]})]}),e.jsxs("div",{className:"text-base leading-relaxed",children:["Distance: ",e.jsxs("span",{className:"font-semibold",children:[o.distance," km"]})]})]})})}),e.jsxs("button",{onClick:c,className:"flex-1 mx-6 my-2 bg-primary hover:bg-primary/90 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ah,{className:"w-4 h-4"}),"Print"]})]})})},N6=({isOpen:s,onClose:t,rider:r,reportData:n})=>e.jsx(w6,{isOpen:s,onClose:t,rider:r,reportData:n});Iu.register(Rj,Ij,Nj,zu,Tj,Oj,Dj,_j);const S6=()=>{const{selectedRider:s,setSelectedRider:t}=Eg(),[r,n]=v.useState("2025-09-12"),[o,c]=v.useState("16:30"),[d,m]=v.useState("2025-09-12"),[h,x]=v.useState("23:59"),[p,w]=v.useState(!1),[N,_]=v.useState(!1),[D,L]=v.useState(!1),[B,z]=v.useState(!1),q=Ae=>{console.log("New rider added:",Ae),w(!1)},R=async Ae=>(console.log("Rider assigned:",Ae),_(!1),!0),F=()=>{_(!1)},T=()=>{console.log("Opening AddRider modal, closing AssignRider if open"),_(!1),w(!0)},I=()=>{console.log("Opening AssignRider modal, closing AddRider if open"),w(!1),_(!0)},se=()=>{if(!s){alert("Please select a rider first");return}L(!0)},oe=()=>{console.log("Managing orders for rider:",s),L(!1)},_e=()=>{console.log("Processing cashout for rider:",s),L(!1)},he=()=>{if(!s){alert("Please select a rider first");return}z(!0)},ie={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Deliveries",data:[12,20,15,24,18,18,23],borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,fill:!0,tension:.4,pointBackgroundColor:"#3B82F6",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]},Ee={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:"Delivery Performance Over Time",font:{size:16,weight:"bold"},padding:{bottom:20}}},scales:{y:{beginAtZero:!0,max:25,ticks:{stepSize:5,font:{size:11}},grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{ticks:{font:{size:11}},grid:{display:!1}}},elements:{point:{hoverBackgroundColor:"#3B82F6"}}};return e.jsxs("div",{className:"min-h-screen",children:[e.jsx("style",{jsx:!0,children:`
        input[type="date"], input[type="time"] {
          color-scheme: light;
          position: relative;
          z-index: 1;
        }
        input[type="date"]::-webkit-calendar-picker-indicator,
        input[type="time"]::-webkit-calendar-picker-indicator {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          width: auto;
          height: auto;
          color: transparent;
          background: transparent;
          cursor: pointer;
          z-index: 2;
        }
        input[type="date"]::-webkit-inner-spin-button,
        input[type="date"]::-webkit-clear-button,
        input[type="time"]::-webkit-inner-spin-button,
        input[type="time"]::-webkit-clear-button {
          display: none;
          -webkit-appearance: none;
        }
        input[type="date"]:focus,
        input[type="time"]:focus {
          outline: none;
          z-index: 10;
          position: relative;
        }
        input[type="date"]:focus::-webkit-calendar-picker-indicator,
        input[type="time"]:focus::-webkit-calendar-picker-indicator {
          z-index: 11;
        }
      `}),e.jsxs("div",{className:"bg-white p-6 mb-6 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pu,{size:24,className:"text-primary"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Delivery Report"})]}),e.jsxs("p",{className:"text-gray-600 mt-1 text-sm bg-[#F3F4F6] rounded-lg p-2",children:["Register: ",e.jsx("span",{className:"font-bold text-primary",children:"001"})]})]}),e.jsxs("div",{className:"flex items-end gap-2 bg-[#F8F9FA] border border-gray-300 rounded-lg p-2",children:[e.jsxs("div",{className:"flex flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Start Date:"}),e.jsxs("div",{className:"flex items-center gap-1 bg-white border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("input",{type:"date",value:r,onChange:Ae=>n(Ae.target.value),onClick:Ae=>Ae.stopPropagation(),onFocus:Ae=>Ae.stopPropagation(),onBlur:Ae=>Ae.stopPropagation(),className:"text-sm border-none outline-none bg-transparent w-20"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("input",{type:"time",value:o,onChange:Ae=>c(Ae.target.value),onClick:Ae=>Ae.stopPropagation(),onFocus:Ae=>Ae.stopPropagation(),onBlur:Ae=>Ae.stopPropagation(),className:"text-sm border-none outline-none bg-transparent w-16"})]})]}),e.jsxs("div",{className:"flex flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"End Date:"}),e.jsxs("div",{className:"flex items-center gap-1 bg-white border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("input",{type:"date",value:d,onChange:Ae=>m(Ae.target.value),onClick:Ae=>Ae.stopPropagation(),onFocus:Ae=>Ae.stopPropagation(),onBlur:Ae=>Ae.stopPropagation(),className:"text-sm border-none outline-none bg-transparent w-20"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("input",{type:"time",value:h,onChange:Ae=>x(Ae.target.value),onClick:Ae=>Ae.stopPropagation(),onFocus:Ae=>Ae.stopPropagation(),onBlur:Ae=>Ae.stopPropagation(),className:"text-sm border-none outline-none bg-transparent w-16"})]})]}),e.jsx("button",{className:"bg-primary text-white px-4 py-3 rounded-lg text-sm font-medium flex items-center gap-2 whitespace-nowrap",children:"Print Delivery Summary"})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsx("button",{onClick:I,className:"bg-gray-600 hover:bg-gray-700 text-white p-4 rounded-lg text-sm font-medium",children:"Select Rider"}),e.jsx("button",{onClick:T,className:"bg-primary/80 text-white p-4 rounded-lg text-sm font-medium flex items-center gap-2",children:"Add Rider"}),e.jsx("div",{className:"bg-gray-200 text-gray-600 p-4 rounded-lg text-sm",children:s?s.name:"No rider selected"}),e.jsx("button",{onClick:he,className:"bg-primary text-white p-4 rounded-lg text-sm font-medium flex items-center gap-2",children:"Print Report"}),e.jsx("button",{onClick:se,className:"bg-red-600 hover:bg-red-700 text-white p-4 rounded-lg text-sm font-medium flex items-center gap-2",children:"Print Report & Cash Out"})]})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-60 space-y-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Ch,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Total Deliveries"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:"0"})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Gb,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Delivery Revenue"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:"€0.00"})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Lc,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Active Riders"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:"0"})]})]})})]}),e.jsx("div",{className:"flex-1 bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsx("div",{className:"h-80",children:e.jsx(Lj,{data:ie,options:Ee})})})]}),p&&!N&&e.jsx(b6,{isOpen:p,onClose:()=>w(!1),onSave:q}),N&&!p&&!D&&e.jsx(Tg,{isOpen:N,onClose:()=>_(!1),onBack:F,order:{orderNumber:"001"},onAssignRider:R,onStatusUpdate:()=>{}}),D&&!p&&!N&&!B&&e.jsx(j6,{isOpen:D,onClose:()=>L(!1),rider:s,onManageOrders:oe,onProcessCashout:_e}),B&&!p&&!N&&!D&&e.jsx(N6,{isOpen:B,onClose:()=>z(!1),rider:s,reportData:{rider:s?.name||"Sarah O'Connor",orders:2,amount:54.75,distance:6.7}})]})},C6=()=>{const[s,t]=v.useState("delivery"),r=[{id:"delivery",name:"Delivery Reports",icon:e.jsx(So,{size:18}),component:e.jsx(S6,{})},{id:"daily",name:"Daily Reports",icon:e.jsx(Pc,{size:18}),component:e.jsx(y6,{})}];return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:r.map(n=>e.jsxs("button",{onClick:()=>t(n.id),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${s===n.id?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.icon,n.name]},n.id))})})}),e.jsx("div",{children:r.find(n=>n.id===s)?.component})]})};console.log("main.jsx loading...");const ea=({children:s})=>{try{return s}catch(t){return console.error("Error in component:",t),e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h1",{children:"Something went wrong"}),e.jsx("p",{children:t.message})]})}},k6=iC([{path:"/",element:e.jsx(ea,{children:e.jsx(bC,{children:e.jsx(YC,{children:e.jsx(CC,{children:e.jsx(UC,{children:e.jsx(kC,{children:e.jsx(ZC,{})})})})})})}),children:[{index:!0,element:e.jsx(ea,{children:e.jsx(e3,{})})},{path:"login",element:e.jsx(ea,{children:e.jsx(vC,{})})},{path:"license",element:e.jsx(ea,{children:e.jsx(t3,{})})},{path:"dashboard",element:e.jsx(ea,{children:e.jsx(EC,{})}),children:[{index:!0,element:e.jsx(ea,{children:e.jsx(H5,{})})},{path:"manage-orders",element:e.jsx(ea,{children:e.jsx(K5,{})})},{path:"reservations",element:e.jsx(ea,{children:e.jsx(V5,{})})},{path:"kds",element:e.jsx(ea,{children:e.jsx(G5,{})})},{path:"food-management",element:e.jsx(ea,{children:e.jsx(s6,{})})},{path:"food-management/add-food",element:e.jsx(ea,{children:e.jsx(Fb,{})})},{path:"food-management/edit-food/:id",element:e.jsx(ea,{children:e.jsx(Fb,{})})},{path:"employee-management",element:e.jsx(ea,{children:e.jsx(n6,{})})},{path:"customer-management",element:e.jsx(ea,{children:e.jsx(m6,{})})},{path:"table-management",element:e.jsx(ea,{children:e.jsx(l6,{})})},{path:"coupons",element:e.jsx(ea,{children:e.jsx(u6,{})})},{path:"sales",element:e.jsx(ea,{children:e.jsx(XC,{})})},{path:"reports",element:e.jsx(ea,{children:e.jsx(C6,{})})},{path:"admin-panel",element:e.jsx(ea,{children:e.jsx(x6,{})})},{path:"application-settings",element:e.jsx(ea,{children:e.jsx(g6,{})})},{path:"change-password",element:e.jsx(ea,{children:e.jsx(p6,{})})}]},{path:"*",element:e.jsx("div",{children:e.jsx("h1",{children:"404 - Page not found"})})}]}]);console.log("Router created, attempting to render...");const ig=document.getElementById("root");console.log("Root element:",ig);ig?(Xw.createRoot(ig).render(e.jsx(v.StrictMode,{children:e.jsx(yC,{router:k6})})),console.log("App rendered successfully")):console.error("Root element not found!");
